"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[8072],{98072(e,t,i){i.r(t),i.d(t,{default:()=>g});var o=i(42918),a=i(77251),l=i(10525),s=i(70203),r=i(65045),n=i(58955),c=i(15675),u=i(65525),d=i(64074),h=i(32118);const p=(0,r.n)()(e=>({paper:{margin:e.spacing(),padding:e.spacing()},submit:{marginTop:25,marginBottom:100,display:"block"}}));function b(e){return a.isElectron?{localPath:window.require("electron").webUtils.getPathForFile(e),locationType:"LocalPathLocation"}:(0,s.storeBlobLocation)({blob:e})}const g=(0,d.observer)(function({model:e}){const{classes:t}=p(),[i,s]=(0,o.useState)(""),[r,d]=(0,o.useState)(`MultiWiggle${Date.now()}`);return(0,h.jsxs)(n.A,{className:t.paper,children:[(0,h.jsxs)("ul",{children:[(0,h.jsx)("li",{children:"Enter list of URLs for bigwig files in the textbox"}),(0,h.jsx)("li",{children:"Or, use the button below the text box to select files from your computer"})]}),(0,h.jsx)(c.A,{multiline:!0,fullWidth:!0,rows:10,value:i,placeholder:"Paste list of URLs here, or use file selector below",variant:"outlined",onChange:e=>{s(e.target.value)}}),(0,h.jsxs)(u.A,{variant:"outlined",component:"label",children:["Choose Files from your computer",(0,h.jsx)("input",{type:"file",hidden:!0,multiple:!0,onChange:({target:e})=>{s(JSON.stringify([...e.files||[]].map(e=>({type:"BigWigAdapter",bigWigLocation:b(e),source:e.name})),null,2))}})]}),(0,h.jsx)(c.A,{value:r,helperText:"Track name",onChange:e=>{d(e.target.value)}}),(0,h.jsx)(u.A,{variant:"contained",className:t.submit,onClick:()=>{!function({trackName:e,val:t,model:i}){const o=(0,a.getSession)(i);try{const a=[`${e.toLowerCase().replaceAll(" ","_")}-${Date.now()}`,o.adminMode?"":"-sessionTrack"].join("");let s;try{s=JSON.parse(t)}catch(e){s=t.split(/\n|\r\n|\r/).map(e=>e.trim()).filter(e=>!!e)}const r="string"==typeof s[0]?{bigWigs:s}:{subadapters:s};(0,l.QW)(o)&&(o.addTrackConf({trackId:a,type:"MultiQuantitativeTrack",name:e,assemblyNames:[i.assembly],adapter:{type:"MultiWiggleAdapter",...r}}),i.view?.showTrack(a)),i.clearData(),(0,l.lO)(o)&&o.hideWidget(i)}catch(e){console.error(e),o.notifyError(`${e}`,e)}}({trackName:r,val:i,model:e})},children:"Submit"}),(0,h.jsx)("p",{children:"Additional notes: "}),(0,h.jsxs)("ul",{children:[(0,h.jsxs)("li",{children:["The list of bigwig files in the text box can be a list of URLs, or a list of elements like"," ",(0,h.jsx)("code",{children:'[{"type":"BigWigAdapter","bigWigLocation":{"uri":"http://host/file.bw"}, "color":"green","source":"name for subtrack"}]'})," ","to apply e.g. the color attribute to the view"]}),(0,h.jsx)("li",{children:'Adding local files will update the textbox with JSON contents that are ready to submit with the "Submit" button'})]})]})})}}]);
//# sourceMappingURL=8072.0b76a762.chunk.js.map