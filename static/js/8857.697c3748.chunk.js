"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[8857],{48679(e,t,o){o.d(t,{V:()=>n});var l=o(11259),s=o(77251),a=o(52901),r=o(27535);function n(e,t){const{features:o,regions:n,bpPerPx:i,scaleOpts:c,height:g,ticks:{values:h},displayCrossHatches:f,colorCallback:u,config:T,offset:G=0,staticColor:I,stopToken:d,lastCheck:_=(0,a.jL)(d)}=t,C=n[0],E=C.start,b=C.end,p=C.reversed,k=1/i,L=(b-E)*k,P=g-2*G,v=(0,l.QZ)(T,"clipColor"),H=(0,r.getScale)({...c,range:[0,P]}).domain(),w=H[0],W=H[1],m=W-w,y="log"===c.scaleType,F=0!==m?P/m:0,R=Math.log(2),S=Math.log(w)/R,A=Math.log(W)/R-S,M=0!==A?P/A:0,x=y?e=>(0,s.clamp)(P-(Math.log(e)/R-S)*M,0,P)+G:e=>(0,s.clamp)(P-(e-w)*F,0,P)+G;let N,O=Number.NEGATIVE_INFINITY;const j=[];if(I){e.beginPath(),e.strokeStyle=I;const t=[];for(const l of o.values()){(0,a.As)(_);const o=l.get("start"),s=l.get("end"),n=p?(b-s)*k:(o-E)*k,i=p?(b-o)*k:(s-E)*k;((0|n)!=(0|O)||i-n>1)&&(j.push(l),O=n);const c=l.get("score"),g=x(c);c>W?t.push({leftPx:n,w:i-n+r.WIGGLE_FUDGE_FACTOR,high:!0}):c<w&&!y&&t.push({leftPx:n,w:i-n+r.WIGGLE_FUDGE_FACTOR,high:!1});const h=void 0!==N?x(N):g;p?(e.moveTo(i,h),e.lineTo(i,g),e.lineTo(n,g)):(e.moveTo(n,h),e.lineTo(n,g),e.lineTo(i,g)),N=c}if(e.stroke(),t.length>0){e.fillStyle=v;for(const{leftPx:o,w:l,high:s}of t)s?e.fillRect(o,G,l,r.WIGGLE_CLIP_HEIGHT):e.fillRect(o,P-r.WIGGLE_CLIP_HEIGHT,l,r.WIGGLE_CLIP_HEIGHT)}}else for(const t of o.values()){(0,a.As)(_);const o=t.get("start"),l=t.get("end"),s=p?(b-l)*k:(o-E)*k,n=p?(b-o)*k:(l-E)*k;((0|s)!=(0|O)||n-s>1)&&(j.push(t),O=s);const i=t.get("score"),c=x(i),g=n-s+r.WIGGLE_FUDGE_FACTOR,h=u(t,i);e.beginPath(),e.strokeStyle=h;const f=void 0!==N?x(N):c;p?(e.moveTo(n,f),e.lineTo(n,c),e.lineTo(s,c)):(e.moveTo(s,f),e.lineTo(s,c),e.lineTo(n,c)),e.stroke(),N=i,i>W?(e.fillStyle=v,e.fillRect(s,G,g,r.WIGGLE_CLIP_HEIGHT)):i<w&&!y&&(e.fillStyle=v,e.fillRect(s,P-r.WIGGLE_CLIP_HEIGHT,g,r.WIGGLE_CLIP_HEIGHT))}if(f){e.lineWidth=1,e.strokeStyle="rgba(200,200,200,0.5)";for(const t of h)e.beginPath(),e.moveTo(0,Math.round(x(t))),e.lineTo(L,Math.round(x(t))),e.stroke()}return{reducedFeatures:j}}},88857(e,t,o){o.d(t,{renderLinePlot:()=>c});var l=o(77251),s=o(83640),a=o(16876),r=o(26931),n=o(48679),i=o(27535);async function c(e,t){const{config:o,height:c,regions:g,bpPerPx:h,statusCallback:f=()=>{}}=e,u=g[0],T=(u.end-u.start)/h,G=(0,i.getColorCallback)(o,{defaultColor:"grey"}),{reducedFeatures:I,...d}=await(0,l.updateStatus)("Rendering plot",f,()=>(0,s.u)(T,c,e,o=>(0,n.V)(o,{...e,features:t,colorCallback:G}))),_={...d,features:I.map(i.serializeWiggleFeature),height:c,width:T};return(0,a.lk)(_,(0,r.X)(d))}}}]);
//# sourceMappingURL=8857.697c3748.chunk.js.map