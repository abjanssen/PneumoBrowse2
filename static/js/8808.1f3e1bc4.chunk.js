"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[8808],{88808(e,n,t){t.r(n),t.d(n,{default:()=>x});var s=t(30128),o=t(54825),a=t(35703),r=t(69566),l=t(17367),c=t(43165),i=t(71320),d=t(62088),u=t(51049),m=t(23886),f=t(43102),p=t(82033),b=t(44460);const h=(0,s.lazy)(()=>t.e(7308).then(t.bind(t,27308))),w=(0,s.lazy)(()=>t.e(6126).then(t.bind(t,6126))),x=(0,r.observer)(function({model:e,feature:n}){const[t]=(0,s.useState)(()=>(0,i.BK)());(0,s.useEffect)(()=>()=>{(0,i.rV)(t)},[t]);const{upDownBp:r}=t,x=(0,s.useRef)(null),[g,y]=(0,s.useState)(!1),[C,j]=(0,s.useState)(!1),v=(0,m.getSession)(e),A=e.view?.assemblyNames?.[0],N=(0,s.useMemo)(()=>new f.A(n),[n]),{sequence:S,error:k}=(0,p.p)({assemblyName:A,session:v,feature:N,upDownBp:r,forceLoad:C});return(0,s.useEffect)(()=>{t.setFeature(n)},[t,n]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(c.A,{model:t}),(0,b.jsx)(l.A,{ref:x,model:t,extraItems:[{label:"Open in dialog",onClick:()=>{y(!0)}}]})]}),g?(0,b.jsxs)("div",{children:["Open in dialog...",(0,b.jsx)(s.Suspense,{fallback:(0,b.jsx)(u.A,{}),children:(0,b.jsx)(w,{model:e,sequenceFeatureDetails:t,feature:n,handleClose:()=>{y(!1)}})})]}):(0,b.jsxs)("div",{children:["gene"===n.type?(0,b.jsx)(o.A,{children:"Note: inspect subfeature sequences for protein/CDS computations"}):null,k?(0,b.jsx)(d.A,{error:k}):S?"error"in S?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.A,{color:"error",children:S.error}),(0,b.jsx)(a.A,{variant:"contained",color:"inherit",onClick:()=>{j(!0)},children:"Force load"})]}):(0,b.jsx)(s.Suspense,{fallback:(0,b.jsx)(u.A,{}),children:(0,b.jsx)(h,{ref:x,feature:n,sequence:S,model:t})}):(0,b.jsx)(u.A,{})]})]})})},17367(e,n,t){t.d(n,{A:()=>d});var s=t(30128),o=t(66143),a=t(66820),r=t(69566),l=t(9378),c=t(44460);const i=(0,s.lazy)(()=>t.e(3266).then(t.bind(t,83266))),d=(0,r.observer)((0,s.forwardRef)(function({model:e,extraItems:n=[]},r){if("function"==typeof r)throw new Error("needs a non function ref");const[d,u]=(0,s.useState)(!1),{showCoordinatesSetting:m,showGenomicCoordsOption:f}=e;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(l.A,{menuItems:[{label:"Copy plaintext",onClick:async()=>{const{default:e}=await t.e(2899).then(t.t.bind(t,72899,23)),n=r?.current;n&&e(n.textContent||"",{format:"text/plain"})}},{label:"Copy HTML",onClick:async()=>{const{default:e}=await t.e(2899).then(t.t.bind(t,72899,23)),n=r?.current;n&&e(n.outerHTML,{format:"text/html"})}},{label:"Download plaintext",onClick:async()=>{const{saveAs:e}=await t.e(1611).then(t.bind(t,91611)),n=r?.current;n&&e(new Blob([n.textContent||""],{type:"text/plain;charset=utf-8"}),"sequence.txt")}},{label:"Download HTML",onClick:async()=>{const{saveAs:e}=await t.e(1611).then(t.bind(t,91611)),n=r?.current;n&&e(new Blob([n.outerHTML||""],{type:"text/html;charset=utf-8"}),"sequence.html")}},...n,{label:"Show coordinates?",type:"subMenu",subMenu:[{label:"No coordinates",type:"radio",checked:"none"===m,onClick:()=>{e.setShowCoordinates("none")}},{label:"Coordinates relative to feature start",type:"radio",checked:"relative"===m,onClick:()=>{e.setShowCoordinates("relative")}},...f?[{label:"Coordinates relative to genome (only available for continuous genome based sequence types)",type:"radio",checked:"genomic"===m,onClick:()=>{e.setShowCoordinates("genomic")}}]:[]]},{label:"Settings",icon:a.A,onClick:()=>{u(!0)}}],children:(0,c.jsx)(o.A,{})}),d?(0,c.jsx)(i,{model:e,handleClose:()=>{u(!1)}}):null]})}))},43165(e,n,t){t.d(n,{A:()=>d});var s=t(1241),o=t(84037),a=t(79291),r=t(69566),l=t(46625),c=t(44460);const i=(0,l.n)()({formControl:{margin:0,marginLeft:4}}),d=(0,r.observer)(function({model:e}){const{classes:n}=i(),{intronBp:t,upDownBp:r,mode:l,hasCDS:d,hasExonOrCDS:u}=e;return(0,c.jsx)(s.A,{className:n.formControl,children:(0,c.jsx)(o.A,{size:"small",value:l,onChange:n=>{e.setMode(n.target.value)},children:Object.entries({...d?{cds:"CDS"}:{},...d?{protein:"Protein"}:{},...u?{cdna:"cDNA"}:{},...u?{gene:"Genomic w/ full introns"}:{},...u?{gene_updownstream:`Genomic w/ full introns +/- ${r}bp up+down stream`}:{},...u?{gene_collapsed_intron:`Genomic w/ ${t}bp intron`}:{},...u?{gene_updownstream_collapsed_intron:`Genomic w/ ${t}bp intron +/- ${r}bp up+down stream `}:{},...u?{}:{genomic:"Genomic"},...u?{}:{genomic_sequence_updownstream:`Genomic +/- ${r}bp up+down stream`}}).map(([e,n])=>(0,c.jsx)(a.A,{value:e,children:n},e))})})})},82033(e,n,t){t.d(n,{p:()=>r});var s=t(30128),o=t(17378);async function a({start:e,end:n,refName:t,assemblyName:s,session:a}){const{rpcManager:r,assemblyManager:l}=a,c=await l.waitForAssembly(s);if(!c)throw new Error("assembly not found");const i="getSequence",d=(0,o.FI)(c,["sequence","adapter"]),u=c.getCanonicalRefName2(t),m=c.getSeqAdapterRefName(u);return await r.call(i,"CoreGetSequence",{adapterConfig:d,sessionId:i,region:{start:e,end:n,refName:m,assemblyName:s}})??""}function r({session:e,feature:n,upDownBp:t,forceLoad:o,assemblyName:r,shouldFetch:l=!0}){const[c,i]=(0,s.useState)(),[d,u]=(0,s.useState)(),[m,f]=(0,s.useState)(!1),p=(0,s.useMemo)(()=>e&&l?{start:n.get("start"),end:n.get("end"),refName:n.get("refName"),assemblyName:r,upDownBp:t,forceLoad:o,sessionId:e.id||"default"}:null,[e,n,r,t,o,l]);return(0,s.useEffect)(()=>{if(!p)return i(void 0),void u(void 0);(async()=>{try{f(!0),u(void 0);const{start:n,end:t,refName:s,assemblyName:o,upDownBp:r,forceLoad:l}=p;if(!l&&t-n>2e7)return void i({error:'Genomic sequence larger than 20000000bp, use "force load" button to display'});const c=n-r,d=t+r,[m,b,h]=await Promise.all([a({start:n,end:t,refName:s,assemblyName:o,session:e}),a({start:Math.max(0,c),end:n,refName:s,assemblyName:o,session:e}),a({start:t,end:d,refName:s,assemblyName:o,session:e})]);i({seq:m,upstream:b,downstream:h})}catch(e){u(e)}finally{f(!1)}})()},[p,e]),{sequence:c,loading:m,error:d}}},66820(e,n,t){t.d(n,{A:()=>a});var s=t(91383),o=t(44460);const a=(0,s.A)((0,o.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings")}}]);
//# sourceMappingURL=8808.1f3e1bc4.chunk.js.map