{"version":3,"file":"static/js/8211.467751db.chunk.js","mappings":"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","sources":["webpack://@jbrowse/web/../../plugins/wiggle/src/MultiLinearWiggleDisplay/components/MultiWiggleColorLegend.tsx","webpack://@jbrowse/web/../../plugins/wiggle/src/MultiLinearWiggleDisplay/components/MultiWiggleLegendBarWrapper.tsx","webpack://@jbrowse/web/../../plugins/wiggle/src/MultiLinearWiggleDisplay/components/MultiWiggleLegendBar.tsx","webpack://@jbrowse/web/../../plugins/wiggle/src/MultiLinearWiggleDisplay/components/RectBg.tsx","webpack://@jbrowse/web/../../plugins/wiggle/src/MultiLinearWiggleDisplay/components/TreeSidebar.tsx","webpack://@jbrowse/web/../../plugins/wiggle/src/MultiLinearWiggleDisplay/components/WiggleDisplayComponent.tsx","webpack://@jbrowse/web/../../plugins/wiggle/src/MultiLinearWiggleDisplay/components/LegendItem.tsx","webpack://@jbrowse/web/../../plugins/wiggle/src/MultiLinearWiggleDisplay/components/LegendItemText.tsx","webpack://@jbrowse/web/../../plugins/wiggle/src/MultiLinearWiggleDisplay/components/ColorLegend.tsx","webpack://@jbrowse/web/../../plugins/wiggle/src/MultiLinearWiggleDisplay/components/FullHeightScaleBar.tsx","webpack://@jbrowse/web/../../plugins/wiggle/src/MultiLinearWiggleDisplay/components/ScoreLegend.tsx","webpack://@jbrowse/web/../../plugins/wiggle/src/MultiLinearWiggleDisplay/components/IndividualScaleBars.tsx","webpack://@jbrowse/web/../../plugins/wiggle/src/MultiLinearWiggleDisplay/components/YScaleBarsWrapper.tsx","webpack://@jbrowse/web/../../plugins/wiggle/src/MultiLinearWiggleDisplay/components/YScaleBars.tsx","webpack://@jbrowse/web/../../plugins/wiggle/src/MultiLinearWiggleDisplay/components/constants.ts","webpack://@jbrowse/web/../../plugins/wiggle/src/MultiLinearWiggleDisplay/components/util.ts"],"sourcesContent":["import { useMemo } from 'react'\n\nimport { getFillProps } from '@jbrowse/core/util'\nimport { useTheme } from '@mui/material'\nimport { observer } from 'mobx-react'\n\nimport RectBg from './RectBg.tsx'\n\nimport type { Source } from '../../util.ts'\n\nconst LegendItem = function ({\n  source,\n  idx,\n  rowHeight,\n}: {\n  source: Source\n  idx: number\n  rowHeight: number\n}) {\n  const { color } = source\n  const colorBoxWidth = 15\n  return color ? (\n    <RectBg\n      y={idx * rowHeight}\n      x={0}\n      width={colorBoxWidth + 0.5}\n      height={rowHeight + 0.5}\n      color={color}\n    />\n  ) : null\n}\n\nconst LegendItemText = function ({\n  source,\n  idx,\n  rowHeight,\n  textFillProps,\n}: {\n  source: Source\n  idx: number\n  rowHeight: number\n  textFillProps: ReturnType<typeof getFillProps>\n}) {\n  const { color, name } = source\n  const svgFontSize = Math.min(rowHeight, 12)\n  const colorBoxWidth = 15\n  return (\n    <text\n      y={(idx + 0.5) * rowHeight}\n      x={color ? colorBoxWidth + 2 : 0}\n      fontSize={svgFontSize}\n      dominantBaseline=\"central\"\n      {...textFillProps}\n    >\n      {name}\n    </text>\n  )\n}\n\nconst MultiWiggleColorLegend = observer(function MultiWiggleColorLegend({\n  model,\n  labelWidth,\n}: {\n  model: {\n    canDisplayLegendLabels: boolean\n    rowHeight: number\n    sources?: Source[]\n  }\n  labelWidth: number\n}) {\n  const { canDisplayLegendLabels, rowHeight, sources } = model\n  const colorBoxWidth = 15\n  const theme = useTheme()\n\n  const hasColors = useMemo(\n    () => sources?.some(s => s.color) ?? false,\n    [sources],\n  )\n  const legendWidth = labelWidth + (hasColors ? colorBoxWidth + 5 : 0)\n\n  const textFillProps = useMemo(\n    () => getFillProps(theme.palette.text.primary),\n    [theme.palette.text.primary],\n  )\n\n  return sources ? (\n    <>\n      {canDisplayLegendLabels ? (\n        <RectBg\n          y={0}\n          x={0}\n          width={legendWidth}\n          height={(sources.length + 0.25) * rowHeight}\n        />\n      ) : null}\n      {/* Render all background rectangles first */}\n      {sources.map((source, idx) => (\n        <LegendItem\n          key={`${source.name}-${idx}`}\n          source={source}\n          idx={idx}\n          rowHeight={rowHeight}\n        />\n      ))}\n      {/* Then render all text elements on top */}\n      {canDisplayLegendLabels\n        ? sources.map((source, idx) => (\n            <LegendItemText\n              key={`${source.name}-text-${idx}`}\n              source={source}\n              idx={idx}\n              rowHeight={rowHeight}\n              textFillProps={textFillProps}\n            />\n          ))\n        : null}\n    </>\n  ) : null\n})\n\nexport default MultiWiggleColorLegend\n","import { getContainingView } from '@jbrowse/core/util'\nimport { observer } from 'mobx-react'\n\nimport type { LegendBarModel } from './treeTypes.ts'\n\nconst MultiWiggleLegendBarWrapper = observer(\n  function MultiWiggleLegendBarWrapper({\n    children,\n    model,\n    exportSVG,\n  }: {\n    model: LegendBarModel\n    children: React.ReactNode\n    exportSVG?: boolean\n  }) {\n    const { id, scrollTop, height, hierarchy, treeAreaWidth, showTree } = model\n    const clipid = `legend-${typeof jest === 'undefined' ? id : 'test'}`\n    const leftOffset = hierarchy && showTree ? treeAreaWidth : 0\n    return exportSVG ? (\n      <>\n        <defs>\n          <clipPath id={clipid}>\n            <rect x={0} y={0} width={1000} height={height} />\n          </clipPath>\n        </defs>\n        <g clipPath={`url(#${clipid})`}>\n          <g transform={`translate(0,${-scrollTop})`}>{children}</g>\n        </g>\n      </>\n    ) : (\n      <svg\n        style={{\n          position: 'absolute',\n          top: 0,\n          left: leftOffset,\n          zIndex: 100,\n          pointerEvents: 'none',\n          height: model.totalHeight,\n          width: getContainingView(model).width,\n        }}\n      >\n        {children}\n      </svg>\n    )\n  },\n)\n\nexport default MultiWiggleLegendBarWrapper\n","import { useMemo } from 'react'\n\nimport { measureText } from '@jbrowse/core/util'\nimport { observer } from 'mobx-react'\n\nimport MultiWiggleColorLegend from './MultiWiggleColorLegend.tsx'\nimport MultiWiggleLegendBarWrapper from './MultiWiggleLegendBarWrapper.tsx'\n\nimport type { LegendBarModel } from './treeTypes.ts'\n\nconst MultiWiggleLegendBar = observer(function MultiWiggleLegendBar(props: {\n  model: LegendBarModel\n  orientation?: string\n  exportSVG?: boolean\n}) {\n  const { model } = props\n  const { canDisplayLegendLabels, rowHeight, sources } = model\n  const svgFontSize = Math.min(rowHeight, 12)\n\n  const labelWidth = useMemo(() => {\n    if (!sources) {\n      return 0\n    }\n    let maxWidth = 0\n    for (const s of sources) {\n      const width = canDisplayLegendLabels\n        ? measureText(s.name, svgFontSize) + 10\n        : 20\n      if (width > maxWidth) {\n        maxWidth = width\n      }\n    }\n    return maxWidth\n  }, [sources, svgFontSize, canDisplayLegendLabels])\n\n  return sources ? (\n    <MultiWiggleLegendBarWrapper {...props}>\n      <MultiWiggleColorLegend model={model} labelWidth={labelWidth} />\n    </MultiWiggleLegendBarWrapper>\n  ) : null\n})\n\nexport default MultiWiggleLegendBar\n","import { getFillProps } from '@jbrowse/core/util'\nimport { alpha, useTheme } from '@mui/material'\n\nimport { SIDEBAR_BACKGROUND_OPACITY } from './constants.ts'\n\nconst RectBg = ({\n  x,\n  y,\n  width,\n  height,\n  color,\n}: {\n  x: number\n  y: number\n  width: number\n  height: number\n  color?: string\n}) => {\n  const theme = useTheme()\n  return (\n    <rect\n      pointerEvents=\"auto\"\n      x={x}\n      y={y}\n      width={width}\n      height={height}\n      {...getFillProps(\n        color ||\n          alpha(theme.palette.background.paper, SIDEBAR_BACKGROUND_OPACITY),\n      )}\n    />\n  )\n}\n\nexport default RectBg\n","import { useCallback, useEffect, useState } from 'react'\n\nimport { ResizeHandle } from '@jbrowse/core/ui'\nimport { getContainingView } from '@jbrowse/core/util'\nimport Flatbush from '@jbrowse/core/util/flatbush'\nimport { makeStyles } from '@jbrowse/core/util/tss-react'\nimport { Menu, MenuItem, alpha } from '@mui/material'\nimport { autorun } from 'mobx'\nimport { observer } from 'mobx-react'\n\nimport { SIDEBAR_BACKGROUND_OPACITY } from './constants.ts'\n\nimport type { ClusterHierarchyNode, TreeSidebarModel } from './treeTypes.ts'\nimport type { LinearGenomeViewModel } from '@jbrowse/plugin-linear-genome-view'\n\ninterface MenuAnchor {\n  x: number\n  y: number\n  names: string[]\n}\n\nconst useStyles = makeStyles()(theme => ({\n  resizeHandle: {\n    position: 'absolute',\n    top: 0,\n    height: '100%',\n    width: 4,\n    zIndex: 101,\n    background: 'transparent',\n    '&:hover': {\n      background: theme.palette.divider,\n    },\n  },\n  treeBackground: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    background: alpha(\n      theme.palette.background.paper,\n      SIDEBAR_BACKGROUND_OPACITY,\n    ),\n  },\n}))\n\nfunction getDescendantNames(node: ClusterHierarchyNode): string[] {\n  if (!node.children?.length) {\n    return [node.data.name]\n  }\n  return node.children.flatMap(child => getDescendantNames(child))\n}\n\n/**\n * TreeSidebar renders a hierarchical cluster tree alongside the wiggle display.\n *\n * Architecture:\n * - treeCanvas: Draws the tree structure lines (via treeDrawingAutorun)\n * - mouseoverCanvas: Draws hover highlights spanning full width (via treeDrawingAutorun)\n * - interaction div: Captures mouse events over the tree area\n *\n * The sticky container keeps the tree visible when the parent scrolls.\n * The tree drawing uses translate(-scrollTop) to show the correct portion.\n */\nconst TreeSidebar = observer(function TreeSidebar({\n  model,\n}: {\n  model: TreeSidebarModel\n}) {\n  const { classes } = useStyles()\n  const { width: viewWidth } = getContainingView(model) as LinearGenomeViewModel\n  const [nodeIndex, setNodeIndex] = useState<Flatbush | null>(null)\n  const [nodeData, setNodeData] = useState<ClusterHierarchyNode[]>([])\n  const [menuAnchor, setMenuAnchor] = useState<MenuAnchor | null>(null)\n\n  const { hierarchy, treeAreaWidth, height, scrollTop, showTree, sources } =\n    model\n\n  // biome-ignore lint/correctness/useExhaustiveDependencies:\n  const treeCanvasRef = useCallback(\n    (ref: HTMLCanvasElement | null) => {\n      model.setTreeCanvasRef(ref)\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [model, treeAreaWidth, height],\n  )\n\n  // biome-ignore lint/correctness/useExhaustiveDependencies:\n  const mouseoverCanvasRef = useCallback(\n    (ref: HTMLCanvasElement | null) => {\n      model.setMouseoverCanvasRef(ref)\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [model, viewWidth, height],\n  )\n\n  // Build spatial index for tree branch nodes to enable hover detection\n  useEffect(() => {\n    return autorun(\n      function treeSpatialIndexAutorun() {\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        const { treeAreaWidth: _t, hierarchy: h, totalHeight: th } = model\n        // IMPORTANT: We must access these observables for MobX to track them as\n        // dependencies. Without this, the autorun won't re-run when they change.\n        // Do not remove - this ensures the spatial index rebuilds when row height changes.\n        // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n        th\n        if (!h) {\n          setNodeIndex(null)\n          setNodeData([])\n          return\n        }\n\n        const nodes = h.descendants().filter(node => node.children?.length)\n\n        const index = new Flatbush(nodes.length)\n        const hitRadius = 8\n\n        for (const node of nodes) {\n          const x = node.y!\n          const y = node.x!\n          index.add(x - hitRadius, y - hitRadius, x + hitRadius, y + hitRadius)\n        }\n\n        index.finish()\n        setNodeIndex(index)\n        setNodeData(nodes)\n      },\n      { name: 'TreeSpatialIndex' },\n    )\n  }, [model])\n\n  const handleMouseMove = useCallback(\n    (event: React.MouseEvent) => {\n      if (!hierarchy || !nodeIndex) {\n        return\n      }\n      const rect = event.currentTarget.getBoundingClientRect()\n      const x = event.clientX - rect.left\n      const y = event.clientY - rect.top + scrollTop\n\n      const results = nodeIndex.search(x, y, x, y)\n      const node = results.length > 0 ? nodeData[results[0]!] : undefined\n      if (node) {\n        const descendantNames = getDescendantNames(node)\n        model.setHoveredTreeNode({\n          node,\n          descendantNames,\n        })\n      } else {\n        model.setHoveredTreeNode(undefined)\n      }\n    },\n    [hierarchy, nodeIndex, nodeData, scrollTop, model],\n  )\n\n  const handleMouseLeave = useCallback(() => {\n    model.setHoveredTreeNode(undefined)\n  }, [model])\n\n  const handleClick = useCallback(\n    (event: React.MouseEvent) => {\n      if (!hierarchy || !nodeIndex) {\n        return\n      }\n      const rect = event.currentTarget.getBoundingClientRect()\n      const x = event.clientX - rect.left\n      const y = event.clientY - rect.top + scrollTop\n\n      const results = nodeIndex.search(x, y, x, y)\n      const node = results.length > 0 ? nodeData[results[0]!] : undefined\n      if (node) {\n        const descendantNames = getDescendantNames(node)\n        setMenuAnchor({\n          x: event.clientX,\n          y: event.clientY,\n          names: descendantNames,\n        })\n      }\n    },\n    [hierarchy, nodeIndex, nodeData, scrollTop],\n  )\n\n  const handleCloseMenu = useCallback(() => {\n    setMenuAnchor(null)\n  }, [])\n\n  if (!hierarchy || !showTree || !sources?.length) {\n    return null\n  }\n\n  return (\n    <>\n      {/* Sticky container keeps tree visible when parent scrolls */}\n      <div\n        style={{\n          position: 'sticky',\n          top: 0,\n          left: 0,\n          height: 0,\n          zIndex: 100,\n        }}\n      >\n        {/* Tree area background */}\n        <div\n          className={classes.treeBackground}\n          style={{\n            width: treeAreaWidth,\n            height,\n          }}\n        />\n        {/* Tree structure canvas - draws lines via treeDrawingAutorun */}\n        <canvas\n          ref={treeCanvasRef}\n          width={treeAreaWidth * 2}\n          height={height * 2}\n          style={{\n            width: treeAreaWidth,\n            height,\n            position: 'absolute',\n            top: 0,\n            left: 0,\n            pointerEvents: 'none',\n          }}\n        />\n        {/* Highlight canvas - draws hover highlights via treeDrawingAutorun */}\n        <canvas\n          ref={mouseoverCanvasRef}\n          width={viewWidth}\n          height={height}\n          style={{\n            width: viewWidth,\n            height,\n            position: 'absolute',\n            top: 0,\n            left: 0,\n            zIndex: 1,\n            pointerEvents: 'none',\n          }}\n        />\n        {/* Interaction area - captures mouse events over tree */}\n        <div\n          onMouseMove={handleMouseMove}\n          onMouseLeave={handleMouseLeave}\n          onClick={handleClick}\n          style={{\n            position: 'absolute',\n            top: 0,\n            left: 0,\n            width: treeAreaWidth,\n            height,\n            zIndex: 2,\n            cursor: 'pointer',\n          }}\n        />\n      </div>\n      <ResizeHandle\n        onDrag={distance => {\n          model.setTreeAreaWidth(Math.max(50, treeAreaWidth + distance))\n          return undefined\n        }}\n        className={classes.resizeHandle}\n        style={{\n          left: treeAreaWidth,\n        }}\n        vertical\n      />\n      <Menu\n        open={!!menuAnchor}\n        onClose={handleCloseMenu}\n        anchorReference=\"anchorPosition\"\n        anchorPosition={\n          menuAnchor ? { top: menuAnchor.y, left: menuAnchor.x } : undefined\n        }\n      >\n        {model.subtreeFilter?.length ? (\n          <MenuItem\n            onClick={() => {\n              model.setSubtreeFilter(undefined)\n              handleCloseMenu()\n            }}\n          >\n            Clear subtree filter\n          </MenuItem>\n        ) : null}\n        <MenuItem\n          onClick={() => {\n            if (menuAnchor) {\n              model.setSubtreeFilter(menuAnchor.names)\n            }\n            handleCloseMenu()\n          }}\n        >\n          Show only subtree ({menuAnchor?.names.length} samples)\n        </MenuItem>\n      </Menu>\n    </>\n  )\n})\n\nexport default TreeSidebar\n","import { BaseLinearDisplayComponent } from '@jbrowse/plugin-linear-genome-view'\nimport { observer } from 'mobx-react'\n\nimport MultiWiggleLegendBar from './MultiWiggleLegendBar.tsx'\nimport TreeSidebar from './TreeSidebar.tsx'\nimport YScaleBars from './YScaleBars.tsx'\n\nimport type { WiggleDisplayModel } from '../model.ts'\n\nconst MultiLinearWiggleDisplayComponent = observer(\n  function MultiLinearWiggleDisplayComponent(props: {\n    model: WiggleDisplayModel\n  }) {\n    const { model } = props\n    const { isMultiRow } = model\n\n    return (\n      <div>\n        {isMultiRow ? (\n          <>\n            <TreeSidebar model={model} />\n            <MultiWiggleLegendBar model={model} />\n          </>\n        ) : null}\n        <BaseLinearDisplayComponent {...props} />\n        <YScaleBars model={model} />\n      </div>\n    )\n  },\n)\n\nexport default MultiLinearWiggleDisplayComponent\n","import RectBg from './RectBg.tsx'\n\nimport type { MinimalModel } from './types.ts'\nimport type { Source } from '../../util.ts'\n\nconst LegendItem = function ({\n  source,\n  idx,\n  rowHeight,\n  labelWidth,\n  model,\n  exportSVG,\n}: {\n  source: Source\n  idx: number\n  rowHeight: number\n  labelWidth: number\n  model: MinimalModel\n  exportSVG?: boolean\n}) {\n  const boxHeight = Math.min(20, rowHeight)\n  const {\n    needsCustomLegend,\n    graphType,\n    needsFullHeightScalebar,\n    rowHeightTooSmallForScalebar,\n    renderColorBoxes,\n  } = model\n  const colorBoxWidth = renderColorBoxes ? 15 : 0\n  const legendWidth = labelWidth + colorBoxWidth + 5\n  const svgOffset = exportSVG ? 10 : 0\n  const extraOffset =\n    svgOffset || (graphType && !rowHeightTooSmallForScalebar ? 50 : 0)\n  return (\n    <>\n      {needsFullHeightScalebar ? null : (\n        <RectBg\n          y={idx * rowHeight + 1}\n          x={extraOffset}\n          width={legendWidth}\n          height={boxHeight}\n        />\n      )}\n      {source.color ? (\n        <RectBg\n          y={idx * rowHeight + 1}\n          x={extraOffset}\n          width={colorBoxWidth}\n          height={needsCustomLegend ? rowHeight : boxHeight}\n          color={source.color}\n        />\n      ) : null}\n    </>\n  )\n}\n\nexport default LegendItem\n","import type { MinimalModel } from './types.ts'\nimport type { Source } from '../../util.ts'\nimport type { getFillProps } from '@jbrowse/core/util'\n\nconst LegendItemText = function ({\n  source,\n  idx,\n  rowHeight,\n  model,\n  exportSVG,\n  textFillProps,\n}: {\n  source: Source\n  idx: number\n  rowHeight: number\n  model: MinimalModel\n  exportSVG?: boolean\n  textFillProps: ReturnType<typeof getFillProps>\n}) {\n  const { graphType, rowHeightTooSmallForScalebar, renderColorBoxes } = model\n  const svgFontSize = Math.min(rowHeight, 12)\n  const canDisplayLabel = rowHeight >= 6\n  const colorBoxWidth = renderColorBoxes ? 15 : 0\n  const svgOffset = exportSVG ? 10 : 0\n  const extraOffset =\n    svgOffset || (graphType && !rowHeightTooSmallForScalebar ? 50 : 0)\n\n  return canDisplayLabel ? (\n    <text\n      y={idx * rowHeight + svgFontSize}\n      x={extraOffset + colorBoxWidth + 2}\n      fontSize={svgFontSize}\n      {...textFillProps}\n    >\n      {source.name}\n    </text>\n  ) : null\n}\n\nexport default LegendItemText\n","import { useMemo } from 'react'\n\nimport { getFillProps } from '@jbrowse/core/util'\nimport { useTheme } from '@mui/material'\nimport { observer } from 'mobx-react'\n\nimport LegendItem from './LegendItem.tsx'\nimport LegendItemText from './LegendItemText.tsx'\nimport RectBg from './RectBg.tsx'\n\nimport type { MinimalModel } from './types.ts'\n\nconst ColorLegend = observer(function ColorLegend({\n  model,\n  rowHeight,\n  exportSVG,\n}: {\n  model: MinimalModel\n  rowHeight: number\n  exportSVG?: boolean\n}) {\n  const {\n    graphType,\n    needsFullHeightScalebar,\n    rowHeightTooSmallForScalebar,\n    renderColorBoxes,\n    sources,\n    labelWidth,\n  } = model\n  const colorBoxWidth = renderColorBoxes ? 20 : 0\n  const legendWidth = labelWidth + colorBoxWidth + 5\n  const svgOffset = exportSVG ? 10 : 0\n  const extraOffset =\n    svgOffset || (graphType && !rowHeightTooSmallForScalebar ? 50 : 0)\n  const theme = useTheme()\n\n  const textFillProps = useMemo(\n    () => getFillProps(theme.palette.text.primary),\n    [theme.palette.text.primary],\n  )\n\n  return sources ? (\n    <>\n      {\n        /* 0.25 for hanging letters like g */\n        needsFullHeightScalebar ? (\n          <RectBg\n            y={0}\n            x={extraOffset}\n            width={legendWidth}\n            height={(sources.length + 0.25) * rowHeight}\n          />\n        ) : null\n      }\n      {/* Render all background rectangles first */}\n      {sources.map((source, idx) => (\n        <LegendItem\n          key={`${source.name}-${idx}`}\n          source={source}\n          idx={idx}\n          model={model}\n          rowHeight={rowHeight}\n          exportSVG={exportSVG}\n          labelWidth={legendWidth}\n        />\n      ))}\n      {/* Then render all text elements on top */}\n      {sources.map((source, idx) => (\n        <LegendItemText\n          key={`${source.name}-text-${idx}`}\n          source={source}\n          idx={idx}\n          model={model}\n          rowHeight={rowHeight}\n          exportSVG={exportSVG}\n          textFillProps={textFillProps}\n        />\n      ))}\n    </>\n  ) : null\n})\n\nexport default ColorLegend\n","import { getContainingView } from '@jbrowse/core/util'\nimport { observer } from 'mobx-react'\n\nimport ColorLegend from './ColorLegend.tsx'\nimport { getOffset } from './util.ts'\nimport YScaleBar from '../../shared/YScaleBar.tsx'\n\nimport type { WiggleDisplayModel } from '../model.ts'\nimport type { LinearGenomeViewModel } from '@jbrowse/plugin-linear-genome-view'\n\nconst FullHeightScaleBar = observer(function FullHeightScaleBar({\n  model,\n  orientation,\n  exportSVG,\n}: {\n  model: WiggleDisplayModel\n  orientation?: string\n  exportSVG?: boolean\n}) {\n  const { labelWidth } = model\n  const { width: viewWidth } = getContainingView(model) as LinearGenomeViewModel\n  return (\n    <>\n      <g transform={`translate(${!exportSVG ? getOffset(model) : 0},0)`}>\n        <YScaleBar model={model} orientation={orientation} />\n      </g>\n      <g transform={`translate(${viewWidth - labelWidth - 100},0)`}>\n        <ColorLegend exportSVG={exportSVG} model={model} rowHeight={12} />\n      </g>\n    </>\n  )\n})\n\nexport default FullHeightScaleBar\n","import { getContainingView, measureText } from '@jbrowse/core/util'\nimport { observer } from 'mobx-react'\n\nimport RectBg from './RectBg.tsx'\n\nimport type { WiggleDisplayModel } from '../model.ts'\nimport type { LinearGenomeViewModel } from '@jbrowse/plugin-linear-genome-view'\n\ntype LGV = LinearGenomeViewModel\n\nconst ScoreLegend = observer(function ScoreLegend({\n  model,\n}: {\n  model: WiggleDisplayModel\n}) {\n  const { ticks, scaleType } = model\n  const { width } = getContainingView(model) as LGV\n  const legend = `[${ticks?.values[0]}-${ticks?.values[1]}]${scaleType === 'log' ? ' (log scale)' : ''}`\n  const len = measureText(legend, 14)\n  const padding = 25\n  const xpos = width - len - padding\n  return (\n    <>\n      <RectBg y={0} x={xpos} width={len + 6} height={16} />\n      <text y={13} x={xpos}>\n        {legend}\n      </text>\n    </>\n  )\n})\n\nexport default ScoreLegend\n","import { observer } from 'mobx-react'\n\nimport ColorLegend from './ColorLegend.tsx'\nimport ScoreLegend from './ScoreLegend.tsx'\nimport YScaleBar from '../../shared/YScaleBar.tsx'\n\nimport type { WiggleDisplayModel } from '../model.ts'\n\nconst IndividualScaleBars = observer(function IndividualScaleBars({\n  model,\n  orientation,\n  exportSVG,\n}: {\n  model: WiggleDisplayModel\n  orientation?: string\n  exportSVG?: boolean\n}) {\n  const {\n    sources,\n    rowHeight,\n    rowHeightTooSmallForScalebar,\n    needsCustomLegend,\n    ticks,\n    hierarchy,\n    showTree,\n  } = model\n\n  // Skip ColorLegend when tree is showing - MultiWiggleLegendBar handles labels\n  const treeIsShowing = hierarchy && showTree\n\n  return sources?.length ? (\n    <>\n      {treeIsShowing ? null : (\n        <ColorLegend\n          exportSVG={exportSVG}\n          model={model}\n          rowHeight={model.rowHeight}\n        />\n      )}\n\n      {rowHeightTooSmallForScalebar || needsCustomLegend ? (\n        <ScoreLegend model={model} />\n      ) : (\n        sources.map((_source, idx) => (\n          <g\n            transform={`translate(0 ${rowHeight * idx})`}\n            key={`${JSON.stringify(ticks)}-${idx}`}\n          >\n            <YScaleBar model={model} orientation={orientation} />\n          </g>\n        ))\n      )}\n    </>\n  ) : null\n})\n\nexport default IndividualScaleBars\n","import { getContainingView } from '@jbrowse/core/util'\nimport { observer } from 'mobx-react'\n\nimport type { WiggleDisplayModel } from '../model.ts'\n\nconst YScaleBarsWrapper = observer(function YScaleBarsWrapper({\n  children,\n  model,\n  exportSVG,\n}: {\n  model: WiggleDisplayModel\n  children: React.ReactNode\n  exportSVG?: boolean\n}) {\n  const { height } = model\n  return exportSVG ? (\n    children\n  ) : (\n    <svg\n      style={{\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        pointerEvents: 'none',\n        height,\n        width: getContainingView(model).width,\n      }}\n    >\n      {children}\n    </svg>\n  )\n})\n\nexport default YScaleBarsWrapper\n","import { observer } from 'mobx-react'\n\nimport FullHeightScaleBar from './FullHeightScaleBar.tsx'\nimport IndividualScaleBars from './IndividualScaleBars.tsx'\nimport YScaleBarsWrapper from './YScaleBarsWrapper.tsx'\n\nimport type { WiggleDisplayModel } from '../model.ts'\n\nconst YScaleBars = observer(function YScaleBars(props: {\n  model: WiggleDisplayModel\n  orientation?: string\n  exportSVG?: boolean\n}) {\n  const { model, orientation, exportSVG } = props\n  const { showSidebar, stats, needsFullHeightScalebar, sources } = model\n  return stats && sources ? (\n    <YScaleBarsWrapper {...props}>\n      {showSidebar ? (\n        needsFullHeightScalebar ? (\n          <FullHeightScaleBar\n            model={model}\n            orientation={orientation}\n            exportSVG={exportSVG}\n          />\n        ) : (\n          <IndividualScaleBars\n            model={model}\n            orientation={orientation}\n            exportSVG={exportSVG}\n          />\n        )\n      ) : null}\n    </YScaleBarsWrapper>\n  ) : null\n})\n\nexport default YScaleBars\n","// Sidebar and label background opacity\nexport const SIDEBAR_BACKGROUND_OPACITY = 0.8\n","import { getConf } from '@jbrowse/core/configuration'\nimport {\n  getContainingTrack,\n  getContainingView,\n  measureText,\n} from '@jbrowse/core/util'\n\nimport type { WiggleDisplayModel } from '../model.ts'\nimport type { LinearGenomeViewModel } from '@jbrowse/plugin-linear-genome-view'\nimport type { GridRowId } from '@mui/x-data-grid'\n\nexport function moveUp<T extends { name: string }>(\n  arr: T[],\n  sel: GridRowId[],\n  by = 1,\n) {\n  const idxs = sel\n    .map(l => arr.findIndex(v => v.name === l))\n    .sort((a, b) => a - b)\n  let lastIdx = 0\n  for (const old of idxs) {\n    const idx = Math.max(lastIdx, old - by)\n    if (idx >= lastIdx) {\n      arr.splice(idx, 0, arr.splice(old, 1)[0]!)\n    }\n    lastIdx = lastIdx + 1\n  }\n\n  return arr\n}\n\nexport function moveDown<T extends { name: string }>(\n  arr: T[],\n  sel: GridRowId[],\n  by = 1,\n) {\n  const idxs = sel\n    .map(l => arr.findIndex(v => v.name === l))\n    .sort((a, b) => b - a)\n  let lastIdx = arr.length - 1\n  for (const old of idxs) {\n    const idx = Math.min(lastIdx, old + by)\n    if (idx <= lastIdx) {\n      arr.splice(idx, 0, arr.splice(old, 1)[0]!)\n    }\n    lastIdx = lastIdx - 1\n  }\n\n  return arr\n}\n\nconst trackLabelFontSize = 12.8\n\nexport function getOffset(model: WiggleDisplayModel) {\n  const { prefersOffset } = model\n  const { trackLabels } = getContainingView(model) as LinearGenomeViewModel\n  const track = getContainingTrack(model)\n  const trackName = getConf(track, 'name')\n  return trackLabels === 'overlapping' && !prefersOffset\n    ? measureText(trackName, trackLabelFontSize) + 100\n    : 10\n}\n"],"names":["LegendItem","t0","$","_c","source","idx","rowHeight","color","t1","_jsx","RectBg","y","x","width","height","LegendItemText","textFillProps","name","svgFontSize","Math","min","t2","t3","dominantBaseline","children","observer","model","labelWidth","canDisplayLegendLabels","sources","theme","useTheme","legendWidth","useMemo","some","s","colorBoxWidth","getFillProps","palette","text","primary","_jsxs","_Fragment","length","map","exportSVG","id","scrollTop","hierarchy","treeAreaWidth","showTree","clipid","jest","leftOffset","clipPath","transform","style","position","top","left","zIndex","pointerEvents","totalHeight","getContainingView","props","maxWidth","measureText","MultiWiggleLegendBarWrapper","MultiWiggleColorLegend","alpha","background","paper","SIDEBAR_BACKGROUND_OPACITY","useStyles","makeStyles","resizeHandle","divider","treeBackground","getDescendantNames","node","flatMap","child","data","classes","viewWidth","nodeIndex","setNodeIndex","useState","nodeData","setNodeData","menuAnchor","setMenuAnchor","treeCanvasRef","useCallback","ref","setTreeCanvasRef","mouseoverCanvasRef","setMouseoverCanvasRef","useEffect","autorun","_t","h","th","nodes","descendants","filter","index","Flatbush","add","finish","handleMouseMove","event","rect","currentTarget","getBoundingClientRect","clientX","clientY","results","search","undefined","descendantNames","setHoveredTreeNode","handleMouseLeave","handleClick","names","handleCloseMenu","className","onMouseMove","onMouseLeave","onClick","cursor","ResizeHandle","onDrag","distance","setTreeAreaWidth","max","vertical","Menu","open","onClose","anchorReference","anchorPosition","subtreeFilter","MenuItem","setSubtreeFilter","isMultiRow","TreeSidebar","MultiWiggleLegendBar","BaseLinearDisplayComponent","YScaleBars","boxHeight","needsCustomLegend","graphType","needsFullHeightScalebar","rowHeightTooSmallForScalebar","renderColorBoxes","extraOffset","canDisplayLabel","orientation","getOffset","YScaleBar","ColorLegend","ticks","scaleType","legend","values","len","xpos","treeIsShowing","ScoreLegend","_source","JSON","stringify","showSidebar","stats","YScaleBarsWrapper","FullHeightScaleBar","IndividualScaleBars","moveUp","arr","sel","by","idxs","l","findIndex","v","sort","a","b","lastIdx","old","splice","moveDown","prefersOffset","trackLabels","track","getContainingTrack","trackName","getConf"],"sourceRoot":""}