"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[3678],{63678:(e,t,n)=>{n.r(t),n.d(t,{default:()=>w});var r=n(11210),s=n(68446),o=n(67758),i=n(7552),d=n(99546),c=n(75785),a=n(57240),l=n(69500);const h=(0,c.n9)()(()=>({td:{whiteSpace:"nowrap"},table:{width:"100%",tableLayout:"auto"}})),b=(e,t=1)=>`${((e=0)=>+e.toFixed(1))(e/(t||1)*100)}%`;function u(e){return e.replace(/^(mod_|nonmod_)/,"")}function f(e){return(e[-1]?`${e[-1]}(-)`:"")+(e[1]?`${e[1]}(+)`:"")}function m(e){return"depth"!==e&&"skip"!==e}function j(e){const t=(0,o.c)(5),{base:n,model:r}=e;let s;t[0]!==n||t[1]!==r?(s=function(e,t){if(e.startsWith("mod_")||e.startsWith("nonmod_"))return e.startsWith("nonmod_")?"blue":t.visibleModifications.get(e.replace(/^mod_/,""))?.color}(n,r),t[0]=n,t[1]=r,t[2]=s):s=t[2];const i=s;if(!i)return null;let d;return t[3]!==i?(d=(0,l.jsx)("div",{style:{width:10,height:10,background:i}}),t[3]=i,t[4]=d):d=t[4],d}function y(){const e=(0,o.c)(1);let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{}),(0,l.jsx)("th",{children:"Base"}),(0,l.jsx)("th",{children:"Count"}),(0,l.jsx)("th",{children:"% of Reads"}),(0,l.jsx)("th",{children:"Strands"}),(0,l.jsx)("th",{children:"Avg Prob"})]})}),e[0]=t):t=e[0],t}function p(e){const t=(0,o.c)(9),{readsCounted:n}=e;let r,s,i,d,c,a,h;return t[0]===Symbol.for("react.memo_cache_sentinel")?(r=(0,l.jsx)("td",{}),s=(0,l.jsx)("td",{children:"Total"}),t[0]=r,t[1]=s):(r=t[0],s=t[1]),t[2]!==n?(i=(0,l.jsx)("td",{children:n}),t[2]=n,t[3]=i):i=t[3],t[4]===Symbol.for("react.memo_cache_sentinel")?(d=(0,l.jsx)("td",{children:" "}),c=(0,l.jsx)("td",{children:" "}),a=(0,l.jsx)("td",{children:" "}),t[4]=d,t[5]=c,t[6]=a):(d=t[4],c=t[5],a=t[6]),t[7]!==i?(h=(0,l.jsxs)("tr",{children:[r,s,i,d,c,a]}),t[7]=i,t[8]=h):h=t[8],h}function x(e){const t=(0,o.c)(22),{referenceBase:n,reference:r,readsCounted:s}=e;let i,d,c,a,h,u,m,j,y,p;return t[0]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.jsx)("td",{}),t[0]=i):i=t[0],t[1]!==n?(d=n?`(${n.toUpperCase()})`:"",t[1]=n,t[2]=d):d=t[2],t[3]!==d?(c=(0,l.jsxs)("td",{children:["REF ",d]}),t[3]=d,t[4]=c):c=t[4],t[5]!==r.entryDepth?(a=(0,l.jsx)("td",{children:r.entryDepth}),t[5]=r.entryDepth,t[6]=a):a=t[6],t[7]!==s||t[8]!==r.entryDepth?(h=b(r.entryDepth,s),t[7]=s,t[8]=r.entryDepth,t[9]=h):h=t[9],t[10]!==h?(u=(0,l.jsx)("td",{children:h}),t[10]=h,t[11]=u):u=t[11],t[12]!==r?(m=f(r),t[12]=r,t[13]=m):m=t[13],t[14]!==m?(j=(0,l.jsx)("td",{children:m}),t[14]=m,t[15]=j):j=t[15],t[16]===Symbol.for("react.memo_cache_sentinel")?(y=(0,l.jsx)("td",{children:" "}),t[16]=y):y=t[16],t[17]!==c||t[18]!==a||t[19]!==u||t[20]!==j?(p=(0,l.jsxs)("tr",{children:[i,c,a,u,j,y]}),t[17]=c,t[18]=a,t[19]=u,t[20]=j,t[21]=p):p=t[21],p}function _(e){const t=(0,o.c)(31),{base:n,score:r,readsCounted:s,model:i,tdClass:d,rowKey:c}=e;let h,y,p,x,_,g,C,v,D,w,P;return t[0]!==n||t[1]!==i?(h=(0,l.jsx)("td",{children:(0,l.jsx)(j,{model:i,base:n})}),y=function(e,t){if(e.startsWith("nonmod_"))return`Unmodified ${e.replace("nonmod_","")}`;const n=u(e);return t.visibleModifications.get(n)?(0,a.y)(n):e.toUpperCase()}(n,i),t[0]=n,t[1]=i,t[2]=h,t[3]=y):(h=t[2],y=t[3]),t[4]!==y?(p=(0,l.jsx)("td",{children:y}),t[4]=y,t[5]=p):p=t[5],t[6]!==r.entryDepth||t[7]!==d?(x=(0,l.jsx)("td",{className:d,children:r.entryDepth}),t[6]=r.entryDepth,t[7]=d,t[8]=x):x=t[8],t[9]!==n||t[10]!==s||t[11]!==r.entryDepth?(_=m(n)?b(r.entryDepth,s):"---",t[9]=n,t[10]=s,t[11]=r.entryDepth,t[12]=_):_=t[12],t[13]!==_?(g=(0,l.jsx)("td",{children:_}),t[13]=_,t[14]=g):g=t[14],t[15]!==r?(C=f(r),t[15]=r,t[16]=C):C=t[16],t[17]!==C?(v=(0,l.jsx)("td",{children:C}),t[17]=C,t[18]=v):v=t[18],t[19]!==r.avgProbability?(D=void 0!==r.avgProbability?b(r.avgProbability):"",t[19]=r.avgProbability,t[20]=D):D=t[20],t[21]!==D?(w=(0,l.jsx)("td",{children:D}),t[21]=D,t[22]=w):w=t[22],t[23]!==c||t[24]!==h||t[25]!==w||t[26]!==p||t[27]!==x||t[28]!==g||t[29]!==v?(P=(0,l.jsxs)("tr",{children:[h,p,x,g,v,w]},c),t[23]=c,t[24]=h,t[25]=w,t[26]=p,t[27]=x,t[28]=g,t[29]=v,t[30]=P):P=t[30],P}function g(e){const t=(0,o.c)(34),{base:n,score:r,isMod:s,readsCounted:i,model:d,tdClass:c,rowKey:h}=e;let y,p,x,_,g,C,v,D,w,P,$;return t[0]!==n||t[1]!==d?(y=(0,l.jsx)("td",{children:(0,l.jsx)(j,{model:d,base:n})}),t[0]=n,t[1]=d,t[2]=y):y=t[2],t[3]!==n||t[4]!==s||t[5]!==d?(p=s?function(e,t){if(e.startsWith("nonmod_"))return`Unmodified ${e.replace("nonmod_","")}`;const n=u(e);return t.visibleModifications.get(n)?(0,a.y)(n):e.toUpperCase()}(n,d):n.toUpperCase(),t[3]=n,t[4]=s,t[5]=d,t[6]=p):p=t[6],t[7]!==p?(x=(0,l.jsx)("td",{children:p}),t[7]=p,t[8]=x):x=t[8],t[9]!==r.entryDepth||t[10]!==c?(_=(0,l.jsx)("td",{className:c,children:r.entryDepth}),t[9]=r.entryDepth,t[10]=c,t[11]=_):_=t[11],t[12]!==n||t[13]!==i||t[14]!==r.entryDepth?(g=m(n)?b(r.entryDepth,i):"---",t[12]=n,t[13]=i,t[14]=r.entryDepth,t[15]=g):g=t[15],t[16]!==g?(C=(0,l.jsx)("td",{children:g}),t[16]=g,t[17]=C):C=t[17],t[18]!==r?(v=f(r),t[18]=r,t[19]=v):v=t[19],t[20]!==v?(D=(0,l.jsx)("td",{children:v}),t[20]=v,t[21]=D):D=t[21],t[22]!==r.avgProbability?(w=void 0!==r.avgProbability?b(r.avgProbability):"",t[22]=r.avgProbability,t[23]=w):w=t[23],t[24]!==w?(P=(0,l.jsx)("td",{children:w}),t[24]=w,t[25]=P):P=t[25],t[26]!==h||t[27]!==y||t[28]!==P||t[29]!==x||t[30]!==_||t[31]!==C||t[32]!==D?($=(0,l.jsxs)("tr",{children:[y,x,_,C,D,P]},h),t[26]=h,t[27]=y,t[28]=P,t[29]=x,t[30]=_,t[31]=C,t[32]=D,t[33]=$):$=t[33],$}function C(e){const t=(0,o.c)(5),{info:n,readsCounted:r,model:s,tdClass:i}=e;let d;if(t[0]!==n||t[1]!==s||t[2]!==r||t[3]!==i){const e={};for(const[t,r]of Object.entries(n))for(const[n,o]of Object.entries(r))if(n.startsWith("nonmod_")){const r=u(n),i=s.visibleModifications.get(r),d=i?.base||"X",c=`${t}_nonmod_${d}`;e[c]||(e[c]={base:`nonmod_${d}`,score:{entryDepth:0,1:0,"-1":0,avgProbability:0},isNonmod:!0});const a=e[c];if(a.score.entryDepth=a.score.entryDepth+o.entryDepth,a.score[1]=a.score[1]+o[1],a.score[-1]=a.score[-1]+o[-1],void 0!==o.avgProbability){const e=a.score.avgProbability||0,t=a.score.entryDepth-o.entryDepth;a.score.avgProbability=t>0?(e*t+o.avgProbability*o.entryDepth)/a.score.entryDepth:o.avgProbability}}else e[`${t}_${n}`]={base:n,score:{...o},isNonmod:!1};d=(0,l.jsx)(l.Fragment,{children:Object.entries(e).map(e=>{const[t,n]=e,{base:o,score:d,isNonmod:c}=n,a=u(o),h=(b=o).startsWith("mod_")||b.startsWith("nonmod_")||c;var b;const f=!c&&h&&s.simplexModifications?.has(a),m=d[1]||0,j=d[-1]||0;return c?(0,l.jsx)(g,{base:o,score:d,isMod:!0,isSimplex:!1,readsCounted:r,model:s,tdClass:i,rowKey:t},t):h&&!f&&(m>0||j>0)?(0,l.jsx)(_,{base:o,score:d,posStrandCount:m,negStrandCount:j,readsCounted:r,model:s,tdClass:i,rowKey:t},t):(0,l.jsx)(g,{base:o,score:d,isMod:h,isSimplex:f,readsCounted:r,model:s,tdClass:i,rowKey:t},t)})}),t[0]=n,t[1]=s,t[2]=r,t[3]=i,t[4]=d}else d=t[4];return d}const v=(0,i.forwardRef)(function(e,t){const n=(0,o.c)(46),{feature:r,model:s}=e,{classes:i}=h(),c=r.get("start")+1;let a,b,u,f,m,j,_,g;if(n[0]!==r||n[1]!==t||n[2]!==c){const e=r.get("end");let s;n[10]!==r?(s=r.get("refName"),n[10]=r,n[11]=s):s=n[11];const o=s;let i;n[12]!==r?(i=r.get("snpinfo"),n[12]=r,n[13]=i):i=n[13];const l=i;if(n[14]!==l){const{refbase:e,readsCounted:t,depth:r,ref:s,...o}=l;f=e,b=t,u=s,a=o,n[14]=l,n[15]=a,n[16]=b,n[17]=u,n[18]=f}else a=n[15],b=n[16],u=n[17],f=n[18];_=t,m=o,j=c===e?(0,d.toLocale)(c):`${(0,d.toLocale)(c)}..${(0,d.toLocale)(e)}`,n[0]=r,n[1]=t,n[2]=c,n[3]=a,n[4]=b,n[5]=u,n[6]=f,n[7]=m,n[8]=j,n[9]=_}else a=n[3],b=n[4],u=n[5],f=n[6],m=n[7],j=n[8],_=n[9];n[19]!==m||n[20]!==j?(g=[m,j].filter(D),n[19]=m,n[20]=j,n[21]=g):g=n[21];const v=g.join(":");let w,P,$,S,M,W,k,U;return n[22]!==v?(w=(0,l.jsx)("caption",{children:v}),n[22]=v,n[23]=w):w=n[23],n[24]===Symbol.for("react.memo_cache_sentinel")?(P=(0,l.jsx)(y,{}),n[24]=P):P=n[24],n[25]!==b?($=(0,l.jsx)(p,{readsCounted:b}),n[25]=b,n[26]=$):$=n[26],n[27]!==b||n[28]!==u||n[29]!==f?(S=(0,l.jsx)(x,{referenceBase:f,reference:u,readsCounted:b}),n[27]=b,n[28]=u,n[29]=f,n[30]=S):S=n[30],n[31]!==i.td||n[32]!==a||n[33]!==s||n[34]!==b?(M=(0,l.jsx)(C,{info:a,readsCounted:b,model:s,tdClass:i.td}),n[31]=i.td,n[32]=a,n[33]=s,n[34]=b,n[35]=M):M=n[35],n[36]!==$||n[37]!==S||n[38]!==M?(W=(0,l.jsxs)("tbody",{children:[$,S,M]}),n[36]=$,n[37]=S,n[38]=M,n[39]=W):W=n[39],n[40]!==W||n[41]!==w?(k=(0,l.jsxs)("table",{children:[w,P,W]}),n[40]=W,n[41]=w,n[42]=k):k=n[42],n[43]!==k||n[44]!==_?(U=(0,l.jsx)("div",{ref:_,children:k}),n[43]=k,n[44]=_,n[45]=U):U=n[45],U});function D(e){return!!e}const w=(0,s.observer)(function(e){const{model:t}=e,{featureUnderMouse:n}=t;return n&&"skip"===n.get("type")?null:(0,l.jsx)(r.m_,{TooltipContents:v,...e})})}}]);
//# sourceMappingURL=3678.43b7a113.chunk.js.map