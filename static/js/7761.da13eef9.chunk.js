"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[7761],{59570:(e,t,s)=>{s.d(t,{A:()=>A});var n=s(7552),r=s(93878),o=s(2958),a=s(75100),i=s(44472),l=s(53518),d=s(98930),c=s(72233),u=s(69500);const m=(0,c.A)(),h=(0,d.A)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,t[`maxWidth${(0,i.A)(String(s.maxWidth))}`],s.fixed&&t.fixed,s.disableGutters&&t.disableGutters]}}),p=e=>(0,l.A)({props:e,name:"MuiContainer",defaultTheme:m});var f=s(74325),b=s(80317),x=s(50864);const g=function(e={}){const{createStyledComponent:t=h,useThemeProps:s=p,componentName:l="MuiContainer"}=e,d=t((({theme:e,ownerState:t})=>({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",...!t.disableGutters&&{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}}})),(({theme:e,ownerState:t})=>t.fixed&&Object.keys(e.breakpoints.values).reduce(((t,s)=>{const n=s,r=e.breakpoints.values[n];return 0!==r&&(t[e.breakpoints.up(n)]={maxWidth:`${r}${e.breakpoints.unit}`}),t}),{})),(({theme:e,ownerState:t})=>({..."xs"===t.maxWidth&&{[e.breakpoints.up("xs")]:{maxWidth:Math.max(e.breakpoints.values.xs,444)}},...t.maxWidth&&"xs"!==t.maxWidth&&{[e.breakpoints.up(t.maxWidth)]:{maxWidth:`${e.breakpoints.values[t.maxWidth]}${e.breakpoints.unit}`}}}))),c=n.forwardRef((function(e,t){const n=s(e),{className:c,component:m="div",disableGutters:h=!1,fixed:p=!1,maxWidth:f="lg",classes:b,...x}=n,g={...n,component:m,disableGutters:h,fixed:p,maxWidth:f},A=((e,t)=>{const{classes:s,fixed:n,disableGutters:r,maxWidth:l}=e,d={root:["root",l&&`maxWidth${(0,i.A)(String(l))}`,n&&"fixed",r&&"disableGutters"]};return(0,a.A)(d,(e=>(0,o.Ay)(t,e)),s)})(g,l);return(0,u.jsx)(d,{as:m,ownerState:g,className:(0,r.A)(A.root,c),ref:t,...x})}));return c}({createStyledComponent:(0,b.Ay)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,t[`maxWidth${(0,f.A)(String(s.maxWidth))}`],s.fixed&&t.fixed,s.disableGutters&&t.disableGutters]}}),useThemeProps:e=>(0,x.b)({props:e,name:"MuiContainer"})}),A=g},59985:(e,t,s)=>{s.d(t,{A:()=>o});var n=s(29772),r=s(69500);const o=(0,n.A)((0,r.jsx)("path",{d:"M19 9h-4V3H9v6H5l7 7zM5 18v2h14v-2z"}),"GetApp")},77761:(e,t,s)=>{s.r(t),s.d(t,{default:()=>k});var n=s(7552),r=s(68584),o=s(67112),a=s(90542),i=s(99546),l=s(59985),d=s(76218),c=s(61282),u=s(59570),m=s(44928),h=s(93062),p=s(36866),f=s(7946),b=s(22762),x=s(30698),g=s(69092),A=s(31409),w=s.n(A),v=s(45465),C=s(68446),S=s(75785),j=s(69500);const y=(0,S.n9)()({dialogContent:{width:"80em"},textAreaFont:{fontFamily:"Courier New"},ml:{marginLeft:10}}),k=(0,C.observer)((function({model:e,handleClose:t}){const{classes:s}=y(),[A,C]=(0,n.useState)(),[S,k]=(0,n.useState)(),[W,$]=(0,n.useState)(!1),[R,q]=(0,n.useState)(!1),[G,M]=(0,n.useState)(!1),{leftOffset:N,rightOffset:T}=e,E=Boolean(void 0===S);(0,n.useEffect)((()=>{const t=new AbortController;return(async()=>{try{const t=e.getSelectedRegions(N,T);if(0===t.length)throw new Error("Selected region is out of bounds");const s=await async function(e,t){const s=(0,i.getSession)(e),{leftOffset:n,rightOffset:o}=e;if(!n||!o)throw new Error("no offsets on model to use for range");if(new Set(t.map((e=>e.assemblyName))).size>1)throw new Error("not able to fetch sequences from multiple assemblies currently");const{rpcManager:a,assemblyManager:l}=s,d=n.assemblyName||o.assemblyName||"",c=l.get(d);if(!c)throw new Error(`assembly ${d} not found`);const u=(0,r.getConf)(c,["sequence","adapter"]),m="getSequence";return a.call(m,"CoreGetFeatures",{adapterConfig:u,regions:t,sessionId:m})}(e,t);k(s)}catch(e){console.error(e),C(e)}})(),()=>{t.abort()}}),[e,N,T]);const O=S?S.map((e=>{let t=e.get("seq");const s=e.get("refName"),n=e.get("start")+1,r=e.get("end"),o=`${s}:${n}-${r}`;if(t?.length!==r-n+1)throw new Error(`${o} returned ${t.length.toLocaleString()} bases, but should have returned ${(r-n).toLocaleString()}`);return W&&(t=(0,i.reverse)(t)),G&&(t=(0,i.complement)(t)),{header:o+(W?"-rev":"")+(G?"-comp":""),seq:t}})).map((e=>{return`>${e.header}\n${t=e.seq,t.replaceAll(/(.{1,80})/g,"$1\n").trimEnd()}`;var t})).join("\n"):"",F=!!O&&O.length>1e6;return(0,j.jsxs)(o.Dialog,{maxWidth:"xl",open:!0,onClose:()=>{t(),e.setOffsets()},title:"Reference sequence",children:[(0,j.jsxs)(d.A,{children:[A?(0,j.jsx)(c.A,{color:"error",children:`${A}`}):E?(0,j.jsxs)(u.A,{children:["Retrieving reference sequence...",(0,j.jsx)(m.A,{className:s.ml,size:20,disableShrink:!0})]}):null,(0,j.jsx)(h.A,{"data-testid":"rubberband-sequence",variant:"outlined",multiline:!0,minRows:5,maxRows:10,disabled:F,className:s.dialogContent,fullWidth:!0,value:F?"Reference sequence too large to display, use the download FASTA button":O,slotProps:{input:{readOnly:!0,classes:{input:s.textAreaFont}}}}),(0,j.jsxs)(p.A,{children:[(0,j.jsx)(f.A,{control:(0,j.jsx)(b.A,{value:W,onChange:e=>{$(e.target.checked)}}),label:"Reverse sequence"}),(0,j.jsx)(f.A,{control:(0,j.jsx)(b.A,{value:G,onChange:e=>{M(e.target.checked)}}),label:"Complement sequence"})]}),(0,j.jsx)(c.A,{style:{margin:10},children:'Note: Check both boxes for the "reverse complement"'})]}),(0,j.jsxs)(x.A,{children:[(0,j.jsx)(g.A,{onClick:()=>{w()(O),q(!0),setTimeout((()=>{q(!1)}),500)},disabled:E||!!A||F,color:"primary",startIcon:(0,j.jsx)(a.PM,{}),children:R?"Copied":"Copy to clipboard"}),(0,j.jsx)(g.A,{onClick:()=>{(0,v.saveAs)(new Blob([O||""],{type:"text/x-fasta;charset=utf-8"}),"jbrowse_ref_seq.fa")},disabled:E||!!A,color:"primary",startIcon:(0,j.jsx)(l.A,{}),children:"Download FASTA"}),(0,j.jsx)(g.A,{onClick:t,variant:"contained",children:"Close"})]})]})}))},98930:(e,t,s)=>{s.d(t,{A:()=>n});const n=(0,s(70770).Ay)()}}]);
//# sourceMappingURL=7761.da13eef9.chunk.js.map