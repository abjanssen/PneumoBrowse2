"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[6740],{86740(e,s,t){t.d(s,{A:()=>S});var a=t(55614),o=t(30128),i=t(28910),n=t(23886),r=t(10533),l=t(63209),d=t(29835),c=t(71477),m=t(68411),p=t(10451),f=t(23149),u=t(44641),b=t(35703),h=t(69566),w=t(42700),g=t(78921),v=t(44460);function y(e){const s=(0,a.c)(8),{checked:t,disabled:o,label:i,onChange:n}=e;let r,l,d;return s[0]===Symbol.for("react.memo_cache_sentinel")?(r={display:"block"},s[0]=r):r=s[0],s[1]!==t||s[2]!==n?(l=(0,v.jsx)(w.A,{checked:t,onChange:n}),s[1]=t,s[2]=n,s[3]=l):l=s[3],s[4]!==o||s[5]!==i||s[6]!==l?(d=(0,v.jsx)(g.A,{disabled:o,style:r,control:l,label:i}),s[4]=o,s[5]=i,s[6]=l,s[7]=d):d=s[7],d}var x=t(44934),k=t(23111);function A(){const e=(0,a.c)(1);let s;return e[0]===Symbol.for("react.memo_cache_sentinel")?(s=(0,v.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:[(0,v.jsx)("rect",{x:"2",y:"3",width:"20",height:"8",rx:"1",fill:"currentColor"}),(0,v.jsx)("rect",{x:"2",y:"13",width:"20",height:"8",rx:"1",fill:"currentColor"})]}),e[0]=s):s=e[0],s}function N(){const e=(0,a.c)(1);let s;return e[0]===Symbol.for("react.memo_cache_sentinel")?(s=(0,v.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",children:(0,v.jsx)("rect",{x:"2",y:"8",width:"20",height:"8",rx:"1",fill:"currentColor"})}),e[0]=s):s=e[0],s}const S=(0,h.observer)(function({session:e,handleClose:s,feature:t,assemblyName:a,stableViewId:h,view:w}){const[g,S]=(0,o.useState)("choose"),[j,C]=(0,o.useState)("split"),[V,I]=(0,o.useState)(!0),[$,B]=(0,o.useState)(!0),[z,T]=(0,o.useState)(!0),[M,O]=(0,n.useLocalStorage)("breakpointWindowSize","5000"),_="split"===j;return"choose"===g?(0,v.jsx)(i.A,{open:!0,onClose:s,title:"Open breakpoint split view",children:(0,v.jsx)(l.A,{children:(0,v.jsxs)(d.A,{children:[(0,v.jsxs)(c.A,{onClick:()=>{C("split"),S("options")},children:[(0,v.jsx)(m.A,{children:(0,v.jsx)(A,{})}),(0,v.jsx)(p.A,{primary:"Split level (top/bottom)",secondary:"Opens two stacked linear genome views, one for each breakend"})]}),(0,v.jsxs)(c.A,{onClick:()=>{C("single"),S("options")},children:[(0,v.jsx)(m.A,{children:(0,v.jsx)(N,{})}),(0,v.jsx)(p.A,{primary:"Single level (single row)",secondary:"Opens one linear genome view spanning both breakends"})]})]})})}):(0,v.jsxs)(i.A,{open:!0,onClose:s,title:_?"Split level options":"Single level options",children:[(0,v.jsxs)(l.A,{children:[w?(0,v.jsx)(y,{checked:V,label:"Copy tracks into the new view",onChange:e=>{I(e.target.checked)}}):null,_?w&&V?(0,v.jsx)(y,{checked:$,label:"Mirror the copied tracks",onChange:e=>{B(e.target.checked)}}):null:(0,v.jsx)(y,{checked:z,label:"Focus on breakends",onChange:e=>{T(e.target.checked)}}),(0,v.jsx)(f.A,{label:"Window size (bp)",value:M,onChange:e=>{O(e.target.value)},size:"small",style:{marginTop:8,display:"block"}})]}),(0,v.jsxs)(u.A,{children:[(0,v.jsx)(b.A,{onClick:()=>{S("choose")},children:"Back"}),(0,v.jsx)(b.A,{variant:"contained",color:"primary",onClick:()=>{(async()=>{try{await(_?async function({stableViewId:e,feature:s,assemblyName:t,session:a,mirror:o,tracks:i=[],windowSize:n=0}){const{assemblyManager:r}=a,l=await r.waitForAssembly(t);if(!l)throw new Error(`assembly ${t} not found`);const{refName:d,pos:c,mateRefName:m,matePos:p}=(0,k.H_)({feature:s,assembly:l});let f=a.views.find(s=>s.id===e);f||(f=a.addView("BreakpointSplitView",{id:e,type:"BreakpointSplitView",displayName:(0,k.XM)(s),views:[{type:"LinearGenomeView",hideHeader:!0,tracks:(0,k.bn)(i)},{type:"LinearGenomeView",hideHeader:!0,tracks:(0,k.bn)(o?[...i].reverse():i)}]})),f.setDisplayName((0,k.XM)(s));const u=l.regions.find(e=>e.refName===d),b=l.regions.find(e=>e.refName===m);if(!u||!b)throw new Error("can't find regions");await Promise.all([f.views[0].navToLocations((0,k.xE)(u,c,t)),f.views[1].navToLocations((0,k.xE)(b,p,t))]),await(0,x.when)(()=>f.views[1].initialized&&f.views[0].initialized);const h=f.views[0],w=f.views[1],g=n>0?2*n/h.width:10;h.zoomTo(g),w.zoomTo(g),h.centerAt(c,d),w.centerAt(p,m)}({stableViewId:h?`${h}_multilevel`:void 0,session:e,tracks:V&&w?(0,r.getSnapshot)(w.tracks):[],mirror:$,feature:t,assemblyName:a,windowSize:+M||0}):async function({stableViewId:e,feature:s,assemblyName:t,session:a,tracks:o,windowSize:i=0,focusOnBreakends:l}){const{snap:d,coverage:c}=l?function({feature:e,session:s,assemblyName:t,windowSize:a=0}){const{assemblyManager:o}=s,i=o.get(t);if(!i)throw new Error(`assembly ${t} not found`);if(!i.regions)throw new Error(`assembly ${t} regions not loaded`);const r=(0,k.H_)({feature:e,assembly:i}),{refName:l,mateRefName:d}=r,c=i.regions.find(e=>e.refName===l),m=i.regions.find(e=>e.refName===d);return{coverage:r,snap:{type:"BreakpointSplitView",views:[{type:"LinearGenomeView",displayedRegions:(0,n.gatherOverlaps)([{...c,end:r.pos+1+a,assemblyName:t},{...m,start:r.matePos-a,assemblyName:t}])}],displayName:(0,k.XM)(e)}}}({feature:s,assemblyName:t,session:a,windowSize:i}):function({feature:e,session:s,assemblyName:t}){const{assemblyManager:a}=s,o=a.get(t);if(!o)throw new Error(`assembly ${t} not found`);if(!o.regions)throw new Error(`assembly ${t} regions not loaded`);const i=(0,k.H_)({feature:e,assembly:o}),{refName:r,mateRefName:l}=i,d=o.regions.find(e=>e.refName===r),c=o.regions.find(e=>e.refName===l);return{coverage:i,snap:{type:"BreakpointSplitView",views:[{type:"LinearGenomeView",displayedRegions:(0,n.gatherOverlaps)([{...d,assemblyName:t},{...c,assemblyName:t}])}],displayName:(0,k.XM)(e)}}}({feature:s,assemblyName:t,session:a}),{refName:m,pos:p,mateRefName:f,matePos:u}=c;let b=a.views.find(s=>s.id===e);b?(b.views[0]?.setDisplayedRegions(d.views[0].displayedRegions),b.setDisplayName(d.displayName)):b=a.addView("BreakpointSplitView",{...d,views:[{...d.views[0],tracks:o?(0,k.bn)((0,r.getSnapshot)(o)):[]}]});const h=b.views[0];if(await(0,x.when)(()=>h.initialized),l){h.zoomTo(10);const e=h.bpToPx({coord:p,refName:m}),s=h.bpToPx({coord:u,refName:f});if(e&&s){const t=(e.offsetPx+s.offsetPx)/2;h.scrollTo(Math.round(t-h.width/2))}else(0,n.getSession)(h).notify("Unable to navigate to breakpoint")}else{const e=h.bpToPx({coord:Math.max(0,p-i),refName:m}),s=h.bpToPx({coord:u+i,refName:f});e&&s?h.moveTo({...e,offset:e.offsetPx},{...s,offset:s.offsetPx}):(0,n.getSession)(h).notify("Unable to navigate to breakpoint")}}({feature:t,assemblyName:a,focusOnBreakends:z,session:e,stableViewId:h?`${h}_singlelevel`:void 0,tracks:V?w?.tracks:void 0,windowSize:+M||0}))}catch(s){console.error(s),e.notifyError(`${s}`,s)}})(),s()},children:"Open"}),(0,v.jsx)(b.A,{variant:"contained",color:"secondary",onClick:s,children:"Cancel"})]})]})})},71477(e,s,t){t.d(s,{A:()=>w});var a=t(30128),o=t(21227),i=t(74533),n=t(80638),r=t(39104),l=t(45639),d=t(73888),c=t(51164),m=t(74748),p=t(44330),f=t(48420),u=t(37357),b=t(44460);const h=(0,n.Ay)(c.A,{shouldForwardProp:e=>(0,d.A)(e)||"classes"===e,name:"MuiListItemButton",slot:"Root",overridesResolver:(e,s)=>{const{ownerState:t}=e;return[s.root,t.dense&&s.dense,"flex-start"===t.alignItems&&s.alignItemsFlexStart,t.divider&&s.divider,!t.disableGutters&&s.gutters]}})((0,r.A)(({theme:e})=>({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${u.A.selected}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity),[`&.${u.A.focusVisible}`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.focusOpacity}`)}},[`&.${u.A.selected}:hover`]:{backgroundColor:e.alpha((e.vars||e).palette.primary.main,`${(e.vars||e).palette.action.selectedOpacity} + ${(e.vars||e).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:e.alpha((e.vars||e).palette.primary.main,(e.vars||e).palette.action.selectedOpacity)}},[`&.${u.A.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${u.A.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},variants:[{props:({ownerState:e})=>e.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:e})=>e.dense,style:{paddingTop:4,paddingBottom:4}}]}))),w=a.forwardRef(function(e,s){const t=(0,l.b)({props:e,name:"MuiListItemButton"}),{alignItems:n="center",autoFocus:r=!1,component:d="div",children:c,dense:w=!1,disableGutters:g=!1,divider:v=!1,focusVisibleClassName:y,selected:x=!1,className:k,...A}=t,N=a.useContext(f.A),S=a.useMemo(()=>({dense:w||N.dense||!1,alignItems:n,disableGutters:g}),[n,N.dense,w,g]),j=a.useRef(null);(0,m.A)(()=>{r&&j.current&&j.current.focus()},[r]);const C={...t,alignItems:n,dense:S.dense,disableGutters:g,divider:v,selected:x},V=(e=>{const{alignItems:s,classes:t,dense:a,disabled:o,disableGutters:n,divider:r,selected:l}=e,d={root:["root",a&&"dense",!n&&"gutters",r&&"divider",o&&"disabled","flex-start"===s&&"alignItemsFlexStart",l&&"selected"]},c=(0,i.A)(d,u.Y,t);return{...t,...c}})(C),I=(0,p.A)(j,s);return(0,b.jsx)(f.A.Provider,{value:S,children:(0,b.jsx)(h,{ref:I,href:A.href||A.to,component:(A.href||A.to)&&"div"===d?"button":d,focusVisibleClassName:(0,o.A)(V.focusVisible,y),ownerState:C,className:(0,o.A)(V.root,k),...A,classes:V,children:c})})})},37357(e,s,t){t.d(s,{A:()=>n,Y:()=>i});var a=t(26743),o=t(2395);function i(e){return(0,o.Ay)("MuiListItemButton",e)}const n=(0,a.A)("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"])}}]);
//# sourceMappingURL=6740.5630bb26.chunk.js.map