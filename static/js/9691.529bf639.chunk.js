"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[9691],{8463:(e,t,n)=>{n.d(t,{A:()=>M,m:()=>A});var s=n(67758),o=n(7552),r=n(68527),i=n(3043),a=n(59839),c=n(18366),l=n(54063),u=n(41450),d=n(70330),m=n(26508),p=n(10240),f=n(95408),h=n(4331),g=n(53162),y=n(95054),b=n(87770),w=n(75785),v=n(99546),S=n(69500);const C=(0,w.n9)()({paper:{position:"fixed",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",top:0,left:0,outline:0},menuItemEndDecoration:{padding:0,margin:0,height:16}});function A(e){const t=(0,s.c)(10),{classes:n}=C(),{type:o}=e;let u,d,m,p;"checked"in e&&({checked:u,disabled:d}=e);e:switch(o){case"subMenu":{let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,S.jsx)(r.A,{color:"action"}),t[0]=e):e=t[0],m=e;break e}case"checkbox":if(u){const e=d?"inherit":void 0;let n;t[1]!==e?(n=(0,S.jsx)(i.A,{color:e}),t[1]=e,t[2]=n):n=t[2],m=n}else{let e;t[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,S.jsx)(a.A,{color:"action"}),t[3]=e):e=t[3],m=e}break e;case"radio":if(u){const e=d?"inherit":void 0;let n;t[4]!==e?(n=(0,S.jsx)(c.A,{color:e}),t[4]=e,t[5]=n):n=t[5],m=n}else{let e;t[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,S.jsx)(l.A,{color:"action"}),t[6]=e):e=t[6],m=e}}return t[7]!==n.menuItemEndDecoration||t[8]!==m?(p=(0,S.jsx)("div",{className:n.menuItemEndDecoration,children:m}),t[7]=n.menuItemEndDecoration,t[8]=m,t[9]=p):p=t[9],p}function k(e){return"divider"!==e.type&&"subHeader"!==e.type&&!e.disabled}const x=(0,o.forwardRef)(function(e,t){const n=(0,s.c)(48),[r,i]=(0,o.useState)(),[a,c]=(0,o.useState)(),[l,b]=(0,o.useState)(!1),[w,M]=(0,o.useState)(),[P,E]=(0,o.useState)(),I=(0,o.useRef)(null),{classes:N}=C(),{menuItems:R,onMenuItemClick:L,open:D,onClose:$,anchorEl:O,top:z}=e,U=void 0!==z&&z;let W,B,_,F,V,H,G;n[0]!==D?(W=()=>{D||(i(void 0),c(void 0))},B=[D],n[0]=D,n[1]=W,n[2]=B):(W=n[1],B=n[2]),(0,o.useEffect)(W,B),n[3]!==l||n[4]!==D||n[5]!==r?(_=()=>{const e=D&&Boolean(r);let t;return e&&!l?t=setTimeout(()=>{b(!0)},300):!e&&l&&(t=setTimeout(()=>{b(!1)},300)),()=>{clearTimeout(t)}},F=[l,D,r],n[3]=l,n[4]=D,n[5]=r,n[6]=_,n[7]=F):(_=n[6],F=n[7]),(0,o.useEffect)(_,F),n[8]!==O||n[9]!==P?(V=()=>{if(O){const e=O.getBoundingClientRect();P&&e.top===P.top&&e.left+e.width===P.left||E({top:e.top,left:e.left+e.width})}else P||E({})},H=[P,O],n[8]=O,n[9]=P,n[10]=V,n[11]=H):(V=n[10],H=n[11]),(0,o.useEffect)(V,H),n[12]!==R?(G=R.some(T),n[12]=R,n[13]=G):G=n[13];const q=G;let J;n[14]===Symbol.for("react.memo_cache_sentinel")?(J={},n[14]=J):J=n[14];const Q=J;let K;n[15]!==L?(K=function(e){return t=>{L(t,e)}},n[15]=L,n[16]=K):K=n[16];const Y=K,Z=D&&!l;let X,ee,te,ne;if(n[17]!==Y||n[18]!==q||n[19]!==R||n[20]!==$||n[21]!==a||n[22]!==w?(X=R.sort(j).map((e,t)=>{if("divider"===e.type)return(0,S.jsx)(u.A,{component:"li"},`divider-${JSON.stringify(e)}-${t}`);if("subHeader"===e.type)return(0,S.jsx)(d.A,{children:e.label},`subHeader-${e.label}-${t}`);let n=null,s=null;if(e.icon){const t=e.icon;n=(0,S.jsx)(m.A,{children:(0,S.jsx)(t,{})})}"subMenu"in e?s=(0,S.jsx)(A,{type:"subMenu"}):"checkbox"!==e.type&&"radio"!==e.type||(s=(0,S.jsx)(A,{type:e.type,checked:e.checked,disabled:e.disabled}));const o="onClick"in e?Y(e.onClick):void 0;return(0,S.jsxs)(p.A,{style:Q,selected:t===w,onClick:o,onMouseMove:n=>{n.currentTarget!==document.activeElement&&(n.currentTarget.focus(),M(t)),"subMenu"in e?a!==t&&(i(n.currentTarget),c(t)):(i(void 0),c(void 0))},onKeyDown:n=>{e:switch(n.key){case"ArrowLeft":case"Escape":$?.(n,"escapeKeyDown");break e;case"ArrowUp":M(function(e,t){return(0,v.findLastIndex)(e.slice(0,t),k)}(R,t));break e;case"ArrowDown":{const e=function(e,t){const n=e.slice(t+1).findIndex(k);return-1===n?n:t+1+n}(R,t);M(e);break e}default:!("subMenu"in e)||"ArrowRight"!==n.key&&"Enter"!==n.key||(i(n.currentTarget),c(t),b(!0))}},disabled:Boolean(e.disabled),children:[n,(0,S.jsx)(f.A,{primary:e.label,secondary:e.subLabel,inset:q&&!e.icon}),s]},e.id||String(e.label))}),n[17]=Y,n[18]=q,n[19]=R,n[20]=$,n[21]=a,n[22]=w,n[23]=X):X=n[23],n[24]!==Z||n[25]!==X?(ee=(0,S.jsx)(h.A,{autoFocusItem:Z,dense:!0,children:X}),n[24]=Z,n[25]=X,n[26]=ee):ee=n[26],n[27]!==l||n[28]!==R||n[29]!==L||n[30]!==a||n[31]!==r){let e;n[33]!==l||n[34]!==L||n[35]!==a||n[36]!==r?(e=(e,t)=>{let n=null;return"subMenu"in e&&(n=(0,S.jsx)(x,{anchorEl:r,open:l&&a===t,onClose:()=>{b(!1),i(void 0)},onMenuItemClick:L,menuItems:e.subMenu},e.id||String(e.label))),n},n[33]=l,n[34]=L,n[35]=a,n[36]=r,n[37]=e):e=n[37],te=R.map(e),n[27]=l,n[28]=R,n[29]=L,n[30]=a,n[31]=r,n[32]=te}else te=n[32];n[38]!==ee||n[39]!==te?(ne=(0,S.jsxs)(S.Fragment,{children:[ee,te]}),n[38]=ee,n[39]=te,n[40]=ne):ne=n[40];const se=ne;let oe;return n[41]!==se||n[42]!==N||n[43]!==D||n[44]!==P||n[45]!==t||n[46]!==U?(oe=U?se:(0,S.jsx)(g.A,{in:D,style:{transformOrigin:"0 0 0"},ref:t,children:(0,S.jsx)(y.A,{elevation:8,ref:I,className:N.paper,style:{...P},children:se})}),n[41]=se,n[42]=N,n[43]=D,n[44]=P,n[45]=t,n[46]=U,n[47]=oe):oe=n[47],oe}),M=function(e){const t=(0,s.c)(22);let n,o,r,i,a,c,l,u,d;return t[0]!==e?(({open:i,onClose:o,menuItems:n,onMenuItemClick:r,...a}=e),t[0]=e,t[1]=n,t[2]=o,t[3]=r,t[4]=i,t[5]=a):(n=t[1],o=t[2],r=t[3],i=t[4],a=t[5]),t[6]!==a.anchorOrigin?(c={vertical:"bottom",horizontal:"right",...a.anchorOrigin},t[6]=a.anchorOrigin,t[7]=c):c=t[7],t[8]!==a.transformOrigin?(l={vertical:"top",horizontal:"left",...a.transformOrigin},t[8]=a.transformOrigin,t[9]=l):l=t[9],t[10]!==n||t[11]!==o||t[12]!==r||t[13]!==i?(u=(0,S.jsx)(x,{open:i,onClose:o,menuItems:n,onMenuItemClick:r,top:!0}),t[10]=n,t[11]=o,t[12]=r,t[13]=i,t[14]=u):u=t[14],t[15]!==o||t[16]!==i||t[17]!==a||t[18]!==c||t[19]!==l||t[20]!==u?(d=(0,S.jsx)(b.Ay,{open:i,onClose:o,anchorOrigin:c,transformOrigin:l,...a,children:u}),t[15]=o,t[16]=i,t[17]=a,t[18]=c,t[19]=l,t[20]=u,t[21]=d):d=t[21],d};function T(e){return"icon"in e&&e.icon}function j(e,t){return(t.priority||0)-(e.priority||0)}},8832:(e,t,n)=>{n.r(t),n.d(t,{BlobLocation:()=>l,ElementId:()=>r,FileLocation:()=>m,LocalPathLocation:()=>c,NoAssemblyRegion:()=>i,Region:()=>a,UriLocation:()=>d,UriLocationRaw:()=>u});var s=n(36422),o=n(32761);const r=s.types.optional(s.types.identifier,()=>(0,o.Ak)()),i=s.types.model("NoAssemblyRegion",{refName:s.types.string,start:s.types.number,end:s.types.number,reversed:s.types.optional(s.types.boolean,!1)}).actions(e=>({setRefName(t){e.refName=t}})),a=s.types.compose("Region",i,s.types.model({assemblyName:s.types.string})),c=s.types.model("LocalPathLocation",{locationType:s.types.literal("LocalPathLocation"),localPath:s.types.string}),l=s.types.model("BlobLocation",{locationType:s.types.literal("BlobLocation"),name:s.types.string,blobId:s.types.string}),u=s.types.model("UriLocation",{locationType:s.types.literal("UriLocation"),uri:s.types.string,baseUri:s.types.maybe(s.types.string),internetAccountId:s.types.maybe(s.types.string),internetAccountPreAuthorization:s.types.maybe(s.types.model("InternetAccountPreAuthorization",{internetAccountType:s.types.string,authInfo:s.types.frozen()}))}),d=s.types.snapshotProcessor(u,{postProcessor:e=>{const{baseUri:t,...n}=e;return t?e:n}}),m=s.types.snapshotProcessor(s.types.union(c,d,l),{preProcessor(e){if(!e)return;const{locationType:t,...n}=e;if(!t){const{uri:e,localPath:t,blob:s}=n;let o="";return void 0!==e?o="UriLocation":void 0!==t?o="LocalPathLocation":void 0!==s&&(o="BlobLocation"),{...n,locationType:o}}return e}})},9236:(e,t,n)=>{n.d(t,{A:()=>m});var s=n(67758),o=n(8469),r=n(51110),i=n(62266),a=n(56520),c=n(51414),l=n(75785),u=n(69500);const d=(0,l.n9)()(e=>({tooltip:{position:"absolute",pointerEvents:"none",backgroundColor:(0,i.X4)(e.palette.grey[700],.9),borderRadius:e.shape.borderRadius,color:e.palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.fontSize,lineHeight:Math.round(14e4)/1e5+"em",maxWidth:300,wordWrap:"break-word"}}));function m(e){const t=(0,s.c)(19),{clientPoint:n,children:i,placement:l}=e,m=void 0===l?"right":l,p=(0,c.A)(),f=p.components?.MuiPopper,{classes:h}=d();let g,y;t[0]===Symbol.for("react.memo_cache_sentinel")?(g=[(0,o.cY)(5)],t[0]=g):g=t[0],t[1]!==m?(y={placement:m,strategy:"fixed",middleware:g},t[1]=m,t[2]=y):y=t[2];const{refs:b,floatingStyles:w,context:v}=(0,r.we)(y),S=(0,r.ju)(v,n);let C;t[3]!==S?(C=[S],t[3]=S,t[4]=C):C=t[4];const{getFloatingProps:A}=(0,r.bv)(C),k=f?.defaultProps?.container,x=h.tooltip,M=b.setFloating,T="translate(0px, 0px)"===w.transform?"hidden":void 0;let j,P,E,I;return t[5]!==w||t[6]!==T?(j={...w,zIndex:1e5,visibility:T,pointerEvents:"none"},t[5]=w,t[6]=T,t[7]=j):j=t[7],t[8]!==A?(P=A(),t[8]=A,t[9]=P):P=t[9],t[10]!==i||t[11]!==h.tooltip||t[12]!==b.setFloating||t[13]!==P||t[14]!==j?(E=(0,u.jsx)("div",{className:x,ref:M,style:j,...P,children:i}),t[10]=i,t[11]=h.tooltip,t[12]=b.setFloating,t[13]=P,t[14]=j,t[15]=E):E=t[15],t[16]!==E||t[17]!==k?(I=(0,u.jsx)(a.A,{container:k,children:E}),t[16]=E,t[17]=k,t[18]=I):I=t[18],I}},13476:(e,t,n)=>{n.d(t,{A:()=>u});var s=n(80592),o=n(10424),r=n.n(o),i=n(99546),a=n(69500);let c=!1;const l=new RegExp(["a","b","br","code","div","em","h1","h2","h3","h4","h5","h6","i","img","li","p","pre","span","small","strong","table","tbody","sup","sub","td","tfoot","th","thead","tr","u","ul"].map(e=>`<${e}\\b[^>]*>`).join("|"),"i");function u({html:e,className:t}){const n=(0,i.linkify)(`${e}`),o=(u=n,l.test(u)?n:r()(n));var u;return c||(c=!0,s.A.addHook("afterSanitizeAttributes",e=>{"A"===e.tagName&&(e.setAttribute("rel","noopener noreferrer"),e.setAttribute("target","_blank"))})),(0,a.jsx)("span",{className:t,dangerouslySetInnerHTML:{__html:s.A.sanitize(o)}})}},16574:(e,t,n)=>{n.d(t,{A:()=>m,m:()=>d});var s=n(7552),o=n(12678),r=n(69426),i=n(62367),a=n(68384),c=n(38418),l=n(679),u=n(20952);const d=(0,s.lazy)(()=>Promise.all([n.e(2407),n.e(4132),n.e(1547)]).then(n.bind(n,26167)));class m extends o.A{name="DataManagementPlugin";exports={AssemblyManager:d};install(e){(0,u.A)(e),(0,c.A)(e),(0,i.A)(e),(0,a.Ay)(e),(0,r.A)(e),(0,l.A)(e)}configure(e){}}},17765:(e,t,n)=>{n.d(t,{J:()=>a,Z:()=>c});var s=n(49409);const o=async(e,t)=>(await Promise.all([n.e(7753),n.e(9831),n.e(5156)]).then(n.t.bind(n,29831,23))).encrypt(e,t).toString(),r=async(e,t)=>{const s=await Promise.all([n.e(7753),n.e(9831),n.e(5156)]).then(n.t.bind(n,29831,23)),o=await Promise.all([n.e(7753),n.e(6235)]).then(n.t.bind(n,12598,23));return s.decrypt(e,t).toString(o)};function i(e){try{return JSON.parse(e).message}catch(t){return e}}async function a(e,t,n){const r=await(0,s.eW)(JSON.stringify(e)),a=window.btoa([...window.crypto.getRandomValues(new Uint8Array(10))].map(e=>String.fromCharCode(e)).join("")).replaceAll(/[+/]/g,"").slice(0,5);const c=await o(r,a),l=new FormData;l.append("session",c),l.append("dateShared",`${Date.now()}`),l.append("referer",n);const u=await fetch(`${t}share`,{method:"POST",mode:"cors",body:l});if(!u.ok){const e=await u.text();throw new Error(i(e))}return{json:await u.json(),encryptedSession:c,password:a}}async function c(e,t,n,s){const o=t.split("share-")[1],a=`${e}?sessionId=${encodeURIComponent(o)}`,c=await fetch(a,{signal:s});if(!c.ok){const e=await c.text();throw new Error(i(e))}const l=await c.json();return r(l.session,n)}},23758:(e,t,n)=>{n.d(t,{A:()=>l});var s=n(7552),o=n(64980),r=n(89870),i=n(68446),a=n(33484),c=n(69500);const l=(0,i.observer)(function({children:e,menuItems:t,closeAfterItemClick:n=!0,stopPropagation:i,setOpen:l,onClick:u,...d}){const m=(0,a.T6)(),{onClick:p,...f}=(0,a.cO)(m),{isOpen:h}=m;return(0,s.useEffect)(()=>{l?.(h)},[h,l]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(r.A,{onClick:e=>{i&&e.stopPropagation(),p(e),u?.()},...f,...d,disabled:0===t.length,children:e}),(0,c.jsx)(o.A,{...(0,a.dB)(m),onMenuItemClick:(e,t)=>{t()},menuItems:t,closeAfterItemClick:n,popupState:m})]})})},32559:(e,t,n)=>{n.d(t,{X:()=>c});var s=n(68584),o=n(99546),r=n(42489),i=n(36422);const a=128;function c(e){const t=e.pluggableMstType("widget","stateModel");return i.types.model({drawerPosition:i.types.optional(i.types.string,()=>(0,o.localStorageGetItem)("drawerPosition")||"right"),drawerWidth:i.types.optional(i.types.refinement(i.types.integer,e=>e>=a),384),widgets:i.types.map(t),activeWidgets:i.types.map(i.types.safeReference(t)),minimized:i.types.optional(i.types.boolean,!1)}).views(e=>({get visibleWidget(){if((0,i.isAlive)(e))return[...e.activeWidgets.values()][e.activeWidgets.size-1]}})).actions(t=>({setDrawerPosition(e){t.drawerPosition=e,localStorage.setItem("drawerPosition",e)},updateDrawerWidth(e){if(e===t.drawerWidth)return t.drawerWidth;let n=e;return n<a&&(n=a),t.drawerWidth=n,n},resizeDrawer(e){"left"===t.drawerPosition&&(e*=-1);const n=t.drawerWidth;return n-this.updateDrawerWidth(n-e)},addWidget(n,s,o={},r){if(!e.getElementType("widget",n))throw new Error(`unknown widget type ${n}`);const i={...o,id:s,type:n,configuration:r||{type:n}};return t.widgets.set(s,i),t.widgets.get(s)},showWidget(e){t.activeWidgets.has(e.id)&&t.activeWidgets.delete(e.id),t.activeWidgets.set(e.id,e),t.minimized=!1},hasWidget:e=>t.activeWidgets.has(e.id),hideWidget(e){t.activeWidgets.delete(e.id)},minimizeWidgetDrawer(){t.minimized=!0},showWidgetDrawer(){t.minimized=!1},hideAllWidgets(){t.activeWidgets.clear()},editConfiguration(e){if(!(0,s.isConfigurationModel)(e))throw new Error("must pass a configuration model to editConfiguration");const t=this.addWidget("ConfigurationEditorWidget","configEditor",{target:e});this.showWidget(t)},afterAttach(){(0,i.addDisposer)(t,(0,r.autorun)(()=>{(0,o.localStorageSetItem)("drawerPosition",t.drawerPosition)}))}}))}},33484:(e,t,n)=>{n.d(t,{NA:()=>u,T6:()=>r,_k:()=>a,cO:()=>i,dB:()=>l,oe:()=>c});var s=n(67758),o=n(7552);function r(e){const t=(0,s.c)(27);let n;t[0]!==e?(n=e||{},t[0]=e,t[1]=n):n=t[1];const{parentPopupState:r}=n,i=o.useId(),[a,c]=(0,o.useState)(!1),[l,u]=(0,o.useState)(!1),[d,m]=(0,o.useState)(),[p,f]=(0,o.useState)(!1),[h,g]=(0,o.useState)(!1),[y,b]=(0,o.useState)(),[w,v]=(0,o.useState)();let S;t[2]===Symbol.for("react.memo_cache_sentinel")?(S=e=>{u(!0),m(e)},t[2]=S):S=t[2];const C=S;let A,k,x,M;t[3]!==w||t[4]!==a||t[5]!==r||t[6]!==i||t[7]!==l?(x=e=>{a?A(e):k(e)},k=e=>{const t=e instanceof Element?void 0:e,n=e instanceof Element?e:e?.currentTarget instanceof Element?e.currentTarget:void 0;if("touchstart"!==t?.type){if(r){if(!r.isOpen)return;r.childHandle&&r.childHandle.close(),r.setChildHandle({popupId:i,close:A})}c(!0),f(e=>"mouseover"===t?.type||e),g(e=>"focus"===t?.type||e),b(t?.type),l||(t?.currentTarget?m(t.currentTarget):n&&m(n))}},A=e=>{const t=e instanceof Element?void 0:e;"touchstart"!==t?.type&&(w?.close(),r?.setChildHandle(void 0),c(!1),f(!1),g(!1))},t[3]=w,t[4]=a,t[5]=r,t[6]=i,t[7]=l,t[8]=A,t[9]=k,t[10]=x):(A=t[8],k=t[9],x=t[10]),t[11]!==A||t[12]!==k?(M=(e,t)=>{e?k(t):A(t)},t[11]=A,t[12]=k,t[13]=M):M=t[13];const T=M;let j;return t[14]!==d||t[15]!==w||t[16]!==A||t[17]!==h||t[18]!==p||t[19]!==a||t[20]!==k||t[21]!==y||t[22]!==i||t[23]!==l||t[24]!==T||t[25]!==x?(j={isOpen:a,anchorEl:d,setAnchorElUsed:l,setAnchorEl:C,popupId:i,open:k,close:A,toggle:x,setOpen:T,hovered:p,focused:h,_openEventType:y,childHandle:w,setChildHandle:v},t[14]=d,t[15]=w,t[16]=A,t[17]=h,t[18]=p,t[19]=a,t[20]=k,t[21]=y,t[22]=i,t[23]=l,t[24]=T,t[25]=x,t[26]=j):j=t[26],j}function i(e){return{onClick:e.open}}function a(e){const{open:t}=e;return{onMouseOver:t}}function c(e){const{open:t}=e;return{onFocus:t}}function l({isOpen:e,anchorEl:t,close:n,popupId:s}){return{id:s,anchorEl:t,anchorReference:"anchorEl",open:e,onClose:n}}function u({isOpen:e,anchorEl:t,close:n,popupId:s}){return{id:s,anchorEl:t,anchorReference:"anchorEl",open:e,onClose:n}}},34895:(e,t,n)=>{n.d(t,{P:()=>a,R:()=>i});var s=n(67758),o=n(69500);function r(e){return"black"===e?{midnight:"#808080",forrest:"#666666",grape:"#4d4d4d",mandarin:"#333333",gray:"#1a1a1a"}:"white"===e?{midnight:"#ffffff",forrest:"#e6e6e6",grape:"#cccccc",mandarin:"#b3b3b3",gray:"#999999"}:{midnight:"#0d233f",forrest:"#135560",grape:"#721e63",mandarin:"#ffb11d",gray:"#dadada"}}function i(e){const t=(0,s.c)(2),{variant:n}=e;let r;return t[0]!==n?(r=(0,o.jsx)("svg",{viewBox:"0 0 175 175",children:(0,o.jsx)(c,{variant:n})}),t[0]=n,t[1]=r):r=t[1],r}function a(e){const t=(0,s.c)(2),{variant:n}=e;let r;return t[0]!==n?(r=(0,o.jsxs)("svg",{viewBox:"0 0 641 175",children:[(0,o.jsx)(l,{variant:n}),(0,o.jsx)(c,{variant:n})]}),t[0]=n,t[1]=r):r=t[1],r}function c(e){const t=(0,s.c)(18),{variant:n}=e;let i;t[0]!==n?(i=r(n),t[0]=n,t[1]=i):i=t[1];const a=i;let c,l,u,d,m,p;return t[2]!==a.midnight?(c=(0,o.jsx)("path",{style:{fill:a.midnight},d:"M120.5,57.5c.168,0,.333.012.5.013V40.506c-.167,0-.333-.006-.5-.006a98.325,98.325,0,0,0-77.4,37.565q-2.664,3.378-5.023,6.994l14.206,9.327Q54.043,91.709,56,89.179A81.363,81.363,0,0,1,120.5,57.5Z"}),t[2]=a.midnight,t[3]=c):c=t[3],t[4]!==a.forrest?(l=(0,o.jsx)("path",{style:{fill:a.forrest},d:"M148.668,86.223c.308.133.6.283.908.42l6.746-15.618c-.153-.067-.3-.143-.454-.21a81.36,81.36,0,0,0-71.777,3.5q-2.8,1.544-5.469,3.309l9.249,14.054A63.93,63.93,0,0,1,148.668,86.223Z"}),t[4]=a.forrest,t[5]=l):l=t[5],t[6]!==a.grape?(u=(0,o.jsx)("path",{style:{fill:a.grape},d:"M170.894,109.37A63.929,63.929,0,0,0,113.4,88.861l2.336,15.474a48.456,48.456,0,0,1,44.322,15.42c.111.125.214.255.324.381l11.16-10C171.323,109.879,171.118,109.62,170.894,109.37Z"}),t[6]=a.grape,t[7]=u):u=t[7],t[8]!==a.mandarin?(d=(0,o.jsx)("path",{style:{fill:a.mandarin},d:"M150.921,150.314c.04.163.07.326.107.489l16.509-4.058c-.039-.163-.067-.326-.107-.489A48.457,48.457,0,0,0,135.575,111.8l-5.515,15.591A32.466,32.466,0,0,1,150.921,150.314Z"}),t[8]=a.mandarin,t[9]=d):d=t[9],t[10]!==a.gray?(m=(0,o.jsx)("path",{style:{fill:a.gray},d:"M134.1,138.129l-9.779,13.213a32.486,32.486,0,0,1,7.823,14.463l15.147.852c.012-.166.032-.331.041-.5A32.464,32.464,0,0,0,134.1,138.129Z"}),t[10]=a.gray,t[11]=m):m=t[11],t[12]!==c||t[13]!==l||t[14]!==u||t[15]!==d||t[16]!==m?(p=(0,o.jsxs)(o.Fragment,{children:[c,l,u,d,m]}),t[12]=c,t[13]=l,t[14]=u,t[15]=d,t[16]=m,t[17]=p):p=t[17],p}function l(e){const t=(0,s.c)(13),{variant:n}=e;let i;t[0]!==n?(i=r(n),t[0]=n,t[1]=i):i=t[1];const a=i;let c,l,u,d,m,p,f,h,g;return t[2]!==a.midnight?(c={fill:a.midnight},t[2]=a.midnight,t[3]=c):c=t[3],t[4]===Symbol.for("react.memo_cache_sentinel")?(l=(0,o.jsx)("path",{d:"m 26.355,-71.505 v 54.075 2.835 q 0,6.825 -0.42,10.185 -0.735,5.67 -2.835,9.135 -3.255,5.355 -8.505,8.4 -4.83,2.73 -11.55,3.57 L 1.47,11.76 Q 7.35,10.185 9.24,4.2 10.605,-0.105 10.605,-9.975 v -5.565 -55.965 q 1.785,0 4.62,0.315 2.835,0.21 3.255,0.21 1.785,0 2.94,-0.105 4.515,-0.42 4.935,-0.42 z"}),u=(0,o.jsx)("path",{d:"m 60.68836,-65.415 v 24.78 h 3.255 q 2.94,0 4.935,-0.525 2.1,-0.525 3.885,-2.1 2.31,-1.995 3.36,-4.83 1.155,-2.835 1.155,-6.09 0,-5.565 -2.94,-8.61 -2.94,-3.045 -8.295,-3.045 -2.52,0 -5.355,0.42 z m 0,30.87 V -6.09 h 5.25 q 4.725,0 8.505,-3.675 3.885,-3.78 3.885,-10.08 0,-8.19 -4.62,-11.655 -4.095,-3.045 -13.02,-3.045 z M 44.93836,0 v -71.505 h 27.09 q 9.135,0 14.385,3.255 6.51,3.99 6.51,12.6 0,7.035 -5.25,11.655 -4.62,4.095 -11.97,5.145 v 0.945 q 7.56,0.735 12.285,3.99 6.615,4.62 6.615,13.335 0,10.185 -7.98,15.75 -6.93,4.83 -17.43,4.83 z"}),d=(0,o.jsx)("path",{d:"M 109.44281,0.525 V -50.4 q 1.785,0.21 3.99,0.42 2.31,0.105 3.255,0.105 2.31,0 4.2,-0.21 1.89,-0.21 3.045,-0.315 v 13.02 q 1.89,-6.51 5.46,-9.87 4.41,-4.095 11.655,-4.095 -0.315,2.73 -0.42,6.825 -0.105,3.99 -0.105,7.455 l -0.945,0.84 q -0.945,-0.735 -2.415,-1.05 -1.47,-0.315 -2.94,-0.315 -3.57,0 -6.195,1.89 -2.52,1.785 -3.465,5.04 -0.42,1.155 -0.525,3.15 -0.105,1.89 -0.105,4.515 v 4.515 19.005 q -1.785,-0.21 -2.625,-0.21 -3.675,-0.315 -4.62,-0.315 -2.31,0 -4.2,0.21 -1.89,0.21 -3.045,0.315 z"}),m=(0,o.jsx)("path",{d:"m 173.77337,1.47 q -11.655,0 -18.585,-6.825 -6.93,-6.825 -6.93,-18.48 0,-12.6 6.72,-20.055 6.825,-7.455 18.9,-7.455 11.97,0 18.9,6.72 6.93,6.72 6.93,18.48 0,12.285 -6.72,19.74 -7.14,7.875 -19.215,7.875 z m 0.735,-48.09 q -5.88,0 -8.505,6.51 -2.205,5.565 -2.205,15.96 0,8.19 1.47,12.915 2.415,7.98 8.505,7.98 5.565,0 8.19,-7.875 2.205,-6.51 2.205,-16.695 0,-8.505 -2.1,-13.23 -2.52,-5.565 -7.56,-5.565 z"}),p=(0,o.jsx)("path",{d:"m 222.03563,-50.4 10.5,36.015 q 3.675,-11.235 5.67,-17.85 2.415,-8.085 5.04,-18.165 1.05,0.105 3.045,0.315 2.1,0.21 2.835,0.21 1.995,0 3.15,-0.105 1.26,-0.21 2.73,-0.42 l 10.71,36.015 q 5.88,-17.43 10.71,-36.015 l 4.2,0.315 4.095,-0.315 q -5.145,13.125 -9.135,24.57 -5.04,14.28 -8.505,26.355 -1.89,-0.21 -3.36,-0.42 -1.365,-0.105 -2.205,-0.105 -1.89,0 -3.36,0.21 -1.365,0.21 -2.31,0.315 l -10.605,-34.755 q -4.41,13.65 -6.72,21.105 -2.31,7.35 -4.095,13.65 -1.89,-0.21 -3.36,-0.42 -1.365,-0.105 -2.31,-0.105 -1.995,0 -3.465,0.21 -1.365,0.21 -2.31,0.315 -3.78,-12.81 -5.04,-17.01 -2.205,-7.245 -5.46,-17.01 -2.835,-8.4 -5.88,-16.905 1.575,0 4.305,0.315 2.73,0.21 3.36,0.21 1.47,0 4.305,-0.21 2.835,-0.315 3.465,-0.315 z"}),f=(0,o.jsx)("path",{d:"m 292.84172,-12.81 h 2.625 q 1.47,4.095 4.62,6.51 3.15,2.415 7.35,2.415 2.94,0 5.46,-1.785 2.625,-1.89 2.625,-4.62 0,-3.885 -6.195,-6.615 -10.395,-4.62 -11.655,-5.46 -6.405,-4.515 -6.405,-12.285 0,-7.77 5.25,-12.18 5.25,-4.515 12.81,-4.515 3.99,0 8.085,1.365 4.095,1.26 7.14,3.57 l -2.52,9.24 h -2.94 q -0.63,-3.57 -3.57,-6.195 -2.835,-2.625 -6.405,-2.625 -3.15,0 -5.46,1.575 -2.31,1.47 -2.31,4.515 0,3.885 6.405,6.51 10.185,4.095 11.865,5.25 6.405,4.41 6.405,12.81 0,7.455 -5.46,12.18 -5.355,4.62 -14.805,4.62 -8.19,0 -14.49,-4.305 z"}),h=(0,o.jsx)("path",{d:"m 349.61228,-29.925 h 15.54 q 0,-6.51 -1.05,-10.395 -1.68,-6.3 -5.88,-6.3 -5.04,0 -7.14,6.195 -1.47,4.305 -1.47,10.5 z m 30.03,5.04 h -30.03 q 0,9.135 3.045,13.86 3.57,5.67 11.55,5.67 3.255,0 6.405,-1.26 3.15,-1.26 5.88,-3.465 l 1.26,0.945 -2.31,5.88 q -6.72,4.725 -15.015,4.725 -12.915,0 -19.635,-7.245 -6.72,-7.245 -6.72,-20.37 0,-11.235 6.405,-18.165 6.51,-7.035 17.64,-7.035 11.655,0 16.905,7.56 4.62,6.615 4.62,18.9 z"}),t[4]=l,t[5]=u,t[6]=d,t[7]=m,t[8]=p,t[9]=f,t[10]=h):(l=t[4],u=t[5],d=t[6],m=t[7],p=t[8],f=t[9],h=t[10]),t[11]!==c?(g=(0,o.jsxs)("g",{"aria-label":"JBrowse",transform:"translate(213.084 144.241)",style:c,children:[l,u,d,m,p,f,h]}),t[11]=c,t[12]=g):g=t[12],g}},37565:(e,t,n)=>{n.d(t,{A:()=>l});var s=n(67758),o=n(61282),r=n(73329),i=n(75785),a=n(69500);const c=(0,i.n9)()({dots:{"&::after":{display:"inline-block",content:'""',width:"1em",textAlign:"left",animation:`${r.i7`
      0% {
        content: '';
      }
      25% {
          content: '.';
      }
      50% {
        content: '..';
      }
      75% {
        content: '...';
      }
      `} 1.2s infinite ease-in-out`}}});function l(e){const t=(0,s.c)(13);let n,r,i;t[0]!==e?(({message:n,variant:i,...r}=e),t[0]=e,t[1]=n,t[2]=r,t[3]=i):(n=t[1],r=t[2],i=t[3]);const l=void 0===i?"body2":i,{cx:u,classes:d}=c();let m;t[4]!==d.dots||t[5]!==u||t[6]!==r.className?(m=u(d.dots,r.className),t[4]=d.dots,t[5]=u,t[6]=r.className,t[7]=m):m=t[7];const p=n||"Loading";let f;return t[8]!==r||t[9]!==m||t[10]!==p||t[11]!==l?(f=(0,a.jsx)(o.A,{className:m,...r,variant:l,children:p}),t[8]=r,t[9]=m,t[10]=p,t[11]=l,t[12]=f):f=t[12],f}},38033:(e,t,n)=>{n.d(t,{A:()=>h});var s=n(67758),o=n(7552),r=n(98231),i=n(65468),a=n(37962),c=n(89870),l=n(75785),u=n(21311),d=n(69500);const m=(0,o.lazy)(()=>Promise.all([n.e(1631),n.e(4630)]).then(n.bind(n,74630))),p=(0,l.n9)()(e=>({bg:{background:e.palette.divider,border:"1px solid black",margin:20},iconFloat:{float:"right",marginLeft:100}}));function f(e){const t=(0,s.c)(12),{error:n,onReset:l}=e,{classes:u}=p(),[f,h]=(0,o.useState)(!1);let g,y,b,w;return t[0]!==n?(g="object"==typeof n&&n&&"stack"in n?(0,d.jsx)(a.A,{title:"Get stack trace",children:(0,d.jsx)(c.A,{onClick:()=>{h(!0)},color:"primary",children:(0,d.jsx)(i.A,{})})}):null,t[0]=n,t[1]=g):g=t[1],t[2]!==l?(y=l?(0,d.jsx)(a.A,{title:"Retry",children:(0,d.jsx)(c.A,{onClick:l,color:"primary",children:(0,d.jsx)(r.A,{})})}):null,t[2]=l,t[3]=y):y=t[3],t[4]!==n||t[5]!==f?(b=f?(0,d.jsx)(o.Suspense,{fallback:null,children:(0,d.jsx)(m,{error:n,onClose:()=>{h(!1)}})}):null,t[4]=n,t[5]=f,t[6]=b):b=t[6],t[7]!==u.iconFloat||t[8]!==g||t[9]!==y||t[10]!==b?(w=(0,d.jsxs)("div",{className:u.iconFloat,children:[g,y,b]}),t[7]=u.iconFloat,t[8]=g,t[9]=y,t[10]=b,t[11]=w):w=t[11],w}const h=function(e){const t=(0,s.c)(8),{error:n,onReset:o}=e,{classes:r}=p(),i=`${n}`;let a;if(t[0]!==r||t[1]!==n||t[2]!==o||t[3]!==i){const e=i.indexOf("expected an instance of"),s=-1!==e?i.slice(0,e):i,c=function(e){let t="";const n=e.indexOf("is not assignable");if(-1!==n){const s=e.slice(0,n+17),o=/.*at path "(.*)" snapshot `(.*)` is not assignable/m.exec(s);o&&(e=`Failed to load element at ${o[1]}...Failed element had snapshot`,t=o[2]);const r=/.*snapshot `(.*)` is not assignable/.exec(s);r&&(e="Failed to load element...Failed element had snapshot",t=r[1])}return t}(i);let l;t[5]!==n||t[6]!==o?(l=(0,d.jsx)(f,{error:n,onReset:o}),t[5]=n,t[6]=o,t[7]=l):l=t[7],a=(0,d.jsxs)(u.A,{children:[s.slice(0,1e4),l,c?(0,d.jsx)("pre",{className:r.bg,children:JSON.stringify(JSON.parse(c),null,2)}):null]}),t[0]=r,t[1]=n,t[2]=o,t[3]=i,t[4]=a}else a=t[4];return a}},41658:(e,t,n)=>{n.r(t),n.d(t,{Loader:()=>Vt,default:()=>qt});var s=n(67758),o=n(7552),r=n(67112),i=n(57468),a=n(68446),c=n(430),l=n(83504),u=(n(39975),n(69500));const d=(0,o.lazy)(()=>Promise.all([n.e(2524),n.e(8825)]).then(n.bind(n,8825))),m=(0,a.observer)(function({session:e}){const{snackbarMessages:t}=e,n=t.at(-1);return n?(0,u.jsx)(o.Suspense,{fallback:null,children:(0,u.jsx)(d,{onClose:(t,n)=>{"clickaway"!==n&&e.popSnackbarMessage()},contents:n})}):null});var p=n(71777),f=n(75785),h=n(69293),g=n(37962),y=n(13570);const b=(0,f.n9)()(e=>({left:{zIndex:1e4,position:"fixed",bottom:e.spacing(2),left:e.spacing(2)},right:{zIndex:1e4,position:"fixed",bottom:e.spacing(2),right:e.spacing(2)}})),w=(0,a.observer)(function({session:e}){const{minimized:t,activeWidgets:n,drawerPosition:s}=e,{classes:o}=b();return n.size>0&&t?(0,u.jsx)(g.A,{title:"Open drawer widget",children:(0,u.jsx)(y.A,{className:"right"===s?o.right:o.left,color:"primary","data-testid":"drawer-maximize",onClick:()=>{e.showWidgetDrawer()},children:(0,u.jsx)(h.A,{})})}):null});var v=n(68584),S=n(34895);const C=(0,a.observer)(function({session:e}){const{configuration:t}=e,n=(0,v.readConfObject)(t,"logoPath");return n?.uri?(0,u.jsx)("img",{src:n.uri,alt:"Custom logo"}):(0,u.jsx)(S.P,{variant:"white"})});var A=n(61968),k=n(62266),x=n(69092),M=n(8463);const T=(0,f.n9)()(e=>({buttonRoot:{"&:hover":{backgroundColor:(0,k.X4)(e.palette.primary.contrastText,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}}})),j=(0,a.observer)(function({menuTitle:e,session:t,menuItems:n}){const[s,r]=(0,o.useState)(!1),i=(0,o.useRef)(null),{classes:a}=T();function c(){r(!1)}return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(x.A,{ref:i,color:"inherit","data-testid":"dropDownMenuButton",classes:{root:a.buttonRoot},onClick:()=>{r(!s)},children:[e,(0,u.jsx)(A.A,{})]}),s?(0,u.jsx)(M.A,{open:!0,anchorEl:i.current,anchorOrigin:{vertical:"bottom",horizontal:"left"},onClose:c,menuItems:"function"==typeof n?n():n,onMenuItemClick:(e,n)=>{n(t),c()}}):null]})});var P=n(88373),E=n(5690);const I=(0,f.n9)()(e=>({grow:{flexGrow:1},inputBase:{color:e.palette.primary.contrastText},inputRoot:{"&:hover":{backgroundColor:e.palette.primary.light}},inputFocused:{borderColor:e.palette.secondary.main,backgroundColor:e.palette.primary.light}})),N=(0,a.observer)(function({session:e,HeaderButtons:t=(0,u.jsx)("div",{})}){const{classes:n}=I(),{name:s,menus:o}=e;return(0,u.jsxs)(E.A,{children:[o().map(t=>(0,u.jsx)(j,{menuTitle:t.label,menuItems:t.menuItems,session:e},t.label)),(0,u.jsx)("div",{className:n.grow}),(0,u.jsx)(g.A,{title:"Rename session",arrow:!0,children:(0,u.jsx)(P.A,{value:s,variant:"body1",classes:{inputBase:n.inputBase,inputRoot:n.inputRoot,inputFocused:n.inputFocused},setValue:t=>{e.renameCurrentSession(t)}})}),t,(0,u.jsx)("div",{className:n.grow}),(0,u.jsx)("div",{style:{width:150,maxHeight:48},children:(0,u.jsx)(C,{session:e})})]})}),R=(0,a.observer)(function({session:e}){const{DialogComponent:t,DialogProps:n}=e;return t?(0,u.jsx)(o.Suspense,{fallback:null,children:(0,u.jsx)(t,{...n})}):null});var L=n(99546),D=n(51414),$=n(95054),O=n(83567),z=n(18423),U=n(84340),W=n(71634),B=n(71098),_=n(89870);const F=(0,f.n9)()(e=>({input:{paddingBottom:0,paddingTop:2},inputBase:{color:e.palette.secondary.contrastText},inputRoot:{"&:hover":{backgroundColor:e.palette.secondary.light}},inputFocused:{borderColor:e.palette.primary.main,backgroundColor:e.palette.secondary.light}})),V=(0,a.observer)(function({view:e}){const{classes:t}=F(),{assemblyManager:n}=(0,L.getSession)(e);return(0,u.jsx)(g.A,{title:"Rename view",arrow:!0,children:(0,u.jsx)(P.A,{value:e.displayName||`${e.assemblyNames?.map(e=>n.get(e)?.displayName).join(",")||"Untitled view"}${e.minimized?" (minimized)":""}`,setValue:t=>{e.setDisplayName(t)},variant:"body2",classes:{input:t.input,inputBase:t.inputBase,inputRoot:t.inputRoot,inputFocused:t.inputFocused}})})}),H=V;var G=n(64980),q=n(33484),J=n(5986),Q=n(85179),K=n(85161),Y=n(11496),Z=n(41785);const X=(0,a.observer)(function({model:e,IconButtonProps:t,IconProps:n}){const s=(0,L.getSession)(e),o=(0,q.T6)({variant:"popover"});return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(_.A,{...t,...(0,q.cO)(o),"data-testid":"view_menu_icon",children:(0,u.jsx)(Z.A,{...n,fontSize:"small"})}),(0,u.jsx)(G.A,{...(0,q.dB)(o),onMenuItemClick:(e,t)=>{t()},menuItems:[...s.views.length>1?[{label:"View order",type:"subMenu",subMenu:[...s.views.length>2?[{label:"Move view to top",icon:Y.A,onClick:()=>{s.moveViewToTop(e.id)}}]:[],{label:"Move view up",icon:Q.A,onClick:()=>{s.moveViewUp(e.id)}},{label:"Move view down",icon:J.A,onClick:()=>{s.moveViewDown(e.id)}},...s.views.length>2?[{label:"Move view to bottom",icon:K.A,onClick:()=>{s.moveViewToBottom(e.id)}}]:[]]}]:[],...e.menuItems()],popupState:o})]})}),ee=(0,f.n9)()(e=>({icon:{color:e.palette.secondary.contrastText},grow:{flexGrow:1},viewHeader:{display:"flex",height:r.VIEW_HEADER_HEIGHT,top:0,zIndex:900,background:e.palette.secondary.main},viewTitle:{display:"flex",alignItems:"center"}})),te=(0,a.observer)(function({view:e,onClose:t,onMinimize:n}){const{classes:s}=ee();return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(_.A,{"data-testid":"minimize_view",onClick:n,children:e.minimized?(0,u.jsx)(z.A,{className:s.icon,fontSize:"small"}):(0,u.jsx)(B.A,{className:s.icon,fontSize:"small"})}),(0,u.jsx)(_.A,{"data-testid":"close_view",onClick:t,children:(0,u.jsx)(U.A,{className:s.icon,fontSize:"small"})})]})}),ne=(0,a.observer)(function({view:e,onClose:t,onMinimize:n,className:s}){const{classes:r,cx:i}=ee(),a=(0,o.useRef)(null),c=(0,L.getSession)(e);let l=!1;return(0,O.X)(c)&&({stickyViewHeaders:l}=c),(0,o.useEffect)(()=>{"undefined"==typeof jest&&a.current?.scrollIntoView({block:"center"})},[]),(0,u.jsxs)("div",{ref:a,className:i(r.viewHeader,s),style:{position:l?"sticky":void 0},children:[(0,u.jsx)(X,{model:e,IconProps:{className:r.icon}}),(0,u.jsx)("div",{className:r.grow}),(0,u.jsxs)("div",{className:r.viewTitle,children:[c.focusedViewId===e.id?(0,u.jsx)(W.A,{className:r.icon,fontSize:"small"}):null,(0,u.jsx)(H,{view:e})]}),(0,u.jsx)("div",{className:r.grow}),(0,u.jsx)(te,{onClose:t,onMinimize:n,view:e})]})});var se=n(37565);const oe=(0,a.observer)(function({view:e,session:t}){const{pluginManager:n}=(0,L.getEnv)(t),s=n.getViewType(e.type);if(!s)throw new Error(`unknown view type ${e.type}`);const{ReactComponent:r}=s;return e.minimized?null:(0,u.jsx)(o.Suspense,{fallback:(0,u.jsx)(se.A,{variant:"h6"}),children:(0,u.jsx)(r,{model:e,session:t})})}),re=(0,f.n9)()(e=>({viewContainer:{margin:e.spacing(.5),padding:`0 ${e.spacing(1)} ${e.spacing(1)}`,overflow:"clip"},focusedView:{background:e.palette.secondary.main},unfocusedView:{background:e.palette.secondary.dark}})),ie=(0,a.observer)(function({view:e,session:t}){const n=(0,D.A)(),s=(0,L.useWidthSetter)(e,n.spacing(1)),{classes:r,cx:i}=re();(0,o.useEffect)(()=>{function n(n){n.target instanceof Element&&s.current?.contains(n.target)&&t.setFocusedViewId(e.id)}return document.addEventListener("mousedown",n),document.addEventListener("keydown",n),()=>{document.removeEventListener("mousedown",n),document.removeEventListener("keydown",n)}},[s,t,e]);const a=t.focusedViewId===e.id?r.focusedView:r.unfocusedView,c=i(r.viewContainer,a);return(0,u.jsxs)($.A,{ref:s,elevation:12,className:c,children:[(0,u.jsx)(ne,{view:e,onClose:()=>{t.removeView(e)},onMinimize:()=>{e.setMinimized(!e.minimized)},className:a}),(0,u.jsx)($.A,{elevation:0,children:(0,u.jsx)(oe,{view:e,session:t})})]})}),ae=(0,o.lazy)(()=>n.e(4268).then(n.bind(n,94268))),ce=(0,f.n9)()({viewsContainer:{overflowY:"auto",gridRow:"components"}}),le=(0,a.observer)(function(e){const{session:t}=e,{views:n}=t,{classes:s}=ce();return(0,u.jsxs)("div",{className:s.viewsContainer,children:[n.length>0?n.map(e=>(0,u.jsx)(ie,{view:e,session:t},`view-${e.id}`)):(0,u.jsx)(o.Suspense,{fallback:null,children:(0,u.jsx)(ae,{...e})}),(0,u.jsx)("div",{style:{height:300}})]})}),ue=(0,o.lazy)(()=>n.e(8076).then(n.bind(n,88076))),de=(0,f.n9)()(e=>({root:{display:"grid",height:"100vh",width:"100%",colorScheme:e.palette.mode},appContainer:{gridColumn:"main",display:"grid",gridTemplateRows:"[menubar] min-content [components] auto",height:"100vh"},appBar:{flexGrow:1,gridRow:"menubar"}})),me=(0,a.observer)(function(e){const{session:t}=e;return(0,u.jsx)(o.Suspense,{fallback:null,children:(0,u.jsx)(ue,{session:t})})}),pe=(0,a.observer)(function(e){const{session:t}=e,{classes:n}=de(),{minimized:s,visibleWidget:o,drawerWidth:r,drawerPosition:i}=t,a=o&&!s,c=a?`[drawer] ${r}px`:void 0,l="right"===i?["[main] 1fr",c]:[c,"[main] 1fr"];return(0,u.jsxs)("div",{className:n.root,style:{gridTemplateColumns:l.filter(e=>!!e).join(" ")},children:[a&&"left"===i?(0,u.jsx)(me,{session:t}):null,(0,u.jsx)(R,{session:t}),(0,u.jsxs)("div",{className:n.appContainer,children:[(0,u.jsx)(p.A,{className:n.appBar,position:"static",children:(0,u.jsx)(N,{...e})}),(0,u.jsx)(le,{...e})]}),(0,u.jsx)(w,{session:t}),a&&"right"===i?(0,u.jsx)(me,{session:t}):null,(0,u.jsx)(m,{session:t})]})});var fe=n(36422);const he=fe.types.model("TimeTraveller",{undoIdx:-1,targetPath:""}).volatile(()=>({history:[],notTrackingUndo:!1})).views(e=>({get canUndo(){return e.undoIdx>0&&!e.notTrackingUndo},get canRedo(){return e.undoIdx<e.history.length-1&&!e.notTrackingUndo}})).actions(e=>{let t,n,s=!1;return{stopTrackingUndo(){e.notTrackingUndo=!0},resumeTrackingUndo(){e.notTrackingUndo=!1},addUndoState(t){e.notTrackingUndo||(s?s=!1:(e.history.splice(e.undoIdx+1),e.history.push(t),e.history.length>20&&e.history.shift(),e.undoIdx=e.history.length-1))},beforeDestroy(){n()},initialize(){if(t=e.targetPath?(0,fe.resolvePath)(e,e.targetPath):(0,fe.getEnv)(e).targetStore,!t)throw new Error("Failed to find target store for TimeTraveller. Please provide `targetPath` property, or a `targetStore` in the environment");n=(0,fe.onSnapshot)(t,function(e,t=300){let n;return(...s)=>{clearTimeout(n),n=setTimeout(()=>{e(...s)},t)}}(e=>{this.addUndoState(e)},300)),0===e.history.length&&this.addUndoState((0,fe.getSnapshot)(t))},undo(){e.undoIdx--,s=!0,t&&(0,fe.applySnapshot)(t,e.history[e.undoIdx])},redo(){e.undoIdx++,s=!0,t&&(0,fe.applySnapshot)(t,e.history[e.undoIdx])}}});var ge=n(42489);function ye(e){return!("function"==typeof e||e instanceof Error)}class be{constructor(e){this.driver=e}async getWorker(){return this.workerP||(this.workerP=this.driver.makeWorker().catch(e=>{throw this.workerP=void 0,e})),this.workerP}}class we{lastWorkerAssignment=-1;workerAssignments=new Map;maxPingTime=3e4;workerCheckFrequency=5e3;constructor(e){this.config=e.config}filterArgs(e,t){if(Array.isArray(e))return e.filter(e=>ye(e)).map(e=>this.filterArgs(e,t));if("object"==typeof e&&null!==e){if((0,fe.isStateTreeNode)(e)&&!(0,fe.isAlive)(e))throw new Error("dead state tree node passed to RPC call");return e instanceof File?e:Object.fromEntries(Object.entries(e).filter(e=>ye(e[1])).map(([e,n])=>[e,this.filterArgs(n,t)]))}return e}async remoteAbort(e,t,n){const s=await this.getWorker(e);await s.call(t,{stopTokenId:n},{timeout:1e6,rpcDriverClassName:this.name})}createWorkerPool(){const e=function(){const e="undefined"!=typeof window,t=e&&"hardwareConcurrency"in window.navigator;return e&&t?window.navigator.hardwareConcurrency:1}(),t=(0,v.readConfObject)(this.config,"workerCount")||(0,L.clamp)(1,Math.max(1,e-1),5),n=[];for(let e=0;e<t;e++)n.push(new be(this));return n}getWorkerPool(){if(!this.workerPool){const e=this.createWorkerPool();return this.workerPool=e,e}return this.workerPool}async getWorker(e){const t=this.getWorkerPool();let n=this.workerAssignments.get(e);if(void 0===n){const s=(this.lastWorkerAssignment+1)%t.length;this.workerAssignments.set(e,s),this.lastWorkerAssignment=s,n=s}return t[n].getWorker()}async call(e,t,n,s,o={}){if(!t)throw new TypeError("sessionId is required");const r=await this.getWorker(t),i=e.evaluateExtensionPoint("Core-extendWorker",r),a=e.getRpcMethodType(n);if(!a)throw new Error(`unknown RPC method ${n}`);const c=await a.serializeArguments(s,this.name),l=this.filterArgs(c,t),u=await i.call(n,l,{timeout:3e5,statusCallback:s.statusCallback,rpcDriverClassName:this.name,...o});return a.deserializeReturn(u,s,this.name)}}class ve{destroy(){}async call(e,t,n={}){}}class Se extends we{name="MainThreadRpcDriver";constructor(e){super(e),this.makeWorker=async()=>new ve}async call(e,t,n,s){if(!t)throw new TypeError("sessionId is required");const o=e.getRpcMethodType(n);if(!o)throw new Error(`unknown RPC method ${n}`);const r=await o.serializeArguments(s,this.name),i=await o.execute(r,this.name);return o.deserializeReturn(i,s,this.name)}}var Ce=n(76519),Ae=n(39154),ke=n(32761);class xe extends Ce.A.Client{destroy(){this.workers[0].terminate()}async call(e,t,n){const{statusCallback:s,rpcDriverClassName:o}=n,r=`message-${(0,ke.Ak)()}`,i=e=>{s?.(e)};this.on(r,i);const a=await super.call(e,{...t,channel:r,rpcDriverClassName:o},n);return this.off(r,i),a}}class Me extends we{name="WebWorkerRpcDriver";constructor(e,t){super(e),this.workerBootConfiguration=t,this.makeWorkerInstance=e.makeWorkerInstance}async makeWorker(){const e=this.makeWorkerInstance(),t=new xe({workers:[e]});return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&console.log("console logging the webworker handle avoids the track going into an infinite loading state, this is a hacky workaround for safari",e),new Promise((e,n)=>{const s=o=>{switch(o.data.message){case"ready":e(t),t.workers[0].removeEventListener("message",s);break;case"readyForConfig":t.workers[0].postMessage({message:"config",config:this.workerBootConfiguration});break;case"error":n((0,Ae.deserializeError)(o.data.error))}};t.workers[0].addEventListener("message",s)})}}const Te=(0,v.ConfigurationSchema)("BaseRpcDriver",{workerCount:{type:"number",description:"The number of workers to use. If 0 (the default) JBrowse will decide how many workers to use.",defaultValue:0}},{explicitlyTyped:!0}),je=(0,v.ConfigurationSchema)("MainThreadRpcDriver",{},{baseConfiguration:Te,explicitlyTyped:!0}),Pe=(0,v.ConfigurationSchema)("WebWorkerRpcDriver",{},{baseConfiguration:Te,explicitlyTyped:!0}),Ee=(0,v.ConfigurationSchema)("RpcOptions",{defaultDriver:{type:"string",description:"the RPC driver to use for tracks and tasks that are not configured to use a specific RPC backend",defaultValue:"MainThreadRpcDriver"},drivers:fe.types.optional(fe.types.map(fe.types.union(je,Pe)),{MainThreadRpcDriver:{type:"MainThreadRpcDriver"},WebWorkerRpcDriver:{type:"WebWorkerRpcDriver"}})},{actions:e=>({addDriverConfig(t,n){e.drivers.set(t,n)}})});class Ie{static configSchema=Ee;constructor(e,t,n){this.pluginManager=e,this.mainConfiguration=t,this.backendConfigurations=n,this.driverObjects=new Map}getDriver(e){const t=this.driverObjects.get(e);if(t)return t;const n=this.mainConfiguration.drivers.get("WebWorkerRpcDriver");if("MainThreadRpcDriver"===e){const t=this.backendConfigurations.MainThreadRpcDriver;if(!t)throw new Error(`requested RPC driver "${e}" is missing config`);const s=new Se({...t,config:n});return this.driverObjects.set(e,s),s}if("WebWorkerRpcDriver"===e){const t=this.backendConfigurations.WebWorkerRpcDriver;if(!t)throw new Error(`requested RPC driver "${e}" is missing config`);const s=new Me({...t,config:n},{plugins:this.pluginManager.runtimePluginDefinitions,windowHref:window.location.href});return this.driverObjects.set(e,s),s}throw new Error(`requested RPC driver "${e}" is not installed`)}async getDriverForCall(e,t,n){const s=n.rpcDriverName||(0,v.readConfObject)(this.mainConfiguration,"defaultDriver");return this.getDriver(s)}async call(e,t,n,s={}){if(!e)throw new Error("sessionId is required");return(await this.getDriverForCall(e,t,n)).call(this.pluginManager,e,t,n,s)}}function Ne({pluginManager:e}){return(0,v.ConfigurationSchema)("Root",{rpc:Ie.configSchema,highResolutionScaling:{type:"number",defaultValue:2},formatDetails:(0,v.ConfigurationSchema)("FormatDetails",{feature:{type:"frozen",description:"adds extra fields to the feature details",defaultValue:{},contextVariable:["feature"]},subfeatures:{type:"frozen",description:"adds extra fields to the subfeatures of a feature",defaultValue:{},contextVariable:["feature"]},depth:{type:"number",defaultValue:2,description:"depth to iterate the formatDetails->subfeatures callback on subfeatures (used for example to only apply the callback to the first layer of subfeatures)"},maxDepth:{type:"number",defaultValue:1e4,description:"hide subfeatures greater than a certain depth"}}),formatAbout:(0,v.ConfigurationSchema)("FormatAbout",{config:{type:"frozen",description:"formats configuration object in about dialog",defaultValue:{},contextVariable:["config"]},hideUris:{type:"boolean",defaultValue:!1}}),shareURL:{type:"string",defaultValue:"https://share.jbrowse.org/api/v1/"},disableAnalytics:{type:"boolean",defaultValue:!1},hierarchical:(0,v.ConfigurationSchema)("hierarchical",{sort:(0,v.ConfigurationSchema)("hierarchicalSort",{trackNames:{type:"boolean",defaultValue:!1},categories:{type:"boolean",defaultValue:!1}}),defaultCollapsed:(0,v.ConfigurationSchema)("defaultCollapsed",{categoryNames:{type:"stringArray",defaultValue:[]},topLevelCategories:{type:"boolean",defaultValue:!1},subCategories:{type:"boolean",defaultValue:!1}})}),theme:{type:"frozen",defaultValue:{}},extraThemes:{type:"frozen",defaultValue:{}},logoPath:{type:"fileLocation",defaultValue:{uri:"",locationType:"UriLocation"}},...e.pluginConfigurationNamespacedSchemas(),...e.pluginConfigurationUnnamespacedSchemas()})}function Re({menus:e,menuName:t}){return e.push({label:t,menuItems:[]})}function Le({menus:e,menuName:t,position:n}){return e.splice((n<0?e.length:0)+n,0,{label:t,menuItems:[]}),e.length}function De({menus:e,menuName:t,menuItem:n}){const s=e.find(e=>e.label===t);return s?s.menuItems.push(n):(e.push({label:t,menuItems:[n]}),1)}function $e({menus:e,menuName:t,menuItem:n,position:s}){const o=e.find(e=>e.label===t);if(!o)return e.push({label:t,menuItems:[n]}),1;const r=s<0?o.menuItems.length+s:s;return o.menuItems.splice(r,0,n),o.menuItems.length}function Oe({menus:e,menuPath:t,menuItem:n}){let s=e.find(e=>e.label===t[0]);s||(s=e[Re({menus:e,menuName:t[0]})-1]);let{menuItems:o}=s;const r=[t[0]];for(const e of t.slice(1)){r.push(e);let t=o.find(t=>"label"in t&&t.label===e);if(!t){const n=o.push({label:e,subMenu:[]});t=o[n-1]}if(!("subMenu"in t))throw new Error(`"${e}" in path "${r}" is not a subMenu`);o=t.subMenu}return o.push(n)}function ze({menus:e,menuPath:t,menuItem:n,position:s}){let o=e.find(e=>e.label===t[0]);o||(o=e[Re({menus:e,menuName:t[0]})-1]);let{menuItems:r}=o;const i=[t[0]];for(const e of t.slice(1)){i.push(e);let t=r.find(t=>"label"in t&&t.label===e);if(!t){const n=r.push({label:e,subMenu:[]});t=r[n-1]}if(!("subMenu"in t))throw new Error(`"${e}" in path "${i}" is not a subMenu`);r=t.subMenu}return r.splice(s,0,n),r.length}var Ue=n(91063),We=n(61762),Be=n(45443);const _e=(0,f.n9)()(e=>({shareDiv:{textAlign:"center",paddingLeft:"2px"},shareButton:{backgroundColor:(0,k.X4)(e.palette.primary.contrastText,e.palette.action.hoverOpacity),"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}})),Fe=(0,o.lazy)(()=>n.e(6095).then(n.bind(n,86095))),Ve=(0,a.observer)(function(e){const[t,n]=(0,o.useState)(!1),{session:s}=e,{classes:r}=_e();return(0,u.jsxs)("div",{className:r.shareDiv,children:[(0,u.jsx)(x.A,{size:"small",color:"inherit",startIcon:(0,u.jsx)(Be.A,{}),classes:{root:r.shareButton},onClick:async()=>{n(!0)},children:"Share"}),t?(0,u.jsx)(o.Suspense,{fallback:null,children:(0,u.jsx)(Fe,{session:s,handleClose:()=>{n(!1)}})}):null]})}),He=(0,a.observer)(function({pluginManager:e}){const[t]=(0,c.useQueryParam)("adminKey",c.StringParam),[n]=(0,c.useQueryParam)("adminServer",c.StringParam),[s]=(0,c.useQueryParam)("config",c.StringParam),[,r]=(0,c.useQueryParam)("session",c.StringParam),{rootModel:i}=e,{error:a,jbrowse:l,session:d}=i,m=d,{id:p,theme:f}=m;if((0,o.useEffect)(()=>{r(`local-${p}`,"replaceIn"),window.JBrowseRootModel=i,window.JBrowseSession=m},[p,i,m,r]),(0,o.useEffect)(()=>t?(0,fe.onSnapshot)(l,async e=>{try{const o=await fetch(n||"/updateConfig",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminKey:t,configPath:s,config:e})});if(!o.ok){const e=await o.text();throw new Error(`HTTP ${o.status} (${e})`)}}catch(e){m.notify(`Admin server error: ${e}`)}}):void 0,[l,m,t,n,s]),a)throw a;return(0,u.jsxs)(Ue.A,{theme:f,children:[(0,u.jsx)(We.Ay,{}),(0,u.jsx)(pe,{session:m,HeaderButtons:(0,u.jsx)(Ve,{session:m})})]})});var Ge=n(25122),qe=n(59773),Je=n(99834),Qe=n(17765),Ke=n(49409);const Ye=fe.types.model({configPath:fe.types.maybe(fe.types.string),sessionQuery:fe.types.maybe(fe.types.string),password:fe.types.maybe(fe.types.string),adminKey:fe.types.maybe(fe.types.string),loc:fe.types.maybe(fe.types.string),sessionTracks:fe.types.maybe(fe.types.string),assembly:fe.types.maybe(fe.types.string),tracks:fe.types.maybe(fe.types.string),tracklist:fe.types.maybe(fe.types.boolean),highlight:fe.types.maybe(fe.types.string),nav:fe.types.maybe(fe.types.boolean),initialTimestamp:fe.types.number,hubURL:fe.types.maybe(fe.types.array(fe.types.string)),configSnapshot:fe.types.frozen(void 0),sessionSnapshot:fe.types.frozen(void 0)}).volatile(()=>({sessionTriaged:void 0,sessionSpec:void 0,hubSpec:void 0,blankSession:!1,runtimePlugins:void 0,sessionPlugins:void 0,sessionError:void 0,configError:void 0,bc1:window.BroadcastChannel?new window.BroadcastChannel("jb_request_session"):void 0,bc2:window.BroadcastChannel?new window.BroadcastChannel("jb_respond_session"):void 0})).views(e=>({get isSharedSession(){return!!e.sessionQuery?.startsWith("share-")},get isSpecSession(){return!!e.sessionQuery?.startsWith("spec-")},get isHubSession(){return!!e.hubURL},get isJb1StyleSession(){return!!e.loc},get isEncodedSession(){return!!e.sessionQuery?.startsWith("encoded-")},get isJsonSession(){return!!e.sessionQuery?.startsWith("json-")},get isLocalSession(){return!!e.sessionQuery?.startsWith("local-")},get ready(){return Boolean(this.isSessionLoaded&&!e.configError&&this.pluginsLoaded)},get error(){return e.configError||e.sessionError},get pluginsLoaded(){return e.sessionError||e.blankSession||e.sessionSpec?Boolean(e.runtimePlugins):Boolean(e.runtimePlugins&&e.sessionPlugins)},get isSessionLoaded(){return Boolean(e.sessionError||e.sessionSnapshot||e.blankSession||e.sessionSpec)},get isConfigLoaded(){return Boolean(e.configError||e.configSnapshot)},get sessionTracksParsed(){return e.sessionTracks?JSON.parse(e.sessionTracks):[]}})).actions(e=>({setSessionQuery(t){e.sessionQuery=t},setConfigError(t){e.configError=t},setSessionError(t){e.sessionError=t},setRuntimePlugins(t){e.runtimePlugins=t},setSessionPlugins(t){e.sessionPlugins=t},setConfigSnapshot(t){e.configSnapshot=t},setBlankSession(t){e.blankSession=t},setSessionTriaged(t){e.sessionTriaged=t},setSessionSnapshot(t){e.sessionSnapshot=t}})).actions(e=>({async fetchPlugins(t){try{const n=new qe.Ay(t.plugins,{fetchESM:e=>import(e)});n.installGlobalReExports(window);const s=await n.load(window.location.href);e.setRuntimePlugins([...s])}catch(t){console.error(t),e.setConfigError(t)}},async fetchSessionPlugins(t){try{const n=new qe.Ay(t.sessionPlugins||[],{fetchESM:e=>import(e)}).installGlobalReExports(window),s=await n.load(window.location.href);e.setSessionPlugins([...s])}catch(t){console.error(t),e.setConfigError(t)}},async loadSession(t,n){try{const{sessionPlugins:s=[]}=t;await(0,Ke.pS)(s)||n?(await this.fetchSessionPlugins(t),e.setSessionSnapshot(t)):e.setSessionTriaged({snap:t,origin:"session",reason:s})}catch(t){console.error(t),e.setConfigError(t)}},async fetchConfig(){const t=window.__jbrowseConfigPath,{configPath:n=t||"config.json"}=e;if("none"!==n){const t=await(0,Je.openLocation)({uri:n+(window.__jbrowseCacheBuster?`?rand=${Math.random()}`:""),locationType:"UriLocation"}).readFile("utf8"),s=JSON.parse(t),o=new URL(n,window.location.href);if((0,Ke.XE)(s,o),o.hostname!==window.location.hostname){const t=s.plugins||[];if(!await(0,Ke.pS)(t))return void e.setSessionTriaged({snap:s,origin:"config",reason:t})}await this.fetchPlugins(s),e.setConfigSnapshot(s)}else e.setConfigSnapshot({})},async setUpConfig(){const t=window.__jbrowseConfigPath,{configPath:n=t||"config.json"}=e,s=new URL(n,window.location.href),{configSnapshot:o}=e,r=JSON.parse(JSON.stringify(o));(0,Ke.XE)(r,s),e.setConfigSnapshot(r),await this.fetchPlugins(r)},async fetchSessionStorageSession(){const t=sessionStorage.getItem("current"),n=e.sessionQuery.replace("local-","");if(t){const e=JSON.parse(t).session||{};if(n===e.id)return this.loadSession(e)}if(e.bc1){e.bc1.postMessage(n);try{const t=await new Promise((t,n)=>{e.bc2&&(e.bc2.onmessage=e=>{t(e.data)}),setTimeout(()=>{n(new Error("timeout"))},1e3)});await this.loadSession({...t,id:(0,ke.Ak)()})}catch(e){}}throw new Error("Local storage session not found")},async checkExistingSession(t){e.sessionPlugins||await this.loadSession(t)},async fetchSharedSession(){const t=await(0,Qe.Z)(`${(0,Ke.Vr)(e.configSnapshot,"shareURL","https://share.jbrowse.org/api/v1/")}load`,e.sessionQuery||"",e.password||""),n=JSON.parse(await(0,Ke.LP)(t));await this.loadSession({...n,id:(0,ke.Ak)()})},async decodeEncodedUrlSession(){const t=JSON.parse(await(0,Ke.LP)(e.sessionQuery.replace("encoded-","")));await this.loadSession({...t,id:(0,ke.Ak)()})},decodeSessionSpec(){e.sessionQuery&&(e.sessionSpec=JSON.parse(e.sessionQuery.replace("spec-","")))},decodeJb1StyleSession(){const{loc:t,tracks:n,assembly:s,tracklist:o,nav:r,highlight:i,sessionTracksParsed:a}=e;t&&(e.sessionSpec={sessionTracks:a,views:[{type:"LinearGenomeView",tracks:n?.split(","),sessionTracks:a,loc:t,assembly:s,tracklist:o,nav:r,highlight:i?.split(" ")}]})},decodeHubSpec(){const{hubURL:t,sessionTracksParsed:n}=e;e.hubSpec={sessionTracks:n,hubURL:t}},async decodeJsonUrlSession(){const{session:t}=JSON.parse(e.sessionQuery.replace(/^json-/,""));await this.loadSession({...t,id:(0,ke.Ak)()})},afterCreate(){(async()=>{try{await(e.configSnapshot?this.setUpConfig():this.fetchConfig()),(0,fe.addDisposer)(e,(0,ge.autorun)(async()=>{try{const{isLocalSession:t,isEncodedSession:n,isSpecSession:s,isSharedSession:o,isJsonSession:r,isJb1StyleSession:i,isHubSession:a,sessionQuery:c,sessionSnapshot:l,configSnapshot:u}=e;if(!u)return;if(e.bc1&&(e.bc1.onmessage=t=>{const n=JSON.parse(sessionStorage.getItem("current")||"{}").session||{};n.id===t.data&&e.bc2&&e.bc2.postMessage(n)}),l)await this.checkExistingSession(l);else if(o)await this.fetchSharedSession();else if(s)this.decodeSessionSpec();else if(i)this.decodeJb1StyleSession();else if(n)await this.decodeEncodedUrlSession();else if(r)await this.decodeJsonUrlSession();else if(t)await this.fetchSessionStorageSession();else if(a)this.decodeHubSpec(),e.setBlankSession(!0);else{if(c)throw new Error("unrecognized session format");e.setBlankSession(!0)}}catch(t){console.error(t),e.setSessionError(t)}}))}catch(t){console.error(t),e.setConfigError(t)}})()}}));var Ze=n(43350);var Xe=n(37493),et=n(83059);var tt=n(90542),nt=n(16574),st=n(47109),ot=n(80703),rt=n(43334);const it=new RegExp("[0-9A-Za-z!#$%&+./:;?@^_|~-][0-9A-Za-z!#$%&*+./:;=?@^_|~-]*"),at=["rgb(153, 102, 0)","rgb(102, 102, 0)","rgb(153, 153, 30)","rgb(204, 0, 0)","rgb(255, 0, 0)","rgb(255, 0, 204)","rgb(165, 132, 132)","rgb(204, 122, 0)","rgb(178, 142, 0)","rgb(153, 153, 0)","rgb(122, 153, 0)","rgb(0, 165, 0)","rgb(53, 128, 0)","rgb(0, 0, 204)","rgb(96, 145, 242)","rgb(107, 142, 178)","rgb(0, 165, 165)","rgb(122, 153, 153)","rgb(153, 0, 204)","rgb(204, 51, 255)","rgb(173, 130, 216)","rgb(102, 102, 102)","rgb(145, 145, 145)","rgb(142, 142, 142)","rgb(142, 142, 107)","rgb(96, 163, 48)"];function ct(e){if(!it.test(e))throw new Error(`Encountered invalid refName: "${e}"`)}function lt(e,t){const n=new st.A({cache:new rt.A({maxSize:1e3}),async fill(e,t,n){const{adapterConf:s,self:o,options:r}=e;return async function(e,t,n){const{sessionId:s}=n;await(0,L.when)(()=>!(!e.regions||!e.refNameAliases),{name:"when assembly ready"});const o=await e.rpcManager.call(s||"assemblyRpc","CoreGetRefNames",{adapterConfig:t,stopToken:void 0,...n},{timeout:1e6}),{refNameAliases:r}=e;if(!r)throw new Error(`error loading assembly ${e.name}'s refNameAliases`);const i=Object.fromEntries(o.map(t=>(ct(t),[e.getCanonicalRefName(t),t])));return{forwardMap:i,reverseMap:Object.fromEntries(Object.entries(i).map(([e,t])=>[t,e]))}}(o,s,{...r,statusCallback:n})}});return fe.types.model({configuration:fe.types.safeReference(e)}).volatile(()=>({error:void 0,loadingP:void 0,volatileRegions:void 0,refNameAliases:void 0,cytobands:void 0})).views(e=>({getConf:t=>e.configuration?(0,v.getConf)(e,t):void 0,get lowerCaseRefNameAliases(){return e.refNameAliases?Object.fromEntries(Object.entries(e.refNameAliases).map(([e,t])=>[e.toLowerCase(),t])):void 0}})).views(e=>({get initialized(){return e.load(),!!e.refNameAliases},get name(){return e.getConf("name")||""},get regions(){return e.load(),e.volatileRegions},get aliases(){return e.getConf("aliases")||[]},get displayName(){return e.getConf("displayName")||e.getConf("name")||""},hasName(e){return this.allAliases.includes(e)},get allAliases(){return[this.name,...this.aliases]},get allRefNames(){return e.refNameAliases?Object.keys(e.refNameAliases):void 0},get lowerCaseRefNames(){return e.lowerCaseRefNameAliases?Object.keys(e.lowerCaseRefNameAliases):void 0},get allRefNamesWithLowerCase(){return this.allRefNames&&this.lowerCaseRefNames?[...new Set([...this.allRefNames,...this.lowerCaseRefNames])]:void 0},get rpcManager(){return(0,fe.getParent)(e,2).rpcManager},get refNameColors(){const t=e.getConf("refNameColors")||[];return 0===t.length?at:t}})).views(e=>({get refNames(){return e.regions?.map(e=>e.refName)}})).views(e=>({getCanonicalRefName(t){if(!e.refNameAliases||!e.lowerCaseRefNameAliases)throw new Error("aliases not loaded, we expect them to be loaded before getCanonicalRefName can be called");return e.refNameAliases[t]||e.lowerCaseRefNameAliases[t]},getRefNameColor(t){if(!e.refNames)return;const n=e.refNames.indexOf(t);return-1===n?void 0:e.refNameColors[n%e.refNameColors.length]},isValidRefName(t){if(!e.refNameAliases)throw new Error("isValidRefName cannot be called yet, the assembly has not finished loading");return!!this.getCanonicalRefName(t)}})).actions(e=>({setLoaded({regions:e,refNameAliases:t,cytobands:n}){this.setRegions(e),this.setRefNameAliases(t),this.setCytobands(n)},setError(t){e.error=t},setRegions(t){e.volatileRegions=t},setRefNameAliases(t){e.refNameAliases=t},setCytobands(t){e.cytobands=t},setLoadingP(t){e.loadingP=t},load(){return e.loadingP||(e.loadingP=this.loadPre().catch(e=>{this.setLoadingP(void 0),this.setError(e)})),e.loadingP},async loadPre(){const n=e.configuration,s=n?.refNameAliases?.adapter,o=n?.cytobands?.adapter,r=n?.sequence.adapter,i=e.name,a=await async function({config:e,pluginManager:t,stopToken:n}){const s=t.getAdapterType(e.type);return new(await s.getAdapterClass())(e,void 0,t).getRegions({stopToken:n})}({config:r,pluginManager:t});for(const e of a)ct(e.refName);const c={},l=await async function({config:e,pluginManager:t,stopToken:n}){const s=t.getAdapterType(e.type);return new(await s.getAdapterClass())(e,void 0,t).getRefNameAliases({stopToken:n})}({config:s,pluginManager:t});for(const{refName:e,aliases:t,override:n}of l){for(const n of t)ct(n),c[n]=e;n&&(c[e]=e)}for(const e of a)c[e.refName]||=e.refName;this.setLoaded({refNameAliases:c,regions:a.map(e=>({...e,refName:c[e.refName]||e.refName,assemblyName:i})),cytobands:await ut({config:o,pluginManager:t})})}})).views(e=>({getAdapterMapEntry(t,s){const{stopToken:o,statusCallback:r,...i}=s;if(!s.sessionId)throw new Error("sessionId is required");return n.get((0,ot.L)(t),{adapterConf:t,self:e,options:i},void 0,r)},async getRefNameMapForAdapter(e,t){if(!t.sessionId)throw new Error("sessionId is required");return(await this.getAdapterMapEntry(e,t)).forwardMap},async getReverseRefNameMapForAdapter(e,t){return(await this.getAdapterMapEntry(e,t)).reverseMap},afterCreate(){(0,fe.addDisposer)(e,(0,ge.autorun)(()=>{e.allRefNamesWithLowerCase}))}}))}async function ut({config:e,pluginManager:t}){const n=t.getAdapterType(e.type);return new(await n.getAdapterClass())(e,void 0,t).getData()}var dt=n(97657),mt=n(84169),pt=n(41718),ft=n(59985),ht=n(2323),gt=n(13150),yt=n(72851),bt=n(7462),wt=n(21549),vt=n(44776),St=n(55078),Ct=n(45465),At=n(9452);function kt(){return new Worker(new URL(n.p+n.u(880),n.b))}window.getSnapshot=fe.getSnapshot,window.resolveIdentifier=fe.resolveIdentifier;const xt=(0,o.lazy)(()=>n.e(9675).then(n.bind(n,79675))),Mt=(0,o.lazy)(()=>n.e(2928).then(n.bind(n,62928)));function Tt({pluginManager:e,sessionModelFactory:t,adminMode:n=!1}){const s=function(e){return(0,v.ConfigurationSchema)("BaseAssembly",{aliases:{type:"stringArray",defaultValue:[],description:"Other possible names for the assembly"},sequence:e.getTrackType("ReferenceSequenceTrack").configSchema,refNameColors:{type:"stringArray",defaultValue:[],description:"Define custom colors for each reference sequence. Will cycle through this list if there are not enough colors for every sequence."},refNameAliases:(0,v.ConfigurationSchema)("RefNameAliases",{adapter:e.pluggableConfigSchemaType("adapter")},{preProcessSnapshot:e=>e.adapter?e:{adapter:{type:"RefNameAliasAdapter"}}}),cytobands:(0,v.ConfigurationSchema)("Cytoband",{adapter:e.pluggableConfigSchemaType("adapter")},{preProcessSnapshot:e=>e.adapter?e:{adapter:{type:"CytobandAdapter"}}}),displayName:{type:"string",defaultValue:"",description:'A human readable display name for the assembly e.g. "Homo sapiens (hg38)" while the assembly name may just be "hg38"'}},{explicitIdentifier:"name"})}(e),o=function({pluginManager:e,assemblyConfigSchema:t}){return fe.types.snapshotProcessor(function({pluginManager:e,assemblyConfigSchema:t}){return function({pluginManager:e,assemblyConfigSchema:t}){return fe.types.model("JBrowseConfig",{configuration:Ne({pluginManager:e}),plugins:fe.types.array(fe.types.frozen()),assemblies:fe.types.array(t),tracks:fe.types.array(e.pluggableConfigSchemaType("track")),internetAccounts:fe.types.array(e.pluggableConfigSchemaType("internet account")),aggregateTextSearchAdapters:fe.types.array(e.pluggableConfigSchemaType("text search adapter")),connections:fe.types.array(e.pluggableConfigSchemaType("connection")),defaultSession:fe.types.optional(fe.types.frozen(),{name:"New Session"}),preConfiguredSessions:fe.types.array(fe.types.frozen()),...e.pluginConfigurationRootSchemas()})}({pluginManager:e,assemblyConfigSchema:t}).views(e=>({get assemblyNames(){return e.assemblies.map(e=>(0,v.readConfObject)(e,"name"))},get rpcManager(){return(0,fe.getParent)(e).rpcManager}})).actions(e=>({addAssemblyConf(t){const{name:n}=t;if(!n)throw new Error('Can\'t add assembly with no "name"');if(e.assemblyNames.includes(n))throw new Error(`Can't add assembly with name "${n}", an assembly with that name already exists`);const s=e.assemblies.push({...t,sequence:{type:"ReferenceSequenceTrack",trackId:`${n}-${Date.now()}`,...t.sequence}});return e.assemblies[s-1]},removeAssemblyConf(t){const n=e.assemblies.find(e=>e.name===t);n&&e.assemblies.remove(n)},addTrackConf(t){const{type:n}=t;if(!n)throw new Error(`unknown track type ${n}`);const s=e.tracks.push(t);return e.tracks[s-1]},addConnectionConf(t){const{type:n}=t;if(!n)throw new Error(`unknown connection type ${n}`);const s=e.connections.push(t);return e.connections[s-1]},deleteConnectionConf(t){const n=e.connections.find(e=>e.id===t.id);return e.connections.remove(n)},deleteTrackConf(t){const n=e.tracks.find(e=>e.trackId===t.trackId);return e.tracks.remove(n)},addPlugin(t){e.plugins.push(t),(0,fe.getParent)(e).setPluginsUpdated(!0)},removePlugin(t){e.plugins=(0,fe.cast)(e.plugins.filter(e=>e.url!==t.url||e.umdUrl!==t.umdUrl||e.cjsUrl!==t.cjsUrl||e.esmUrl!==t.esmUrl)),(0,fe.getParent)(e).setPluginsUpdated(!0)},setDefaultSessionConf(t){const n=(0,fe.getParent)(e).session.name===t.name?(0,fe.getSnapshot)(t):(0,ge.toJS)(t);if(!n.name)throw new Error(`unable to set default session to ${n.name}`);e.defaultSession=(0,fe.cast)(n)},addInternetAccountConf(t){const{type:n}=t;if(!n)throw new Error(`unknown internetAccount type ${n}`);const s=e.internetAccounts.push(t);return e.internetAccounts[s-1]},deleteInternetAccountConf(t){const n=e.internetAccounts.find(e=>e.id===t.id);return e.internetAccounts.remove(n)}}))}({pluginManager:e,assemblyConfigSchema:t}),{postProcessor:e=>(0,Ke.K$)(structuredClone(e),"baseUri")})}({pluginManager:e,assemblyConfigSchema:s}),r=t({pluginManager:e,assemblyConfigSchema:s});return fe.types.compose(function({pluginManager:e,jbrowseModelType:t,sessionModelType:n,assemblyConfigSchema:s}){return fe.types.model("BaseRootModel",{jbrowse:t,session:fe.types.maybe(n),sessionPath:fe.types.optional(fe.types.string,""),assemblyManager:fe.types.optional((o=s,r=e,fe.types.model({assemblies:fe.types.array(lt(o,r))}).views(e=>({get assemblyNameMap(){const t={};for(const n of e.assemblies)for(const e of n.allAliases)t[e]=n;return t}})).views(e=>({getCanonicalAssemblyName:t=>e.assemblyNameMap[t]?.name,get(t){if(t){const n=e.assemblyNameMap[t];if(n)return n;this.assemblyNamesList.includes(t)||r.evaluateExtensionPoint("Core-handleUnrecognizedAssembly",void 0,{assemblyName:t,session:(0,fe.getParent)(e).session})}},get assemblyNamesList(){return this.assemblyList.map(e=>e.name)},get assemblyList(){const{jbrowse:{assemblies:t},session:{sessionAssemblies:n=[],temporaryAssemblies:s=[]}={}}=(0,fe.getParent)(e);return[...t,...n,...s]},get rpcManager(){return(0,fe.getParent)(e).rpcManager}})).views(e=>({async waitForAssembly(t){if(!t)throw new Error("no assembly name supplied to waitForAssembly");let n=e.get(t);if(!n)try{await(0,L.when)(()=>Boolean(e.get(t)),{timeout:1e4}),n=e.get(t)}catch(e){}if(n){if(await n.load(),await(0,L.when)(()=>!(!n.regions||!n.refNameAliases)||!!n.error),n.error)throw n.error;return n}},async getRefNameMapForAdapter(e,t,n){if(t){const s=await this.waitForAssembly(t);return s?.getRefNameMapForAdapter(e,n)}return{}},async getReverseRefNameMapForAdapter(e,t,n){if(t){const s=await this.waitForAssembly(t);return s?.getReverseRefNameMapForAdapter(e,n)}return{}},isValidRefName(t,n){const s=e.get(n);if(s)return s.isValidRefName(t);throw new Error(`Failed to look up refName:${t} on assemblyName:${n} (assembly does not exist)`)}})).actions(e=>({afterAttach(){(0,fe.addDisposer)(e,(0,ge.reaction)(()=>e.assemblyList,t=>{for(const t of e.assemblies)t.configuration||this.removeAssembly(t);for(const n of t){const t=(0,v.readConfObject)(n,"name");e.assemblies.some(e=>e.name===t)||this.addAssembly(n)}},{fireImmediately:!0,name:"assemblyManagerAfterAttach"}))},removeAssembly(t){e.assemblies.remove(t)},addAssembly(t){e.assemblies.push({configuration:t})}}))),{})}).volatile(t=>({rpcManager:new Ie(e,t.jbrowse.configuration.rpc,{MainThreadRpcDriver:{}}),adminMode:!1,error:void 0,textSearchManager:new et.A(e),pluginManager:e})).actions(e=>({setError(t){e.error=t},setSession(t){e.session=(0,fe.cast)(t)},setDefaultSession(){this.setSession(e.jbrowse.defaultSession)},setSessionPath(t){e.sessionPath=t},renameCurrentSession(t){e.session&&this.setSession({...(0,fe.getSnapshot)(e.session),name:t})}}));var o,r}({pluginManager:e,jbrowseModelType:o,sessionModelType:r,assemblyConfigSchema:s}),function(e){return fe.types.model({internetAccounts:fe.types.array(e.pluggableMstType("internet account","stateModel"))}).actions(t=>({initializeInternetAccount(n,s={}){if(!e.getInternetAccountType(n.type))throw new Error(`unknown internet account type ${n.type}`);const o=t.internetAccounts.push({...s,type:n.type,configuration:n});return t.internetAccounts[o-1]},createEphemeralInternetAccount(n,s,o){let r;try{r=new URL(o).origin}catch(e){}const i=n.split("-"),a={type:i[0],internetAccountId:n,name:i.slice(1).join("-"),description:"",domains:r?[r]:[]},c=e.getInternetAccountType(a.type).stateModel.create({...s,type:a.type,configuration:a});return t.internetAccounts.push(c),c},findAppropriateInternetAccount(e){const n=e.internetAccountId;if(n){const e=t.internetAccounts.find(e=>e.internetAccountId===n);if(e)return e}for(const n of t.internetAccounts)if(n.handlesLocation(e))return n;return n?this.createEphemeralInternetAccount(n,{},e.uri):null}})).actions(e=>({afterCreate(){(0,fe.addDisposer)(e,(0,ge.autorun)(()=>{const{jbrowse:t}=e;for(const n of t.internetAccounts)e.initializeInternetAccount(n)}))}}))}(e),fe.types.model({history:fe.types.optional(he,{targetPath:"../session"})}).actions(e=>({afterCreate(){document.addEventListener("keydown",t=>{e.history.canRedo&&((t.ctrlKey||t.metaKey)&&t.shiftKey&&"KeyZ"===t.code||t.ctrlKey&&!t.shiftKey&&"KeyY"===t.code)&&"INPUT"!==document.activeElement?.tagName.toUpperCase()&&e.history.redo(),e.history.canUndo&&(t.ctrlKey||t.metaKey)&&!t.shiftKey&&"KeyZ"===t.code&&"INPUT"!==document.activeElement?.tagName.toUpperCase()&&e.history.undo()}),(0,fe.addDisposer)(e,(0,ge.autorun)(()=>{const{session:t}=e;t&&e.history.initialize()}))}})),fe.types.model({}).volatile(()=>({mutableMenuActions:[]})).actions(e=>({setMenus(t){e.mutableMenuActions=[...e.mutableMenuActions,{type:"setMenus",newMenus:t}]},appendMenu(t){e.mutableMenuActions=[...e.mutableMenuActions,{type:"appendMenu",menuName:t}]},insertMenu(t,n){e.mutableMenuActions=[...e.mutableMenuActions,{type:"insertMenu",menuName:t,position:n}]},appendToMenu(t,n){e.mutableMenuActions=[...e.mutableMenuActions,{type:"appendToMenu",menuName:t,menuItem:n}]},insertInMenu(t,n,s){e.mutableMenuActions.push({type:"insertInMenu",menuName:t,menuItem:n,position:s})},appendToSubMenu(t,n){e.mutableMenuActions=[...e.mutableMenuActions,{type:"appendToSubMenu",menuPath:t,menuItem:n}]},insertInSubMenu(t,n,s){e.mutableMenuActions=[...e.mutableMenuActions,{type:"insertInSubMenu",menuPath:t,menuItem:n,position:s}]}}))).props({configPath:fe.types.maybe(fe.types.string)}).volatile(t=>({adminMode:n,sessionDB:void 0,version:"3.6.4",pluginsUpdated:!1,rpcManager:new Ie(e,t.jbrowse.configuration.rpc,{WebWorkerRpcDriver:{makeWorkerInstance:kt},MainThreadRpcDriver:{}}),savedSessionMetadata:void 0,textSearchManager:new et.A(e),error:void 0,reloadPluginManagerCallback:(e,t)=>{console.error("reloadPluginManagerCallback unimplemented")}})).actions(e=>({setSavedSessionMetadata(t){e.savedSessionMetadata=t},async fetchSessionMetadata(){if(e.sessionDB){const t=await e.sessionDB.getAll("metadata");this.setSavedSessionMetadata(t.filter(t=>t.configPath===(e.configPath||"")).sort((e,t)=>+t.createdAt-+e.createdAt))}},setSessionDB(t){e.sessionDB=t}})).actions(e=>({afterCreate(){(async()=>{try{const t=await(0,At.P2)("sessionsDB",2,{upgrade(e){e.createObjectStore("metadata"),e.createObjectStore("sessions")}});e.setSessionDB(t),(0,fe.addDisposer)(e,(0,ge.autorun)(async()=>{if(e.session)try{const n=e.session;if(e.sessionDB){await t.put("sessions",(0,fe.getSnapshot)(n),n.id);const s=await e.sessionDB.get("metadata",n.id);await t.put("metadata",{...s,favorite:s?.favorite||!1,name:n.name,id:n.id,createdAt:new Date,configPath:e.configPath||""},n.id)}await e.fetchSessionMetadata()}catch(t){console.error(t),e.session?.notifyError(`${t}`,t)}},{delay:400}))}catch(t){console.error(t),e.session?.notifyError(`${t}`,t)}let t=!1;(0,fe.addDisposer)(e,(0,ge.autorun)(()=>{if(e.session){const n=e.session,s=(0,fe.getSnapshot)(n);try{sessionStorage.setItem("current",JSON.stringify({session:s,createdAt:new Date})),t&&(t=!1,n.notify("Auto-saving restored","info")),e.pluginsUpdated&&e.reloadPluginManagerCallback(structuredClone((0,fe.getSnapshot)(e.jbrowse)),structuredClone(s))}catch(e){console.error(e);const s=`${e}`;t||(t=!0,s.includes("quota")?n.notifyError("Unable to auto-save session, exceeded sessionStorage quota. This may be because a very large feature was stored in session",e):n.notifyError(s,e))}}},{delay:400}))})()},setSession(t){const n=e.session;if(e.session=(0,fe.cast)(t),e.session)try{(0,Ke.pK)(e.session,(0,fe.getType)(e.session))}catch(t){throw e.session=n,t}},setPluginsUpdated(t){e.pluginsUpdated=t},setReloadPluginManagerCallback(t){e.reloadPluginManagerCallback=t},setDefaultSession(){const{defaultSession:t}=e.jbrowse;this.setSession({...t,name:`${t.name} ${(new Date).toLocaleString()}`})},async activateSession(t){const n=await(e.sessionDB?.get("sessions",t));n?this.setSession(n):e.session.notifyError("Session not found")},async favoriteSavedSession(t){if(e.sessionDB){const n=e.savedSessionMetadata.find(e=>e.id===t);n&&(await e.sessionDB.put("metadata",{...n,favorite:!0},n.id),await e.fetchSessionMetadata())}},async unfavoriteSavedSession(t){if(e.sessionDB){const n=e.savedSessionMetadata.find(e=>e.id===t);n&&await e.sessionDB.put("metadata",{...n,favorite:!1},n.id),await e.fetchSessionMetadata()}},async deleteSavedSession(t){e.sessionDB&&(await e.sessionDB.delete("metadata",t),await e.sessionDB.delete("sessions",t),await e.fetchSessionMetadata())},renameCurrentSession(t){this.setSession({...(0,fe.getSnapshot)(e.session),name:t})},setError(t){e.error=t}})).views(e=>({menus(){const t=(0,v.readConfObject)(e.jbrowse,"preConfiguredSessions");return function(e,t){for(const n of t)"setMenus"===n.type?e=n.newMenus:"appendMenu"===n.type?Re({menus:e,...n}):"insertMenu"===n.type?Le({menus:e,...n}):"insertInSubMenu"===n.type?ze({menus:e,...n}):"appendToSubMenu"===n.type?Oe({menus:e,...n}):"appendToMenu"===n.type?De({menus:e,...n}):"insertInMenu"===n.type&&$e({menus:e,...n});return e}([{label:"File",menuItems:()=>{const n=e.savedSessionMetadata?.filter(e=>e.favorite).slice(0,5),s=e.savedSessionMetadata?.filter(e=>!e.favorite).slice(0,5);return[{label:"New session",icon:z.A,onClick:()=>{e.setDefaultSession()}},{label:"Import session...",icon:ht.A,onClick:e=>{const t=e.addWidget("ImportSessionWidget","importSessionWidget");e.showWidget(t)}},{label:"Export session",icon:ft.A,onClick:e=>{(0,Ct.saveAs)(new Blob([JSON.stringify({session:(0,fe.getSnapshot)(e)},null,2)],{type:"text/plain;charset=utf-8"}),"session.json")}},{label:"Duplicate session",icon:mt.A,onClick:()=>{const{id:t,...n}=(0,fe.getSnapshot)(e.session);e.setSession(n)}},...t?.length?[{label:"Pre-configured sessions...",subMenu:t.map(t=>({label:t.name,onClick:()=>{e.setSession(t)}}))}]:[],...n?.length?[{label:"Favorite sessions...",subMenu:[...n.slice(0,5).map(t=>({label:`${t.name} (${t.id===e.session.id?"current":(0,St.m)(t.createdAt,{addSuffix:!0})})`,disabled:t.id===e.session.id,icon:bt.A,onClick:()=>{(async()=>{try{await e.activateSession(t.id)}catch(t){e.session.notifyError(`${t}`,t)}})()}})),{label:"More...",icon:pt.A,onClick:e=>{const t=e.addWidget("SessionManager","sessionManager");e.showWidget(t)}}]}]:[],{label:"Recent sessions...",type:"subMenu",subMenu:s?.length?[...s.map(t=>({label:`${t.name} (${t.id===e.session.id?"current":(0,St.m)(t.createdAt,{addSuffix:!0})})`,disabled:t.id===e.session.id,onClick:()=>{(async()=>{try{await e.activateSession(t.id)}catch(t){e.session.notifyError(`${t}`,t)}})()}})),{label:"More...",icon:pt.A,onClick:e=>{const t=e.addWidget("SessionManager","sessionManager");e.showWidget(t)}}]:[{label:"No autosaves found",onClick:()=>{}}]},{type:"divider"},{label:"Open track...",icon:wt.A,onClick:e=>{if(0===e.views.length)e.notify("Please open a view to add a track first");else if(e.views.length>0){const t=e.addWidget("AddTrackWidget","addTrackWidget",{view:e.views[0].id});e.showWidget(t),e.views.length>1&&e.notify("This will add a track to the first view. Note: if you want to open a track in a specific view open the track selector for that view and use the add track (plus icon) in the bottom right")}}},{label:"Open connection...",icon:tt.A8,onClick:e=>{e.showWidget(e.addWidget("AddConnectionWidget","addConnectionWidget"))}}]}},...n?[{label:"Admin",menuItems:[{label:"Set default session",onClick:()=>{e.session.queueDialog(t=>[xt,{rootModel:e,onClose:t}])}}]}]:[],{label:"Add",menuItems:[]},{label:"Tools",menuItems:[{label:"Undo",icon:vt.A,onClick:()=>{e.history.canUndo&&e.history.undo()}},{label:"Redo",icon:gt.A,onClick:()=>{e.history.canRedo&&e.history.redo()}},{type:"divider"},{label:"Plugin store",icon:dt.A,onClick:()=>{e.session&&e.session.showWidget(e.session.addWidget("PluginStoreWidget","pluginStoreWidget"))}},{label:"Assembly manager",icon:tt.uB,onClick:()=>{e.session.queueDialog(t=>[nt.m,{onClose:t,session:e.session,rootModel:e}])}},{label:"Preferences",icon:yt.A,onClick:()=>{e.session&&e.session.queueDialog(t=>[Mt,{session:e.session,handleClose:t}])}}]}],e.mutableMenuActions)}}))}var jt=n(65468);const Pt=(0,o.lazy)(()=>Promise.all([n.e(1631),n.e(4630)]).then(n.bind(n,74630)));function Et(e){return fe.types.model("ReferenceManagementSessionMixin",{}).views(e=>({getReferring(t){const n=[];return(0,fe.walk)((0,fe.getParent)(e),e=>{if((0,fe.isModelType)((0,fe.getType)(e))){const s=(0,fe.getMembers)(e);for(const[o,r]of Object.entries(s.properties))(0,fe.isReferenceType)(r)&&e[o]===t&&n.push({node:e,key:o})}}),n}})).actions(e=>({removeReferring(t,n,s,o){for(const{node:r}of t){let t=!1;try{const e="open track(s)",i=(0,L.getContainingView)(r);s.push(()=>{i.hideTrack(n.trackId)}),t=!0,o[e]||(o[e]=0),o[e]+=1}catch(e){}if((0,L.isSessionModelWithWidgets)(e)&&e.widgets.has(r.id)){const n="configuration editor widget(s)";(0,L.isSessionModelWithWidgets)(e)&&s.push(()=>{e.hideWidget(r)}),t=!0,o[n]||(o[n]=0),o[n]+=1}if(!t)throw new Error(`Error when closing this connection, the following node is still referring to a track configuration: ${JSON.stringify((0,fe.getSnapshot)(r))}`)}}}))}var It=n(32559),Nt=n(45858);var Rt=n(74281),Lt=n(77538),Dt=n(49204);const $t=(0,o.lazy)(()=>Promise.all([n.e(2407),n.e(4132),n.e(6386),n.e(204),n.e(5300),n.e(20)]).then(n.bind(n,70020)));function Ot({pluginManager:e,assemblyConfigSchema:t}){const n=fe.types.compose("WebCoreSessionModel",fe.types.compose("WebCoreSessionModelGroupA",Et(),(0,It.X)(e),fe.types.model("DialogQueueSessionMixin",{}).volatile(()=>({queueOfDialogs:[]})).views(e=>({get DialogComponent(){return e.queueOfDialogs[0]?.[0]},get DialogProps(){return e.queueOfDialogs[0]?.[1]}})).actions(e=>({removeActiveDialog(){e.queueOfDialogs=e.queueOfDialogs.slice(1)},queueDialog(t){const[n,s]=t(()=>{this.removeActiveDialog()});e.queueOfDialogs=[...e.queueOfDialogs,[n,s]]}})),fe.types.model({}).volatile(()=>({sessionThemeName:(0,L.localStorageGetItem)("themeName")||"default"})).views(e=>({allThemes(){const t=e,n=(0,v.getConf)(t.jbrowse,"extraThemes");return{...r.defaultThemes,...n}},get themeName(){const{sessionThemeName:t}=e;return this.allThemes()[t]?t:"default"},get theme(){const t=e,n=(0,v.getConf)(t.jbrowse,"theme"),s=this.allThemes();return(0,r.createJBrowseTheme)(n,s,this.themeName)}})).actions(e=>({setThemeName(t){e.sessionThemeName=t},afterAttach(){(0,fe.addDisposer)(e,(0,ge.autorun)(()=>{(0,L.localStorageSetItem)("themeName",e.themeName)}))}})),(0,O.S)(e)),fe.types.compose("WebCoreSessionModelGroupB",function(e){return function(e){return fe.types.compose("TracksManagerSessionMixin",(0,Nt.DH)(e),Et()).views(e=>({get tracks(){return e.jbrowse.tracks}})).actions(e=>({addTrackConf:t=>e.jbrowse.addTrackConf(t),deleteTrackConf(t){const n=[],s=e.getReferring(t);e.removeReferring(s,t,n,{});for(const e of n)e();if(e.adminMode)return e.jbrowse.deleteTrackConf(t)}}))}(e).named("SessionTracksManagerSessionMixin").props({sessionTracks:fe.types.array(e.pluggableConfigSchemaType("track"))}).views(e=>({get tracks(){return[...e.sessionTracks,...e.jbrowse.tracks]}})).actions(e=>{const{addTrackConf:t,deleteTrackConf:n}=e;return{addTrackConf(n){if(e.adminMode)return t(n);const{trackId:s,type:o}=n;if(!o)throw new Error(`unknown track type ${o}`);const r=e.sessionTracks.find(e=>e.trackId===s);if(r)return r;const i=e.sessionTracks.push(n);return e.sessionTracks[i-1]},deleteTrackConf(t){const s=n(t);if(s)return s;const{trackId:o}=t,r=e.sessionTracks.findIndex(e=>e.trackId===o);return-1!==r?e.sessionTracks.splice(r,1):void 0}}})}(e),(s=t,fe.types.model({sessionAssemblies:fe.types.array(s)}).actions(e=>{const t=e;return{addSessionAssembly(e){const n=t.sessionAssemblies.find(t=>t.name===e.name);if(n)return console.warn(`Assembly ${e.name} already exists`),n;const s=t.sessionAssemblies.push(e);return t.sessionAssemblies[s-1]},addAssembly(e){t.adminMode?t.jbrowse.addAssemblyConf(e):this.addSessionAssembly(e)},removeAssembly(e){t.adminMode?t.jbrowse.removeAssemblyConf(e):this.removeSessionAssembly(e)},removeSessionAssembly(e){const n=t.sessionAssemblies.find(t=>t.name===e);n&&t.sessionAssemblies.remove(n)}}})),function(e,t=fe.types.frozen()){return fe.types.model({temporaryAssemblies:fe.types.array(t)}).actions(e=>{const t=e;return{addTemporaryAssembly(e){const n=t.temporaryAssemblies.find(t=>t.name===e.name);if(n)return console.warn(`Assembly ${e.name} was already existing`),n;const s=t.temporaryAssemblies.push(e);return t.temporaryAssemblies[s-1]},removeTemporaryAssembly(e){const n=t.temporaryAssemblies.find(t=>t.name===e);n&&t.temporaryAssemblies.remove(n)}}})}(0,t),function(e){return fe.types.compose("SessionConnectionsManagement",(0,Dt.F)(e),fe.types.model({sessionConnections:fe.types.array(e.pluggableConfigSchemaType("connection"))})).actions(e=>{const t=e,n=t.deleteConnection,s=t.addConnectionConf;return{addConnectionConf(e){if(t.adminMode)return s(e);{const{connectionId:n,type:s}=e;if(!s)throw new Error(`unknown connection type "${s}"`);const o=t.sessionConnections.find(e=>e.connectionId===n);if(o)return o;{const n=t.sessionConnections.push(e);return t.sessionConnections[n-1]}}},deleteConnection(e){if(t.adminMode)return n(e);{const{connectionId:n}=e,s=t.sessionConnections.findIndex(e=>e.connectionId===n);return-1===s?void 0:t.sessionConnections.splice(s,1)}}}})}(e),fe.types.model({focusedViewId:fe.types.maybe(fe.types.string)}).actions(e=>({setFocusedViewId(t){e.focusedViewId=t}})),fe.types.model({}).volatile(()=>({snackbarMessages:ge.observable.array()})).views(e=>({get snackbarMessageSet(){return new Map(e.snackbarMessages.map(e=>[e.message,e]))}})).actions(e=>({notify(e,t,n){this.pushSnackbarMessage(e,t,n),"info"!==t&&"success"!==t||setTimeout(()=>{this.removeSnackbarMessage(e)},5e3)},notifyError(t,n,s){this.notify(t,"error",{name:(0,u.jsx)(jt.A,{}),onClick:()=>{e.queueDialog(e=>[Pt,{onClose:e,error:n,extra:s}])}})},pushSnackbarMessage(t,n,s){!s&&e.snackbarMessageSet.has(t)||e.snackbarMessages.push({message:t,level:n,action:s})},popSnackbarMessage:()=>e.snackbarMessages.pop(),removeSnackbarMessage(t){const n=e.snackbarMessageSet.get(t);void 0!==n&&e.snackbarMessages.remove(n)}})))).props({margin:0,sessionPlugins:fe.types.array(fe.types.frozen())}).volatile(()=>({sessionThemeName:(0,L.localStorageGetItem)("themeName")||"default",task:void 0})).views(e=>({get tracks(){return[...e.sessionTracks,...e.jbrowse.tracks]},get root(){return(0,fe.getParent)(e)},get assemblies(){return[...e.jbrowse.assemblies,...e.sessionAssemblies]},get connections(){return[...e.jbrowse.connections,...e.sessionConnections]}})).actions(e=>({setName(t){e.name=t}})).views(e=>({get assemblyNames(){return e.assemblies.map(e=>(0,v.readConfObject)(e,"name"))},get version(){return e.root.version},get shareURL(){return(0,v.getConf)(e.jbrowse,"shareURL")},get textSearchManager(){return e.root.textSearchManager},get assemblyManager(){return e.root.assemblyManager},get savedSessionMetadata(){return e.root.savedSessionMetadata},get previousAutosaveId(){return e.root.previousAutosaveId},get history(){return e.root.history},renderProps:()=>({theme:e.theme,highResolutionScaling:(0,v.getConf)(e,"highResolutionScaling")})})).actions(e=>({addAssemblyConf(t){e.jbrowse.addAssemblyConf(t)},addSessionPlugin(t){if(e.sessionPlugins.some(e=>e.name===t.name))throw new Error("session plugin cannot be installed twice");e.sessionPlugins.push(t),e.root.setPluginsUpdated(!0)},removeSessionPlugin(t){e.sessionPlugins=(0,fe.cast)(e.sessionPlugins.filter(e=>e.url!==t.url||e.umdUrl!==t.umdUrl||e.cjsUrl!==t.cjsUrl||e.esmUrl!==t.esmUrl)),(0,fe.getParent)(e).setPluginsUpdated(!0)},addSavedSession:t=>e.root.addSavedSession(t),deleteSavedSession:t=>e.root.deleteSavedSession(t),favoriteSavedSession:t=>e.root.favoriteSavedSession(t),unfavoriteSavedSession:t=>e.root.unfavoriteSavedSession(t),renameCurrentSession:t=>e.root.renameCurrentSession(t),duplicateCurrentSession:()=>e.root.duplicateCurrentSession(),activateSession:t=>e.root.activateSession(t),setDefaultSession:()=>e.root.setDefaultSession(),saveSessionToLocalStorage:()=>e.root.saveSessionToLocalStorage(),loadAutosaveSession:()=>e.root.loadAutosaveSession(),setSession:t=>e.root.setSession(t)})).actions(e=>({editTrackConfiguration(t){const{adminMode:n,sessionTracks:s}=e;if(!n&&!s.includes(t))throw new Error("Can't edit the configuration of a non-session track");e.editConfiguration(t)}})).views(e=>({getTrackActionMenuItems(t){const{adminMode:n,sessionTracks:s}=e,o=n||s.find(e=>e.trackId===t.trackId),r="ReferenceSequenceTrack"===t.type;return[{label:"About track",priority:1002,onClick:()=>{e.queueDialog(e=>[$t,{config:t,handleClose:e}])},icon:Lt.A},{label:"Settings",priority:1001,disabled:!o,icon:yt.A,onClick:()=>{e.editTrackConfiguration(t)}},{label:"Delete track",priority:1e3,disabled:!o||r,icon:Rt.A,onClick:()=>{e.deleteTrackConf(t)}},{label:"Copy track",priority:999,disabled:r,onClick:()=>{const n=structuredClone((0,fe.getSnapshot)(t)),s=Date.now();n.trackId+=`-${s}`;for(const e of n.displays)e.displayId+=`-${s}`;e.adminMode||(n.trackId+="-sessionTrack",n.category=void 0),n.name+=" (copy)",e.addTrackConf(n)},icon:mt.A},{type:"divider"}]},menus:()=>e.root.menus()})).actions(e=>({afterAttach(){(0,fe.addDisposer)(e,(0,ge.autorun)(()=>{(0,L.localStorageSetItem)("drawerPosition",e.drawerPosition),(0,L.localStorageSetItem)("themeName",e.themeName)}))}}));var s;const o=e.evaluateExtensionPoint("Core-extendSession",n);return fe.types.snapshotProcessor(o,{preProcessor(e){const{connectionInstances:t,...n}=e||{};return Array.isArray(t)?e:n}})}function zt({pluginManager:e,assemblyConfigSchema:t}){return Ot({pluginManager:e,assemblyConfigSchema:t})}function Ut(e,t){const n=new Ze.A([...Xe.A.map(e=>({plugin:new e,metadata:{isCore:!0}})),...(e.runtimePlugins??[]).map(({plugin:e,definition:t})=>({plugin:new e,definition:t,metadata:{url:t.url}})),...(e.sessionPlugins??[]).map(({plugin:e,definition:t})=>({plugin:new e,definition:t,metadata:{url:t.url}}))]).createPluggableElements(),s=Tt({pluginManager:n,sessionModelFactory:zt,adminMode:!!e.adminKey});if(e.configSnapshot){const o=s.create({jbrowse:e.configSnapshot,configPath:e.configPath},{pluginManager:n});o.setReloadPluginManagerCallback(t),e.configSnapshot.configuration?.rpc?.defaultDriver||o.jbrowse.configuration.rpc.defaultDriver.set("WebWorkerRpcDriver");let r=()=>{};try{const{sessionError:t,sessionSpec:s,sessionSnapshot:i,hubSpec:a}=e;if(t)throw t;i?o.setSession(i):a?r=()=>async function({hubURL:e},t){const n=t.rootModel;try{const t=await fetch(e[0]);if(!t.ok)throw new Error(`HTTP ${t.status} fetching ${e[0]}`);const s=await t.text(),o=s.split("\n").find(e=>e.startsWith("shortLabel"))?.replace("shortLabel","").trim();n.setSession({name:o||e[0],sessionConnections:e.map(e=>({type:"UCSCTrackHubConnection",connectionId:e,name:e,hubTxtLocation:{uri:e,locationType:"UriLocation"}}))});const{session:r}=n;r.makeConnection(r.sessionConnections[0])}catch(e){console.error(e),n.session?.notifyError(`${e}`,e)}}(a,n):s?r=()=>async function({views:e,sessionTracks:t=[]},n){const s=n.rootModel;try{s.setSession({name:`New session ${(new Date).toLocaleString()}`});for(const e of t)s.session.addTrackConf(e);await Promise.all(e.map(e=>n.evaluateAsyncExtensionPoint(`LaunchView-${e.type}`,{...e,session:s.session})))}catch(e){console.error(e),s.session?.notifyError(`${e}`,e)}}(s,n):o.setDefaultSession()}catch(t){o.setDefaultSession();const n=`${t}`.replace("[mobx-state-tree] ","").replace(/\(.+/,""),s=n.length>1e3?`${n.slice(0,1e3)}...see more in console`:n,r=s.startsWith("Error:")?s:`Error: ${s}`;o.session?.notifyError(`${r}. If you received this URL from another user, request that they send you a session generated with the "Share" button instead of copying and pasting their URL`,e.sessionError,e.sessionSnapshot),console.error(t)}return function(e,t,n){e&&!(0,v.readConfObject)(e.jbrowse.configuration,"disableAnalytics")&&(async function(e,t,n){try{const s="https://analytics.jbrowse.org/api/v1",o=e.jbrowse.tracks.filter(e=>((0,v.readConfObject)(e,"assemblyNames")||[]).length>1).length,r=Object.keys(localStorage).filter(e=>e.includes("localSaved-")).length,{jbrowse:i,session:a,version:c}=e,{tracks:l,assemblies:u,plugins:d}=i,m={ver:c,"plugins-count":d?.length||0,"plugin-names":d?.map(e=>e.name).join(","),"assemblies-count":u.length,"tracks-count":l.length,"session-tracks-count":a?.sessionTracks.length||0,"open-views":a?.views.length||0,"synteny-tracks-count":o,"saved-sessions-count":r,"existing-session-param-type":n?.split("-")[0]||"none","scn-h":window.screen.height,"scn-w":window.screen.width,"win-h":window.innerHeight,"win-w":window.innerWidth,electron:L.isElectron,loadTime:(Date.now()-t)/1e3,jb2:!0};l.forEach(e=>{const t=`track-types-${e.type}`;m[t]=m[t]+1||1}),a?.sessionTracks.forEach(e=>{const t=`sessionTrack-types-${e.type}`;m[t]=m[t]+1||1});const p=Object.keys(m).map(e=>`${e}=${m[e]}`).join("&");await fetch(`${s}?${p}`)}catch(e){console.error("Failed to write analytics to AWS.",e)}}(e,t,n),async function(e,t){const n={"tracks-count":e.jbrowse.tracks.length,ver:e.version,electron:L.isElectron,loadTime:Date.now()-t,pluginNames:e.jbrowse.plugins?.map(e=>e.name)||""};let s="(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){";s+="(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),",s+="m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)",s+="})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');",s+="ga('create', 'UA-7115575-5', 'auto', 'jbrowseTracker');";const o={};for(const[e,t]of"tracks-count ver electron loadTime pluginNames".split(/\s+/).entries())o[`dimension${e+1}`]=n[t];o.metric1=Math.round(n.loadTime),s+=`ga('jbrowseTracker.send', 'pageview',${JSON.stringify(o)});`;const r=document.createElement("script");r.innerHTML=s,document.getElementsByTagName("head")[0].append(r)}(e,t))}(o,e.initialTimestamp,e.sessionQuery),n.setRootModel(o),n.configure(),r(),n}}var Wt=n(55252);const Bt=(0,o.lazy)(()=>n.e(3459).then(n.bind(n,43459))),_t=(0,o.lazy)(()=>n.e(473).then(n.bind(n,90473)));function Ft(e){return null===e?void 0:e}function Vt(e){const t=(0,s.c)(29),{initialTimestamp:n}=e;let r;t[0]!==n?(r=void 0===n?Date.now():n,t[0]=n,t[1]=r):r=t[1];const i=r,[a]=(0,c.useQueryParam)("config",c.StringParam),[l]=(0,c.useQueryParam)("session",c.StringParam),[d]=(0,c.useQueryParam)("adminKey",c.StringParam),[m,p]=(0,c.useQueryParam)("password",c.StringParam),[f,h]=(0,c.useQueryParam)("loc",c.StringParam),[g,y]=(0,c.useQueryParam)("sessionTracks",c.StringParam),[b,w]=(0,c.useQueryParam)("hubURL",c.StringParam),[v,S]=(0,c.useQueryParam)("assembly",c.StringParam),[C,A]=(0,c.useQueryParam)("tracks",c.StringParam),[k,x]=(0,c.useQueryParam)("highlight",c.StringParam),[M,T]=(0,c.useQueryParam)("nav",c.StringParam),[j,P]=(0,c.useQueryParam)("tracklist",c.StringParam);let E;t[2]!==d||t[3]!==v||t[4]!==a||t[5]!==k||t[6]!==b||t[7]!==i||t[8]!==f||t[9]!==M||t[10]!==m||t[11]!==l||t[12]!==g||t[13]!==j||t[14]!==C?(E=Ye.create({configPath:Ft(a),sessionQuery:Ft(l),password:Ft(m),adminKey:Ft(d),loc:Ft(f),assembly:Ft(v),tracks:Ft(C),sessionTracks:Ft(g),tracklist:JSON.parse(Ft(j)||"false"),highlight:Ft(k),nav:JSON.parse(Ft(M)||"true"),hubURL:Ft(b?.split(",")),initialTimestamp:i}),t[2]=d,t[3]=v,t[4]=a,t[5]=k,t[6]=b,t[7]=i,t[8]=f,t[9]=M,t[10]=m,t[11]=l,t[12]=g,t[13]=j,t[14]=C,t[15]=E):E=t[15];const I=E;let N,R,L;return t[16]!==S||t[17]!==x||t[18]!==w||t[19]!==h||t[20]!==T||t[21]!==p||t[22]!==y||t[23]!==P||t[24]!==A?(N=()=>{h(void 0,"replaceIn"),A(void 0,"replaceIn"),S(void 0,"replaceIn"),p(void 0,"replaceIn"),y(void 0,"replaceIn"),w(void 0,"replaceIn"),P(void 0,"replaceIn"),T(void 0,"replaceIn"),x(void 0,"replaceIn")},R=[S,x,h,T,p,y,w,P,A],t[16]=S,t[17]=x,t[18]=w,t[19]=h,t[20]=T,t[21]=p,t[22]=y,t[23]=P,t[24]=A,t[25]=N,t[26]=R):(N=t[25],R=t[26]),(0,o.useEffect)(N,R),t[27]!==I?(L=(0,u.jsx)(Ht,{loader:I}),t[27]=I,t[28]=L):L=t[28],L}const Ht=(0,a.observer)(function({loader:e}){const[t,n]=(0,o.useState)(e),{configError:s,ready:r,sessionTriaged:i}=t,[a,c]=(0,o.useState)(),[l,d]=(0,o.useState)();(0,o.useEffect)(()=>{const e=(e,s)=>{const o=Ye.create({configPath:t.configPath,sessionQuery:t.sessionQuery,password:t.password,adminKey:t.adminKey,loc:t.loc,assembly:t.assembly,tracks:t.tracks,sessionTracks:t.sessionTracks,tracklist:t.tracklist,highlight:t.highlight,nav:t.nav,hubURL:t.hubURL,initialTimestamp:Date.now(),configSnapshot:e,sessionSnapshot:s});n(o)};try{r&&c(Ut(t,e))}catch(e){console.error(e),d(e)}},[t,r]);const m=s||l;return m?(0,u.jsx)(o.Suspense,{fallback:null,children:(0,u.jsx)(_t,{error:m})}):i?(0,u.jsx)(Bt,{loader:t,sessionTriaged:i}):a?(0,u.jsx)(He,{pluginManager:a}):(0,u.jsx)(Ge.A,{})});function Gt(e){return(0,u.jsx)(r.FatalErrorDialog,{...e,resetButtonText:"Reset Session",onFactoryReset:Wt.A})}const qt=function(e){const t=(0,s.c)(2),{initialTimestamp:n}=e;let o;return t[0]!==n?(o=(0,u.jsx)(i.t,{FallbackComponent:Gt,children:(0,u.jsx)(c.QueryParamProvider,{adapter:l.Q,children:(0,u.jsx)(Vt,{initialTimestamp:n})})}),t[0]=n,t[1]=o):o=t[1],o}},43334:(e,t,n)=>{n.d(t,{A:()=>s});class s extends Map{constructor(e={}){if(super(),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if("number"==typeof e.maxAge&&0===e.maxAge)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=e.maxSize,this.maxAge=e.maxAge||Number.POSITIVE_INFINITY,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(e){if("function"==typeof this.onEviction)for(const[t,n]of e)this.onEviction(t,n.value)}_deleteIfExpired(e,t){return"number"==typeof t.expiry&&t.expiry<=Date.now()&&("function"==typeof this.onEviction&&this.onEviction(e,t.value),this.delete(e))}_getOrDeleteIfExpired(e,t){if(!this._deleteIfExpired(e,t))return t.value}_getItemValue(e,t){return t.expiry?this._getOrDeleteIfExpired(e,t):t.value}_peek(e,t){const n=t.get(e);return this._getItemValue(e,n)}_set(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(e,t){this.oldCache.delete(e),this._set(e,t)}*_entriesAscending(){for(const e of this.oldCache){const[t,n]=e;this.cache.has(t)||this._deleteIfExpired(t,n)||(yield e)}for(const e of this.cache){const[t,n]=e;this._deleteIfExpired(t,n)||(yield e)}}get(e){if(this.cache.has(e)){const t=this.cache.get(e);return this._getItemValue(e,t)}if(this.oldCache.has(e)){const t=this.oldCache.get(e);if(!this._deleteIfExpired(e,t))return this._moveToRecent(e,t),t.value}}set(e,t,{maxAge:n=this.maxAge}={}){const s="number"==typeof n&&n!==Number.POSITIVE_INFINITY?Date.now()+n:void 0;this.cache.has(e)?this.cache.set(e,{value:t,expiry:s}):this._set(e,{value:t,expiry:s})}has(e){return this.cache.has(e)?!this._deleteIfExpired(e,this.cache.get(e)):!!this.oldCache.has(e)&&!this._deleteIfExpired(e,this.oldCache.get(e))}peek(e){return this.cache.has(e)?this._peek(e,this.cache):this.oldCache.has(e)?this._peek(e,this.oldCache):void 0}delete(e){const t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(e){if(!(e&&e>0))throw new TypeError("`maxSize` must be a number greater than 0");const t=[...this._entriesAscending()],n=t.length-e;n<0?(this.cache=new Map(t),this.oldCache=new Map,this._size=t.length):(n>0&&this._emitEvictions(t.slice(0,n)),this.oldCache=new Map(t.slice(n)),this.cache=new Map,this._size=0),this.maxSize=e}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache){const[t,n]=e;this._deleteIfExpired(t,n)||(yield[t,n.value])}for(const e of this.oldCache){const[t,n]=e;this.cache.has(t)||this._deleteIfExpired(t,n)||(yield[t,n.value])}}*entriesDescending(){let e=[...this.cache];for(let t=e.length-1;t>=0;--t){const n=e[t],[s,o]=n;this._deleteIfExpired(s,o)||(yield[s,o.value])}e=[...this.oldCache];for(let t=e.length-1;t>=0;--t){const n=e[t],[s,o]=n;this.cache.has(s)||this._deleteIfExpired(s,o)||(yield[s,o.value])}}*entriesAscending(){for(const[e,t]of this._entriesAscending())yield[e,t.value]}get size(){if(!this._size)return this.oldCache.size;let e=0;for(const t of this.oldCache.keys())this.cache.has(t)||e++;return Math.min(this._size+e,this.maxSize)}entries(){return this.entriesAscending()}forEach(e,t=this){for(const[n,s]of this.entriesAscending())e.call(t,s,n,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}},45858:(e,t,n)=>{n.d(t,{DH:()=>r,qk:()=>i});var s=n(8832),o=n(36422);function r(e){return o.types.model({id:s.ElementId,name:o.types.string,margin:0}).volatile(()=>({selection:void 0,hovered:void 0})).views(e=>({get root(){return(0,o.getParent)(e)}})).views(e=>({get jbrowse(){return e.root.jbrowse},get rpcManager(){return e.root.rpcManager},get configuration(){return this.jbrowse.configuration},get adminMode(){return e.root.adminMode},get textSearchManager(){return e.root.textSearchManager}})).views(e=>({get assemblies(){return e.jbrowse.assemblies}})).actions(e=>({setSelection(t){e.selection=t},clearSelection(){e.selection=void 0},setHovered(t){e.hovered=t}}))}function i(e){return"id"in e&&"name"in e&&"root"in e}},49204:(e,t,n)=>{n.d(t,{F:()=>i,M:()=>a});var s=n(68584),o=n(36422),r=n(45858);function i(e){return o.types.model({connectionInstances:o.types.array(e.pluggableMstType("connection","stateModel"))}).views(e=>({get connections(){const{jbrowse:t}=e;return t.connections}})).actions(t=>({makeConnection(n,o={}){const r=n.type;if(!r)throw new Error("track configuration has no `type` listed");const i=(0,s.readConfObject)(n,"name");if(!e.getConnectionType(r))throw new Error(`unknown connection type ${r}`);const a=t.connectionInstances.push({...o,name:i,type:r,configuration:n});return t.connectionInstances[a-1]},prepareToBreakConnection(e){const n=t,o=[],r={},i=(0,s.readConfObject)(e,"name"),a=t.connectionInstances.find(e=>e.name===i);if(a){for(const e of a.tracks){const t=n.getReferring(e);n.removeReferring(t,e,o,r)}return[()=>{for(const e of o)e();this.breakConnection(e)},r]}},breakConnection(e){const n=(0,s.readConfObject)(e,"name"),o=t.connectionInstances.find(e=>e.name===n);if(!o)throw new Error(`no connection found with name ${n}`);t.connectionInstances.remove(o)},deleteConnection(e){const{jbrowse:n}=t;return n.deleteConnectionConf(e)},addConnectionConf(e){const{jbrowse:n}=t;return n.addConnectionConf(e)},clearConnections(){t.connectionInstances.clear()}}))}function a(e){return(0,r.qk)(e)&&"connectionInstances"in e}},49409:(e,t,n)=>{n.d(t,{K$:()=>d,LP:()=>r,Vr:()=>l,XE:()=>c,eW:()=>i,pK:()=>a,pS:()=>u});var s=n(59773),o=n(36422);async function r(e){const t=function(e){let t=0;switch(e.length%4){case 3:t=1;break;case 2:t=2;break;case 0:t=0;break;default:throw new Error("base64 not a valid length")}return e+"=".repeat(t)}(e.replaceAll("-","+").replaceAll("_","/")),{toByteArray:s}=await n.e(7130).then(n.t.bind(n,47130,19)),{inflate:o}=await Promise.resolve().then(n.t.bind(n,57864,23)),r=o(s(t));return new TextDecoder("utf8").decode(r)}async function i(e){const t=(new TextEncoder).encode(e),{deflate:s}=await Promise.resolve().then(n.t.bind(n,57864,23)),{fromByteArray:o}=await n.e(7130).then(n.t.bind(n,47130,19)),r=o(s(t)),i=r.indexOf("=");return i>0?r.slice(0,i).replaceAll("+","-").replaceAll("/","_"):r.replaceAll("+","-").replaceAll("/","_")}function a(e,t){if(void 0!==e)if((0,o.isArrayType)(t)){const t=e,n=(0,o.getChildType)(e);if((0,o.isReferenceType)(n))for(let e=0;e<t.length;)(0,o.isValidReference)(()=>t[e])?e+=1:t.splice(e,1);t.forEach(e=>{a(e,n)})}else if((0,o.isMapType)(t)){const t=e,n=(0,o.getChildType)(t);if((0,o.isReferenceType)(n))for(const e in t.keys())(0,o.isValidReference)(()=>t.get(e))||t.delete(e);t.forEach(e=>{a(e,n)})}else if((0,o.isModelType)(t)){const{properties:t}=(0,o.getPropertyMembers)(e);Object.entries(t).forEach(([t,n])=>{a(e[t],n)})}}function c(e,t){if("object"==typeof e&&null!==e)for(const n of Object.keys(e))"object"==typeof e[n]&&null!==e[n]?c(e[n],t):"uri"===n&&(e.baseUri=t.href)}function l({configuration:e},t,n){return e?.[t]||n}async function u(e){if(0===e.length)return!0;const t=await async function(){const e=await fetch("https://jbrowse.org/plugin-store/plugins.json");if(!e.ok)throw new Error(`HTTP ${e.status} ${e.statusText} fetching plugins`);return e.json()}();return e.every(e=>(0,s.rE)(e)?t.plugins.some(t=>(0,s.rE)(e)&&("url"in t&&"url"in e&&e.url===t.url||"umdUrl"in t&&"umdUrl"in e&&e.umdUrl===t.umdUrl)):(0,s.Cx)(e)?t.plugins.some(t=>(0,s.Cx)(e)&&"esmUrl"in e&&e.esmUrl===t.esmUrl):!!(0,s.Nz)(e)&&t.plugins.some(t=>(0,s.Nz)(e)&&e.cjsUrl===t.cjsUrl))}function d(e,t){for(const n in e)n===t?delete e[n]:"object"==typeof e[n]&&d(e[n],t);return e}},55252:(e,t,n)=>{async function s(){window.location=window.location.pathname}n.d(t,{A:()=>s})},58531:(e,t,n)=>{n.d(t,{A:()=>a});var s=n(67758),o=n(21687),r=n(65895),i=n(69500);function a(e){const t=(0,s.c)(7);let n,a,c,l;return t[0]!==e?(({children:n,...a}=e),t[0]=e,t[1]=n,t[2]=a):(n=t[1],a=t[2]),t[3]===Symbol.for("react.memo_cache_sentinel")?(c=(0,i.jsx)(o.A,{fontSize:"small"}),t[3]=c):c=t[3],t[4]!==n||t[5]!==a?(l=(0,i.jsxs)(r.A,{...a,target:"_blank",rel:"noopener noreferrer",children:[n," ",c]}),t[4]=n,t[5]=a,t[6]=l):l=t[6],l}},59773:(e,t,n)=>{n.d(t,{Ay:()=>p,Cx:()=>l,Hm:()=>m,Nz:()=>u,lc:()=>d,rE:()=>c});var s=n(45103),o=n.n(s),r=n(12678),i=n(44278),a=n(99546);function c(e){return(void 0!==e.umdUrl||void 0!==e.url||void 0!==e.umdLoc)&&void 0!==e.name}function l(e){return void 0!==e.esmUrl||void 0!==e.esmLoc}function u(e){return void 0!==e.cjsUrl}function d(e){return c(e)?`UMD plugin ${e.name}`:l(e)?`ESM plugin ${e.esmUrl||e.esmLoc.uri}`:u(e)?`CJS plugin ${e.cjsUrl}`:"unknown plugin"}function m(e){return c(e)?e.url??e.umdLoc?.uri??e.umdUrl:l(e)?e.esmUrl??e.esmUri??e.esmLoc?.uri:u(e)?e.cjsUrl||e.cjsLoc.uri:"unknown url"}class p{definitions=[];constructor(e=[],t){this.fetchESM=t?.fetchESM,this.fetchCJS=t?.fetchCJS,this.definitions=JSON.parse(JSON.stringify(e))}async loadCJSPlugin(e,t){const n=new URL(e.cjsUrl,t);if("http:"!==n.protocol&&"https:"!==n.protocol)throw new Error(`Cannot load plugins using protocol "${n.protocol}"`);if(!this.fetchCJS)throw new Error("No fetchCJS callback provided");return this.fetchCJS(n.href)}async loadESMPlugin(e,t){const n="esmUrl"in e?new URL(e.esmUrl,t):new URL(e.esmLoc.uri,e.esmLoc.baseUri);if("http:"!==n.protocol&&"https:"!==n.protocol)throw new Error(`cannot load plugins using protocol "${n.protocol}"`);if(!this.fetchESM)throw new Error("No ESM fetcher installed");const s=await this.fetchESM(n.href);if(!s)throw new Error(`Could not load ESM plugin: ${n}`);return s}async loadUMDPlugin(e,t){const n="url"in e?new URL(e.url,t):"umdUrl"in e?new URL(e.umdUrl,t):new URL(e.umdLoc.uri,e.umdLoc.baseUri);if("http:"!==n.protocol&&"https:"!==n.protocol)throw new Error(`cannot load plugins using protocol "${n.protocol}"`);const s=e.name,i=`JBrowsePlugin${s}`;"undefined"==typeof jest?await async function(e){if(!Boolean("WorkerGlobalScope"in globalThis))return t=e,new Promise((e,n)=>{o()(t,(t,s)=>{t?n(t):e(s.src)})});var t;if(!globalThis.importScripts)throw new Error("cannot figure out how to load external JS scripts in this environment");await globalThis.importScripts(e)}(n.href):globalThis[i]={default:r.A};const a=globalThis[i];if(!a)throw new Error(`Failed to load UMD bundle for ${s}, ${i} is undefined`);return a}async loadPlugin(e,t){let n;if(a.isElectron&&u(e))n=await this.loadCJSPlugin(e,t);else if(l(e))n=await this.loadESMPlugin(e,t);else{if(!c(e))throw!a.isElectron&&u(e)?new Error(`CommonJS plugin found, but not in a NodeJS environment: ${JSON.stringify(e)}`):new Error(`Could not determine plugin type: ${JSON.stringify(e)}`);n=await this.loadUMDPlugin(e,t)}if(!n.default)throw new Error(`${d(e)} does not have a default export, cannot load`);return n.default}installGlobalReExports(e){return e.JBrowseExports=Object.fromEntries(Object.entries(i.A).map(([e,t])=>[e,t])),this}async load(e){return Promise.all(this.definitions.map(async t=>({plugin:await this.loadPlugin(t,e),definition:t})))}}},64980:(e,t,n)=>{n.d(t,{A:()=>M});var s=n(67758),o=n(7552),r=n(84449),i=n(10240),a=n(26508),c=n(95408),l=n(11810),u=n(41450),d=n(70330),m=n(69500);const p=o.forwardRef(function(e,t){const n=(0,s.c)(10);let o,r,i,a;return n[0]!==e.style?(o={pointerEvents:"none",...e.style},n[0]=e.style,n[1]=o):o=n[1],n[2]===Symbol.for("react.memo_cache_sentinel")?(r={style:{pointerEvents:"auto"}},n[2]=r):r=n[2],n[3]!==e.slotProps?(i={...e.slotProps,paper:r},n[3]=e.slotProps,n[4]=i):i=n[4],n[5]!==e||n[6]!==t||n[7]!==o||n[8]!==i?(a=(0,m.jsx)(l.A,{...e,ref:t,style:o,slotProps:i}),n[5]=e,n[6]=t,n[7]=o,n[8]=i,n[9]=a):a=n[9],a});var f=n(8463),h=n(33484);const g=(0,o.createContext)({parentPopupState:void 0,rootPopupState:void 0});function y(e){const t=(0,s.c)(14);let n,r,a;t[0]!==e?(({onClick:r,closeAfterItemClick:n,...a}=e),t[0]=e,t[1]=n,t[2]=r,t[3]=a):(n=t[1],r=t[2],a=t[3]);const{rootPopupState:c,parentPopupState:l}=(0,o.useContext)(g);if(!c)throw new Error("must be used inside a CascadingMenu");let u,d,p;return t[4]!==n||t[5]!==r||t[6]!==c?(u=e=>{n&&c.close(),r?.(e)},t[4]=n,t[5]=r,t[6]=c,t[7]=u):u=t[7],t[8]!==l?(d=()=>{l?.childHandle&&(l.childHandle.close(),l.setChildHandle(void 0))},t[8]=l,t[9]=d):d=t[9],t[10]!==a||t[11]!==u||t[12]!==d?(p=(0,m.jsx)(i.A,{...a,onClick:u,onMouseOver:d}),t[10]=a,t[11]=u,t[12]=d,t[13]=p):p=t[13],p}function b(e){const t=(0,s.c)(30);let n,l,u,d;t[0]!==e?(({title:d,Icon:n,inset:l,...u}=e),t[0]=e,t[1]=n,t[2]=l,t[3]=u,t[4]=d):(n=t[1],l=t[2],u=t[3],d=t[4]);const{parentPopupState:p}=(0,o.useContext)(g);let f;t[5]!==p?(f={parentPopupState:p},t[5]=p,t[6]=f):f=t[6];const y=(0,h.T6)(f);let b,v,S,C,A,k,x,M,T,j;return t[7]!==y?(b=(0,h.oe)(y),t[7]=y,t[8]=b):b=t[8],t[9]!==y?(v=(0,h._k)(y),t[9]=y,t[10]=v):v=t[10],t[11]!==n?(S=n?(0,m.jsx)(a.A,{children:(0,m.jsx)(n,{})}):null,t[11]=n,t[12]=S):S=t[12],t[13]!==l||t[14]!==d?(C=(0,m.jsx)(c.A,{primary:d,inset:l}),t[13]=l,t[14]=d,t[15]=C):C=t[15],t[16]===Symbol.for("react.memo_cache_sentinel")?(A=(0,m.jsx)(r.A,{}),t[16]=A):A=t[16],t[17]!==b||t[18]!==v||t[19]!==S||t[20]!==C?(k=(0,m.jsxs)(i.A,{...b,...v,children:[S,C,A]}),t[17]=b,t[18]=v,t[19]=S,t[20]=C,t[21]=k):k=t[21],t[22]===Symbol.for("react.memo_cache_sentinel")?(x={vertical:"top",horizontal:"right"},M={vertical:"top",horizontal:"left"},t[22]=x,t[23]=M):(x=t[22],M=t[23]),t[24]!==y||t[25]!==u?(T=(0,m.jsx)(w,{...u,anchorOrigin:x,transformOrigin:M,popupState:y}),t[24]=y,t[25]=u,t[26]=T):T=t[26],t[27]!==T||t[28]!==k?(j=(0,m.jsxs)(m.Fragment,{children:[k,T]}),t[27]=T,t[28]=k,t[29]=j):j=t[29],j}function w(e){const t=(0,s.c)(14);let n,r;if(t[0]!==e){const{popupState:s,onMenuItemClick:o,menuItems:i,classes:a,...c}=e;n=s,r=c,t[0]=e,t[1]=n,t[2]=r}else n=t[1],r=t[2];const{rootPopupState:i}=(0,o.useContext)(g);let a;const c=i||n;let l;t[3]!==n||t[4]!==c?(l={rootPopupState:c,parentPopupState:n},t[3]=n,t[4]=c,t[5]=l):l=t[5],a=l;const u=a;let d,f,y;return t[6]!==n?(d=(0,h.NA)(n),t[6]=n,t[7]=d):d=t[7],t[8]!==r||t[9]!==d?(f=(0,m.jsx)(p,{...r,...d}),t[8]=r,t[9]=d,t[10]=f):f=t[10],t[11]!==u||t[12]!==f?(y=(0,m.jsx)(g.Provider,{value:u,children:f}),t[11]=u,t[12]=f,t[13]=y):y=t[13],y}function v(e){const t=(0,s.c)(14);let n,r;if(t[0]!==e){const{popupState:s,onMenuItemClick:o,menuItems:i,...a}=e;n=s,r=a,t[0]=e,t[1]=n,t[2]=r}else n=t[1],r=t[2];const{rootPopupState:i}=(0,o.useContext)(g);let a;const c=i||n;let u;t[3]!==n||t[4]!==c?(u={rootPopupState:c,parentPopupState:n},t[3]=n,t[4]=c,t[5]=u):u=t[5],a=u;const d=a;let p,f,y;return t[6]!==n?(p=(0,h.NA)(n),t[6]=n,t[7]=p):p=t[7],t[8]!==r||t[9]!==p?(f=(0,m.jsx)(l.A,{...r,...p}),t[8]=r,t[9]=p,t[10]=f):f=t[10],t[11]!==d||t[12]!==f?(y=(0,m.jsx)(g.Provider,{value:d,children:f}),t[11]=d,t[12]=f,t[13]=y):y=t[13],y}function S(e){const t=(0,s.c)(5),{item:n}=e;if("subMenu"in n){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)(f.m,{type:"subMenu"}),t[0]=e):e=t[0],e}if("checkbox"===n.type||"radio"===n.type){let e;return t[1]!==n.checked||t[2]!==n.disabled||t[3]!==n.type?(e=(0,m.jsx)(f.m,{type:n.type,checked:n.checked,disabled:n.disabled}),t[1]=n.checked,t[2]=n.disabled,t[3]=n.type,t[4]=e):e=t[4],e}return null}function C(e){const t=(0,s.c)(20);let n,o,r,i,l;t[0]!==e?(({onMenuItemClick:r,closeAfterItemClick:n,menuItems:o,...i}=e),t[0]=e,t[1]=n,t[2]=o,t[3]=r,t[4]=i):(n=t[1],o=t[2],r=t[3],i=t[4]),t[5]!==o?(l=o.some(k),t[5]=o,t[6]=l):l=t[6];const p=l;let f,h;if(t[7]!==n||t[8]!==p||t[9]!==o||t[10]!==r||t[11]!==i){let e;t[13]!==n||t[14]!==p||t[15]!==r||t[16]!==i?(e=(e,t)=>"subMenu"in e?(0,m.jsx)(b,{title:e.label,Icon:e.icon,inset:p&&!e.icon,onMenuItemClick:r,menuItems:e.subMenu,children:(0,m.jsx)(C,{...i,closeAfterItemClick:n,onMenuItemClick:r,menuItems:e.subMenu})},`subMenu-${e.label}-${t}`):"divider"===e.type?(0,m.jsx)(u.A,{component:"li"},`divider-${JSON.stringify(e)}-${t}`):"subHeader"===e.type?(0,m.jsx)(d.A,{children:e.label},`subHeader-${e.label}-${t}`):(0,m.jsxs)(y,{closeAfterItemClick:n,onClick:"onClick"in e?t=>{r(t,e.onClick)}:void 0,disabled:Boolean(e.disabled),children:[e.icon?(0,m.jsx)(a.A,{children:(0,m.jsx)(e.icon,{})}):null," ",(0,m.jsx)(c.A,{primary:e.label,secondary:e.subLabel,inset:p&&!e.icon}),(0,m.jsx)(x,{}),(0,m.jsx)(S,{item:e})]},`${e.label}-${t}`),t[13]=n,t[14]=p,t[15]=r,t[16]=i,t[17]=e):e=t[17],f=o.toSorted(A).map(e),t[7]=n,t[8]=p,t[9]=o,t[10]=r,t[11]=i,t[12]=f}else f=t[12];return t[18]!==f?(h=(0,m.jsx)(m.Fragment,{children:f}),t[18]=f,t[19]=h):h=t[19],h}function A(e,t){return(t.priority||0)-(e.priority||0)}function k(e){return"icon"in e&&e.icon}function x(){const e=(0,s.c)(1);let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,m.jsx)("div",{style:{flexGrow:1,minWidth:10}}),e[0]=t):t=e[0],t}const M=function(e){const t=(0,s.c)(9);let n,o;t[0]!==e?(({closeAfterItemClick:o,...n}=e),t[0]=e,t[1]=n,t[2]=o):(n=t[1],o=t[2]);const r=void 0===o||o;let i,a;return t[3]!==r||t[4]!==n?(i=(0,m.jsx)(C,{...n,closeAfterItemClick:r}),t[3]=r,t[4]=n,t[5]=i):i=t[5],t[6]!==n||t[7]!==i?(a=(0,m.jsx)(v,{...n,children:i}),t[6]=n,t[7]=i,t[8]=a):a=t[8],a}},66684:(e,t,n)=>{n.d(t,{A:()=>l});var s=n(67758),o=n(7552),r=n(75785),i=n(69500);const a=(0,r.n9)()({horizontalHandle:{cursor:"row-resize",width:"100%"},verticalHandle:{cursor:"col-resize",height:"100%"},flexbox_verticalHandle:{cursor:"col-resize",alignSelf:"stretch"},flexbox_horizontalHandle:{cursor:"row-resize",alignSelf:"stretch"}});function c(){}const l=function(e){const t=(0,s.c)(23);let n,r,l,u,d,m;t[0]!==e?(({onDrag:n,vertical:d,flexbox:m,className:l,onMouseDown:r,...u}=e),t[0]=e,t[1]=n,t[2]=r,t[3]=l,t[4]=u,t[5]=d,t[6]=m):(n=t[1],r=t[2],l=t[3],u=t[4],d=t[5],m=t[6]);const p=void 0!==d&&d,f=void 0!==m&&m,[h,g]=(0,o.useState)(!1),y=(0,o.useRef)(0),b=(0,o.useRef)(0),{classes:w,cx:v}=a();let S,C,A,k,x,M;return t[7]!==h||t[8]!==n||t[9]!==p?(S=()=>{const e=function(e){e.preventDefault();const t=p?e.clientX:e.clientY,s=y.current-t,o=t-b.current;b.current=t,n(o,s)},t=function(){g(!1)};return h?(window.addEventListener("mousemove",e,!0),window.addEventListener("mouseup",t,!0),()=>{window.removeEventListener("mousemove",e,!0),window.removeEventListener("mouseup",t,!0)}):c},C=[h,n,p],t[7]=h,t[8]=n,t[9]=p,t[10]=S,t[11]=C):(S=t[10],C=t[11]),(0,o.useEffect)(S,C),A=f?p?w.flexbox_verticalHandle:w.flexbox_horizontalHandle:p?w.verticalHandle:w.horizontalHandle,t[12]!==r||t[13]!==p?(k=e=>{e.preventDefault();const t=p?e.clientX:e.clientY;y.current=t,b.current=t,g(!0),r?.(e)},t[12]=r,t[13]=p,t[14]=k):k=t[14],t[15]!==A||t[16]!==v||t[17]!==l?(x=v(A,l),t[15]=A,t[16]=v,t[17]=l,t[18]=x):x=t[18],t[19]!==u||t[20]!==k||t[21]!==x?(M=(0,i.jsx)("div",{"data-resizer":"true",onMouseDown:k,className:x,...u}),t[19]=u,t[20]=k,t[21]=x,t[22]=M):M=t[22],M}},67112:(e,t,n)=>{n.r(t),n.d(t,{AssemblySelector:()=>p,BaseTooltip:()=>q.A,CascadingMenu:()=>f.A,CascadingMenuButton:()=>h.A,Dialog:()=>g.A,EditableTypography:()=>y.A,ErrorMessage:()=>b.A,ExternalLink:()=>H.A,FatalErrorDialog:()=>w.A,FileSelector:()=>z,LoadingEllipses:()=>U.A,LogoFull:()=>o.P,Logomark:()=>o.R,Menu:()=>W.A,MenuItemEndDecoration:()=>W.m,PrerenderedCanvas:()=>F,ResizeHandle:()=>V.A,SanitizedHTML:()=>G.A,VIEW_HEADER_HEIGHT:()=>J,createJBrowseBaseTheme:()=>s.createJBrowseBaseTheme,createJBrowseTheme:()=>s.createJBrowseTheme,defaultThemes:()=>s.defaultThemes});var s=n(75397),o=n(34895),r=n(7552),i=n(93062),a=n(10240),c=n(68446),l=n(75785),u=n(99546),d=n(69500);const m=(0,l.n9)()({importFormEntry:{minWidth:180}}),p=(0,c.observer)(function({session:e,onChange:t,label:n="Assembly",selected:s,InputProps:o,TextFieldProps:c,localStorageKey:l,helperText:p="Select assembly to view"}){const{classes:f}=m(),{assemblyNames:h,assemblyManager:g}=e,y=new URLSearchParams(window.location.search).get("config"),[b,w]="undefined"==typeof jest&&l?(0,u.useLocalStorage)(`lastAssembly-${[window.location.host+window.location.pathname,y,l].join("-")}`,s):(0,r.useState)(s),v=h.includes(b||"")?b:s;(0,r.useEffect)(()=>{v&&v!==s&&t(v)},[v,t,s]);const S=h.length?"":"No configured assemblies";return(0,d.jsx)(i.A,{select:!0,"data-testid":"assembly-selector-textfield",label:n,variant:"outlined",helperText:S||p,value:v||"",onChange:e=>{w(e.target.value)},error:!!S,disabled:!!S,className:f.importFormEntry,...c,slotProps:{input:o,htmlInput:{"data-testid":"assembly-selector"}},children:h.map(e=>(0,d.jsx)(a.A,{value:e,children:g.get(e)?.displayName||e},e))})});var f=n(64980),h=n(23758),g=n(92562),y=n(88373),b=n(38033),w=n(35248),v=n(67758),S=n(61968),C=n(20224),A=n(37962),k=n(28097),x=n(52348),M=n(36866),T=n(56634),j=n(29654),P=n(11810),E=n(43550),I=n(14862),N=n(92516);function R(e){const t=(0,v.c)(10);let n,s,o;t[0]!==e?(({title:o,children:n,...s}=e),t[0]=e,t[1]=n,t[2]=s,t[3]=o):(n=t[1],s=t[2],o=t[3]);const r=o||"";let i,a;return t[4]!==n||t[5]!==s?(i=(0,d.jsx)(C.A,{...s,children:n}),t[4]=n,t[5]=s,t[6]=i):i=t[6],t[7]!==r||t[8]!==i?(a=(0,d.jsx)(A.A,{title:r,children:i}),t[7]=r,t[8]=i,t[9]=a):a=t[9],a}function L(e,t){return"string"==typeof e&&e.length>t?`${e.slice(0,Math.max(0,t))}`:e}function D(e){const t=(0,v.c)(3),{children:n}=e;let s,o;return t[0]===Symbol.for("react.memo_cache_sentinel")?(s={display:"flex",gap:4},t[0]=s):s=t[0],t[1]!==n?(o=(0,d.jsx)("div",{style:s,children:n}),t[1]=n,t[2]=o):o=t[2],o}function $(e){const t=(0,v.c)(2),{children:n}=e;let s;return t[0]!==n?(s=(0,d.jsx)(k.A,{display:"flex",flexDirection:"row",children:(0,d.jsx)(k.A,{children:n})}),t[0]=n,t[1]=s):s=t[1],s}function O(e){const t=(0,v.c)(8),{setLocation:n,inline:s,toggleButtonValue:o,selectedAccount:r}=e;let i,a;return t[0]!==s||t[1]!==e||t[2]!==r||t[3]!==n||t[4]!==o?(i=r?.SelectorComponent?(0,d.jsx)(r.SelectorComponent,{...e,setLocation:n}):"url"===o?(0,d.jsx)(I.A,{...e,setLocation:n,label:r?.selectorLabel,style:s?{margin:0}:void 0}):"file"===o?(0,d.jsx)(E.A,{...e}):null,t[0]=s,t[1]=e,t[2]=r,t[3]=n,t[4]=o,t[5]=i):i=t[5],t[6]!==i?(a=(0,d.jsx)(d.Fragment,{children:i}),t[6]=i,t[7]=a):a=t[7],a}const z=(0,c.observer)(function(e){const{inline:t,location:n,name:s,description:o,rootModel:i,setLocation:c}=e,l=!n||(0,N.C1)(n)?"url":"file",[m,p]=(0,r.useState)(n&&"internetAccountId"in n&&n.internetAccountId?n.internetAccountId:l),f=(0,N.bV)(i)?i.internetAccounts.filter(e=>"HTTPBasicInternetAccount"!==e.type):[],[h,g]=(0,u.useLocalStorage)("fileSelector-recentlyUsedInternetAccounts",[]),y=Object.fromEntries(f.map(e=>[e.internetAccountId,e])),b=[...new Set(f.map(e=>e.internetAccountId))].sort((e,t)=>h.indexOf(e)-h.indexOf(t)),w=b.slice(0,2),v=b.slice(2),[A,E]=(0,r.useState)(null),I=y[m],z=(0,r.useCallback)(e=>{c({...e,...I&&(0,N.C1)(e)?{internetAccountId:I.internetAccountId}:{}})},[c,I]);(0,r.useEffect)(()=>{I&&(0,N.C1)(n)&&n.internetAccountId!==I.internetAccountId&&z(n)},[n,I,z]);const U=t?D:$;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(k.A,{display:"flex",children:(0,d.jsx)(x.A,{shrink:!0,children:s})}),(0,d.jsxs)(M.A,{children:[(0,d.jsxs)(U,{children:[(0,d.jsxs)(T.A,{value:m,exclusive:!0,size:"small",onChange:(e,t)=>{g([...new Set([t,...h].filter(u.notEmpty))]),t&&p(t),(0,N.C1)(n)&&z(n)},"aria-label":"file, url, or account picker",children:[new URLSearchParams(window.location.search).get("adminKey")?null:(0,d.jsx)(C.A,{size:"small",value:"file","aria-label":"local file",children:"File"}),(0,d.jsx)(C.A,{size:"small",value:"url","aria-label":"url",children:"URL"}),w.map(e=>{const{internetAccountId:t,name:n,toggleContents:s}=y[e];return(0,d.jsx)(R,{value:t,title:n,children:"string"==typeof s?L(s,5):s||L(n,5)},e)}),v.length>0?(0,d.jsxs)(C.A,{onClick:e=>{E(e.target)},selected:!1,children:["More",(0,d.jsx)(S.A,{})]}):null]}),t?(0,d.jsx)(O,{...e,toggleButtonValue:m,selectedAccount:I,setLocation:z}):null]}),t?null:(0,d.jsx)(O,{...e,toggleButtonValue:m,selectedAccount:I,setLocation:z})]}),(0,d.jsx)(j.A,{children:o}),A?(0,d.jsx)(P.A,{open:!0,anchorEl:A,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},onClose:()=>{E(null)},children:v.map(e=>{const{internetAccountId:t,name:n}=y[e];return(0,d.jsx)(a.A,{value:t,onClick:()=>{g([...new Set([t,...h].filter(u.notEmpty))]),p(t),E(null)},children:n},e)})}):null]})});var U=n(37565),W=n(8463),B=n(18010);function _(e){return!!e}const F=function(e){const t=(0,v.c)(18),{width:n,height:s,highResolutionScaling:o,style:i,imageData:a,blockKey:c,showSoftClip:l}=e,u=void 0===o?1:o;let m;t[0]!==i?(m=void 0===i?{}:i,t[0]=i,t[1]=m):m=t[1];const p=m,[f,h]=(0,r.useState)(!1),g=(0,r.useRef)(null);let y,b;t[2]!==a?(y=()=>{if(!a)return;const e=g.current;if(!e)return;const t=e.getContext("2d");t&&((0,B.pv)(a,t),h(!0))},b=[a],t[2]=a,t[3]=y,t[4]=b):(y=t[3],b=t[4]),(0,r.useEffect)(y,b);const w=l?"softclipped":"",S=f?"done":"";let C;t[5]!==c||t[6]!==w||t[7]!==S?(C=["prerendered_canvas",w,c,S].filter(_),t[5]=c,t[6]=w,t[7]=S,t[8]=C):C=t[8];const A=C.join("_"),k=n*u,x=s*u;let M,T;return t[9]!==s||t[10]!==p||t[11]!==n?(M={width:n,height:s,...p},t[9]=s,t[10]=p,t[11]=n,t[12]=M):M=t[12],t[13]!==x||t[14]!==M||t[15]!==A||t[16]!==k?(T=(0,d.jsx)("canvas",{"data-testid":A,ref:g,width:k,height:x,style:M}),t[13]=x,t[14]=M,t[15]=A,t[16]=k,t[17]=T):T=t[17],T};var V=n(66684),H=n(58531),G=n(13476),q=n(9236);const J=28},68584:(e,t,n)=>{n.r(t),n.d(t,{ConfigurationReference:()=>s.A,ConfigurationSchema:()=>s.S,getConf:()=>o.FI,getTypeNamesFromExplicitlyTypedUnion:()=>o.JC,isBareConfigurationSchemaType:()=>o.C$,isConfigurationModel:()=>o.wo,isConfigurationSchemaType:()=>o.oG,isConfigurationSlotType:()=>o.Rg,readConfObject:()=>o.QZ});var s=n(42498),o=n(35254)},75397:(e,t,n)=>{n.r(t),n.d(t,{createJBrowseBaseTheme:()=>I,createJBrowseTheme:()=>N,defaultThemes:()=>P});var s=n(18457),o=n(27185),r=n(23040),i=n(93073),a=n(11918),c=n(32431),l=n(35068),u=n.n(l);const d=(0,s.A)(),m=d.palette.augmentColor({color:{main:"#0D233F"}}),p=d.palette.augmentColor({color:{main:"#721E63"}}),f=d.palette.augmentColor({color:{main:"#135560"}}),h=d.palette.augmentColor({color:{main:"#FFB11D"}}),g=d.palette.augmentColor({color:{main:"#aaa"}}),y={A:d.palette.augmentColor({color:i.A}),C:d.palette.augmentColor({color:r.A}),G:d.palette.augmentColor({color:a.A}),T:d.palette.augmentColor({color:o.A})},b=[null,d.palette.augmentColor({color:{main:"#FF8080"}}),d.palette.augmentColor({color:{main:"#80FF80"}}),d.palette.augmentColor({color:{main:"#8080FF"}}),d.palette.augmentColor({color:{main:"#8080FF"}}),d.palette.augmentColor({color:{main:"#80FF80"}}),d.palette.augmentColor({color:{main:"#FF8080"}})],w=[null,d.palette.augmentColor({color:{main:"#8f8f8f"}}),d.palette.augmentColor({color:{main:"#adadad"}}),d.palette.augmentColor({color:{main:"#d8d8d8"}}),d.palette.augmentColor({color:{main:"#d8d8d8"}}),d.palette.augmentColor({color:{main:"#adadad"}}),d.palette.augmentColor({color:{main:"#8f8f8f"}})],v="#e22",S="#3e3",C="#800080",A="#808080",k="#f00",x="#00f",M="#97b8c9",T={primary:m,secondary:p,tertiary:f,quaternary:h,highlight:h,stopCodon:v,startCodon:S,insertion:C,deletion:A,softclip:x,hardclip:k,bases:y,frames:w,framesCDS:b,skip:M};function j(){return{palette:{...T,mode:void 0},components:{MuiLink:{styleOverrides:{root:({theme:e})=>({color:e.palette.tertiary.main})}}}}}const P={default:{...j(),name:"Default (from config)"},lightStock:{...j(),name:"Light (stock)"},lightMinimal:{name:"Light (minimal)",palette:{...T,primary:{main:c.A[900]},secondary:{main:c.A[800]},tertiary:d.palette.augmentColor({color:{main:c.A[900]}})}},darkMinimal:{name:"Dark (minimal)",palette:{...T,mode:"dark",primary:{main:c.A[700]},secondary:{main:c.A[800]},tertiary:d.palette.augmentColor({color:{main:c.A[900]}})}},darkStock:{name:"Dark (stock)",palette:{...T,mode:"dark"},components:{MuiAppBar:{defaultProps:{enableColorOnDark:!0},styleOverrides:{root:({theme:e})=>e.palette.primary.main}}}}};function E(e,t){return t}function I(e){const t={palette:e?.palette,typography:{fontSize:12},spacing:4,components:{MuiTooltip:{styleOverrides:{tooltip:{fontSize:12}}},MuiButton:{defaultProps:{size:"small"},styleOverrides:{root:({theme:e})=>"dark"===e.palette.mode?{color:e.palette.text.primary}:void 0}},MuiAccordion:{defaultProps:{disableGutters:!0,slotProps:{transition:{timeout:150,unmountOnExit:!0}}}},MuiFilledInput:{defaultProps:{margin:"dense"}},MuiFormControl:{defaultProps:{margin:"dense",size:"small"}},MuiFormHelperText:{defaultProps:{margin:"dense"}},MuiIconButton:{defaultProps:{size:"small"}},MuiInputBase:{defaultProps:{margin:"dense"}},MuiAutocomplete:{defaultProps:{size:"small"}},MuiInputLabel:{defaultProps:{margin:"dense"}},MuiToolbar:{defaultProps:{variant:"dense"}},MuiListItem:{defaultProps:{dense:!0}},MuiOutlinedInput:{defaultProps:{margin:"dense"}},MuiFab:{defaultProps:{size:"small"},styleOverrides:{secondary:{backgroundColor:e?.palette?.quaternary?.main}}},MuiTable:{defaultProps:{size:"small"}},MuiPopover:{defaultProps:{transitionDuration:0}},MuiMenu:{defaultProps:{transitionDuration:0}},MuiMenuItem:{defaultProps:{dense:!0}},MuiTextField:{defaultProps:{margin:"dense",variant:"standard"}},MuiLink:{styleOverrides:{root:({theme:e})=>({color:e.palette.text.secondary})}},MuiCheckbox:{styleOverrides:{root:({theme:e})=>"dark"===e.palette.mode?{color:e.palette.text.secondary,"&.Mui-checked":{color:e.palette.text.secondary}}:void 0}},MuiRadio:{styleOverrides:{root:({theme:e})=>"dark"===e.palette.mode?{color:e.palette.text.secondary,"&.Mui-checked":{color:e.palette.text.secondary}}:void 0}},MuiFormLabel:{styleOverrides:{root:({theme:e})=>"dark"===e.palette.mode?{color:e.palette.text.secondary,"&.Mui-focused":{color:e.palette.text.secondary}}:void 0}},MuiAccordionSummary:{styleOverrides:{root:{backgroundColor:e?.palette?.tertiary?.main},content:{color:e?.palette?.tertiary?.contrastText}}},MuiToggleButtonGroup:{defaultProps:{size:"small"}}}};return u()(t,e||{},{arrayMerge:E})}function N(e={},t=P,n="default"){return(0,s.A)(I("default"===n?u()(t.default,R(e),{arrayMerge:E}):function(e={}){const{palette:t}=e;return R(u()(e,{palette:{quaternary:t?.quaternary||g,tertiary:t?.tertiary||g,highlight:t?.highlight||h,insertion:t?.insertion||C,softclip:t?.softclip||x,skip:t?.skip||M,hardclip:t?.hardclip||k,deletion:t?.deletion||A,startCodon:t?.startCodon||S,stopCodon:t?.stopCodon||v}}))}(t[n])))}function R(e={}){for(const t of["primary","secondary","tertiary","quaternary","highlight"])e.palette?.[t]&&(e=u()(e,{palette:{[t]:d.palette.augmentColor("color"in e.palette[t]?e.palette[t]:{color:e.palette[t]})}}));return e}},83567:(e,t,n)=>{n.d(t,{S:()=>c,X:()=>l});var s=n(99546),o=n(42489),r=n(36422),i=n(45858),a=n(32559);function c(e){return r.types.compose((0,i.DH)(e),(0,a.X)(e)).props({views:r.types.array(e.pluggableMstType("view","stateModel")),stickyViewHeaders:r.types.optional(r.types.boolean,()=>(0,s.localStorageGetBoolean)("stickyViewHeaders",!0))}).actions(t=>({moveViewDown(e){const n=t.views.findIndex(t=>t.id===e);-1!==n&&n<t.views.length-1&&t.views.splice(n,2,t.views[n+1],t.views[n])},moveViewUp(e){const n=t.views.findIndex(t=>t.id===e);n>0&&t.views.splice(n-1,2,t.views[n],t.views[n-1])},moveViewToTop(e){const n=t.views.findIndex(t=>t.id===e);t.views=(0,r.cast)([t.views[n],...t.views.filter(t=>t.id!==e)])},moveViewToBottom(e){const n=t.views.findIndex(t=>t.id===e);t.views=(0,r.cast)([...t.views.filter(t=>t.id!==e),t.views[n]])},addView(n,s={}){if(!e.getElementType("view",n))throw new Error(`unknown view type ${n}`);const o=t.views.push({...s,type:n});return t.views[o-1]},removeView(e){for(const[,n]of t.activeWidgets)n.view&&n.view.id===e.id&&t.hideWidget(n);t.views.remove(e)},setStickyViewHeaders(e){t.stickyViewHeaders=e},afterAttach(){(0,r.addDisposer)(t,(0,o.autorun)(()=>{(0,s.localStorageSetBoolean)("stickyViewHeaders",t.stickyViewHeaders)}))}}))}function l(e){return(0,i.qk)(e)&&"views"in e}},88373:(e,t,n)=>{n.d(t,{A:()=>m});var s=n(67758),o=n(7552),r=n(40085),i=n(61282),a=n(9790),c=n(51414),l=n(75785),u=n(69500);const d=(0,l.n9)()(e=>({input:{},inputBase:{},typography:{top:6,left:2,position:"absolute",whiteSpace:"nowrap",visibility:"hidden"},inputRoot:{padding:e.spacing(.5)},inputFocused:{borderStyle:"solid",borderWidth:2}})),m=(0,o.forwardRef)(function(e,t){const n=(0,s.c)(47);let l,m,p,f;n[0]!==e?(({value:p,setValue:m,variant:f,...l}=e),n[0]=e,n[1]=l,n[2]=m,n[3]=p,n[4]=f):(l=n[1],m=n[2],p=n[3],f=n[4]);const[h,g]=(0,r.A)(),{width:y}=g,[b,w]=(0,o.useState)(),[v,S]=(0,o.useState)(null),[C,A]=(0,o.useState)(!1);let k,x,M;n[5]!==C||n[6]!==v?(k=()=>{C&&(v?.blur(),A(!1))},x=[C,v],n[5]=C,n[6]=v,n[7]=k,n[8]=x):(k=n[7],x=n[8]),(0,o.useEffect)(k,x),n[9]!==e?(M={props:e},n[9]=e,n[10]=M):M=n[10];const{classes:T}=d(e,M),j=(0,c.A)(),P=void 0===b?p:b;let E,I,N,R,L,D,$,O,z,U,W;return n[11]===Symbol.for("react.memo_cache_sentinel")?(E={position:"relative"},n[11]=E):E=n[11],n[12]!==T.typography||n[13]!==h||n[14]!==P||n[15]!==f?(I=(0,u.jsx)("div",{style:E,children:(0,u.jsx)(i.A,{ref:h,component:"span",variant:f,className:T.typography,children:P})}),n[12]=T.typography,n[13]=h,n[14]=P,n[15]=f,n[16]=I):I=n[16],n[17]===Symbol.for("react.memo_cache_sentinel")?(N=e=>{S(e)},n[17]=N):N=n[17],n[18]!==j||n[19]!==f?(R=f&&"inherit"!==f?j.typography[f]:{},n[18]=j,n[19]=f,n[20]=R):R=n[20],n[21]!==R||n[22]!==y?(L={style:{width:y,...R}},n[21]=R,n[22]=y,n[23]=L):L=n[23],n[24]!==T.input||n[25]!==T.inputFocused||n[26]!==T.inputRoot?(D={input:T.input,root:T.inputRoot,focused:T.inputFocused},n[24]=T.input,n[25]=T.inputFocused,n[26]=T.inputRoot,n[27]=D):D=n[27],n[28]===Symbol.for("react.memo_cache_sentinel")?($=e=>{w(e.target.value)},n[28]=$):$=n[28],n[29]!==v?(O=e=>{"Enter"===e.key?v?.blur():"Escape"===e.key&&(w(void 0),A(!0))},n[29]=v,n[30]=O):O=n[30],n[31]!==b||n[32]!==m||n[33]!==p?(z=()=>{m(b||p||""),w(void 0)},n[31]=b,n[32]=m,n[33]=p,n[34]=z):z=n[34],n[35]!==T.inputBase||n[36]!==O||n[37]!==z||n[38]!==L||n[39]!==D||n[40]!==P?(U=(0,u.jsx)(a.Ay,{inputRef:N,className:T.inputBase,inputProps:L,classes:D,value:P,onChange:$,onKeyDown:O,onBlur:z}),n[35]=T.inputBase,n[36]=O,n[37]=z,n[38]=L,n[39]=D,n[40]=P,n[41]=U):U=n[41],n[42]!==l||n[43]!==t||n[44]!==U||n[45]!==I?(W=(0,u.jsxs)("div",{...l,ref:t,children:[I,U]}),n[42]=l,n[43]=t,n[44]=U,n[45]=I,n[46]=W):W=n[46],W})},90542:(e,t,n)=>{n.d(t,{A8:()=>l,jT:()=>i,uB:()=>c,xU:()=>a});var s=n(67758),o=n(94874),r=n(69500);function i(e){const t=(0,s.c)(3);let n,i;return t[0]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)("path",{d:"M19.31 18.9L22.39 22L21 23.39L17.88 20.32C17.19 20.75 16.37 21 15.5 21C13 21 11 19 11 16.5C11 14 13 12 15.5 12C18 12 20 14 20 16.5C20 17.38 19.75 18.21 19.31 18.9M15.5 19C16.88 19 18 17.88 18 16.5C18 15.12 16.88 14 15.5 14C14.12 14 13 15.12 13 16.5C13 17.88 14.12 19 15.5 19M21 4V6H3V4H21M3 16V14H9V16H3M3 11V9H21V11H18.97C17.96 10.37 16.77 10 15.5 10C14.23 10 13.04 10.37 12.03 11H3Z"}),t[0]=n):n=t[0],t[1]!==e?(i=(0,r.jsx)(o.A,{...e,children:n}),t[1]=e,t[2]=i):i=t[2],i}function a(e){const t=(0,s.c)(3);let n,i;return t[0]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)("path",{d:"M21 19v-2H8v2h13m0-6v-2H8v2h13M8 7h13V5H8v2M4 5v2h2V5H4M3 5a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V5m1 6v2h2v-2H4m-1 0a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1v-2m1 6v2h2v-2H4m-1 0a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1v-2z"}),t[0]=n):n=t[0],t[1]!==e?(i=(0,r.jsx)(o.A,{...e,children:n}),t[1]=e,t[2]=i):i=t[2],i}function c(e){const t=(0,s.c)(3);let n,i;return t[0]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)("path",{fill:"currentColor",d:"M4,2H6V4C6,5.44 6.68,6.61 7.88,7.78C8.74,8.61 9.89,9.41 11.09,10.2L9.26,11.39C8.27,10.72 7.31,10 6.5,9.21C5.07,7.82 4,6.1 4,4V2M18,2H20V4C20,6.1 18.93,7.82 17.5,9.21C16.09,10.59 14.29,11.73 12.54,12.84C10.79,13.96 9.09,15.05 7.88,16.22C6.68,17.39 6,18.56 6,20V22H4V20C4,17.9 5.07,16.18 6.5,14.79C7.91,13.41 9.71,12.27 11.46,11.16C13.21,10.04 14.91,8.95 16.12,7.78C17.32,6.61 18,5.44 18,4V2M14.74,12.61C15.73,13.28 16.69,14 17.5,14.79C18.93,16.18 20,17.9 20,20V22H18V20C18,18.56 17.32,17.39 16.12,16.22C15.26,15.39 14.11,14.59 12.91,13.8L14.74,12.61M7,3H17V4L16.94,4.5H7.06L7,4V3M7.68,6H16.32C16.08,6.34 15.8,6.69 15.42,7.06L14.91,7.5H9.07L8.58,7.06C8.2,6.69 7.92,6.34 7.68,6M9.09,16.5H14.93L15.42,16.94C15.8,17.31 16.08,17.66 16.32,18H7.68C7.92,17.66 8.2,17.31 8.58,16.94L9.09,16.5M7.06,19.5H16.94L17,20V21H7V20L7.06,19.5Z"}),t[0]=n):n=t[0],t[1]!==e?(i=(0,r.jsx)(o.A,{...e,children:n}),t[1]=e,t[2]=i):i=t[2],i}function l(e){const t=(0,s.c)(3);let n,i;return t[0]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsx)("path",{d:"M20 5V4c0-.55-.45-1-1-1h-2c-.55 0-1 .45-1 1v1h-1v4c0 .55.45 1 1 1h1v7c0 1.1-.9 2-2 2s-2-.9-2-2V7c0-2.21-1.79-4-4-4S5 4.79 5 7v7H4c-.55 0-1 .45-1 1v4h1v1c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-1h1v-4c0-.55-.45-1-1-1H7V7c0-1.1.9-2 2-2s2 .9 2 2v10c0 2.21 1.79 4 4 4s4-1.79 4-4v-7h1c.55 0 1-.45 1-1V5h-1z"}),t[0]=n):n=t[0],t[1]!==e?(i=(0,r.jsx)(o.A,{...e,children:n}),t[1]=e,t[2]=i):i=t[2],i}},91468:(e,t,n)=>{n.r(t),n.d(t,{UNKNOWN:()=>u,UNSUPPORTED:()=>d,generateUnknownTrackConf:()=>k,generateUnsupportedTrackConf:()=>A,getBlob:()=>p,getBlobMap:()=>f,getConfAssemblyNames:()=>a,getFileName:()=>v,getParentRenderProps:()=>l,getRpcSessionId:()=>c,getTrackAssemblyNames:()=>i,getTrackName:()=>x,guessAdapter:()=>S,guessTrackType:()=>C,makeIndex:()=>b,makeIndexType:()=>w,setBlobMap:()=>h,storeBlobLocation:()=>y});var s=n(36422),o=n(99546),r=n(68584);function i(e){return a(e.configuration)}function a(e){const t=(0,r.readConfObject)(e,"assemblyNames");if(!t){const t=(0,s.getParent)(e);if("sequence"in t)return[(0,r.readConfObject)(t,"name")];throw new Error("unknown assembly names")}return t}function c(e){let t;for(let n=e;!(0,s.isRoot)(n);n=(0,s.getParent)(n))"rpcSessionId"in n&&(t=n.rpcSessionId);if(!t)throw new Error("getRpcSessionId failed, no parent node in the state tree has an `rpcSessionId` attribute");return t}function l(e){for(let t=(0,s.getParent)(e);!(0,s.isRoot)(t);t=(0,s.getParent)(t))if("renderProps"in t)return t.renderProps();return{}}const u="UNKNOWN",d="UNSUPPORTED";let m={};function p(e){return m[e]}function f(){return m}function h(e){m=e}let g=0;function y(e){if("blob"in e){const t=`b${+Date.now()}-${g++}`;return m[t]=e.blob,{name:e.blob.name,blobId:t,locationType:"BlobLocation"}}return e}function b(e,t){return"uri"in e?{uri:e.uri+t,locationType:"UriLocation"}:"localPath"in e?{localPath:e.localPath+t,locationType:"LocalPathLocation"}:e}function w(e,t,n){return e?.toUpperCase().endsWith(t)?t:n}function v(e){const t="uri"in e?e.uri:void 0,n="localPath"in e?e.localPath:void 0,s="blobId"in e?e:void 0;return s?.name||t?.slice(t.lastIndexOf("/")+1)||n?.slice(n.replace(/\\/g,"/").lastIndexOf("/")+1)||""}function S(e,t,n,s){if(s){const{pluginManager:r}=(0,o.getEnv)(s),i=r.evaluateExtensionPoint("Core-guessAdapterForLocation",(e,t,n)=>{})(e,t,n);if(i)return i}return{type:u}}function C(e,t){if(t){const n=(0,o.getSession)(t),s=(0,o.getEnv)(n).pluginManager.evaluateExtensionPoint("Core-guessTrackTypeForLocation",e=>{})(e);if(s)return s}return"FeatureTrack"}function A(e,t,n){const s={type:"FeatureTrack",name:`${e} (Unsupported)`,description:`Support not yet implemented for "${t}"`,category:n,trackId:""};return s.trackId=(0,o.objectHash)(s),s}function k(e,t,n){const s={type:"FeatureTrack",name:`${e} (Unknown)`,description:`Could not determine track type for "${t}"`,category:n,trackId:""};return s.trackId=(0,o.objectHash)(s),s}function x(e,t){const n=(0,r.readConfObject)(e,"name");if(!n&&"ReferenceSequenceTrack"===(0,r.readConfObject)(e,"type")){const n=t.assemblies.find(t=>t.sequence===e);return n?`Reference sequence (${(0,r.readConfObject)(n,"displayName")||(0,r.readConfObject)(n,"name")})`:"Reference sequence"}return n}},92562:(e,t,n)=>{n.d(t,{A:()=>C});var s=n(67758),o=n(7552),r=n(57468),i=n(84340),a=n(48768),c=n(87626),l=n(59130),u=n(89870),d=n(41450),m=n(18457),p=n(51414),f=n(91063),h=n(68446),g=n(75785),y=n(38033),b=n(13476),w=n(69500);const v=(0,g.n9)()(e=>({closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},errorBox:{width:800,margin:40}}));function S(e){const t=(0,s.c)(5),{error:n}=e,{classes:o}=v();let r,i;return t[0]!==n?(r=(0,w.jsx)(y.A,{error:n}),t[0]=n,t[1]=r):r=t[1],t[2]!==o.errorBox||t[3]!==r?(i=(0,w.jsx)("div",{className:o.errorBox,children:r}),t[2]=o.errorBox,t[3]=r,t[4]=i):i=t[4],i}const C=(0,h.observer)(function(e){const{classes:t}=v(),{titleNode:n,...s}=e,{title:h,header:g,children:y,onClose:C}=s,A=(0,p.A)();return(0,w.jsx)(a.A,{...s,children:(0,w.jsxs)(c.A,{children:[(0,o.isValidElement)(g)?g:(0,w.jsxs)(l.A,{children:[n||(0,w.jsx)(b.A,{html:h||""}),C?(0,w.jsx)(u.A,{className:t.closeButton,onClick:()=>{C()},children:(0,w.jsx)(i.A,{})}):null]}),(0,w.jsx)(d.A,{}),(0,w.jsx)(r.t,{FallbackComponent:S,children:(0,w.jsx)(f.A,{theme:(0,m.A)(A,{components:{MuiInputBase:{styleOverrides:{input:{boxSizing:"content-box!important"}}}}}),children:y})})]})})})},99546:(e,t,n)=>{n.r(t),n.d(t,{AuthNeededError:()=>m._u,ImageBitmapType:()=>g.bV,ReactRendering:()=>y.aE,RetryError:()=>m.J_,SimpleFeature:()=>b.A,TextSearchManager:()=>m.rz,abortBreakPoint:()=>S.Yo,assembleLocString:()=>N,assembleLocStringFast:()=>R,avg:()=>Be,blobToDataURL:()=>w.y,bpSpanPx:()=>q,bpToPx:()=>U,bytesForRegions:()=>ve,cartesianToPolar:()=>H,checkAbortSignal:()=>S.pB,clamp:()=>z,coarseStripHTML:()=>Ne,compareLocStrings:()=>O,compareLocs:()=>$,complement:()=>ae,complementTable:()=>oe,createCanvas:()=>g.Nw,createImageBitmap:()=>g.T9,dedupe:()=>h.Q,defaultCodonTable:()=>fe,defaultStarts:()=>me,defaultStops:()=>pe,degToRad:()=>F,doesIntersect2:()=>f.R6,drawImageOntoCanvasContext:()=>g.pv,featureSpanPx:()=>G,fetchAndMaybeUnzip:()=>Ye,fetchAndMaybeUnzipText:()=>Ze,findLast:()=>K,findLastIndex:()=>Q,findParentThat:()=>x,findParentThatIs:()=>T,forEachWithStopTokenCheck:()=>st,gatherOverlaps:()=>He,generateCodonTable:()=>he,getBpDisplayStr:()=>Ce,getContainingDisplay:()=>I,getContainingTrack:()=>E,getContainingView:()=>P,getEnv:()=>De,getFillProps:()=>Je,getFrame:()=>de,getLayoutId:()=>je,getProgressDisplayStr:()=>ke,getSerializedSvg:()=>y.Jy,getSession:()=>j,getStr:()=>Ie,getStrokeProps:()=>qe,getTickDisplayStr:()=>Me,getUriLink:()=>Ee,getViewParams:()=>Te,groupBy:()=>_e,hashCode:()=>be,intersection2:()=>f.ky,isAbortException:()=>S.Kp,isAbstractMenuManager:()=>m.Nh,isAppRootModel:()=>m.bV,isAuthNeededException:()=>m.ZL,isBlobLocation:()=>m.rF,isContainedWithin:()=>f.Xx,isDisplayModel:()=>m.Uy,isElectron:()=>se,isFeature:()=>b.l,isGzip:()=>Ke,isLocalPathLocation:()=>m.EV,isObject:()=>Xe,isRetryException:()=>m.yH,isRootModelWithInternetAccounts:()=>m.lL,isSelectionContainer:()=>m.mY,isSessionModel:()=>m.Y$,isSessionModelWithConfigEditing:()=>m.u3,isSessionModelWithConnectionEditing:()=>m.gx,isSessionModelWithConnections:()=>m.BY,isSessionModelWithWidgets:()=>m.lO,isSessionWithAddTracks:()=>m.QW,isSessionWithSessionPlugins:()=>m.zA,isSessionWithShareURL:()=>m.xv,isSupportedIndexingAdapter:()=>Se,isTrackModel:()=>m.xU,isTrackViewModel:()=>m.EO,isUriLocation:()=>m.C1,isViewContainer:()=>m.DW,isViewModel:()=>m.Tl,iterMap:()=>J,linkify:()=>Re,localStorageGetBoolean:()=>tt,localStorageGetItem:()=>$e,localStorageGetNumber:()=>et,localStorageSetBoolean:()=>nt,localStorageSetItem:()=>Oe,makeAbortError:()=>S.zm,makeAbortableReaction:()=>v.I,max:()=>ze,measureGridWidth:()=>Le,measureText:()=>ue,mergeIntervals:()=>Ve,min:()=>Ue,minmax:()=>X,notEmpty:()=>Fe,objectHash:()=>we,observeAbortSignal:()=>S.R1,parseLocString:()=>D,parseLocStringOneBased:()=>L,polarToCartesian:()=>V,rIC:()=>ce,radToDeg:()=>_,renameRegionIfNeeded:()=>Y,renameRegionsIfNeeded:()=>Z,renderToAbstractCanvas:()=>y.u1,renderToStaticMarkup:()=>Qe,revcom:()=>re,reverse:()=>ie,shorten:()=>ee,shorten2:()=>te,springAnimate:()=>M,stringify:()=>ne,stripAlpha:()=>Ge,sum:()=>We,testAdapter:()=>ot,toLocale:()=>xe,updateStatus:()=>ge,updateStatus2:()=>ye,useDebounce:()=>C,useDebouncedCallback:()=>k,useLocalStorage:()=>Pe,useWidthSetter:()=>A,when:()=>p.z});var s=n(67758),o=n(7552),r=n(86346),i=n(40085),a=n(36422),c=n(28485),l=n(81886),u=n(87485),d=n(37347),m=n(92516),p=n(1864),f=n(32595),h=n(3519),g=n(18010),y=n(98506),b=n(6434),w=n(31673),v=n(56133),S=n(20166);function C(e,t){const n=(0,s.c)(4),[r,i]=(0,o.useState)(e);let a,c;return n[0]!==t||n[1]!==e?(a=()=>{const n=setTimeout(()=>{i(e)},t);return()=>{clearTimeout(n)}},c=[e,t],n[0]=t,n[1]=e,n[2]=a,n[3]=c):(a=n[2],c=n[3]),(0,o.useEffect)(a,c),r}function A(e,t){const n=(0,s.c)(5),[r,c]=(0,i.A)(),{width:l}=c;let u,d;return n[0]!==t||n[1]!==e||n[2]!==l?(u=()=>{l&&(0,a.isAlive)(e)&&requestAnimationFrame(()=>{e.setWidth(l-2*Number.parseInt(t,10))})},d=[t,e,l],n[0]=t,n[1]=e,n[2]=l,n[3]=u,n[4]=d):(u=n[3],d=n[4]),(0,o.useEffect)(u,d),r}function k(e,t){const n=(0,s.c)(5),r=void 0===t?400:t,i=(0,o.useRef)(null),a=(0,o.useRef)(null);let c,l,u;return n[0]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{a.current&&clearTimeout(a.current)},l=[],n[0]=c,n[1]=l):(c=n[0],l=n[1]),(0,o.useEffect)(c,l),n[2]!==e||n[3]!==r?(u=function(...t){const n=t;i.current=n,a.current&&clearTimeout(a.current),a.current=setTimeout(()=>{i.current&&e(...i.current)},r)},n[2]=e,n[3]=r,n[4]=u):u=n[4],u}function x(e,t){if(!(0,a.hasParent)(e))throw new Error("node does not have parent");let n=(0,a.getParent)(e);for(;n&&(0,a.isAlive)(n);){if(t(n))return n;if(!(0,a.hasParent)(n))break;n=(0,a.getParent)(n)}throw new Error("no matching node found")}function M(e,t,n,s=()=>{},o=0,r=400,i=20,a=!0){let c;function l(u){const d=Date.now();let m=u.lastPosition,p=u.lastTime||d,f=u.lastVelocity||0;d>p+64&&(p=d);const h=Math.floor(d-p);for(let e=0;e<h;++e)f+=(-r*(m-t)+-i*f)/1*1/1e3,m+=1*f/1e3;const g=Math.abs(f)<=o,y=0===r||Math.abs(t-m)<=o;a&&0!==r&&(e<t?m>t:m<t)||g&&y?(n(t),s()):(n(m),c=requestAnimationFrame(()=>{l({lastPosition:m,lastTime:d,lastVelocity:f})}))}return o||(o=Math.abs(t-e)/1e3),[()=>{l({lastPosition:e})},()=>{cancelAnimationFrame(c)}]}function T(e,t){return x(e,t)}function j(e){try{return T(e,m.Y$)}catch(e){throw new Error("no session model found!")}}function P(e){try{return T(e,m.Tl)}catch(e){throw new Error("no containing view found")}}function E(e){try{return T(e,m.xU)}catch(e){throw new Error("no containing track found")}}function I(e){try{return T(e,m.Uy)}catch(e){throw new Error("no containing display found")}}function N(e){return R(e,xe)}function R(e,t=e=>e){const{assemblyName:n,refName:s,start:o,end:r,reversed:i}=e,a=n?`{${n}}`:"";let c,l;c=void 0!==o?`:${t(o+1)}`:void 0!==r?":1":"",l=void 0!==r?void 0!==o&&o+1===r?"":`..${t(r)}`:void 0!==o?"..":"";let u="";return i&&(u="[rev]"),`${a}${s}${c}${l}${u}`}function L(e,t){if(!e)throw new Error("no location string provided, could not parse");let n=!1;e.endsWith("[rev]")&&(n=!0,e=e.replace(/\[rev]$/,"")),e=e.replace(/\s/,"");const s=/({(.+)})?(.+)/.exec(e);if(!s)throw new Error(`invalid location string: "${e}"`);const[,,o,r]=s,i=o,a=r;if(!i&&a.startsWith("{}"))throw new Error(`no assembly name was provided in location "${a}"`);const c=a.lastIndexOf(":");if(-1===c){if(t(a,i))return{assemblyName:i,refName:a,reversed:n};throw new Error(`Unknown reference sequence "${a}"`)}const l=a.slice(0,c),u=a.slice(c+1);if(t(l,i)&&t(a,i))throw new Error(`ambiguous location string: "${e}"`);if(t(l,i)){if(!u)return{assemblyName:i,refName:l,reversed:n};{const t=/^(-?(\d+|\d{1,3}(,\d{3})*))(\.\.|-)(-?(\d+|\d{1,3}(,\d{3})*))$/.exec(u),s=/^(-?(\d+|\d{1,3}(,\d{3})*))(\.\.|-)?$/.exec(u);if(t){const[,e,,,,s]=t;if(void 0!==e&&void 0!==s)return{assemblyName:i,refName:l,start:+e.replaceAll(",",""),end:+s.replaceAll(",",""),reversed:n}}else{if(!s)throw new Error(`could not parse range "${u}" on location "${e}"`);{const[,e,,,t]=s;if(void 0!==e)return t?{assemblyName:i,refName:l,start:+e.replaceAll(",",""),reversed:n}:{assemblyName:i,refName:l,start:+e.replaceAll(",",""),end:+e.replaceAll(",",""),reversed:n}}}}}else if(t(a,i))return{assemblyName:i,refName:a,reversed:n};throw new Error(`unknown reference sequence name in location "${e}"`)}function D(e,t){const n=L(e,t);return"number"==typeof n.start&&(n.start-=1),n}function $(e,t){const n=e.assemblyName||t.assemblyName?(e.assemblyName||"").localeCompare(t.assemblyName||""):0;if(n)return n;const s=e.refName||t.refName?(e.refName||"").localeCompare(t.refName||""):0;if(s)return s;if(void 0!==e.start&&void 0!==t.start){const n=e.start-t.start;if(n)return n}if(void 0!==e.end&&void 0!==t.end){const n=e.end-t.end;if(n)return n}return 0}function O(e,t,n){return $(D(e,n),D(t,n))}function z(e,t,n){return e<t?t:e>n?n:e}function U(e,{reversed:t,end:n=0,start:s=0},o){return r=(t?n-e:e-s)/o,Math.round(10*r)/10;var r}const W=180/Math.PI,B=Math.PI/180;function _(e){return e*W%360}function F(e){return e*B%(2*Math.PI)}function V(e,t){return[e*Math.cos(t),e*Math.sin(t)]}function H(e,t){return[Math.sqrt(e*e+t*t),Math.atan(t/e)]}function G(e,t,n){return q(e.get("start"),e.get("end"),t,n)}function q(e,t,n,s){const o=U(e,n,s),r=U(t,n,s);return n.reversed?[r,o]:[o,r]}function J(e,t,n){const s=Array.from({length:n||0});let o=0;for(const n of e)s[o]=t(n),o+=1;return s}function Q(e,t){let n=e.length;for(;n--;)if(t(e[n],n,e))return n;return-1}function K(e,t){let n=e.length;for(;n--;)if(t(e[n],n,e))return e[n]}function Y(e,t){if((0,a.isStateTreeNode)(t)&&!(0,a.isAlive)(t))return t;if(e?.[t.refName]){const n=e[(t=(0,a.isStateTreeNode)(t)?{...(0,a.getSnapshot)(t)}:{...t}).refName];if(n)return{...t,refName:n,originalRefName:t.refName}}return t}async function Z(e,t){const{regions:n=[],adapterConfig:s}=t;if(!t.sessionId)throw new Error("sessionId is required");const o=n.map(e=>e.assemblyName),r=Object.fromEntries(await Promise.all([...new Set(o)].map(async n=>[n,await e.getRefNameMapForAdapter(s,n,t)])));return{...t,regions:n.map((e,t)=>Y(r[o[t]],e))}}function X(e,t){return[Math.min(e,t),Math.max(e,t)]}function ee(e,t=70,n=30){return e.length>t?`${e.slice(0,n)}...${e.slice(-n)}`:e}function te(e,t=70){return e.length>t?`${e.slice(0,t)}...`:e}function ne({refName:e,coord:t,assemblyName:n,oob:s},o){return[n&&o?`{${n}}`:"",e?`${ee(e)}:${xe(t)}${s?" (out of bounds)":""}`:""].join("")}const se=/electron/i.test("undefined"!=typeof navigator?navigator.userAgent:""),oe={S:"S",w:"w",T:"A",r:"y",a:"t",N:"N",K:"M",x:"x",d:"h",Y:"R",V:"B",y:"r",M:"K",h:"d",k:"m",C:"G",g:"c",t:"a",A:"T",n:"n",W:"W",X:"X",m:"k",v:"b",B:"V",s:"s",H:"D",c:"g",D:"H",b:"v",R:"Y",G:"C"};function re(e){let t="";for(let n=e.length-1;n>=0;n--)t+=oe[e[n]]??e[n];return t}function ie(e){let t="";for(let n=e.length-1;n>=0;n--)t+=e[n];return t}function ae(e){let t="";for(const n of e)t+=oe[n]??n;return t}const ce="undefined"==typeof jest?"undefined"!=typeof window&&window.requestIdleCallback?window.requestIdleCallback:e=>setTimeout(()=>{e()},1):e=>{e()},le=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2796875,.2765625,.3546875,.5546875,.5546875,.8890625,.665625,.190625,.3328125,.3328125,.3890625,.5828125,.2765625,.3328125,.2765625,.3015625,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.2765625,.2765625,.584375,.5828125,.584375,.5546875,1.0140625,.665625,.665625,.721875,.721875,.665625,.609375,.7765625,.721875,.2765625,.5,.665625,.5546875,.8328125,.721875,.7765625,.665625,.7765625,.721875,.665625,.609375,.721875,.665625,.94375,.665625,.665625,.609375,.2765625,.3546875,.2765625,.4765625,.5546875,.3328125,.5546875,.5546875,.5,.5546875,.5546875,.2765625,.5546875,.5546875,.221875,.240625,.5,.221875,.8328125,.5546875,.5546875,.5546875,.5546875,.3328125,.5,.2765625,.5546875,.5,.721875,.5,.5,.5,.3546875,.259375,.353125,.5890625];function ue(e,t=10){const n=String(e);let s=0;for(let e=0;e<n.length;e++){const t=n.charCodeAt(e);s+=le[t]??.5279276315789471}return s*t}function de(e,t,n,s){return 1===n?(e+s)%3+1:(t-s)%3*-1-1}const me=["ATG"],pe=["TAA","TAG","TGA"],fe={TCA:"S",TCC:"S",TCG:"S",TCT:"S",TTC:"F",TTT:"F",TTA:"L",TTG:"L",TAC:"Y",TAT:"Y",TAA:"*",TAG:"*",TGC:"C",TGT:"C",TGA:"*",TGG:"W",CTA:"L",CTC:"L",CTG:"L",CTT:"L",CCA:"P",CCC:"P",CCG:"P",CCT:"P",CAC:"H",CAT:"H",CAA:"Q",CAG:"Q",CGA:"R",CGC:"R",CGG:"R",CGT:"R",ATA:"I",ATC:"I",ATT:"I",ATG:"M",ACA:"T",ACC:"T",ACG:"T",ACT:"T",AAC:"N",AAT:"N",AAA:"K",AAG:"K",AGC:"S",AGT:"S",AGA:"R",AGG:"R",GTA:"V",GTC:"V",GTG:"V",GTT:"V",GCA:"A",GCC:"A",GCG:"A",GCT:"A",GAC:"D",GAT:"D",GAA:"E",GAG:"E",GGA:"G",GGC:"G",GGG:"G",GGT:"G"};function he(e){const t={};for(const n of Object.keys(e)){const s=e[n],o=[];for(let e=0;e<3;e++){const t=n.charAt(e);o[e]=[],o[e][0]=t.toUpperCase(),o[e][1]=t.toLowerCase()}for(let e=0;e<2;e++){const n=o[0][e];for(let e=0;e<2;e++){const r=o[1][e];for(let e=0;e<2;e++)t[n+r+o[2][e]]=s}}}return t}async function ge(e,t,n){t(e);const s=await n();return t(""),s}async function ye(e,t,n,s){t(e);const o=await s();return(0,d.SW)(n),t(""),o}function be(e){let t=0;if(0===e.length)return t;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t}function we(e){return`${be(JSON.stringify(e))}`}async function ve(e,t){const n=await Promise.all(e.map(e=>t.blocksForRange(e.refName,e.start,e.end)));return n.flat().map(e=>({start:e.minv.blockPosition,end:e.maxv.blockPosition+65535})).reduce((e,t)=>e+t.end-t.start,0)}function Se(e=""){return["Gff3TabixAdapter","VcfTabixAdapter","Gff3Adapter","VcfAdapter"].includes(e)}function Ce(e){return Math.floor(e/1e6)>0?`${Ae(e/1e6)}Mbp`:Math.floor(e/1e3)>0?`${Ae(e/1e3)}Kbp`:`${Math.floor(e)}bp`}function Ae(e){return xe(Number.parseFloat(e.toPrecision(3)))}function ke(e,t){return Math.floor(t/1e6)>0?`${Ae(e/1e6)}/${Ae(t/1e6)}Mb`:Math.floor(t/1e3)>0?`${Ae(e/1e3)}/${Ae(t/1e3)}Kb`:`${Ae(e)}/${Ae(t)}}bytes`}function xe(e){return e.toLocaleString("en-US")}function Me(e,t){return Math.floor(t/1e3)>0?`${xe(Number.parseFloat((e/1e6).toFixed(2)))}M`:xe(Math.floor(e))}function Te(e,t){const{dynamicBlocks:n,staticBlocks:s,offsetPx:o}=P(e),r=n?.contentBlocks[0]||{},i=s?.contentBlocks[0]||{},a=s?.contentBlocks[1]||{};return{offsetPx:t?0:o-i.offsetPx,offsetPx1:t?0:o-a.offsetPx,start:r.start,end:r.end}}function je({sessionId:e,layoutId:t}){return`${e}-${t}`}function Pe(e,t){const[n,s]=(0,o.useState)(()=>{if("undefined"==typeof window)return t;try{const n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(e){return console.error(e),t}});return[n,t=>{try{const o=t instanceof Function?t(n):t;s(o),"undefined"!=typeof window&&window.localStorage.setItem(e,JSON.stringify(o))}catch(e){console.error(e)}}]}function Ee(e){const{uri:t,baseUri:n=""}=e;let s;try{s=new URL(t,n).href}catch(e){s=t}return s}function Ie(e){return Xe(e)?(0,m.C1)(e)?Ee(e):JSON.stringify(e):String(e)}function Ne(e){return e.replaceAll(/(<([^>]+)>)/gi,"")}function Re(e){return e.replaceAll(/(^|[\s\n]|<[A-Za-z]*\/?>)((?:https?|ftp):\/\/[-A-Z0-9+\u0026\u2019@#/%?=()~_|!:,.;]*[-A-Z0-9+\u0026@#/%=~()_|])/gi,"$1<a href='$2' target=\"_blank\">$2</a>")}function Le(e,t){const{padding:n=30,minWidth:s=80,fontSize:o=12,maxWidth:r=1e3,stripHTML:i=!1}=t||{};return ze(e.map(e=>Ie(e)).map(e=>i?Ne(e):e).map(e=>ue(e,o)).map(e=>Math.min(Math.max(e+n,s),r)))}function De(e){return(0,a.getEnv)(e)}function $e(e){return"undefined"!=typeof localStorage?localStorage.getItem(e):void 0}function Oe(e,t){"undefined"!=typeof localStorage&&localStorage.setItem(e,t)}function ze(e,t=Number.NEGATIVE_INFINITY){let n=t;for(const t of e)n=Math.max(t,n);return n}function Ue(e,t=Number.POSITIVE_INFINITY){let n=t;for(const t of e)n=Math.min(t,n);return n}function We(e){let t=0;for(const n of e)t+=n;return t}function Be(e){return We(e)/e.length}function _e(e,t){const n={};for(const s of e){const e=t(s);n[e]||(n[e]=[]),n[e].push(s)}return n}function Fe(e){return null!=e}function Ve(e,t=5e3){if(e.length<=1)return e;const n=[];let s=null;e=e.sort((e,t)=>e.start-t.start),n.push(e[0]);for(let o=1;o<e.length;o++)s=n.at(-1),s.end+t<e[o].start-t?n.push(e[o]):s.end<e[o].end&&(s.end=Math.max(s.end,e[o].end),n.pop(),n.push(s));return n}function He(e,t=5e3){const n={};for(const t of e)n[t.refName]||(n[t.refName]=[]),n[t.refName].push(t);return Object.values(n).flatMap(e=>Ve(e.sort((e,t)=>e.start-t.start),t))}function Ge(e){return(0,u.M)(e).alpha(1).toHex()}function qe(e){if(e){const t=(0,u.M)(e);return{strokeOpacity:t.alpha(),stroke:t.alpha(1).toHex()}}return{}}function Je(e){if(e){const t=(0,u.M)(e);return{fillOpacity:t.alpha(),fill:t.alpha(1).toHex()}}return{}}function Qe(e){const t=document.createElement("div");return(0,c.flushSync)(()=>{(0,l.createRoot)(t).render(e)}),t.innerHTML.replaceAll(/\brgba\((.+?),[^,]+?\)/g,"rgb($1)")}function Ke(e){return 31===e[0]&&139===e[1]&&8===e[2]}async function Ye(e,t={}){const{statusCallback:n=()=>{}}=t,s=await ge("Downloading file",n,()=>e.readFile(t));return Ke(s)?await ge("Unzipping",n,()=>(0,r.$1)(s)):s}async function Ze(e,t){const n=await Ye(e,t);if(n.length>536870888)throw new Error("Data exceeds maximum string length (512MB)");return new TextDecoder("utf8",{fatal:!0}).decode(n)}function Xe(e){return"object"==typeof e&&null!==e}function et(e,t){return+($e(e)??t)}function tt(e,t){return Boolean(JSON.parse($e(e)||JSON.stringify(t)))}function nt(e,t){Oe(e,JSON.stringify(t))}function st(e,t,n,s=400){let o=performance.now(),r=0;for(const i of e)performance.now()-o>s&&((0,d.SW)(t),o=performance.now()),n(i,r++)}function ot(e,t,n,s){return t.test(e)&&!n||n===s}}}]);
//# sourceMappingURL=9691.529bf639.chunk.js.map