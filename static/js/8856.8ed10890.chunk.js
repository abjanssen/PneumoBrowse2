"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[8856],{28856:(e,i,t)=>{t.d(i,{doAfterAttach:()=>g});var n=t(99546),a=t(95095),s=t(16062),o=t(42489),d=t(36422),r=t(30385);function g(e){(0,d.addDisposer)(e,(0,o.autorun)(()=>{const i=(0,n.getContainingView)(e);if(!i.initialized||!i.views.every(e=>e.displayedRegions.length>0&&e.initialized))return;const t=e.mainCanvas?.getContext("2d"),a=e.cigarClickMapCanvas?.getContext("2d");if(!t||!a)return;const{alpha:s}=e,o=e.height,d=i.width;t.clearRect(0,0,d,o),(0,r.Ww)(e,t),(0,r.Td)(e,a)})),(0,d.addDisposer)(e,(0,o.autorun)(()=>{const i=(0,n.getContainingView)(e);if(!i.initialized||!i.views.every(e=>e.displayedRegions.length>0&&e.initialized))return;const{clickId:t,mouseoverId:a}=e;(0,r.Gn)(e)})),(0,d.addDisposer)(e,(0,o.reaction)(()=>{const i=(0,n.getContainingView)(e);return{bpPerPx:i.views.map(e=>e.bpPerPx),displayedRegions:JSON.stringify(i.views.map(e=>e.displayedRegions)),features:e.features,initialized:i.initialized&&i.views.every(e=>e.displayedRegions.length>0&&e.initialized)}},({initialized:i})=>{if(!i)return;const{level:t}=e,{assemblyManager:o}=(0,n.getSession)(e),r=(0,n.getContainingView)(e).views.map(e=>({...(0,d.getSnapshot)(e),width:e.width,staticBlocks:e.staticBlocks,interRegionPaddingWidth:e.interRegionPaddingWidth,minimumBlockWidth:e.minimumBlockWidth})),g=[],l=e.features||[];for(const e of l){const i=e.get("mate");let n=e.get("start"),d=e.get("end");const l=i.start,c=i.end;-1===e.get("strand")&&([d,n]=[n,d]);const f=o.get(e.get("assemblyName")),m=o.get(i.assemblyName),p=e.get("refName"),u=i.refName,h=f?.getCanonicalRefName(p)||p,w=m?.getCanonicalRefName(u)||u,v=r[t],C=r[t+1],b=(0,a.eB)({self:v,refName:h,coord:n}),y=(0,a.eB)({self:v,refName:h,coord:d}),N=(0,a.eB)({self:C,refName:w,coord:l}),R=(0,a.eB)({self:C,refName:w,coord:c});if(void 0===b||void 0===y||void 0===N||void 0===R)continue;const k=e.get("CIGAR");g.push({p11:b,p12:y,p21:N,p22:R,f:e,cigar:s.aF.parseCigar(k)})}e.setFeatPositions(g)},{fireImmediately:!0}))}}}]);
//# sourceMappingURL=8856.8ed10890.chunk.js.map