{"version":3,"file":"static/js/9963.fe3b7cad.chunk.js","mappings":"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","sources":["../../../plugins/alignments/src/AlignmentsFeatureDetail/LaunchSupplementaryAlignmentBreakpointSplitViewPanel.tsx","../../../plugins/alignments/src/AlignmentsFeatureDetail/getSAFeatures.ts","../../../plugins/alignments/src/AlignmentsFeatureDetail/SupplementaryAlignmentsLocStrings.tsx","../../../plugins/alignments/src/AlignmentsFeatureDetail/SupplementaryAlignments.tsx","../../../packages/sv-core/src/util.ts"],"sourcesContent":["import { lazy, useEffect, useState } from 'react'\n\nimport { ErrorMessage } from '@jbrowse/core/ui'\nimport { SimpleFeature, getSession, toLocale } from '@jbrowse/core/util'\nimport { getAssemblyName } from '@jbrowse/sv-core'\nimport { Link, Typography } from '@mui/material'\n\nimport { getSAFeatures } from './getSAFeatures.ts'\n\nimport type { ReducedFeature } from './getSAFeatures.ts'\nimport type { AlignmentFeatureWidgetModel } from './stateModelFactory.ts'\nimport type { SimpleFeatureSerialized } from '@jbrowse/core/util'\n\nconst BreakpointSplitViewChoiceDialog = lazy(\n  () => import('./BreakpointSplitViewChoiceDialog.tsx'),\n)\n\nexport default function LaunchBreakpointSplitViewPanel({\n  model,\n  feature,\n}: {\n  model: AlignmentFeatureWidgetModel\n  feature: SimpleFeatureSerialized\n}) {\n  const { view } = model\n  const [res, setRes] = useState<ReducedFeature[]>()\n  const [error, setError] = useState<unknown>()\n  useEffect(() => {\n    // eslint-disable-next-line @typescript-eslint/no-floating-promises\n    ;(async () => {\n      try {\n        const feats = await getSAFeatures({\n          view,\n          feature: new SimpleFeature(feature),\n        })\n        setRes(feats)\n      } catch (e) {\n        setError(e)\n        console.error(e)\n      }\n    })()\n  }, [feature, view])\n\n  const ret = [] as [ReducedFeature, ReducedFeature][]\n  if (res) {\n    for (let i = 0; i < res.length - 1; i++) {\n      ret.push([res[i]!, res[i + 1]!] as const)\n    }\n  }\n  const session = getSession(model)\n  const assemblyName = getAssemblyName(model.view)\n  return ret.length && assemblyName ? (\n    <div>\n      <Typography>Launch split view</Typography>\n      {error ? <ErrorMessage error={error} /> : null}\n      <ul>\n        {ret.map((arg, index) => {\n          const [f1, f2] = arg\n          return (\n            <li key={`${JSON.stringify(arg)}-${index}`}>\n              {f1.refName}:{toLocale(f1.strand === 1 ? f1.end : f1.start)} -&gt;{' '}\n              {f2.refName}:{toLocale(f2.strand === 1 ? f2.start : f2.end)}{' '}\n              <Link\n                href=\"#\"\n                onClick={event => {\n                  event.preventDefault()\n                  session.queueDialog(handleClose => [\n                    BreakpointSplitViewChoiceDialog,\n                    {\n                      handleClose,\n                      session,\n                      feature: new SimpleFeature({ ...f1, mate: f2 }),\n                      view: model.view,\n                      assemblyName,\n                    },\n                  ])\n                }}\n              >\n                (breakpoint split view)\n              </Link>\n            </li>\n          )\n        })}\n      </ul>\n    </div>\n  ) : null\n}\n","import { getSession } from '@jbrowse/core/util'\n\nimport {\n  featurizeSA,\n  getClip,\n  getLengthSansClipping,\n} from '../MismatchParser/index.ts'\n\nimport type { Feature } from '@jbrowse/core/util'\nimport type { LinearGenomeViewModel } from '@jbrowse/plugin-linear-genome-view'\n\nexport interface ReducedFeature {\n  refName: string\n  start: number\n  clipLengthAtStartOfRead: number\n  end: number\n  strand: number\n  seqLength: number\n  syntenyId?: number\n  uniqueId: string\n  mate: {\n    refName: string\n    start: number\n    end: number\n    syntenyId?: number\n    uniqueId?: string\n  }\n}\n\nexport async function getSAFeatures({\n  view,\n  feature,\n}: {\n  view: LinearGenomeViewModel\n  feature: Feature\n}) {\n  const { assemblyManager } = getSession(view)\n  const cigar = feature.get('CIGAR') as string\n  const origStrand = feature.get('strand') as number\n  const SA = (feature.get('tags')?.SA as string) || ''\n  const readName = feature.get('name') as string\n  const clipLengthAtStartOfRead = getClip(cigar, 1)\n\n  // get the canonical refname for the read because if the read.get('refName')\n  // is chr1 and the actual fasta refName is 1 then no tracks can be opened on\n  // the top panel of the linear read vs ref\n  const assembly = await assemblyManager.waitForAssembly(view.assemblyNames[0]!)\n  if (!assembly) {\n    throw new Error('assembly not found')\n  }\n\n  const suppAlns = featurizeSA(SA, feature.id(), origStrand, readName, true)\n\n  const feat = {\n    ...feature.toJSON(),\n    clipLengthAtStartOfRead,\n    strand: 1,\n    mate: {\n      refName: readName,\n      start: clipLengthAtStartOfRead,\n      end: clipLengthAtStartOfRead + getLengthSansClipping(cigar),\n    },\n  }\n  const features = [feat, ...suppAlns] as ReducedFeature[]\n\n  for (const [i, feature_] of features.entries()) {\n    const f = feature_\n    f.refName = assembly.getCanonicalRefName2(f.refName)\n    f.syntenyId = i\n    f.mate.syntenyId = i\n    f.mate.uniqueId = `${f.uniqueId}_mate`\n  }\n  return features.toSorted(\n    (a, b) => a.clipLengthAtStartOfRead - b.clipLengthAtStartOfRead,\n  )\n}\n","import { toLocale } from '@jbrowse/core/util'\nimport { Link, Typography } from '@mui/material'\n\nimport { navToLoc } from './util.ts'\nimport { getLengthOnRef } from '../MismatchParser/index.ts'\n\nimport type { AlignmentFeatureWidgetModel } from './stateModelFactory.ts'\n\nexport default function SupplementaryAlignmentsLocStrings({\n  tag,\n  model,\n}: {\n  tag: string\n  model: AlignmentFeatureWidgetModel\n}) {\n  return (\n    <div>\n      <Typography>List of supplementary alignment locations</Typography>\n      <ul>\n        {tag\n          .split(';')\n          .filter(SA => !!SA)\n          .map((SA, idx) => {\n            const [saRef, saStart, saStrand, saCigar] = SA.split(',')\n            const saLength = getLengthOnRef(saCigar!)\n            const extra = Math.floor(saLength / 5)\n            const start = +saStart!\n            const end = +saStart! + saLength\n            const sp = start - extra\n            const ep = end + extra\n            const locString = `${saRef}:${Math.max(1, sp)}-${ep}`\n            const displayStart = toLocale(start)\n            const displayEnd = toLocale(end)\n            const displayString = `${saRef}:${displayStart}-${displayEnd} (${saStrand}) [${saLength}bp]`\n            return (\n              /* biome-ignore lint/suspicious/noArrayIndexKey: */\n              <li key={`${locString}-${idx}`}>\n                <Link\n                  href=\"#\"\n                  onClick={async event => {\n                    event.preventDefault()\n\n                    // eslint-disable-next-line @typescript-eslint/no-floating-promises\n                    navToLoc(locString, model)\n                  }}\n                >\n                  {displayString}\n                </Link>\n              </li>\n            )\n          })}\n      </ul>\n    </div>\n  )\n}\n","import BaseCard from '@jbrowse/core/BaseFeatureWidget/BaseFeatureDetail/BaseCard'\nimport { getEnv, getSession } from '@jbrowse/core/util'\n\nimport LaunchBreakpointSplitViewPanel from './LaunchSupplementaryAlignmentBreakpointSplitViewPanel.tsx'\nimport SupplementaryAlignmentsLocStrings from './SupplementaryAlignmentsLocStrings.tsx'\n\nimport type { AlignmentFeatureWidgetModel } from './stateModelFactory.ts'\nimport type { SimpleFeatureSerialized } from '@jbrowse/core/util'\n\nexport default function SupplementaryAlignments(props: {\n  tag: string\n  model: AlignmentFeatureWidgetModel\n  feature: SimpleFeatureSerialized\n}) {\n  const { model, tag, feature } = props\n  const session = getSession(model)\n  const { pluginManager } = getEnv(session)\n  let hasBreakendSplitView = false\n\n  try {\n    hasBreakendSplitView = !!pluginManager.getViewType('BreakpointSplitView')\n  } catch (e) {\n    // ignore\n  }\n\n  return (\n    <BaseCard {...props} title=\"Supplementary alignments\">\n      <SupplementaryAlignmentsLocStrings model={model} tag={tag} />\n      {hasBreakendSplitView ? (\n        <LaunchBreakpointSplitViewPanel model={model} feature={feature} />\n      ) : null}\n    </BaseCard>\n  )\n}\n","import { parseBreakend } from '@gmod/vcf'\n\nimport type { Track } from './types.ts'\nimport type { Assembly } from '@jbrowse/core/assemblyManager/assembly'\nimport type { Feature } from '@jbrowse/core/util'\n\nexport function getBreakendCoveringRegions({\n  feature,\n  assembly,\n}: {\n  feature: Feature\n  assembly: Assembly\n}) {\n  const alt = feature.get('ALT')?.[0]\n  const bnd = alt ? parseBreakend(alt) : undefined\n  const startPos = feature.get('start')\n  const refName = feature.get('refName')\n  const f = (ref: string) => assembly.getCanonicalRefName(ref) || ref\n\n  if (alt === '<TRA>') {\n    const INFO = feature.get('INFO')\n    return {\n      pos: startPos,\n      refName: f(refName),\n      mateRefName: f(INFO.CHR2[0]),\n      matePos: INFO.END[0] - 1,\n    }\n  } else if (bnd?.MatePosition) {\n    const matePosition = bnd.MatePosition.split(':')\n    return {\n      pos: startPos,\n      refName: f(refName),\n      mateRefName: f(matePosition[0]!),\n      matePos: +matePosition[1]! - 1,\n    }\n  } else if (feature.get('mate')) {\n    const mate = feature.get('mate')\n    const strand = feature.get('strand')\n    const mateStrand = mate.strand\n    // Use the correct \"side\" of the feature based on strand:\n    // Forward strand (1): use end position (right side)\n    // Reverse strand (-1): use start position (left side)\n    const pos = strand === 1 ? feature.get('end') : startPos\n    const matePos = mateStrand === 1 ? mate.start : (mate.end ?? mate.start)\n    return {\n      pos,\n      refName: f(refName),\n      mateRefName: f(mate.refName),\n      matePos,\n    }\n  } else {\n    return {\n      pos: startPos,\n      refName: f(refName),\n      mateRefName: f(refName),\n      matePos: feature.get('end'),\n    }\n  }\n}\n\nexport function stripIds(arr: Track[]) {\n  return arr.map(({ id, displays, ...rest }) => ({\n    ...rest,\n    displays: displays.map(({ id, ...rest }) => rest),\n  }))\n}\n\nexport function makeTitle(f: Feature) {\n  return `${f.get('name') || f.get('id') || 'breakend'} split detail`\n}\n\nexport interface Region {\n  refName: string\n  start: number\n  end: number\n  assemblyName?: string\n}\n\nexport interface ViewWithAssemblyNames {\n  assemblyNames: string[]\n}\n\n/**\n * Safely extracts the first assemblyName from a view's assemblyNames getter.\n * Returns undefined if the view or assemblyNames are not available.\n */\nexport function getAssemblyName(view?: ViewWithAssemblyNames) {\n  return view?.assemblyNames[0]\n}\n\n/**\n * Splits a region at a breakend position into two overlapping regions.\n *\n * JBrowse uses 0-based, half-open coordinates where `end` is exclusive.\n * To ensure the breakend position is visible in both regions:\n * - Left region: ends at pos + 1 (includes position pos)\n * - Right region: starts at pos (includes position pos)\n *\n * This intentional overlap ensures features at the breakend are displayed.\n */\nexport function splitRegionAtPosition<\n  T extends { refName: string; start: number; end: number },\n>(\n  region: T,\n  pos: number,\n  assemblyName?: string,\n): [T & { assemblyName?: string }, T & { assemblyName?: string }] {\n  return [\n    {\n      ...region,\n      end: pos + 1,\n      ...(assemblyName !== undefined && { assemblyName }),\n    },\n    {\n      ...region,\n      start: pos,\n      ...(assemblyName !== undefined && { assemblyName }),\n    },\n  ]\n}\n"],"names":["BreakpointSplitViewChoiceDialog","lazy","LaunchBreakpointSplitViewPanel","t0","$","_c","model","feature","view","res","setRes","useState","error","setError","t1","t2","t3","feats","async","assemblyManager","getSession","cigar","get","origStrand","SA","readName","clipLengthAtStartOfRead","getClip","assembly","waitForAssembly","assemblyNames","Error","suppAlns","featurizeSA","id","features","toJSON","strand","mate","refName","start","end","getLengthSansClipping","i","feature_","entries","f","getCanonicalRefName2","syntenyId","uniqueId","toSorted","a","b","getSAFeatures","SimpleFeature","e","console","useEffect","ret","length","push","session","assemblyName","getAssemblyName","_jsxs","children","_jsx","Typography","ErrorMessage","map","arg","index","f1","f2","toLocale","Link","href","onClick","event","preventDefault","queueDialog","handleClose","JSON","stringify","SupplementaryAlignmentsLocStrings","tag","Symbol","for","SA_0","idx","saRef","saStart","saStrand","saCigar","split","saLength","getLengthOnRef","extra","Math","floor","sp","ep","locString","max","displayString","navToLoc","filter","_temp","SupplementaryAlignments","props","hasBreakendSplitView","pluginManager","getEnv","getViewType","BaseCard","title","getBreakendCoveringRegions","alt","bnd","parseBreakend","undefined","startPos","ref","getCanonicalRefName","INFO","pos","mateRefName","CHR2","matePos","END","MatePosition","matePosition","mateStrand","stripIds","arr","displays","rest","makeTitle","splitRegionAtPosition","region"],"ignoreList":[],"sourceRoot":""}