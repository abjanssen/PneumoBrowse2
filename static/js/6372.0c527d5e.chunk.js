"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[6372],{16802(t,n,e){e.d(n,{A:()=>a});var r=e(77251),i=e(96960);function s(t){const{POS:n,REF:e="",ALT:i=[]}=t,s=n-1;let a=!1,o=!1;for(const t of i)if(t.includes("<")&&(o=!0,"<TRA>"===t)){a=!0;break}if(o){const n=t.INFO;if(n.END&&!a)return+n.END[0];const e=[];if(n.SVLEN&&!a){const t=n.SVLEN;for(let n=0;n<t.length;n++){const r=t[n];i[n]?.startsWith("<INS")?e.push(1):e.push(Math.abs(+r))}return s+(0,r.max)(e)}}return s+e.length}class a{constructor(t){this.variant=t.variant,this.parser=t.parser,this.data=function(t,n){const{REF:e="",ALT:r,POS:a,CHROM:o,ID:u}=t,c=a-1,[l,p]=(0,i.M_)(e,r,n);return{refName:o,start:c,end:s(t),description:p,type:l,name:u?.join(",")}}(this.variant,this.parser),this._id=t.id}get(t){return"samples"===t?this.variant.SAMPLES():"genotypes"===t?this.variant.GENOTYPES():this.data[t]??this.variant[t]}parent(){}children(){}id(){return this._id}processGenotypes(t){this.variant.processGenotypes(t)}toJSON(){return{uniqueId:this._id,...this.variant.toJSON(),...this.data,samples:this.variant.SAMPLES()}}}},33864(t,n,e){function r(t){return"+"===t?1:"-"===t?-1:void 0}function i(t){return new TextDecoder("utf8").decode(t).split(/\n|\r\n|\r/).map(t=>t.trim()).filter(t=>!!t)}e.d(n,{P:()=>i,c:()=>r})},38185(t,n,e){function r(t){return"number"==typeof t?t-t===0:"string"==typeof t&&""!==t.trim()&&Number.isFinite(+t)}e.d(n,{E:()=>r})},76372(t,n,e){e.d(n,{parseVcfBuffer:()=>o});var r=e(89718),i=e(16802),s=e(38185),a=e(33864);function o(t){const n=(0,a.P)(t),e=n.filter(t=>t.startsWith("#")).join("\n"),o=n.filter(t=>!t.startsWith("#")),u=new r.Ay({header:e}),c=new Set,l=[];let p=0;for(const t of o){const[n,e,r,a,o,h,f,d,m,...g]=t.split("\t"),v=Object.fromEntries(d?.split(";").map(t=>t.trim()).map(t=>{const[n,e="true"]=t.split("="),r=`INFO.${n.trim()}`;c.add(r);const i=e.trim();return[r,(0,s.E)(i)?+i:i]})||[]);l.push({cellData:{CHROM:n,POS:+e,ID:r,REF:a,ALT:o,QUAL:(0,s.E)(h)?+h:h,FILTER:f,FORMAT:m,...v,...Object.fromEntries(u.samples.map((t,n)=>[t,g[n]]))},feature:new i.A({parser:u,variant:u.parseLine(t),id:`vcf-${p}`}).toJSON()}),p++}return{columns:["CHROM","POS","ID","REF","ALT","QUAL","FILTER",...c,"FORMAT",...u.samples].map(t=>({name:t})),rowSet:{rows:l}}}},96960(t,n,e){e.d(n,{Fm:()=>h,M_:()=>c,bC:()=>p});var r=e(89718),i=e(77251);const s=/[/|]/;function a(t){return t.includes("[")||t.includes("]")||t.startsWith(".")||t.endsWith(".")}function o(t){return t.startsWith("<")||a(t)}const u={"<DEL>":"deletion","<INS>":"insertion","<DUP>":"duplication","<INV>":"inversion","<INVDUP>":"inverted_duplication","<CNV>":"copy_number_variation","<TRA>":"translocation","<DUP:TANDEM>":"tandem_duplication","<NON_REF>":"sequence_variant","<*>":"sequence_variant"};function c(t,n,e){if(!n||0===n.length)return["remark","no alternative alleles"];const s=n.map(n=>function(t,n,e){if(t.startsWith("<"))return l(t,e)??"variant";if(a(t)&&(0,r.An)(t))return"breakend";const i=n.length,s=t.length;return 1===i&&1===s?"SNV":i===s?function(t,n){return t.split("").reverse().join("")===n}(n,t)?"inversion":"substitution":i<s?"insertion":"deletion"}(n,t,e)),u=[...new Set(s)],c=function(t,n){if(n.every(o))return n.join(",");const e=t.length;return`${t.length>10?(0,i.getBpDisplayStr)(e):t} -> ${n.map(t=>t.length>10?(0,i.getBpDisplayStr)(t.length):t).join(",")}`}(t,n);return[u.join(","),c]}function l(t,n){if(u[t])return u[t];if(n.getMetadata("ALT",t))return"sequence_variant";const e=t.slice(1,-1).split(":");return e.length>1?l(`<${e.slice(0,-1).join(":")}>`,n):void 0}function p(t,n){if(o(n)||1===t.length&&1===n.length)return n;const e=t.length,r=n.length;return e>5||r>5?`${(0,i.getBpDisplayStr)(e)} -> ${(0,i.getBpDisplayStr)(r)}`:`${t} -> ${n}`}function h(t,n,e){return t.split(s).map(t=>"."===t?".":0===+t?`ref(${n.length<10?n:(0,i.getBpDisplayStr)(n.length)})`:p(n,e[+t-1]||"")).join(t.includes("|")?"|":"/")}}}]);
//# sourceMappingURL=6372.0c527d5e.chunk.js.map