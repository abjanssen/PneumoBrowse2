"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[8658],{36157:(e,n,l)=>{l.d(n,{A:()=>f});var t=l(7552),s=l(30157),o=l(943),i=l(40985),c=l(2187),r=l(43163),a=l(61723),d=l(24387),h=l(68446),u=l(21254),m=l.n(u),g=l(75785),x=l(69500);const j=(0,g.n9)()((e=>({closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}})));function p(e){const n=(0,t.useRef)(null);return(0,x.jsx)(m(),{nodeRef:n,cancel:'[class*="MuiDialogContent-root"]',onStart:e=>`${e.target?.className}`.includes("MuiDialogTitle"),children:(0,x.jsx)(o.A,{ref:n,...e})})}const f=(0,h.observer)((function(e){const{classes:n}=j(),{title:l,children:t,onClose:o}=e;return(0,x.jsx)(i.A,{...e,PaperComponent:p,children:(0,x.jsxs)(c.A,{children:[(0,x.jsxs)(r.A,{style:{cursor:"move"},children:[l,o?(0,x.jsx)(a.A,{className:n.closeButton,onClick:()=>{o()},children:(0,x.jsx)(s.A,{})}):null]}),(0,x.jsx)(d.A,{}),t]})})}))},58474:(e,n,l)=>{l.d(n,{A3:()=>r,BO:()=>o,oJ:()=>i});var t=l(68584),s=l(99546);function o(e,n,l=1){const t=n.map((n=>e.findIndex((e=>e.name===n)))).sort(((e,n)=>e-n));let s=0;for(const n of t){const t=Math.max(s,n-l);t>=s&&e.splice(t,0,e.splice(n,1)[0]),s+=1}return e}function i(e,n,l=1){const t=n.map((n=>e.findIndex((e=>e.name===n)))).sort(((e,n)=>n-e));let s=e.length-1;for(const n of t){const t=Math.min(s,n+l);t<=s&&e.splice(t,0,e.splice(n,1)[0]),s-=1}return e}const c=12.8;function r(e){const{prefersOffset:n}=e,{trackLabels:l}=(0,s.getContainingView)(e),o=(0,s.getContainingTrack)(e),i=(0,t.getConf)(o,"name");return"overlapping"!==l||n?10:(0,s.measureText)(i,c)+100}},68658:(e,n,l)=>{l.r(n),l.d(n,{default:()=>A});var t=l(7552),s=l(36157),o=l(99546),i=l(29499),c=l(5401),r=l(58507),a=l(75785),d=l(49823),h=l(66395),u=l(66195),m=l(21430),g=l(91388),x=l(42281),j=l(36793),p=l(58474),f=l(69500);const C=(0,a.n9)()({cell:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}),b=function({rows:e,onChange:n,showTips:l}){const{classes:s}=C(),[i,r]=(0,t.useState)(null),[a,b]=(0,t.useState)([]),{name:w,color:A,baseUri:k,...v}=e[0],[S,M]=(0,t.useState)("blue"),[y,T]=(0,t.useState)({idx:0,field:null});return(0,f.jsxs)("div",{children:[(0,f.jsx)(c.A,{disabled:!a.length,onClick:e=>{r(e.currentTarget)},children:"Change color of selected items"}),(0,f.jsxs)(c.A,{onClick:()=>{n((0,p.BO)([...e],a))},disabled:!a.length,children:[(0,f.jsx)(m.A,{}),l?"Move selected items up":null]}),(0,f.jsxs)(c.A,{onClick:()=>{n((0,p.oJ)([...e],a))},disabled:!a.length,children:[(0,f.jsx)(u.A,{}),l?"Move selected items down":null]}),(0,f.jsxs)(c.A,{onClick:()=>{n((0,p.BO)([...e],a,e.length))},disabled:!a.length,children:[(0,f.jsx)(x.A,{}),l?"Move selected items to top":null]}),(0,f.jsxs)(c.A,{onClick:()=>{n((0,p.oJ)([...e],a,e.length))},disabled:!a.length,children:[(0,f.jsx)(g.A,{}),l?"Move selected items to bottom":null]}),(0,f.jsx)(h.FO,{anchorEl:i,color:S,onChange:l=>{M(l),a.forEach((n=>{const t=e.find((e=>e.name===n));t&&(t.color=l)})),n([...e])},onClose:()=>{r(null)}}),(0,f.jsx)("div",{style:{height:400,width:"100%"},children:(0,f.jsx)(j.z,{getRowId:e=>e.name,checkboxSelection:!0,disableRowSelectionOnClick:!0,onRowSelectionModelChange:e=>{b(e)},rows:e,rowHeight:25,columnHeaderHeight:33,columns:[{field:"color",headerName:"Color",renderCell:({value:l,id:t})=>(0,f.jsx)(h.Ay,{color:l||"blue",onChange:l=>{const s=e.find((e=>e.name===t));s&&(s.color=l),n([...e])}})},{field:"name",headerName:"Name",width:(0,o.measureGridWidth)(e.map((e=>e.name)))},...Object.keys(v).map((n=>({field:n,renderCell:({value:e})=>(0,f.jsx)("div",{className:s.cell,children:(0,f.jsx)(d.SanitizedHTML,{html:(0,o.getStr)(e)})}),width:(0,o.measureGridWidth)(e.map((e=>`${e[n]}`)))})))],sortModel:[],onSortModelChange:l=>{const t=l[0],s=(y.idx+1)%2,i=t.field||y.field;T({idx:s,field:i}),n(i?[...e].sort(((e,n)=>{const l=(0,o.getStr)(e[i]),t=(0,o.getStr)(n[i]);return 1===s?l.localeCompare(t):t.localeCompare(l)})):e)}})})]})},w=(0,a.n9)()({content:{minWidth:800},float:{float:"right"}});function A({model:e,handleClose:n}){const{classes:l}=w(),{sources:a}=e,[d,h]=(0,t.useState)(structuredClone(a||[])),[u,m]=(0,o.useLocalStorage)("multiwiggle-showTips",!1);return(0,f.jsxs)(s.A,{open:!0,onClose:n,maxWidth:"xl",title:"Multi-wiggle color/arrangement editor",children:[(0,f.jsxs)(i.A,{className:l.content,children:[(0,f.jsx)(c.A,{variant:"contained",className:l.float,onClick:()=>{m(!u)},children:u?"Hide tips":"Show tips"}),(0,f.jsx)("br",{}),u?(0,f.jsxs)(f.Fragment,{children:["Helpful tips",(0,f.jsxs)("ul",{children:[(0,f.jsx)("li",{children:"You can select rows in the table with the checkboxes"}),(0,f.jsx)("li",{children:"Multi-select is enabled with shift-click and control-click"}),(0,f.jsx)("li",{children:'The "Move selected items up/down" can re-arrange subtracks'}),(0,f.jsx)("li",{children:"Sorting the data grid itself can also re-arrange subtracks"}),(0,f.jsx)("li",{children:"Changes are applied when you hit Submit"}),(0,f.jsx)("li",{children:"You can click and drag the dialog box to move it on the screen"}),(0,f.jsx)("li",{children:"Columns in the table can be hidden using a vertical '...' menu on the right side of each column"})]})]}):null,(0,f.jsx)(b,{rows:d,onChange:h,showTips:u})]}),(0,f.jsxs)(r.A,{children:[(0,f.jsx)(c.A,{variant:"contained",type:"submit",color:"inherit",onClick:()=>{e.clearLayout(),h(e.sources||[])},children:"Clear custom settings"}),(0,f.jsx)(c.A,{variant:"contained",color:"secondary",onClick:()=>{n(),h([...e.sources||[]])},children:"Cancel"}),(0,f.jsx)(c.A,{variant:"contained",color:"primary",type:"submit",onClick:()=>{e.setLayout(d),n()},children:"Submit"})]})]})}}}]);
//# sourceMappingURL=8658.c9e49943.chunk.js.map