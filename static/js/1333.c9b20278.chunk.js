"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[1333],{11333(e,t,r){r.d(t,{renderToSvg:()=>f});var s=r(17868),o=r(77251),i=r(9930),n=r(38567),a=r(30936),l=r(38715),x=r(32118);function d(e){const t=(0,a.c)(6),{width:r,height:s}=e,i=(0,l.A)();let n,d;return t[0]!==i.palette.background.default?(n=(0,o.stripAlpha)(i.palette.background.default),t[0]=i.palette.background.default,t[1]=n):n=t[1],t[2]!==s||t[3]!==n||t[4]!==r?(d=(0,x.jsx)("rect",{x:0,y:0,width:r,height:s,fill:n}),t[2]=s,t[3]=n,t[4]=r,t[5]=d):d=t[5],d}var h=r(81922),c=r(84785);async function f(e,t){await(0,n.when)(()=>e.initialized);const{themeName:r="default",Wrapper:a=({children:e})=>e}=t,l=(0,o.getSession)(e),f=l.allThemes?.()[r],{width:m,borderX:p,viewWidth:g,viewHeight:y,tracks:u,height:w}=e,P=await Promise.all(u.map(async e=>{const r=e.displays[0];return await(0,n.when)(()=>void 0===r.ready||r.ready),{track:e,result:await r.renderSvg({...t,theme:f})}})),k=m+100;return(0,o.renderToStaticMarkup)((0,x.jsx)(i.A,{theme:(0,s.createJBrowseTheme)(f),children:(0,x.jsx)(a,{children:(0,x.jsxs)("svg",{width:m,height:w,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:[0,0,k,w].toString(),children:[(0,x.jsx)(d,{width:k,height:w}),(0,x.jsx)(h.kb,{model:e}),(0,x.jsxs)("g",{transform:`translate(${p} 0)`,children:[(0,x.jsx)(c.A,{model:e}),(0,x.jsx)("defs",{children:(0,x.jsx)("clipPath",{id:"clip-ruler",children:(0,x.jsx)("rect",{x:0,y:0,width:g,height:y})})}),(0,x.jsx)("g",{clipPath:"url(#clip-ruler)",children:P.map(({result:e},t)=>(0,x.jsx)("g",{children:e},t))})]}),(0,x.jsx)("g",{transform:`translate(${p} ${y})`,children:(0,x.jsx)(h.se,{model:e})})]})})}))}},81922(e,t,r){r.d(t,{KM:()=>c,en:()=>m,kb:()=>p,se:()=>f});var s=r(77251),o=r(83090),i=r(65045),n=r(99226),a=r(38715),l=r(64074),x=r(10387),d=r(32118);const h=(0,i.n)()(()=>({vtext:{gridColumn:"1/2",gridRow:"1/2",pointerEvents:"none",userSelect:"none"},htext:{gridColumn:"2/2",gridRow:"2/2",pointerEvents:"none",userSelect:"none"}})),c=(0,l.observer)(function({model:e}){const{viewWidth:t,borderY:r}=e,{classes:s}=h();return(0,d.jsx)("svg",{width:t,height:r,className:s.htext,children:(0,d.jsx)(f,{model:e})})}),f=(0,l.observer)(function({model:e}){const{viewWidth:t,borderX:r,borderY:i,hview:l,htextRotation:h,hticks:c}=e,{offsetPx:f,width:m,dynamicBlocks:p,bpPerPx:g}=l,y=p.contentBlocks,u=(0,x.rQ)(y,t,f),w=(0,a.A)(),P={...(0,n.getSnapshot)(l),width:m,staticBlocks:l.staticBlocks},k=c.map(e=>[e,(0,o.eB)({refName:e.refName,coord:e.base,self:P})?.offsetPx]).filter(e=>void 0!==e[1]).map(e=>[e[0],e[1]-f]);return(0,d.jsxs)(d.Fragment,{children:[y.filter(e=>!u.has(e.key)).map(e=>{const t=Math.floor(e.offsetPx-l.offsetPx);return(0,d.jsx)("text",{transform:`rotate(${h},${t},0)`,x:t,y:1,fontSize:11,dominantBaseline:"hanging",textAnchor:"end",...(0,s.getFillProps)(w.palette.text.primary),children:e.refName},e.key)}),k.map(([e,t],r)=>t>0&&t<m?(0,d.jsx)("line",{x1:t,x2:t,y1:0,y2:"major"===e.type?6:4,strokeWidth:1,...(0,s.getStrokeProps)(w.palette.text.primary)},`line-${e.refName}-${e.base}-${r}`):null),k.filter(e=>"major"===e[0].type).map(([e,t],r)=>t>10&&t<m?(0,d.jsx)("text",{x:t-7,y:0,transform:`rotate(${h},${t},0)`,fontSize:11,dominantBaseline:"middle",textAnchor:"end",...(0,s.getFillProps)(w.palette.text.primary),children:(0,s.getTickDisplayStr)(e.base+1,g)},`text-${e.refName}-${e.base}-${r}`):null),(0,d.jsx)("text",{y:i-12,x:(t-r)/2,textAnchor:"middle",fontSize:11,dominantBaseline:"hanging",...(0,s.getFillProps)(w.palette.text.primary),children:l.assemblyNames.join(",")})]})}),m=(0,l.observer)(function({model:e}){const{borderX:t,viewHeight:r}=e,{classes:s}=h();return(0,d.jsx)("svg",{className:s.vtext,width:t,height:r,children:(0,d.jsx)(p,{model:e})})}),p=(0,l.observer)(function({model:e}){const{viewHeight:t,borderX:r,borderY:i,vview:l,vtextRotation:h,vticks:c}=e,{offsetPx:f,width:m,dynamicBlocks:p,bpPerPx:g}=l,y=p.contentBlocks,u=(0,x.rQ)(y,t,f),w=(0,a.A)(),P={...(0,n.getSnapshot)(l),width:m,staticBlocks:l.staticBlocks},k=c.map(e=>[e,(0,o.eB)({refName:e.refName,coord:e.base,self:P})?.offsetPx]).filter(e=>void 0!==e[1]).map(e=>[e[0],e[1]-f]);return(0,d.jsxs)(d.Fragment,{children:[y.filter(e=>!u.has(e.key)).map(e=>{const o=Math.floor(t-e.offsetPx+f);return(0,d.jsx)("text",{transform:`rotate(${h},${r},${e.offsetPx})`,x:r,y:o,fontSize:11,textAnchor:"end",...(0,s.getFillProps)(w.palette.text.primary),children:e.refName},e.key)}),k.map(([e,o],i)=>o>0&&o<t?(0,d.jsx)("line",{y1:t-o,y2:t-o,x1:r,x2:r-("major"===e.type?6:4),strokeWidth:1,...(0,s.getStrokeProps)(w.palette.text.primary)},`line-${e.refName}-${e.base}-${i}`):null),k.filter(e=>"major"===e[0].type).map(([e,o],i)=>o>10&&o<t?(0,d.jsx)("text",{y:t-o-3,x:r-7,textAnchor:"end",dominantBaseline:"hanging",fontSize:11,...(0,s.getFillProps)(w.palette.text.primary),children:(0,s.getTickDisplayStr)(e.base+1,g)},`text-${e.refName}-${e.base}-${i}`):null),(0,d.jsx)("text",{y:(t-i)/2,x:12,transform:`rotate(-90,12,${(t-i)/2})`,textAnchor:"middle",fontSize:11,...(0,s.getFillProps)(w.palette.text.primary),children:l.assemblyNames.join(",")})]})})},84785(e,t,r){r.d(t,{A:()=>a});var s=r(77251),o=r(38715),i=r(64074),n=r(32118);const a=(0,i.observer)(function({model:e,children:t}){const{viewWidth:r,viewHeight:i,hview:a,vview:l}=e,x=a.dynamicBlocks.contentBlocks,d=l.dynamicBlocks.contentBlocks,h=(0,o.A)();if(!x.length||!d.length)return null;const c=a.displayedRegionsTotalPx-a.offsetPx,f=l.displayedRegionsTotalPx-l.offsetPx,m=x[0].offsetPx-a.offsetPx,p=d[0].offsetPx-l.offsetPx,g=h.palette.divider,y=Math.max(m,0),u=Math.max(i-f,0),w=Math.min(c-m,r),P=Math.min(i-p-u,i),k=x.filter((e,t)=>Math.floor(e.offsetPx-a.offsetPx)!==(t>0?Math.floor(x[t-1].offsetPx-a.offsetPx):null)),j=d.filter((e,t)=>Math.floor(i-(e.offsetPx-l.offsetPx))!==(t>0?Math.floor(i-(d[t-1].offsetPx-l.offsetPx)):null));return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("rect",{x:y,y:u,width:w,height:P,...(0,s.getFillProps)(h.palette.background.default)}),(0,n.jsxs)("g",{children:[k.map(e=>{const t=e.offsetPx-a.offsetPx;return(0,n.jsx)("line",{x1:t,y1:0,x2:t,y2:i,...(0,s.getStrokeProps)(g)},e.key)}),j.map(e=>{const t=i-(e.offsetPx-l.offsetPx);return(0,n.jsx)("line",{x1:0,y1:t,x2:r,y2:t,...(0,s.getStrokeProps)(g)},e.key)}),(0,n.jsx)("line",{x1:c,y1:0,x2:c,y2:i,...(0,s.getStrokeProps)(g)}),(0,n.jsx)("line",{x1:0,y1:i-f,x2:r,y2:i-f,...(0,s.getStrokeProps)(g)})]}),t]})})}}]);
//# sourceMappingURL=1333.c9b20278.chunk.js.map