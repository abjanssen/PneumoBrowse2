{"version":3,"file":"static/js/1266.c401b01a.chunk.js","mappings":"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","sources":["../../../plugins/dotplot-view/src/DotplotView/svgcomponents/SVGBackground.tsx","../../../plugins/dotplot-view/src/DotplotView/svgcomponents/SVGDotplotView.tsx","../../../plugins/dotplot-view/src/DotplotView/components/Grid.tsx","../../../plugins/dotplot-view/src/DotplotView/components/Axes.tsx"],"sourcesContent":["import { stripAlpha } from '@jbrowse/core/util'\nimport { useTheme } from '@mui/material'\n\nexport default function SVGBackground({\n  width,\n  height,\n}: {\n  width: number\n  height: number\n}) {\n  const theme = useTheme()\n  return (\n    <rect\n      x={0}\n      y={0}\n      width={width}\n      height={height}\n      fill={stripAlpha(theme.palette.background.default)}\n    />\n  )\n}\n","import { createJBrowseTheme } from '@jbrowse/core/ui'\nimport { getSession, renderToStaticMarkup } from '@jbrowse/core/util'\nimport { ThemeProvider } from '@mui/material'\nimport { when } from 'mobx'\n\nimport SVGBackground from './SVGBackground'\nimport { HorizontalAxisRaw, VerticalAxisRaw } from '../components/Axes'\nimport { GridRaw } from '../components/Grid'\n\nimport type { DotplotViewModel, ExportSvgOptions } from '../model'\n\n// render LGV to SVG\nexport async function renderToSvg(\n  model: DotplotViewModel,\n  opts: ExportSvgOptions,\n) {\n  await when(() => model.initialized)\n  const { themeName = 'default', Wrapper = ({ children }) => children } = opts\n\n  const session = getSession(model)\n  const theme = session.allThemes?.()[themeName]\n  const { width, borderX, viewWidth, viewHeight, tracks, height } = model\n  const shift = 50\n  const displayResults = await Promise.all(\n    tracks.map(async track => {\n      const display = track.displays[0]\n      await when(() => (display.ready !== undefined ? display.ready : true))\n      return { track, result: await display.renderSvg({ ...opts, theme }) }\n    }),\n  )\n  const w = width + shift * 2\n\n  // the xlink namespace is used for rendering <image> tag\n  return renderToStaticMarkup(\n    <ThemeProvider theme={createJBrowseTheme(theme)}>\n      <Wrapper>\n        <svg\n          width={width}\n          height={height}\n          xmlns=\"http://www.w3.org/2000/svg\"\n          xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n          viewBox={[0, 0, w, height].toString()}\n        >\n          <SVGBackground width={w} height={height} />\n          <VerticalAxisRaw model={model} />\n          <g transform={`translate(${borderX} 0)`}>\n            <GridRaw model={model} />\n            <defs>\n              <clipPath id=\"clip-ruler\">\n                <rect x={0} y={0} width={viewWidth} height={viewHeight} />\n              </clipPath>\n            </defs>\n            <g clipPath=\"url(#clip-ruler)\">\n              {displayResults.map(({ result }, i) => (\n                /* biome-ignore lint/suspicious/noArrayIndexKey: */\n                <g key={i}>{result}</g>\n              ))}\n            </g>\n          </g>\n          <g transform={`translate(${borderX} ${viewHeight})`}>\n            <HorizontalAxisRaw model={model} />\n          </g>\n        </svg>\n      </Wrapper>\n    </ThemeProvider>,\n  )\n}\n","import { getFillProps, getStrokeProps } from '@jbrowse/core/util'\nimport { useTheme } from '@mui/material'\nimport { observer } from 'mobx-react'\n\nimport type { DotplotViewModel } from '../model'\n\nexport const GridRaw = observer(function ({\n  model,\n  children,\n}: {\n  model: DotplotViewModel\n  children?: React.ReactNode\n}) {\n  const { viewWidth, viewHeight, hview, vview } = model\n  const hblocks = hview.dynamicBlocks.contentBlocks\n  const vblocks = vview.dynamicBlocks.contentBlocks\n  if (!hblocks.length || !vblocks.length) {\n    return null\n  }\n  const htop = hview.displayedRegionsTotalPx - hview.offsetPx\n  const vtop = vview.displayedRegionsTotalPx - vview.offsetPx\n  const hbottom = hblocks[0]!.offsetPx - hview.offsetPx\n  const vbottom = vblocks[0]!.offsetPx - vview.offsetPx\n  const theme = useTheme()\n  const stroke = theme.palette.divider\n\n  // Uses math.max/min avoid making very large SVG rect offscreen element,\n  // which can sometimes fail to draw\n  const rx = Math.max(hbottom, 0)\n  const ry = Math.max(viewHeight - vtop, 0)\n  const w = Math.min(htop - hbottom, viewWidth)\n  const h = Math.min(viewHeight - vbottom - ry, viewHeight)\n\n  let lastx = Number.POSITIVE_INFINITY\n  let lasty = Number.POSITIVE_INFINITY\n  return (\n    <>\n      <rect\n        x={rx}\n        y={ry}\n        width={w}\n        height={h}\n        {...getFillProps(theme.palette.background.default)}\n      />\n      <g>\n        {hblocks.map(region => {\n          const x = region.offsetPx - hview.offsetPx\n          const render = Math.floor(x) !== Math.floor(lastx)\n          if (render) {\n            lastx = x\n          }\n          return render ? (\n            <line\n              key={JSON.stringify(region)}\n              x1={x}\n              y1={0}\n              x2={x}\n              y2={viewHeight}\n              {...getStrokeProps(stroke)}\n            />\n          ) : null\n        })}\n        {vblocks.map(region => {\n          const y = viewHeight - (region.offsetPx - vview.offsetPx)\n          const render = Math.floor(y) !== Math.floor(lasty)\n          if (render) {\n            lasty = y\n          }\n          return render ? (\n            <line\n              key={JSON.stringify(region)}\n              x1={0}\n              y1={y}\n              x2={viewWidth}\n              y2={y}\n              {...getStrokeProps(stroke)}\n            />\n          ) : null\n        })}\n        <line\n          x1={htop}\n          y1={0}\n          x2={htop}\n          y2={viewHeight}\n          {...getStrokeProps(stroke)}\n        />\n        <line\n          x1={0}\n          y1={viewHeight - vtop}\n          x2={viewWidth}\n          y2={viewHeight - vtop}\n          {...getStrokeProps(stroke)}\n        />\n      </g>\n      {children}\n    </>\n  )\n})\n\nexport default function Grid({\n  model,\n  children,\n}: {\n  model: DotplotViewModel\n  children?: React.ReactNode\n}) {\n  const { viewWidth, viewHeight } = model\n  return (\n    <svg\n      width={viewWidth}\n      height={viewHeight}\n      style={{ background: 'rgba(0,0,0,0.12)' }}\n    >\n      <GridRaw model={model}>{children}</GridRaw>\n    </svg>\n  )\n}\n","import {\n  getFillProps,\n  getStrokeProps,\n  getTickDisplayStr,\n} from '@jbrowse/core/util'\nimport { bpToPx } from '@jbrowse/core/util/Base1DUtils'\nimport { useTheme } from '@mui/material'\nimport { observer } from 'mobx-react'\nimport { getSnapshot } from 'mobx-state-tree'\nimport { makeStyles } from 'tss-react/mui'\n\nimport { getBlockLabelKeysToHide } from './util'\n\nimport type { DotplotViewModel } from '../model'\n\nconst useStyles = makeStyles()(() => ({\n  vtext: {\n    gridColumn: '1/2',\n    gridRow: '1/2',\n    pointerEvents: 'none',\n    userSelect: 'none',\n  },\n  htext: {\n    gridColumn: '2/2',\n    gridRow: '2/2',\n    pointerEvents: 'none',\n    userSelect: 'none',\n  },\n}))\nexport const HorizontalAxis = observer(function ({\n  model,\n}: {\n  model: DotplotViewModel\n}) {\n  const { viewWidth, borderY } = model\n  const { classes } = useStyles()\n  return (\n    <svg width={viewWidth} height={borderY} className={classes.htext}>\n      <HorizontalAxisRaw model={model} />\n    </svg>\n  )\n})\n\nexport const HorizontalAxisRaw = observer(function ({\n  model,\n}: {\n  model: DotplotViewModel\n}) {\n  const { viewWidth, borderX, borderY, hview, htextRotation, hticks } = model\n  const { offsetPx, width, dynamicBlocks, bpPerPx } = hview\n  const dblocks = dynamicBlocks.contentBlocks\n  const hide = getBlockLabelKeysToHide(dblocks, viewWidth, offsetPx)\n  const theme = useTheme()\n  const hviewSnap = {\n    ...getSnapshot(hview),\n    width,\n    staticBlocks: hview.staticBlocks,\n  }\n\n  const ticks = hticks\n    .map(\n      tick =>\n        [\n          tick,\n          bpToPx({\n            refName: tick.refName,\n            coord: tick.base,\n            self: hviewSnap,\n          })?.offsetPx,\n        ] as const,\n    )\n    .filter(f => f[1] !== undefined)\n    .map(f => [f[0], f[1]! - offsetPx] as const)\n\n  return (\n    <>\n      {dblocks\n        .filter(region => !hide.has(region.key))\n        .map(region => {\n          const x = region.offsetPx\n          const y = 0\n          const xoff = Math.floor(x - hview.offsetPx)\n\n          return (\n            <text\n              transform={`rotate(${htextRotation},${xoff},${y})`}\n              key={JSON.stringify(region)}\n              x={xoff}\n              y={y + 1}\n              fontSize={11}\n              dominantBaseline=\"hanging\"\n              textAnchor=\"end\"\n              {...getFillProps(theme.palette.text.primary)}\n            >\n              {region.refName}\n            </text>\n          )\n        })}\n      {ticks.map(([tick, x]) =>\n        x > 0 && x < width ? (\n          <line\n            key={`line-${JSON.stringify(tick)}`}\n            x1={x}\n            x2={x}\n            y1={0}\n            y2={tick.type === 'major' ? 6 : 4}\n            strokeWidth={1}\n            {...getFillProps(theme.palette.text.primary)}\n          />\n        ) : null,\n      )}\n      {ticks\n        .filter(t => t[0].type === 'major')\n        .map(([tick, x]) =>\n          x > 10 && x < width ? (\n            <text\n              x={x - 7}\n              y={0}\n              transform={`rotate(${htextRotation},${x},0)`}\n              key={`text-${JSON.stringify(tick)}`}\n              fontSize={11}\n              dominantBaseline=\"middle\"\n              textAnchor=\"end\"\n              {...getFillProps(theme.palette.text.primary)}\n            >\n              {getTickDisplayStr(tick.base + 1, bpPerPx)}\n            </text>\n          ) : null,\n        )}\n      <text\n        y={borderY - 12}\n        x={(viewWidth - borderX) / 2}\n        textAnchor=\"middle\"\n        fontSize={11}\n        dominantBaseline=\"hanging\"\n        {...getFillProps(theme.palette.text.primary)}\n      >\n        {hview.assemblyNames.join(',')}\n      </text>\n    </>\n  )\n})\nexport const VerticalAxis = observer(function ({\n  model,\n}: {\n  model: DotplotViewModel\n}) {\n  const { borderX, viewHeight } = model\n  const { classes } = useStyles()\n  return (\n    <svg className={classes.vtext} width={borderX} height={viewHeight}>\n      <VerticalAxisRaw model={model} />\n    </svg>\n  )\n})\n\nexport const VerticalAxisRaw = observer(function ({\n  model,\n}: {\n  model: DotplotViewModel\n}) {\n  const { viewHeight, borderX, borderY, vview, vtextRotation, vticks } = model\n  const { offsetPx, width, dynamicBlocks, bpPerPx } = vview\n  const dblocks = dynamicBlocks.contentBlocks\n  const hide = getBlockLabelKeysToHide(dblocks, viewHeight, offsetPx)\n  const theme = useTheme()\n  const vviewSnap = {\n    ...getSnapshot(vview),\n    width,\n    staticBlocks: vview.staticBlocks,\n  }\n  const ticks = vticks\n    .map(\n      tick =>\n        [\n          tick,\n          bpToPx({\n            refName: tick.refName,\n            coord: tick.base,\n            self: vviewSnap,\n          })?.offsetPx,\n        ] as const,\n    )\n    .filter(f => f[1] !== undefined)\n    .map(f => [f[0], f[1]! - offsetPx] as const)\n\n  return (\n    <>\n      {dblocks\n        .filter(region => !hide.has(region.key))\n        .map(region => {\n          const y = region.offsetPx\n          const x = borderX\n          const yoff = Math.floor(viewHeight - y + offsetPx)\n\n          return (\n            <text\n              transform={`rotate(${vtextRotation},${x},${y})`}\n              key={JSON.stringify(region)}\n              x={x}\n              y={yoff}\n              fontSize={11}\n              textAnchor=\"end\"\n              {...getFillProps(theme.palette.text.primary)}\n            >\n              {region.refName}\n            </text>\n          )\n        })}\n      {ticks.map(([tick, y]) =>\n        y > 0 ? (\n          <line\n            key={`line-${JSON.stringify(tick)}`}\n            y1={viewHeight - y}\n            y2={viewHeight - y}\n            x1={borderX}\n            x2={borderX - (tick.type === 'major' ? 6 : 4)}\n            strokeWidth={1}\n            {...getStrokeProps(theme.palette.grey[400])}\n          />\n        ) : null,\n      )}\n      {ticks\n        .filter(t => t[0].type === 'major')\n        .map(([tick, y]) =>\n          y > 10 && y < viewHeight ? (\n            <text\n              y={viewHeight - y - 3}\n              x={borderX - 7}\n              key={`text-${JSON.stringify(tick)}`}\n              textAnchor=\"end\"\n              dominantBaseline=\"hanging\"\n              fontSize={11}\n              {...getFillProps(theme.palette.text.primary)}\n            >\n              {getTickDisplayStr(tick.base + 1, bpPerPx)}\n            </text>\n          ) : null,\n        )}\n      <text\n        y={(viewHeight - borderY) / 2}\n        x={12}\n        transform={`rotate(-90,12,${(viewHeight - borderY) / 2})`}\n        textAnchor=\"middle\"\n        fontSize={11}\n        {...getFillProps(theme.palette.text.primary)}\n      >\n        {vview.assemblyNames.join(',')}\n      </text>\n    </>\n  )\n})\n"],"names":["SVGBackground","width","height","theme","useTheme","_jsx","x","y","fill","stripAlpha","palette","background","default","async","renderToSvg","model","opts","when","initialized","themeName","Wrapper","children","session","getSession","allThemes","borderX","viewWidth","viewHeight","tracks","displayResults","Promise","all","map","display","track","displays","undefined","ready","result","renderSvg","w","shift","renderToStaticMarkup","ThemeProvider","createJBrowseTheme","_jsxs","xmlns","xmlnsXlink","viewBox","toString","VerticalAxisRaw","transform","GridRaw","id","clipPath","i","HorizontalAxisRaw","observer","hview","vview","hblocks","dynamicBlocks","contentBlocks","vblocks","length","htop","displayedRegionsTotalPx","offsetPx","vtop","hbottom","vbottom","stroke","divider","rx","Math","max","ry","min","h","lastx","Number","POSITIVE_INFINITY","lasty","_Fragment","getFillProps","region","render","floor","x1","y1","x2","y2","getStrokeProps","JSON","stringify","Grid","style","useStyles","makeStyles","vtext","gridColumn","gridRow","pointerEvents","userSelect","htext","HorizontalAxis","borderY","classes","className","htextRotation","hticks","bpPerPx","dblocks","hide","getBlockLabelKeysToHide","hviewSnap","getSnapshot","staticBlocks","ticks","tick","bpToPx","refName","coord","base","self","filter","f","has","key","xoff","fontSize","dominantBaseline","textAnchor","text","primary","type","strokeWidth","t","getTickDisplayStr","assemblyNames","join","VerticalAxis","vtextRotation","vticks","vviewSnap","yoff","grey"],"sourceRoot":""}