{"version":3,"file":"static/js/8384.ca4c4467.chunk.js","mappings":"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","sources":["../../../plugins/linear-comparative-view/src/LinearSyntenyDisplay/components/BlockError.tsx","../../../plugins/linear-comparative-view/src/LinearSyntenyDisplay/components/BlockMessage.tsx","../../../plugins/linear-comparative-view/src/LinearSyntenyDisplay/components/SyntenyContextMenu.tsx","../../../plugins/linear-comparative-view/src/LinearSyntenyDisplay/components/LinearSyntenyRendering.tsx","../../../plugins/linear-comparative-view/src/LinearSyntenyDisplay/components/LoadingMessage.tsx","../../../plugins/linear-comparative-view/src/LinearSyntenyDisplay/components/Component.tsx"],"sourcesContent":["import { makeStyles } from 'tss-react/mui'\n\nconst useStyles = makeStyles()({\n  blockError: {\n    background: '#f1f1f1',\n    padding: 10,\n    color: 'red',\n  },\n})\n\nexport default function BlockError({ error }: { error: unknown }) {\n  const { classes } = useStyles()\n  return <div className={classes.blockError}>{`${error}`}</div>\n}\n","import { makeStyles } from 'tss-react/mui'\n\nconst useStyles = makeStyles()(theme => {\n  const bg = theme.palette.action.disabledBackground\n  return {\n    loading: {\n      paddingLeft: '0.6em',\n      backgroundColor: theme.palette.background.default,\n      backgroundImage: `repeating-linear-gradient(45deg, transparent, transparent 5px, ${bg} 5px, ${bg} 10px)`,\n      textAlign: 'center',\n    },\n    blockMessage: {\n      background: '#f1f1f1',\n      padding: 10,\n    },\n  }\n})\n\nexport default function BlockMessage({ messageText }: { messageText: string }) {\n  const { classes } = useStyles()\n  return <div className={classes.blockMessage}>{messageText}</div>\n}\n","import { Menu } from '@jbrowse/core/ui'\nimport { getContainingView, getSession } from '@jbrowse/core/util'\n\nimport type { LinearSyntenyViewModel } from '../../LinearSyntenyView/model'\nimport type { LinearSyntenyDisplayModel } from '../model'\nimport type { Feature } from '@jbrowse/core/util'\n\ninterface ClickCoord {\n  clientX: number\n  clientY: number\n  feature: { f: Feature }\n}\n\nexport default function SyntenyContextMenu({\n  model,\n  onClose,\n  anchorEl,\n}: {\n  onClose: () => void\n  model: LinearSyntenyDisplayModel\n  anchorEl: ClickCoord\n}) {\n  const view = getContainingView(model) as LinearSyntenyViewModel\n  const { clientX, clientY, feature } = anchorEl\n  return (\n    <Menu\n      onMenuItemClick={(event, callback) => {\n        callback(event)\n        onClose()\n      }}\n      anchorEl={{\n        nodeType: 1,\n        getBoundingClientRect: () => {\n          const x = clientX\n          const y = clientY\n          return {\n            top: y,\n            left: x,\n            bottom: y,\n            right: x,\n            width: 0,\n            height: 0,\n            x,\n            y,\n            toJSON() {},\n          }\n        },\n      }}\n      onClose={onClose}\n      open={Boolean(anchorEl)}\n      menuItems={[\n        {\n          label: 'Center on feature',\n          onClick: () => {\n            const { f } = feature\n            const start = f.get('start')\n            const end = f.get('end')\n            const refName = f.get('refName')\n            const mate = f.get('mate')\n\n            const l1 = view.views[model.level]!\n            const l2 = view.views[model.level + 1]!\n            const l1asm = l1.assemblyNames[0]\n            const l2asm = l2.assemblyNames[0]\n\n            l1.navToLocString(`${refName}:${start}-${end}`).catch(\n              (e: unknown) => {\n                const err = `${l1asm}:${e}`\n                console.error(l1asm, err)\n                getSession(model).notifyError(err, e)\n              },\n            )\n\n            l2.navToLocString(\n              `${mate.refName}:${mate.start}-${mate.end}`,\n            ).catch((e: unknown) => {\n              const err = `${l2asm}:${e}`\n              console.error(l2asm, err)\n              getSession(model).notifyError(err, e)\n            })\n          },\n        },\n      ]}\n    />\n  )\n}\n","import { lazy, useCallback, useEffect, useRef, useState } from 'react'\n\nimport { getContainingView } from '@jbrowse/core/util'\nimport { transaction } from 'mobx'\nimport { observer } from 'mobx-react'\nimport { makeStyles } from 'tss-react/mui'\n\nimport { MAX_COLOR_RANGE, getId } from '../drawSynteny'\nimport SyntenyContextMenu from './SyntenyContextMenu'\nimport { getTooltip, onSynClick, onSynContextClick } from './util'\n\nimport type { ClickCoord } from './util'\nimport type { LinearSyntenyViewModel } from '../../LinearSyntenyView/model'\nimport type { LinearSyntenyDisplayModel } from '../model'\n\nconst SyntenyTooltip = lazy(() => import('./SyntenyTooltip'))\n\ntype Timer = ReturnType<typeof setTimeout>\n\nconst useStyles = makeStyles()({\n  pix: {\n    imageRendering: 'pixelated',\n    pointerEvents: 'none',\n    visibility: 'hidden',\n    position: 'absolute',\n  },\n  rel: {\n    position: 'relative',\n  },\n  mouseoverCanvas: {\n    position: 'absolute',\n    pointEvents: 'none',\n  },\n  mainCanvas: {\n    position: 'absolute',\n  },\n})\n\nconst LinearSyntenyRendering = observer(function ({\n  model,\n}: {\n  model: LinearSyntenyDisplayModel\n}) {\n  const { classes } = useStyles()\n  const { mouseoverId, height } = model\n  const xOffset = useRef(0)\n  const view = getContainingView(model) as LinearSyntenyViewModel\n  const width = view.width\n  const delta = useRef(0)\n  const scheduled = useRef(false)\n  const timeout = useRef<Timer>(null)\n  const [anchorEl, setAnchorEl] = useState<ClickCoord>()\n  const [tooltip, setTooltip] = useState('')\n  const [currX, setCurrX] = useState<number>()\n  const [mouseCurrDownX, setMouseCurrDownX] = useState<number>()\n  const [mouseInitialDownX, setMouseInitialDownX] = useState<number>()\n  const [currY, setCurrY] = useState<number>()\n  const mainSyntenyCanvasRefp = useRef<HTMLCanvasElement>(null)\n\n  // these useCallbacks avoid new refs from being created on any mouseover,\n  // etc.\n  // biome-ignore lint/correctness/useExhaustiveDependencies:\n  const mouseoverDetectionCanvasRef = useCallback(\n    (ref: HTMLCanvasElement | null) => {\n      model.setMouseoverCanvasRef(ref)\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [model, height, width],\n  )\n\n  // biome-ignore lint/correctness/useExhaustiveDependencies:\n  const mainSyntenyCanvasRef = useCallback(\n    (ref: HTMLCanvasElement | null) => {\n      model.setMainCanvasRef(ref)\n      mainSyntenyCanvasRefp.current = ref // this ref is additionally used in useEffect below\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [model, height, width],\n  )\n  // biome-ignore lint/correctness/useExhaustiveDependencies:\n  useEffect(() => {\n    function onWheel(event: WheelEvent) {\n      event.preventDefault()\n      if (event.ctrlKey) {\n        delta.current += event.deltaY / 500\n        for (const v of view.views) {\n          v.setScaleFactor(\n            delta.current < 0 ? 1 - delta.current : 1 / (1 + delta.current),\n          )\n        }\n        if (timeout.current) {\n          clearTimeout(timeout.current)\n        }\n        timeout.current = setTimeout(() => {\n          for (const v of view.views) {\n            v.setScaleFactor(1)\n            v.zoomTo(\n              delta.current > 0\n                ? v.bpPerPx * (1 + delta.current)\n                : v.bpPerPx / (1 - delta.current),\n              event.clientX -\n                (mainSyntenyCanvasRefp.current?.getBoundingClientRect().left ||\n                  0),\n            )\n          }\n          delta.current = 0\n        }, 300)\n      } else {\n        if (Math.abs(event.deltaY) < Math.abs(event.deltaX)) {\n          xOffset.current += event.deltaX / 2\n        }\n        if (!scheduled.current) {\n          scheduled.current = true\n          window.requestAnimationFrame(() => {\n            transaction(() => {\n              for (const v of view.views) {\n                v.horizontalScroll(xOffset.current)\n              }\n              xOffset.current = 0\n              scheduled.current = false\n            })\n          })\n        }\n      }\n    }\n    mainSyntenyCanvasRefp.current?.addEventListener('wheel', onWheel)\n    return () => {\n      mainSyntenyCanvasRefp.current?.removeEventListener('wheel', onWheel)\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [model, height, width])\n\n  // biome-ignore lint/correctness/useExhaustiveDependencies:\n  const clickMapCanvasRef = useCallback(\n    (ref: HTMLCanvasElement | null) => {\n      model.setClickMapCanvasRef(ref)\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [model, height, width],\n  )\n  // biome-ignore lint/correctness/useExhaustiveDependencies:\n  const cigarClickMapCanvasRef = useCallback(\n    (ref: HTMLCanvasElement | null) => {\n      model.setCigarClickMapCanvasRef(ref)\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [model, height, width],\n  )\n\n  return (\n    <div className={classes.rel}>\n      <canvas\n        ref={mouseoverDetectionCanvasRef}\n        width={width}\n        height={height}\n        className={classes.mouseoverCanvas}\n      />\n      <canvas\n        ref={mainSyntenyCanvasRef}\n        onMouseMove={event => {\n          if (mouseCurrDownX !== undefined) {\n            xOffset.current += mouseCurrDownX - event.clientX\n            setMouseCurrDownX(event.clientX)\n            if (!scheduled.current) {\n              scheduled.current = true\n              window.requestAnimationFrame(() => {\n                transaction(() => {\n                  for (const v of view.views) {\n                    v.horizontalScroll(xOffset.current)\n                  }\n                  xOffset.current = 0\n                  scheduled.current = false\n                })\n              })\n            }\n          } else {\n            const ref1 = model.clickMapCanvas\n            const ref2 = model.cigarClickMapCanvas\n            if (!ref1 || !ref2) {\n              return\n            }\n            const rect = ref1.getBoundingClientRect()\n            const ctx1 = ref1.getContext('2d')\n            const ctx2 = ref2.getContext('2d')\n            if (!ctx1 || !ctx2) {\n              return\n            }\n            const { clientX, clientY } = event\n            const x = clientX - rect.left\n            const y = clientY - rect.top\n            setCurrX(clientX)\n            setCurrY(clientY)\n            const [r1, g1, b1] = ctx1.getImageData(x, y, 1, 1).data\n            const [r2, g2, b2] = ctx2.getImageData(x, y, 1, 1).data\n            const unitMultiplier = Math.floor(MAX_COLOR_RANGE / model.numFeats)\n            const id = getId(r1!, g1!, b1!, unitMultiplier)\n            model.setMouseoverId(model.featPositions[id]?.f.id())\n            if (id === -1) {\n              setTooltip('')\n            } else if (model.featPositions[id]) {\n              const { f, cigar } = model.featPositions[id]\n              const unitMultiplier2 = Math.floor(MAX_COLOR_RANGE / cigar.length)\n              const cigarIdx = getId(r2!, g2!, b2!, unitMultiplier2)\n              // this is hacky but the index sometimes returns odd number which\n              // is invalid due to the color-to-id mapping, check it is even to\n              // ensure better validity\n              // Also check that the CIGAR pixel data is not all zeros (no CIGAR data drawn)\n              if (cigarIdx % 2 === 0 && (r2 !== 0 || g2 !== 0 || b2 !== 0)) {\n                setTooltip(\n                  getTooltip({\n                    feature: f,\n                    cigarOp: cigar[cigarIdx + 1],\n                    cigarOpLen: cigar[cigarIdx],\n                  }),\n                )\n              } else {\n                setTooltip('')\n              }\n            }\n          }\n        }}\n        onMouseLeave={() => {\n          model.setMouseoverId(undefined)\n          setMouseInitialDownX(undefined)\n          setMouseCurrDownX(undefined)\n        }}\n        onMouseDown={evt => {\n          setMouseCurrDownX(evt.clientX)\n          setMouseInitialDownX(evt.clientX)\n        }}\n        onMouseUp={evt => {\n          setMouseCurrDownX(undefined)\n          if (\n            mouseInitialDownX !== undefined &&\n            Math.abs(evt.clientX - mouseInitialDownX) < 5\n          ) {\n            onSynClick(evt, model)\n          }\n        }}\n        onContextMenu={evt => {\n          onSynContextClick(evt, model, setAnchorEl)\n        }}\n        data-testid=\"synteny_canvas\"\n        className={classes.mainCanvas}\n        width={width}\n        height={height}\n      />\n      <canvas\n        ref={clickMapCanvasRef}\n        className={classes.pix}\n        width={width}\n        height={height}\n      />\n      <canvas\n        ref={cigarClickMapCanvasRef}\n        className={classes.pix}\n        width={width}\n        height={height}\n      />\n      {mouseoverId && tooltip && currX && currY ? (\n        <SyntenyTooltip title={tooltip} />\n      ) : null}\n      {anchorEl ? (\n        <SyntenyContextMenu\n          model={model}\n          anchorEl={anchorEl}\n          onClose={() => {\n            setAnchorEl(undefined)\n          }}\n        />\n      ) : null}\n    </div>\n  )\n})\n\nexport default LinearSyntenyRendering\n","import { LoadingEllipses } from '@jbrowse/core/ui'\nimport { makeStyles } from 'tss-react/mui'\n\nconst useStyles = makeStyles()(theme => {\n  const bg = theme.palette.action.disabledBackground\n  return {\n    loading: {\n      paddingLeft: '0.6em',\n      backgroundColor: theme.palette.background.default,\n      backgroundImage: `repeating-linear-gradient(45deg, transparent, transparent 5px, ${bg} 5px, ${bg} 10px)`,\n      textAlign: 'center',\n    },\n  }\n})\n\nexport default function LoadingMessage({ message }: { message?: string }) {\n  const { classes } = useStyles()\n\n  return (\n    <div className={classes.loading}>\n      <LoadingEllipses message={message} />\n    </div>\n  )\n}\n","import { observer } from 'mobx-react'\n\nimport BlockError from './BlockError'\nimport BlockMessage from './BlockMessage'\nimport LinearSyntenyRendering from './LinearSyntenyRendering'\nimport LoadingMessage from './LoadingMessage'\n\nimport type { LinearSyntenyDisplayModel } from '../model'\n\nconst ServerSideRenderedBlockContent = observer(function ({\n  model,\n}: {\n  model: LinearSyntenyDisplayModel\n}) {\n  if (model.error) {\n    return <BlockError error={model.error} />\n  } else if (model.message) {\n    return <BlockMessage messageText={model.message} />\n  } else if (!model.features) {\n    return <LoadingMessage message={model.loadingStatus} />\n  } else {\n    return <LinearSyntenyRendering model={model} />\n  }\n})\n\nexport default ServerSideRenderedBlockContent\n"],"names":["useStyles","makeStyles","blockError","background","padding","color","BlockError","t0","$","_c","error","classes","t1","t2","_jsx","className","children","theme","bg","palette","action","disabledBackground","loading","paddingLeft","backgroundColor","default","backgroundImage","textAlign","blockMessage","BlockMessage","messageText","SyntenyContextMenu","model","onClose","anchorEl","getContainingView","view","clientX","clientY","feature","t3","event","callback","nodeType","getBoundingClientRect","top","left","bottom","right","width","height","x","y","toJSON","t4","Boolean","t5","t6","label","onClick","f","start","get","end","refName","mate","l1","views","level","l2","l1asm","assemblyNames","l2asm","navToLocString","catch","e","err","console","getSession","notifyError","e_0","err_0","Menu","onMenuItemClick","open","menuItems","SyntenyTooltip","lazy","pix","imageRendering","pointerEvents","visibility","position","rel","mouseoverCanvas","pointEvents","mainCanvas","observer","mouseoverId","xOffset","useRef","delta","scheduled","timeout","setAnchorEl","useState","tooltip","setTooltip","currX","setCurrX","mouseCurrDownX","setMouseCurrDownX","mouseInitialDownX","setMouseInitialDownX","currY","setCurrY","mainSyntenyCanvasRefp","mouseoverDetectionCanvasRef","useCallback","ref","setMouseoverCanvasRef","mainSyntenyCanvasRef","setMainCanvasRef","current","useEffect","onWheel","preventDefault","ctrlKey","deltaY","v","setScaleFactor","clearTimeout","setTimeout","zoomTo","bpPerPx","Math","abs","deltaX","window","requestAnimationFrame","transaction","horizontalScroll","addEventListener","removeEventListener","clickMapCanvasRef","setClickMapCanvasRef","cigarClickMapCanvasRef","setCigarClickMapCanvasRef","_jsxs","onMouseMove","undefined","ref1","clickMapCanvas","ref2","cigarClickMapCanvas","rect","ctx1","getContext","ctx2","r1","g1","b1","getImageData","data","r2","g2","b2","unitMultiplier","floor","MAX_COLOR_RANGE","numFeats","id","getId","setMouseoverId","featPositions","cigar","unitMultiplier2","length","cigarIdx","getTooltip","cigarOp","cigarOpLen","onMouseLeave","onMouseDown","evt","onMouseUp","onSynClick","onContextMenu","onSynContextClick","title","LoadingMessage","message","LoadingEllipses","features","LinearSyntenyRendering","loadingStatus"],"sourceRoot":""}