"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[965],{1178:(e,t,n)=>{n.d(t,{Im:()=>a,KS:()=>r,kb:()=>o,wh:()=>l});var i=n(99546),s=n(373);function a(e){return 0===Object.keys(e).length}function r(e,t,n){return[(0,s.SX)(`${e||t||""}`),`${n}`].filter((e=>!!e)).join(" - ")}function o(e,t){return Math.ceil((0,i.max)(e.map((e=>(0,i.measureText)([...t,e[0]].join("."),12)))))+10}function l(e,t={}){let n=t;for(const t of e)(0,i.isObject)(n)&&(n=n[t]);return"string"==typeof n?n:(0,i.isObject)(n)&&"string"==typeof n.Description?n.Description:void 0}},28055:(e,t,n)=>{n.d(t,{A:()=>d});var i=n(7552),s=n(87731),a=n(75785),r=n(49823),o=n(99546),l=n(69500);const c=(0,a.n9)()((e=>({fieldValue:{wordBreak:"break-word",maxHeight:300,fontSize:12,padding:e.spacing(.5),overflow:"auto"}})));function d({value:e}){const{classes:t}=c(),n=/^https?:\/\//.exec(`${e}`);return(0,l.jsx)("div",{className:t.fieldValue,children:(0,i.isValidElement)(e)?e:n?(0,l.jsx)(s.A,{href:`${e}`,children:`${e}`}):(0,l.jsx)(r.SanitizedHTML,{html:(0,o.isObject)(e)?JSON.stringify(e):String(e)})})}},32106:(e,t,n)=>{n.d(t,{A:()=>l});var i=n(75785),s=n(28055),a=n(36441),r=n(69500);const o=(0,i.n9)()({field:{display:"flex",flexWrap:"wrap"}});function l({name:e,value:t,description:n,prefix:i,width:l}){const{classes:c}=o();return null!=t?(0,r.jsxs)("div",{className:c.field,children:[(0,r.jsx)(a.A,{prefix:i,description:n,name:e,width:l}),(0,r.jsx)(s.A,{value:t})]}):null}},35300:(e,t,n)=>{n.r(t),n.d(t,{default:()=>C});var i=n(75785),s=n(28055),a=n(36441),r=n(99546),o=n(69500);const l=(0,i.n9)()((e=>({field:{display:"flex",flexWrap:"wrap"},fieldSubvalue:{wordBreak:"break-word",maxHeight:300,padding:e.spacing(.5),border:`1px solid ${e.palette.action.selected}`,boxSizing:"border-box",overflow:"auto"}})));function c({name:e,value:t,description:n,prefix:i=[]}){const{classes:c}=l();return 1===t.length?(0,r.isObject)(t[0])?(0,o.jsx)(C,{attributes:t[0],prefix:[...i,e]}):(0,o.jsxs)("div",{className:c.field,children:[(0,o.jsx)(a.A,{prefix:i,description:n,name:e}),(0,o.jsx)(s.A,{value:t[0]})]}):t.every((e=>(0,r.isObject)(e)))?(0,o.jsx)(o.Fragment,{children:t.map(((t,n)=>(0,o.jsx)(C,{attributes:t,prefix:[...i,`${e}-${n}`]},`${JSON.stringify(t)}-${n}`)))}):(0,o.jsxs)("div",{className:c.field,children:[(0,o.jsx)(a.A,{prefix:i,description:n,name:e}),t.map(((e,t)=>(0,o.jsx)("div",{className:c.fieldSubvalue,children:(0,o.jsx)(s.A,{value:e})},`${JSON.stringify(e)}-${t}`)))]})}var d=n(7552),f=n(33371),u=n(32808),p=n(36715),x=n(28237),m=n(76157),g=n(49823);const h=(0,i.n9)()((e=>({margin:{marginBottom:e.spacing(4)},cell:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}})));function j({value:e,prefix:t,name:n}){const{classes:i}=h(),[s,l]=(0,d.useState)(!1),c=Object.keys(e[0]).sort(),j=new Set(c),b=Object.entries(e).map((([e,t])=>{const{id:n,...i}=t;return{id:e,identifier:n,...i}}));for(const t of e)for(const e of Object.keys(t))j.add(e);let v;j.has("id")?(j.delete("id"),v=["identifier",...j]):v=[...j];const w=v.map((e=>(0,r.measureGridWidth)(b.map((t=>t[e])))));return j.size<c.length+5?(0,o.jsxs)("div",{className:i.margin,children:[(0,o.jsx)(a.A,{prefix:t,name:n}),(0,o.jsx)(f.A,{control:(0,o.jsx)(u.A,{checked:s,onChange:e=>{l(e.target.checked)}}),label:(0,o.jsx)(p.A,{variant:"body2",children:"Show options"})}),(0,o.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:(0,o.jsx)(x.z,{disableRowSelectionOnClick:!0,rows:b,rowHeight:20,columnHeaderHeight:35,hideFooter:b.length<25,slots:{toolbar:s?m.O:null},slotProps:{toolbar:{printOptions:{disableToolbarButton:!0}}},columns:v.map(((e,t)=>({field:e,renderCell:e=>{const t=e.value;return(0,o.jsx)("div",{className:i.cell,children:(0,o.jsx)(g.SanitizedHTML,{html:(0,r.getStr)(t||"")})})},width:w[t]})))})})]}):null}var b=n(32106);const v=(0,i.n9)()({field:{display:"flex",flexWrap:"wrap"}});function w({value:e,prefix:t,name:n}){const{classes:i}=v(),{uri:r,baseUri:l=""}=e;let c;try{c=new URL(r,l).href}catch(e){c=r}return(0,o.jsxs)("div",{className:i.field,children:[(0,o.jsx)(a.A,{prefix:t,name:n}),(0,o.jsx)(s.A,{value:c})]})}var A=n(1178);const y=170,S=["__jbrowsefmt","length","position","subfeatures","uniqueId","exonFrames","parentId","thickStart","thickEnd"];function C(e){const{attributes:t,omit:n=[],omitSingleLevel:i=[],descriptions:s,formatter:a=e=>e,hideUris:l,prefix:d=[]}=e,f=new Set([...n,...S,...i]),{__jbrowsefmt:u,...p}=t,x={...p,...u},m=(0,A.kb)(Object.entries(x).filter((([e,t])=>void 0!==t&&!f.has(e))),d);return(0,o.jsx)(o.Fragment,{children:Object.entries(x).filter((([e,t])=>void 0!==t&&!f.has(e))).map((([t,n])=>{const i=(0,A.wh)([...d,t],s);if(Array.isArray(n))return n.length>1&&n.every((e=>(0,r.isObject)(e)))?(0,o.jsx)(j,{name:t,prefix:d,value:n},t):(0,o.jsx)(c,{name:t,value:n,description:i,prefix:d},t);if((0,r.isObject)(n)){const{omitSingleLevel:i,...a}=e;return(0,r.isUriLocation)(n)?l?null:(0,o.jsx)(w,{name:t,prefix:d,value:n},t):(0,o.jsx)(C,{...a,attributes:n,descriptions:s,prefix:[...d,t]},t)}return(0,o.jsx)(b.A,{name:t,value:a(n,t),description:i,prefix:d,width:Math.min(m,y)},t)}))})}},36441:(e,t,n)=>{n.d(t,{A:()=>o});var i=n(89003),s=n(75785),a=n(69500);const r=(0,s.n9)()((e=>({fieldDescription:{"&:hover":{background:"dark"===e.palette.mode?"#e65100":"yellow"}},fieldName:{wordBreak:"break-all",minWidth:90,borderBottom:"1px solid #0003",fontSize:12,background:e.palette.action.disabledBackground,marginRight:e.spacing(1),padding:e.spacing(.5)}})));function o({description:e,name:t,width:n,prefix:s=[]}){const{classes:o,cx:l}=r(),c=[...s,t].join(".");return e?(0,a.jsx)(i.A,{title:e,placement:"left",children:(0,a.jsx)("div",{className:l(o.fieldDescription,o.fieldName),children:c})}):(0,a.jsx)("div",{className:o.fieldName,style:{width:n},children:c})}},40965:(e,t,n)=>{n.r(t),n.d(t,{default:()=>S});var i=n(92562),s=n(99546),a=n(91468),r=n(7552),o=n(35300),l=n(87083),c=n(68584),d=n(5401),f=n(31409),u=n.n(f),p=n(68446),x=n(75785),m=n(49823),g=n(69500);function h({config:e}){const[t,n]=(0,r.useState)(),[i,a]=(0,r.useState)(),d=(0,s.getSession)(e),{rpcManager:f}=d;(0,r.useEffect)((()=>{(async()=>{try{const t=(0,c.readConfObject)(e,"adapter"),n=await f.call(e.trackId,"CoreGetInfo",{adapterConfig:t});a(n)}catch(e){console.error(e),n(e)}})()}),[e,f]);const u="string"==typeof i?{header:`<pre>${i.replaceAll("<","&lt;").replaceAll(">","&gt;")}</pre>`}:i||{};return(0,g.jsx)(l.default,{title:"File info",children:t?(0,g.jsx)(m.ErrorMessage,{error:t}):void 0===i?(0,g.jsx)(m.LoadingEllipses,{message:"Loading file data"}):(0,g.jsx)(o.default,{attributes:u})})}var j=n(29499);const b=(0,x.n9)()((e=>({container:{minWidth:800},refNames:{maxHeight:300,overflow:"auto",flexGrow:1,background:e.palette.background.default}}))),v=(0,p.observer)((function({config:e,onClose:t}){const{classes:n}=b(),[i,o]=(0,r.useState)(),[l,f]=(0,r.useState)(),[p,x]=(0,r.useState)(!1),{rpcManager:h}=(0,s.getSession)(e);(0,r.useEffect)((()=>{(async()=>{try{const t=await Promise.all([...new Set((0,a.getConfAssemblyNames)(e))].map((async t=>{const n=(0,c.readConfObject)(e,"adapter");return[t,await h.call(e.trackId,"CoreGetRefNames",{adapterConfig:n,regions:[{assemblyName:t}]})]})));f(Object.fromEntries(t))}catch(e){console.error(e),o(e)}})()}),[e,h]);const v=l?Object.entries(l):[],w=v.flatMap((([e,t])=>[`--- ${e} ---`,...t.slice(0,1e4),t.length>1e4?`\nToo many refNames to show in browser for ${e}, use "Copy ref names" button to copy to clipboard`:""])).filter((e=>!!e)).join("\n");return(0,g.jsx)(m.Dialog,{open:!0,title:"Reference sequence names used in track",onClose:t,maxWidth:"xl",children:(0,g.jsx)(j.A,{className:n.container,children:i?(0,g.jsx)(m.ErrorMessage,{error:i}):void 0===l?(0,g.jsx)(m.LoadingEllipses,{message:"Loading refNames"}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(d.A,{variant:"contained",onClick:()=>{u()(v.flatMap((([e,t])=>[`--- ${e} ---`,...t])).filter((e=>!!e)).join("\n")),x(!0),setTimeout((()=>{x(!1)}),1e3)},children:p?"Copied to clipboard!":"Copy ref names"}),(0,g.jsx)("pre",{className:n.refNames,children:w})]})})})})),w=(0,x.n9)()({content:{minWidth:800},button:{float:"right"}});function A(e,t){for(const n in e)n===t?delete e[n]:"object"==typeof e[n]&&A(e[n],t);return e}const y=(0,p.observer)((function({config:e}){const[t,n]=(0,r.useState)(!1),i=(0,c.readConfObject)(e),a=(0,s.getSession)(e),{classes:f}=w(),[p,x]=(0,r.useState)(!1),m=(0,c.getConf)(a,["formatAbout","hideUris"])||(0,c.readConfObject)(e,["formatAbout","hideUris"]),{pluginManager:j}=(0,s.getEnv)(a),b=j.evaluateExtensionPoint("Core-customizeAbout",{config:{...i,...(0,c.getConf)(a,["formatAbout","config"],{config:i}),...(0,c.readConfObject)(e,["formatAbout","config"],{config:i})}},{session:a,config:e}),y=j.evaluateExtensionPoint("Core-extraAboutPanel",null,{session:a,config:e});return(0,g.jsxs)("div",{className:f.content,children:[(0,g.jsxs)(l.default,{title:"Configuration",children:[m?null:(0,g.jsxs)("span",{className:f.button,children:[(0,g.jsx)(d.A,{variant:"contained",color:"secondary",onClick:()=>{x(!0)},children:"Show ref names"}),(0,g.jsx)(d.A,{variant:"contained",onClick:()=>{const e=A(structuredClone(i),"baseUri");u()(JSON.stringify(e,null,2)),n(!0),setTimeout((()=>{n(!1)}),1e3)},children:t?"Copied to clipboard!":"Copy config"})]}),(0,g.jsx)(o.default,{attributes:b.config,omit:["displays","baseUri","refNames","formatAbout","metadata"],hideUris:m})]}),b.config.metadata?(0,g.jsx)(l.default,{title:"Metadata",children:(0,g.jsx)(o.default,{attributes:b.config.metadata,omit:["displays","baseUri","refNames","formatAbout"],hideUris:m})}):null,y?(0,g.jsx)(l.default,{title:y.name,children:(0,g.jsx)(y.Component,{config:e})}):null,(0,g.jsx)(h,{config:e}),p?(0,g.jsx)(v,{config:e,onClose:()=>{x(!1)}}):null]})}));function S({config:e,handleClose:t}){const n=(0,s.getSession)(e),r=(0,a.getTrackName)(e,n),{pluginManager:o}=(0,s.getEnv)(n),l=o.evaluateExtensionPoint("Core-replaceAbout",y,{session:n,config:e});return(0,g.jsx)(i.A,{open:!0,onClose:t,title:r,maxWidth:"xl",children:(0,g.jsx)(l,{config:e})})}},87083:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var i=n(7720),s=n(63011),a=n(48253),r=n(36715),o=n(63165),l=n(75785),c=n(69500);const d=(0,l.n9)()((e=>({expansionPanelDetails:{display:"block",padding:e.spacing(1)},icon:{color:e.palette.tertiary.contrastText||"#fff"}})));function f({children:e,title:t,defaultExpanded:n=!0}){const{classes:l}=d();return(0,c.jsxs)(s.A,{defaultExpanded:n,children:[(0,c.jsx)(a.A,{expandIcon:(0,c.jsx)(i.A,{className:l.icon}),children:(0,c.jsx)(r.A,{variant:"button",children:t})}),(0,c.jsx)(o.A,{className:l.expansionPanelDetails,children:e})]})}}}]);
//# sourceMappingURL=965.ee4dda61.chunk.js.map