"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[7258],{87258(e,t,n){n.r(t),n.d(t,{default:()=>S});var r=n(42918),o=n(6773),s=n(87861),i=n(37815),a=n(74919),c=n(24215),l=n(11543),u=n(65525),h=n(29011),d=n(30936),p=n(15943),w=n(1591),f=n(84830),x=n(65045),b=n(32118);const j="jbrowse2@berkeley.edu",m=(0,x.n)()(e=>({pre:{background:(0,p.X4)(e.palette.error.main,.2),border:`1px solid ${e.palette.divider}`,overflow:"auto",margin:20,maxHeight:300}}));function g(e){const t=(0,d.c)(18),{text:n,extra:r}=e,{classes:o}=m();let s;t[0]!==r?(s=r?`supporting data: ${JSON.stringify(r,null,2)}`:"",t[0]=r,t[1]=s):s=t[1];const i=s;let a;t[2]!==i||t[3]!==n?(a=[n,i].filter(Boolean),t[2]=i,t[3]=n,t[4]=a):a=t[4];const c=a.join("\n"),l=encodeURIComponent(`I got this error from JBrowse, here is the stack trace:\n\n\`\`\`\n${n}\n\`\`\`\n${i}\n`),u=`https://github.com/GMOD/jbrowse-components/issues/new?labels=bug&title=JBrowse+issue&body=${l}`,h=`mailto:${j}?subject=JBrowse%202%20error&body=${l}`;let p,x,g,$,k;return t[5]!==u?(p=(0,b.jsx)(f.A,{href:u,children:"GitHub"}),t[5]=u,t[6]=p):p=t[6],t[7]!==h?(x=(0,b.jsx)(f.A,{href:h,children:j}),t[7]=h,t[8]=x):x=t[8],t[9]!==p||t[10]!==x?(g=(0,b.jsxs)(w.A,{children:["Post a new issue at"," ",p," or send an email to ",x]}),t[9]=p,t[10]=x,t[11]=g):g=t[11],t[12]!==o.pre||t[13]!==c?($=(0,b.jsx)("pre",{className:o.pre,children:c}),t[12]=o.pre,t[13]=c,t[14]=$):$=t[14],t[15]!==g||t[16]!==$?(k=(0,b.jsxs)(b.Fragment,{children:[g,$]}),t[15]=g,t[16]=$,t[17]=k):k=t[17],k}var $=n(87574);async function k(e){const t=await fetch(e);if(!t.ok)throw new Error(`HTTP ${t.status} fetching ${e}: ${await t.text()}`);return t.text()}const y={},A=/\/\/# sourceMappingURL=(.*)/,C=/(.*)((?:https?|file):\/\/.*):(\d+):(\d+)/;async function v(e){if(y[e])return y[e];const t=new URL(e).search,n=await k(e),r=A.exec(n)?.[1]??"",o=await async function(e){return JSON.parse(await k(e))}(new URL(r,e).href+t),s=new h.SourceMapConsumer(o);return y[e]=s,s}function S({error:e,onClose:t,extra:h}){const[d,p]=(0,r.useState)(),[w,f]=(0,r.useState)(),[x,j]=(0,r.useState)(!1),m=e?`${e}`:"",k=function(e,t){return e.startsWith("Error:")?e.slice(`${t}`.length):e}(function(e){return"object"==typeof e&&null!==e&&"stack"in e?`${e.stack}`:""}(e),m);(0,r.useEffect)(()=>{(async()=>{try{p(await async function(e){const t=[];for(const n of e.split("\n")){const e=C.exec(n);if(!e){t.push(n);continue}const r=e[2],o=(await v(r)).originalPositionFor({line:+e[3],column:+e[4]});o.source&&o.line&&o.column?t.push(`${o.source}:${o.line}:${o.column+1} (${e[1].trim()})`):t.push(n)}return t.join("\n")}(k))}catch(e){console.error(e),p(k),f(e)}})()},[k]);const y=window.JBrowseSession?.version,A=[w?"Error loading source map, showing raw stack trace below:":"",m.length>1e4?`${m.slice(0,1e4)}...`:m,d||"No stack trace available",y?`JBrowse ${y}`:""].filter(Boolean).join("\n");return(0,b.jsxs)(s.A,{open:!0,onClose:t,maxWidth:"xl",children:[(0,b.jsxs)(i.A,{children:["Stack trace",(0,b.jsx)(a.A,{onClick:t,sx:{position:"absolute",right:8,top:8},children:(0,b.jsx)(o.A,{})})]}),(0,b.jsx)(c.A,{children:void 0===d?(0,b.jsx)($.A,{variant:"h6"}):(0,b.jsx)(g,{text:A,extra:h})}),(0,b.jsxs)(l.A,{children:[(0,b.jsx)(u.A,{variant:"contained",color:"secondary",onClick:async()=>{const{default:e}=await n.e(8284).then(n.t.bind(n,88284,23));e(A),j(!0),setTimeout(()=>{j(!1)},1e3)},children:x?"Copied!":"Copy stack trace to clipboard"}),(0,b.jsx)(u.A,{variant:"contained",color:"primary",onClick:t,children:"Close"})]})]})}}}]);
//# sourceMappingURL=7258.6955115e.chunk.js.map