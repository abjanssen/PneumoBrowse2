"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[8076],{88076:(e,n,s)=>{s.r(n),s.d(n,{default:()=>N});var t=s(7552),i=s(49823),r=s(57468),o=s(99546),a=s(68446),l=s(66684),d=s(943),c=s(75785),u=s(69500);const g=(0,c.n9)()((e=>({paper:{overflowY:"auto",height:"100%",position:"relative",zIndex:e.zIndex.drawer,outline:"none",background:e.palette.background.default},resizeHandle:{width:4,position:"fixed",top:0,zIndex:e.zIndex.drawer+1}}))),h=(0,a.observer)((function({children:e,session:n}){const{drawerPosition:s,drawerWidth:i}=n,{classes:r}=g(),o=(0,t.useRef)(null);return(0,t.useEffect)((()=>{function e(e){if(e.target instanceof Element&&o.current?.contains(e.target)){const e=n.visibleWidget?.view?.id;e&&n.setFocusedViewId(e)}}return document.addEventListener("mousedown",e),document.addEventListener("keydown",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("keydown",e)}}),[n]),(0,u.jsxs)(d.A,{ref:o,className:r.paper,elevation:16,square:!0,children:["right"===s?(0,u.jsx)(l.A,{onDrag:n.resizeDrawer,className:r.resizeHandle,vertical:!0}):null,e,"left"===s?(0,u.jsx)(l.A,{onDrag:n.resizeDrawer,className:r.resizeHandle,style:{left:i},vertical:!0}):null]})}));var x=s(67386),j=s(27281),p=s(17515),w=s(89003),v=s(61723),m=s(30157),f=s(16217),b=s(17307),A=s(2051),k=s(29629);const y=(0,a.observer)((function({session:e}){const[n,s]=(0,t.useState)(null),{drawerPosition:i,visibleWidget:r}=e;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(v.A,{color:"inherit",onClick:e=>{s(e.currentTarget)},children:(0,u.jsx)(b.A,{})}),(0,u.jsx)(w.A,{title:"Minimize drawer",children:(0,u.jsx)(v.A,{"data-testid":"drawer-minimize",color:"inherit",onClick:()=>{e.notify(`Drawer minimized, click button on ${i} side of screen to re-open`,"info"),e.minimizeWidgetDrawer()},children:(0,u.jsx)(f.A,{})})}),(0,u.jsx)(w.A,{title:"Close drawer",children:(0,u.jsx)(v.A,{color:"inherit",onClick:()=>{e.hideWidget(r)},children:(0,u.jsx)(m.A,{})})}),(0,u.jsx)(A.A,{anchorEl:n,open:Boolean(n),onClose:()=>{s(null)},children:["left","right"].map((n=>(0,u.jsx)(k.A,{selected:"option"===i,onClick:()=>{e.setDrawerPosition(n),s(null)},children:n},n)))})]})}));var C=s(25762),W=s(48171),z=s(98360),D=s(36715);const E=(0,c.n9)()((e=>({formControl:{margin:0},drawerSelect:{margin:0,color:e.palette.secondary.contrastText},dropDownIcon:{color:e.palette.secondary.contrastText}}))),T=(0,a.observer)((function({session:e}){const{visibleWidget:n,activeWidgets:s}=e,{classes:t}=E(),{pluginManager:i}=(0,o.getEnv)(e);return(0,u.jsx)(W.A,{className:t.formControl,children:(0,u.jsx)(z.A,{value:n?.id,"data-testid":"widget-drawer-selects",className:t.drawerSelect,classes:{icon:t.dropDownIcon},renderValue:n=>{const s=e.activeWidgets.get(n);if(!s)return(0,u.jsx)(D.A,{variant:"h6",color:"inherit",children:"Unknown widget"});const t=i.getWidgetType(s.type),{HeadingComponent:r,heading:o}=t;return r?(0,u.jsx)(r,{model:s}):(0,u.jsx)(D.A,{variant:"h6",color:"inherit",children:o})},onChange:n=>{const s=e.activeWidgets.get(n.target.value);s?e.showWidget(s):e.notify(`Widget not found ${n.target.value}`,"warning")},children:[...s.values()].map((n=>{const s=i.getWidgetType(n.type),{HeadingComponent:t,heading:r}=s;return(0,u.jsxs)(k.A,{"data-testid":`widget-drawer-selects-item-${n.type}`,value:n.id,children:[t?(0,u.jsx)(t,{model:n}):(0,u.jsx)(D.A,{variant:"h6",color:"inherit",children:r}),(0,u.jsx)(v.A,{"data-testid":`${n.type}-drawer-delete`,color:"inherit","aria-label":"Delete",onClick:()=>{e.hideWidget(n)},children:(0,u.jsx)(C.A,{})})]},n.id)}))})})})),H=(0,c.n9)()((e=>({spacer:{flexGrow:1},headerFocused:{background:e.palette.secondary.main},headerUnfocused:{background:e.palette.secondary.dark}}))),I=(0,a.observer)((function({session:e,setToolbarHeight:n,onPopoutDrawer:s}){const{classes:t}=H(),i=e.focusedViewId,r=e.visibleWidget?.view?.id;return(0,u.jsx)(j.A,{position:"sticky",className:i===r?t.headerFocused:t.headerUnfocused,ref:e=>{n(e?.getBoundingClientRect().height||0)},children:(0,u.jsxs)(p.A,{disableGutters:!0,children:[(0,u.jsx)(T,{session:e}),(0,u.jsx)(w.A,{title:"Open drawer in dialog",children:(0,u.jsx)(v.A,{color:"inherit",onClick:()=>{s()},children:(0,u.jsx)(x.A,{})})}),(0,u.jsx)("div",{className:t.spacer}),(0,u.jsx)(y,{session:e})]})})})),F=(0,t.lazy)((()=>s.e(2968).then(s.bind(s,12968)))),N=(0,a.observer)((function({session:e}){const{visibleWidget:n}=e,{pluginManager:s}=(0,o.getEnv)(e),a=n?s.evaluateExtensionPoint("Core-replaceWidget",s.getWidgetType(n.type).ReactComponent,{session:e,model:n}):null,[l,d]=(0,t.useState)(0),[c,g]=(0,t.useState)(!1);return(0,u.jsxs)(h,{session:e,children:[(0,u.jsx)(I,{onPopoutDrawer:()=>{g(!0)},session:e,setToolbarHeight:d}),(0,u.jsx)(t.Suspense,{fallback:(0,u.jsx)(i.LoadingEllipses,{}),children:(0,u.jsx)(r.t,{FallbackComponent:({error:e})=>(0,u.jsx)(i.ErrorMessage,{error:e}),children:a?c?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{children:"Opened in dialog..."}),(0,u.jsx)(F,{session:e,onClose:()=>{g(!1)}})]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(a,{model:n,session:e,toolbarHeight:l}),(0,u.jsx)("div",{style:{height:300}})]}):null})})]})}))}}]);
//# sourceMappingURL=8076.0db142c7.chunk.js.map