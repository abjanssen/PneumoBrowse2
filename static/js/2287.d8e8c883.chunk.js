"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[2287],{1833(e,t,a){a.d(t,{A:()=>s,T:()=>n});var r=a(97818),o=a(11042);function n(e){return(0,o.Ay)("MuiAccordionSummary",e)}const s=(0,r.A)("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"])},2678(e,t,a){a.d(t,{J:()=>s,Z:()=>i});var r=a(42906),o=a(8345);function n(e){try{return JSON.parse(e).message}catch(t){return e}}async function s(e,t,a){const s=await(0,o.eW)(JSON.stringify(e)),i=window.btoa([...window.crypto.getRandomValues(new Uint8Array(10))].map(e=>String.fromCharCode(e)).join("")).replaceAll(/[+/]/g,"").slice(0,5);const c=await(0,r.ff)(s,i),d=new FormData;d.append("session",c),d.append("dateShared",`${Date.now()}`),d.append("referer",a);const l=await fetch(`${t}share`,{method:"POST",mode:"cors",body:d});if(!l.ok){const e=await l.text();throw new Error(n(e))}return{json:await l.json(),encryptedSession:c,password:i}}async function i(e,t,a){const o=t.split("share-")[1],s=`${e}?sessionId=${encodeURIComponent(o)}`,i=await fetch(s);if(!i.ok)throw new Error(n(await i.text()));const c=await i.json();return(0,r.F6)(c.session,a)}},12489(e,t,a){a.d(t,{A:()=>s,n:()=>n});var r=a(97818),o=a(11042);function n(e){return(0,o.Ay)("MuiAccordionDetails",e)}const s=(0,r.A)("MuiAccordionDetails",["root"])},62287(e,t,a){a.r(t),a.d(t,{default:()=>I});var r=a(42918),o=a(34592),n=a(85787),s=a(27351),i=a(66012),c=a(77251),d=a(33624),l=a(65045),p=a(10525),m=a(92435),u=a(30775),h=a(99367),A=a(27407),x=a(87033),f=a(41031),b=a(64153),w=a(43787),y=a(8039),g=a(70885),k=a(64074),j=a(2678),S=a(8345),v=a(32118);const C=(0,l.n)()(e=>({expandIcon:{color:e.palette.tertiary.contrastText||"#fff"},minWidth:{minWidth:500}})),I=(0,k.observer)(function({onClose:e,model:t}){const{classes:a}=C(),[l,k]=(0,r.useState)(),[I,N]=(0,r.useState)(),[W,P]=(0,r.useState)(""),T=(0,c.getSession)(t),{assemblyNames:M}=T,[R,V]=(0,r.useState)(M[0]),[$,D]=(0,r.useState)("shareLinkAccordion");return(0,v.jsxs)(n.A,{open:!0,onClose:e,maxWidth:"xl",title:"Import bookmarks",children:[(0,v.jsxs)(h.A,{className:a.minWidth,children:[(0,v.jsxs)(A.A,{expanded:"shareLinkAccordion"===$,onChange:()=>{D("shareLinkAccordion")},children:[(0,v.jsx)(x.A,{expandIcon:(0,v.jsx)(m.A,{className:a.expandIcon}),children:(0,v.jsx)(f.A,{style:{display:"flex",alignItems:"center",gap:"5px"},children:"Import from share link"})}),(0,v.jsxs)(b.A,{children:[(0,v.jsx)(f.A,{children:"Paste a bookmark share link generated by the 'Share' button from the bookmarks widget"}),(0,v.jsx)(w.A,{label:"Enter Share URL",variant:"outlined",fullWidth:!0,value:W,onChange:e=>{P(e.target.value)}})]})]}),(0,v.jsxs)(A.A,{expanded:"fileAccordion"===$,onChange:()=>{D("fileAccordion")},children:[(0,v.jsx)(x.A,{expandIcon:(0,v.jsx)(m.A,{className:a.expandIcon}),children:(0,v.jsx)(f.A,{children:"Import from file"})}),(0,v.jsxs)(b.A,{children:[(0,v.jsx)(i.A,{location:l,setLocation:k,name:"File",description:'Choose a BED or TSV format file to import. Required TSV column headers are "chrom, start, end, label, assembly_name".'}),(0,v.jsx)(o.A,{onChange:e=>{V(e)},helperText:"Select the assembly for BED file.",session:T,selected:R})]})]}),I?(0,v.jsx)(s.A,{error:I}):null]}),(0,v.jsxs)(y.A,{children:[(0,v.jsx)(g.A,{variant:"contained",color:"secondary",onClick:e,children:"Cancel"}),(0,v.jsx)(g.A,{"data-testid":"dialogImport",variant:"contained",color:"primary",disabled:!l&&!W,startIcon:(0,v.jsx)(u.A,{}),onClick:async()=>{try{if("fileAccordion"===$&&l){const e=(await(0,d.openLocation)(l).readFile("utf8")).split(/\n|\r\n|\r/).filter(e=>!!e.trim());"BED"==((a=e[0]).startsWith("chrom")&&a.includes("assembly_name")?"TSV":"BED")?t.importBookmarks(await async function(e,t){return e.filter(e=>!e.startsWith("#")).map(e=>{const[a,r,o,n]=e.split("\t");return{assemblyName:t,refName:a,start:+r,end:+o,label:"."===n?void 0:n}})}(e,R)):t.importBookmarks(await async function(e){return e[0].startsWith("chrom")&&(e=e.slice(1)),e.filter(e=>!e.startsWith("#")).map(e=>{const[t,a,r,o,n]=e.split("\t");return{assemblyName:n,refName:t,start:+a,end:+r,label:"."===o?void 0:o}})}(e))}else"shareLinkAccordion"===$&&W&&(0,p.xv)(T)&&t.importBookmarks(await async function(e,t){const a=new URL(e),r=a.searchParams.get("bookmarks"),o=a.searchParams.get("password"),n=await(0,j.Z)(`${t??"https://share.jbrowse.org/api/v1/"}load`,r||"",o||"");return JSON.parse(await(0,S.LP)(n)).sharedBookmarks}(W,T.shareURL));e()}catch(e){console.error(e),N(e)}var a},children:"Import"})]})]})})},64153(e,t,a){a.d(t,{A:()=>m});var r=a(42918),o=a(77710),n=a(61648),s=a(18496),i=a(55030),c=a(27997),d=a(12489),l=a(32118);const p=(0,s.Ay)("div",{name:"MuiAccordionDetails",slot:"Root"})((0,i.A)(({theme:e})=>({padding:e.spacing(1,2,2)}))),m=r.forwardRef(function(e,t){const a=(0,c.b)({props:e,name:"MuiAccordionDetails"}),{className:r,...s}=a,i=a,m=(e=>{const{classes:t}=e;return(0,n.A)({root:["root"]},d.n,t)})(i);return(0,l.jsx)(p,{className:(0,o.A)(m.root,r),ref:t,ownerState:i,...s})})},87033(e,t,a){a.d(t,{A:()=>f});var r=a(42918),o=a(77710),n=a(61648),s=a(18496),i=a(55030),c=a(27997),d=a(66433),l=a(4872),p=a(1833),m=a(84961),u=a(32118);const h=(0,s.Ay)(d.A,{name:"MuiAccordionSummary",slot:"Root"})((0,i.A)(({theme:e})=>{const t={duration:e.transitions.duration.shortest};return{display:"flex",width:"100%",minHeight:48,padding:e.spacing(0,2),transition:e.transitions.create(["min-height","background-color"],t),[`&.${p.A.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${p.A.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`&:hover:not(.${p.A.disabled})`]:{cursor:"pointer"},variants:[{props:e=>!e.disableGutters,style:{[`&.${p.A.expanded}`]:{minHeight:64}}}]}})),A=(0,s.Ay)("span",{name:"MuiAccordionSummary",slot:"Content"})((0,i.A)(({theme:e})=>({display:"flex",textAlign:"start",flexGrow:1,margin:"12px 0",variants:[{props:e=>!e.disableGutters,style:{transition:e.transitions.create(["margin"],{duration:e.transitions.duration.shortest}),[`&.${p.A.expanded}`]:{margin:"20px 0"}}}]}))),x=(0,s.Ay)("span",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper"})((0,i.A)(({theme:e})=>({display:"flex",color:(e.vars||e).palette.action.active,transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),[`&.${p.A.expanded}`]:{transform:"rotate(180deg)"}}))),f=r.forwardRef(function(e,t){const a=(0,c.b)({props:e,name:"MuiAccordionSummary"}),{children:s,className:i,expandIcon:d,focusVisibleClassName:f,onClick:b,slots:w,slotProps:y,...g}=a,{disabled:k=!1,disableGutters:j,expanded:S,toggle:v}=r.useContext(l.A),C={...a,expanded:S,disabled:k,disableGutters:j},I=(e=>{const{classes:t,expanded:a,disabled:r,disableGutters:o}=e,s={root:["root",a&&"expanded",r&&"disabled",!o&&"gutters"],focusVisible:["focusVisible"],content:["content",a&&"expanded",!o&&"contentGutters"],expandIconWrapper:["expandIconWrapper",a&&"expanded"]};return(0,n.A)(s,p.T,t)})(C),N={slots:w,slotProps:y},[W,P]=(0,m.A)("root",{ref:t,shouldForwardComponentProp:!0,className:(0,o.A)(I.root,i),elementType:h,externalForwardedProps:{...N,...g},ownerState:C,additionalProps:{focusRipple:!1,disableRipple:!0,disabled:k,"aria-expanded":S,focusVisibleClassName:(0,o.A)(I.focusVisible,f)},getSlotProps:e=>({...e,onClick:t=>{e.onClick?.(t),(e=>{v&&v(e),b&&b(e)})(t)}})}),[T,M]=(0,m.A)("content",{className:I.content,elementType:A,externalForwardedProps:N,ownerState:C}),[R,V]=(0,m.A)("expandIconWrapper",{className:I.expandIconWrapper,elementType:x,externalForwardedProps:N,ownerState:C});return(0,u.jsxs)(W,{...P,children:[(0,u.jsx)(T,{...M,children:s}),d&&(0,u.jsx)(R,{...V,children:d})]})})},92435(e,t,a){a.d(t,{A:()=>n});var r=a(2425),o=a(32118);const n=(0,r.A)((0,o.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore")}}]);
//# sourceMappingURL=2287.d8e8c883.chunk.js.map