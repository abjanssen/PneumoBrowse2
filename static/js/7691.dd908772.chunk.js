"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[7691],{45858:(e,n,t)=>{t.d(n,{DH:()=>c,qk:()=>a});var o=t(8832);if(8792==t.j)var r=t(36422);function c(e){return r.types.model({id:o.ElementId,name:r.types.string,margin:0}).volatile((()=>({selection:void 0,hovered:void 0}))).views((e=>({get root(){return(0,r.getParent)(e)}}))).views((e=>({get jbrowse(){return e.root.jbrowse},get rpcManager(){return e.root.rpcManager},get configuration(){return this.jbrowse.configuration},get adminMode(){return e.root.adminMode},get textSearchManager(){return e.root.textSearchManager}}))).views((e=>({get assemblies(){return e.jbrowse.assemblies}}))).actions((e=>({setSelection(n){e.selection=n},clearSelection(){e.selection=void 0},setHovered(n){e.hovered=n}})))}function a(e){return"id"in e&&"name"in e&&"root"in e}},49204:(e,n,t)=>{t.d(n,{F:()=>a,M:()=>i});var o=t(68584);if(8792==t.j)var r=t(36422);var c=t(45858);function a(e){return r.types.model({connectionInstances:r.types.array(e.pluggableMstType("connection","stateModel"))}).views((e=>({get connections(){const{jbrowse:n}=e;return n.connections}}))).actions((n=>({makeConnection(t,r={}){const c=t.type;if(!c)throw new Error("track configuration has no `type` listed");const a=(0,o.readConfObject)(t,"name");if(!e.getConnectionType(c))throw new Error(`unknown connection type ${c}`);const i=n.connectionInstances.push({...r,name:a,type:c,configuration:t});return n.connectionInstances[i-1]},prepareToBreakConnection(e){const t=n,r=[],c={},a=(0,o.readConfObject)(e,"name"),i=n.connectionInstances.find((e=>e.name===a));if(i){for(const e of i.tracks){const n=t.getReferring(e);t.removeReferring(n,e,r,c)}return[()=>{r.forEach((e=>{e()})),this.breakConnection(e)},c]}},breakConnection(e){const t=(0,o.readConfObject)(e,"name"),r=n.connectionInstances.find((e=>e.name===t));if(!r)throw new Error(`no connection found with name ${t}`);n.connectionInstances.remove(r)},deleteConnection(e){const{jbrowse:t}=n;return t.deleteConnectionConf(e)},addConnectionConf(e){const{jbrowse:t}=n;return t.addConnectionConf(e)},clearConnections(){n.connectionInstances.clear()}})))}function i(e){return(0,c.qk)(e)&&"connectionInstances"in e}},7691:(e,n,t)=>{t.r(n),t.d(n,{default:()=>j});var o=t(7552),r=t(99546),c=t(49204),a=t(85059),i=t(27897),s=t(96403),l=t(22133),m=t(5401),d=t(68446),u=t(75785),g=t(49823),p=t(59099);const f=(0,d.observer)((function({connectionType:e,model:n,session:t}){const r=e.configEditorComponent||p.S;return o.createElement(o.Suspense,{fallback:o.createElement(g.LoadingEllipses,null)},o.createElement(r,{model:{target:n},session:t}))}));var C=t(74893),v=t(69500);const b=(0,C.A)((0,v.jsx)("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"}),"OpenInNew");var h=t(1343),E=t(61723),w=t(29629);const y=(0,d.observer)((function({connectionTypeChoices:e,connectionType:n,setConnectionType:t}){const r=e[0];return(0,o.useEffect)((()=>{n||t(r)}),[n,r,t]),o.createElement("form",{autoComplete:"off"},n?o.createElement(h.A,{value:n.name,label:"connectionType",helperText:n.description?o.createElement(o.Fragment,null,n.description,n.url?o.createElement(E.A,{href:n.url,rel:"noopener noreferrer",target:"_blank"},o.createElement(b,null)):null):null,select:!0,fullWidth:!0,onChange:n=>{t(e.find((e=>e.name===n.target.value)))},variant:"outlined"},e.map((e=>o.createElement(w.A,{key:e.name,value:e.name},e.displayName||e.name)))):null)})),k=(0,u.n9)()((e=>({root:{marginTop:e.spacing(1)},stepper:{backgroundColor:e.palette.background.default},button:{marginTop:e.spacing(1),marginRight:e.spacing(1)},actionsContainer:{marginBottom:e.spacing(2)}}))),T=["Select a Connection Type","Configure Connection"],j=(0,d.observer)((function({model:e}){const[n,t]=(0,o.useState)(),[d,u]=(0,o.useState)(),[g,p]=(0,o.useState)(0),{classes:C}=k(),v=(0,r.getSession)(e),{pluginManager:b}=(0,r.getEnv)(v),h=(0,o.useMemo)((()=>n?.configSchema.create({connectionId:d},(0,r.getEnv)(e))),[d,n,e]);return o.createElement("div",{className:C.root},o.createElement(a.A,{className:C.stepper,activeStep:g,orientation:"vertical"},T.map((a=>o.createElement(i.A,{key:a},o.createElement(s.A,null,a),o.createElement(l.A,null,0===g?o.createElement(y,{connectionTypeChoices:b.getConnectionElements(),connectionType:n,setConnectionType:e=>{t(e),e&&u(`${e.name}-${Date.now()}`)}}):n&&h?o.createElement(f,{connectionType:n,model:h,session:v}):null,o.createElement("div",{className:C.actionsContainer},o.createElement(m.A,{disabled:0===g,onClick:()=>{p(g-1)},className:C.button},"Back"),o.createElement(m.A,{disabled:!(0===g&&n||1===g&&h),variant:"contained",color:"primary",onClick:()=>{if(g===T.length-1){if(h&&(0,c.M)(v)){const e=v.addConnectionConf(h);v.makeConnection(e)}else v.notify("No config model to add");(0,r.isSessionModelWithWidgets)(v)&&v.hideWidget(e)}else p(g+1)},className:C.button,"data-testid":"addConnectionNext"},g===T.length-1?"Connect":"Next"))))))))}))}}]);
//# sourceMappingURL=7691.dd908772.chunk.js.map