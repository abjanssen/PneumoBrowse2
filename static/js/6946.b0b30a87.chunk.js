"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[6946],{26946:(o,r,t)=>{t.d(r,{drawFeats:()=>l});var e=t(99546),a=t(68584);function n(o,r,t,e,a,n){t<0&&(o+=t,t=-t),e<0&&(r+=e,e=-e),n&&(a.fillStyle=n),a.fillRect(o,r,t,e)}function s(o,r,t,e,a,n){t<0&&(o+=t,t=-t),e<0&&(r+=e,e=-e),n&&(a.strokeStyle=n),a.strokeRect(o,r,t,e)}var c=t(36917);function f({type:o,v0:r,v1:t,stats:e}){if("insertSizeAndOrientation"===o)return(0,c.sY)(r,t,e);if("orientation"===o)return(0,c.DW)(r);if("insertSize"===o)return(0,c.L9)(r,t,e);if("gradient"===o){const o=Math.min(r.start,t.start),e=Math.max(r.end,t.end);return[`hsl(${10*Math.log10(Math.abs(e-o))},50%,50%)`,`hsl(${10*Math.log10(Math.abs(e-o))},50%,30%)`]}}var i=t(91476);function l(o,r){const{chainData:t}=o;if(!t)return;const{assemblyManager:l}=(0,e.getSession)(o),_=(0,e.getContainingView)(o),d=_.assemblyNames[0],m=l.get(d);m&&((0,i.dv)(t)?function({ctx:o,self:r,chainData:t,view:c,asm:i}){const l=[],_=(0,a.getConf)(r,"featureHeight"),d=r.colorBy?.type||"insertSizeAndOrientation",{chains:m,stats:h}=t;for(const t of m)if(t.length>1){const o=t[0],r=t[1],e=i.getCanonicalRefName(o.refName)||o.refName,a=i.getCanonicalRefName(r.refName)||r.refName,n=c.bpToPx({refName:e,coord:o.start})?.offsetPx,s=c.bpToPx({refName:e,coord:o.end})?.offsetPx,f=c.bpToPx({refName:a,coord:r.start})?.offsetPx,_=c.bpToPx({refName:a,coord:r.end})?.offsetPx;let d=0;if(void 0!==n&&void 0!==s&&void 0!==f&&void 0!==_){if(o.refName===r.refName){const t=Math.min(o.start,r.start),e=Math.max(o.end,r.end);d=Math.abs(e-t)}l.push({r1s:n,r1e:s,r2s:f,r2e:_,v0:o,v1:r,distance:d})}}else if(r.drawSingletons){const r=t[0],e=i.getCanonicalRefName(r.refName)||r.refName,a=c.bpToPx({refName:e,coord:r.start})?.offsetPx,f=c.bpToPx({refName:e,coord:r.end})?.offsetPx;if(void 0!==a&&void 0!==f){const r=Math.max(f-a,2);n(a-c.offsetPx,0,r,_,o,"#f00"),s(a-c.offsetPx,0,r,_,o,"#a00")}}const p=Math.log((0,e.max)(l.map((o=>o.distance)))),x=Math.max(Math.log((0,e.min)(l.map((o=>o.distance))))-1,0),g=(r.height-20)/(p-x);for(const{r1e:r,r1s:t,r2e:e,r2s:a,distance:i,v0:m,v1:p}of l){const l=Math.max(r-t,2),v=Math.max(e-a,2),[u,N]=f({type:d,v0:m,v1:p,stats:h})||[],b=(Math.log(i)-x)*g,w=_/2-.5,P=a-r;n(r-c.offsetPx,b+w,P,1,o,"black"),s(t-c.offsetPx,b,l,_,o,N),s(a-c.offsetPx,b,v,_,o,N),n(t-c.offsetPx,b,l,_,o,u),n(a-c.offsetPx,b,v,_,o,u)}}({self:o,view:_,asm:m,ctx:r,chainData:t}):function({ctx:o,self:r,chainData:t,view:f,asm:i}){const l=[],_=[],{chains:d}=t,{height:m}=r,h=(0,a.getConf)(r,"featureHeight");for(const o of d){let r=Number.MAX_VALUE,t=Number.MIN_VALUE;for(const e of o){const o=i.getCanonicalRefName(e.refName)||e.refName,a=f.bpToPx({refName:o,coord:e.start})?.offsetPx,n=f.bpToPx({refName:o,coord:e.end})?.offsetPx;void 0!==a&&void 0!==n&&(r=Math.min(r,a),t=Math.max(t,n))}const e=Math.abs(t-r);l.push(e),_.push(r)}const p=Math.log((0,e.max)(l)),x=Math.max(Math.log((0,e.min)(l))-1,0),g=(m-20)/(p-x),v=h/2-.5;for(let r=0;r<d.length;r++){const t=d[r],e=l[r],a=(Math.log(e)-x)*g;n(_[r]-f.offsetPx,a+v,e,1,o,"black");const m=t[0];let p;if(2048&m.flags){const o=m.SA?.split(";")[0].split(",")[2];p="-"===o?-1:1}else p=m.strand;for(const r of t){const t=i.getCanonicalRefName(r.refName)||r.refName,e=f.bpToPx({refName:t,coord:r.start})?.offsetPx,l=f.bpToPx({refName:t,coord:r.end})?.offsetPx;if(void 0!==e&&void 0!==l){const t=Math.max(l-e,2),i=e-f.offsetPx,_=-1==r.strand*p?"color_rev_strand":"color_fwd_strand";s(i,a,t,h,o,c.w7[_]),n(i,a,t,h,o,c.pf[_])}}}}({self:o,view:_,asm:m,ctx:r,chainData:t}))}},36917:(o,r,t)=>{t.d(r,{DW:()=>l,L9:()=>s,pf:()=>a,sY:()=>f,w7:()=>n});var e=t(86576);const a={color_fwd_strand_not_proper:"#ECC8C8",color_rev_strand_not_proper:"#BEBED8",color_fwd_strand:"#EC8B8B",color_rev_strand:"#8F8FD8",color_fwd_missing_mate:"#D11919",color_rev_missing_mate:"#1919D1",color_fwd_diff_chr:"#000",color_rev_diff_chr:"#969696",color_pair_lr:"#c8c8c8",color_pair_rr:"navy",color_pair_rl:"teal",color_pair_ll:"green",color_nostrand:"#c8c8c8",color_interchrom:"purple",color_longinsert:"red",color_shortinsert:"pink",color_unknown:"grey"},n={color_fwd_strand_not_proper:"#CA6767",color_rev_strand_not_proper:"#7272AA",color_fwd_strand:"#DC2A2A",color_rev_strand:"#4141BA",color_fwd_missing_mate:"#921111",color_rev_missing_mate:"#111192",color_fwd_diff_chr:"#000000",color_rev_diff_chr:"#696969",color_pair_lr:"#8C8C8C",color_pair_rr:"#00005A",color_pair_rl:"#005A5A",color_pair_ll:"#005A00",color_nostrand:"#8C8C8C",color_interchrom:"#5A005A",color_longinsert:"#B30000",color_shortinsert:"#FF3A5C",color_unknown:"grey"};function s(o,r,t){const e=o.refName===r.refName,s=Math.abs(o.tlen||0);return e&&s>(t?.upper||0)?[a.color_longinsert,n.color_longinsert]:e&&s<(t?.lower||0)?[a.color_shortinsert,n.color_shortinsert]:e?void 0:[a.color_interchrom,n.color_interchrom]}const c=[a.color_unknown,a.color_unknown];function f(o,r,t){return i(o)||s(o,r,t)||c}function i(o){const r=e.il.fr[o.pair_orientation||""],t=e.rr[r];return"LR"===r?void 0:[a[t],n[t]]}function l(o){return i(o)||c}}}]);
//# sourceMappingURL=6946.b0b30a87.chunk.js.map