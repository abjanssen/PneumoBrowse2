"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[3795,8142],{13795:(e,n,t)=>{t.r(n),t.d(n,{default:()=>l});var s=t(7552),o=t(68446),r=t(78142),i=t(69500);const a=(0,s.lazy)((()=>Promise.all([t.e(2826),t.e(9546),t.e(1689)]).then(t.bind(t,1689)))),l=(0,o.observer)((function({model:e}){return e.initialized?(0,i.jsx)(r.default,{model:e}):(0,i.jsx)(a,{model:e})}))},78142:(e,n,t)=>{t.r(n),t.d(n,{default:()=>E});var s=t(68446),o=t(75785),r=t(7552),i=t(23758),a=t(90542),l=t(2020),c=t(31294),d=t(36866),u=t(99546),m=t(97486),p=t(61282),b=t(69500);const h=(0,o.n9)()((()=>({bp:{display:"flex",alignItems:"center",marginLeft:10},searchBox:{display:"flex"}}))),v=(0,s.observer)((function({view:e}){const{classes:n}=h(),{assemblyNames:t,coarseTotalBp:s}=e;return(0,b.jsxs)("span",{className:n.searchBox,children:[(0,b.jsx)(m.Gd,{model:e,showHelp:!1}),(0,b.jsxs)(p.A,{variant:"body2",color:"textSecondary",className:n.bp,children:[t.join(",")," ",(0,u.getBpDisplayStr)(s)]})]})})),f=(0,o.n9)()({inline:{display:"inline-flex"}}),g=(0,s.observer)((function({model:e}){const{classes:n}=f(),{views:t}=e,[s,o]=(0,r.useState)(t.length<=3),[u,m]=(0,r.useState)(t.length<=3);return(0,b.jsxs)(d.A,{row:!0,children:[(0,b.jsx)(i.A,{menuItems:[{label:"Synteny track selectors",type:"subMenu",subMenu:t.slice(0,-1).map(((n,s)=>({label:`Row ${s+1}->${s+2} (${t[s].assemblyNames.join(",")}->${t[s+1].assemblyNames.join(",")})`,onClick:()=>{e.activateTrackSelector(s)}})))},{label:"Row track selectors",type:"subMenu",subMenu:t.map(((e,n)=>({label:`Row ${n+1} track selector (${e.assemblyNames.join(",")})`,onClick:()=>e.activateTrackSelector()})))}],children:(0,b.jsx)(a.xU,{})}),(0,b.jsx)(i.A,{menuItems:[{label:"Row view menus",type:"subMenu",subMenu:t.map(((e,n)=>({label:`View ${n+1} Menu`,subMenu:e.menuItems()})))},...e.headerMenuItems()],children:(0,b.jsx)(l.A,{})}),(0,b.jsx)(i.A,{menuItems:[{label:"Show search boxes",type:"checkbox",checked:s,onClick:()=>{o(!s)}},{label:"Orientation - Side-by-side",type:"radio",checked:u,onClick:()=>{m(!u)}},{label:"Orientation - Vertical",type:"radio",checked:!u,onClick:()=>{m(!u)}}],children:(0,b.jsx)(c.A,{})}),s?(0,b.jsx)("span",{className:u?n.inline:void 0,children:t.map((e=>(0,b.jsx)(v,{view:e},e.id)))}):null]})}));var x=t(68584),j=t(67112);const w=(0,o.n9)()({container:{display:"grid"},overlay:{zIndex:100,gridArea:"1/1"},resizeHandle:{height:4,background:"#ccc"}});function y({view:e}){const{pluginManager:n}=(0,u.getEnv)(e),{ReactComponent:t}=n.getViewType(e.type);return(0,b.jsx)(t,{model:e})}const k=(0,s.observer)((function({model:e}){const{classes:n}=w(),{views:t,levels:s}=e;return(0,b.jsx)("div",{className:n.container,children:t.map(((t,o)=>(0,b.jsxs)(b.Fragment,{children:[o>0?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:n.container,children:(0,b.jsx)(M,{model:e,level:o-1})}),(0,b.jsx)(j.ResizeHandle,{onDrag:e=>s[o-1]?.setHeight((s[o-1]?.height||0)+e),className:n.resizeHandle})]}):null,(0,b.jsx)(y,{view:t})]},t.id)))})})),M=(0,s.observer)((function({model:e,level:n}){const{classes:t}=w();return(0,b.jsx)(b.Fragment,{children:e.levels[n]?.tracks.map((e=>{const[n]=e.displays,{RenderingComponent:s}=n,o=(0,x.getConf)(e,"trackId");return s?(0,b.jsx)("div",{className:t.overlay,style:{height:n.height,overflow:"hidden"},children:(0,b.jsx)(s,{model:n})},o):null}))})})),C=k;var N=t(62266),S=t(87770),O=t(42489),R=t(37962);const A=(0,o.n9)()({guide:{pointerEvents:"none",height:"100%",width:1,position:"absolute",background:"red",zIndex:1001}}),B=(0,s.observer)((function({model:e,coordX:n}){const{classes:t}=A();return(0,b.jsx)(R.A,{open:!0,placement:"top",title:e.views.map((e=>e.pxToBp(n))).map(((e,n)=>(0,b.jsx)("div",{children:(0,u.stringify)(e,!0)},[JSON.stringify(e),n].join("-")))),arrow:!0,children:(0,b.jsx)("div",{className:t.guide,style:{left:n}})})})),T=(0,o.n9)()((e=>({rubberband:{height:"100%",background:(0,N.X4)(e.palette.tertiary.main,.7),position:"absolute",zIndex:900,textAlign:"center",overflow:"hidden"},rubberbandControl:{cursor:"crosshair",width:"100%",minHeight:8},rubberbandText:{color:e.palette.tertiary.contrastText},popover:{mouseEvents:"none",cursor:"crosshair"},paper:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)}}))),I=(0,s.observer)((function({model:e,ControlComponent:n=(0,b.jsx)("div",{})}){const[t,s]=(0,r.useState)(),[o,i]=(0,r.useState)(),[a,l]=(0,r.useState)(),[c,d]=(0,r.useState)(),m=(0,r.useRef)(null),h=(0,r.useRef)(null),{classes:v}=T(),f=void 0!==t&&void 0===a;function g(e){e.preventDefault(),e.stopPropagation();const n=e.clientX-e.target.getBoundingClientRect().left;s(n),i(n)}function x(e){const n=e.target;d(e.clientX-n.getBoundingClientRect().left)}function w(){d(void 0),(0,O.transaction)((()=>{for(const n of e.views)n.setOffsets(void 0,void 0)}))}function y(){l(void 0),s(void 0),i(void 0)}(0,r.useEffect)((()=>{function n(e,n){if(void 0===t)return;let s=t,o=e;return o<s&&([s,o]=[o,s]),{leftOffset:n.pxToBp(s),rightOffset:n.pxToBp(o)}}function s(e){if(m.current&&f){const n=e.clientX-m.current.getBoundingClientRect().left;i(n)}}function o(s){if(void 0!==t&&m.current){const{clientX:t,clientY:o}=s,r=t-m.current.getBoundingClientRect().left;l({offsetX:r,clientX:t,clientY:o}),(0,O.transaction)((()=>{for(const t of e.views){const e=n(r,t);if(e){const{leftOffset:n,rightOffset:s}=e;t.setOffsets(n,s)}}})),d(void 0)}}return f?(window.addEventListener("mousemove",s),window.addEventListener("mouseup",o),()=>{window.removeEventListener("mousemove",s),window.removeEventListener("mouseup",o)}):()=>{}}),[t,f,e]),(0,r.useEffect)((()=>{!f&&void 0!==o&&void 0!==t&&Math.abs(o-t)<=3&&y()}),[f,o,t]);const k=Boolean(a);if(void 0===t)return(0,b.jsxs)(b.Fragment,{children:[void 0!==c?(0,b.jsx)(B,{model:e,coordX:c}):null,(0,b.jsx)("div",{ref:m,className:v.rubberbandControl,onMouseDown:g,onMouseOut:w,onMouseMove:x,children:n})]});const M=a?a.offsetX:o||0,C=Math.min(M,t),N=Math.abs(M-t),{views:R}=e,A=R.map((e=>e.pxToBp(C))),I=R.map((e=>e.pxToBp(C+N))),z=R.map((e=>Math.ceil(N*e.bpPerPx)));return(0,b.jsxs)(b.Fragment,{children:[h.current?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(S.Ay,{className:v.popover,classes:{paper:v.paper},open:!0,anchorEl:h.current,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"right"},keepMounted:!0,disableRestoreFocus:!0,children:A.map(((e,n)=>(0,b.jsx)(p.A,{children:(0,u.stringify)(e,!0)},[JSON.stringify(e),n,"left"].join("-"))))}),(0,b.jsx)(S.Ay,{className:v.popover,classes:{paper:v.paper},open:!0,anchorEl:h.current,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"left"},keepMounted:!0,disableRestoreFocus:!0,children:I.map(((e,n)=>(0,b.jsx)(p.A,{children:(0,u.stringify)(e,!0)},[JSON.stringify(e),n,"right"].join("-"))))})]}):null,(0,b.jsx)("div",{ref:h,className:v.rubberband,style:{left:C,width:N},children:(0,b.jsx)(p.A,{variant:"h6",className:v.rubberbandText,children:z.map(((e,n)=>(0,b.jsx)(p.A,{children:`${e.toLocaleString("en-US")}bp`},`${e}_${n}`)))})}),(0,b.jsx)("div",{className:v.rubberbandControl,ref:m,onMouseDown:g,onMouseOut:w,onMouseMove:x,children:n}),a?(0,b.jsx)(j.Menu,{anchorReference:"anchorPosition",anchorPosition:{left:a.clientX,top:a.clientY},onMenuItemClick:function(e,n){n(),y()},open:k,onClose:y,menuItems:e.rubberBandMenuItems()}):null]})})),z=(0,o.n9)()((e=>({rubberbandContainer:{position:"relative",overflow:"hidden"},rubberbandDiv:{width:"100%",background:e.palette.action.disabledBackground,height:15,"&:hover":{background:e.palette.action.selected}}}))),E=(0,s.observer)((function({model:e}){const{classes:n}=z();return(0,b.jsxs)("div",{className:n.rubberbandContainer,children:[(0,b.jsx)(g,{model:e}),(0,b.jsx)(I,{model:e,ControlComponent:(0,b.jsx)("div",{className:n.rubberbandDiv})}),(0,b.jsx)(C,{model:e})]})}))}}]);
//# sourceMappingURL=3795.86dfbfa9.chunk.js.map