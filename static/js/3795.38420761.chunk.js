"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[3795,6791],{13795:(e,n,t)=>{t.r(n),t.d(n,{default:()=>a});var s=t(7552),o=t(68446),i=t(46791),r=t(69500);const l=(0,s.lazy)(()=>Promise.all([t.e(2826),t.e(9546),t.e(450)]).then(t.bind(t,80450))),a=(0,o.observer)(function({model:e}){return e.initialized?(0,r.jsx)(i.default,{model:e}):(0,r.jsx)(l,{model:e})})},46791:(e,n,t)=>{t.r(n),t.d(n,{default:()=>H});var s=t(68446),o=t(75785),i=t(7552),r=t(23758),l=t(90542),a=t(2020),c=t(31294),d=t(36866),u=t(99546),f=t(53179),m=t(61282),b=t(69500);const h=(0,o.n9)()(()=>({bp:{display:"flex",alignItems:"center",marginLeft:10},searchBox:{display:"flex"}})),p=(0,s.observer)(function({view:e}){const{classes:n}=h(),{assemblyDisplayNames:t,coarseTotalBp:s}=e;return(0,b.jsxs)("span",{className:n.searchBox,children:[(0,b.jsx)(f.Gd,{model:e,showHelp:!1}),(0,b.jsxs)(m.A,{variant:"body2",color:"textSecondary",className:n.bp,children:[t.join(",")," ",(0,u.getBpDisplayStr)(s)]})]})}),v=(0,o.n9)()({inline:{display:"inline-flex"}}),x=(0,s.observer)(function({model:e}){const{classes:n}=v(),{views:t}=e,[s,o]=(0,i.useState)(t.length<=3),[u,f]=(0,i.useState)(t.length<=3);return(0,b.jsxs)(d.A,{row:!0,children:[(0,b.jsx)(r.A,{menuItems:[{label:"Synteny track selectors",type:"subMenu",subMenu:t.slice(0,-1).map((n,s)=>({label:`Row ${s+1}->${s+2} (${t[s].assemblyNames.join(",")}->${t[s+1].assemblyNames.join(",")})`,onClick:()=>{e.activateTrackSelector(s)}}))},{label:"Row track selectors",type:"subMenu",subMenu:t.map((e,n)=>({label:`Row ${n+1} track selector (${e.assemblyNames.join(",")})`,onClick:()=>e.activateTrackSelector()}))}],children:(0,b.jsx)(l.xU,{})}),(0,b.jsx)(r.A,{menuItems:[{label:"Row view menus",type:"subMenu",subMenu:t.map((e,n)=>({label:`View ${n+1} Menu`,subMenu:e.menuItems()}))},...e.headerMenuItems()],children:(0,b.jsx)(a.A,{})}),(0,b.jsx)(r.A,{menuItems:[{label:"Show search boxes",type:"checkbox",checked:s,onClick:()=>{o(!s)}},{label:"Orientation - Side-by-side",type:"radio",checked:u,onClick:()=>{f(!u)}},{label:"Orientation - Vertical",type:"radio",checked:!u,onClick:()=>{f(!u)}}],children:(0,b.jsx)(c.A,{})}),s?(0,b.jsx)("span",{className:u?n.inline:void 0,children:t.map(e=>(0,b.jsx)(p,{view:e},e.id))}):null]})});var g=t(67758),j=t(68584),w=t(67112);const y=(0,o.n9)()({container:{display:"grid"},overlay:{zIndex:100,gridArea:"1/1"},resizeHandle:{height:4,background:"#ccc"}});function k(e){const n=(0,g.c)(5),{view:t}=e;let s;if(n[0]!==t){const{pluginManager:e}=(0,u.getEnv)(t);s=e.getViewType(t.type),n[0]=t,n[1]=s}else s=n[1];const{ReactComponent:o}=s;let i;return n[2]!==o||n[3]!==t?(i=(0,b.jsx)(o,{model:t}),n[2]=o,n[3]=t,n[4]=i):i=n[4],i}const M=(0,s.observer)(function({model:e}){const{classes:n}=y(),{views:t,levels:s}=e;return(0,b.jsx)("div",{className:n.container,children:t.map((t,o)=>(0,b.jsxs)(b.Fragment,{children:[o>0?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:n.container,children:(0,b.jsx)(O,{model:e,level:o-1})}),(0,b.jsx)(w.ResizeHandle,{onDrag:e=>s[o-1]?.setHeight((s[o-1]?.height||0)+e),className:n.resizeHandle})]}):null,(0,b.jsx)(k,{view:t})]},t.id))})}),O=(0,s.observer)(function({model:e,level:n}){const{classes:t}=y();return(0,b.jsx)(b.Fragment,{children:e.levels[n]?.tracks.map(e=>{const[n]=e.displays,{RenderingComponent:s}=n,o=(0,j.getConf)(e,"trackId");return s?(0,b.jsx)("div",{className:t.overlay,style:{height:n.height,overflow:"hidden"},children:(0,b.jsx)(s,{model:n})},o):null})})}),B=M;var C=t(62266),S=t(37962);function N(e){const n=(0,g.c)(8),{anchorEl:t,side:s,text:o}=e,i="left"===s?"left-start":"right-start";let r,l,a,c;return n[0]===Symbol.for("react.memo_cache_sentinel")?(r=[{name:"offset",options:{offset:[-30,-10]}}],n[0]=r):r=n[0],n[1]!==t?(l={popper:{anchorEl:t,modifiers:r}},n[1]=t,n[2]=l):l=n[2],n[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,b.jsx)("span",{}),n[3]=a):a=n[3],n[4]!==i||n[5]!==l||n[6]!==o?(c=(0,b.jsx)(S.A,{title:o,open:!0,placement:i,slotProps:l,children:a}),n[4]=i,n[5]=l,n[6]=o,n[7]=c):c=n[7],c}const I=(0,o.n9)()(e=>{const{tertiary:n}=e.palette;return{rubberband:{height:"100%",background:(0,C.X4)(n.light,.7),position:"absolute",zIndex:830,textAlign:"center"},rubberbandText:{color:e.palette.tertiary.contrastText}}});function T(e){const n=(0,g.c)(19),{leftBpOffset:t,rightBpOffset:s,numOfBpSelected:o,left:r,width:l,top:a,sticky:c}=e,d=void 0===a?0:a,u=void 0!==c&&c,{classes:f}=I(),[h,p]=(0,i.useState)(null);let v,x,j,w,y;return n[0]!==h||n[1]!==t||n[2]!==s?(v=h?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(N,{side:"left",anchorEl:h,text:t.map(D)}),(0,b.jsx)(N,{side:"right",anchorEl:h,text:s.map(E)})]}):null,n[0]=h,n[1]=t,n[2]=s,n[3]=v):v=n[3],n[4]!==r||n[5]!==l?(x={left:r,width:l},n[4]=r,n[5]=l,n[6]=x):x=n[6],n[7]!==f.rubberbandText||n[8]!==o||n[9]!==u||n[10]!==d?(j=o?(0,b.jsx)(m.A,{ref:e=>{p(e)},variant:"h6",className:f.rubberbandText,style:{top:d,position:u?"sticky":void 0},children:o.map(A)}):null,n[7]=f.rubberbandText,n[8]=o,n[9]=u,n[10]=d,n[11]=j):j=n[11],n[12]!==f.rubberband||n[13]!==x||n[14]!==j?(w=(0,b.jsx)("div",{className:f.rubberband,style:x,children:j}),n[12]=f.rubberband,n[13]=x,n[14]=j,n[15]=w):w=n[15],n[16]!==v||n[17]!==w?(y=(0,b.jsxs)(b.Fragment,{children:[v,w]}),n[16]=v,n[17]=w,n[18]=y):y=n[18],y}function A(e,n){return(0,b.jsx)("div",{children:(0,u.getBpDisplayStr)(e)},n)}function E(e,n){return(0,b.jsx)("div",{children:(0,u.stringify)(e,!0)},`JSON.stringify(l)-${n}`)}function D(e,n){return(0,b.jsx)("div",{children:(0,u.stringify)(e,!0)},`JSON.stringify(l)-${n}`)}const X=(0,o.n9)()({guide:{pointerEvents:"none",height:"100%",width:1,position:"absolute",background:"red",zIndex:1001}}),R=(0,s.observer)(function({model:e,coordX:n}){const{classes:t}=X();return(0,b.jsx)(S.A,{open:!0,placement:"top",title:e.views.map(e=>e.pxToBp(n)).map((e,n)=>(0,b.jsx)("div",{children:(0,u.stringify)(e,!0)},[JSON.stringify(e),n].join("-"))),arrow:!0,children:(0,b.jsx)("div",{className:t.guide,style:{left:n}})})});var z=t(42489);function P(e,n){return e.clientX-(n?.getBoundingClientRect().left||0)}const $=(0,o.n9)()({rubberbandControl:{cursor:"crosshair",width:"100%",minHeight:8,position:"relative",zIndex:900}}),_=(0,s.observer)(function({model:e,ControlComponent:n=(0,b.jsx)("div",{})}){const t=(0,i.useRef)(null),{classes:s}=$(),{guideX:o,rubberbandOn:r,leftBpOffset:l,rightBpOffset:a,numOfBpSelected:c,width:d,left:u,anchorPosition:f,open:m,handleMenuItemClick:h,handleClose:p,mouseMove:v,mouseDown:x,mouseOut:g}=function(e,n){const[t,s]=(0,i.useState)(),[o,r]=(0,i.useState)(),[l,a]=(0,i.useState)(),[c,d]=(0,i.useState)(),u=void 0!==t&&void 0===l;function f(n){n.preventDefault(),n.stopPropagation();const t=P(n,e.current);s(t),r(t)}function m(n){d(P(n,e.current))}function b(){d(void 0),(0,z.transaction)(()=>{for(const e of n.views)e.setOffsets(void 0,void 0)})}function h(){a(void 0),s(void 0),r(void 0)}function p(e,n){n(),h()}(0,i.useEffect)(()=>{function s(n){if(e.current&&u){const t=P(n,e.current);r(t)}}function o(s){if(void 0!==t&&e.current){const{clientX:o,clientY:i}=s,r=P(s,e.current);a({offsetX:r,clientX:o,clientY:i});const l=function(e){if(void 0===t)return;const s=Math.min(t,e),o=Math.max(t,e);return n.views.map(e=>({leftOffset:e.pxToBp(s),rightOffset:e.pxToBp(o)}))}(r);l&&(0,z.transaction)(()=>{for(const[e,t]of l.entries())n.views[e].setOffsets(t.leftOffset,t.rightOffset)}),d(void 0)}}return u?(window.addEventListener("mousemove",s),window.addEventListener("mouseup",o),()=>{window.removeEventListener("mousemove",s),window.removeEventListener("mouseup",o)}):()=>{}},[t,u,n,e]),(0,i.useEffect)(()=>{!u&&void 0!==o&&void 0!==t&&Math.abs(o-t)<=3&&h()},[u,o,t]);const v=Boolean(l);if(void 0===t)return{open:v,guideX:c,mouseDown:f,mouseMove:m,mouseOut:b,handleMenuItemClick:p};const x=l?l.offsetX:o||0,g=Math.min(x,t),j=Math.abs(x-t);return{open:v,rubberbandOn:!0,mouseDown:f,mouseMove:m,mouseOut:b,handleClose:h,handleMenuItemClick:p,leftBpOffset:n.views.map(e=>e.pxToBp(g)),rightBpOffset:n.views.map(e=>e.pxToBp(g+j)),anchorPosition:l,numOfBpSelected:n.views.map(e=>Math.ceil(j*e.bpPerPx)),width:j,left:g}}(t,e);return(0,b.jsxs)(b.Fragment,{children:[void 0!==o?(0,b.jsx)(R,{model:e,coordX:o}):r?(0,b.jsx)(T,{leftBpOffset:l,rightBpOffset:a,numOfBpSelected:c,width:d,left:u}):null,f?(0,b.jsx)(w.Menu,{anchorReference:"anchorPosition",anchorPosition:{left:f.clientX,top:f.clientY},onMenuItemClick:h,open:m,onClose:p,menuItems:e.rubberBandMenuItems()}):null,(0,b.jsx)("div",{"data-testid":"rubberband_controls",className:s.rubberbandControl,ref:t,onMouseDown:x,onMouseMove:v,onMouseOut:g,children:n})]})}),F=(0,o.n9)()(e=>({rubberbandContainer:{position:"relative",overflow:"hidden"},rubberbandDiv:{width:"100%",background:e.palette.action.disabledBackground,height:15,"&:hover":{background:e.palette.action.selected}}})),H=(0,s.observer)(function({model:e}){const{classes:n}=F();return(0,b.jsxs)("div",{className:n.rubberbandContainer,children:[(0,b.jsx)(x,{model:e}),(0,b.jsx)(_,{model:e,ControlComponent:(0,b.jsx)("div",{className:n.rubberbandDiv})}),(0,b.jsx)(B,{model:e})]})})}}]);
//# sourceMappingURL=3795.38420761.chunk.js.map