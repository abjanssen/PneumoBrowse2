"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[4902],{14902(e,t,n){n.r(t),n.d(t,{default:()=>a});var r=n(30128),i=n(45084),o=n(23886),l=n(69566),s=n(17253),u=n(44460);const a=(0,l.observer)(function(e){const{arr:t,width:n,displayModel:l,featureData:a,totalHeight:c,origScrollTop:g,rowHeight:p,simplifiedFeatures:h,renderingProps:f}=e,d=(0,r.useRef)(null),v=(0,r.useRef)(void 0),b=(0,r.useCallback)((e,r)=>{if(!d.current)return;const i=d.current.getBoundingClientRect(),u=e-i.left,c=r-i.top,{sources:h}=l,f=c-g,v=Math.floor(g/p),b=Math.floor(f/p),m=v+b,y=h?.[m]?.name,_=Math.floor(u/n*t.length),k=t[_]?.[b],C=a[_];if(k&&y&&C){const{ref:e,alt:t,name:n,description:r,length:i}=C;return{name:y,genotype:k,alleles:(0,s.Fm)(k,e,t),featureName:n,description:t.length>=3?"multiple ALT alleles":r,length:(0,o.getBpDisplayStr)(i)}}},[t,n,l,a,g,p]),m=(0,r.useCallback)(e=>{const t=b(e.clientX,e.clientY),n=t?`${t.name}:${t.genotype}`:void 0;n!==v.current&&(v.current=n,l.setHoveredGenotype(t))},[b,l]),y=(0,r.useCallback)(()=>{void 0!==v.current&&(v.current=void 0,l.setHoveredGenotype(void 0))},[l]),_=(0,r.useCallback)(e=>{if(!d.current||!h)return;const r=d.current.getBoundingClientRect(),i=e.clientX-r.left,o=Math.floor(i/n*t.length),l=h[o];l&&f?.onFeatureClick?.(e,l.uniqueId)},[t.length,n,h,f]);return(0,u.jsx)("div",{ref:d,onMouseMove:m,onMouseLeave:y,onMouseOut:y,onClick:_,style:{overflow:"visible",position:"relative",height:c},children:(0,u.jsx)(i.A,{...e,style:{position:"absolute",left:0,top:g}})})})},17253(e,t,n){n.d(t,{Fm:()=>p,M_:()=>a,bC:()=>g});var r=n(20208),i=n(23886);const o=/[/|]/;function l(e){return e.includes("[")||e.includes("]")||e.startsWith(".")||e.endsWith(".")}function s(e){return e.startsWith("<")||l(e)}const u={"<DEL>":"deletion","<INS>":"insertion","<DUP>":"duplication","<INV>":"inversion","<INVDUP>":"inverted_duplication","<CNV>":"copy_number_variation","<TRA>":"translocation","<DUP:TANDEM>":"tandem_duplication","<NON_REF>":"sequence_variant","<*>":"sequence_variant"};function a(e,t,n){if(!t||0===t.length)return["remark","no alternative alleles"];const o=t.map(t=>function(e,t,n){if(e.startsWith("<"))return c(e,n)??"variant";if(l(e)&&(0,r.An)(e))return"breakend";const i=t.length,o=e.length;return 1===i&&1===o?"SNV":i===o?function(e,t){return e.split("").reverse().join("")===t}(t,e)?"inversion":"substitution":i<o?"insertion":"deletion"}(t,e,n)),u=[...new Set(o)],a=function(e,t){if(t.every(s))return t.join(",");const n=e.length;return`${e.length>10?(0,i.getBpDisplayStr)(n):e} -> ${t.map(e=>e.length>10?(0,i.getBpDisplayStr)(e.length):e).join(",")}`}(e,t);return[u.join(","),a]}function c(e,t){if(u[e])return u[e];if(t.getMetadata("ALT",e))return"sequence_variant";const n=e.slice(1,-1).split(":");return n.length>1?c(`<${n.slice(0,-1).join(":")}>`,t):void 0}function g(e,t){if(s(t)||1===e.length&&1===t.length)return t;const n=e.length,r=t.length;return n>5||r>5?`${(0,i.getBpDisplayStr)(n)} -> ${(0,i.getBpDisplayStr)(r)}`:`${e} -> ${t}`}function p(e,t,n){return e.split(o).map(e=>"."===e?".":0===+e?`ref(${t.length<10?t:(0,i.getBpDisplayStr)(t.length)})`:g(t,n[+e-1]||"")).join(e.includes("|")?"|":"/")}}}]);
//# sourceMappingURL=4902.00ab41a6.chunk.js.map