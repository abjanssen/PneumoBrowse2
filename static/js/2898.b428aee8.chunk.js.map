{"version":3,"file":"static/js/2898.b428aee8.chunk.js","mappings":"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","sources":["webpack://@jbrowse/web/../../plugins/alignments/src/LinearSNPCoverageDisplay/components/ArcTooltipContents.tsx","webpack://@jbrowse/web/../../plugins/alignments/src/LinearSNPCoverageDisplay/components/SashimiArcs.tsx","webpack://@jbrowse/web/../../plugins/alignments/src/LinearSNPCoverageDisplay/components/SNPCoverageDisplayComponent.tsx","webpack://@jbrowse/web/../../plugins/alignments/src/LinearSNPCoverageDisplay/components/arcUtils.ts"],"sourcesContent":["import { toLocale } from '@jbrowse/core/util'\n\nimport { getStrandLabel } from './arcUtils.ts'\n\nimport type { ArcData } from './arcUtils.ts'\n\nexport default function ArcTooltipContents({ arc }: { arc: ArcData }) {\n  return (\n    <div>\n      <div>\n        <strong>Intron/Skip</strong>\n      </div>\n      <div>\n        Location: {arc.refName}:{toLocale(arc.start)}-{toLocale(arc.end)}\n      </div>\n      <div>Length: {toLocale(arc.end - arc.start)} bp</div>\n      <div>Reads supporting junction: {arc.score}</div>\n      <div>Strand: {getStrandLabel(arc.strand)}</div>\n    </div>\n  )\n}\n","import { useEffect, useMemo, useRef, useState } from 'react'\n\nimport BaseTooltip from '@jbrowse/core/ui/BaseTooltip'\nimport {\n  getContainingTrack,\n  getContainingView,\n  getSession,\n  isSessionModelWithWidgets,\n  notEmpty,\n} from '@jbrowse/core/util'\nimport { observer } from 'mobx-react'\n\nimport ArcTooltipContents from './ArcTooltipContents.tsx'\nimport { featureToArcData, getArcSelectedColor } from './arcUtils.ts'\n\nimport type { ArcData } from './arcUtils.ts'\nimport type { Feature } from '@jbrowse/core/util'\nimport type { LinearGenomeViewModel } from '@jbrowse/plugin-linear-genome-view'\n\nconst YSCALEBAR_LABEL_OFFSET = 5\nconst SVGNS = 'http://www.w3.org/2000/svg'\n\nexport interface ArcDisplayModel {\n  showArcsSetting: boolean\n  height: number\n  skipFeatures: Feature[]\n}\n\nconst SashimiArcs = observer(function SashimiArcs({\n  model,\n}: {\n  model: ArcDisplayModel\n}) {\n  const { showArcsSetting, height, skipFeatures } = model\n  const view = getContainingView(model) as LinearGenomeViewModel\n  const { assemblyManager } = getSession(model)\n  const [hoverInfo, setHoverInfo] = useState<{\n    arc: ArcData\n    x: number\n    y: number\n  } | null>(null)\n  const [selectedArcId, setSelectedArcId] = useState<string | null>(null)\n\n  const svgRef = useRef<SVGSVGElement>(null)\n  const arcMapRef = useRef<Map<string, ArcData>>(new Map())\n  const pathMapRef = useRef<Map<string, SVGPathElement>>(new Map())\n  const selectedArcIdRef = useRef<string | null>(null)\n  selectedArcIdRef.current = selectedArcId\n\n  const width = Math.round(view.dynamicBlocks.totalWidthPx)\n  const effectiveHeight = height - YSCALEBAR_LABEL_OFFSET * 2\n\n  const { arcs, drawnAtBpPerPx, drawnAtOffsetPx } = useMemo(() => {\n    const currentOffsetPx = view.offsetPx\n    const assembly = assemblyManager.get(view.assemblyNames[0]!)\n    return {\n      arcs: assembly\n        ? skipFeatures\n            .map(f =>\n              featureToArcData(\n                f,\n                view,\n                effectiveHeight,\n                currentOffsetPx,\n                assembly,\n              ),\n            )\n            .filter(notEmpty)\n        : [],\n      drawnAtBpPerPx: view.bpPerPx,\n      drawnAtOffsetPx: currentOffsetPx,\n    }\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [skipFeatures, view.bpPerPx, effectiveHeight])\n\n  // Direct DOM manipulation - bypasses React VDOM for path elements\n  useEffect(() => {\n    const svg = svgRef.current\n    if (!svg) {\n      return\n    }\n\n    // Clear existing paths\n    while (svg.firstChild) {\n      svg.firstChild.remove()\n    }\n\n    // Build lookup maps\n    const arcMap = new Map<string, ArcData>()\n    const pathMap = new Map<string, SVGPathElement>()\n\n    // Event handlers (shared across all paths)\n    const handleMouseEnter = (event: MouseEvent) => {\n      const target = event.currentTarget as SVGPathElement\n      const id = target.dataset.id\n      if (id) {\n        const arc = arcMap.get(id)\n        if (arc) {\n          setHoverInfo({ arc, x: event.clientX, y: event.clientY })\n          const isSelected = id === selectedArcIdRef.current\n          // Add hover shading - increase opacity and stroke width\n          target.setAttribute('opacity', '1')\n          target.setAttribute(\n            'stroke-width',\n            String(arc.strokeWidth + (isSelected ? 4 : 2)),\n          )\n        }\n      }\n    }\n    const handleMouseLeave = (event: MouseEvent) => {\n      const target = event.currentTarget as SVGPathElement\n      const id = target.dataset.id\n      if (id) {\n        const arc = arcMap.get(id)\n        if (arc) {\n          const isSelected = id === selectedArcIdRef.current\n          // Restore styling (selected or original)\n          target.setAttribute('opacity', '0.7')\n          if (isSelected) {\n            target.setAttribute('stroke', getArcSelectedColor(arc.strand))\n            target.setAttribute('stroke-width', String(arc.strokeWidth + 3))\n          } else {\n            target.setAttribute('stroke', arc.stroke)\n            target.setAttribute('stroke-width', String(arc.strokeWidth))\n          }\n        }\n      }\n      setHoverInfo(null)\n    }\n    const handleClick = (event: MouseEvent) => {\n      const target = event.currentTarget as SVGPathElement\n      const id = target.dataset.id\n      if (id) {\n        setSelectedArcId(prev => (prev === id ? null : id))\n        const arc = arcMap.get(id)\n        if (arc) {\n          const session = getSession(model)\n          if (isSessionModelWithWidgets(session)) {\n            const featureWidget = session.addWidget(\n              'BaseFeatureWidget',\n              'baseFeature',\n              {\n                featureData: {\n                  uniqueId: arc.id,\n                  refName: arc.refName,\n                  start: arc.start,\n                  end: arc.end,\n                  type: 'junction',\n                  strand: arc.strand,\n                  score: arc.score,\n                  length: arc.end - arc.start,\n                },\n                view: getContainingView(model),\n                track: getContainingTrack(model),\n              },\n            )\n            session.showWidget(featureWidget)\n          }\n        }\n      }\n    }\n\n    // Create paths directly in DOM (sorted by score so high-scoring arcs render on top)\n    const sortedArcs = [...arcs].sort((a, b) => a.score - b.score)\n    for (const arc of sortedArcs) {\n      arcMap.set(arc.id, arc)\n      const path = document.createElementNS(SVGNS, 'path')\n      path.setAttribute('d', arc.path)\n      path.setAttribute('stroke', arc.stroke)\n      path.setAttribute('stroke-width', String(arc.strokeWidth))\n      path.setAttribute('fill', 'none')\n      path.setAttribute('opacity', '0.7')\n      path.setAttribute('pointer-events', 'stroke')\n      path.setAttribute('cursor', 'pointer')\n      path.dataset.id = arc.id\n      path.addEventListener('mouseenter', handleMouseEnter)\n      path.addEventListener('mouseleave', handleMouseLeave)\n      path.addEventListener('click', handleClick)\n      pathMap.set(arc.id, path)\n      svg.append(path)\n    }\n\n    arcMapRef.current = arcMap\n    pathMapRef.current = pathMap\n\n    // Cleanup\n    return () => {\n      while (svg.firstChild) {\n        const child = svg.firstChild as SVGPathElement\n        child.removeEventListener('mouseenter', handleMouseEnter)\n        child.removeEventListener('mouseleave', handleMouseLeave)\n        child.removeEventListener('click', handleClick)\n        child.remove()\n      }\n    }\n  }, [arcs, model])\n\n  // Update selected arc styling when selection changes\n  useEffect(() => {\n    const pathMap = pathMapRef.current\n    const arcMap = arcMapRef.current\n    for (const [id, path] of pathMap) {\n      const arc = arcMap.get(id)\n      if (arc) {\n        if (id === selectedArcId) {\n          // Selected: darker stroke color\n          path.setAttribute('stroke', getArcSelectedColor(arc.strand))\n          path.setAttribute('stroke-width', String(arc.strokeWidth + 3))\n        } else {\n          // Not selected: restore original\n          path.setAttribute('stroke', arc.stroke)\n          path.setAttribute('stroke-width', String(arc.strokeWidth))\n        }\n      }\n    }\n  }, [selectedArcId])\n\n  if (\n    !showArcsSetting ||\n    !view.initialized ||\n    drawnAtBpPerPx !== view.bpPerPx\n  ) {\n    return null\n  }\n\n  const left = drawnAtOffsetPx - view.offsetPx\n\n  return (\n    <>\n      <svg\n        ref={svgRef}\n        style={{\n          position: 'absolute',\n          top: YSCALEBAR_LABEL_OFFSET,\n          left,\n          pointerEvents: 'none',\n          height: effectiveHeight,\n          width,\n        }}\n      />\n      {hoverInfo ? (\n        <BaseTooltip clientPoint={{ x: hoverInfo.x + 5, y: hoverInfo.y }}>\n          <ArcTooltipContents arc={hoverInfo.arc} />\n        </BaseTooltip>\n      ) : null}\n    </>\n  )\n})\n\nexport default SashimiArcs\n","import { LinearWiggleDisplayReactComponent } from '@jbrowse/plugin-wiggle'\nimport { observer } from 'mobx-react'\n\nimport SashimiArcs from './SashimiArcs.tsx'\n\nimport type { SNPCoverageDisplayModel } from '../model.ts'\n\nconst SNPCoverageDisplayComponent = observer(\n  function SNPCoverageDisplayComponent(props: {\n    model: SNPCoverageDisplayModel\n  }) {\n    const { model } = props\n\n    return (\n      <div style={{ position: 'relative' }}>\n        <LinearWiggleDisplayReactComponent {...props} />\n        <SashimiArcs model={model} />\n      </div>\n    )\n  },\n)\n\nexport default SNPCoverageDisplayComponent\n","import type { Assembly } from '@jbrowse/core/assemblyManager/assembly'\nimport type { Feature } from '@jbrowse/core/util'\nimport type { LinearGenomeViewModel } from '@jbrowse/plugin-linear-genome-view'\n\nexport interface ArcData {\n  id: string\n  path: string\n  stroke: string\n  strokeWidth: number\n  start: number\n  end: number\n  refName: string\n  score: number\n  strand: number\n}\n\nexport function getArcColor(strand: number) {\n  return strand === 1\n    ? 'rgba(255,170,170,0.7)'\n    : strand === -1\n      ? 'rgba(160,160,255,0.7)'\n      : 'rgba(200,200,200,0.7)'\n}\n\nexport function getArcSelectedColor(strand: number) {\n  return strand === 1\n    ? 'rgba(255,100,100,1)'\n    : strand === -1\n      ? 'rgba(100,100,255,1)'\n      : 'rgba(120,120,120,1)'\n}\n\nexport function getStrandLabel(strand: number) {\n  return strand === 1 ? '+' : strand === -1 ? '-' : 'unknown'\n}\n\nexport function featureToArcData(\n  feature: Feature,\n  view: LinearGenomeViewModel,\n  effectiveHeight: number,\n  offsetPx: number,\n  assembly: Assembly,\n): ArcData | undefined {\n  const start = feature.get('start')\n  const end = feature.get('end')\n  const refName = assembly.getCanonicalRefName2(feature.get('refName'))\n\n  const startPx = view.bpToPx({ refName, coord: start })\n  const endPx = view.bpToPx({ refName, coord: end })\n\n  if (startPx === undefined || endPx === undefined) {\n    return undefined\n  }\n\n  const left = startPx.offsetPx - offsetPx\n  const right = endPx.offsetPx - offsetPx\n  const strand = feature.get('effectiveStrand') ?? 0\n  const score = feature.get('score') ?? 1\n\n  return {\n    id: feature.id(),\n    path: `M ${left} ${effectiveHeight * 0.9} C ${left} ${effectiveHeight * 0.1}, ${right} ${effectiveHeight * 0.1}, ${right} ${effectiveHeight * 0.9}`,\n    stroke: getArcColor(strand),\n    strokeWidth: Math.log(score + 1),\n    start,\n    end,\n    refName,\n    score,\n    strand,\n  }\n}\n"],"names":["ArcTooltipContents","t0","$","_c","arc","t1","Symbol","for","_jsx","children","t2","refName","t3","t4","t5","start","toLocale","end","_jsxs","t6","t7","t8","t9","t10","t11","t12","score","strand","getStrandLabel","observer","model","showArcsSetting","height","skipFeatures","view","getContainingView","assemblyManager","getSession","hoverInfo","setHoverInfo","useState","selectedArcId","setSelectedArcId","svgRef","useRef","arcMapRef","Map","pathMapRef","selectedArcIdRef","current","width","Math","round","dynamicBlocks","totalWidthPx","effectiveHeight","YSCALEBAR_LABEL_OFFSET","arcs","drawnAtBpPerPx","drawnAtOffsetPx","useMemo","currentOffsetPx","offsetPx","assembly","get","assemblyNames","map","f","featureToArcData","filter","notEmpty","bpPerPx","useEffect","svg","firstChild","remove","arcMap","pathMap","handleMouseEnter","event","target","currentTarget","id","dataset","x","clientX","y","clientY","isSelected","setAttribute","String","strokeWidth","handleMouseLeave","getArcSelectedColor","stroke","handleClick","prev","session","isSessionModelWithWidgets","featureWidget","addWidget","featureData","uniqueId","type","length","track","getContainingTrack","showWidget","sortedArcs","sort","a","b","set","path","document","createElementNS","addEventListener","append","child","removeEventListener","initialized","left","_Fragment","ref","style","position","top","pointerEvents","BaseTooltip","clientPoint","props","LinearWiggleDisplayReactComponent","SashimiArcs","getArcColor","feature","getCanonicalRefName2","startPx","bpToPx","coord","endPx","undefined","right","log"],"sourceRoot":""}