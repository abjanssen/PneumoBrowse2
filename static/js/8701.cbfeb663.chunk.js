"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[8701],{78701(e,t,n){n.r(t),n.d(t,{default:()=>u});var r=n(42918),i=n(93111),o=n(77251),l=n(64074),s=n(96960),a=n(32118);const u=(0,l.observer)(function(e){const{arr:t,width:n,displayModel:l,featureData:u,totalHeight:c,origScrollTop:p,rowHeight:h}=e,g=(0,r.useRef)(null),f=(0,r.useRef)(void 0),d=(0,r.useCallback)((e,r)=>{if(!g.current)return;const i=g.current.getBoundingClientRect(),a=e-i.left,c=r-i.top,{sources:f}=l,d=c-p,v=Math.floor(p/h),b=Math.floor(d/h),y=v+b,m=f?.[y]?.name,_=Math.floor(a/n*t.length),D=t[_]?.[b],M=u[_];if(D&&m&&M){const{ref:e,alt:t,name:n,description:r,length:i}=M;return{name:m,genotype:D,alleles:(0,s.Fm)(D,e,t),featureName:n,description:t.length>=3?"multiple ALT alleles":r,length:(0,o.getBpDisplayStr)(i)}}},[t,n,l,u,p,h]),v=(0,r.useCallback)(e=>{const t=d(e.clientX,e.clientY),n=t?`${t.name}:${t.genotype}`:void 0;n!==f.current&&(f.current=n,l.setHoveredGenotype(t))},[d,l]),b=(0,r.useCallback)(()=>{void 0!==f.current&&(f.current=void 0,l.setHoveredGenotype(void 0))},[l]);return(0,a.jsx)("div",{ref:g,onMouseMove:v,onMouseLeave:b,onMouseOut:b,style:{overflow:"visible",position:"relative",height:c},children:(0,a.jsx)(i.A,{...e,style:{position:"absolute",left:0,top:p}})})})},96960(e,t,n){n.d(t,{Fm:()=>h,M_:()=>u,bC:()=>p});var r=n(93750),i=n(77251);const o=/[/|]/;function l(e){return e.includes("[")||e.includes("]")||e.startsWith(".")||e.endsWith(".")}function s(e){return e.startsWith("<")||l(e)}const a={"<DEL>":"deletion","<INS>":"insertion","<DUP>":"duplication","<INV>":"inversion","<INVDUP>":"inverted_duplication","<CNV>":"copy_number_variation","<TRA>":"translocation","<DUP:TANDEM>":"tandem_duplication","<NON_REF>":"sequence_variant","<*>":"sequence_variant"};function u(e,t,n){if(!t||0===t.length)return["remark","no alternative alleles"];const o=t.map(t=>function(e,t,n){if(e.startsWith("<"))return c(e,n)??"variant";if(l(e)&&(0,r.h)(e))return"breakend";const i=t.length,o=e.length;return 1===i&&1===o?"SNV":i===o?function(e,t){return e.split("").reverse().join("")===t}(t,e)?"inversion":"substitution":i<o?"insertion":"deletion"}(t,e,n)),a=[...new Set(o)],u=function(e,t){if(t.every(s))return t.join(",");const n=e.length;return`${e.length>10?(0,i.getBpDisplayStr)(n):e} -> ${t.map(e=>e.length>10?(0,i.getBpDisplayStr)(e.length):e).join(",")}`}(e,t);return[a.join(","),u]}function c(e,t){if(a[e])return a[e];if(t.getMetadata("ALT",e))return"sequence_variant";const n=e.slice(1,-1).split(":");return n.length>1?c(`<${n.slice(0,-1).join(":")}>`,t):void 0}function p(e,t){if(s(t)||1===e.length&&1===t.length)return t;const n=e.length,r=t.length;return n>5||r>5?`${(0,i.getBpDisplayStr)(n)} -> ${(0,i.getBpDisplayStr)(r)}`:`${e} -> ${t}`}function h(e,t,n){return e.split(o).map(e=>"."===e?".":0===+e?`ref(${t.length<10?t:(0,i.getBpDisplayStr)(t.length)})`:p(t,n[+e-1]||"")).join(e.includes("|")?"|":"/")}}}]);
//# sourceMappingURL=8701.cbfeb663.chunk.js.map