"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[1822],{31822:(t,e,a)=>{a.d(e,{default:()=>u});var r=a(46377),s=a(99546),i=a(66885),n=a(62718),o=a(34796);function c(t){const e=t.slice(t.lastIndexOf("/")+1);return e.slice(0,e.lastIndexOf("."))}class u extends r.BaseFeatureDataAdapter{static capabilities=["hasResolution","hasLocalStats","hasGlobalStats"];async getAdapters(){const t=this.getSubAdapter;if(!t)throw new Error("no getSubAdapter available");let e=this.getConf("subadapters");return e?.length||(e=this.getConf("bigWigs").map(t=>({type:"BigWigAdapter",source:c(t),bigWigLocation:{uri:t}}))),await Promise.all(e.map(async e=>{const a=(await t(e)).dataAdapter,r=e.source||e.name||function(t){try{if("BigWigAdapter"===t.type&&t.bigWigLocation){const e=t.bigWigLocation;if("uri"in e&&e.uri)return c(e.uri);if("localPath"in e&&e.localPath)return c(e.localPath);if("blob"in e&&e.blob){const t=e.blob;return t.name?c(t.name):void 0}}return}catch(t){return}}(e)||a.id;return{...e,dataAdapter:a,source:r}}))}async getRefNames(t){const e=await this.getAdapters(),a=await Promise.all(e.map(e=>e.dataAdapter.getRefNames(t)));return[...new Set(a.flat())]}async getGlobalStats(t){const e=await this.getAdapters(),a=(await Promise.all(e.map(e=>e.dataAdapter.getGlobalStats?.(t)))).filter(t=>!!t);return{scoreMin:(0,s.min)(a.map(t=>t.scoreMin)),scoreMax:(0,s.max)(a.map(t=>t.scoreMax))}}getFeatures(t,e={}){return(0,i.ObservableCreate)(async a=>{const r=await this.getAdapters();(0,n.h)(...r.map(a=>a.dataAdapter.getFeatures(t,e).pipe((0,o.T)(t=>t.get("source")?t:new s.SimpleFeature({...t.toJSON(),uniqueId:`${a.source}-${t.id()}`,source:a.source}))))).subscribe(a)},e.stopToken)}async getMultiRegionFeatureDensityStats(t){return{featureDensity:0}}async getSources(t){return(await this.getAdapters()).map(({type:t,bigWigLocation:e,dataAdapter:a,...r})=>({...r,name:r.source}))}}}}]);
//# sourceMappingURL=1822.738b8027.chunk.js.map