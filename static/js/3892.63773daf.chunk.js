"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[3892],{57881(e,n,t){t.d(n,{A:()=>C});var o=t(55614),l=t(30128),r=t(46625),s=t(20449),c=t(69301),i=t(64975),a=t(16457),d=t(62633),u=t(59705),m=t(48993),h=t(69566),f=t(31853),p=t.n(f),x=t(44460);const g=(0,r.n)()(e=>({closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}));function j(e){const n=(0,o.c)(2),t=(0,l.useRef)(null);let r;return n[0]!==e?(r=(0,x.jsx)(p(),{nodeRef:t,cancel:'[class*="MuiDialogContent-root"]',onStart:b,children:(0,x.jsx)(c.A,{ref:t,...e})}),n[0]=e,n[1]=r):r=n[1],r}function b(e){return`${e.target?.className}`.includes("MuiDialogTitle")}const C=(0,h.observer)(function(e){const{classes:n}=g(),{title:t,children:o,onClose:l}=e;return(0,x.jsx)(i.A,{...e,PaperComponent:j,children:(0,x.jsxs)(a.A,{children:[(0,x.jsxs)(d.A,{style:{cursor:"move"},children:[t,l?(0,x.jsx)(u.A,{className:n.closeButton,onClick:()=>{l()},children:(0,x.jsx)(s.A,{})}):null]}),(0,x.jsx)(m.A,{}),o]})})})},33892(e,n,t){t.r(n),t.d(n,{default:()=>V});var o=t(55614),l=t(30128),r=t(37472),s=t(97689),c=t(23886),i=t(46625),a=t(94759),d=t(52642),u=t(90632),m=t(4237),h=t(35703),f=t(27529),p=t(20223),x=t(44460);const g=(0,i.n)()({cell:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}});function j(e){return e.name}function b(e){return e.name}const C=function(e){const n=(0,o.c)(92),{rows:t,onChange:i,showTips:C}=e,{classes:w}=g(),[S,A]=(0,l.useState)(null);let v;n[0]===Symbol.for("react.memo_cache_sentinel")?(v=[],n[0]=v):v=n[0];const[y,k]=(0,l.useState)(v);let _,O;if(n[1]!==t[0]||n[2]!==t.length?(_=t.length>0?t[0]:{},n[1]=t[0],n[2]=t.length,n[3]=_):_=n[3],n[4]!==_){const{name:e,color:t,source:o,baseUri:l,...r}=_;O=r,n[4]=_,n[5]=O}else O=n[5];const[M,T]=(0,l.useState)("blue");let E;n[6]===Symbol.for("react.memo_cache_sentinel")?(E={idx:0,field:null},n[6]=E):E=n[6];const[F,R]=(0,l.useState)(E),N=!y.length;let B,H;n[7]===Symbol.for("react.memo_cache_sentinel")?(B=e=>{A(e.currentTarget)},n[7]=B):B=n[7],n[8]!==N?(H=(0,x.jsx)(h.A,{disabled:N,onClick:B,children:"Change color of selected items"}),n[8]=N,n[9]=H):H=n[9];const L=!y.length;let G,I;n[10]!==i||n[11]!==t||n[12]!==y?(G=()=>{i((0,p.BO)([...t],y))},n[10]=i,n[11]=t,n[12]=y,n[13]=G):G=n[13],n[14]===Symbol.for("react.memo_cache_sentinel")?(I=(0,x.jsx)(d.A,{}),n[14]=I):I=n[14];const P=C?"Move selected items up":null;let W;n[15]!==P||n[16]!==L||n[17]!==G?(W=(0,x.jsxs)(h.A,{disabled:L,onClick:G,children:[I,P]}),n[15]=P,n[16]=L,n[17]=G,n[18]=W):W=n[18];const D=!y.length;let z,J;n[19]!==i||n[20]!==t||n[21]!==y?(z=()=>{i((0,p.oJ)([...t],y))},n[19]=i,n[20]=t,n[21]=y,n[22]=z):z=n[22],n[23]===Symbol.for("react.memo_cache_sentinel")?(J=(0,x.jsx)(a.A,{}),n[23]=J):J=n[23];const V=C?"Move selected items down":null;let K;n[24]!==D||n[25]!==z||n[26]!==V?(K=(0,x.jsxs)(h.A,{disabled:D,onClick:z,children:[J,V]}),n[24]=D,n[25]=z,n[26]=V,n[27]=K):K=n[27];const U=!y.length;let Y,$;n[28]!==i||n[29]!==t||n[30]!==y?(Y=()=>{i((0,p.BO)([...t],y,t.length))},n[28]=i,n[29]=t,n[30]=y,n[31]=Y):Y=n[31],n[32]===Symbol.for("react.memo_cache_sentinel")?($=(0,x.jsx)(m.A,{}),n[32]=$):$=n[32];const q=C?"Move selected items to top":null;let Q;n[33]!==U||n[34]!==Y||n[35]!==q?(Q=(0,x.jsxs)(h.A,{disabled:U,onClick:Y,children:[$,q]}),n[33]=U,n[34]=Y,n[35]=q,n[36]=Q):Q=n[36];const X=!y.length;let Z,ee;n[37]!==i||n[38]!==t||n[39]!==y?(Z=()=>{i((0,p.oJ)([...t],y,t.length))},n[37]=i,n[38]=t,n[39]=y,n[40]=Z):Z=n[40],n[41]===Symbol.for("react.memo_cache_sentinel")?(ee=(0,x.jsx)(u.A,{}),n[41]=ee):ee=n[41];const ne=C?"Move selected items to bottom":null;let te,oe,le,re,se,ce,ie,ae,de,ue,me,he,fe,pe,xe,ge;return n[42]!==X||n[43]!==Z||n[44]!==ne?(te=(0,x.jsxs)(h.A,{disabled:X,onClick:Z,children:[ee,ne]}),n[42]=X,n[43]=Z,n[44]=ne,n[45]=te):te=n[45],n[46]!==i||n[47]!==t||n[48]!==y?(oe=e=>{T(e);for(const n of y){const o=t.find(e=>e.name===n);o&&(o.color=e)}i([...t])},n[46]=i,n[47]=t,n[48]=y,n[49]=oe):oe=n[49],n[50]===Symbol.for("react.memo_cache_sentinel")?(le=()=>{A(null)},n[50]=le):le=n[50],n[51]!==S||n[52]!==oe||n[53]!==M?(re=(0,x.jsx)(s.FO,{anchorEl:S,color:M,onChange:oe,onClose:le}),n[51]=S,n[52]=oe,n[53]=M,n[54]=re):re=n[54],n[55]===Symbol.for("react.memo_cache_sentinel")?(se={height:400,width:"100%"},n[55]=se):se=n[55],n[56]===Symbol.for("react.memo_cache_sentinel")?(ce=e=>{k([...e.ids])},n[56]=ce):ce=n[56],n[57]!==i||n[58]!==t?(ie={field:"color",headerName:"Color",renderCell:e=>{const{value:n,id:o}=e;return(0,x.jsx)(s.Ay,{color:n||"blue",onChange:e=>{const n=t.find(e=>e.name===o);n&&(n.color=e),i([...t])}})}},n[57]=i,n[58]=t,n[59]=ie):ie=n[59],n[60]!==t?(ae=(0,c.measureGridWidth)(t.map(j)),n[60]=t,n[61]=ae):ae=n[61],n[62]!==ae?(de={field:"name",headerName:"Name",width:ae},n[62]=ae,n[63]=de):de=n[63],n[64]!==O?(ue=Object.keys(O),n[64]=O,n[65]=ue):ue=n[65],n[66]!==w||n[67]!==t||n[68]!==ue?(me=ue.map(e=>({field:e,renderCell:e=>{const{value:n}=e;return(0,x.jsx)("div",{className:w.cell,children:(0,x.jsx)(r.A,{html:(0,c.getStr)(n)})})},width:(0,c.measureGridWidth)(t.map(n=>`${n[e]}`))})),n[66]=w,n[67]=t,n[68]=ue,n[69]=me):me=n[69],n[70]!==ie||n[71]!==de||n[72]!==me?(he=[ie,de,...me],n[70]=ie,n[71]=de,n[72]=me,n[73]=he):he=n[73],n[74]===Symbol.for("react.memo_cache_sentinel")?(fe=[],n[74]=fe):fe=n[74],n[75]!==F.field||n[76]!==F.idx||n[77]!==i||n[78]!==t?(pe=e=>{const n=e[0],o=(F.idx+1)%2,l=n.field||F.field;R({idx:o,field:l}),i(l?[...t].sort((e,n)=>{const t=(0,c.getStr)(e[l]),r=(0,c.getStr)(n[l]);return 1===o?t.localeCompare(r):r.localeCompare(t)}):t)},n[75]=F.field,n[76]=F.idx,n[77]=i,n[78]=t,n[79]=pe):pe=n[79],n[80]!==t||n[81]!==he||n[82]!==pe?(xe=(0,x.jsx)("div",{style:se,children:(0,x.jsx)(f.z,{disableRowSelectionOnClick:!0,getRowId:b,checkboxSelection:!0,onRowSelectionModelChange:ce,rows:t,rowHeight:25,columnHeaderHeight:33,columns:he,sortModel:fe,onSortModelChange:pe})}),n[80]=t,n[81]=he,n[82]=pe,n[83]=xe):xe=n[83],n[84]!==W||n[85]!==K||n[86]!==Q||n[87]!==te||n[88]!==re||n[89]!==xe||n[90]!==H?(ge=(0,x.jsxs)("div",{children:[H,W,K,Q,te,re,xe]}),n[84]=W,n[85]=K,n[86]=Q,n[87]=te,n[88]=re,n[89]=xe,n[90]=H,n[91]=ge):ge=n[91],ge};var w=t(57881),S=t(63209),A=t(44641),v=t(62088),y=t(54825),k=t(23149);const _=(0,i.n)()({textAreaFont:{fontFamily:"Courier New"}});function O(e){const n=(0,o.c)(29),{onClose:t,currLayout:r}=e,{classes:s}=_(),[c,i]=(0,l.useState)(""),[a,d]=(0,l.useState)();let u,m,f,p,g,j,b,C,w,O,B;return n[0]===Symbol.for("react.memo_cache_sentinel")?(u=(0,x.jsx)(y.A,{children:'Paste CSV or TSV. If a header column is present. First line is a header. If a column called "name" is present, it uses that to connect to IDs in the table, otherwise it uses the first column no.'}),n[0]=u):u=n[0],n[1]!==a?(m=a?(0,x.jsx)(v.A,{error:a}):null,n[1]=a,n[2]=m):m=n[2],n[3]===Symbol.for("react.memo_cache_sentinel")?(f=e=>{i(e.target.value)},n[3]=f):f=n[3],n[4]!==s.textAreaFont?(p={input:{classes:{input:s.textAreaFont}}},n[4]=s.textAreaFont,n[5]=p):p=n[5],n[6]!==p||n[7]!==c?(g=(0,x.jsx)(k.A,{variant:"outlined",multiline:!0,minRows:5,placeholder:"name,population\nHG00098,GBR\nHG00101,GBR\nHG00459,CHS\n...",maxRows:10,fullWidth:!0,value:c,onChange:f,slotProps:p}),n[6]=p,n[7]=c,n[8]=g):g=n[8],n[9]!==m||n[10]!==g?(j=(0,x.jsxs)(S.A,{children:[u,m,g]}),n[9]=m,n[10]=g,n[11]=j):j=n[11],n[12]!==r||n[13]!==t||n[14]!==c?(b=(0,x.jsx)(h.A,{variant:"contained",color:"secondary",onClick:()=>{const e=c.split("\n").map(N).filter(R),n=e[0].split(/[,\t]/gm);if(n.includes("name")){d("");const o=Object.fromEntries(r.map(F)),l=Object.fromEntries(e.slice(1).map(e=>{const t=e.split(/[,\t]/gm),l=Object.fromEntries(t.map((e,t)=>[n[t],e]));return[l.name,{...l,...o[l.name]}]}));t(r.map(e=>({...e,...l[e.name]})))}else d(new Error('No "name" column found on line 1'))},children:"Update rows"}),n[12]=r,n[13]=t,n[14]=c,n[15]=b):b=n[15],n[16]!==r||n[17]!==t||n[18]!==c?(C=(0,x.jsx)(h.A,{variant:"contained",color:"primary",onClick:()=>{const e=c.split("\n").map(E).filter(T),n=e[0].split(/[,\t]/gm);if(n.includes("name")){d("");const o=Object.fromEntries(r.map(M)),l=Object.fromEntries(e.slice(1).map(e=>{const t=e.split(/[,\t]/gm),l=Object.fromEntries(t.map((e,t)=>[n[t],e]));return[l.name,{...l,...o[l.name]}]}));t(r.map(e=>({...l[e.name]})))}else d(new Error('No "name" column found on line 1'))},children:"Replace rows"}),n[16]=r,n[17]=t,n[18]=c,n[19]=C):C=n[19],n[20]!==t?(w=(0,x.jsx)(h.A,{variant:"contained",color:"inherit",onClick:()=>{t()},children:"Cancel"}),n[20]=t,n[21]=w):w=n[21],n[22]!==b||n[23]!==C||n[24]!==w?(O=(0,x.jsxs)(A.A,{children:[b,C,w]}),n[22]=b,n[23]=C,n[24]=w,n[25]=O):O=n[25],n[26]!==O||n[27]!==j?(B=(0,x.jsxs)(x.Fragment,{children:[j,O]}),n[26]=O,n[27]=j,n[28]=B):B=n[28],B}function M(e){return[e.name,e]}function T(e){return!!e}function E(e){return e.trim()}function F(e){return[e.name,e]}function R(e){return!!e}function N(e){return e.trim()}function B(){const e=(0,o.c)(1);let n;return e[0]===Symbol.for("react.memo_cache_sentinel")?(n=(0,x.jsxs)(x.Fragment,{children:["Helpful tips",(0,x.jsxs)("ul",{children:[(0,x.jsx)("li",{children:"You can select rows in the table with the checkboxes"}),(0,x.jsx)("li",{children:"Multi-select is enabled with shift-click and control-click"}),(0,x.jsx)("li",{children:'The "Move selected items up/down" can re-arrange subtracks'}),(0,x.jsx)("li",{children:"Sorting the data grid itself can also re-arrange subtracks"}),(0,x.jsx)("li",{children:"Changes are applied when you hit Submit"}),(0,x.jsx)("li",{children:"You can click and drag the dialog box to move it on the screen"}),(0,x.jsx)("li",{children:"Columns in the table can be hidden using a vertical '...' menu on the right side of each column"})]})]}),e[0]=n):n=e[0],n}var H=t(92558),L=t(18846);function G(e){const n=(0,o.c)(12),{setCurrLayout:t,currLayout:l}=e;if(!l.length||!l[0])return null;let r;n[0]!==l[0]?(r=Object.keys(l[0]).filter(D),n[0]=l[0],n[1]=r):r=n[1];const s=r;let c,i,a;return n[2]!==l||n[3]!==s||n[4]!==t?(c=s.map(e=>(0,x.jsx)(h.A,{variant:"contained",color:"inherit",onClick:()=>{const n=new Map;for(const t of l){const o=n.get(t[e]);o?n.set(t[e],o+1):n.set(t[e],1)}const o=Object.fromEntries([...n.entries()].sort(W).map(P));t(l.map(n=>({...n,color:o[n[e]]})))},children:e},e)),n[2]=l,n[3]=s,n[4]=t,n[5]=c):c=n[5],n[6]!==l||n[7]!==t?(i=(0,x.jsx)(h.A,{onClick:()=>{t(l.map(I))},children:"Clear colors"}),n[6]=l,n[7]=t,n[8]=i):i=n[8],n[9]!==c||n[10]!==i?(a=(0,x.jsxs)("div",{children:["Create color palette based on...",c,i]}),n[9]=c,n[10]=i,n[11]=a):a=n[11],a}function I(e){return{...e,color:void 0}}function P(e,n){return[e[0],H.set1[n]||(0,L.randomColor)(e[0])]}function W(e,n){return e[1]-n[1]}function D(e){return"name"!==e&&"color"!==e&&"source"!==e&&"label"!==e&&"id"!==e&&"HP"!==e}const z=(0,i.n)()({content:{minWidth:800},fr:{float:"right",display:"flex",gap:8}});function J(e){const n=(0,o.c)(19),{model:t,handleClose:r,title:s,enableBulkEdit:i,enableRowPalettizer:a,showTipsStorageKey:d,SourcesGridComponent:u}=e,m=void 0===s?"Color/arrangement editor":s,f=void 0!==i&&i,p=void 0!==a&&a,g=void 0===d?"setColorDialog-showTips":d,{classes:j}=z(),{sources:b}=t,[C,v]=(0,l.useState)(!1);let y,k;n[0]!==b?(y=b||[],n[0]=b,n[1]=y):y=n[1],n[2]!==y?(k=structuredClone(y),n[2]=y,n[3]=k):k=n[3];const[_,M]=(0,l.useState)(k),[T,E]=(0,c.useLocalStorage)(g,!1);let F,R;return n[4]!==u||n[5]!==j||n[6]!==_||n[7]!==f||n[8]!==p||n[9]!==r||n[10]!==t||n[11]!==E||n[12]!==C||n[13]!==T?(F=C&&f?(0,x.jsx)(O,{currLayout:_,onClose:e=>{e&&M(e),v(!1)}}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(S.A,{className:j.content,children:[(0,x.jsxs)("div",{className:j.fr,children:[(0,x.jsx)(h.A,{variant:"contained",onClick:()=>{E(!T)},children:T?"Hide tips":"Show tips"}),f?(0,x.jsx)(h.A,{color:"secondary",variant:"contained",onClick:()=>{v(!C)},children:"Show Bulk row editor"}):null]}),T?(0,x.jsx)(B,{}):null,p?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("br",{}),(0,x.jsx)(G,{currLayout:_,setCurrLayout:M})]}):null,(0,x.jsx)(u,{rows:_,onChange:M,showTips:T})]}),(0,x.jsxs)(A.A,{children:[(0,x.jsx)(h.A,{variant:"contained",type:"submit",color:"inherit",onClick:()=>{t.clearLayout(),M(t.sources||[])},children:"Clear custom settings"}),(0,x.jsx)(h.A,{variant:"contained",color:"secondary",onClick:()=>{r(),M([...t.sources||[]])},children:"Cancel"}),(0,x.jsx)(h.A,{variant:"contained",color:"primary",type:"submit",onClick:()=>{t.setLayout(_),r()},children:"Submit"})]})]}),n[4]=u,n[5]=j,n[6]=_,n[7]=f,n[8]=p,n[9]=r,n[10]=t,n[11]=E,n[12]=C,n[13]=T,n[14]=F):F=n[14],n[15]!==r||n[16]!==F||n[17]!==m?(R=(0,x.jsx)(w.A,{open:!0,onClose:r,maxWidth:"xl",title:m,children:F}),n[15]=r,n[16]=F,n[17]=m,n[18]=R):R=n[18],R}function V(e){const n=(0,o.c)(3),{model:t,handleClose:l}=e,r=t;let s;return n[0]!==l||n[1]!==r?(s=(0,x.jsx)(J,{model:r,handleClose:l,title:"Multi-wiggle color/arrangement editor",enableBulkEdit:!0,enableRowPalettizer:!0,showTipsStorageKey:"multiwiggle-showTips",SourcesGridComponent:C}),n[0]=l,n[1]=r,n[2]=s):s=n[2],s}},20223(e,n,t){t.d(n,{A3:()=>c,BO:()=>r,oJ:()=>s});var o=t(17378),l=t(23886);function r(e,n,t=1){const o=n.map(n=>e.findIndex(e=>e.name===n)).sort((e,n)=>e-n);let l=0;for(const n of o){const o=Math.max(l,n-t);o>=l&&e.splice(o,0,e.splice(n,1)[0]),l+=1}return e}function s(e,n,t=1){const o=n.map(n=>e.findIndex(e=>e.name===n)).sort((e,n)=>n-e);let l=e.length-1;for(const n of o){const o=Math.min(l,n+t);o<=l&&e.splice(o,0,e.splice(n,1)[0]),l-=1}return e}function c(e){const{prefersOffset:n}=e,{trackLabels:t}=(0,l.getContainingView)(e),r=(0,l.getContainingTrack)(e),s=(0,o.FI)(r,"name");return"overlapping"!==t||n?10:(0,l.measureText)(s,12.8)+100}}}]);
//# sourceMappingURL=3892.63773daf.chunk.js.map