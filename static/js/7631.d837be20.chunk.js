"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[7631],{67631(e,t,r){r.r(t),r.d(t,{default:()=>k});var o=r(55614),s=r(30128),a=r(28910),n=r(62088),l=r(23886),i=r(88263),c=r(54825),d=r(23149),p=r(63209),h=r(31961),u=r(78125),m=r(79291),v=r(78921),x=r(42700),A=r(44641),f=r(35703),b=r(44460);function j(e){const t=(0,o.c)(5),{format:r}=e;let s,a,n;return t[0]===Symbol.for("react.memo_cache_sentinel")?(s=(0,b.jsx)(i.A,{size:20,style:{marginRight:20}}),t[0]=s):s=t[0],t[1]!==r?(a=r.toUpperCase(),t[1]=r,t[2]=a):a=t[2],t[3]!==a?(n=(0,b.jsxs)("div",{children:[s,(0,b.jsxs)(c.A,{display:"inline",children:["Creating ",a]})]}),t[3]=a,t[4]=n):n=t[4],n}function g(e){const t=(0,o.c)(6);let r,s,a;return t[0]!==e?(({children:r,...s}=e),t[0]=e,t[1]=r,t[2]=s):(r=t[1],s=t[2]),t[3]!==r||t[4]!==s?(a=(0,b.jsx)("div",{children:(0,b.jsx)(d.A,{...s,children:r})}),t[3]=r,t[4]=s,t[5]=a):a=t[5],a}function y(e,t){return(0,l.useLocalStorage)(`svg-${e}`,t)}function k({model:e,handleClose:t}){const r=(0,l.getSession)(e),o="undefined"!=typeof OffscreenCanvas,[i,k]=(0,s.useState)(o),[C,z]=y("gridlines",!1),[w,S]=(0,s.useState)(!1),[R,P]=(0,s.useState)(),[$,O]=y("format","svg"),[M,T]=y("file","jbrowse.svg"),[N,L]=y("tracklabels","offset"),[V,_]=y("theme",r.themeName||"default");return(0,b.jsxs)(a.A,{open:!0,onClose:t,title:"Export image",children:[(0,b.jsxs)(p.A,{children:[R?(0,b.jsx)(n.A,{error:R}):w?(0,b.jsx)(j,{format:$}):null,(0,b.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,b.jsx)(d.A,{helperText:"filename",value:M,onChange:e=>{T(e.target.value)}}),(0,b.jsxs)(h.A,{value:$,exclusive:!0,onChange:(e,t)=>{t&&(O(t),M.endsWith(".svg")&&"png"===t?T(M.replace(/\.svg$/,".png")):M.endsWith(".png")&&"svg"===t&&T(M.replace(/\.png$/,".svg")))},size:"small",children:[(0,b.jsx)(u.A,{value:"svg",children:"SVG"}),(0,b.jsx)(u.A,{value:"png",children:"PNG"})]})]}),(0,b.jsxs)(g,{select:!0,label:"Track label positioning",variant:"outlined",style:{width:150},value:N,onChange:e=>{L(e.target.value)},children:[(0,b.jsx)(m.A,{value:"offset",children:"Offset"}),(0,b.jsx)(m.A,{value:"overlay",children:"Overlay"}),(0,b.jsx)(m.A,{value:"left",children:"Left"}),(0,b.jsx)(m.A,{value:"none",children:"None"})]}),(0,b.jsx)("br",{}),r.allThemes?(0,b.jsx)(g,{select:!0,label:"Theme",variant:"outlined",value:V,onChange:e=>{_(e.target.value)},children:Object.entries(r.allThemes()).map(([e,t])=>(0,b.jsx)(m.A,{value:e,children:t.name||"(Unknown name)"},e))}):null,(0,b.jsx)(v.A,{control:(0,b.jsx)(x.A,{checked:C,onChange:()=>{z(e=>!e)}}),label:"Show gridlines"}),o?(0,b.jsx)(v.A,{control:(0,b.jsx)(x.A,{checked:i,onChange:()=>{k(e=>!e)}}),label:"Rasterize canvas based tracks? File may be much larger if this is turned off"}):(0,b.jsx)(c.A,{children:"Note: rasterizing layers not yet supported in this browser, so SVG size may be large"})]}),(0,b.jsxs)(A.A,{children:[(0,b.jsx)(f.A,{variant:"contained",color:"secondary",onClick:()=>{t()},children:"Cancel"}),(0,b.jsx)(f.A,{variant:"contained",color:"primary",type:"submit",onClick:async()=>{S(!0),P(void 0);try{await e.exportSvg({rasterizeLayers:i,format:$,filename:M,trackLabels:N,themeName:V,showGridlines:C}),t()}catch(e){console.error(e),P(e)}finally{S(!1)}},children:"Submit"})]})]})}},42700(e,t,r){r.d(t,{A:()=>z});var o=r(30128),s=r(21227),a=r(74533),n=r(94126),l=r(91383),i=r(44460);const c=(0,l.A)((0,i.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),d=(0,l.A)((0,i.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),p=(0,l.A)((0,i.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");var h=r(37540),u=r(73888),m=r(4033),v=r(80638),x=r(39104),A=r(71646),f=r(45639),b=r(30536),j=r(30787);const g=(0,v.Ay)(n.A,{shouldForwardProp:e=>(0,u.A)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.indeterminate&&t.indeterminate,t[`size${(0,h.A)(r.size)}`],"default"!==r.color&&t[`color${(0,h.A)(r.color)}`]]}})((0,x.A)(({theme:e})=>({color:(e.vars||e).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity)}}},...Object.entries(e.palette).filter((0,A.A)()).map(([t])=>({props:{color:t,disableRipple:!1},style:{"&:hover":{backgroundColor:e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity)}}})),...Object.entries(e.palette).filter((0,A.A)()).map(([t])=>({props:{color:t},style:{[`&.${m.A.checked}, &.${m.A.indeterminate}`]:{color:(e.vars||e).palette[t].main},[`&.${m.A.disabled}`]:{color:(e.vars||e).palette.action.disabled}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}))),y=(0,i.jsx)(d,{}),k=(0,i.jsx)(c,{}),C=(0,i.jsx)(p,{}),z=o.forwardRef(function(e,t){const r=(0,f.b)({props:e,name:"MuiCheckbox"}),{checkedIcon:n=y,color:l="primary",icon:c=k,indeterminate:d=!1,indeterminateIcon:p=C,inputProps:u,size:v="medium",disableRipple:x=!1,className:A,slots:z={},slotProps:w={},...S}=r,R=d?p:c,P=d?p:n,$={...r,disableRipple:x,color:l,indeterminate:d,size:v},O=(e=>{const{classes:t,indeterminate:r,color:o,size:s}=e,n={root:["root",r&&"indeterminate",`color${(0,h.A)(o)}`,`size${(0,h.A)(s)}`]},l=(0,a.A)(n,m.w,t);return{...t,...l}})($),M=w.input??u,[T,N]=(0,j.A)("root",{ref:t,elementType:g,className:(0,s.A)(O.root,A),shouldForwardComponentProp:!0,externalForwardedProps:{slots:z,slotProps:w,...S},ownerState:$,additionalProps:{type:"checkbox",icon:o.cloneElement(R,{fontSize:R.props.fontSize??v}),checkedIcon:o.cloneElement(P,{fontSize:P.props.fontSize??v}),disableRipple:x,slots:z,slotProps:{input:(0,b.A)("function"==typeof M?M($):M,{"data-indeterminate":d})}}});return(0,i.jsx)(T,{...N,classes:O})})},4033(e,t,r){r.d(t,{A:()=>n,w:()=>a});var o=r(26743),s=r(2395);function a(e){return(0,s.Ay)("MuiCheckbox",e)}const n=(0,o.A)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"])}}]);
//# sourceMappingURL=7631.d837be20.chunk.js.map