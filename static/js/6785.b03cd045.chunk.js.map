{"version":3,"file":"static/js/6785.b03cd045.chunk.js","mappings":"8OAkBO,SAASA,EAA6BC,IAY3CC,EAAAA,EAAAA,aACED,GACAE,EAAAA,EAAAA,SACEC,UACE,IACE,GAAIH,EAAKI,YACP,OAEF,MAAMC,GAAOC,EAAAA,EAAAA,mBAAkBN,GAC/B,IAAKK,EAAKE,YACR,OAEF,MAAM,WAAEC,IAAeC,EAAAA,EAAAA,YAAWT,IAC5B,cAAEU,GAAkBV,EACpBW,GAAQC,EAAAA,EAAAA,MACdZ,EAAKa,kBAAkBF,GACvB,MAAMG,GAAYC,EAAAA,EAAAA,iBAAgBf,GAC5BgB,QAAiBR,EAAWS,KAChCH,EACA,wBACA,CACEI,QAASb,EAAKc,aAAaC,cAC3BN,YACAJ,gBACAW,eAAiBC,KACXC,EAAAA,EAAAA,SAAQvB,IACVA,EAAKwB,iBAAiBF,OAK1BC,EAAAA,EAAAA,SAAQvB,IACVA,EAAKyB,WAAWT,EAEpB,CAAE,MAAOU,KACFC,EAAAA,EAAAA,IAAiBD,KAAMH,EAAAA,EAAAA,SAAQvB,KAClC4B,QAAQC,MAAMH,IACdjB,EAAAA,EAAAA,YAAWT,GAAM8B,YAAY,GAAGJ,IAAKA,GAEzC,GAEF,CAAEK,KAAM,0BAGd,C","sources":["../../../plugins/wiggle/src/getMultiWiggleSourcesAutorun.ts"],"sourcesContent":["import { getContainingView, getSession } from '@jbrowse/core/util'\nimport { isAbortException } from '@jbrowse/core/util/aborting'\nimport { createStopToken } from '@jbrowse/core/util/stopToken'\nimport { getRpcSessionId } from '@jbrowse/core/util/tracks'\nimport { addDisposer, isAlive } from '@jbrowse/mobx-state-tree'\nimport { autorun } from 'mobx'\n\nimport type { AnyConfigurationModel } from '@jbrowse/core/configuration'\nimport type { StopToken } from '@jbrowse/core/util/stopToken'\nimport type { LinearGenomeViewModel } from '@jbrowse/plugin-linear-genome-view'\n\nexport interface Source {\n  name: string\n  source: string\n  color?: string\n  group?: string\n}\n\nexport function getMultiWiggleSourcesAutorun(self: {\n  quantitativeStatsReady: boolean\n  configuration: AnyConfigurationModel\n  adapterConfig: AnyConfigurationModel\n  autoscaleType: string\n  isMinimized: boolean\n  adapterProps: () => Record<string, unknown>\n  setSourcesLoading: (aborter: StopToken) => void\n  setError: (error: unknown) => void\n  setStatusMessage: (str: string) => void\n  setSources: (sources: Source[]) => void\n}) {\n  addDisposer(\n    self,\n    autorun(\n      async () => {\n        try {\n          if (self.isMinimized) {\n            return\n          }\n          const view = getContainingView(self) as LinearGenomeViewModel\n          if (!view.initialized) {\n            return\n          }\n          const { rpcManager } = getSession(self)\n          const { adapterConfig } = self\n          const token = createStopToken()\n          self.setSourcesLoading(token)\n          const sessionId = getRpcSessionId(self)\n          const sources = (await rpcManager.call(\n            sessionId,\n            'MultiWiggleGetSources',\n            {\n              regions: view.staticBlocks.contentBlocks,\n              sessionId,\n              adapterConfig,\n              statusCallback: (arg: string) => {\n                if (isAlive(self)) {\n                  self.setStatusMessage(arg)\n                }\n              },\n            },\n          )) as Source[]\n          if (isAlive(self)) {\n            self.setSources(sources)\n          }\n        } catch (e) {\n          if (!isAbortException(e) && isAlive(self)) {\n            console.error(e)\n            getSession(self).notifyError(`${e}`, e)\n          }\n        }\n      },\n      { name: 'MultiWiggleGetSources' },\n    ),\n  )\n}\n"],"names":["getMultiWiggleSourcesAutorun","self","addDisposer","autorun","async","isMinimized","view","getContainingView","initialized","rpcManager","getSession","adapterConfig","token","createStopToken","setSourcesLoading","sessionId","getRpcSessionId","sources","call","regions","staticBlocks","contentBlocks","statusCallback","arg","isAlive","setStatusMessage","setSources","e","isAbortException","console","error","notifyError","name"],"ignoreList":[],"sourceRoot":""}