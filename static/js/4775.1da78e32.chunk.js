"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[4775],{70900(e,t,r){r.d(t,{A:()=>u});var n=r(30128),o=r(23886),i=r(69566),s=r(55614),l=r(87377),a=r(85510),c=r(44460);const h=function(e){const t=(0,s.c)(4),{source:r,idx:n,rowHeight:o}=e,{color:i}=r;let l;return t[0]!==i||t[1]!==n||t[2]!==o?(l=i?(0,c.jsx)(a.A,{y:n*o,x:0,width:15.5,height:o+.5,color:i}):null,t[0]=i,t[1]=n,t[2]=o,t[3]=l):l=t[3],l},d=function(e){const t=(0,s.c)(6),{source:r,idx:n,rowHeight:o,textFillProps:i}=e,{color:l,name:a}=r,h=Math.min(o,12),d=(n+.5)*o,x=l?17:0;let g;return t[0]!==a||t[1]!==h||t[2]!==d||t[3]!==x||t[4]!==i?(g=(0,c.jsx)("text",{y:d,x,fontSize:h,dominantBaseline:"central",...i,children:a}),t[0]=a,t[1]=h,t[2]=d,t[3]=x,t[4]=i,t[5]=g):g=t[5],g},x=(0,i.observer)(function({model:e,labelWidth:t}){const{canDisplayLegendLabels:r,rowHeight:i,sources:s}=e,x=(0,l.A)(),g=t+((0,n.useMemo)(()=>s?.some(e=>e.color)??!1,[s])?20:0),u=(0,n.useMemo)(()=>(0,o.getFillProps)(x.palette.text.primary),[x.palette.text.primary]);return s?(0,c.jsxs)(c.Fragment,{children:[r?(0,c.jsx)(a.A,{y:0,x:0,width:g,height:(s.length+.25)*i}):null,s.map((e,t)=>(0,c.jsx)(h,{source:e,idx:t,rowHeight:i},`${e.name}-${t}`)),r?s.map((e,t)=>(0,c.jsx)(d,{source:e,idx:t,rowHeight:i,textFillProps:u},`${e.name}-text-${t}`)):null]}):null}),g=(0,i.observer)(function({children:e,model:t,exportSVG:r}){const{id:n,scrollTop:i,height:s,hierarchy:l,treeAreaWidth:a,showTree:h}=t,d=`legend-${"undefined"==typeof jest?n:"test"}`,x=l&&h?a:0;return r?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("defs",{children:(0,c.jsx)("clipPath",{id:d,children:(0,c.jsx)("rect",{x:0,y:0,width:1e3,height:s})})}),(0,c.jsx)("g",{clipPath:`url(#${d})`,children:(0,c.jsx)("g",{transform:`translate(0,${-i})`,children:e})})]}):(0,c.jsx)("svg",{style:{position:"absolute",top:0,left:x,zIndex:100,pointerEvents:"none",height:t.totalHeight,width:(0,o.getContainingView)(t).width},children:e})}),u=(0,i.observer)(function(e){const{model:t}=e,{canDisplayLegendLabels:r,rowHeight:i,sources:s}=t,l=Math.min(i,12),a=(0,n.useMemo)(()=>{if(!s)return 0;let e=0;for(const t of s){const n=r?(0,o.measureText)(t.name,l)+10:20;n>e&&(e=n)}return e},[s,l,r]);return s?(0,c.jsx)(g,{...e,children:(0,c.jsx)(x,{model:t,labelWidth:a})}):null})},85510(e,t,r){r.d(t,{A:()=>c});var n=r(55614),o=r(23886),i=r(7201),s=r(87377),l=r(67114),a=r(44460);const c=e=>{const t=(0,n.c)(11),{x:r,y:c,width:h,height:d,color:x}=e,g=(0,s.A)();let u,m,p;return t[0]!==x||t[1]!==g?(u=x||(0,i.X4)(g.palette.background.paper,l.U),t[0]=x,t[1]=g,t[2]=u):u=t[2],t[3]!==u?(m=(0,o.getFillProps)(u),t[3]=u,t[4]=m):m=t[4],t[5]!==d||t[6]!==m||t[7]!==h||t[8]!==r||t[9]!==c?(p=(0,a.jsx)("rect",{pointerEvents:"auto",x:r,y:c,width:h,height:d,...m}),t[5]=d,t[6]=m,t[7]=h,t[8]=r,t[9]=c,t[10]=p):p=t[10],p}},9478(e,t,r){r.d(t,{A:()=>f});var n=r(69566),o=r(23886),i=r(30128),s=r(87377),l=r(55614),a=r(85510),c=r(44460);const h=function(e){const t=(0,l.c)(18),{source:r,idx:n,rowHeight:o,labelWidth:i,model:s,exportSVG:h}=e,d=Math.min(20,o),{needsCustomLegend:x,graphType:g,needsFullHeightScalebar:u,rowHeightTooSmallForScalebar:m,renderColorBoxes:p}=s,j=p?15:0,w=i+j+5,f=(h?10:0)||(g&&!m?50:0);let y,b,S;return t[0]!==d||t[1]!==f||t[2]!==n||t[3]!==w||t[4]!==u||t[5]!==o?(y=u?null:(0,c.jsx)(a.A,{y:n*o+1,x:f,width:w,height:d}),t[0]=d,t[1]=f,t[2]=n,t[3]=w,t[4]=u,t[5]=o,t[6]=y):y=t[6],t[7]!==d||t[8]!==j||t[9]!==f||t[10]!==n||t[11]!==x||t[12]!==o||t[13]!==r.color?(b=r.color?(0,c.jsx)(a.A,{y:n*o+1,x:f,width:j,height:x?o:d,color:r.color}):null,t[7]=d,t[8]=j,t[9]=f,t[10]=n,t[11]=x,t[12]=o,t[13]=r.color,t[14]=b):b=t[14],t[15]!==y||t[16]!==b?(S=(0,c.jsxs)(c.Fragment,{children:[y,b]}),t[15]=y,t[16]=b,t[17]=S):S=t[17],S},d=function(e){const t=(0,l.c)(9),{source:r,idx:n,rowHeight:o,model:i,exportSVG:s,textFillProps:a}=e,{graphType:h,rowHeightTooSmallForScalebar:d,renderColorBoxes:x}=i,g=Math.min(o,12),u=o>=6,m=x?15:0,p=(s?10:0)||(h&&!d?50:0);let j;return t[0]!==u||t[1]!==m||t[2]!==p||t[3]!==n||t[4]!==o||t[5]!==r||t[6]!==g||t[7]!==a?(j=u?(0,c.jsx)("text",{y:n*o+g,x:p+m+2,fontSize:g,...a,children:r.name}):null,t[0]=u,t[1]=m,t[2]=p,t[3]=n,t[4]=o,t[5]=r,t[6]=g,t[7]=a,t[8]=j):j=t[8],j},x=(0,n.observer)(function({model:e,rowHeight:t,exportSVG:r}){const{graphType:n,needsFullHeightScalebar:l,rowHeightTooSmallForScalebar:x,renderColorBoxes:g,sources:u,labelWidth:m}=e,p=m+(g?20:0)+5,j=(r?10:0)||(n&&!x?50:0),w=(0,s.A)(),f=(0,i.useMemo)(()=>(0,o.getFillProps)(w.palette.text.primary),[w.palette.text.primary]);return u?(0,c.jsxs)(c.Fragment,{children:[l?(0,c.jsx)(a.A,{y:0,x:j,width:p,height:(u.length+.25)*t}):null,u.map((n,o)=>(0,c.jsx)(h,{source:n,idx:o,model:e,rowHeight:t,exportSVG:r,labelWidth:p},`${n.name}-${o}`)),u.map((n,o)=>(0,c.jsx)(d,{source:n,idx:o,model:e,rowHeight:t,exportSVG:r,textFillProps:f},`${n.name}-text-${o}`))]}):null});var g=r(20223),u=r(20702);const m=(0,n.observer)(function({model:e,orientation:t,exportSVG:r}){const{labelWidth:n}=e,{width:i}=(0,o.getContainingView)(e);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("g",{transform:`translate(${r?0:(0,g.A3)(e)},0)`,children:(0,c.jsx)(u.A,{model:e,orientation:t})}),(0,c.jsx)("g",{transform:`translate(${i-n-100},0)`,children:(0,c.jsx)(x,{exportSVG:r,model:e,rowHeight:12})})]})}),p=(0,n.observer)(function({model:e}){const{ticks:t,scaleType:r}=e,{width:n}=(0,o.getContainingView)(e),i=`[${t?.values[0]}-${t?.values[1]}]${"log"===r?" (log scale)":""}`,s=(0,o.measureText)(i,14),l=n-s-25;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(a.A,{y:0,x:l,width:s+6,height:16}),(0,c.jsx)("text",{y:13,x:l,children:i})]})}),j=(0,n.observer)(function({model:e,orientation:t,exportSVG:r}){const{sources:n,rowHeight:o,rowHeightTooSmallForScalebar:i,needsCustomLegend:s,ticks:l,hierarchy:a,showTree:h}=e,d=a&&h;return n?.length?(0,c.jsxs)(c.Fragment,{children:[d?null:(0,c.jsx)(x,{exportSVG:r,model:e,rowHeight:e.rowHeight}),i||s?(0,c.jsx)(p,{model:e}):n.map((r,n)=>(0,c.jsx)("g",{transform:`translate(0 ${o*n})`,children:(0,c.jsx)(u.A,{model:e,orientation:t})},`${JSON.stringify(l)}-${n}`))]}):null}),w=(0,n.observer)(function({children:e,model:t,exportSVG:r}){const{height:n}=t;return r?e:(0,c.jsx)("svg",{style:{position:"absolute",top:0,left:0,pointerEvents:"none",height:n,width:(0,o.getContainingView)(t).width},children:e})}),f=(0,n.observer)(function(e){const{model:t,orientation:r,exportSVG:n}=e,{showSidebar:o,stats:i,needsFullHeightScalebar:s,sources:l}=t;return i&&l?(0,c.jsx)(w,{...e,children:o?s?(0,c.jsx)(m,{model:t,orientation:r,exportSVG:n}):(0,c.jsx)(j,{model:t,orientation:r,exportSVG:n}):null}):null})},67114(e,t,r){r.d(t,{U:()=>n});const n=.8},20223(e,t,r){r.d(t,{A3:()=>l,BO:()=>i,oJ:()=>s});var n=r(17378),o=r(23886);function i(e,t,r=1){const n=t.map(t=>e.findIndex(e=>e.name===t)).sort((e,t)=>e-t);let o=0;for(const t of n){const n=Math.max(o,t-r);n>=o&&e.splice(n,0,e.splice(t,1)[0]),o+=1}return e}function s(e,t,r=1){const n=t.map(t=>e.findIndex(e=>e.name===t)).sort((e,t)=>t-e);let o=e.length-1;for(const t of n){const n=Math.min(o,t+r);n<=o&&e.splice(n,0,e.splice(t,1)[0]),o-=1}return e}function l(e){const{prefersOffset:t}=e,{trackLabels:r}=(0,o.getContainingView)(e),i=(0,o.getContainingTrack)(e),s=(0,n.FI)(i,"name");return"overlapping"!==r||t?10:(0,o.measureText)(s,12.8)+100}},94775(e,t,r){r.d(t,{renderSvg:()=>x});var n=r(23886),o=r(44934),i=r(76538),s=r(9478),l=r(70900),a=r(85510),c=r(69566),h=r(44460);const d=(0,c.observer)(function({model:e}){const{treeAreaWidth:t,hierarchy:r}=e,n=[];let o=0;if(r)for(const e of r.links()){const{source:t,target:r}=e,i=t.x,s=r.x,l=r.y,a=t.y;n.push((0,h.jsx)("line",{x1:a,y1:i,x2:a,y2:s,stroke:"black",opacity:"0.4"},`${a}-${i}-${l}-${s}-${o++}`),(0,h.jsx)("line",{x1:a,y1:s,x2:l,y2:s,stroke:"black",opacity:"0.4"},`${a}-${i}-${l}-${s}-${o++}`))}return n});async function x(e,t,r){await(0,o.when)(()=>(0,i.V)(e));const{offsetPx:c}=(0,n.getContainingView)(e),x=await async function(e){const{offsetPx:t}=(0,n.getContainingView)(e),{hierarchy:r,showTree:o,treeAreaWidth:i,height:s,isMultiRow:c}=e;return c?(0,h.jsxs)("g",{id:"tree-layer","data-testid":"tree-layer",transform:`translate(${Math.max(-t,0)})`,clipPath:"url(#sidebarClip)",children:[(0,h.jsx)("clipPath",{id:"sidebarClip",children:(0,h.jsx)("rect",{x:"0",y:"0",width:"100%",height:s})}),(0,h.jsx)("g",{id:"legend-layer",transform:`translate(${o&&r?i:0})`,children:(0,h.jsx)(l.A,{model:e,orientation:"left",exportSVG:!0})}),o&&r?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(a.A,{x:0,y:0,width:i,height:s}),(0,h.jsx)(d,{model:e})]}):null]}):null}(e);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("g",{id:"data-layer",children:await r(t)}),(0,h.jsx)("g",{transform:`translate(${Math.max(-c,0)})`,children:(0,h.jsx)(s.A,{model:e,orientation:"left",exportSVG:!0})}),x]})}},76538(e,t,r){function n(e){return!e.renderProps().notReady||!!e.error}r.d(t,{V:()=>n})}}]);
//# sourceMappingURL=4775.1da78e32.chunk.js.map