"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[5243,6205],{15243:(e,t,r)=>{r.r(t),r.d(t,{default:()=>f});var s=r(7552),n=r(49823),o=r(99546),i=r(59705),a=r(36715),l=r(1343),d=r(29499),c=r(29629),m=r(33371),h=r(32808),x=r(58507),u=r(5401),g=r(69500);function p(){return(0,g.jsxs)("div",{children:[(0,g.jsx)(i.A,{size:20,style:{marginRight:20}}),(0,g.jsx)(a.A,{display:"inline",children:"Creating SVG"})]})}function b({children:e,...t}){return(0,g.jsx)("div",{children:(0,g.jsx)(l.A,{...t,children:e})})}function j(e,t){return(0,o.useLocalStorage)(`svg-${e}`,t)}function f({model:e,handleClose:t}){const r=(0,o.getSession)(e),i="undefined"!=typeof OffscreenCanvas,[l,f]=(0,s.useState)(i),[v,A]=(0,s.useState)(!1),[k,y]=(0,s.useState)(),[C,S]=j("file","jbrowse.svg"),[w,W]=j("theme",r.themeName||"default");return(0,g.jsxs)(n.Dialog,{open:!0,onClose:t,title:"Export SVG",children:[(0,g.jsxs)(d.A,{children:[k?(0,g.jsx)(n.ErrorMessage,{error:k}):v?(0,g.jsx)(p,{}):null,(0,g.jsx)(b,{helperText:"filename",value:C,onChange:e=>{S(e.target.value)}}),r.allThemes?(0,g.jsx)(b,{select:!0,label:"Theme",value:w,onChange:e=>{W(e.target.value)},children:Object.entries(r.allThemes()).map((([e,t])=>(0,g.jsx)(c.A,{value:e,children:t.name||"(Unknown name)"},e)))}):null,i?(0,g.jsx)(m.A,{control:(0,g.jsx)(h.A,{checked:l,onChange:()=>{f((e=>!e))}}),label:"Rasterize canvas based tracks? File may be much larger if this is turned off"}):(0,g.jsx)(a.A,{children:"Note: rasterizing layers not yet supported in this browser, so SVG size may be large"})]}),(0,g.jsxs)(x.A,{children:[(0,g.jsx)(u.A,{variant:"contained",color:"secondary",onClick:()=>{t()},children:"Cancel"}),(0,g.jsx)(u.A,{variant:"contained",color:"primary",type:"submit",onClick:async()=>{A(!0),y(void 0);try{await e.exportSvg({rasterizeLayers:l,filename:C,themeName:w}),t()}catch(e){console.error(e),y(e)}finally{A(!1)}},children:"Submit"})]})]})}},48467:(e,t,r)=>{r.d(t,{A:()=>s});const s=(0,r(26587).Ay)()},63896:(e,t,r)=>{r.d(t,{A:()=>f});var s=r(7552),n=r(93878),o=r(85693),i=r(70799),a=r(33283),l=r(97269),d=r(48467),c=r(23955),m=r(69500);const h=(0,c.A)(),x=(0,d.A)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`maxWidth${(0,a.A)(String(r.maxWidth))}`],r.fixed&&t.fixed,r.disableGutters&&t.disableGutters]}}),u=e=>(0,l.A)({props:e,name:"MuiContainer",defaultTheme:h});var g=r(15622),p=r(51148),b=r(4785);const j=function(e={}){const{createStyledComponent:t=x,useThemeProps:r=u,componentName:l="MuiContainer"}=e,d=t((({theme:e,ownerState:t})=>({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",...!t.disableGutters&&{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}}})),(({theme:e,ownerState:t})=>t.fixed&&Object.keys(e.breakpoints.values).reduce(((t,r)=>{const s=r,n=e.breakpoints.values[s];return 0!==n&&(t[e.breakpoints.up(s)]={maxWidth:`${n}${e.breakpoints.unit}`}),t}),{})),(({theme:e,ownerState:t})=>({..."xs"===t.maxWidth&&{[e.breakpoints.up("xs")]:{maxWidth:Math.max(e.breakpoints.values.xs,444)}},...t.maxWidth&&"xs"!==t.maxWidth&&{[e.breakpoints.up(t.maxWidth)]:{maxWidth:`${e.breakpoints.values[t.maxWidth]}${e.breakpoints.unit}`}}}))),c=s.forwardRef((function(e,t){const s=r(e),{className:c,component:h="div",disableGutters:x=!1,fixed:u=!1,maxWidth:g="lg",classes:p,...b}=s,j={...s,component:h,disableGutters:x,fixed:u,maxWidth:g},f=((e,t)=>{const{classes:r,fixed:s,disableGutters:n,maxWidth:l}=e,d={root:["root",l&&`maxWidth${(0,a.A)(String(l))}`,s&&"fixed",n&&"disableGutters"]};return(0,i.A)(d,(e=>(0,o.Ay)(t,e)),r)})(j,l);return(0,m.jsx)(d,{as:h,ownerState:j,className:(0,n.A)(f.root,c),ref:t,...b})}));return c}({createStyledComponent:(0,p.Ay)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`maxWidth${(0,g.A)(String(r.maxWidth))}`],r.fixed&&t.fixed,r.disableGutters&&t.disableGutters]}}),useThemeProps:e=>(0,b.b)({props:e,name:"MuiContainer"})}),f=j},66205:(e,t,r)=>{r.r(t),r.d(t,{default:()=>N});var s=r(49823),n=r(99546),o=r(68446),i=r(75785),a=r(7552),l=r(90542),d=r(8463),c=r(79698),m=r(74893),h=r(69500);const x=(0,m.A)((0,h.jsx)("path",{d:"M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m0 12H6V10h12z"}),"LockOpen");var u=r(17307),g=r(64502);const p=(0,m.A)((0,h.jsx)("path",{d:"M7.11 8.53 5.7 7.11C4.8 8.27 4.24 9.61 4.07 11h2.02c.14-.87.49-1.72 1.02-2.47M6.09 13H4.07c.17 1.39.72 2.73 1.62 3.89l1.41-1.42c-.52-.75-.87-1.59-1.01-2.47m1.01 5.32c1.16.9 2.51 1.44 3.9 1.61V17.9c-.87-.15-1.71-.49-2.46-1.03zM13 4.07V1L8.45 5.55 13 10V6.09c2.84.48 5 2.94 5 5.91s-2.16 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93s-3.05-7.44-7-7.93"}),"RotateLeft"),b=(0,m.A)((0,h.jsx)("path",{d:"M15.55 5.55 11 1v3.07C7.06 4.56 4 7.92 4 12s3.05 7.44 7 7.93v-2.02c-2.84-.48-5-2.94-5-5.91s2.16-5.43 5-5.91V10zM19.93 11c-.17-1.39-.72-2.73-1.62-3.89l-1.42 1.42c.54.75.88 1.6 1.02 2.47zM13 17.9v2.02c1.39-.17 2.74-.71 3.9-1.61l-1.44-1.44c-.75.54-1.59.89-2.46 1.03m3.89-2.42 1.42 1.41c.9-1.16 1.45-2.5 1.62-3.89h-2.02c-.14.87-.48 1.72-1.02 2.48"}),"RotateRight");var j=r(87809),f=r(91404),v=r(61723),A=r(15243);const k=(0,i.n9)()((e=>({controls:{position:"absolute",borderRight:`1px solid ${e.palette.divider}`,borderBottom:`1px solid ${e.palette.divider}`,left:0,top:0}}))),y=(0,o.observer)((function({model:e}){const{classes:t}=k(),[r,s]=(0,a.useState)(null);return(0,h.jsxs)("div",{className:t.controls,children:[(0,h.jsx)(v.A,{onClick:e.zoomOutButton,title:e.lockedFitToWindow?"unlock to zoom out":"zoom out",disabled:e.atMaxBpPerPx||e.lockedFitToWindow,children:(0,h.jsx)(f.A,{})}),(0,h.jsx)(v.A,{onClick:e.zoomInButton,disabled:e.atMinBpPerPx,title:"zoom in",children:(0,h.jsx)(j.A,{})}),(0,h.jsx)(v.A,{onClick:e.rotateCounterClockwiseButton,title:"rotate counter-clockwise",children:(0,h.jsx)(p,{})}),(0,h.jsx)(v.A,{onClick:e.rotateClockwiseButton,title:"rotate clockwise",children:(0,h.jsx)(b,{})}),(0,h.jsx)(v.A,{onClick:e.toggleFitToWindowLock,title:e.lockedFitToWindow?"locked model to window size":"unlocked model to zoom further",disabled:e.tooSmallToLock,children:e.lockedFitToWindow?(0,h.jsx)(c.A,{}):(0,h.jsx)(x,{})}),(0,h.jsx)(v.A,{onClick:e=>{s(e.currentTarget)},children:(0,h.jsx)(u.A,{})}),e.hideTrackSelectorButton?null:(0,h.jsx)(v.A,{onClick:e.activateTrackSelector,title:"Open track selector","data-testid":"circular_track_select",children:(0,h.jsx)(l.xU,{})}),r?(0,h.jsx)(d.A,{anchorEl:r,menuItems:[{label:"Export SVG",icon:g.A,onClick:()=>{(0,n.getSession)(e).queueDialog((t=>[A.default,{model:e,handleClose:t}]))}}],onMenuItemClick:(e,t)=>{t(),s(null)},open:Boolean(r),onClose:()=>{s(null)}}):null]})}));var C=r(63896),S=r(67314),w=r(5401);const W=(0,i.n9)()((e=>({importFormContainer:{padding:e.spacing(6)}}))),T=(0,o.observer)((function({model:e}){const{classes:t}=W(),r=(0,n.getSession)(e),{error:o}=e,{assemblyNames:i,assemblyManager:l}=r,[d,c]=(0,a.useState)(i[0]),m=l.get(d),x=i.length?m?.error:"No configured assemblies",u=m?.regions||[],g=x||o;return(0,h.jsxs)(C.A,{className:t.importFormContainer,children:[g?(0,h.jsx)(S.Ay,{container:!0,spacing:1,justifyContent:"center",alignItems:"center",children:(0,h.jsx)(S.Ay,{item:!0,children:(0,h.jsx)(s.ErrorMessage,{error:g})})}):null,(0,h.jsxs)(S.Ay,{container:!0,spacing:1,justifyContent:"center",alignItems:"center",children:[(0,h.jsx)(S.Ay,{item:!0,children:(0,h.jsx)(s.AssemblySelector,{onChange:t=>{e.setError(void 0),c(t)},session:r,selected:d})}),(0,h.jsx)(S.Ay,{item:!0,children:(0,h.jsx)(w.A,{disabled:!u.length,onClick:()=>{e.setError(void 0),e.setDisplayedRegions(u)},variant:"contained",color:"primary",children:u.length||g?"Open":"Loading..."})})]})]})}));var M=r(83803);const R=(0,i.n9)()((e=>({root:{position:"relative",marginBottom:e.spacing(1),overflow:"hidden"},scroller:{overflow:"auto"}}))),z=(0,o.observer)((({model:e})=>(0,h.jsxs)(h.Fragment,{children:[e.staticSlices.map((t=>(0,h.jsx)(M.A,{model:e,slice:t},(0,n.assembleLocString)(t.region.elided?t.region.regions[0]:t.region)))),e.tracks.map((t=>{const r=t.displays[0];return(0,h.jsx)(r.RenderingComponent,{display:r,view:e},r.id)}))]}))),$=(0,o.observer)((({model:e})=>{const t=!!e.displayedRegions.length&&!!e.figureWidth&&!!e.figureHeight&&e.initialized,r=!t&&!e.disableImportForm,s=t&&!r;return r||e.error?(0,h.jsx)(T,{model:e}):s?(0,h.jsx)(L,{model:e}):null})),L=(0,o.observer)((function({model:e}){const{width:t,height:r,id:n,offsetRadians:o,centerXY:i,figureWidth:a,figureHeight:l,hideVerticalResizeHandle:d}=e,{classes:c}=R();return(0,h.jsxs)("div",{className:c.root,style:{width:t,height:r},"data-testid":n,children:[(0,h.jsx)("div",{className:c.scroller,style:{width:t,height:r},children:(0,h.jsx)("svg",{style:{transform:`rotate(${o}rad)`,transition:"transform 0.5s",transformOrigin:i.map((e=>`${e}px`)).join(" "),position:"absolute",left:0,top:0},width:a,height:l,children:(0,h.jsx)("g",{transform:`translate(${i})`,children:(0,h.jsx)(z,{model:e})})})}),(0,h.jsx)(y,{model:e}),d?null:(0,h.jsx)(s.ResizeHandle,{onDrag:e.resizeHeight,style:{height:3,position:"absolute",bottom:0,left:0,background:"#ccc",boxSizing:"border-box",borderTop:"1px solid #fafafa"}})]})})),N=$},79698:(e,t,r)=>{r.d(t,{A:()=>o});var s=r(74893),n=r(69500);const o=(0,s.A)((0,n.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1z"}),"Lock")},83803:(e,t,r)=>{r.d(t,{A:()=>u});var s=r(99546),n=r(80208),o=r(48231),i=r(68446),a=r(75785),l=r(69500);const d=(0,a.n9)()({rulerLabel:{fontSize:"0.8rem",fontWeight:500,lineHeight:1.6,letterSpacing:"0.0075em"}});function c(e,t,r,s){e.flipped&&([r,s]=[s,r]);const n=e.bpToXY(r,t),o=e.bpToXY(s,t);return["M",...n,"A",t,t,"0",Math.abs(s-r)/e.bpPerRadian>Math.PI?"1":"0","1",...o].join(" ")}const m=(0,i.observer)((function({model:e,slice:t,region:r}){const n=(0,o.A)(),{radiusPx:i}=e,a=i+1,{endRadians:d,startRadians:c}=t,m=(0,s.polarToCartesian)(a,c),x=(0,s.polarToCartesian)(a,d),u=(d-c)*a,g=d-c>Math.PI?"1":"0",p=(d+c)/2,b=`[${Number(r.regions.length).toLocaleString()}]`;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h,{text:b,view:e,maxWidthPx:u,radians:p,radiusPx:a,title:`${b} more regions`,color:n.palette.text.primary}),(0,l.jsx)("path",{d:["M",...m,"A",a,a,"0",g,"1",...x].join(" "),...(0,s.getStrokeProps)(n.palette.text.secondary),strokeWidth:2,strokeDasharray:"2,2",fill:"none"})]})})),h=(0,i.observer)((function({view:e,text:t,maxWidthPx:r,radians:n,radiusPx:o,title:i,color:a}){const{classes:c}=d(),m=(0,s.polarToCartesian)(o+5,n);return t?6.5*t.length<r?(0,l.jsxs)("text",{x:0,y:0,className:c.rulerLabel,textAnchor:"middle",dominantBaseline:"baseline",transform:`translate(${m}) rotate(${(0,s.radToDeg)(n)+90})`,...(0,s.getFillProps)(a),children:[t,(0,l.jsx)("title",{children:i||t})]}):r>4?(0,s.radToDeg)(n+e.offsetRadians-Math.PI/2)>=180?(0,l.jsxs)("text",{x:0,y:0,className:c.rulerLabel,textAnchor:"start",dominantBaseline:"middle",transform:`translate(${m}) rotate(${(0,s.radToDeg)(n)})`,fill:a,children:[t,(0,l.jsx)("title",{children:i||t})]}):(0,l.jsxs)("text",{x:0,y:0,className:c.rulerLabel,textAnchor:"end",dominantBaseline:"middle",transform:`translate(${m}) rotate(${(0,s.radToDeg)(n)+180})`,fill:a,children:[t,(0,l.jsx)("title",{children:i||t})]}):null:null})),x=(0,i.observer)((function({model:e,slice:t,region:r}){const i=(0,o.A)(),{radiusPx:a}=e,{endRadians:d,startRadians:m}=t,x=(d+m)/2,u=(d-m)*a,g=(0,s.getSession)(e).assemblyManager.get(r.assemblyName);let p=g?g.getRefNameColor(r.refName):void 0;if(p)try{p=(0,n.makeContrasting)(p,i.palette.background.paper)}catch(e){p=i.palette.text.primary}else p=i.palette.text.primary;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h,{text:r.refName,view:e,maxWidthPx:u,radians:x,radiusPx:a,color:p}),(0,l.jsx)("path",{d:c(t,a+1,r.start,r.end),stroke:p,strokeWidth:2,fill:"none"})]})})),u=(0,i.observer)((function({model:e,slice:t}){return t.region.elided?(0,l.jsx)(m,{model:e,region:t.region,slice:t},(0,s.assembleLocString)(t.region.regions[0])):(0,l.jsx)(x,{region:t.region,model:e,slice:t},(0,s.assembleLocString)(t.region))}))}}]);
//# sourceMappingURL=6205.8273f034.chunk.js.map