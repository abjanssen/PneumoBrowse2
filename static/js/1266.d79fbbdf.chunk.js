"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[1266],{11266:(e,t,r)=>{r.d(t,{renderToSvg:()=>c});var i=r(67112),s=r(99546),n=r(91063),o=r(42489),l=r(51414),a=r(69500);function h({width:e,height:t}){const r=(0,l.A)();return(0,a.jsx)("rect",{x:0,y:0,width:e,height:t,fill:(0,s.stripAlpha)(r.palette.background.default)})}var d=r(91392),x=r(86495);async function c(e,t){await(0,o.when)((()=>e.initialized));const{themeName:r="default",Wrapper:l=({children:e})=>e}=t,c=(0,s.getSession)(e),f=c.allThemes?.()[r],{width:m,borderX:g,viewWidth:p,viewHeight:y,tracks:w,height:u}=e,j=await Promise.all(w.map((async e=>{const r=e.displays[0];return await(0,o.when)((()=>void 0===r.ready||r.ready)),{track:e,result:await r.renderSvg({...t,theme:f})}}))),v=m+100;return(0,s.renderToStaticMarkup)((0,a.jsx)(n.A,{theme:(0,i.createJBrowseTheme)(f),children:(0,a.jsx)(l,{children:(0,a.jsxs)("svg",{width:m,height:u,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:[0,0,v,u].toString(),children:[(0,a.jsx)(h,{width:v,height:u}),(0,a.jsx)(d.kb,{model:e}),(0,a.jsxs)("g",{transform:`translate(${g} 0)`,children:[(0,a.jsx)(x.z,{model:e}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"clip-ruler",children:(0,a.jsx)("rect",{x:0,y:0,width:p,height:y})})}),(0,a.jsx)("g",{clipPath:"url(#clip-ruler)",children:j.map((({result:e},t)=>(0,a.jsx)("g",{children:e},t)))})]}),(0,a.jsx)("g",{transform:`translate(${g} ${y})`,children:(0,a.jsx)(d.se,{model:e})})]})})}))}},86495:(e,t,r)=>{r.d(t,{A:()=>a,z:()=>l});var i=r(99546),s=r(51414),n=r(68446),o=r(69500);const l=(0,n.observer)((function({model:e,children:t}){const{viewWidth:r,viewHeight:n,hview:l,vview:a}=e,h=l.dynamicBlocks.contentBlocks,d=a.dynamicBlocks.contentBlocks;if(!h.length||!d.length)return null;const x=l.displayedRegionsTotalPx-l.offsetPx,c=a.displayedRegionsTotalPx-a.offsetPx,f=h[0].offsetPx-l.offsetPx,m=d[0].offsetPx-a.offsetPx,g=(0,s.A)(),p=g.palette.divider,y=Math.max(f,0),w=Math.max(n-c,0),u=Math.min(x-f,r),j=Math.min(n-m-w,n);let v=Number.POSITIVE_INFINITY,P=Number.POSITIVE_INFINITY;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("rect",{x:y,y:w,width:u,height:j,...(0,i.getFillProps)(g.palette.background.default)}),(0,o.jsxs)("g",{children:[h.map((e=>{const t=e.offsetPx-l.offsetPx,r=Math.floor(t)!==Math.floor(v);return r&&(v=t),r?(0,o.jsx)("line",{x1:t,y1:0,x2:t,y2:n,...(0,i.getStrokeProps)(p)},JSON.stringify(e)):null})),d.map((e=>{const t=n-(e.offsetPx-a.offsetPx),s=Math.floor(t)!==Math.floor(P);return s&&(P=t),s?(0,o.jsx)("line",{x1:0,y1:t,x2:r,y2:t,...(0,i.getStrokeProps)(p)},JSON.stringify(e)):null})),(0,o.jsx)("line",{x1:x,y1:0,x2:x,y2:n,...(0,i.getStrokeProps)(p)}),(0,o.jsx)("line",{x1:0,y1:n-c,x2:r,y2:n-c,...(0,i.getStrokeProps)(p)})]}),t]})}));function a({model:e,children:t}){const{viewWidth:r,viewHeight:i}=e;return(0,o.jsx)("svg",{width:r,height:i,style:{background:"rgba(0,0,0,0.12)"},children:(0,o.jsx)(l,{model:e,children:t})})}},91392:(e,t,r)=>{r.d(t,{KM:()=>c,en:()=>m,kb:()=>g,se:()=>f});var i=r(99546),s=r(95095),n=r(51414),o=r(68446),l=r(36422),a=r(75785),h=r(90257),d=r(69500);const x=(0,a.n9)()((()=>({vtext:{gridColumn:"1/2",gridRow:"1/2",pointerEvents:"none",userSelect:"none"},htext:{gridColumn:"2/2",gridRow:"2/2",pointerEvents:"none",userSelect:"none"}}))),c=(0,o.observer)((function({model:e}){const{viewWidth:t,borderY:r}=e,{classes:i}=x();return(0,d.jsx)("svg",{width:t,height:r,className:i.htext,children:(0,d.jsx)(f,{model:e})})})),f=(0,o.observer)((function({model:e}){const{viewWidth:t,borderX:r,borderY:o,hview:a,htextRotation:x,hticks:c}=e,{offsetPx:f,width:m,dynamicBlocks:g,bpPerPx:p}=a,y=g.contentBlocks,w=(0,h.rQ)(y,t,f),u=(0,n.A)(),j={...(0,l.getSnapshot)(a),width:m,staticBlocks:a.staticBlocks},v=c.map((e=>[e,(0,s.eB)({refName:e.refName,coord:e.base,self:j})?.offsetPx])).filter((e=>void 0!==e[1])).map((e=>[e[0],e[1]-f]));return(0,d.jsxs)(d.Fragment,{children:[y.filter((e=>!w.has(e.key))).map((e=>{const t=e.offsetPx,r=Math.floor(t-a.offsetPx);return(0,d.jsx)("text",{transform:`rotate(${x},${r},0)`,x:r,y:1,fontSize:11,dominantBaseline:"hanging",textAnchor:"end",...(0,i.getFillProps)(u.palette.text.primary),children:e.refName},JSON.stringify(e))})),v.map((([e,t])=>t>0&&t<m?(0,d.jsx)("line",{x1:t,x2:t,y1:0,y2:"major"===e.type?6:4,strokeWidth:1,...(0,i.getFillProps)(u.palette.text.primary)},`line-${JSON.stringify(e)}`):null)),v.filter((e=>"major"===e[0].type)).map((([e,t])=>t>10&&t<m?(0,d.jsx)("text",{x:t-7,y:0,transform:`rotate(${x},${t},0)`,fontSize:11,dominantBaseline:"middle",textAnchor:"end",...(0,i.getFillProps)(u.palette.text.primary),children:(0,i.getTickDisplayStr)(e.base+1,p)},`text-${JSON.stringify(e)}`):null)),(0,d.jsx)("text",{y:o-12,x:(t-r)/2,textAnchor:"middle",fontSize:11,dominantBaseline:"hanging",...(0,i.getFillProps)(u.palette.text.primary),children:a.assemblyNames.join(",")})]})})),m=(0,o.observer)((function({model:e}){const{borderX:t,viewHeight:r}=e,{classes:i}=x();return(0,d.jsx)("svg",{className:i.vtext,width:t,height:r,children:(0,d.jsx)(g,{model:e})})})),g=(0,o.observer)((function({model:e}){const{viewHeight:t,borderX:r,borderY:o,vview:a,vtextRotation:x,vticks:c}=e,{offsetPx:f,width:m,dynamicBlocks:g,bpPerPx:p}=a,y=g.contentBlocks,w=(0,h.rQ)(y,t,f),u=(0,n.A)(),j={...(0,l.getSnapshot)(a),width:m,staticBlocks:a.staticBlocks},v=c.map((e=>[e,(0,s.eB)({refName:e.refName,coord:e.base,self:j})?.offsetPx])).filter((e=>void 0!==e[1])).map((e=>[e[0],e[1]-f]));return(0,d.jsxs)(d.Fragment,{children:[y.filter((e=>!w.has(e.key))).map((e=>{const s=e.offsetPx,n=r,o=Math.floor(t-s+f);return(0,d.jsx)("text",{transform:`rotate(${x},${n},${s})`,x:n,y:o,fontSize:11,textAnchor:"end",...(0,i.getFillProps)(u.palette.text.primary),children:e.refName},JSON.stringify(e))})),v.map((([e,s])=>s>0?(0,d.jsx)("line",{y1:t-s,y2:t-s,x1:r,x2:r-("major"===e.type?6:4),strokeWidth:1,...(0,i.getStrokeProps)(u.palette.grey[400])},`line-${JSON.stringify(e)}`):null)),v.filter((e=>"major"===e[0].type)).map((([e,s])=>s>10&&s<t?(0,d.jsx)("text",{y:t-s-3,x:r-7,textAnchor:"end",dominantBaseline:"hanging",fontSize:11,...(0,i.getFillProps)(u.palette.text.primary),children:(0,i.getTickDisplayStr)(e.base+1,p)},`text-${JSON.stringify(e)}`):null)),(0,d.jsx)("text",{y:(t-o)/2,x:12,transform:`rotate(-90,12,${(t-o)/2})`,textAnchor:"middle",fontSize:11,...(0,i.getFillProps)(u.palette.text.primary),children:a.assemblyNames.join(",")})]})}))}}]);
//# sourceMappingURL=1266.d79fbbdf.chunk.js.map