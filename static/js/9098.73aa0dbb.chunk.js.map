{"version":3,"file":"static/js/9098.73aa0dbb.chunk.js","mappings":"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","sources":["../../../packages/core/src/ui/DataGridFlexContainer.tsx","../../../node_modules/.pnpm/@mui+icons-material@7.3.7_@mui+material@7.3.7_@emotion+react@11.14.0_@types+react@19.2._4f45627fdfc0611a55124f5eb568ad63/node_modules/@mui/icons-material/esm/StarBorder.js","../../../node_modules/.pnpm/date-fns@4.1.0/node_modules/date-fns/startOfDay.js","../../../node_modules/.pnpm/date-fns@4.1.0/node_modules/date-fns/differenceInDays.js","../../../node_modules/.pnpm/date-fns@4.1.0/node_modules/date-fns/differenceInCalendarDays.js","../../../plugins/menus/src/SessionManager/components/SessionManager.tsx"],"sourcesContent":["import type { CSSProperties } from 'react'\n\nimport { makeStyles } from '../util/tss-react/index.ts'\n\nconst useStyles = makeStyles()({\n  flexContainer: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n})\n\n// https://mui.com/x/react-data-grid/layout/#flex-parent-container\nexport default function DataGridFlexContainer({\n  children,\n  style,\n}: {\n  children: React.ReactNode\n  style?: CSSProperties\n}) {\n  const { classes } = useStyles()\n  return (\n    <div className={classes.flexContainer} style={style}>\n      {children}\n    </div>\n  )\n}\n","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"m22 9.24-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28z\"\n}), 'StarBorder');","import { toDate } from \"./toDate.js\";\n\n/**\n * The {@link startOfDay} function options.\n */\n\n/**\n * @name startOfDay\n * @category Day Helpers\n * @summary Return the start of a day for the given date.\n *\n * @description\n * Return the start of a day for the given date.\n * The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - The options\n *\n * @returns The start of a day\n *\n * @example\n * // The start of a day for 2 September 2014 11:55:00:\n * const result = startOfDay(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Tue Sep 02 2014 00:00:00\n */\nexport function startOfDay(date, options) {\n  const _date = toDate(date, options?.in);\n  _date.setHours(0, 0, 0, 0);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default startOfDay;\n","import { normalizeDates } from \"./_lib/normalizeDates.js\";\nimport { differenceInCalendarDays } from \"./differenceInCalendarDays.js\";\n\n/**\n * The {@link differenceInDays} function options.\n */\n\n/**\n * @name differenceInDays\n * @category Day Helpers\n * @summary Get the number of full days between the given dates.\n *\n * @description\n * Get the number of full day periods between two dates. Fractional days are\n * truncated towards zero.\n *\n * One \"full day\" is the distance between a local time in one day to the same\n * local time on the next or previous day. A full day can sometimes be less than\n * or more than 24 hours if a daylight savings change happens between two dates.\n *\n * To ignore DST and only measure exact 24-hour periods, use this instead:\n * `Math.trunc(differenceInHours(dateLeft, dateRight)/24)|0`.\n *\n * @param laterDate - The later date\n * @param earlierDate - The earlier date\n * @param options - An object with options\n *\n * @returns The number of full days according to the local timezone\n *\n * @example\n * // How many full days are between\n * // 2 July 2011 23:00:00 and 2 July 2012 00:00:00?\n * const result = differenceInDays(\n *   new Date(2012, 6, 2, 0, 0),\n *   new Date(2011, 6, 2, 23, 0)\n * )\n * //=> 365\n *\n * @example\n * // How many full days are between\n * // 2 July 2011 23:59:00 and 3 July 2011 00:01:00?\n * const result = differenceInDays(\n *   new Date(2011, 6, 3, 0, 1),\n *   new Date(2011, 6, 2, 23, 59)\n * )\n * //=> 0\n *\n * @example\n * // How many full days are between\n * // 1 March 2020 0:00 and 1 June 2020 0:00 ?\n * // Note: because local time is used, the\n * // result will always be 92 days, even in\n * // time zones where DST starts and the\n * // period has only 92*24-1 hours.\n * const result = differenceInDays(\n *   new Date(2020, 5, 1),\n *   new Date(2020, 2, 1)\n * )\n * //=> 92\n */\nexport function differenceInDays(laterDate, earlierDate, options) {\n  const [laterDate_, earlierDate_] = normalizeDates(\n    options?.in,\n    laterDate,\n    earlierDate,\n  );\n\n  const sign = compareLocalAsc(laterDate_, earlierDate_);\n  const difference = Math.abs(\n    differenceInCalendarDays(laterDate_, earlierDate_),\n  );\n\n  laterDate_.setDate(laterDate_.getDate() - sign * difference);\n\n  // Math.abs(diff in full days - diff in calendar days) === 1 if last calendar day is not full\n  // If so, result must be decreased by 1 in absolute value\n  const isLastDayNotFull = Number(\n    compareLocalAsc(laterDate_, earlierDate_) === -sign,\n  );\n\n  const result = sign * (difference - isLastDayNotFull);\n  // Prevent negative zero\n  return result === 0 ? 0 : result;\n}\n\n// Like `compareAsc` but uses local time not UTC, which is needed\n// for accurate equality comparisons of UTC timestamps that end up\n// having the same representation in local time, e.g. one hour before\n// DST ends vs. the instant that DST ends.\nfunction compareLocalAsc(laterDate, earlierDate) {\n  const diff =\n    laterDate.getFullYear() - earlierDate.getFullYear() ||\n    laterDate.getMonth() - earlierDate.getMonth() ||\n    laterDate.getDate() - earlierDate.getDate() ||\n    laterDate.getHours() - earlierDate.getHours() ||\n    laterDate.getMinutes() - earlierDate.getMinutes() ||\n    laterDate.getSeconds() - earlierDate.getSeconds() ||\n    laterDate.getMilliseconds() - earlierDate.getMilliseconds();\n\n  if (diff < 0) return -1;\n  if (diff > 0) return 1;\n\n  // Return 0 if diff is 0; return NaN if diff is NaN\n  return diff;\n}\n\n// Fallback for modularized imports:\nexport default differenceInDays;\n","import { getTimezoneOffsetInMilliseconds } from \"./_lib/getTimezoneOffsetInMilliseconds.js\";\nimport { normalizeDates } from \"./_lib/normalizeDates.js\";\nimport { millisecondsInDay } from \"./constants.js\";\nimport { startOfDay } from \"./startOfDay.js\";\n\n/**\n * The {@link differenceInCalendarDays} function options.\n */\n\n/**\n * @name differenceInCalendarDays\n * @category Day Helpers\n * @summary Get the number of calendar days between the given dates.\n *\n * @description\n * Get the number of calendar days between the given dates. This means that the times are removed\n * from the dates and then the difference in days is calculated.\n *\n * @param laterDate - The later date\n * @param earlierDate - The earlier date\n * @param options - The options object\n *\n * @returns The number of calendar days\n *\n * @example\n * // How many calendar days are between\n * // 2 July 2011 23:00:00 and 2 July 2012 00:00:00?\n * const result = differenceInCalendarDays(\n *   new Date(2012, 6, 2, 0, 0),\n *   new Date(2011, 6, 2, 23, 0)\n * )\n * //=> 366\n * // How many calendar days are between\n * // 2 July 2011 23:59:00 and 3 July 2011 00:01:00?\n * const result = differenceInCalendarDays(\n *   new Date(2011, 6, 3, 0, 1),\n *   new Date(2011, 6, 2, 23, 59)\n * )\n * //=> 1\n */\nexport function differenceInCalendarDays(laterDate, earlierDate, options) {\n  const [laterDate_, earlierDate_] = normalizeDates(\n    options?.in,\n    laterDate,\n    earlierDate,\n  );\n\n  const laterStartOfDay = startOfDay(laterDate_);\n  const earlierStartOfDay = startOfDay(earlierDate_);\n\n  const laterTimestamp =\n    +laterStartOfDay - getTimezoneOffsetInMilliseconds(laterStartOfDay);\n  const earlierTimestamp =\n    +earlierStartOfDay - getTimezoneOffsetInMilliseconds(earlierStartOfDay);\n\n  // Round the number of days to the nearest integer because the number of\n  // milliseconds in a day is not constant (e.g. it's different in the week of\n  // the daylight saving time clock shift).\n  return Math.round((laterTimestamp - earlierTimestamp) / millisecondsInDay);\n}\n\n// Fallback for modularized imports:\nexport default differenceInCalendarDays;\n","import DataGridFlexContainer from '@jbrowse/core/ui/DataGridFlexContainer'\nimport { measureGridWidth, useLocalStorage } from '@jbrowse/core/util'\nimport { makeStyles } from '@jbrowse/core/util/tss-react'\nimport DeleteIcon from '@mui/icons-material/Delete'\nimport StarIcon from '@mui/icons-material/Star'\nimport StarBorderIcon from '@mui/icons-material/StarBorder'\nimport {\n  Button,\n  Checkbox,\n  FormControlLabel,\n  IconButton,\n  Link,\n  Tooltip,\n} from '@mui/material'\nimport { DataGrid } from '@mui/x-data-grid'\nimport { differenceInDays, formatDistanceToNow } from 'date-fns'\nimport { observer } from 'mobx-react'\n\nimport type { SessionModel } from './util.ts'\n\nconst useStyles = makeStyles()(theme => ({\n  mb: {\n    margin: theme.spacing(1),\n    marginBottom: theme.spacing(4),\n  },\n}))\n\nconst SessionManager = observer(function SessionManager({\n  session,\n}: {\n  session: SessionModel\n}) {\n  const { classes } = useStyles()\n  const [showOnlyFavs, setShowOnlyFavs] = useLocalStorage(\n    'sessionManager-showOnlyFavs',\n    false,\n  )\n  const rows = session.savedSessionMetadata\n    ?.map(r => ({\n      id: r.id,\n      name: r.name,\n      createdAt: r.createdAt,\n      fav: r.favorite,\n    }))\n    .filter(f => (showOnlyFavs ? f.fav : true))\n\n  return (\n    <div>\n      <div className={classes.mb}>\n        <FormControlLabel\n          control={\n            <Checkbox\n              checked={showOnlyFavs}\n              onChange={() => {\n                setShowOnlyFavs(val => !val)\n              }}\n            />\n          }\n          label=\"Show favorites only?\"\n        />\n\n        <Button\n          variant=\"contained\"\n          onClick={() => {\n            let i = 0\n            if (session.savedSessionMetadata) {\n              for (const elt of session.savedSessionMetadata) {\n                if (\n                  differenceInDays(Date.now(), elt.createdAt) > 1 &&\n                  !elt.favorite\n                ) {\n                  // @ts-expect-error\n                  session.deleteSavedSession(elt.id)\n                  i++\n                }\n              }\n            }\n            session.notify(`${i} sessions deleted`, 'info')\n          }}\n        >\n          Delete non-fav sessions older than 7 days?\n        </Button>\n      </div>\n      {rows ? (\n        <DataGridFlexContainer>\n          <DataGrid\n            disableRowSelectionOnClick\n            columnHeaderHeight={35}\n            rowHeight={25}\n            hideFooter={rows.length < 100}\n            slotProps={{\n              toolbar: {\n                showQuickFilter: true,\n              },\n            }}\n            rows={rows}\n            columns={[\n              {\n                field: 'fav',\n                headerName: 'Fav',\n                width: 20,\n                renderCell: ({ row }) => (\n                  <IconButton\n                    onClick={() => {\n                      if (row.fav) {\n                        // @ts-expect-error\n                        session.unfavoriteSavedSession(row.id)\n                      } else {\n                        // @ts-expect-error\n                        session.favoriteSavedSession(row.id)\n                      }\n                    }}\n                  >\n                    {row.fav ? <StarIcon /> : <StarBorderIcon />}\n                  </IconButton>\n                ),\n              },\n              {\n                field: 'name',\n                headerName: 'Name',\n                editable: true,\n                width: measureGridWidth(rows.map(r => r.name)),\n                renderCell: ({ row }) => (\n                  <>\n                    <Link\n                      href=\"#\"\n                      onClick={event => {\n                        event.preventDefault()\n                        session.activateSession(row.id)\n                      }}\n                    >\n                      {row.name}\n                    </Link>\n                    {session.id === row.id ? ' (current)' : ''}\n                  </>\n                ),\n              },\n              {\n                headerName: 'Created at',\n                field: 'createdAt',\n                renderCell: ({ row }) => (\n                  <Tooltip\n                    disableInteractive\n                    slotProps={{\n                      transition: {\n                        timeout: 0,\n                      },\n                    }}\n                    title={row.createdAt.toLocaleString()}\n                  >\n                    <div>\n                      {formatDistanceToNow(row.createdAt, {\n                        addSuffix: true,\n                      })}\n                    </div>\n                  </Tooltip>\n                ),\n              },\n              {\n                field: 'delete',\n                width: 10,\n                headerName: 'Delete',\n                renderCell: ({ row }) => (\n                  <IconButton\n                    onClick={() => {\n                      // @ts-expect-error\n                      session.deleteSavedSession(row.id)\n                    }}\n                  >\n                    <DeleteIcon />\n                  </IconButton>\n                ),\n              },\n            ]}\n          />\n        </DataGridFlexContainer>\n      ) : (\n        <div>No sessions loaded</div>\n      )}\n    </div>\n  )\n})\n\nexport default SessionManager\n"],"names":["useStyles","makeStyles","flexContainer","display","flexDirection","DataGridFlexContainer","t0","$","_c","children","style","classes","t1","_jsx","className","createSvgIcon","d","startOfDay","date","options","_date","toDate","in","setHours","differenceInDays","laterDate","earlierDate","laterDate_","earlierDate_","normalizeDates","sign","compareLocalAsc","difference","Math","abs","laterStartOfDay","earlierStartOfDay","laterTimestamp","getTimezoneOffsetInMilliseconds","earlierTimestamp","round","millisecondsInDay","differenceInCalendarDays","setDate","getDate","result","Number","diff","getFullYear","getMonth","getHours","getMinutes","getSeconds","getMilliseconds","theme","mb","margin","spacing","marginBottom","observer","session","showOnlyFavs","setShowOnlyFavs","useLocalStorage","rows","savedSessionMetadata","map","r","id","name","createdAt","fav","favorite","filter","f","_jsxs","FormControlLabel","control","Checkbox","checked","onChange","val","label","Button","variant","onClick","i","elt","Date","now","deleteSavedSession","notify","DataGrid","disableRowSelectionOnClick","columnHeaderHeight","rowHeight","hideFooter","length","slotProps","toolbar","showQuickFilter","columns","field","headerName","width","renderCell","row","IconButton","unfavoriteSavedSession","favoriteSavedSession","StarIcon","StarBorderIcon","editable","measureGridWidth","_Fragment","Link","href","event","preventDefault","activateSession","Tooltip","disableInteractive","transition","timeout","title","toLocaleString","formatDistanceToNow","addSuffix","DeleteIcon"],"ignoreList":[],"sourceRoot":""}