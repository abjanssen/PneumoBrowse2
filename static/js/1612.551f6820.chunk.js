"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[1612,4630],{74630:(e,t,n)=>{n.r(t),n.d(t,{default:()=>x});var r=n(7552),o=n(87731),a=n(963),s=n(36715),c=n(29499),l=n(58507),i=n(5401),u=n(31409),m=n.n(u),w=n(1631),d=n(75785),p=n(92562),f=n(37565);function h({href:e,children:t}){return r.createElement(o.A,{target:"_blank",href:e},t)}async function b(e){const t=await fetch(e);if(!t.ok)throw new Error(`HTTP ${t.status} fetching ${e}: ${await t.text()}`);return t}const g={};async function E(e){if(void 0!==g[e])return g[e];const t=new URL(e).search,n=await async function(e){return(await b(e)).text()}(e);let r=new RegExp(/\/\/# sourceMappingURL=(.*)/).exec(n)?.[1]||"";r=new URL(r,e).href+t;const o=await async function(e){return(await b(e)).json()}(r),a=new w.SourceMapConsumer(o);return g[e]=a,a}const k=1e4,$=(0,d.n9)()((e=>({pre:{background:(0,a.X4)(e.palette.error.main,.2),border:`1px solid ${e.palette.divider}`,overflow:"auto",margin:20,maxHeight:300}})));function y({text:e,extra:t}){const{classes:n}=$(),o=encodeURIComponent(`${["I got this error from JBrowse, here is the stack trace:\n","```",e,"```",t?`supporting data: ${JSON.stringify(t,null,2)}`:""].join("\n")}\n`),a=[e,t?`supporting data: ${JSON.stringify(t,null,2)}`:""].join("\n"),c="jbrowse2@berkeley.edu",l=`https://github.com/GMOD/jbrowse-components/issues/new?labels=bug&title=JBrowse+issue&body=${o}`,i=`mailto:${c}?subject=JBrowse%202%20error&body=${o}`;return r.createElement(r.Fragment,null,r.createElement(s.A,null,"Post a new issue at ",r.createElement(h,{href:l},"GitHub")," or send an email to ",r.createElement(h,{href:i},c)," "),r.createElement("pre",{className:n.pre},a))}function x({error:e,onClose:t,extra:n}){const[o,a]=(0,r.useState)(),[s,u]=(0,r.useState)(),[w,d]=(0,r.useState)(!1),h=e?`${e}`:"",b=function(e,t){if(e.startsWith("Error:")){const n=`${t}`;return e.slice(n.length)}return e}(`${"object"==typeof e&&null!==e&&"stack"in e?e.stack:""}`,h);(0,r.useEffect)((()=>{(async()=>{try{const e=await async function(e){const t=e.split("\n"),n=[];for(const e of t){const t=new RegExp(/(.*)(https?:\/\/.*):(\d+):(\d+)/).exec(e);if(null===t){n.push(e);continue}const r=t[2],o=(await E(r)).originalPositionFor({line:Number.parseInt(t[3]),column:Number.parseInt(t[4])});o.source&&o.line&&o.column?n.push(`${o.source}:${o.line}:${o.column+1} (${t[1].trim()})`):n.push(e)}return n.join("\n")}(b);a(e)}catch(e){console.error(e),a(b),u(e)}})()}),[b]);const g=[s?"Error loading source map, showing raw stack trace below:":"",h.length>k?`${h.slice(0,k)}...`:h,o||"No stack trace available",window.JBrowseSession?`JBrowse ${window.JBrowseSession.version}`:""].filter((e=>!!e)).join("\n");return r.createElement(p.A,{open:!0,onClose:t,title:"Stack trace",maxWidth:"xl"},r.createElement(c.A,null,void 0===o?r.createElement(f.A,{variant:"h6"}):r.createElement(y,{text:g,extra:n})),r.createElement(l.A,null,r.createElement(i.A,{variant:"contained",color:"secondary",onClick:()=>{m()(g),d(!0),setTimeout((()=>{d(!1)}),1e3)}},w?"Copied!":"Copy stack trace to clipboard"),r.createElement(i.A,{variant:"contained",color:"primary",onClick:t},"Close")))}},81612:(e,t,n)=>{n.r(t),n.d(t,{default:()=>w});var r=n(7552),o=n(74630),a=n(99546),s=n(4902),c=n(71627),l=n(89003),i=n(61723),u=n(68446),m=n(37205);const w=(0,u.observer)((function({model:e}){return r.createElement(m.A,{message:`${e.error}`,severity:"error",action:r.createElement(r.Fragment,null,r.createElement(l.A,{title:"Reload track"},r.createElement(i.A,{"data-testid":"reload_button",onClick:()=>{e.reload()}},r.createElement(s.A,null))),r.createElement(l.A,{title:"Show stack trace"},r.createElement(i.A,{onClick:()=>{(0,a.getSession)(e).queueDialog((t=>[o.default,{onClose:t,error:e.error}]))}},r.createElement(c.A,null))))})}))}}]);
//# sourceMappingURL=1612.551f6820.chunk.js.map