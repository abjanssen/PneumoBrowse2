"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[3425],{7720:(e,t,r)=>{r.d(t,{A:()=>n});var a=r(74893),o=r(69500);const n=(0,a.A)((0,o.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore")},23425:(e,t,r)=>{r.r(t),r.d(t,{default:()=>S});var a=r(7552),o=r(49823),n=r(99546),s=r(99834),i=r(92516),c=r(7720),d=r(550),l=r(29499),p=r(63011),m=r(48253),u=r(36715),h=r(63165),x=r(1343),A=r(58507),f=r(5401),b=r(68446),y=r(75785),w=r(32984),g=r(84495),k=r(69500);const v=(0,y.n9)()((e=>({expandIcon:{color:e.palette.tertiary.contrastText||"#fff"},minWidth:{minWidth:500}}))),S=(0,b.observer)((function({onClose:e,model:t}){const{classes:r}=v(),[b,y]=(0,a.useState)(),[S,j]=(0,a.useState)(),[C,I]=(0,a.useState)(""),N=(0,n.getSession)(t),{assemblyNames:W}=N,[P,R]=(0,a.useState)(W[0]),[M,T]=(0,a.useState)("shareLinkAccordion");return(0,k.jsxs)(o.Dialog,{open:!0,onClose:e,maxWidth:"xl",title:"Import bookmarks",children:[(0,k.jsxs)(l.A,{className:r.minWidth,children:[(0,k.jsxs)(p.A,{expanded:"shareLinkAccordion"===M,onChange:()=>{T("shareLinkAccordion")},children:[(0,k.jsx)(m.A,{expandIcon:(0,k.jsx)(c.A,{className:r.expandIcon}),children:(0,k.jsx)(u.A,{style:{display:"flex",alignItems:"center",gap:"5px"},children:"Import from share link"})}),(0,k.jsxs)(h.A,{children:[(0,k.jsx)(u.A,{children:"Paste a bookmark share link generated by the 'Share' button from the bookmarks widget"}),(0,k.jsx)(x.A,{label:"Enter Share URL",variant:"outlined",fullWidth:!0,value:C,onChange:e=>{I(e.target.value)}})]})]}),(0,k.jsxs)(p.A,{expanded:"fileAccordion"===M,onChange:()=>{T("fileAccordion")},children:[(0,k.jsx)(m.A,{expandIcon:(0,k.jsx)(c.A,{className:r.expandIcon}),children:(0,k.jsx)(u.A,{children:"Import from file"})}),(0,k.jsxs)(h.A,{children:[(0,k.jsx)(o.FileSelector,{location:b,setLocation:y,name:"File",description:'Choose a BED or TSV format file to import. Required TSV column headers are "chrom, start, end, label, assembly_name".'}),(0,k.jsx)(o.AssemblySelector,{onChange:e=>{R(e)},helperText:"Select the assembly for BED file.",session:N,selected:P})]})]}),S?(0,k.jsx)(o.ErrorMessage,{error:S}):null]}),(0,k.jsxs)(A.A,{children:[(0,k.jsx)(f.A,{variant:"contained",color:"secondary",onClick:e,children:"Cancel"}),(0,k.jsx)(f.A,{"data-testid":"dialogImport",variant:"contained",color:"primary",disabled:!b&&!C,startIcon:(0,k.jsx)(d.A,{}),onClick:async()=>{try{if("fileAccordion"===M&&b){const e=(await(0,s.openLocation)(b).readFile("utf8")).split(/\n|\r\n|\r/).filter((e=>!!e.trim()));"BED"==((r=e[0]).startsWith("chrom")&&r.includes("assembly_name")?"TSV":"BED")?t.importBookmarks(await async function(e,t){return e.filter((e=>!e.startsWith("#"))).map((e=>{const[r,a,o,n]=e.split("\t");return{assemblyName:t,refName:r,start:+a,end:+o,label:"."===n?void 0:n}}))}(e,P)):t.importBookmarks(await async function(e){return e[0].startsWith("chrom")&&(e=e.slice(1)),e.filter((e=>!e.startsWith("#"))).map((e=>{const[t,r,a,o,n]=e.split("\t");return{assemblyName:n,refName:t,start:+r,end:+a,label:"."===o?void 0:o}}))}(e))}else"shareLinkAccordion"===M&&C&&(0,i.xv)(N)&&t.importBookmarks(await async function(e,t){const r=new URL(e),a=r.searchParams.get("bookmarks"),o=r.searchParams.get("password"),n=await(0,w.Z)(`${t??"https://share.jbrowse.org/api/v1/"}load`,a||"",o||"");return JSON.parse(await(0,g.LP)(n)).sharedBookmarks}(C,N.shareURL));e()}catch(e){console.error(e),j(e)}var r},children:"Import"})]})]})}))},25877:(e,t,r)=>{r.d(t,{A:()=>s,T:()=>n});var a=r(33761),o=r(85693);function n(e){return(0,o.Ay)("MuiAccordionSummary",e)}const s=(0,a.A)("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"])},32984:(e,t,r)=>{r.d(t,{J:()=>i,Z:()=>c});var a=r(84495);const o=async(e,t)=>(await Promise.all([r.e(7753),r.e(9831),r.e(5156)]).then(r.t.bind(r,29831,23))).encrypt(e,t).toString(),n=async(e,t)=>{const a=await Promise.all([r.e(7753),r.e(9831),r.e(5156)]).then(r.t.bind(r,29831,23)),o=await Promise.all([r.e(7753),r.e(6235)]).then(r.t.bind(r,12598,23));return a.decrypt(e,t).toString(o)};function s(e){try{return JSON.parse(e).message}catch(t){return e}}async function i(e,t,r){const n=await(0,a.eW)(JSON.stringify(e)),i=window.btoa([...window.crypto.getRandomValues(new Uint8Array(10))].map((e=>String.fromCharCode(e))).join("")).replaceAll(/[+/]/g,"").slice(0,5);const c=await o(n,i),d=new FormData;d.append("session",c),d.append("dateShared",`${Date.now()}`),d.append("referer",r);const l=await fetch(`${t}share`,{method:"POST",mode:"cors",body:d});if(!l.ok){const e=await l.text();throw new Error(s(e))}return{json:await l.json(),encryptedSession:c,password:i}}async function c(e,t,r){const a=t.split("share-")[1],o=`${e}?sessionId=${encodeURIComponent(a)}`,i=await fetch(o);if(!i.ok)throw new Error(s(await i.text()));const c=await i.json();return n(c.session,r)}},48253:(e,t,r)=>{r.d(t,{A:()=>f});var a=r(7552),o=r(93878),n=r(70799),s=r(51148),i=r(84893),c=r(4785),d=r(48054),l=r(51132),p=r(25877),m=r(43045),u=r(69500);const h=(0,s.Ay)(d.A,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(e,t)=>t.root})((0,i.A)((({theme:e})=>{const t={duration:e.transitions.duration.shortest};return{display:"flex",width:"100%",minHeight:48,padding:e.spacing(0,2),transition:e.transitions.create(["min-height","background-color"],t),[`&.${p.A.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${p.A.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`&:hover:not(.${p.A.disabled})`]:{cursor:"pointer"},variants:[{props:e=>!e.disableGutters,style:{[`&.${p.A.expanded}`]:{minHeight:64}}}]}}))),x=(0,s.Ay)("span",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(e,t)=>t.content})((0,i.A)((({theme:e})=>({display:"flex",textAlign:"start",flexGrow:1,margin:"12px 0",variants:[{props:e=>!e.disableGutters,style:{transition:e.transitions.create(["margin"],{duration:e.transitions.duration.shortest}),[`&.${p.A.expanded}`]:{margin:"20px 0"}}}]})))),A=(0,s.Ay)("span",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(e,t)=>t.expandIconWrapper})((0,i.A)((({theme:e})=>({display:"flex",color:(e.vars||e).palette.action.active,transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),[`&.${p.A.expanded}`]:{transform:"rotate(180deg)"}})))),f=a.forwardRef((function(e,t){const r=(0,c.b)({props:e,name:"MuiAccordionSummary"}),{children:s,className:i,expandIcon:d,focusVisibleClassName:f,onClick:b,slots:y,slotProps:w,...g}=r,{disabled:k=!1,disableGutters:v,expanded:S,toggle:j}=a.useContext(l.A),C={...r,expanded:S,disabled:k,disableGutters:v},I=(e=>{const{classes:t,expanded:r,disabled:a,disableGutters:o}=e,s={root:["root",r&&"expanded",a&&"disabled",!o&&"gutters"],focusVisible:["focusVisible"],content:["content",r&&"expanded",!o&&"contentGutters"],expandIconWrapper:["expandIconWrapper",r&&"expanded"]};return(0,n.A)(s,p.T,t)})(C),N={slots:y,slotProps:w},[W,P]=(0,m.A)("root",{ref:t,shouldForwardComponentProp:!0,className:(0,o.A)(I.root,i),elementType:h,externalForwardedProps:{...N,...g},ownerState:C,additionalProps:{focusRipple:!1,disableRipple:!0,disabled:k,"aria-expanded":S,focusVisibleClassName:(0,o.A)(I.focusVisible,f)},getSlotProps:e=>({...e,onClick:t=>{e.onClick?.(t),(e=>{j&&j(e),b&&b(e)})(t)}})}),[R,M]=(0,m.A)("content",{className:I.content,elementType:x,externalForwardedProps:N,ownerState:C}),[T,D]=(0,m.A)("expandIconWrapper",{className:I.expandIconWrapper,elementType:A,externalForwardedProps:N,ownerState:C});return(0,u.jsxs)(W,{...P,children:[(0,u.jsx)(R,{...M,children:s}),d&&(0,u.jsx)(T,{...D,children:d})]})}))},63165:(e,t,r)=>{r.d(t,{A:()=>m});var a=r(7552),o=r(93878),n=r(70799),s=r(51148),i=r(84893),c=r(4785),d=r(79509),l=r(69500);const p=(0,s.Ay)("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(e,t)=>t.root})((0,i.A)((({theme:e})=>({padding:e.spacing(1,2,2)})))),m=a.forwardRef((function(e,t){const r=(0,c.b)({props:e,name:"MuiAccordionDetails"}),{className:a,...s}=r,i=r,m=(e=>{const{classes:t}=e;return(0,n.A)({root:["root"]},d.n,t)})(i);return(0,l.jsx)(p,{className:(0,o.A)(m.root,a),ref:t,ownerState:i,...s})}))},79509:(e,t,r)=>{r.d(t,{A:()=>s,n:()=>n});var a=r(33761),o=r(85693);function n(e){return(0,o.Ay)("MuiAccordionDetails",e)}const s=(0,a.A)("MuiAccordionDetails",["root"])}}]);
//# sourceMappingURL=3425.780b95ef.chunk.js.map