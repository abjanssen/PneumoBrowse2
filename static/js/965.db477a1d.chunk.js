"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[965],{40965:(e,t,n)=>{n.r(t),n.d(t,{default:()=>w});var o=n(67758),a=n(92562),s=n(99546),i=n(91468),r=n(7552),c=n(35300),l=n(87083),d=n(68584),f=n(69092),u=n(31409),g=n.n(u),p=n(68446),m=n(75785),x=n(67112),b=n(69500);function j(e){const t=(0,o.c)(12),{config:n}=e,[a,i]=(0,r.useState)(),[f,u]=(0,r.useState)();let g;t[0]!==n?(g=(0,s.getSession)(n),t[0]=n,t[1]=g):g=t[1];const p=g,{rpcManager:m}=p;let j,h,C;t[2]!==n||t[3]!==m?(j=()=>{(async()=>{try{const e=(0,d.readConfObject)(n,"adapter"),t=await m.call(n.trackId,"CoreGetInfo",{adapterConfig:e});u(t)}catch(e){const t=e;console.error(t),i(t)}})()},h=[n,m],t[2]=n,t[3]=m,t[4]=j,t[5]=h):(j=t[4],h=t[5]),(0,r.useEffect)(j,h),t[6]!==f?(C="string"==typeof f?{header:`<pre>${f.replaceAll("<","&lt;").replaceAll(">","&gt;")}</pre>`}:f||{},t[6]=f,t[7]=C):C=t[7];const A=C;let y;return t[8]!==A||t[9]!==a||t[10]!==f?(y=(0,b.jsx)(l.default,{title:"File info",children:a?(0,b.jsx)(x.ErrorMessage,{error:a}):void 0===f?(0,b.jsx)(x.LoadingEllipses,{message:"Loading file data"}):(0,b.jsx)(c.default,{attributes:A})}),t[8]=A,t[9]=a,t[10]=f,t[11]=y):y=t[11],y}var h=n(76218);const C=(0,m.n9)()((e=>({container:{minWidth:800},refNames:{maxHeight:300,overflow:"auto",flexGrow:1,background:e.palette.background.default}}))),A=(0,p.observer)((function({config:e,onClose:t}){const{classes:n}=C(),[o,a]=(0,r.useState)(),[c,l]=(0,r.useState)(),[u,p]=(0,r.useState)(!1),{rpcManager:m}=(0,s.getSession)(e);(0,r.useEffect)((()=>{(async()=>{try{const t=await Promise.all([...new Set((0,i.getConfAssemblyNames)(e))].map((async t=>{const n=(0,d.readConfObject)(e,"adapter");return[t,await m.call(e.trackId,"CoreGetRefNames",{adapterConfig:n,regions:[{assemblyName:t}]})]})));l(Object.fromEntries(t))}catch(e){console.error(e),a(e)}})()}),[e,m]);const j=c?Object.entries(c):[],A=j.flatMap((([e,t])=>[`--- ${e} ---`,...t.slice(0,1e4),t.length>1e4?`\nToo many refNames to show in browser for ${e}, use "Copy ref names" button to copy to clipboard`:""])).filter((e=>!!e)).join("\n");return(0,b.jsx)(x.Dialog,{open:!0,title:"Reference sequence names used in track",onClose:t,maxWidth:"xl",children:(0,b.jsx)(h.A,{className:n.container,children:o?(0,b.jsx)(x.ErrorMessage,{error:o}):void 0===c?(0,b.jsx)(x.LoadingEllipses,{message:"Loading refNames"}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(f.A,{variant:"contained",onClick:()=>{g()(j.flatMap((([e,t])=>[`--- ${e} ---`,...t])).filter((e=>!!e)).join("\n")),p(!0),setTimeout((()=>{p(!1)}),1e3)},children:u?"Copied to clipboard!":"Copy ref names"}),(0,b.jsx)("pre",{className:n.refNames,children:A})]})})})})),y=(0,m.n9)()({content:{minWidth:800},button:{float:"right"}});function v(e,t){for(const n in e)n===t?delete e[n]:"object"==typeof e[n]&&v(e[n],t);return e}const N=(0,p.observer)((function({config:e}){const[t,n]=(0,r.useState)(!1),o=(0,d.readConfObject)(e),a=(0,s.getSession)(e),{classes:i}=y(),[u,p]=(0,r.useState)(!1),m=(0,d.getConf)(a,["formatAbout","hideUris"])||(0,d.readConfObject)(e,["formatAbout","hideUris"]),{pluginManager:x}=(0,s.getEnv)(a),h=x.evaluateExtensionPoint("Core-customizeAbout",{config:{...o,...(0,d.getConf)(a,["formatAbout","config"],{config:o}),...(0,d.readConfObject)(e,["formatAbout","config"],{config:o})}},{session:a,config:e}),C=x.evaluateExtensionPoint("Core-extraAboutPanel",null,{session:a,config:e});return(0,b.jsxs)("div",{className:i.content,children:[(0,b.jsxs)(l.default,{title:"Configuration",children:[m?null:(0,b.jsxs)("span",{className:i.button,children:[(0,b.jsx)(f.A,{variant:"contained",color:"secondary",onClick:()=>{p(!0)},children:"Show ref names"}),(0,b.jsx)(f.A,{variant:"contained",onClick:()=>{const e=v(structuredClone(o),"baseUri");g()(JSON.stringify(e,null,2)),n(!0),setTimeout((()=>{n(!1)}),1e3)},children:t?"Copied to clipboard!":"Copy config"})]}),(0,b.jsx)(c.default,{attributes:h.config,omit:["displays","baseUri","refNames","formatAbout","metadata"],hideUris:m})]}),h.config.metadata?(0,b.jsx)(l.default,{title:"Metadata",children:(0,b.jsx)(c.default,{attributes:h.config.metadata,omit:["displays","baseUri","refNames","formatAbout"],hideUris:m})}):null,C?(0,b.jsx)(l.default,{title:C.name,children:(0,b.jsx)(C.Component,{config:e})}):null,(0,b.jsx)(j,{config:e}),u?(0,b.jsx)(A,{config:e,onClose:()=>{p(!1)}}):null]})}));function w(e){const t=(0,o.c)(10),{config:n,handleClose:r}=e;let c,l;if(t[0]!==n){const e=(0,s.getSession)(n);l=(0,i.getTrackName)(n,e);const{pluginManager:o}=(0,s.getEnv)(e);c=o.evaluateExtensionPoint("Core-replaceAbout",N,{session:e,config:n}),t[0]=n,t[1]=c,t[2]=l}else c=t[1],l=t[2];const d=c;let f,u;return t[3]!==d||t[4]!==n?(f=(0,b.jsx)(d,{config:n}),t[3]=d,t[4]=n,t[5]=f):f=t[5],t[6]!==r||t[7]!==f||t[8]!==l?(u=(0,b.jsx)(a.A,{open:!0,onClose:r,title:l,maxWidth:"xl",children:f}),t[6]=r,t[7]=f,t[8]=l,t[9]=u):u=t[9],u}},87083:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var o=n(67758),a=n(48759),s=n(61282),i=n(75068),r=n(3032),c=n(76386),l=n(75785),d=n(69500);const f=(0,l.n9)()((e=>({expansionPanelDetails:{display:"block",padding:e.spacing(1)},icon:{color:e.palette.tertiary.contrastText||"#fff"}})));function u(e){const t=(0,o.c)(14),{children:n,title:l,defaultExpanded:u}=e,g=void 0===u||u,{classes:p}=f();let m,x,b,j,h;return t[0]!==p.icon?(m=(0,d.jsx)(a.A,{className:p.icon}),t[0]=p.icon,t[1]=m):m=t[1],t[2]!==l?(x=(0,d.jsx)(s.A,{variant:"button",children:l}),t[2]=l,t[3]=x):x=t[3],t[4]!==m||t[5]!==x?(b=(0,d.jsx)(i.A,{expandIcon:m,children:x}),t[4]=m,t[5]=x,t[6]=b):b=t[6],t[7]!==n||t[8]!==p.expansionPanelDetails?(j=(0,d.jsx)(r.A,{className:p.expansionPanelDetails,children:n}),t[7]=n,t[8]=p.expansionPanelDetails,t[9]=j):j=t[9],t[10]!==g||t[11]!==b||t[12]!==j?(h=(0,d.jsxs)(c.A,{defaultExpanded:g,children:[b,j]}),t[10]=g,t[11]=b,t[12]=j,t[13]=h):h=t[13],h}}}]);
//# sourceMappingURL=965.db477a1d.chunk.js.map