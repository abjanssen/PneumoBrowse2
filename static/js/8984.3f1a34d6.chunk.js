"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[8984],{53740:(e,t,n)=>{n.d(t,{A:()=>f});var o=n(7552),r=n(68584),s=n(99546),i=n(68446),a=n(350);function l(e,t){const n=t?(0,a.h)(t):void 0,o=e.get("start");let r=e.get("end");const s=e.get("strand"),i=e.get("mate"),l=e.get("refName");let c,d=0,u=0,m=0,g=0;if(["<TRA","<DEL","<INV","<INS","<DUP","<CNV"].some(e=>t?.startsWith(e))){const t=e.get("INFO"),n=t?.END?.[0]??r;c=t?.CHR2?.[0]??l,d=n,u=n-1,r=o+1}else if(n?.MatePosition){const e=n.MatePosition.split(":");g="left"===n.MateDirection?1:-1,m="left"===n.Join?-1:1,d=+e[1],u=+e[1]-1,c=e[0]}return{k1:{refName:l,start:o,end:r,strand:s,mateDirection:g},k2:i??{refName:c||"unknown",end:d,start:u,mateDirection:m}}}function c(e,t){const{k1:n,k2:o}=l(e,t);return[e.get("name"),e.get("id"),(0,s.assembleLocString)(n),(0,s.assembleLocString)(o),e.get("INFO")?.SVTYPE,t].filter(e=>!!e).join("<br/>")}var d=n(69500);const u=(0,o.lazy)(()=>n.e(2241).then(n.bind(n,72241))),m=(0,i.observer)(function({model:e,feature:t,alt:n,assembly:i,view:a}){const[m,g]=(0,o.useState)(!1),{height:f}=e,{k1:h,k2:x}=l(t,n),b=(0,o.useRef)(null),k=(0,r.getConf)(e,"color",{feature:t,alt:n}),p=i.getCanonicalRefName(h.refName)||h.refName,j=i.getCanonicalRefName(x.refName)||x.refName,v=h.start,N=x.start,S=a.bpToPx({refName:p,coord:v})?.offsetPx,C=a.bpToPx({refName:j,coord:N})?.offsetPx;if(void 0!==S&&void 0!==C){const r=(C-S)/2,i=Math.abs(r),l=Math.min(f,i),p=S-a.offsetPx,j=C-a.offsetPx,v=m?"black":k,N=3;return i>1?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("path",{d:`M ${p} 0 C ${p} ${l}, ${j} ${l}, ${j} 0`,ref:b,...(0,s.getStrokeProps)(v),strokeWidth:N,onMouseOut:()=>{g(!1)},onMouseOver:()=>{g(!0)},onClick:()=>{e.selectFeature(t)},fill:"none",pointerEvents:"stroke"}),h.mateDirection?(0,d.jsx)("line",{...(0,s.getStrokeProps)(v),strokeWidth:N,onMouseOut:()=>{g(!1)},onMouseOver:()=>{g(!0)},onClick:()=>{e.selectFeature(t)},x1:p,x2:p+20*h.mateDirection,y1:1.5,y2:1.5}):null,x.mateDirection?(0,d.jsx)("line",{...(0,s.getStrokeProps)(v),strokeWidth:N,onMouseOut:()=>{g(!1)},onMouseOver:()=>{g(!0)},onClick:()=>{e.selectFeature(t)},x1:j,x2:j+20*x.mateDirection,y1:1.5,y2:1.5}):null,m?(0,d.jsx)(o.Suspense,{fallback:null,children:(0,d.jsx)(u,{contents:c(t,n)})}):null]}):null}return null}),g=(0,i.observer)(function({model:e,exportSVG:t,children:n}){const{height:o}=e,r=(0,s.getContainingView)(e),i=Math.round(r.dynamicBlocks.totalWidthPx);return t?n:(0,d.jsx)("svg",{width:i,height:o,children:n})}),f=(0,i.observer)(function({model:e,exportSVG:t}){const n=(0,s.getContainingView)(e),o=(0,s.getSession)(e),{assemblyManager:r}=o,{features:i}=e,a=r.get(n.assemblyNames[0]);return a?(0,d.jsx)(g,{model:e,exportSVG:t,children:i?.map(t=>{const r=t.get("ALT");return r?.map(r=>(0,d.jsx)(m,{session:o,feature:t,alt:r,view:n,model:e,assembly:a},`${t.id()}-${r}`))??(0,d.jsx)(m,{session:o,feature:t,view:n,model:e,assembly:a},t.id())})}):null})},78984:(e,t,n)=>{n.r(t),n.d(t,{default:()=>S});var o=n(68446),r=n(53740),s=n(67758),i=n(7552),a=n(99546),l=n(90863),c=n(98231),d=n(65468),u=n(37962),m=n(89870),g=n(67112),f=n(75785),h=n(69500);const x=(0,f.n9)()(e=>({loading:{backgroundColor:e.palette.background.default,backgroundImage:`repeating-linear-gradient(45deg, transparent, transparent 5px, ${e.palette.action.disabledBackground} 5px, ${e.palette.action.disabledBackground} 10px)`,position:"absolute",bottom:0,height:50,width:300,right:0,pointerEvents:"none",textAlign:"center"}})),b=(0,o.observer)(function({model:e}){const{classes:t}=x(),{message:n}=e;return(0,h.jsx)("div",{className:t.loading,children:(0,h.jsx)(g.LoadingEllipses,{message:n})})}),k=(0,i.lazy)(()=>Promise.all([n.e(1631),n.e(4630)]).then(n.bind(n,74630)));function p(e){const t=(0,s.c)(13),{model:n}=e;let o,r,i,l,g,f,x;return t[0]!==n?(o=()=>{n.reload()},t[0]=n,t[1]=o):o=t[1],t[2]===Symbol.for("react.memo_cache_sentinel")?(r=(0,h.jsx)(c.A,{}),t[2]=r):r=t[2],t[3]!==o?(i=(0,h.jsx)(u.A,{title:"Reload",children:(0,h.jsx)(m.A,{"data-testid":"reload_button",onClick:o,children:r})}),t[3]=o,t[4]=i):i=t[4],t[5]!==n?(l=()=>{(0,a.getSession)(n).queueDialog(e=>[k,{onClose:e,error:n.error}])},t[5]=n,t[6]=l):l=t[6],t[7]===Symbol.for("react.memo_cache_sentinel")?(g=(0,h.jsx)(d.A,{}),t[7]=g):g=t[7],t[8]!==l?(f=(0,h.jsx)(u.A,{title:"Show stack trace",children:(0,h.jsx)(m.A,{onClick:l,children:g})}),t[8]=l,t[9]=f):f=t[9],t[10]!==i||t[11]!==f?(x=(0,h.jsxs)(h.Fragment,{children:[i,f]}),t[10]=i,t[11]=f,t[12]=x):x=t[12],x}const j=(0,o.observer)(function({model:e,children:t}){const{error:n,regionTooLarge:o}=e;return n?(0,h.jsx)(l.LW,{message:`${n}`,severity:"error",action:(0,h.jsx)(p,{model:e})}):o?e.regionCannotBeRendered():(0,h.jsx)(v,{model:e,children:t})}),v=(0,o.observer)(function({model:e,children:t}){const{loading:n}=e;return(0,h.jsxs)("div",{children:[t,n?(0,h.jsx)(b,{model:e}):null]})}),N=j,S=(0,o.observer)(function({model:e,exportSVG:t}){return(0,h.jsx)(N,{model:e,children:(0,h.jsx)(r.A,{model:e,exportSVG:t})})})}}]);
//# sourceMappingURL=8984.3f1a34d6.chunk.js.map