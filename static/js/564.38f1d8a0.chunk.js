"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[564],{58183(e,n,t){t.r(n),t.d(n,{default:()=>p});var a=t(42918),i=t(85787),s=t(65045),o=t(24215),r=t(37015),l=t(42783),c=t(15675),d=t(11543),h=t(65525),g=t(35635);const{eL:y}=g;function u(e,n){let t=0,a=0;for(let i=0;i<e.length;i++){const s=+e[i],o=e[i+1],r=Math.min(s,n-t);if(t>=n)break;"I"===o?a+=s:"D"===o?t+=r:"M"!==o&&"="!==o&&"X"!==o||(a+=r,t+=r)}return[t,a]}var w=t(32118);const f=(0,s.n)()({padding:{margin:10,border:"1px solid #ccc"}});function p({session:e,view:n,feature:t,trackId:s,handleClose:g}){const{classes:p}=f(),b=-1===t.get("strand"),m=!!t.get("CIGAR"),[k,v]=(0,a.useState)(b),[A,C]=(0,a.useState)("1000"),[j,x]=(0,a.useState)(!0);return(0,w.jsxs)(i.A,{open:!0,title:"Launch synteny view",onClose:g,children:[(0,w.jsxs)(o.A,{children:[n&&m?(0,w.jsx)(r.A,{className:p.padding,control:(0,w.jsx)(l.A,{checked:j,onChange:e=>{x(e.target.checked)}}),label:"Use CIGAR string to navigate the current visible to the target"}):null,b?(0,w.jsx)(r.A,{className:p.padding,control:(0,w.jsx)(l.A,{checked:k,onChange:e=>{v(e.target.checked)}}),label:"Note: The feature is inverted in orientation on the target sequence. This will result in the lower panel having genomic coordinates decreasing left to right. Horizontally flip?"}):null,(0,w.jsx)(c.A,{label:"Add window size in bp",value:A,onChange:e=>{C(e.target.value)}})]}),(0,w.jsxs)(d.A,{children:[(0,w.jsx)(h.A,{variant:"contained",onClick:()=>{(async()=>{try{await async function({feature:e,windowSize:n,session:t,trackId:a,region:i,horizontallyFlip:s}){const o=e.get("CIGAR"),r=e.get("strand"),l=e.get("refName"),c=e.get("assemblyName"),d=e.get("start"),h=e.get("end"),g=e.get("mate"),w=g.start,f=g.end,p=g.assemblyName,b=g.refName;let m,k,v,A;if(i&&o){const e=i.start,n=i.end,t=y(o),[a,s]=u(t,e-d),[l,c]=u(t,n-d),h=-1===r?-1:1;v=d+a,A=d+l,m=(-1===r?f:w)+s*h,k=(-1===r?f:w)+c*h}else v=d,A=h,m=w,k=f;const C=`${l}:${Math.floor(v-n)}-${Math.floor(A+n)}`,j=Math.min(m,k),x=Math.max(m,k),S=`${b}:${Math.floor(j-n)}-${Math.floor(x+n)}${s?"[rev]":""}`;t.addView("LinearSyntenyView",{type:"LinearSyntenyView",views:[{type:"LinearGenomeView",hideHeader:!0,init:{assembly:c,loc:C}},{type:"LinearGenomeView",hideHeader:!0,init:{assembly:p,loc:S}}],tracks:[{configuration:a,type:"SyntenyTrack",displays:[{type:"LinearSyntenyDisplay",configuration:`${a}-LinearSyntenyDisplay`}]}]})}({feature:t,windowSize:+A,horizontallyFlip:k,trackId:s,session:e,region:j?n?.dynamicBlocks.contentBlocks[0]:void 0})}catch(n){console.error(n),e.notifyError(`${n}`,n)}})(),g()},children:"Submit"}),(0,w.jsx)(h.A,{variant:"contained",color:"secondary",onClick:()=>{g()},children:"Cancel"})]})]})}}}]);
//# sourceMappingURL=564.38f1d8a0.chunk.js.map