{"version":3,"file":"static/js/2617.e9cc1cfa.chunk.js","mappings":"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","sources":["../../../plugins/alignments/src/LinearSNPCoverageDisplay/components/arcUtils.ts","../../../plugins/alignments/src/LinearSNPCoverageDisplay/components/ArcTooltipContents.tsx","../../../plugins/alignments/src/LinearSNPCoverageDisplay/components/SashimiArcs.tsx","../../../plugins/alignments/src/LinearSNPCoverageDisplay/components/SNPCoverageDisplayComponent.tsx"],"sourcesContent":["import type { Assembly } from '@jbrowse/core/assemblyManager/assembly'\nimport type { Feature } from '@jbrowse/core/util'\nimport type { LinearGenomeViewModel } from '@jbrowse/plugin-linear-genome-view'\n\nexport interface ArcData {\n  id: string\n  path: string\n  stroke: string\n  strokeWidth: number\n  start: number\n  end: number\n  refName: string\n  score: number\n  strand: number\n}\n\nexport function getArcColor(strand: number) {\n  return strand === 1\n    ? 'rgba(255,170,170,0.7)'\n    : strand === -1\n      ? 'rgba(160,160,255,0.7)'\n      : 'rgba(200,200,200,0.7)'\n}\n\nexport function getArcSelectedColor(strand: number) {\n  return strand === 1\n    ? 'rgba(255,100,100,1)'\n    : strand === -1\n      ? 'rgba(100,100,255,1)'\n      : 'rgba(120,120,120,1)'\n}\n\nexport function getStrandLabel(strand: number) {\n  return strand === 1 ? '+' : strand === -1 ? '-' : 'unknown'\n}\n\nexport function featureToArcData(\n  feature: Feature,\n  view: LinearGenomeViewModel,\n  effectiveHeight: number,\n  offsetPx: number,\n  assembly: Assembly,\n): ArcData | undefined {\n  const start = feature.get('start')\n  const end = feature.get('end')\n  const refName = assembly.getCanonicalRefName2(feature.get('refName'))\n\n  const startPx = view.bpToPx({ refName, coord: start })\n  const endPx = view.bpToPx({ refName, coord: end })\n\n  if (startPx === undefined || endPx === undefined) {\n    return undefined\n  }\n\n  const left = startPx.offsetPx - offsetPx\n  const right = endPx.offsetPx - offsetPx\n  const strand = feature.get('effectiveStrand') ?? 0\n  const score = feature.get('score') ?? 1\n\n  return {\n    id: feature.id(),\n    path: `M ${left} ${effectiveHeight * 0.9} C ${left} ${effectiveHeight * 0.1}, ${right} ${effectiveHeight * 0.1}, ${right} ${effectiveHeight * 0.9}`,\n    stroke: getArcColor(strand),\n    strokeWidth: Math.log(score + 1),\n    start,\n    end,\n    refName,\n    score,\n    strand,\n  }\n}\n","import { toLocale } from '@jbrowse/core/util'\n\nimport { getStrandLabel } from './arcUtils.ts'\n\nimport type { ArcData } from './arcUtils.ts'\n\nexport default function ArcTooltipContents({ arc }: { arc: ArcData }) {\n  return (\n    <div>\n      <div>\n        <strong>Intron/Skip</strong>\n      </div>\n      <div>\n        Location: {arc.refName}:{toLocale(arc.start)}-{toLocale(arc.end)}\n      </div>\n      <div>Length: {toLocale(arc.end - arc.start)} bp</div>\n      <div>Reads supporting junction: {arc.score}</div>\n      <div>Strand: {getStrandLabel(arc.strand)}</div>\n    </div>\n  )\n}\n","import { useEffect, useMemo, useRef, useState } from 'react'\n\nimport BaseTooltip from '@jbrowse/core/ui/BaseTooltip'\nimport {\n  getContainingTrack,\n  getContainingView,\n  getSession,\n  isSessionModelWithWidgets,\n  notEmpty,\n} from '@jbrowse/core/util'\nimport { observer } from 'mobx-react'\n\nimport ArcTooltipContents from './ArcTooltipContents.tsx'\nimport { featureToArcData, getArcSelectedColor } from './arcUtils.ts'\n\nimport type { ArcData } from './arcUtils.ts'\nimport type { Feature } from '@jbrowse/core/util'\nimport type { LinearGenomeViewModel } from '@jbrowse/plugin-linear-genome-view'\n\nconst YSCALEBAR_LABEL_OFFSET = 5\nconst SVGNS = 'http://www.w3.org/2000/svg'\n\nexport interface ArcDisplayModel {\n  showArcsSetting: boolean\n  height: number\n  skipFeatures: Feature[]\n}\n\nconst SashimiArcs = observer(function SashimiArcs({\n  model,\n}: {\n  model: ArcDisplayModel\n}) {\n  const { showArcsSetting, height, skipFeatures } = model\n  const view = getContainingView(model) as LinearGenomeViewModel\n  const { assemblyManager } = getSession(model)\n  const [hoverInfo, setHoverInfo] = useState<{\n    arc: ArcData\n    x: number\n    y: number\n  } | null>(null)\n  const [selectedArcId, setSelectedArcId] = useState<string | null>(null)\n\n  const svgRef = useRef<SVGSVGElement>(null)\n  const arcMapRef = useRef<Map<string, ArcData>>(new Map())\n  const pathMapRef = useRef<Map<string, SVGPathElement>>(new Map())\n  const selectedArcIdRef = useRef<string | null>(null)\n  selectedArcIdRef.current = selectedArcId\n\n  const width = Math.round(view.dynamicBlocks.totalWidthPx)\n  const effectiveHeight = height - YSCALEBAR_LABEL_OFFSET * 2\n\n  const { arcs, drawnAtBpPerPx, drawnAtOffsetPx } = useMemo(() => {\n    const currentOffsetPx = view.offsetPx\n    const assembly = assemblyManager.get(view.assemblyNames[0]!)\n    return {\n      arcs: assembly\n        ? skipFeatures\n            .map(f =>\n              featureToArcData(\n                f,\n                view,\n                effectiveHeight,\n                currentOffsetPx,\n                assembly,\n              ),\n            )\n            .filter(notEmpty)\n        : [],\n      drawnAtBpPerPx: view.bpPerPx,\n      drawnAtOffsetPx: currentOffsetPx,\n    }\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [skipFeatures, view.bpPerPx, effectiveHeight])\n\n  // Direct DOM manipulation - bypasses React VDOM for path elements\n  useEffect(() => {\n    const svg = svgRef.current\n    if (!svg) {\n      return\n    }\n\n    // Clear existing paths\n    while (svg.firstChild) {\n      svg.firstChild.remove()\n    }\n\n    // Build lookup maps\n    const arcMap = new Map<string, ArcData>()\n    const pathMap = new Map<string, SVGPathElement>()\n\n    // Event handlers (shared across all paths)\n    const handleMouseEnter = (event: MouseEvent) => {\n      const target = event.currentTarget as SVGPathElement\n      const id = target.dataset.id\n      if (id) {\n        const arc = arcMap.get(id)\n        if (arc) {\n          setHoverInfo({ arc, x: event.clientX, y: event.clientY })\n          const isSelected = id === selectedArcIdRef.current\n          // Add hover shading - increase opacity and stroke width\n          target.setAttribute('opacity', '1')\n          target.setAttribute(\n            'stroke-width',\n            String(arc.strokeWidth + (isSelected ? 4 : 2)),\n          )\n        }\n      }\n    }\n    const handleMouseLeave = (event: MouseEvent) => {\n      const target = event.currentTarget as SVGPathElement\n      const id = target.dataset.id\n      if (id) {\n        const arc = arcMap.get(id)\n        if (arc) {\n          const isSelected = id === selectedArcIdRef.current\n          // Restore styling (selected or original)\n          target.setAttribute('opacity', '0.7')\n          if (isSelected) {\n            target.setAttribute('stroke', getArcSelectedColor(arc.strand))\n            target.setAttribute('stroke-width', String(arc.strokeWidth + 3))\n          } else {\n            target.setAttribute('stroke', arc.stroke)\n            target.setAttribute('stroke-width', String(arc.strokeWidth))\n          }\n        }\n      }\n      setHoverInfo(null)\n    }\n    const handleClick = (event: MouseEvent) => {\n      const target = event.currentTarget as SVGPathElement\n      const id = target.dataset.id\n      if (id) {\n        setSelectedArcId(prev => (prev === id ? null : id))\n        const arc = arcMap.get(id)\n        if (arc) {\n          const session = getSession(model)\n          if (isSessionModelWithWidgets(session)) {\n            const featureWidget = session.addWidget(\n              'BaseFeatureWidget',\n              'baseFeature',\n              {\n                featureData: {\n                  uniqueId: arc.id,\n                  refName: arc.refName,\n                  start: arc.start,\n                  end: arc.end,\n                  type: 'junction',\n                  strand: arc.strand,\n                  score: arc.score,\n                  length: arc.end - arc.start,\n                },\n                view: getContainingView(model),\n                track: getContainingTrack(model),\n              },\n            )\n            session.showWidget(featureWidget)\n          }\n        }\n      }\n    }\n\n    // Create paths directly in DOM (sorted by score so high-scoring arcs render on top)\n    const sortedArcs = [...arcs].sort((a, b) => a.score - b.score)\n    for (const arc of sortedArcs) {\n      arcMap.set(arc.id, arc)\n      const path = document.createElementNS(SVGNS, 'path')\n      path.setAttribute('d', arc.path)\n      path.setAttribute('stroke', arc.stroke)\n      path.setAttribute('stroke-width', String(arc.strokeWidth))\n      path.setAttribute('fill', 'none')\n      path.setAttribute('opacity', '0.7')\n      path.setAttribute('pointer-events', 'stroke')\n      path.setAttribute('cursor', 'pointer')\n      path.dataset.id = arc.id\n      path.addEventListener('mouseenter', handleMouseEnter)\n      path.addEventListener('mouseleave', handleMouseLeave)\n      path.addEventListener('click', handleClick)\n      pathMap.set(arc.id, path)\n      svg.append(path)\n    }\n\n    arcMapRef.current = arcMap\n    pathMapRef.current = pathMap\n\n    // Cleanup\n    return () => {\n      while (svg.firstChild) {\n        const child = svg.firstChild as SVGPathElement\n        child.removeEventListener('mouseenter', handleMouseEnter)\n        child.removeEventListener('mouseleave', handleMouseLeave)\n        child.removeEventListener('click', handleClick)\n        child.remove()\n      }\n    }\n  }, [arcs, model])\n\n  // Update selected arc styling when selection changes\n  useEffect(() => {\n    const pathMap = pathMapRef.current\n    const arcMap = arcMapRef.current\n    for (const [id, path] of pathMap) {\n      const arc = arcMap.get(id)\n      if (arc) {\n        if (id === selectedArcId) {\n          // Selected: darker stroke color\n          path.setAttribute('stroke', getArcSelectedColor(arc.strand))\n          path.setAttribute('stroke-width', String(arc.strokeWidth + 3))\n        } else {\n          // Not selected: restore original\n          path.setAttribute('stroke', arc.stroke)\n          path.setAttribute('stroke-width', String(arc.strokeWidth))\n        }\n      }\n    }\n  }, [selectedArcId])\n\n  if (\n    !showArcsSetting ||\n    !view.initialized ||\n    drawnAtBpPerPx !== view.bpPerPx\n  ) {\n    return null\n  }\n\n  const left = drawnAtOffsetPx - view.offsetPx\n\n  return (\n    <>\n      <svg\n        ref={svgRef}\n        style={{\n          position: 'absolute',\n          top: YSCALEBAR_LABEL_OFFSET,\n          left,\n          pointerEvents: 'none',\n          height: effectiveHeight,\n          width,\n        }}\n      />\n      {hoverInfo ? (\n        <BaseTooltip clientPoint={{ x: hoverInfo.x + 5, y: hoverInfo.y }}>\n          <ArcTooltipContents arc={hoverInfo.arc} />\n        </BaseTooltip>\n      ) : null}\n    </>\n  )\n})\n\nexport default SashimiArcs\n","import { LinearWiggleDisplayReactComponent } from '@jbrowse/plugin-wiggle'\nimport { observer } from 'mobx-react'\n\nimport SashimiArcs from './SashimiArcs.tsx'\n\nimport type { SNPCoverageDisplayModel } from '../model.ts'\n\nconst SNPCoverageDisplayComponent = observer(\n  function SNPCoverageDisplayComponent(props: {\n    model: SNPCoverageDisplayModel\n  }) {\n    const { model } = props\n\n    return (\n      <div style={{ position: 'relative' }}>\n        <LinearWiggleDisplayReactComponent {...props} />\n        <SashimiArcs model={model} />\n      </div>\n    )\n  },\n)\n\nexport default SNPCoverageDisplayComponent\n"],"names":["getArcColor","strand","getArcSelectedColor","getStrandLabel","featureToArcData","feature","view","effectiveHeight","offsetPx","assembly","start","get","end","refName","getCanonicalRefName2","startPx","bpToPx","coord","endPx","undefined","left","right","score","id","path","stroke","strokeWidth","Math","log","ArcTooltipContents","t0","$","_c","arc","t1","Symbol","for","_jsx","children","t2","t3","t4","t5","toLocale","_jsxs","t6","t7","t8","t9","t10","t11","t12","observer","model","showArcsSetting","height","skipFeatures","getContainingView","assemblyManager","getSession","hoverInfo","setHoverInfo","useState","selectedArcId","setSelectedArcId","svgRef","useRef","arcMapRef","Map","pathMapRef","selectedArcIdRef","current","width","round","dynamicBlocks","totalWidthPx","YSCALEBAR_LABEL_OFFSET","arcs","drawnAtBpPerPx","drawnAtOffsetPx","useMemo","currentOffsetPx","assemblyNames","map","f","filter","notEmpty","bpPerPx","useEffect","svg","firstChild","remove","arcMap","pathMap","handleMouseEnter","event","target","currentTarget","dataset","x","clientX","y","clientY","isSelected","setAttribute","String","handleMouseLeave","handleClick","prev","session","isSessionModelWithWidgets","featureWidget","addWidget","featureData","uniqueId","type","length","track","getContainingTrack","showWidget","sortedArcs","sort","a","b","set","document","createElementNS","addEventListener","append","child","removeEventListener","initialized","_Fragment","ref","style","position","top","pointerEvents","BaseTooltip","clientPoint","props","LinearWiggleDisplayReactComponent","SashimiArcs"],"ignoreList":[],"sourceRoot":""}