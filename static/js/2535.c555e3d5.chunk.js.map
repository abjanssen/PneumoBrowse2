{"version":3,"file":"static/js/2535.c555e3d5.chunk.js","mappings":"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","sources":["../../../plugins/variants/src/LDDisplay/components/BaseDisplayComponent.tsx","../../../plugins/variants/src/LDDisplay/components/LDDisplayComponent.tsx"],"sourcesContent":["import React from 'react'\n\nimport { ErrorMessage, LoadingEllipses } from '@jbrowse/core/ui'\nimport { makeStyles } from '@jbrowse/core/util/tss-react'\nimport { observer } from 'mobx-react'\n\n/**\n * Custom display component for LD display that handles offset positioning\n * differently than the standard NonBlockCanvasDisplayComponent.\n *\n * The LD display needs to position content at Math.max(0, -offsetPx) when\n * scrolled beyond the region start, without the smooth scrolling shift\n * that NonBlockCanvasDisplayComponent provides.\n */\nexport interface LDDisplayModel {\n  error?: unknown\n  regionTooLarge?: boolean\n  reload: () => void\n  regionCannotBeRendered: () => React.ReactElement | null\n  drawn: boolean\n  loading: boolean\n  statusMessage?: string\n}\n\nconst useStyles = makeStyles()({\n  loading: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    backgroundColor: 'rgba(255, 255, 255, 0.15)',\n    backgroundImage: `repeating-linear-gradient(45deg, transparent, transparent 8px, rgba(0, 0, 0, 0.05) 8px, rgba(0, 0, 0, 0.05) 16px)`,\n    pointerEvents: 'none',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    zIndex: 1,\n  },\n  loadingMessage: {\n    zIndex: 2,\n    pointerEvents: 'none',\n  },\n})\n\nconst LDBaseDisplayComponent = observer(function LDBaseDisplayComponent({\n  model,\n  children,\n}: {\n  model: LDDisplayModel\n  children?: React.ReactNode\n}) {\n  const { error, regionTooLarge } = model\n  return error ? (\n    <ErrorMessage error={error} />\n  ) : regionTooLarge ? (\n    model.regionCannotBeRendered()\n  ) : (\n    <DataDisplay model={model}>{children}</DataDisplay>\n  )\n})\n\nconst DataDisplay = observer(function DataDisplay({\n  model,\n  children,\n}: {\n  model: LDDisplayModel\n  children?: React.ReactNode\n}) {\n  const { drawn, loading } = model\n\n  return (\n    <div data-testid={`drawn-${drawn}`}>\n      {children}\n      {loading ? <LoadingBar model={model} /> : null}\n    </div>\n  )\n})\n\nconst LoadingBar = observer(function LoadingBar({\n  model,\n}: {\n  model: LDDisplayModel\n}) {\n  const { classes } = useStyles()\n  const { statusMessage } = model\n  return (\n    <div className={classes.loading}>\n      <div className={classes.loadingMessage}>\n        <LoadingEllipses message={statusMessage} />\n      </div>\n    </div>\n  )\n})\n\nexport default LDBaseDisplayComponent\n","import { useCallback, useEffect, useMemo, useRef, useState } from 'react'\n\nimport BaseTooltip from '@jbrowse/core/ui/BaseTooltip'\nimport { getContainingView } from '@jbrowse/core/util'\nimport Flatbush from '@jbrowse/core/util/flatbush'\nimport { observer } from 'mobx-react'\n\nimport BaseDisplayComponent from './BaseDisplayComponent.tsx'\nimport LDColorLegend from './LDColorLegend.tsx'\nimport LinesConnectingMatrixToGenomicPosition, {\n  VariantLabels,\n  Wrapper,\n} from './LinesConnectingMatrixToGenomicPosition.tsx'\nimport RecombinationTrack from '../../shared/components/RecombinationTrack.tsx'\nimport RecombinationYScaleBar from '../../shared/components/RecombinationYScaleBar.tsx'\n\nimport type { LDFlatbushItem } from '../../LDRenderer/types.ts'\nimport type { SharedLDModel } from '../shared.ts'\nimport type { LinearGenomeViewModel } from '@jbrowse/plugin-linear-genome-view'\n\ntype LGV = LinearGenomeViewModel\n\nconst SQRT2 = Math.sqrt(2)\n\nfunction LDTooltip({\n  item,\n  x,\n  y,\n  ldMetric,\n  signedLD,\n}: {\n  item: LDFlatbushItem\n  x: number\n  y: number\n  ldMetric: string\n  signedLD: boolean\n}) {\n  // Show appropriate metric label based on signed/unsigned mode\n  let metricLabel: string\n  if (ldMetric === 'dprime') {\n    metricLabel = \"D'\"\n  } else {\n    metricLabel = signedLD ? 'R' : 'R²'\n  }\n\n  return (\n    <BaseTooltip clientPoint={{ x: x + 15, y }}>\n      <div>{item.snp1.id}</div>\n      <div>{item.snp2.id}</div>\n      <div>\n        {metricLabel}: {item.ldValue.toFixed(3)}\n      </div>\n    </BaseTooltip>\n  )\n}\n\n/**\n * Draw V-shape highlight from the hovered cell to the matrix diagonal,\n * plus connecting lines to genomic positions.\n */\nfunction Crosshairs({\n  hoveredItem,\n  cellWidth,\n  genomicX1,\n  genomicX2,\n  yScalar,\n  lineZoneHeight,\n  tickHeight,\n  width,\n  height,\n  useGenomicPositions,\n  snps,\n  regionStart,\n  bpPerPx,\n  canvasOffset,\n}: {\n  hoveredItem: LDFlatbushItem\n  cellWidth: number\n  genomicX1: number\n  genomicX2: number\n  yScalar: number\n  lineZoneHeight: number\n  tickHeight: number\n  width: number\n  height: number\n  useGenomicPositions: boolean\n  snps: { start: number }[]\n  regionStart: number\n  bpPerPx: number\n  canvasOffset: number\n}) {\n  const { i, j } = hoveredItem\n\n  // Transform a point from unrotated cell coordinates to screen coordinates\n  // Canvas transformations: rotate(-45°), scale(1, yScalar), translate(0, lineZoneHeight)\n  const toScreen = (x: number, y: number) => {\n    // Rotate -45 degrees\n    const rx = (x + y) / SQRT2\n    const ry = (y - x) / SQRT2\n    // Scale Y and translate\n    return { x: rx, y: ry * yScalar + lineZoneHeight }\n  }\n\n  // Calculate positions based on mode\n  let hoveredCenter: { x: number; y: number }\n  let snpJPos: { x: number; y: number }\n  let snpIPos: { x: number; y: number }\n\n  if (useGenomicPositions && snps.length > 0) {\n    // Use midpoint boundaries (matching makeImageData.ts)\n    // Each SNP's cell extends from the midpoint to the previous SNP\n    // to the midpoint to the next SNP\n    const getBoundary = (idx: number) => {\n      const snpPos = snps[idx]!.start\n      const prevPos = idx > 0 ? snps[idx - 1]!.start : regionStart\n      const boundaryPos = (prevPos + snpPos) / 2\n      return (boundaryPos - regionStart) / bpPerPx / SQRT2\n    }\n\n    const getNextBoundary = (idx: number) => {\n      if (idx + 1 < snps.length) {\n        const snpPos = snps[idx]!.start\n        const nextPos = snps[idx + 1]!.start\n        return ((snpPos + nextPos) / 2 - regionStart) / bpPerPx / SQRT2\n      }\n      // Small fixed offset past the last SNP (50px)\n      const lastSnpPos = snps[snps.length - 1]!.start\n      return (lastSnpPos + 50 * bpPerPx - regionStart) / bpPerPx / SQRT2\n    }\n\n    const jBoundary = getBoundary(j)\n    const iBoundary = getBoundary(i)\n    const jNextBoundary = getNextBoundary(j)\n    const iNextBoundary = getNextBoundary(i)\n\n    // Cell center for the V-shape apex\n    const cellCenterX = (jBoundary + jNextBoundary) / 2\n    const cellCenterY = (iBoundary + iNextBoundary) / 2\n    hoveredCenter = toScreen(cellCenterX, cellCenterY)\n\n    // Diagonal positions should connect to the vertical guides at genomicX1/genomicX2\n    // The diagonal after rotation is at y = lineZoneHeight, x = genomicX\n    snpJPos = { x: genomicX1, y: lineZoneHeight }\n    snpIPos = { x: genomicX2, y: lineZoneHeight }\n  } else {\n    // Uniform cell positioning\n    const w = cellWidth\n\n    // Cell center for hovered cell\n    hoveredCenter = toScreen((j + 0.5) * w, (i + 0.5) * w)\n\n    // Diagonal positions at cell centers (matching where connecting lines attach)\n    snpJPos = toScreen((j + 0.5) * w, (j + 0.5) * w)\n    snpIPos = toScreen((i + 0.5) * w, (i + 0.5) * w)\n  }\n\n  return (\n    <svg\n      style={{\n        position: 'absolute',\n        left: canvasOffset,\n        top: 0,\n        width,\n        height,\n        pointerEvents: 'none',\n      }}\n    >\n      {/* V-shape: single line from snp j through hovered cell to snp i */}\n      <path\n        stroke=\"rgba(0, 0, 0, 0.6)\"\n        strokeWidth={1}\n        fill=\"none\"\n        d={`M ${snpJPos.x} ${snpJPos.y} L ${hoveredCenter.x} ${hoveredCenter.y} L ${snpIPos.x} ${snpIPos.y}`}\n      />\n      {/* Highlighted connecting lines from matrix to genome */}\n      <g stroke=\"#e00\" strokeWidth=\"1.5\" fill=\"none\">\n        {/* Diagonal lines ending at top of tick marks (only when not using genomic positions) */}\n        {!useGenomicPositions ? (\n          <>\n            <path\n              d={`M ${snpJPos.x} ${snpJPos.y} L ${genomicX1} ${tickHeight}`}\n            />\n            <path\n              d={`M ${snpIPos.x} ${snpIPos.y} L ${genomicX2} ${tickHeight}`}\n            />\n          </>\n        ) : null}\n        {/* Vertical tick marks */}\n        <path d={`M ${genomicX1} 0 L ${genomicX1} ${tickHeight}`} />\n        <path d={`M ${genomicX2} 0 L ${genomicX2} ${tickHeight}`} />\n      </g>\n    </svg>\n  )\n}\n\n/**\n * Transform screen coordinates to the unrotated coordinate space.\n * The canvas is rotated by -45 degrees, so we apply the inverse rotation (+45 degrees).\n * Also accounts for the yScalar transformation and lineZoneHeight offset.\n */\nfunction screenToUnrotated(\n  screenX: number,\n  screenY: number,\n  yScalar: number,\n  lineZoneHeight: number,\n): { x: number; y: number } {\n  // Subtract lineZoneHeight since the matrix is translated down by that amount\n  const matrixY = screenY - lineZoneHeight\n  const scaledY = matrixY / yScalar\n  const x = (screenX - scaledY) / SQRT2\n  const y = (screenX + scaledY) / SQRT2\n  return { x, y }\n}\n\nconst LDCanvas = observer(function LDCanvas({\n  model,\n}: {\n  model: SharedLDModel\n}) {\n  const view = getContainingView(model) as LGV\n  const width = Math.round(view.dynamicBlocks.totalWidthPx)\n  const {\n    fullyDrawn,\n    flatbush,\n    flatbushItems,\n    yScalar,\n    cellWidth,\n    showLegend,\n    ldMetric,\n    lineZoneHeight,\n    fitToHeight,\n    ldCanvasHeight,\n    useGenomicPositions,\n    snps,\n    lastDrawnOffsetPx,\n    signedLD,\n  } = model\n\n  // Container height includes lineZoneHeight + triangle\n  // Canvas height is just the triangle (lineZoneHeight is handled by CSS positioning)\n  // ldCanvasHeight already has lineZoneHeight subtracted\n  const triangleHeight = width / 2\n  const canvasOnlyHeight = fitToHeight ? ldCanvasHeight : triangleHeight\n  const containerHeight = canvasOnlyHeight + lineZoneHeight\n\n  const [hoveredItem, setHoveredItem] = useState<LDFlatbushItem>()\n  const [mousePosition, setMousePosition] = useState<{ x: number; y: number }>()\n  const containerRef = useRef<HTMLDivElement>(null)\n\n  // Calculate genomic positions for hovered item\n  // These are raw pixel positions from region start - no offset adjustment needed\n  // because the SVG/canvas is already positioned at Math.max(0, -offsetPx)\n  const region = view.dynamicBlocks.contentBlocks[0]\n  const bpPerPx = view.bpPerPx\n  const genomicX1 =\n    hoveredItem && region\n      ? (hoveredItem.snp2.start - region.start) / bpPerPx\n      : undefined\n  const genomicX2 =\n    hoveredItem && region\n      ? (hoveredItem.snp1.start - region.start) / bpPerPx\n      : undefined\n\n  // When offsetPx >= 0: use scroll offset for smooth scrolling between renders\n  // When offsetPx < 0: use boundary offset to prevent content going past left edge\n  const canvasOffset =\n    view.offsetPx >= 0\n      ? (lastDrawnOffsetPx ?? 0) - view.offsetPx\n      : Math.max(0, -view.offsetPx)\n\n  // Update volatile guides when hovered item changes\n  // Add canvas offset to guide positions\n  const guideOffset = canvasOffset\n  useEffect(() => {\n    if (\n      genomicX1 !== undefined &&\n      genomicX2 !== undefined &&\n      model.showVerticalGuides\n    ) {\n      view.setVolatileGuides([\n        { xPos: genomicX1 + guideOffset },\n        { xPos: genomicX2 + guideOffset },\n      ])\n    } else {\n      view.setVolatileGuides([])\n    }\n    return () => {\n      view.setVolatileGuides([])\n    }\n  }, [genomicX1, genomicX2, model.showVerticalGuides, view, guideOffset])\n\n  // Convert flatbush data to Flatbush instance\n  const flatbushIndex = useMemo(\n    () => (flatbush ? Flatbush.from(flatbush) : null),\n    [flatbush],\n  )\n\n  // biome-ignore lint/correctness/useExhaustiveDependencies:\n  const cb = useCallback(\n    (ref: HTMLCanvasElement) => {\n      model.setRef(ref)\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [model, width, canvasOnlyHeight],\n  )\n\n  const onMouseMove = useCallback(\n    (event: React.MouseEvent) => {\n      const container = containerRef.current\n      if (!container || !flatbushIndex || !flatbushItems.length) {\n        setHoveredItem(undefined)\n        setMousePosition(undefined)\n        return\n      }\n\n      const rect = container.getBoundingClientRect()\n      const mouseCanvasOffset = canvasOffset\n      const screenX = event.clientX - rect.left - mouseCanvasOffset\n      const screenY = event.clientY - rect.top\n\n      setMousePosition({ x: event.clientX, y: event.clientY })\n\n      // Only query if we're below the line zone\n      if (screenY < lineZoneHeight) {\n        setHoveredItem(undefined)\n        return\n      }\n\n      // Transform screen coordinates to unrotated space for Flatbush query\n      const { x, y } = screenToUnrotated(\n        screenX,\n        screenY,\n        yScalar,\n        lineZoneHeight,\n      )\n\n      // Query Flatbush with a small region around the transformed point\n      const results = flatbushIndex.search(x - 1, y - 1, x + 1, y + 1)\n\n      if (results.length > 0) {\n        const item = flatbushItems[results[0]!]\n        setHoveredItem(item)\n      } else {\n        setHoveredItem(undefined)\n      }\n    },\n    [flatbushIndex, flatbushItems, yScalar, lineZoneHeight, canvasOffset],\n  )\n\n  const onMouseLeave = useCallback(() => {\n    setHoveredItem(undefined)\n    setMousePosition(undefined)\n  }, [])\n\n  return (\n    <div\n      ref={containerRef}\n      style={{\n        cursor: hoveredItem && mousePosition ? 'crosshair' : undefined,\n        position: 'relative',\n        width,\n        height: containerHeight,\n        overflow: 'hidden',\n      }}\n      onMouseMove={onMouseMove}\n      onMouseLeave={onMouseLeave}\n    >\n      <canvas\n        data-testid={`ld_canvas${fullyDrawn ? '_done' : ''}`}\n        ref={cb}\n        style={{\n          width,\n          height: canvasOnlyHeight,\n          position: 'absolute',\n          left: canvasOffset,\n          top: lineZoneHeight,\n        }}\n        width={width * 2}\n        height={canvasOnlyHeight * 2}\n      />\n\n      {hoveredItem && genomicX1 !== undefined && genomicX2 !== undefined ? (\n        <Crosshairs\n          hoveredItem={hoveredItem}\n          cellWidth={cellWidth}\n          genomicX1={genomicX1}\n          genomicX2={genomicX2}\n          yScalar={yScalar}\n          lineZoneHeight={lineZoneHeight}\n          tickHeight={model.tickHeight}\n          width={width}\n          height={containerHeight}\n          useGenomicPositions={useGenomicPositions}\n          snps={snps}\n          regionStart={region?.start ?? 0}\n          bpPerPx={bpPerPx}\n          canvasOffset={canvasOffset}\n        />\n      ) : null}\n\n      {hoveredItem && mousePosition ? (\n        <LDTooltip\n          item={hoveredItem}\n          x={mousePosition.x}\n          y={mousePosition.y}\n          ldMetric={ldMetric}\n          signedLD={signedLD}\n        />\n      ) : null}\n      {showLegend ? (\n        <LDColorLegend ldMetric={ldMetric} signedLD={signedLD} />\n      ) : null}\n      {useGenomicPositions ? (\n        <Wrapper model={model}>\n          <VariantLabels model={model} />\n        </Wrapper>\n      ) : (\n        <LinesConnectingMatrixToGenomicPosition model={model} />\n      )}\n      {/* Recombination track overlaid at bottom of line zone */}\n      {model.showRecombination && model.recombination ? (\n        <div\n          style={{\n            position: 'absolute',\n            left: canvasOffset,\n            top: lineZoneHeight / 2,\n            width,\n            height: lineZoneHeight / 2,\n            pointerEvents: 'none',\n          }}\n        >\n          <RecombinationTrack\n            model={model}\n            width={width}\n            height={lineZoneHeight / 2}\n            useGenomicPositions={useGenomicPositions}\n            regionStart={region?.start}\n            bpPerPx={bpPerPx}\n          />\n          <RecombinationYScaleBar\n            height={lineZoneHeight / 2}\n            maxValue={Math.max(...model.recombination.values, 0.1)}\n          />\n        </div>\n      ) : null}\n    </div>\n  )\n})\n\nconst LDDisplayContent = observer(function LDDisplayContent({\n  model,\n}: {\n  model: SharedLDModel\n}) {\n  const view = getContainingView(model) as LGV\n  const width = Math.round(view.dynamicBlocks.totalWidthPx)\n  const { height, showLDTriangle, showRecombination } = model\n\n  // Show message when zoomed out\n  if (view.bpPerPx > 1000) {\n    return (\n      <div\n        style={{\n          width,\n          height,\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          color: '#666',\n        }}\n      >\n        Zoom in to see LD data\n      </div>\n    )\n  }\n\n  // Show message when nothing is enabled\n  if (!showLDTriangle && !showRecombination) {\n    return (\n      <div\n        style={{\n          width,\n          height,\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          color: '#666',\n        }}\n      >\n        Enable LD triangle or recombination track in display settings\n      </div>\n    )\n  }\n\n  return (\n    <div style={{ position: 'relative', width, height }}>\n      {/* LD canvas with recombination track overlaid on line zone */}\n      {showLDTriangle ? <LDCanvas model={model} /> : null}\n    </div>\n  )\n})\n\nconst LDDisplayComponent = observer(function LDDisplayComponent({\n  model,\n}: {\n  model: SharedLDModel\n}) {\n  return (\n    <BaseDisplayComponent model={model}>\n      <LDDisplayContent model={model} />\n    </BaseDisplayComponent>\n  )\n})\n\nexport default LDDisplayComponent\n"],"names":["useStyles","makeStyles","loading","position","top","left","right","bottom","backgroundColor","backgroundImage","pointerEvents","display","justifyContent","alignItems","zIndex","loadingMessage","LDBaseDisplayComponent","observer","model","children","error","regionTooLarge","_jsx","ErrorMessage","regionCannotBeRendered","DataDisplay","drawn","_jsxs","LoadingBar","classes","statusMessage","className","LoadingEllipses","message","SQRT2","Math","sqrt","LDTooltip","t0","$","_c","item","x","y","ldMetric","signedLD","metricLabel","t1","t2","t3","t4","snp1","id","snp2","t6","t7","t8","ldValue","toFixed","BaseTooltip","clientPoint","Crosshairs","hoveredItem","cellWidth","genomicX1","genomicX2","yScalar","lineZoneHeight","tickHeight","width","height","useGenomicPositions","snps","regionStart","bpPerPx","canvasOffset","i","toScreen","hoveredCenter","snpJPos","snpIPos","length","idx","snpPos","start","getBoundary","idx_0","getNextBoundary","jBoundary","j","iBoundary","cellCenterX","cellCenterY","t5","w","t9","t10","stroke","strokeWidth","fill","d","_Fragment","t11","style","LDCanvas","view","getContainingView","round","dynamicBlocks","totalWidthPx","fullyDrawn","flatbush","flatbushItems","showLegend","fitToHeight","ldCanvasHeight","lastDrawnOffsetPx","canvasOnlyHeight","containerHeight","setHoveredItem","useState","mousePosition","setMousePosition","containerRef","useRef","region","contentBlocks","undefined","offsetPx","max","guideOffset","useEffect","showVerticalGuides","setVolatileGuides","xPos","flatbushIndex","useMemo","Flatbush","from","cb","useCallback","ref","setRef","onMouseMove","event","container","current","rect","getBoundingClientRect","mouseCanvasOffset","screenX","clientX","screenY","clientY","scaledY","screenToUnrotated","results","search","onMouseLeave","cursor","overflow","LDColorLegend","Wrapper","VariantLabels","LinesConnectingMatrixToGenomicPosition","showRecombination","recombination","RecombinationTrack","RecombinationYScaleBar","maxValue","values","LDDisplayContent","showLDTriangle","color","BaseDisplayComponent"],"ignoreList":[],"sourceRoot":""}