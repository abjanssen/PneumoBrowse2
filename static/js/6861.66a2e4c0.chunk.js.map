{"version":3,"file":"static/js/6861.66a2e4c0.chunk.js","mappings":"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","sources":["../../../plugins/lollipop/src/LollipopRenderer/components/ScoreText.tsx","../../../plugins/lollipop/src/LollipopRenderer/components/Lollipop.tsx","../../../plugins/lollipop/src/LollipopRenderer/components/Stick.tsx","../../../plugins/lollipop/src/LollipopRenderer/components/LollipopRendering.tsx"],"sourcesContent":["import React from 'react'\nimport {\n  AnyConfigurationModel,\n  readConfObject,\n} from '@jbrowse/core/configuration'\nimport { contrastingTextColor } from '@jbrowse/core/util/color'\nimport { Feature } from '@jbrowse/core/util'\n\nexport default function ScoreText({\n  feature,\n  config,\n  layoutRecord: {\n    y,\n    data: { anchorX, radiusPx, score },\n  },\n}: {\n  feature: Feature\n  config: AnyConfigurationModel\n  layoutRecord: {\n    y: number\n    data: { anchorX: number; radiusPx: number; score: number }\n  }\n}) {\n  const innerColor = readConfObject(config, 'innerColor', { feature })\n\n  const scoreString = String(score)\n  const fontWidth = (radiusPx * 2) / scoreString.length\n  const fontHeight = fontWidth * 1.1\n  if (fontHeight < 12) {\n    return null\n  }\n  return (\n    <text\n      style={{ fontSize: fontHeight, fill: contrastingTextColor(innerColor) }}\n      x={anchorX}\n      y={y + radiusPx - fontHeight / 2.4}\n      textAnchor=\"middle\"\n      dominantBaseline=\"hanging\"\n    >\n      {scoreString}\n    </text>\n  )\n}\n","import React from 'react'\nimport { readConfObject } from '@jbrowse/core/configuration'\nimport { observer } from 'mobx-react'\nimport ScoreText from './ScoreText'\n\nconst Lollipop = observer(function Lollipop(props: Record<string, any>) {\n  const { feature, config, layoutRecord, selectedFeatureId } = props\n  const {\n    anchorLocation,\n    y,\n    data: { radiusPx },\n  } = layoutRecord\n\n  const onFeatureMouseDown = (event: React.MouseEvent) => {\n    const { onFeatureMouseDown: handler, feature } = props\n    return handler?.(event, feature.id())\n  }\n\n  const onFeatureMouseEnter = (event: React.MouseEvent) => {\n    const { onFeatureMouseEnter: handler, feature } = props\n    return handler?.(event, feature.id())\n  }\n\n  const onFeatureMouseOut = (event: React.MouseEvent | React.FocusEvent) => {\n    const { onFeatureMouseOut: handler, feature } = props\n    return handler?.(event, feature.id())\n  }\n\n  const onFeatureMouseOver = (event: React.MouseEvent | React.FocusEvent) => {\n    const { onFeatureMouseOver: handler, feature } = props\n    return handler?.(event, feature.id())\n  }\n\n  const onFeatureMouseUp = (event: React.MouseEvent) => {\n    const { onFeatureMouseUp: handler, feature } = props\n    return handler?.(event, feature.id())\n  }\n\n  const onFeatureMouseLeave = (event: React.MouseEvent) => {\n    const { onFeatureMouseLeave: handler, feature } = props\n    return handler?.(event, feature.id())\n  }\n\n  const onFeatureMouseMove = (event: React.MouseEvent) => {\n    const { onFeatureMouseMove: handler, feature } = props\n    return handler?.(event, feature.id())\n  }\n\n  const onFeatureClick = (event: React.MouseEvent) => {\n    const { onFeatureClick: handler, feature } = props\n    event.stopPropagation()\n    return handler?.(event, feature.id())\n  }\n\n  const styleOuter = {\n    fill: readConfObject(config, 'strokeColor', { feature }),\n  }\n  if (String(selectedFeatureId) === String(feature.id())) {\n    styleOuter.fill = 'red'\n  }\n\n  const styleInner = {\n    fill: readConfObject(config, 'innerColor', { feature }),\n  }\n\n  const strokeWidth = readConfObject(config, 'strokeWidth', { feature })\n\n  return (\n    <g data-testid={feature.id()}>\n      <title>{readConfObject(config, 'caption', { feature })}</title>\n      <circle\n        cx={anchorLocation}\n        cy={y + radiusPx}\n        r={radiusPx}\n        style={styleOuter}\n        onMouseDown={onFeatureMouseDown}\n        onMouseEnter={onFeatureMouseEnter}\n        onMouseOut={onFeatureMouseOut}\n        onMouseOver={onFeatureMouseOver}\n        onMouseUp={onFeatureMouseUp}\n        onMouseLeave={onFeatureMouseLeave}\n        onMouseMove={onFeatureMouseMove}\n        onClick={onFeatureClick}\n        onFocus={onFeatureMouseOver}\n        onBlur={onFeatureMouseOut}\n      />\n      {radiusPx - strokeWidth <= 2 ? null : (\n        <circle\n          cx={anchorLocation}\n          cy={y + radiusPx}\n          r={radiusPx - strokeWidth}\n          style={styleInner}\n          onMouseDown={onFeatureMouseDown}\n          onMouseEnter={onFeatureMouseEnter}\n          onMouseOut={onFeatureMouseOut}\n          onMouseOver={onFeatureMouseOver}\n          onMouseUp={onFeatureMouseUp}\n          onMouseLeave={onFeatureMouseLeave}\n          onMouseMove={onFeatureMouseMove}\n          onClick={onFeatureClick}\n          onFocus={onFeatureMouseOver}\n          onBlur={onFeatureMouseOut}\n        />\n      )}\n      <ScoreText\n        feature={feature}\n        config={config}\n        layoutRecord={layoutRecord}\n      />\n    </g>\n  )\n})\n\nexport default Lollipop\n","import React from 'react'\nimport {\n  AnyConfigurationModel,\n  readConfObject,\n} from '@jbrowse/core/configuration'\nimport { observer } from 'mobx-react'\nimport { Feature } from '@jbrowse/core/util'\n\nconst Stick = observer(function Stick({\n  feature,\n  config,\n  layoutRecord: {\n    anchorLocation,\n    y,\n    data: { radiusPx },\n  },\n}: {\n  feature: Feature\n  config: AnyConfigurationModel\n  layoutRecord: {\n    anchorLocation: number\n    y: number\n    data: { radiusPx: number }\n  }\n}) {\n  return (\n    <line\n      x1={anchorLocation}\n      y1={0}\n      x2={anchorLocation}\n      y2={y + 2 * radiusPx}\n      stroke={readConfObject(config, 'stickColor', { feature })}\n      strokeWidth={readConfObject(config, 'stickWidth', { feature })}\n    />\n  )\n})\n\nexport default Stick\n","import React from 'react'\nimport {\n  AnyConfigurationModel,\n  readConfObject,\n} from '@jbrowse/core/configuration'\nimport { Feature, Region, bpToPx } from '@jbrowse/core/util'\nimport { observer } from 'mobx-react'\n\n// locals\nimport Lollipop from './Lollipop'\nimport Stick from './Stick'\n\nfunction layoutFeat(args: {\n  feature: Feature\n  bpPerPx: number\n  region: Region\n  layout: { add: (...args: unknown[]) => void }\n  config: AnyConfigurationModel\n}) {\n  const { feature, bpPerPx, config, region, layout } = args\n\n  const centerBp = Math.abs(feature.get('end') + feature.get('start')) / 2\n  const centerPx = bpToPx(centerBp, region, bpPerPx)\n  const radiusPx = readConfObject(config, 'radius', { feature })\n\n  if (!radiusPx) {\n    console.error(\n      new Error(\n        `lollipop radius ${radiusPx} configured for feature ${feature.id()}`,\n      ),\n    )\n  }\n  layout.add(feature.id(), centerPx, radiusPx * 2, radiusPx * 2, {\n    featureId: feature.id(),\n    anchorX: centerPx,\n    radiusPx,\n    score: readConfObject(args.config, 'score', { feature }),\n  })\n}\n\nconst LollipopRendering = observer(function (props: Record<string, any>) {\n  const onMouseDown = (event: React.MouseEvent) => {\n    const { onMouseDown: handler } = props\n    return handler?.(event)\n  }\n\n  const onMouseUp = (event: React.MouseEvent) => {\n    const { onMouseUp: handler } = props\n    return handler?.(event)\n  }\n\n  const onMouseEnter = (event: React.MouseEvent | React.FocusEvent) => {\n    const { onMouseEnter: handler } = props\n    return handler?.(event)\n  }\n\n  const onMouseLeave = (event: React.MouseEvent | React.FocusEvent) => {\n    const { onMouseLeave: handler } = props\n    return handler?.(event)\n  }\n\n  const onMouseOver = (event: React.MouseEvent) => {\n    const { onMouseOver: handler } = props\n    return handler?.(event)\n  }\n\n  const onMouseOut = (event: React.MouseEvent) => {\n    const { onMouseOut: handler } = props\n    return handler?.(event)\n  }\n\n  const onClick = (event: React.MouseEvent) => {\n    const { onClick: handler } = props\n    return handler?.(event)\n  }\n\n  const {\n    regions,\n    bpPerPx,\n    layout,\n    config,\n    features = new Map(),\n    displayModel = {},\n  } = props\n  const { selectedFeatureId } = displayModel\n  const region = regions[0]!\n  for (const feature of features.values()) {\n    layoutFeat({\n      feature,\n      bpPerPx,\n      region,\n      config,\n      layout,\n    })\n  }\n\n  const width = (region.end - region.start) / bpPerPx\n  const records = [...layout.getLayout(config).values()]\n  const height = layout.getTotalHeight()\n\n  return (\n    <svg\n      width={width}\n      height={height}\n      style={{ position: 'relative' }}\n      onMouseDown={onMouseDown}\n      onMouseUp={onMouseUp}\n      onMouseEnter={onMouseEnter}\n      onMouseLeave={onMouseLeave}\n      onMouseOver={onMouseOver}\n      onMouseOut={onMouseOut}\n      onFocus={onMouseEnter}\n      onBlur={onMouseLeave}\n      onClick={onClick}\n    >\n      {records.map(layoutRecord => {\n        const feature = features.get(layoutRecord.data.featureId)\n        return (\n          <React.Fragment key={feature.id()}>\n            <Stick\n              key={`stick-${feature.id()}`}\n              {...props}\n              config={config}\n              layoutRecord={layoutRecord}\n              feature={feature}\n            />\n            <Lollipop\n              key={`body-${feature.id()}`}\n              {...props}\n              layoutRecord={layoutRecord}\n              feature={feature}\n              selectedFeatureId={selectedFeatureId}\n            />\n          </React.Fragment>\n        )\n      })}\n    </svg>\n  )\n})\n\nexport default LollipopRendering\n"],"names":["ScoreText","feature","config","layoutRecord","y","data","anchorX","radiusPx","score","innerColor","readConfObject","scoreString","String","fontHeight","length","React","style","fontSize","fill","contrastingTextColor","x","textAnchor","dominantBaseline","observer","props","selectedFeatureId","anchorLocation","onFeatureMouseDown","event","handler","id","onFeatureMouseEnter","onFeatureMouseOut","onFeatureMouseOver","onFeatureMouseUp","onFeatureMouseLeave","onFeatureMouseMove","onFeatureClick","stopPropagation","styleOuter","styleInner","strokeWidth","cx","cy","r","onMouseDown","onMouseEnter","onMouseOut","onMouseOver","onMouseUp","onMouseLeave","onMouseMove","onClick","onFocus","onBlur","x1","y1","x2","y2","stroke","layoutFeat","args","bpPerPx","region","layout","centerBp","Math","abs","get","centerPx","bpToPx","console","error","Error","add","featureId","regions","features","Map","displayModel","values","width","end","start","records","getLayout","height","getTotalHeight","position","map","key","Stick","_extends","Lollipop"],"sourceRoot":""}