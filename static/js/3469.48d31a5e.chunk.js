"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[3469,6537],{93190(e,s,t){t.d(s,{A:()=>r});var a=t(55614),l=t(46625),n=t(44460);const o=(0,l.n)()({flexContainer:{display:"flex",flexDirection:"column"}});function r(e){const s=(0,a.c)(4),{children:t,style:l}=e,{classes:r}=o();let i;return s[0]!==t||s[1]!==r.flexContainer||s[2]!==l?(i=(0,n.jsx)("div",{className:r.flexContainer,style:l,children:t}),s[0]=t,s[1]=r.flexContainer,s[2]=l,s[3]=i):i=s[3],i}},35485(e,s,t){t.r(s),t.d(s,{default:()=>E});var a=t(30128),l=t(9378),n=t(23886),o=t(46625),r=t(34230),i=t(50518),c=t(9614),d=t(63830),m=t(67922),h=t(66820),b=t(75242),u=t(43754),p=t(69566),g=t(1241),v=t(53203),f=t(84037),A=t(90061),x=t(79291),y=t(42700),k=t(10451),w=t(44460);const j=(0,p.observer)(function({model:e}){const{validAssemblies:s,selectedAssemblies:t}=e,a=0===s.size,l="Select assemblies",n="select-assemblies-label",o=new Set(t),r=[...s].every(e=>o.has(e));return(0,w.jsxs)(g.A,{disabled:a,fullWidth:!0,children:[(0,w.jsx)(v.A,{id:n,children:l}),(0,w.jsxs)(f.A,{labelId:n,multiple:!0,value:t,onChange:s=>{e.setSelectedAssemblies("string"==typeof s.target.value?[s.target.value]:s.target.value)},input:(0,w.jsx)(A.A,{label:l}),renderValue:e=>e.join(", "),children:[(0,w.jsxs)(x.A,{onClickCapture:s=>{e.setSelectedAssemblies(r?[]:void 0),s.preventDefault()},children:[(0,w.jsx)(y.A,{checked:r,indeterminate:!r&&t.length>0}),(0,w.jsx)(k.A,{primary:"Select all"})]}),[...s].map(e=>(0,w.jsxs)(x.A,{value:e,children:[(0,w.jsx)(y.A,{checked:t.includes(e)}),(0,w.jsx)(k.A,{primary:e})]},e))]})]})});var S=t(97689),C=t(93190),N=t(15731),M=t(27529),z=t(62977),$=t(81104);const _=(0,o.n)()(()=>({cell:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}})),L=(0,p.observer)(function({model:e}){const{classes:s}=_(),{bookmarks:t,bookmarksWithValidAssemblies:a,selectedAssemblies:l,selectedBookmarks:o}=e,r=(0,n.getSession)(e),i=new Set(l),c=t.filter(e=>i.has(e.assemblyName)).map((e,s)=>{const{assemblyName:t,...a}=e;return{...e,id:s,assemblyName:t,locString:(0,n.assembleLocString)(a),correspondingObj:e}}),d=[50,Math.max((0,n.measureText)("Bookmark link",12)+30,(0,n.measureGridWidth)(c.map(e=>e.locString))),Math.max((0,n.measureText)("Label",12)+30,(0,n.measureGridWidth)(c.map(e=>e.label))),Math.max((0,n.measureText)("Assembly",12)+30,(0,n.measureGridWidth)(c.map(e=>e.assemblyName))),100];return(0,w.jsx)(C.A,{children:(0,w.jsx)(M.z,{density:"compact",disableRowSelectionOnClick:!0,rows:c,columns:[{...z.f,width:d[0]},{field:"locString",headerName:"Bookmark link",width:d[1],renderCell:({value:t,row:a})=>(0,w.jsx)(N.A,{className:s.cell,href:"#",onClick:async s=>{s.preventDefault();const{views:l}=r;await(0,$.Jn)(t,a.assemblyName,l,e)},children:t})},{field:"label",headerName:"Label",width:d[2],editable:!0},{field:"assemblyName",headerName:"Assembly",width:d[3]},{field:"highlight",headerName:"Highlight",width:d[4],renderCell:({value:s,row:t})=>(0,w.jsx)(S.Ay,{color:s||"black",onChange:s=>{e.updateBookmarkHighlight(t,s)}})}],processRowUpdate:s=>{const t=c[s.id];return e.updateBookmarkLabel(t,s.label),s},onProcessRowUpdateError:e=>{r.notifyError(`${e}`,e)},checkboxSelection:!0,onRowSelectionModelChange:s=>{a.length>0&&e.setSelectedBookmarks([...s.ids].map(e=>({...c[e]})))},rowSelectionModel:{type:"include",ids:new Set(o.map(e=>e.id))}})})}),D=(0,a.lazy)(()=>t.e(4761).then(t.bind(t,94761))),B=(0,a.lazy)(()=>Promise.all([t.e(8705),t.e(2610)]).then(t.bind(t,72610))),T=(0,a.lazy)(()=>t.e(1554).then(t.bind(t,11554))),G=(0,a.lazy)(()=>t.e(2375).then(t.bind(t,32375))),V=(0,a.lazy)(()=>t.e(779).then(t.bind(t,90779))),H=(0,a.lazy)(()=>t.e(7300).then(t.bind(t,57300))),R=(0,o.n)()({flex:{display:"flex"}}),E=(0,p.observer)(function({model:e}){const{classes:s}=R();return(0,w.jsxs)("div",{children:[(0,w.jsxs)(u.A,{severity:"info",children:["Click and type within the ",(0,w.jsx)("strong",{children:"label"})," field to annotate your bookmark"]}),(0,w.jsxs)("div",{className:s.flex,children:[(0,w.jsx)(l.A,{"data-testid":"grid_bookmark_menu",menuItems:[{label:"Export",icon:i.A,onClick:()=>{(0,n.getSession)(e).queueDialog(s=>[D,{onClose:s,model:e}])}},{label:"Import",icon:m.A,onClick:()=>{(0,n.getSession)(e).queueDialog(s=>[B,{model:e,onClose:s}])}},{label:"Delete",icon:r.A,onClick:()=>{(0,n.getSession)(e).queueDialog(s=>[H,{model:e,onClose:s}])}},{label:"Share",icon:b.A,onClick:()=>{(0,n.getSession)(e).queueDialog(s=>[T,{model:e,onClose:s}])}},{label:"Edit colors",icon:d.A,onClick:()=>{(0,n.getSession)(e).queueDialog(s=>[V,{model:e,onClose:s}])}},{label:"Settings",icon:h.A,onClick:()=>{(0,n.getSession)(e).queueDialog(s=>[G,{model:e,onClose:s}])}}],children:(0,w.jsx)(c.A,{})}),(0,w.jsx)(j,{model:e})]}),(0,w.jsx)(L,{model:e})]})})},81104(e,s,t){t.d(s,{Jn:()=>l,LP:()=>o,eW:()=>r,fU:()=>n});var a=t(23886);async function l(e,s,t,l){const n=(0,a.getSession)(l);try{let a=t.find(e=>e.id===n.focusedViewId);if(a?.assemblyNames[0]!==s&&(a=t.find(e=>"LinearGenomeView"===e.type&&e.assemblyNames[0]===s)),!a){const e=`${l.id}_${s}`;a=n.addView("LinearGenomeView",{id:e})}await a.navToLocString(e,s)}catch(e){console.error(e),n.notifyError(`${e}`,e)}}async function n(e,s){const{selectedBookmarks:l,bookmarksWithValidAssemblies:n}=s,o=0===l.length?n:l,{saveAs:r}=await t.e(1611).then(t.bind(t,91611));if("BED"===e){const e="",s={};for(const e of o){const{label:t}=e,a=""===t?".":t,l=`${e.refName}\t${e.start}\t${e.end}\t${a}\n`;s[e.assemblyName]?s[e.assemblyName].push(l):s[e.assemblyName]=[l]}for(const t in s){const a=s[t].reduce((e,s)=>e+s,e);r(new Blob([a||""],{type:"text/x-bed;charset=utf-8"}),`jbrowse_bookmarks_${t}.bed`)}}else{const e="chrom\tstart\tend\tlabel\tassembly_name\tcoord_range\n",s=o.map(e=>{const{label:s}=e,t=""===s?".":s,l=(0,a.assembleLocString)(e);return`${e.refName}\t${e.start+1}\t${e.end}\t${t}\t${e.assemblyName}\t${l}\n`}).reduce((e,s)=>e+s,e);r(new Blob([s||""],{type:"text/tab-separated-values;charset=utf-8"}),"jbrowse_bookmarks.tsv")}}async function o(e){const s=function(e){let s=0;switch(e.length%4){case 3:s=1;break;case 2:s=2;break;case 0:s=0;break;default:throw new Error("base64 not a valid length")}return e+"=".repeat(s)}(e.replaceAll("-","+").replaceAll("_","/")),{toByteArray:a}=await t.e(4531).then(t.t.bind(t,34531,19)),{inflate:l}=await t.e(4484).then(t.bind(t,54484)),n=l(a(s),void 0);return(new TextDecoder).decode(n)}async function r(e){const s=(new TextEncoder).encode(e),{deflate:a}=await t.e(4484).then(t.bind(t,54484)),{fromByteArray:l}=await t.e(4531).then(t.t.bind(t,34531,19)),n=l(a(s,void 0)),o=n.indexOf("=");return o>0?n.slice(0,o).replaceAll("+","-").replaceAll("/","_"):n.replaceAll("+","-").replaceAll("/","_")}},34230(e,s,t){t.d(s,{A:()=>n});var a=t(91383),l=t(44460);const n=(0,a.A)((0,l.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},50518(e,s,t){t.d(s,{A:()=>n});var a=t(91383),l=t(44460);const n=(0,a.A)((0,l.jsx)("path",{d:"M19 9h-4V3H9v6H5l7 7zM5 18v2h14v-2z"}),"GetApp")},9614(e,s,t){t.d(s,{A:()=>n});var a=t(91383),l=t(44460);const n=(0,a.A)((0,l.jsx)("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}),"Menu")},67922(e,s,t){t.d(s,{A:()=>n});var a=t(91383),l=t(44460);const n=(0,a.A)((0,l.jsx)("path",{d:"M5 4v2h14V4zm0 10h4v6h6v-6h4l-7-7z"}),"Publish")},66820(e,s,t){t.d(s,{A:()=>n});var a=t(91383),l=t(44460);const n=(0,a.A)((0,l.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings")},75242(e,s,t){t.d(s,{A:()=>n});var a=t(91383),l=t(44460);const n=(0,a.A)((0,l.jsx)("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92"}),"Share")},46537(e,s,t){t.d(s,{A:()=>h});var a=t(30128),l=t(21227),n=t(74533),o=t(80638),r=t(39104),i=t(45639),c=t(10137),d=t(44460);const m=(0,o.Ay)("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,s)=>{const{ownerState:t}=e;return[s.root,!t.disableGutters&&s.gutters,s[t.variant]]}})((0,r.A)(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",variants:[{props:({ownerState:e})=>!e.disableGutters,style:{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}}},{props:{variant:"dense"},style:{minHeight:48}},{props:{variant:"regular"},style:e.mixins.toolbar}]}))),h=a.forwardRef(function(e,s){const t=(0,i.b)({props:e,name:"MuiToolbar"}),{className:a,component:o="div",disableGutters:r=!1,variant:h="regular",...b}=t,u={...t,component:o,disableGutters:r,variant:h},p=(e=>{const{classes:s,disableGutters:t,variant:a}=e,l={root:["root",!t&&"gutters",a]};return(0,n.A)(l,c.U,s)})(u);return(0,d.jsx)(m,{as:o,className:(0,l.A)(p.root,a),ref:s,ownerState:u,...b})})},10137(e,s,t){t.d(s,{A:()=>o,U:()=>n});var a=t(26743),l=t(2395);function n(e){return(0,l.Ay)("MuiToolbar",e)}const o=(0,a.A)("MuiToolbar",["root","gutters","regular","dense"])}}]);
//# sourceMappingURL=3469.48d31a5e.chunk.js.map