"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[1792],{83252(e,t,r){r.d(t,{A:()=>l});var n=r(55614),i=r(23886),s=r(44460);function l(e){const t=(0,n.c)(12),{items:r,width:i,legendAreaWidth:l}=e;if(0===r.length)return null;const h=14*r.length+6;let o;t[0]!==r?(o=Math.max(...r.map(a)),t[0]=r,t[1]=o):o=t[1];const c=20+o+6,d=`translate(${l?i+10:i-c-10}, 10)`;let x,g,f;if(t[2]!==h||t[3]!==c?(x=(0,s.jsx)("rect",{x:0,y:0,width:c,height:h,fill:"rgba(255,255,255,0.9)",stroke:"#ccc",strokeWidth:1,rx:4}),t[2]=h,t[3]=c,t[4]=x):x=t[4],t[5]!==r){let e;t[7]===Symbol.for("react.memo_cache_sentinel")?(e=(e,t)=>(0,s.jsxs)("g",{transform:`translate(3, ${3+14*t})`,children:[e.color?(0,s.jsx)("rect",{x:0,y:0,width:12,height:12,fill:e.color}):null,(0,s.jsx)("text",{x:18,y:10,fontSize:10,fill:"black",children:e.label})]},`legend-${t}`),t[7]=e):e=t[7],g=r.map(e),t[5]=r,t[6]=g}else g=t[6];return t[8]!==d||t[9]!==x||t[10]!==g?(f=(0,s.jsxs)("g",{transform:d,children:[x,g]}),t[8]=d,t[9]=x,t[10]=g,t[11]=f):f=t[11],f}function a(e){return(0,i.measureText)(e.label,10)}},71792(e,t,r){r.d(t,{renderBaseLinearDisplaySvg:()=>u});var n=r(30128),i=r(56993),s=r(23886),l=r(27518),a=r(34895),h=r(83252),o=r(92130),c=r(44460);function d({featureLabels:e,offsetPx:t,viewWidth:r}){const n=[];for(const[i,{leftPx:s,topPx:l,totalFeatureHeight:a,floatingLabels:h,featureWidth:d}]of e.entries()){const e=l+a,x=s+d;for(const[l,{text:a,relativeY:d,color:g,textWidth:f,isOverlay:m}]of h.entries()){const h=e+d,u=(0,o.mJ)(s,x,f,t);if(u<0||u>r)continue;const j=11;n.push((0,c.jsxs)("g",{transform:`translate(${u}, ${h})`,children:[m?(0,c.jsx)("rect",{x:-1,y:0,width:f+2,height:j+1,fill:"rgba(255, 255, 255, 0.8)"}):null,(0,c.jsx)("text",{x:0,y:j,fontSize:j,fill:g,style:{pointerEvents:"none"},children:a})]},`${i}-${l}`))}}return(0,c.jsx)(c.Fragment,{children:n})}var x=r(56028),g=r(8576),f=r(55614);function m(e){const t=(0,f.c)(9),{error:r,width:n,height:i}=e;let s;t[0]!==i||t[1]!==n?(s=(0,c.jsx)("rect",{x:0,y:0,width:n,height:i,fill:"#ffdddd"}),t[0]=i,t[1]=n,t[2]=s):s=t[2];const l=i/2,a=`${r}`;let h,o;return t[3]!==l||t[4]!==a?(h=(0,c.jsx)("text",{x:10,y:l,fill:"#cc0000",fontSize:14,children:a}),t[3]=l,t[4]=a,t[5]=h):h=t[5],t[6]!==s||t[7]!==h?(o=(0,c.jsxs)(c.Fragment,{children:[s,h]}),t[6]=s,t[7]=h,t[8]=o):o=t[8],o}async function u(e,t){const{height:r,id:f}=e,{overrideHeight:u}=t,j=(0,s.getContainingView)(e),{offsetPx:w,roundedDynamicBlocks:y,width:p}=j;if(e.error)return(0,c.jsx)(m,{error:e.error,width:p,height:r});const b=await Promise.all(y.map(async r=>{const n=x.A.create({key:r.key,region:r}),i=e.regionCannotBeRenderedText(r)||e.regionCannotBeRendered(r);if(i)return[r,{reactElement:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("rect",{x:0,y:0,width:p,height:20,fill:"#aaa"}),(0,c.jsx)("text",{x:0,y:15,children:i})]})}];const{rpcManager:s,renderArgs:l,renderProps:a,renderingProps:h,rendererType:o}=(0,x.s)(n,e);return[r,await o.renderInClient(s,{...l,...a,renderingProps:h,exportSVG:t,theme:t.theme||a.theme})]})),P=(0,o.HV)(b),$=new a.A(P),{assemblyManager:v}=(0,s.getSession)(e),{offsetPx:k,bpPerPx:W}=j,A=j.assemblyNames[0],S=A?v.get(A):void 0,C=(0,o.OM)($,j,S,W),F=(0,g.OX)(f,"labels"),T=(0,i.createJBrowseTheme)(t.theme),_=e.showLegend?e.legendItems(T):[];return(0,c.jsxs)(c.Fragment,{children:[b.map(([e,t],i)=>{const{offsetPx:s,widthPx:a}=e,h=s-w,o=(0,g.OX)(f,i);return(0,c.jsxs)(n.Fragment,{children:[(0,c.jsx)("defs",{children:(0,c.jsx)("clipPath",{id:o,children:(0,c.jsx)("rect",{x:0,y:0,width:a,height:u||r})})}),(0,c.jsx)("g",{transform:`translate(${h} 0)`,children:(0,c.jsx)("g",{clipPath:`url(#${o})`,children:(0,c.jsx)(l.aE,{rendering:t})})})]},`frag-${i}`)}),(0,c.jsx)("defs",{children:(0,c.jsx)("clipPath",{id:F,children:(0,c.jsx)("rect",{x:0,y:0,width:p,height:u||r})})}),(0,c.jsx)("g",{clipPath:`url(#${F})`,children:(0,c.jsx)(d,{featureLabels:C,offsetPx:k,viewWidth:p})}),_.length>0?(0,c.jsx)(h.A,{items:_,width:p,legendAreaWidth:t.legendWidth}):null]})}}}]);
//# sourceMappingURL=1792.15937d0b.chunk.js.map