"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[4144,4811],{1178:(e,t,n)=>{n.d(t,{Im:()=>r,KS:()=>a,kb:()=>l,wh:()=>o});var i=n(99546),s=n(373);function r(e){return 0===Object.keys(e).length}function a(e,t,n){return[(0,s.SX)(`${e||t||""}`),`${n}`].filter((e=>!!e)).join(" - ")}function l(e,t){return Math.ceil((0,i.max)(e.map((e=>(0,i.measureText)([...t,e[0]].join("."),12)))))+10}function o(e,t={}){let n=t;for(const t of e)(0,i.isObject)(n)&&(n=n[t]);return"string"==typeof n?n:(0,i.isObject)(n)&&"string"==typeof n.Description?n.Description:void 0}},28055:(e,t,n)=>{n.d(t,{A:()=>c});var i=n(7552),s=n(87731),r=n(75785),a=n(49823),l=n(99546),o=n(69500);const d=(0,r.n9)()((e=>({fieldValue:{wordBreak:"break-word",maxHeight:300,fontSize:12,padding:e.spacing(.5),overflow:"auto"}})));function c({value:e}){const{classes:t}=d(),n=/^https?:\/\//.exec(`${e}`);return(0,o.jsx)("div",{className:t.fieldValue,children:(0,i.isValidElement)(e)?e:n?(0,o.jsx)(s.A,{href:`${e}`,children:`${e}`}):(0,o.jsx)(a.SanitizedHTML,{html:(0,l.isObject)(e)?JSON.stringify(e):String(e)})})}},32106:(e,t,n)=>{n.d(t,{A:()=>o});var i=n(75785),s=n(28055),r=n(36441),a=n(69500);const l=(0,i.n9)()({field:{display:"flex",flexWrap:"wrap"}});function o({name:e,value:t,description:n,prefix:i,width:o}){const{classes:d}=l();return null!=t?(0,a.jsxs)("div",{className:d.field,children:[(0,a.jsx)(r.A,{prefix:i,description:n,name:e,width:o}),(0,a.jsx)(s.A,{value:t})]}):null}},35300:(e,t,n)=>{n.r(t),n.d(t,{default:()=>N});var i=n(75785),s=n(28055),r=n(36441),a=n(99546),l=n(69500);const o=(0,i.n9)()((e=>({field:{display:"flex",flexWrap:"wrap"},fieldSubvalue:{wordBreak:"break-word",maxHeight:300,padding:e.spacing(.5),border:`1px solid ${e.palette.action.selected}`,boxSizing:"border-box",overflow:"auto"}})));function d({name:e,value:t,description:n,prefix:i=[]}){const{classes:d}=o();return 1===t.length?(0,a.isObject)(t[0])?(0,l.jsx)(N,{attributes:t[0],prefix:[...i,e]}):(0,l.jsxs)("div",{className:d.field,children:[(0,l.jsx)(r.A,{prefix:i,description:n,name:e}),(0,l.jsx)(s.A,{value:t[0]})]}):t.every((e=>(0,a.isObject)(e)))?(0,l.jsx)(l.Fragment,{children:t.map(((t,n)=>(0,l.jsx)(N,{attributes:t,prefix:[...i,`${e}-${n}`]},`${JSON.stringify(t)}-${n}`)))}):(0,l.jsxs)("div",{className:d.field,children:[(0,l.jsx)(r.A,{prefix:i,description:n,name:e}),t.map(((e,t)=>(0,l.jsx)("div",{className:d.fieldSubvalue,children:(0,l.jsx)(s.A,{value:e})},`${JSON.stringify(e)}-${t}`)))]})}var c=n(7552),u=n(33371),f=n(32808),p=n(36715),m=n(36793),x=n(76157),h=n(49823);const j=(0,i.n9)()((e=>({margin:{marginBottom:e.spacing(4)},cell:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}})));function g({value:e,prefix:t,name:n}){const{classes:i}=j(),[s,o]=(0,c.useState)(!1),d=Object.keys(e[0]).sort(),g=new Set(d),b=Object.entries(e).map((([e,t])=>{const{id:n,...i}=t;return{id:e,identifier:n,...i}}));for(const t of e)for(const e of Object.keys(t))g.add(e);let v;g.has("id")?(g.delete("id"),v=["identifier",...g]):v=[...g];const A=v.map((e=>(0,a.measureGridWidth)(b.map((t=>t[e])))));return g.size<d.length+5?(0,l.jsxs)("div",{className:i.margin,children:[(0,l.jsx)(r.A,{prefix:t,name:n}),(0,l.jsx)(u.A,{control:(0,l.jsx)(f.A,{checked:s,onChange:e=>{o(e.target.checked)}}),label:(0,l.jsx)(p.A,{variant:"body2",children:"Show options"})}),(0,l.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:(0,l.jsx)(m.z,{disableRowSelectionOnClick:!0,rows:b,rowHeight:20,columnHeaderHeight:35,hideFooter:b.length<25,slots:{toolbar:s?x.O:null},slotProps:{toolbar:{printOptions:{disableToolbarButton:!0}}},columns:v.map(((e,t)=>({field:e,renderCell:e=>{const t=e.value;return(0,l.jsx)("div",{className:i.cell,children:(0,l.jsx)(h.SanitizedHTML,{html:(0,a.getStr)(t||"")})})},width:A[t]})))})})]}):null}var b=n(32106);const v=(0,i.n9)()({field:{display:"flex",flexWrap:"wrap"}});function A({value:e,prefix:t,name:n}){const{classes:i}=v(),{uri:a,baseUri:o=""}=e;let d;try{d=new URL(a,o).href}catch(e){d=a}return(0,l.jsxs)("div",{className:i.field,children:[(0,l.jsx)(r.A,{prefix:t,name:n}),(0,l.jsx)(s.A,{value:d})]})}var S=n(1178);const w=170,y=["__jbrowsefmt","length","position","subfeatures","uniqueId","exonFrames","parentId","thickStart","thickEnd"];function N(e){const{attributes:t,omit:n=[],omitSingleLevel:i=[],descriptions:s,formatter:r=e=>e,hideUris:o,prefix:c=[]}=e,u=new Set([...n,...y,...i]),{__jbrowsefmt:f,...p}=t,m={...p,...f},x=(0,S.kb)(Object.entries(m).filter((([e,t])=>void 0!==t&&!u.has(e))),c);return(0,l.jsx)(l.Fragment,{children:Object.entries(m).filter((([e,t])=>void 0!==t&&!u.has(e))).map((([t,n])=>{const i=(0,S.wh)([...c,t],s);if(Array.isArray(n))return n.length>1&&n.every((e=>(0,a.isObject)(e)))?(0,l.jsx)(g,{name:t,prefix:c,value:n},t):(0,l.jsx)(d,{name:t,value:n,description:i,prefix:c},t);if((0,a.isObject)(n)){const{omitSingleLevel:i,...r}=e;return(0,a.isUriLocation)(n)?o?null:(0,l.jsx)(A,{name:t,prefix:c,value:n},t):(0,l.jsx)(N,{...r,attributes:n,descriptions:s,prefix:[...c,t]},t)}return(0,l.jsx)(b.A,{name:t,value:r(n,t),description:i,prefix:c,width:Math.min(x,w)},t)}))})}},36441:(e,t,n)=>{n.d(t,{A:()=>l});var i=n(89003),s=n(75785),r=n(69500);const a=(0,s.n9)()((e=>({fieldDescription:{"&:hover":{background:"dark"===e.palette.mode?"#e65100":"yellow"}},fieldName:{wordBreak:"break-all",minWidth:90,borderBottom:"1px solid #0003",fontSize:12,background:e.palette.action.disabledBackground,marginRight:e.spacing(1),padding:e.spacing(.5)}})));function l({description:e,name:t,width:n,prefix:s=[]}){const{classes:l,cx:o}=a(),d=[...s,t].join(".");return e?(0,r.jsx)(i.A,{title:e,placement:"left",children:(0,r.jsx)("div",{className:o(l.fieldDescription,l.fieldName),children:d})}):(0,r.jsx)("div",{className:l.fieldName,style:{width:n},children:d})}},62568:(e,t,n)=>{n.d(t,{A:()=>l});var i=n(99546),s=n(69500);function r(e){const{feature:t}=e,n=t.strand,r={"-1":"-",0:"",1:"+"},a=r[n]?`(${r[n]})`:"",l=(0,i.assembleLocString)(t);return(0,s.jsx)(s.Fragment,{children:`${l} ${a}`})}var a=n(32106);function l(e){const{feature:t}=e,n=t,l={...n,...n.__jbrowsefmt},{start:o,end:d}=l,c={...l,length:(0,i.toLocale)(d-o)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.A,{name:"Position",value:(0,s.jsx)(r,{...e,feature:l})}),Object.entries({description:"Description",name:"Name",length:"Length",type:"Type"}).map((([e,t])=>[t,c[e]])).filter((([,e])=>null!=e)).map((([e,t])=>(0,s.jsx)(a.A,{name:e,value:t},e)))]})}},64811:(e,t,n)=>{n.r(t),n.d(t,{default:()=>N});var i=n(7552),s=n(6854),r=n(84144),a=n(943),l=n(68446),o=n(87083),d=n(99546),c=n(36715),u=n(33371),f=n(32808),p=n(36793),m=n(76157),x=n(1343),h=n(69500);function j({columns:e,filter:t,setFilter:n}){return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(c.A,{children:"These filters can use a plain text search or regex style query, e.g. in the genotype field, entering 1 will query for all genotypes that include the first alternate allele e.g. 0|1 or 1|1, entering [1-9]\\d* will find any non-zero allele e.g. 0|2 or 2/33"}),e.map((({field:e})=>(0,h.jsx)(x.A,{placeholder:`Filter ${e}`,value:t[e]||"",onChange:i=>{n({...t,[e]:i.target.value})}},`filter-${e}`)))]})}function g(e){const{feature:t,descriptions:n={}}=e,[s,r]=(0,i.useState)({}),a=t.samples||{},l=Object.entries(a);let x,g=[];const b=Object.keys(s);try{g=l.map((e=>({...Object.fromEntries(Object.entries(e[1]).map((e=>[e[0],`${e[1]}`]))),sample:e[0],id:e[0]}))).filter((e=>!b.length||b.every((t=>{const n=s[t];return!n||new RegExp(n,"i").exec(e[t])}))))}catch(e){x=e}const[v,A]=(0,i.useState)(!1),S=["sample",...Object.keys(l[0]?.[1]||{})],w=S.map((e=>(0,d.measureGridWidth)(g.map((t=>t[e]))))),y=S.map(((e,t)=>({field:e,description:n?.FORMAT?.[e]?.Description,width:w[t]})));return l.length?(0,h.jsxs)(o.default,{...e,title:"Samples",children:[x?(0,h.jsx)(c.A,{color:"error",children:`${x}`}):null,(0,h.jsx)(u.A,{control:(0,h.jsx)(f.A,{checked:v,onChange:e=>{A(e.target.checked)}}),label:(0,h.jsx)(c.A,{variant:"body2",children:"Show options"})}),v?(0,h.jsx)(j,{setFilter:r,columns:y,filter:s}):null,(0,h.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:(0,h.jsx)(p.z,{rows:g,hideFooter:g.length<100,columns:y,disableRowSelectionOnClick:!0,rowHeight:25,columnHeaderHeight:35,disableColumnMenu:!0,slots:{toolbar:v?m.O:null},slotProps:{toolbar:{printOptions:{disableToolbarButton:!0}}}})})]}):null}const b={CHROM:"chromosome: An identifier from the reference genome",POS:"position: The reference position, with the 1st base having position 1",ID:"identifier: Semi-colon separated list of unique identifiers where available",REF:"reference base(s): Each base must be one of A,C,G,T,N (case insensitive).",ALT:"alternate base(s): Comma-separated list of alternate non-reference alleles",QUAL:"quality: Phred-scaled quality score for the assertion made in ALT",FILTER:"filter status: PASS if this position has passed all filters, otherwise a semicolon-separated list of codes for filters that fail"},v=(0,i.lazy)((()=>n.e(5535).then(n.bind(n,45535)))),A=(0,i.lazy)((()=>n.e(5808).then(n.bind(n,95808))));function S({descriptions:e,feature:t}){const n=e?.INFO?.ANN?.Description,i=n?.match(/.*Functional annotations:'(.*)'$/)?.[1]?.split("|")||[],s=t.INFO?.ANN||[];return(0,h.jsx)(A,{fields:i,data:s,title:"Variant ANN field"})}function w({descriptions:e,feature:t}){const n=e?.INFO?.CSQ?.Description,i=n?.match(/.*Format: (.*)/)?.[1]?.split("|")||[],s=t.INFO?.CSQ||[];return(0,h.jsx)(A,{fields:i,data:s,title:"Variant CSQ field"})}function y({model:e}){const{featureData:t}=e,n=JSON.parse(JSON.stringify(t)),{type:i=""}=n;return"breakend"===i?(0,h.jsx)(v,{feature:n,locStrings:n.ALT.map((e=>(0,s.h)(e)?.MatePosition||"")),model:e}):"translocation"===i?(0,h.jsx)(v,{feature:n,model:e,locStrings:[`${n.INFO.CHR2[0]}:${n.INFO.END}`]}):"paired_feature"===i?(0,h.jsx)(v,{feature:n,model:e,locStrings:[`${n.mate.refName}:${n.mate.start}`]}):i.includes("inversion")||i.includes("deletion")||i.includes("duplication")||i.includes("cnv")||i.includes("sv")?(0,h.jsx)(v,{feature:{uniqueId:"random",refName:n.refName,start:n.start,end:n.start+1,mate:{refName:n.refName,start:n.end,end:n.end+1}},model:e,locStrings:[`${n.refName}:${n.end}`]}):null}const N=(0,l.observer)((function(e){const{model:t}=e,{featureData:n,descriptions:s}=t,l=JSON.parse(JSON.stringify(n)),{samples:o,ALT:d,...c}=l;return(0,h.jsxs)(a.A,{"data-testid":"variant-side-drawer",children:[(0,h.jsx)(r.default,{feature:c,descriptions:{...b,...s},...e}),(0,h.jsxs)(i.Suspense,{fallback:null,children:[(0,h.jsx)(w,{feature:c,descriptions:s}),(0,h.jsx)(S,{feature:c,descriptions:s}),(0,h.jsx)(y,{model:t})]}),(0,h.jsx)(g,{feature:l,...e,descriptions:s})]})}))},84144:(e,t,n)=>{n.r(t),n.d(t,{default:()=>N});var i=n(57468),s=n(36715),r=n(24387),a=n(1178),l=n(7552),o=n(25914),d=n(48171),c=n(5401),u=n(61723),f=n(68446),p=n(75785),m=n(49823),x=n(99546),h=n(69500);const j=(0,l.lazy)((()=>n.e(7428).then(n.bind(n,27428)))),g=(0,l.lazy)((()=>n.e(8624).then(n.bind(n,38624)))),b=(0,p.n9)()((e=>({formControl:{margin:0},container:{marginTop:e.spacing(4),marginBottom:e.spacing(4)}}))),v=(0,f.observer)((function({model:e,feature:t}){const{classes:n}=b(),[i,s]=(0,l.useState)(!1);return(0,h.jsxs)("div",{className:n.container,children:[(0,h.jsx)(d.A,{className:n.formControl,children:(0,h.jsx)(c.A,{variant:"contained",onClick:()=>{s(!i)},children:i?"Hide feature sequence":"Show feature sequence"})}),(0,h.jsx)(u.A,{onClick:()=>{(0,x.getSession)(e).queueDialog((e=>[g,{handleClose:e}]))},children:(0,h.jsx)(o.A,{})}),i?(0,h.jsx)(l.Suspense,{fallback:(0,h.jsx)(m.LoadingEllipses,{}),children:(0,h.jsx)(j,{model:e,feature:t},t.uniqueId)}):null]})}));var A=n(35300),S=n(87083),w=n(62568);const y=["name","start","end","strand","refName","description","type"];function N(e){const{omit:t=[],model:n,feature:l,depth:o=0}=e,{maxDepth:d}=n,{mate:c,name:u="",id:f="",type:p="",subfeatures:j,uniqueId:g}=l,b=(0,x.getEnv)(n).pluginManager,O=(0,x.getSession)(n),k=b.evaluateExtensionPoint("Core-extraFeaturePanel",null,{session:O,feature:l,model:n}),$=c;return(0,h.jsxs)(S.default,{title:(0,a.KS)(u,f,p),children:[(0,h.jsx)(s.A,{children:"Core details"}),(0,h.jsx)(w.A,{...e}),$?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(r.A,{}),(0,h.jsx)(s.A,{children:"Mate details"}),(0,h.jsx)(w.A,{...e,feature:{...$,start:$.start,end:$.end,refName:$.refName,uniqueId:`${g}-mate`}})]}):null,(0,h.jsx)(r.A,{}),(0,h.jsx)(s.A,{children:"Attributes"}),(0,h.jsx)(A.default,{attributes:l,...e,omit:t,omitSingleLevel:y}),(0,h.jsx)(i.t,{FallbackComponent:e=>(0,h.jsx)(m.ErrorMessage,{error:e.error}),children:(0,h.jsx)(v,{...e})}),k?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(r.A,{}),(0,h.jsx)(S.default,{title:k.name,children:(0,h.jsx)(k.Component,{...e})})]}):null,o<d&&j?.length?(0,h.jsx)(S.default,{title:"Subfeatures",defaultExpanded:o<1,children:j.map(((e,t)=>(0,h.jsx)(N,{feature:{...e,uniqueId:`${g}_${t}`},model:n,depth:o+1},JSON.stringify(e))))}):null]})}},87083:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var i=n(7720),s=n(63011),r=n(48253),a=n(36715),l=n(63165),o=n(75785),d=n(69500);const c=(0,o.n9)()((e=>({expansionPanelDetails:{display:"block",padding:e.spacing(1)},icon:{color:e.palette.tertiary.contrastText||"#fff"}})));function u({children:e,title:t,defaultExpanded:n=!0}){const{classes:o}=c();return(0,d.jsxs)(s.A,{defaultExpanded:n,children:[(0,d.jsx)(r.A,{expandIcon:(0,d.jsx)(i.A,{className:o.icon}),children:(0,d.jsx)(a.A,{variant:"button",children:t})}),(0,d.jsx)(l.A,{className:o.expansionPanelDetails,children:e})]})}}}]);
//# sourceMappingURL=4811.98598dc9.chunk.js.map