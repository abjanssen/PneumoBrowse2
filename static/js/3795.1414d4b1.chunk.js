"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[3795,6791],{13795:(e,t,n)=>{n.r(t),n.d(t,{default:()=>a});var s=n(7552),o=n(68446),i=n(46791),r=n(69500);const l=(0,s.lazy)(()=>Promise.all([n.e(2826),n.e(9546),n.e(450)]).then(n.bind(n,80450))),a=(0,o.observer)(function({model:e}){return e.initialized?(0,r.jsx)(i.default,{model:e}):(0,r.jsx)(l,{model:e})})},46791:(e,t,n)=>{n.r(t),n.d(t,{default:()=>L});var s=n(68446),o=n(75785),i=n(7552),r=n(23758),l=n(90542),a=n(2020),c=n(31294),d=n(36866),u=n(99546),f=n(53179),m=n(61282),b=n(69500);const h=(0,o.n9)()(()=>({bp:{display:"flex",alignItems:"center",marginLeft:10},searchBox:{display:"flex"}})),p=(0,s.observer)(function({view:e}){const{classes:t}=h(),{assemblyDisplayNames:n,coarseTotalBp:s}=e;return(0,b.jsxs)("span",{className:t.searchBox,children:[(0,b.jsx)(f.Gd,{model:e,showHelp:!1}),(0,b.jsxs)(m.A,{variant:"body2",color:"textSecondary",className:t.bp,children:[n.join(",")," ",(0,u.getBpDisplayStr)(s)]})]})}),v=(0,o.n9)()({inline:{display:"inline-flex"}}),x=(0,s.observer)(function({model:e}){const{classes:t}=v(),{views:n}=e,[s,o]=(0,i.useState)(n.length<=3),[u,f]=(0,i.useState)(n.length<=3);return(0,b.jsxs)(d.A,{row:!0,children:[(0,b.jsx)(r.A,{menuItems:[{label:"Synteny track selectors",type:"subMenu",subMenu:n.slice(0,-1).map((t,s)=>({label:`Row ${s+1}->${s+2} (${n[s].assemblyNames.join(",")}->${n[s+1].assemblyNames.join(",")})`,onClick:()=>{e.activateTrackSelector(s)}}))},{label:"Row track selectors",type:"subMenu",subMenu:n.map((e,t)=>({label:`Row ${t+1} track selector (${e.assemblyNames.join(",")})`,onClick:()=>e.activateTrackSelector()}))}],children:(0,b.jsx)(l.xU,{})}),(0,b.jsx)(r.A,{menuItems:[{label:"Row view menus",type:"subMenu",subMenu:n.map((e,t)=>({label:`View ${t+1} Menu`,subMenu:e.menuItems()}))},...e.headerMenuItems()],children:(0,b.jsx)(a.A,{})}),(0,b.jsx)(r.A,{menuItems:[{label:"Show search boxes",type:"checkbox",checked:s,onClick:()=>{o(!s)}},{label:"Orientation - Side-by-side",type:"radio",checked:u,onClick:()=>{f(!u)}},{label:"Orientation - Vertical",type:"radio",checked:!u,onClick:()=>{f(!u)}}],children:(0,b.jsx)(c.A,{})}),s?(0,b.jsx)("span",{className:u?t.inline:void 0,children:n.map(e=>(0,b.jsx)(p,{view:e},e.id))}):null]})});var g=n(67758),w=n(68584),j=n(67112);const y=(0,o.n9)()({container:{display:"grid"},overlay:{zIndex:100,gridArea:"1/1"},resizeHandle:{height:4,background:"#ccc"}});function k(e){const t=(0,g.c)(5),{view:n}=e;let s;if(t[0]!==n){const{pluginManager:e}=(0,u.getEnv)(n);s=e.getViewType(n.type),t[0]=n,t[1]=s}else s=t[1];const{ReactComponent:o}=s;let i;return t[2]!==o||t[3]!==n?(i=(0,b.jsx)(o,{model:n}),t[2]=o,t[3]=n,t[4]=i):i=t[4],i}const M=(0,s.observer)(function({model:e}){const{classes:t}=y(),{views:n,levels:s}=e;return(0,b.jsx)("div",{className:t.container,children:n.map((n,o)=>(0,b.jsxs)(b.Fragment,{children:[o>0?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:t.container,children:(0,b.jsx)(O,{model:e,level:o-1})}),(0,b.jsx)(j.ResizeHandle,{onDrag:e=>s[o-1]?.setHeight((s[o-1]?.height||0)+e),className:t.resizeHandle})]}):null,(0,b.jsx)(k,{view:n})]},n.id))})}),O=(0,s.observer)(function({model:e,level:t}){const{classes:n}=y();return(0,b.jsx)(b.Fragment,{children:e.levels[t]?.tracks.map(e=>{const[t]=e.displays,{RenderingComponent:s}=t,o=(0,w.getConf)(e,"trackId");return s?(0,b.jsx)("div",{className:n.overlay,style:{height:t.height,overflow:"hidden"},children:(0,b.jsx)(s,{model:t})},o):null})})}),B=M;var C=n(62266),S=n(37962);function N(e){const t=(0,g.c)(8),{anchorEl:n,side:s,text:o}=e,i="left"===s?"left-start":"right-start";let r,l,a,c;return t[0]===Symbol.for("react.memo_cache_sentinel")?(r=[{name:"offset",options:{offset:[-30,-10]}}],t[0]=r):r=t[0],t[1]!==n?(l={popper:{anchorEl:n,modifiers:r}},t[1]=n,t[2]=l):l=t[2],t[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,b.jsx)("span",{}),t[3]=a):a=t[3],t[4]!==i||t[5]!==l||t[6]!==o?(c=(0,b.jsx)(S.A,{title:o,open:!0,placement:i,slotProps:l,children:a}),t[4]=i,t[5]=l,t[6]=o,t[7]=c):c=t[7],c}const I=(0,o.n9)()(e=>{const{tertiary:t}=e.palette;return{rubberband:{height:"100%",background:(0,C.X4)(t.light,.7),position:"absolute",zIndex:830,textAlign:"center"},rubberbandText:{color:e.palette.tertiary.contrastText}}});function T(e){const t=(0,g.c)(19),{leftBpOffset:n,rightBpOffset:s,numOfBpSelected:o,left:r,width:l,top:a,sticky:c}=e,d=void 0===a?0:a,u=void 0!==c&&c,{classes:f}=I(),[h,p]=(0,i.useState)(null);let v,x,w,j,y;return t[0]!==h||t[1]!==n||t[2]!==s?(v=h?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(N,{side:"left",anchorEl:h,text:n.map(D)}),(0,b.jsx)(N,{side:"right",anchorEl:h,text:s.map(E)})]}):null,t[0]=h,t[1]=n,t[2]=s,t[3]=v):v=t[3],t[4]!==r||t[5]!==l?(x={left:r,width:l},t[4]=r,t[5]=l,t[6]=x):x=t[6],t[7]!==f.rubberbandText||t[8]!==o||t[9]!==u||t[10]!==d?(w=o?(0,b.jsx)(m.A,{ref:e=>{p(e)},variant:"h6",className:f.rubberbandText,style:{top:d,position:u?"sticky":void 0},children:o.map(A)}):null,t[7]=f.rubberbandText,t[8]=o,t[9]=u,t[10]=d,t[11]=w):w=t[11],t[12]!==f.rubberband||t[13]!==x||t[14]!==w?(j=(0,b.jsx)("div",{className:f.rubberband,style:x,children:w}),t[12]=f.rubberband,t[13]=x,t[14]=w,t[15]=j):j=t[15],t[16]!==v||t[17]!==j?(y=(0,b.jsxs)(b.Fragment,{children:[v,j]}),t[16]=v,t[17]=j,t[18]=y):y=t[18],y}function A(e,t){return(0,b.jsx)("div",{children:(0,u.getBpDisplayStr)(e)},t)}function E(e,t){return(0,b.jsx)("div",{children:(0,u.stringify)(e,!0)},`JSON.stringify(l)-${t}`)}function D(e,t){return(0,b.jsx)("div",{children:(0,u.stringify)(e,!0)},`JSON.stringify(l)-${t}`)}const X=(0,o.n9)()({guide:{pointerEvents:"none",height:"100%",width:1,position:"absolute",background:"red",zIndex:1001}}),R=(0,s.observer)(function({model:e,coordX:t}){const{classes:n}=X();return(0,b.jsx)(S.A,{open:!0,placement:"top",title:e.views.map(e=>e.pxToBp(t)).map((e,t)=>(0,b.jsx)("div",{children:(0,u.stringify)(e,!0)},[JSON.stringify(e),t].join("-"))),arrow:!0,children:(0,b.jsx)("div",{className:n.guide,style:{left:t}})})});var z=n(42489);function P(e,t){return e.clientX-(t?.getBoundingClientRect().left||0)}function $(){}const _=(0,o.n9)()({rubberbandControl:{cursor:"crosshair",width:"100%",minHeight:8,position:"relative",zIndex:900}}),F=(0,s.observer)(function({model:e,ControlComponent:t=(0,b.jsx)("div",{})}){const n=(0,i.useRef)(null),{classes:s}=_(),{guideX:o,rubberbandOn:r,leftBpOffset:l,rightBpOffset:a,numOfBpSelected:c,width:d,left:u,anchorPosition:f,open:m,handleMenuItemClick:h,handleClose:p,mouseMove:v,mouseDown:x,mouseOut:w}=function(e,t){const n=(0,g.c)(55),[s,o]=(0,i.useState)(),[r,l]=(0,i.useState)(),[a,c]=(0,i.useState)(),[d,u]=(0,i.useState)(),f=void 0!==s&&void 0===a;let m,b,h,p;n[0]!==t||n[1]!==f||n[2]!==e||n[3]!==s?(m=()=>{const n=function(t){if(e.current&&f){const n=P(t,e.current);l(n)}},o=function(n){if(void 0!==s&&e.current){const{clientX:o,clientY:i}=n,r=P(n,e.current);c({offsetX:r,clientX:o,clientY:i});const l=function(e){if(void 0===s)return;const n=Math.min(s,e),o=Math.max(s,e);return t.views.map(e=>({leftOffset:e.pxToBp(n),rightOffset:e.pxToBp(o)}))}(r);l&&(0,z.transaction)(()=>{for(const[e,n]of l.entries())t.views[e].setOffsets(n.leftOffset,n.rightOffset)}),u(void 0)}};return f?(window.addEventListener("mousemove",n),window.addEventListener("mouseup",o),()=>{window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",o)}):$},b=[s,f,t,e],n[0]=t,n[1]=f,n[2]=e,n[3]=s,n[4]=m,n[5]=b):(m=n[4],b=n[5]),(0,i.useEffect)(m,b),n[6]!==r||n[7]!==f||n[8]!==s?(h=[f,r,s],n[6]=r,n[7]=f,n[8]=s,n[9]=h):h=n[9],(0,i.useEffect)(()=>{!f&&void 0!==r&&void 0!==s&&Math.abs(r-s)<=3&&k()},h),n[10]!==e?(p=function(t){t.preventDefault(),t.stopPropagation();const n=P(t,e.current);o(n),l(n)},n[10]=e,n[11]=p):p=n[11];const v=p;let x;n[12]!==e?(x=function(t){u(P(t,e.current))},n[12]=e,n[13]=x):x=n[13];const w=x;let j;n[14]!==t?(j=function(){u(void 0),(0,z.transaction)(()=>{for(const e of t.views)e.setOffsets(void 0,void 0)})},n[14]=t,n[15]=j):j=n[15];const y=j;function k(){c(void 0),o(void 0),l(void 0)}let M;n[16]!==k?(M=function(e,t){t(),k()},n[16]=k,n[17]=M):M=n[17];const O=M,B=Boolean(a);if(void 0===s){let e;return n[18]!==d||n[19]!==O||n[20]!==v||n[21]!==w||n[22]!==y||n[23]!==B?(e={open:B,guideX:d,mouseDown:v,mouseMove:w,mouseOut:y,handleMenuItemClick:O},n[18]=d,n[19]=O,n[20]=v,n[21]=w,n[22]=y,n[23]=B,n[24]=e):e=n[24],e}const C=a?a.offsetX:r||0,S=Math.min(C,s),N=Math.abs(C-s);let I;if(n[25]!==S||n[26]!==t.views){let e;n[28]!==S?(e=e=>e.pxToBp(S),n[28]=S,n[29]=e):e=n[29],I=t.views.map(e),n[25]=S,n[26]=t.views,n[27]=I}else I=n[27];const T=I;let A;if(n[30]!==S||n[31]!==t.views||n[32]!==N){let e;n[34]!==S||n[35]!==N?(e=e=>e.pxToBp(S+N),n[34]=S,n[35]=N,n[36]=e):e=n[36],A=t.views.map(e),n[30]=S,n[31]=t.views,n[32]=N,n[33]=A}else A=n[33];const E=A;let D;if(n[37]!==t.views||n[38]!==N){let e;n[40]!==N?(e=e=>Math.ceil(N*e.bpPerPx),n[40]=N,n[41]=e):e=n[41],D=t.views.map(e),n[37]=t.views,n[38]=N,n[39]=D}else D=n[39];const X=D;let R;return n[42]!==a||n[43]!==k||n[44]!==O||n[45]!==S||n[46]!==T||n[47]!==v||n[48]!==w||n[49]!==y||n[50]!==X||n[51]!==B||n[52]!==E||n[53]!==N?(R={open:B,rubberbandOn:!0,mouseDown:v,mouseMove:w,mouseOut:y,handleClose:k,handleMenuItemClick:O,leftBpOffset:T,rightBpOffset:E,anchorPosition:a,numOfBpSelected:X,width:N,left:S},n[42]=a,n[43]=k,n[44]=O,n[45]=S,n[46]=T,n[47]=v,n[48]=w,n[49]=y,n[50]=X,n[51]=B,n[52]=E,n[53]=N,n[54]=R):R=n[54],R}(n,e);return(0,b.jsxs)(b.Fragment,{children:[void 0!==o?(0,b.jsx)(R,{model:e,coordX:o}):r?(0,b.jsx)(T,{leftBpOffset:l,rightBpOffset:a,numOfBpSelected:c,width:d,left:u}):null,f?(0,b.jsx)(j.Menu,{anchorReference:"anchorPosition",anchorPosition:{left:f.clientX,top:f.clientY},onMenuItemClick:h,open:m,onClose:p,menuItems:e.rubberBandMenuItems()}):null,(0,b.jsx)("div",{"data-testid":"rubberband_controls",className:s.rubberbandControl,ref:n,onMouseDown:x,onMouseMove:v,onMouseOut:w,children:t})]})}),H=(0,o.n9)()(e=>({rubberbandContainer:{position:"relative",overflow:"hidden"},rubberbandDiv:{width:"100%",background:e.palette.action.disabledBackground,height:15,"&:hover":{background:e.palette.action.selected}}})),L=(0,s.observer)(function({model:e}){const{classes:t}=H();return(0,b.jsxs)("div",{className:t.rubberbandContainer,children:[(0,b.jsx)(x,{model:e}),(0,b.jsx)(F,{model:e,ControlComponent:(0,b.jsx)("div",{className:t.rubberbandDiv})}),(0,b.jsx)(B,{model:e})]})})}}]);
//# sourceMappingURL=3795.1414d4b1.chunk.js.map