"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[3425],{7720:(e,t,a)=>{a.d(t,{A:()=>s});var r=a(74893),n=a(69500);const s=(0,r.A)((0,n.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore")},23425:(e,t,a)=>{a.r(t),a.d(t,{default:()=>j});var r=a(7552),n=a(49823),s=a(99546),o=a(99834),i=a(92516),c=a(7720),d=a(550),l=a(29499),p=a(63011),m=a(48253),u=a(36715),h=a(63165),x=a(1343),A=a(58507),f=a(5401),b=a(68446),y=a(75785),w=a(32984),g=a(84495),k=a(69500);const v=(0,y.n9)()((e=>({expandIcon:{color:e.palette.tertiary.contrastText||"#fff"},minWidth:{minWidth:500}}))),j=(0,b.observer)((function({onClose:e,model:t}){const{classes:a}=v(),[b,y]=(0,r.useState)(),[j,S]=(0,r.useState)(),[C,I]=(0,r.useState)(""),N=(0,s.getSession)(t),{assemblyNames:R}=N,[W,M]=(0,r.useState)(R[0]),[D,V]=(0,r.useState)("shareLinkAccordion");return(0,k.jsxs)(n.Dialog,{open:!0,onClose:e,maxWidth:"xl",title:"Import bookmarks",children:[(0,k.jsxs)(l.A,{className:a.minWidth,children:[(0,k.jsxs)(p.A,{expanded:"shareLinkAccordion"===D,onChange:()=>{V("shareLinkAccordion")},children:[(0,k.jsx)(m.A,{expandIcon:(0,k.jsx)(c.A,{className:a.expandIcon}),children:(0,k.jsx)(u.A,{style:{display:"flex",alignItems:"center",gap:"5px"},children:"Import from share link"})}),(0,k.jsxs)(h.A,{children:[(0,k.jsx)(u.A,{children:"Paste a bookmark share link generated by the 'Share' button from the bookmarks widget"}),(0,k.jsx)(x.A,{label:"Enter Share URL",variant:"outlined",fullWidth:!0,value:C,onChange:e=>{I(e.target.value)}})]})]}),(0,k.jsxs)(p.A,{expanded:"fileAccordion"===D,onChange:()=>{V("fileAccordion")},children:[(0,k.jsx)(m.A,{expandIcon:(0,k.jsx)(c.A,{className:a.expandIcon}),children:(0,k.jsx)(u.A,{children:"Import from file"})}),(0,k.jsxs)(h.A,{children:[(0,k.jsx)(n.FileSelector,{location:b,setLocation:y,name:"File",description:'Choose a BED or TSV format file to import. Required TSV column headers are "chrom, start, end, label, assembly_name".'}),(0,k.jsx)(n.AssemblySelector,{onChange:e=>{M(e)},helperText:"Select the assembly for BED file.",session:N,selected:W})]})]}),j?(0,k.jsx)(n.ErrorMessage,{error:j}):null]}),(0,k.jsxs)(A.A,{children:[(0,k.jsx)(f.A,{variant:"contained",color:"secondary",onClick:e,children:"Cancel"}),(0,k.jsx)(f.A,{"data-testid":"dialogImport",variant:"contained",color:"primary",disabled:!b&&!C,startIcon:(0,k.jsx)(d.A,{}),onClick:async()=>{try{if("fileAccordion"===D&&b){const e=(await(0,o.openLocation)(b).readFile("utf8")).split(/\n|\r\n|\r/).filter((e=>!!e.trim()));"BED"==((a=e[0]).startsWith("chrom")&&a.includes("assembly_name")?"TSV":"BED")?t.importBookmarks(await async function(e,t){return e.filter((e=>!e.startsWith("#"))).map((e=>{const[a,r,n,s]=e.split("\t");return{assemblyName:t,refName:a,start:+r,end:+n,label:"."===s?void 0:s}}))}(e,W)):t.importBookmarks(await async function(e){return e[0].startsWith("chrom")&&(e=e.slice(1)),e.filter((e=>!e.startsWith("#"))).map((e=>{const[t,a,r,n,s]=e.split("\t");return{assemblyName:s,refName:t,start:+a,end:+r,label:"."===n?void 0:n}}))}(e))}else"shareLinkAccordion"===D&&C&&(0,i.xv)(N)&&t.importBookmarks(await async function(e,t){const a=new URL(e),r=a.searchParams.get("bookmarks"),n=a.searchParams.get("password"),s=await(0,w.Z)(`${t??"https://share.jbrowse.org/api/v1/"}load`,r||"",n||"");return JSON.parse(await(0,g.LP)(s)).sharedBookmarks}(C,N.shareURL));e()}catch(e){console.error(e),S(e)}var a},children:"Import"})]})]})}))},25877:(e,t,a)=>{a.d(t,{A:()=>o,T:()=>s});var r=a(33761),n=a(85693);function s(e){return(0,n.Ay)("MuiAccordionSummary",e)}const o=(0,r.A)("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"])},32984:(e,t,a)=>{a.d(t,{J:()=>i,Z:()=>c});var r=a(84495);const n=async(e,t)=>(await Promise.all([a.e(7753),a.e(9831),a.e(5156)]).then(a.t.bind(a,29831,23))).encrypt(e,t).toString(),s=async(e,t)=>{const r=await Promise.all([a.e(7753),a.e(9831),a.e(5156)]).then(a.t.bind(a,29831,23)),n=await Promise.all([a.e(7753),a.e(6235)]).then(a.t.bind(a,12598,23));return r.decrypt(e,t).toString(n)};function o(e){try{return JSON.parse(e).message}catch(t){return e}}async function i(e,t,a){const s=await(0,r.eW)(JSON.stringify(e)),i=window.btoa([...window.crypto.getRandomValues(new Uint8Array(10))].map((e=>String.fromCharCode(e))).join("")).replaceAll(/[+/]/g,"").slice(0,5);const c=await n(s,i),d=new FormData;d.append("session",c),d.append("dateShared",`${Date.now()}`),d.append("referer",a);const l=await fetch(`${t}share`,{method:"POST",mode:"cors",body:d});if(!l.ok){const e=await l.text();throw new Error(o(e))}return{json:await l.json(),encryptedSession:c,password:i}}async function c(e,t,a){const r=t.split("share-")[1],n=`${e}?sessionId=${encodeURIComponent(r)}`,i=await fetch(n);if(!i.ok)throw new Error(o(await i.text()));const c=await i.json();return s(c.session,a)}},48253:(e,t,a)=>{a.d(t,{A:()=>A});var r=a(7552),n=a(93878),s=a(70799),o=a(51148),i=a(84893),c=a(4785),d=a(48054),l=a(51132),p=a(25877),m=a(69500);const u=(0,o.Ay)(d.A,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(e,t)=>t.root})((0,i.A)((({theme:e})=>{const t={duration:e.transitions.duration.shortest};return{display:"flex",width:"100%",minHeight:48,padding:e.spacing(0,2),transition:e.transitions.create(["min-height","background-color"],t),[`&.${p.A.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${p.A.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`&:hover:not(.${p.A.disabled})`]:{cursor:"pointer"},variants:[{props:e=>!e.disableGutters,style:{[`&.${p.A.expanded}`]:{minHeight:64}}}]}}))),h=(0,o.Ay)("span",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(e,t)=>t.content})((0,i.A)((({theme:e})=>({display:"flex",textAlign:"start",flexGrow:1,margin:"12px 0",variants:[{props:e=>!e.disableGutters,style:{transition:e.transitions.create(["margin"],{duration:e.transitions.duration.shortest}),[`&.${p.A.expanded}`]:{margin:"20px 0"}}}]})))),x=(0,o.Ay)("span",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(e,t)=>t.expandIconWrapper})((0,i.A)((({theme:e})=>({display:"flex",color:(e.vars||e).palette.action.active,transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),[`&.${p.A.expanded}`]:{transform:"rotate(180deg)"}})))),A=r.forwardRef((function(e,t){const a=(0,c.b)({props:e,name:"MuiAccordionSummary"}),{children:o,className:i,expandIcon:d,focusVisibleClassName:A,onClick:f,...b}=a,{disabled:y=!1,disableGutters:w,expanded:g,toggle:k}=r.useContext(l.A),v={...a,expanded:g,disabled:y,disableGutters:w},j=(e=>{const{classes:t,expanded:a,disabled:r,disableGutters:n}=e,o={root:["root",a&&"expanded",r&&"disabled",!n&&"gutters"],focusVisible:["focusVisible"],content:["content",a&&"expanded",!n&&"contentGutters"],expandIconWrapper:["expandIconWrapper",a&&"expanded"]};return(0,s.A)(o,p.T,t)})(v);return(0,m.jsxs)(u,{focusRipple:!1,disableRipple:!0,disabled:y,"aria-expanded":g,className:(0,n.A)(j.root,i),focusVisibleClassName:(0,n.A)(j.focusVisible,A),onClick:e=>{k&&k(e),f&&f(e)},ref:t,ownerState:v,...b,children:[(0,m.jsx)(h,{className:j.content,ownerState:v,children:o}),d&&(0,m.jsx)(x,{className:j.expandIconWrapper,ownerState:v,children:d})]})}))},63165:(e,t,a)=>{a.d(t,{A:()=>m});var r=a(7552),n=a(93878),s=a(70799),o=a(51148),i=a(84893),c=a(4785),d=a(79509),l=a(69500);const p=(0,o.Ay)("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(e,t)=>t.root})((0,i.A)((({theme:e})=>({padding:e.spacing(1,2,2)})))),m=r.forwardRef((function(e,t){const a=(0,c.b)({props:e,name:"MuiAccordionDetails"}),{className:r,...o}=a,i=a,m=(e=>{const{classes:t}=e;return(0,s.A)({root:["root"]},d.n,t)})(i);return(0,l.jsx)(p,{className:(0,n.A)(m.root,r),ref:t,ownerState:i,...o})}))},79509:(e,t,a)=>{a.d(t,{A:()=>o,n:()=>s});var r=a(33761),n=a(85693);function s(e){return(0,n.Ay)("MuiAccordionDetails",e)}const o=(0,r.A)("MuiAccordionDetails",["root"])}}]);
//# sourceMappingURL=3425.d074ce6a.chunk.js.map