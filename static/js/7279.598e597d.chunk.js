"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[7279],{4778(e,t,n){n.d(t,{P2:()=>f});const r=(e,t)=>t.some(t=>e instanceof t);let i,s;const o=new WeakMap,a=new WeakMap,c=new WeakMap;let l={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return o.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return u(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function h(e){l=e(l)}function p(e){return"function"==typeof e?(t=e,(s||(s=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(d(this),e),u(this.request)}:function(...e){return u(t.apply(d(this),e))}):(e instanceof IDBTransaction&&function(e){if(o.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});o.set(e,t)}(e),r(e,i||(i=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,l):e);var t}function u(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(u(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return c.set(t,e),t}(e);if(a.has(e))return a.get(e);const t=p(e);return t!==e&&(a.set(e,t),c.set(t,e)),t}const d=e=>c.get(e);function f(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=u(o);return r&&o.addEventListener("upgradeneeded",e=>{r(u(o.result),e.oldVersion,e.newVersion,u(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}const y=["get","getKey","getAll","getAllKeys","count"],b=["put","add","delete","clear"],g=new Map;function m(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(g.get(t))return g.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=b.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!y.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,i?"readwrite":"readonly");let o=s.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&s.done]))[0]};return g.set(t,s),s}h(e=>({...e,get:(t,n,r)=>m(t,n)||e.get(t,n,r),has:(t,n)=>!!m(t,n)||e.has(t,n)}));const v=["continue","continuePrimaryKey","advance"],w={},A=new WeakMap,S=new WeakMap,_={get(e,t){if(!v.includes(t))return e[t];let n=w[t];return n||(n=w[t]=function(...e){A.set(this,S.get(this)[t](...e))}),n}};async function*I(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;const n=new Proxy(t,_);for(S.set(n,t),c.set(n,d(t));t;)yield n,t=await(A.get(n)||t.continue()),A.delete(n)}function P(e,t){return t===Symbol.asyncIterator&&r(e,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===t&&r(e,[IDBIndex,IDBObjectStore])}h(e=>({...e,get:(t,n,r)=>P(t,n)?I:e.get(t,n,r),has:(t,n)=>P(t,n)||e.has(t,n)}))},6419(e,t,n){n.d(t,{A:()=>o,C:()=>s});var r=n(99287),i=n(47739);function s(e){return(0,i.Ay)("MuiFab",e)}const o=(0,r.A)("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"])},8414(e,t,n){n.d(t,{A:()=>s});var r=n(63881),i=n(32118);const s=(0,r.A)((0,i.jsx)("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92"}),"Share")},10943(e,t,n){n.d(t,{Ay:()=>d,qy:()=>c,rf:()=>l});var r=n(42918),i=n(32571),s=n(32717),o=n(32118);const a="function"==typeof(0,i.Dp)({}),c=(e,t)=>({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%",...t&&!e.vars&&{colorScheme:e.palette.mode}}),l=e=>({color:(e.vars||e).palette.text.primary,...e.typography.body1,backgroundColor:(e.vars||e).palette.background.default,"@media print":{backgroundColor:(e.vars||e).palette.common.white}}),h=(e,t=!1)=>{const n={};t&&e.colorSchemes&&"function"==typeof e.getColorSchemeSelector&&Object.entries(e.colorSchemes).forEach(([t,r])=>{const i=e.getColorSchemeSelector(t);i.startsWith("@")?n[i]={":root":{colorScheme:r.palette?.mode}}:n[i.replace(/\s*&/,"")]={colorScheme:r.palette?.mode}});let r={html:c(e,t),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:{margin:0,...l(e),"&::backdrop":{backgroundColor:(e.vars||e).palette.background.default}},...n};const i=e.components?.MuiCssBaseline?.styleOverrides;return i&&(r=[r,i]),r},p="mui-ecs",u=(0,i.Dp)(a?({theme:e,enableColorScheme:t})=>h(e,t):({theme:e})=>(e=>{const t=h(e,!1),n=Array.isArray(t)?t[0]:t;return!e.vars&&n&&(n.html[`:root:has(${p})`]={colorScheme:e.palette.mode}),e.colorSchemes&&Object.entries(e.colorSchemes).forEach(([t,r])=>{const i=e.getColorSchemeSelector(t);i.startsWith("@")?n[i]={[`:root:not(:has(.${p}))`]:{colorScheme:r.palette?.mode}}:n[i.replace(/\s*&/,"")]={[`&:not(:has(.${p}))`]:{colorScheme:r.palette?.mode}}}),t})(e)),d=function(e){const t=(0,s.b)({props:e,name:"MuiCssBaseline"}),{children:n,enableColorScheme:i=!1}=t;return(0,o.jsxs)(r.Fragment,{children:[a&&(0,o.jsx)(u,{enableColorScheme:i}),!a&&!i&&(0,o.jsx)("span",{className:p,style:{display:"none"}}),n]})}},16876(e,t,n){n.d(t,{XK:()=>d,cy:()=>p,lk:()=>f});var r=n(78102),i=n(68988),s=n(93472);const o=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0},{property:"cause",enumerable:!1},{property:"errors",enumerable:!1}],a=new WeakSet;function c(e){const t=i.X.get(e);if(t)return t();const n=i.o.get(e)??Error;return"AggregateError"===e?new AggregateError([]):new n}function l(e){return!!e&&"object"==typeof e&&"string"==typeof e.name&&"string"==typeof e.message&&"string"==typeof e.stack}function h({from:e,seen:t,to:n,forceEnumerable:r,maxDepth:i,depth:s,useToJSON:p,serialize:u}){if(n||(n=Array.isArray(e)?[]:!u&&l(e)?c(e.name):{}),t.push(e),s>=i)return n;if(p&&"function"==typeof e.toJSON&&!a.has(e))return function(e){a.add(e);const t=e.toJSON();return a.delete(e),t}(e);const d=e=>h({from:e,seen:[...t],forceEnumerable:r,maxDepth:i,depth:s,useToJSON:p,serialize:u});for(const[r,i]of Object.entries(e))if(i&&i instanceof Uint8Array&&"Buffer"===i.constructor.name)n[r]=u?"[object Buffer]":i;else if(null===i||"object"!=typeof i||"function"!=typeof i.pipe)if("function"!=typeof i)if(i&&"object"==typeof i)t.includes(e[r])?n[r]="[Circular]":(s++,n[r]=d(e[r]));else try{n[r]=i}catch{}else u||(n[r]=i);else n[r]=u?"[object Stream]":i;if(u||n instanceof Error)for(const{property:t,enumerable:i}of o){const s=e[t];null!=s&&Object.defineProperty(n,t,{value:l(s)||Array.isArray(s)?d(s):s,enumerable:!!r||i,configurable:!0,writable:!0})}return n}function p(e,t={}){const{maxDepth:n=Number.POSITIVE_INFINITY}=t;return e instanceof Error?e:function(e){return!!e&&"object"==typeof e&&"string"==typeof e.message&&!Array.isArray(e)}(e)?h({from:e,seen:[],to:c(e.name??"Error"),maxDepth:n,depth:0,serialize:!1}):new s.A(e)}let u=0;class d extends r.A{constructor(e){super(),this.worker=e,this.calls=new Map,this.errors=new Map,this.worker.addEventListener("message",e=>{this.handler(e)}),this.worker.addEventListener("error",e=>{this.catch(e)})}handler(e){const{uid:t,error:n,method:r,eventName:i,data:s,libRpc:o}=e.data;o&&(n?this.reject(t,n):r?this.resolve(t,s):i&&this.emit(i,s))}catch(e){this.emit("error",{message:e.message,lineno:e.lineno,filename:e.filename})}reject(e,t){const n=this.errors.get(e);n&&(n(p(t)),this.clear(e))}resolve(e,t){const n=this.calls.get(e);n&&(n(t),this.clear(e))}clear(e){this.calls.delete(e),this.errors.delete(e)}call(e,t,{transferables:n=[]}={}){const r=String(++u);return new Promise((i,s)=>{this.calls.set(r,i),this.errors.set(r,s),this.worker.postMessage({method:e,uid:r,data:t,libRpc:!0},n)})}}function f(e,t){return{__rpcResult:!0,value:e,transferables:t}}},22416(e,t,n){n.d(t,{A:()=>s});var r=n(63881),i=n(32118);const s=(0,r.A)((0,i.jsx)("path",{d:"M2 20h20v-4H2zm2-3h2v2H4zM2 4v4h20V4zm4 3H4V5h2zm-4 7h20v-4H2zm2-3h2v2H4z"}),"Storage")},30155(e,t,n){n.d(t,{A:()=>s});var r=n(63881),i=n(32118);const s=(0,r.A)((0,i.jsx)("path",{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8"}),"Undo")},35466(e,t,n){n.d(t,{A:()=>m});var r=n(42918),i=n(77710),s=n(62981),o=n(41680),a=n(711),c=n(32717),l=n(88842),h=n(70668),p=n(58955),u=n(99287),d=n(47739);function f(e){return(0,d.Ay)("MuiAppBar",e)}(0,u.A)("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);var y=n(32118);const b=(e,t)=>e?`${e?.replace(")","")}, ${t})`:t,g=(0,o.Ay)(p.A,{name:"MuiAppBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${(0,l.A)(n.position)}`],t[`color${(0,l.A)(n.color)}`]]}})((0,a.A)(({theme:e})=>({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0,variants:[{props:{position:"fixed"},style:{position:"fixed",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}}},{props:{position:"absolute"},style:{position:"absolute",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"sticky"},style:{position:"sticky",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"static"},style:{position:"static"}},{props:{position:"relative"},style:{position:"relative"}},{props:{color:"inherit"},style:{"--AppBar-color":"inherit",color:"var(--AppBar-color)"}},{props:{color:"default"},style:{"--AppBar-background":e.vars?e.vars.palette.AppBar.defaultBg:e.palette.grey[100],"--AppBar-color":e.vars?e.vars.palette.text.primary:e.palette.getContrastText(e.palette.grey[100]),...e.applyStyles("dark",{"--AppBar-background":e.vars?e.vars.palette.AppBar.defaultBg:e.palette.grey[900],"--AppBar-color":e.vars?e.vars.palette.text.primary:e.palette.getContrastText(e.palette.grey[900])})}},...Object.entries(e.palette).filter((0,h.A)(["contrastText"])).map(([t])=>({props:{color:t},style:{"--AppBar-background":(e.vars??e).palette[t].main,"--AppBar-color":(e.vars??e).palette[t].contrastText}})),{props:e=>!0===e.enableColorOnDark&&!["inherit","transparent"].includes(e.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)"}},{props:e=>!1===e.enableColorOnDark&&!["inherit","transparent"].includes(e.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...e.applyStyles("dark",{backgroundColor:e.vars?b(e.vars.palette.AppBar.darkBg,"var(--AppBar-background)"):null,color:e.vars?b(e.vars.palette.AppBar.darkColor,"var(--AppBar-color)"):null})}},{props:{color:"transparent"},style:{"--AppBar-background":"transparent","--AppBar-color":"inherit",backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...e.applyStyles("dark",{backgroundImage:"none"})}}]}))),m=r.forwardRef(function(e,t){const n=(0,c.b)({props:e,name:"MuiAppBar"}),{className:r,color:o="primary",enableColorOnDark:a=!1,position:h="fixed",...p}=n,u={...n,color:o,position:h,enableColorOnDark:a},d=(e=>{const{color:t,position:n,classes:r}=e,i={root:["root",`color${(0,l.A)(t)}`,`position${(0,l.A)(n)}`]};return(0,s.A)(i,f,r)})(u);return(0,y.jsx)(g,{square:!0,component:"header",ownerState:u,elevation:4,className:(0,i.A)(d.root,r,"fixed"===h&&"mui-fixed"),ref:t,...p})})},35922(){},41673(e,t,n){n.d(t,{A:()=>s});var r=n(63881),i=n(32118);const s=(0,r.A)((0,i.jsx)("path",{d:"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7z"}),"Redo")},42126(e,t,n){n.d(t,{A:()=>s});var r=n(63881),i=n(32118);const s=(0,r.A)((0,i.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm-1 4 6 6v10c0 1.1-.9 2-2 2H7.99C6.89 23 6 22.1 6 21l.01-14c0-1.1.89-2 1.99-2zm-1 7h5.5L14 6.5z"}),"FileCopy")},63637(e,t,n){n.d(t,{A:()=>o});class r{}class i{constructor(){this.signals=new Set,this.abortController=new AbortController}addSignal(e=new r){if(this.signal.aborted)throw new Error("cannot add a signal, already aborted!");this.signals.add(e),e.aborted?this.handleAborted(e):"function"==typeof e.addEventListener&&e.addEventListener("abort",()=>{this.handleAborted(e)})}handleAborted(e){this.signals.delete(e),0===this.signals.size&&this.abortController.abort()}get signal(){return this.abortController.signal}abort(){this.abortController.abort()}}class s{constructor(){this.callbacks=new Set}addCallback(e=()=>{}){this.callbacks.add(e),this.currentMessage&&e(this.currentMessage)}callback(e){this.currentMessage=e;for(const t of this.callbacks)t(e)}}class o{constructor({fill:e,cache:t}){if("function"!=typeof e)throw new TypeError("must pass a fill function");if("object"!=typeof t)throw new TypeError("must pass a cache object");if("function"!=typeof t.get||"function"!=typeof t.set||"function"!=typeof t.delete)throw new TypeError("cache must implement get(key), set(key, val), and and delete(key)");this.cache=t,this.fillCallback=e}static isAbortException(e){return"AbortError"===e.name||"ERR_ABORTED"===e.code||"AbortError: aborted"===e.message||"Error: aborted"===e.message}evict(e,t){this.cache.get(e)===t&&this.cache.delete(e)}fill(e,t,n,r){const o=new i,a=new s;a.addCallback(r);const c={aborter:o,promise:this.fillCallback(t,o.signal,e=>{a.callback(e)}),settled:!1,statusReporter:a,get aborted(){return this.aborter.signal.aborted}};c.aborter.addSignal(n),c.aborter.signal.addEventListener("abort",()=>{c.settled||this.evict(e,c)}),c.promise.then(()=>{c.settled=!0},()=>{c.settled=!0,this.evict(e,c)}).catch(e=>{throw console.error(e),e}),this.cache.set(e,c)}static checkSinglePromise(e,t){function n(){if(t?.aborted)throw Object.assign(new Error("aborted"),{code:"ERR_ABORTED"})}return e.then(e=>(n(),e),e=>{throw n(),e})}has(e){return this.cache.has(e)}get(e,t,n,r){if(!n&&t instanceof AbortSignal)throw new TypeError("second get argument appears to be an AbortSignal, perhaps you meant to pass `null` for the fill data?");const i=this.cache.get(e);return i?i.aborted&&!i.settled?(this.evict(e,i),this.get(e,t,n,r)):i.settled?i.promise:(i.aborter.addSignal(n),i.statusReporter.addCallback(r),o.checkSinglePromise(i.promise,n)):(this.fill(e,t,n,r),o.checkSinglePromise(this.cache.get(e).promise,n))}delete(e){const t=this.cache.get(e);t&&(t.settled||t.aborter.abort(),this.cache.delete(e))}clear(){const e=this.cache.keys();let t=0;for(let n=e.next();!n.done;n=e.next())this.delete(n.value),t+=1;return t}}},64683(e,t,n){n.d(t,{A:()=>s});var r=n(63881),i=n(32118);const s=(0,r.A)((0,i.jsx)("path",{d:"M11 21H5c-1.1 0-2-.9-2-2V5c0-1.1.9-2 2-2h6zm2 0h6c1.1 0 2-.9 2-2v-7h-8zm8-11V5c0-1.1-.9-2-2-2h-6v7z"}),"SpaceDashboard")},68903(e,t,n){n.d(t,{A:()=>b});var r=n(42918),i=n(77710),s=n(62981),o=n(61302),a=n(88842),c=n(6419),l=n(62466),h=n(41680),p=n(711),u=n(70668),d=n(32717),f=n(32118);const y=(0,h.Ay)(o.A,{name:"MuiFab",slot:"Root",shouldForwardProp:e=>(0,l.A)(e)||"classes"===e,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`size${(0,a.A)(n.size)}`],"inherit"===n.color&&t.colorInherit,t[(0,a.A)(n.size)],t[n.color]]}})((0,p.A)(({theme:e})=>({...e.typography.button,minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(e.vars||e).zIndex.fab,boxShadow:(e.vars||e).shadows[6],"&:active":{boxShadow:(e.vars||e).shadows[12]},color:e.vars?e.vars.palette.grey[900]:e.palette.getContrastText?.(e.palette.grey[300]),backgroundColor:(e.vars||e).palette.grey[300],"&:hover":{backgroundColor:(e.vars||e).palette.grey.A100,"@media (hover: none)":{backgroundColor:(e.vars||e).palette.grey[300]},textDecoration:"none"},[`&.${c.A.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},variants:[{props:{size:"small"},style:{width:40,height:40}},{props:{size:"medium"},style:{width:48,height:48}},{props:{variant:"extended"},style:{borderRadius:24,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48}},{props:{variant:"extended",size:"small"},style:{width:"auto",padding:"0 8px",borderRadius:17,minWidth:34,height:34}},{props:{variant:"extended",size:"medium"},style:{width:"auto",padding:"0 16px",borderRadius:20,minWidth:40,height:40}},{props:{color:"inherit"},style:{color:"inherit"}}]})),(0,p.A)(({theme:e})=>({variants:[...Object.entries(e.palette).filter((0,u.A)(["dark","contrastText"])).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].contrastText,backgroundColor:(e.vars||e).palette[t].main,"&:hover":{backgroundColor:(e.vars||e).palette[t].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t].main}}}}))]})),(0,p.A)(({theme:e})=>({[`&.${c.A.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}))),b=r.forwardRef(function(e,t){const n=(0,d.b)({props:e,name:"MuiFab"}),{children:r,className:o,color:l="default",component:h="button",disabled:p=!1,disableFocusRipple:u=!1,focusVisibleClassName:b,size:g="large",variant:m="circular",...v}=n,w={...n,color:l,component:h,disabled:p,disableFocusRipple:u,size:g,variant:m},A=(e=>{const{color:t,variant:n,classes:r,size:i}=e,o={root:["root",n,`size${(0,a.A)(i)}`,"inherit"===t?"colorInherit":t]},l=(0,s.A)(o,c.C,r);return{...r,...l}})(w);return(0,f.jsx)(y,{className:(0,i.A)(A.root,o),component:h,disabled:p,focusRipple:!u,focusVisibleClassName:(0,i.A)(A.focusVisible,b),ownerState:w,ref:t,...v,classes:A,children:r})})},70942(e,t,n){n.d(t,{A:()=>s});var r=n(63881),i=n(32118);const s=(0,r.A)((0,i.jsx)("path",{d:"M5 4v2h14V4zm0 10h4v6h6v-6h4l-7-7z"}),"Publish")},80402(e,t,n){n.d(t,{A:()=>s});var r=n(63881),i=n(32118);const s=(0,r.A)((0,i.jsx)("path",{d:"M19 9h-4V3H9v6H5l7 7zM5 18v2h14v-2z"}),"GetApp")},85396(e,t,n){n.d(t,{A:()=>s});var r=n(63881),i=n(32118);const s=(0,r.A)((0,i.jsx)("path",{d:"M20.5 11H19V7c0-1.1-.9-2-2-2h-4V3.5C13 2.12 11.88 1 10.5 1S8 2.12 8 3.5V5H4c-1.1 0-1.99.9-1.99 2v3.8H3.5c1.49 0 2.7 1.21 2.7 2.7s-1.21 2.7-2.7 2.7H2V20c0 1.1.9 2 2 2h3.8v-1.5c0-1.49 1.21-2.7 2.7-2.7s2.7 1.21 2.7 2.7V22H17c1.1 0 2-.9 2-2v-4h1.5c1.38 0 2.5-1.12 2.5-2.5S21.88 11 20.5 11"}),"Extension")},94610(e,t,n){n.d(t,{P:()=>u});var r,i,s=n(42918),o=n(85752),a=n(41540),c="function"==typeof Symbol&&Symbol.for,l=null!==(i=null===(r=Object.getOwnPropertyDescriptor(function(){},"name"))||void 0===r?void 0:r.configurable)&&void 0!==i&&i,h=c?Symbol.for("react.forward_ref"):"function"==typeof s.forwardRef&&(0,s.forwardRef)(function(e){return null}).$$typeof,p=c?Symbol.for("react.memo"):"function"==typeof s.memo&&(0,s.memo)(function(e){return null}).$$typeof;function u(e,t){var n;if(p&&e.$$typeof===p)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");if((0,o.P)())return e;var r=null!==(n=null==t?void 0:t.forwardRef)&&void 0!==n&&n,i=e,c=e.displayName||e.name;if(h&&e.$$typeof===h&&(r=!0,"function"!=typeof(i=e.render)))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var u,f,y=function(e,t){return(0,a.q)(function(){return i(e,t)},c)};return y.displayName=e.displayName,l&&Object.defineProperty(y,"name",{value:e.name,writable:!0,configurable:!0}),e.contextTypes&&(y.contextTypes=e.contextTypes),r&&(y=(0,s.forwardRef)(y)),u=e,f=y=(0,s.memo)(y),Object.keys(u).forEach(function(e){d[e]||Object.defineProperty(f,e,Object.getOwnPropertyDescriptor(u,e))}),y}var d={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0}},96322(e,t,n){n.d(t,{A:()=>s});var r=n(63881),i=n(32118);const s=(0,r.A)((0,i.jsx)("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"}),"Launch")},98448(e,t,n){n.d(t,{A:()=>s});var r=n(63881),i=n(32118);const s=(0,r.A)((0,i.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings")},99226(e,t,n){n.r(t),n.d(t,{addDisposer:()=>M,addMiddleware:()=>_e,applyAction:()=>de,applyPatch:()=>d,applySnapshot:()=>m,cast:()=>U,castFlowReturn:()=>Ot,castToReferenceSnapshot:()=>G,castToSnapshot:()=>W,clone:()=>O,createActionTrackingMiddleware:()=>le,createActionTrackingMiddleware2:()=>pe,decorate:()=>Ie,destroy:()=>z,detach:()=>j,escapeJsonPath:()=>Ft,flow:()=>$t,getChildType:()=>h,getEnv:()=>F,getIdentifier:()=>k,getLivelinessChecking:()=>o,getMembers:()=>B,getNodeId:()=>J,getParent:()=>A,getParentOfType:()=>_,getPath:()=>P,getPathParts:()=>C,getPropertyMembers:()=>H,getRelativePath:()=>$,getRoot:()=>I,getRunningActionContext:()=>Ce,getSnapshot:()=>v,getType:()=>l,hasParent:()=>w,hasParentOfType:()=>S,isActionContextChildOf:()=>Ee,isActionContextThisOrChildOf:()=>xe,isAlive:()=>R,isArrayType:()=>nn,isFrozenType:()=>Hn,isIdentifierType:()=>Xn,isLateType:()=>Rn,isLiteralType:()=>In,isMapType:()=>qt,isModelType:()=>ln,isOptionalType:()=>Dn,isPrimitiveType:()=>An,isProtected:()=>g,isReferenceType:()=>Kn,isRefinementType:()=>Cn,isRoot:()=>T,isStateTreeNode:()=>Ue,isType:()=>oe,isUnionType:()=>xn,isValidReference:()=>N,joinJsonPath:()=>Ht,onAction:()=>ye,onPatch:()=>p,onSnapshot:()=>u,process:()=>et,protect:()=>y,recordActions:()=>fe,recordPatches:()=>f,resolveIdentifier:()=>x,resolvePath:()=>E,setDevMode:()=>Et,setLivelinessChecking:()=>s,setLivelynessChecking:()=>a,splitJsonPath:()=>Bt,t:()=>rr,toGenerator:()=>zt,toGeneratorFunction:()=>jt,tryReference:()=>V,tryResolve:()=>D,typecheck:()=>ze,types:()=>rr,unescapeJsonPath:()=>Lt,unprotect:()=>b,walk:()=>L});var r=n(38567);let i="warn";function s(e){i=e}function o(){return i}function a(e){s(e)}var c;function l(e){return We(e,1),Ge(e).type}function h(e,t){return We(e,1),Ge(e).getChildType(t)}function p(e,t){return We(e,1),kt(t,2),Ge(e).onPatch(t)}function u(e,t){return We(e,1),kt(t,2),Ge(e).onSnapshot(t)}function d(e,t){We(e,1),xt(t,e=>"object"==typeof e,"object or array",2),Ge(e).applyPatches(lt(t))}function f(e,t){We(e,1);const n={patches:[],inversePatches:[]},r={};let i;const s={get recording(){return!!i},get patches(){return r.patches||(r.patches=n.patches.slice()),r.patches},get reversedInversePatches(){return r.reversedInversePatches||(r.reversedInversePatches=n.inversePatches.slice().reverse()),r.reversedInversePatches},get inversePatches(){return r.inversePatches||(r.inversePatches=n.inversePatches.slice()),r.inversePatches},stop(){i&&(i(),i=void 0)},resume(){i||(i=p(e,(e,i)=>{t&&!t(e,i,Ce())||(n.patches.push(e),n.inversePatches.push(i),r.patches=void 0,r.inversePatches=void 0,r.reversedInversePatches=void 0)}))},replay(t){d(t||e,n.patches)},undo(t){d(t||e,n.inversePatches.slice().reverse())}};return s.resume(),s}function y(e){We(e,1);const t=Ge(e);if(!t.isRoot)throw st("`protect` can only be invoked on root nodes");t.isProtectionEnabled=!0}function b(e){We(e,1);const t=Ge(e);if(!t.isRoot)throw st("`unprotect` can only be invoked on root nodes");t.isProtectionEnabled=!1}function g(e){return Ge(e).isProtected}function m(e,t){return We(e,1),Ge(e).applySnapshot(t)}function v(e,t=!0){We(e,1);const n=Ge(e);return t?n.snapshot:dt(n.type.getSnapshot(n,!1))}function w(e,t=1){We(e,1),Vt(t,2,0);let n=Ge(e).parent;for(;n;){if(0===--t)return!0;n=n.parent}return!1}function A(e,t=1){We(e,1),Vt(t,2,0);let n=t,r=Ge(e).parent;for(;r;){if(0===--n)return r.storedValue;r=r.parent}throw st(`Failed to find the parent of ${Ge(e)} at depth ${t}`)}function S(e,t){We(e,1),ae(t,2);let n=Ge(e).parent;for(;n;){if(t.is(n.storedValue))return!0;n=n.parent}return!1}function _(e,t){We(e,1),ae(t,2);let n=Ge(e).parent;for(;n;){if(t.is(n.storedValue))return n.storedValue;n=n.parent}throw st(`Failed to find the parent of ${Ge(e)} of a given type`)}function I(e){return We(e,1),Ge(e).root.storedValue}function P(e){return We(e,1),Ge(e).path}function C(e){return We(e,1),Bt(Ge(e).path)}function T(e){return We(e,1),Ge(e).isRoot}function E(e,t){We(e,1),Nt(t,2);const n=qe(Ge(e),t);return n?n.value:void 0}function x(e,t,n){ae(e,1),We(t,2),xt(n,tr,"string or number (identifier)",3);const r=Ge(t).root.identifierCache.resolve(e,er(n));return r?.value}function k(e){return We(e,1),Ge(e).identifier}function V(e,t=!0){try{const n=e();if(null==n)return;if(Ue(n))return t?R(n)?n:void 0:n;throw st("The reference to be checked is not one of node, null or undefined")}catch(e){if(e instanceof Un)return;throw e}}function N(e,t=!0){try{const n=e();if(null==n)return!1;if(Ue(n))return!t||R(n);throw st("The reference to be checked is not one of node, null or undefined")}catch(e){if(e instanceof Un)return!1;throw e}}function D(e,t){We(e,1),Nt(t,2);const n=qe(Ge(e),t,!1);if(void 0!==n)try{return n.value}catch(e){return}}function $(e,t){return We(e,1),We(t,2),Ze(Ge(e),Ge(t))}function O(e,t=!0){We(e,1);const n=Ge(e);return n.type.create(n.snapshot,!0===t?n.root.environment:!1===t?void 0:t)}function j(e){return We(e,1),Ge(e).detach(),e}function z(e){We(e,1);const t=Ge(e);t.isRoot?t.die():t.parent.removeChild(t.subpath)}function R(e){return We(e,1),Ge(e).observableIsAlive}function M(e,t){return We(e,1),kt(t,2),Ge(e).addDisposer(t),t}function F(e){We(e,1);return Ge(e).root.environment||rt}function L(e,t){We(e,1),kt(t,2);const n=Ge(e);n.getChildren().forEach(e=>{Ue(e.storedValue)&&L(e.storedValue,t)}),t(n.storedValue)}function H(e){let t;return t=Ue(e)?l(e):e,xt(t,e=>ln(e),"model type or model instance",1),{name:t.name,properties:{...t.properties}}}function B(e){const t={...H(Ge(e).type),actions:[],volatile:[],views:[],flowActions:[]};return Object.getOwnPropertyNames(e).forEach(n=>{if(n in t.properties)return;const i=Object.getOwnPropertyDescriptor(e,n);i.get?(0,r.isComputedProp)(e,n)?t.views.push(n):t.volatile.push(n):(!0===i.value._isFlowAction&&t.flowActions.push(n),!0===i.value._isMSTAction?t.actions.push(n):(0,r.isObservableProp)(e,n)?t.volatile.push(n):t.views.push(n))}),t}function U(e){return e}function W(e){return e}function G(e){return e}function J(e){return We(e,1),Ge(e).nodeId}!function(e){e.afterCreate="afterCreate",e.afterAttach="afterAttach",e.afterCreationFinalization="afterCreationFinalization",e.beforeDetach="beforeDetach",e.beforeDestroy="beforeDestroy"}(c||(c={}));class Y{type;environment;_escapedSubpath;_subpath;get subpath(){return this._subpath}_subpathUponDeath;get subpathUponDeath(){return this._subpathUponDeath}_pathUponDeath;get pathUponDeath(){return this._pathUponDeath}storedValue;get value(){return this.type.getValue(this)}aliveAtom;_state=Be.INITIALIZING;get state(){return this._state}set state(e){const t=this.isAlive;this._state=e;const n=this.isAlive;this.aliveAtom&&t!==n&&this.aliveAtom.reportChanged()}_hookSubscribers;fireInternalHook(e){this._hookSubscribers&&this._hookSubscribers.emit(e,this,e)}registerHook(e,t){return this._hookSubscribers||(this._hookSubscribers=new wt),this._hookSubscribers.register(e,t)}_parent;get parent(){return this._parent}constructor(e,t,n,r){this.type=e,this.environment=r,this.environment=r,this.baseSetParent(t,n)}getReconciliationType(){return this.type}pathAtom;baseSetParent(e,t){this._parent=e,this._subpath=t,this._escapedSubpath=void 0,this.pathAtom&&this.pathAtom.reportChanged()}get path(){return this.getEscapedPath(!0)}getEscapedPath(e){return e&&(this.pathAtom||(this.pathAtom=(0,r.createAtom)("path")),this.pathAtom.reportObserved()),this.parent?(void 0===this._escapedSubpath&&(this._escapedSubpath=this._subpath?Ft(this._subpath):""),this.parent.getEscapedPath(e)+"/"+this._escapedSubpath):""}get isRoot(){return null===this.parent}get isAlive(){return this.state!==Be.DEAD}get isDetaching(){return this.state===Be.DETACHING}get observableIsAlive(){return this.aliveAtom||(this.aliveAtom=(0,r.createAtom)("alive")),this.aliveAtom.reportObserved(),this.isAlive}baseFinalizeCreation(e){if(Tt()&&!this.isAlive)throw st("assertion failed: cannot finalize the creation of a node that is already dead");if(this.state===Be.CREATED){if(this.parent){if(this.parent.state!==Be.FINALIZED)return;this.fireHook(c.afterAttach)}this.state=Be.FINALIZED,e&&e()}}baseFinalizeDeath(){this._hookSubscribers&&this._hookSubscribers.clearAll(),this._subpathUponDeath=this._subpath,this._pathUponDeath=this.getEscapedPath(!1),this.baseSetParent(null,""),this.state=Be.DEAD}baseAboutToDie(){this.fireHook(c.beforeDestroy)}}class K extends Y{constructor(e,t,n,r,i){super(e,t,n,r);try{this.storedValue=e.createNewInstance(i)}catch(e){throw this.state=Be.DEAD,e}this.state=Be.CREATED,this.finalizeCreation()}get root(){if(!this.parent)throw st("This scalar node is not part of a tree");return this.parent.root}setParent(e,t){const n=this.parent!==e,r=this.subpath!==t;if(n||r){if(Tt()){if(!t)throw st("assertion failed: subpath expected");if(!e)throw st("assertion failed: parent expected");if(n)throw st("assertion failed: scalar nodes cannot change their parent")}this.environment=void 0,this.baseSetParent(this.parent,t)}}get snapshot(){return dt(this.getSnapshot())}getSnapshot(){return this.type.getSnapshot(this)}toString(){const e=(this.isAlive?this.path:this.pathUponDeath)||"<root>";return`${this.type.name}@${e}${this.isAlive?"":" [dead]"}`}die(){this.isAlive&&this.state!==Be.DETACHING&&(this.aboutToDie(),this.finalizeDeath())}finalizeCreation(){this.baseFinalizeCreation()}aboutToDie(){this.baseAboutToDie()}finalizeDeath(){this.baseFinalizeDeath()}fireHook(e){this.fireInternalHook(e)}}K.prototype.die=(0,r.action)(K.prototype.die);let Z=1;const q={onError(e){throw e}};class Q extends Y{nodeId=++Z;identifierAttribute;identifier;unnormalizedIdentifier;identifierCache;isProtectionEnabled=!0;middlewares;hasSnapshotPostProcessor=!1;_applyPatches;applyPatches(e){this.createObservableInstanceIfNeeded(),this._applyPatches(e)}_applySnapshot;applySnapshot(e){this.createObservableInstanceIfNeeded(),this._applySnapshot(e)}_autoUnbox=!0;_isRunningAction=!1;_hasSnapshotReaction=!1;_observableInstanceState=0;_childNodes;_initialSnapshot;_cachedInitialSnapshot;_cachedInitialSnapshotCreated=!1;_snapshotComputed;constructor(e,t,n,i,s){if(super(e,t,n,i),this._snapshotComputed=(0,r.computed)(()=>dt(this.getSnapshot())),this.unbox=this.unbox.bind(this),this._initialSnapshot=dt(s),this.identifierAttribute=e.identifierAttribute,t||(this.identifierCache=new Me),this._childNodes=e.initializeChildNodes(this,this._initialSnapshot),this.identifier=null,this.unnormalizedIdentifier=null,this.identifierAttribute&&this._initialSnapshot){let e=this._initialSnapshot[this.identifierAttribute];if(void 0===e){const t=this._childNodes[this.identifierAttribute];t&&(e=t.value)}if("string"!=typeof e&&"number"!=typeof e)throw st(`Instance identifier '${this.identifierAttribute}' for type '${this.type.name}' must be a string or a number`);this.identifier=er(e),this.unnormalizedIdentifier=e}t?t.root.identifierCache.addNodeToCache(this):this.identifierCache.addNodeToCache(this)}createObservableInstanceIfNeeded(e=!0){0===this._observableInstanceState&&this.createObservableInstance(e)}createObservableInstance(e=!0){if(Tt()&&this.state!==Be.INITIALIZING)throw st("assertion failed: the creation of the observable instance must be done on the initializing phase");this._observableInstanceState=1;const t=[];let n=this.parent;for(;n&&0===n._observableInstanceState;)t.unshift(n),n=n.parent;for(const e of t)e.createObservableInstanceIfNeeded(!1);const r=this.type;try{this.storedValue=r.createNewInstance(this._childNodes),this.preboot(),this._isRunningAction=!0,r.finalizeNewInstance(this,this.storedValue)}catch(e){throw this.state=Be.DEAD,e}finally{this._isRunningAction=!1}if(this._observableInstanceState=2,this._snapshotComputed.trackAndCompute(),this.isRoot&&this._addSnapshotReaction(),this._childNodes=rt,this.state=Be.CREATED,e){this.fireHook(c.afterCreate),this.finalizeCreation();for(const e of t.reverse())e.fireHook(c.afterCreate),e.finalizeCreation()}}get root(){const e=this.parent;return e?e.root:this}clearParent(){if(!this.parent)return;this.fireHook(c.beforeDetach);const e=this.state;this.state=Be.DETACHING;const t=this.root,n=t.environment,r=t.identifierCache.splitCache(this);try{this.parent.removeChild(this.subpath),this.baseSetParent(null,""),this.environment=n,this.identifierCache=r}finally{this.state=e}}setParent(e,t){const n=e!==this.parent,r=t!==this.subpath;if(n||r){if(Tt()){if(!t)throw st("assertion failed: subpath expected");if(!e)throw st("assertion failed: new parent expected");if(this.parent&&n)throw st(`A node cannot exists twice in the state tree. Failed to add ${this} to path '${e.path}/${t}'.`);if(!this.parent&&e.root===this)throw st(`A state tree is not allowed to contain itself. Cannot assign ${this} to path '${e.path}/${t}'`);if(!this.parent&&this.environment&&this.environment!==e.root.environment)throw st("A state tree cannot be made part of another state tree as long as their environments are different.")}n?(this.environment=void 0,e.root.identifierCache.mergeCache(this),this.baseSetParent(e,t),this.fireHook(c.afterAttach)):r&&this.baseSetParent(this.parent,t)}}fireHook(e){this.fireInternalHook(e);const t=this.storedValue&&"object"==typeof this.storedValue&&this.storedValue[e];"function"==typeof t&&(r._allowStateChangesInsideComputed?(0,r._allowStateChangesInsideComputed)(()=>{t.apply(this.storedValue)}):t.apply(this.storedValue))}_snapshotUponDeath;get snapshot(){return this.hasSnapshotPostProcessor&&this.createObservableInstanceIfNeeded(),this._snapshotComputed.get()}getSnapshot(){return this.isAlive?2===this._observableInstanceState?this._getActualSnapshot():this._getCachedInitialSnapshot():this._snapshotUponDeath}_getActualSnapshot(){return this.type.getSnapshot(this)}_getCachedInitialSnapshot(){if(!this._cachedInitialSnapshotCreated){const e=this.type,t=this._childNodes,n=this._initialSnapshot;this._cachedInitialSnapshot=e.processInitialSnapshot(t,n),this._cachedInitialSnapshotCreated=!0}return this._cachedInitialSnapshot}isRunningAction(){return!!this._isRunningAction||!this.isRoot&&this.parent.isRunningAction()}assertAlive(e){const t=o();if(!this.isAlive&&"ignore"!==t){const n=this._getAssertAliveError(e);switch(t){case"error":throw st(n);case"warn":It(n)}}}_getAssertAliveError(e){const t=this.getEscapedPath(!1)||this.pathUponDeath||"",n=e.subpath&&Ft(e.subpath)||"";let r=e.actionContext||me();r&&"action"!==r.type&&r.parentActionEvent&&(r=r.parentActionEvent);let i="";return r&&null!=r.name&&(i=`${r&&r.context&&P(r.context)||t}.${r.name}()`),`You are trying to read or write to an object that is no longer part of a state tree. (Object type: '${this.type.name}', Path upon death: '${t}', Subpath: '${n}', Action: '${i}'). Either detach nodes first, or don't use objects after removing / replacing them in the tree.`}getChildNode(e){this.assertAlive({subpath:e}),this._autoUnbox=!1;try{return 2===this._observableInstanceState?this.type.getChildNode(this,e):this._childNodes[e]}finally{this._autoUnbox=!0}}getChildren(){this.assertAlive(rt),this._autoUnbox=!1;try{return 2===this._observableInstanceState?this.type.getChildren(this):Xe(this._childNodes)}finally{this._autoUnbox=!0}}getChildType(e){return this.type.getChildType(e)}get isProtected(){return this.root.isProtectionEnabled}assertWritable(e){if(this.assertAlive(e),!this.isRunningAction()&&this.isProtected)throw st(`Cannot modify '${this}', the object is protected and can only be modified by using an action.`)}removeChild(e){this.type.removeChild(this,e)}unbox(e){return e?(this.assertAlive({subpath:e.subpath||e.subpathUponDeath}),this._autoUnbox?e.value:e):e}toString(){const e=(this.isAlive?this.path:this.pathUponDeath)||"<root>",t=this.identifier?`(id: ${this.identifier})`:"";return`${this.type.name}@${e}${t}${this.isAlive?"":" [dead]"}`}finalizeCreation(){this.baseFinalizeCreation(()=>{for(const e of this.getChildren())e.finalizeCreation();this.fireInternalHook(c.afterCreationFinalization)})}detach(){if(!this.isAlive)throw st("Error while detaching, node is not alive.");this.clearParent()}preboot(){const e=this;this._applyPatches=Se(this.storedValue,"@APPLY_PATCHES",t=>{t.forEach(t=>{if(!t.path)return void e.type.applySnapshot(e,t.value);const n=Bt(t.path);Qe(e,n.slice(0,-1)).applyPatchLocally(n[n.length-1],t)})}),this._applySnapshot=Se(this.storedValue,"@APPLY_SNAPSHOT",t=>{if(t!==e.snapshot)return e.type.applySnapshot(e,t)}),gt(this.storedValue,"$treenode",this),gt(this.storedValue,"toJSON",Ye)}die(){this.isAlive&&this.state!==Be.DETACHING&&(this.aboutToDie(),this.finalizeDeath())}aboutToDie(){0!==this._observableInstanceState&&(this.getChildren().forEach(e=>{e.aboutToDie()}),this.baseAboutToDie(),this._internalEventsEmit("dispose"),this._internalEventsClear("dispose"))}finalizeDeath(){this.getChildren().forEach(e=>{e.finalizeDeath()}),this.root.identifierCache.notifyDied(this);const e=this.snapshot;this._snapshotUponDeath=e,this._internalEventsClearAll(),this.baseFinalizeDeath()}onSnapshot(e){return this._addSnapshotReaction(),this._internalEventsRegister("snapshot",e)}emitSnapshot(e){this._internalEventsEmit("snapshot",e)}onPatch(e){return this._internalEventsRegister("patch",e)}emitPatch(e,t){if(this._internalEventsHasSubscribers("patch")){const n=function(e,...t){for(let n=0;n<t.length;n++){const r=t[n];for(const t in r)e[t]=r[t]}return e}({},e,{path:t.path.substr(this.path.length)+"/"+e.path}),[r,i]=function(e){if(!("oldValue"in e))throw st("Patches without `oldValue` field cannot be inversed");return[Rt(e),Mt(e)]}(n);this._internalEventsEmit("patch",r,i)}this.parent&&this.parent.emitPatch(e,t)}hasDisposer(e){return this._internalEventsHas("dispose",e)}addDisposer(e){if(this.hasDisposer(e))throw st("cannot add a disposer when it is already registered for execution");this._internalEventsRegister("dispose",e,!0)}removeDisposer(e){if(!this._internalEventsHas("dispose",e))throw st("cannot remove a disposer which was never registered for execution");this._internalEventsUnregister("dispose",e)}removeMiddleware(e){if(this.middlewares){const t=this.middlewares.indexOf(e);t>=0&&this.middlewares.splice(t,1)}}addMiddleWare(e,t=!0){const n={handler:e,includeHooks:t};return this.middlewares?this.middlewares.push(n):this.middlewares=[n],()=>{this.removeMiddleware(n)}}applyPatchLocally(e,t){this.assertWritable({subpath:e}),this.createObservableInstanceIfNeeded(),this.type.applyPatchLocally(this,e,t)}_addSnapshotReaction(){if(!this._hasSnapshotReaction){const e=(0,r.reaction)(()=>this.snapshot,e=>this.emitSnapshot(e),q);this.addDisposer(e),this._hasSnapshotReaction=!0}}_internalEvents;_internalEventsHasSubscribers(e){return!!this._internalEvents&&this._internalEvents.hasSubscribers(e)}_internalEventsRegister(e,t,n=!1){return this._internalEvents||(this._internalEvents=new wt),this._internalEvents.register(e,t,n)}_internalEventsHas(e,t){return!!this._internalEvents&&this._internalEvents.has(e,t)}_internalEventsUnregister(e,t){this._internalEvents&&this._internalEvents.unregister(e,t)}_internalEventsEmit(e,...t){this._internalEvents&&this._internalEvents.emit(e,...t)}_internalEventsClear(e){this._internalEvents&&this._internalEvents.clear(e)}_internalEventsClearAll(){this._internalEvents&&this._internalEvents.clearAll()}}Q.prototype.createObservableInstance=(0,r.action)(Q.prototype.createObservableInstance),Q.prototype.detach=(0,r.action)(Q.prototype.detach),Q.prototype.die=(0,r.action)(Q.prototype.die);const X=new WeakMap;var ee;!function(e){e[e.String=1]="String",e[e.Number=2]="Number",e[e.Boolean=4]="Boolean",e[e.Date=8]="Date",e[e.Literal=16]="Literal",e[e.Array=32]="Array",e[e.Map=64]="Map",e[e.Object=128]="Object",e[e.Frozen=256]="Frozen",e[e.Optional=512]="Optional",e[e.Reference=1024]="Reference",e[e.Identifier=2048]="Identifier",e[e.Late=4096]="Late",e[e.Refinement=8192]="Refinement",e[e.Union=16384]="Union",e[e.Null=32768]="Null",e[e.Undefined=65536]="Undefined",e[e.Integer=131072]="Integer",e[e.Custom=262144]="Custom",e[e.SnapshotProcessor=524288]="SnapshotProcessor",e[e.Lazy=1048576]="Lazy",e[e.Finite=2097152]="Finite",e[e.Float=4194304]="Float"}(ee||(ee={}));const te="cannotDetermine",ne=Symbol("$type");class re{[ne];C;S;T;N;isType=!0;name;constructor(e){this.name=e}create(e,t){return je(this,e),this.instantiate(null,"",t,e).value}getSnapshot(e,t){throw st("unimplemented method")}isAssignableFrom(e){return e===this}validate(e,t){if(Je(e)){const n=l(e);return this.isAssignableFrom(n)?$e():Oe(t,e)}if("object"==typeof e&&null!==e&&1===t.length){const t=X.get(e);if(t){const e=t.get(this);if(void 0!==e)return e}}const n=this.isValidSnapshot(e,t);if("object"==typeof e&&null!==e&&1===t.length){let t=X.get(e);t||(t=new WeakMap,X.set(e,t)),t.set(this,n)}return n}is(e){return 0===this.validate(e,[{path:"",type:this}]).length}get Type(){throw st("Factory.Type should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.Type`")}get TypeWithoutSTN(){throw st("Factory.TypeWithoutSTN should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.TypeWithoutSTN`")}get SnapshotType(){throw st("Factory.SnapshotType should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.SnapshotType`")}get CreationType(){throw st("Factory.CreationType should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.CreationType`")}}re.prototype.create=(0,r.action)(re.prototype.create);class ie extends re{identifierAttribute;constructor(e){super(e)}create(e=this.getDefaultSnapshot(),t){return super.create(e,t)}getValue(e){return e.createObservableInstanceIfNeeded(),e.storedValue}isMatchingSnapshotId(e,t){return!e.identifierAttribute||e.identifier===er(t[e.identifierAttribute])}tryToReconcileNode(e,t){return!(e.isDetaching||e.snapshot!==t&&(!Ue(t)||Ge(t)!==e)&&(e.type!==this||!pt(t)||Ue(t)||!this.isMatchingSnapshotId(e,t)||(e.applySnapshot(t),0)))}reconcile(e,t,n,r){if(this.tryToReconcileNode(e,t))return e.setParent(n,r),e;if(e.die(),Ue(t)&&this.isAssignableFrom(l(t))){const e=Ge(t);return e.setParent(n,r),e}return this.instantiate(n,r,void 0,t)}getSubTypes(){return null}}ie.prototype.create=(0,r.action)(ie.prototype.create);class se extends re{createNewInstance(e){return e}getValue(e){return e.storedValue}getSnapshot(e){return e.storedValue}reconcile(e,t,n,r){if(!e.isDetaching&&e.type===this&&e.storedValue===t)return e;const i=this.instantiate(n,r,void 0,t);return e.die(),i}getSubTypes(){return null}}function oe(e){return"object"==typeof e&&e&&!0===e.isType}function ae(e,t){xt(e,oe,"mobx-state-tree type",t)}const ce=new Map;function le(e){return function(t,n,r){switch(t.type){case"action":if(e.filter&&!0!==e.filter(t))return n(t);{const r=e.onStart(t);e.onResume(t,r),ce.set(t.id,{call:t,context:r,async:!1});try{const i=n(t);return e.onSuspend(t,r),!1===ce.get(t.id).async&&(ce.delete(t.id),e.onSuccess(t,r,i)),i}catch(n){throw ce.delete(t.id),e.onFail(t,r,n),n}}case"flow_spawn":return ce.get(t.rootId).async=!0,n(t);case"flow_resume":case"flow_resume_error":{const r=ce.get(t.rootId);e.onResume(t,r.context);try{return n(t)}finally{e.onSuspend(t,r.context)}}case"flow_throw":{const r=ce.get(t.rootId);return ce.delete(t.rootId),e.onFail(t,r.context,t.args[0]),n(t)}case"flow_return":{const r=ce.get(t.rootId);return ce.delete(t.rootId),e.onSuccess(t,r.context,t.args[0]),n(t)}}}}class he{hooks;call;flowsPending=0;running=!0;constructor(e,t){this.hooks=e,this.call=t,e&&e.onStart(t)}finish(e){this.running&&(this.running=!1,this.hooks&&this.hooks.onFinish(this.call,e))}incFlowsPending(){this.flowsPending++}decFlowsPending(){this.flowsPending--}get hasFlowsPending(){return this.flowsPending>0}}function pe(e){const t=new Map;return function(n,r){const i=n.parentActionEvent?t.get(n.parentActionEvent.id):void 0;if("action"===n.type){const s={...n,env:i&&i.call.env,parentCall:i&&i.call},o=!e.filter||e.filter(s),a=new he(o?e:void 0,s);let c;t.set(n.id,a);try{c=r(n)}catch(e){throw t.delete(n.id),a.finish(e),e}return a.hasFlowsPending||(t.delete(n.id),a.finish()),c}if(!i)return r(n);switch(n.type){case"flow_spawn":return i.incFlowsPending(),r(n);case"flow_resume":case"flow_resume_error":return r(n);case"flow_throw":{const e=n.args[0];try{return r(n)}finally{i.decFlowsPending(),i.hasFlowsPending||(t.delete(n.parentActionEvent.id),i.finish(e))}}case"flow_return":try{return r(n)}finally{i.decFlowsPending(),i.hasFlowsPending||(t.delete(n.parentActionEvent.id),i.finish())}}}}function ue(e){return{$MST_UNSERIALIZABLE:!0,type:e}}function de(e,t){We(e,1),xt(t,e=>"object"==typeof e,"object or array",2),(0,r.runInAction)(()=>{lt(t).forEach(t=>function(e,t){const n=D(e,t.path||"");if(!n)throw st(`Invalid action path: ${t.path||""}`);const r=Ge(n);if("@APPLY_PATCHES"===t.name)return d.call(null,n,t.args[0]);if("@APPLY_SNAPSHOT"===t.name)return m.call(null,n,t.args[0]);if("function"!=typeof n[t.name])throw st(`Action '${t.name}' does not exist in '${r.path}'`);return n[t.name].apply(n,t.args?t.args.map(e=>{return(t=e)&&"object"==typeof t&&"$MST_DATE"in t?new Date(t.$MST_DATE):t;var t}):[])}(e,t))})}function fe(e,t){We(e,1);const n=[],r=e=>{(!t||t(e,Ce()))&&n.push(e)};let i;const s={actions:n,get recording(){return!!i},stop(){i&&(i(),i=void 0)},resume(){i||(i=ye(e,r))},replay(e){de(e,n)}};return s.resume(),s}function ye(e,t,n=!1){return We(e,1),Tt()&&(T(e)||It("Warning: Attaching onAction listeners to non root nodes is dangerous: No events will be emitted for actions initiated higher up in the tree."),g(e)||It("Warning: Attaching onAction listeners to non protected nodes is dangerous: No events will be emitted for direct modifications without action.")),_e(e,function(r,i){if("action"===r.type&&r.id===r.rootId){const s=Ge(r.context),o={name:r.name,path:Ze(Ge(e),s),args:r.args.map((e,t)=>function(e,t,n,r){if(r instanceof Date)return{$MST_DATE:r.getTime()};if(ut(r))return r;if(Ue(r))return ue(`[MSTNode: ${l(r).name}]`);if("function"==typeof r)return ue("[function]");if("object"==typeof r&&!ht(r)&&!ct(r))return ue(`[object ${r&&r.constructor&&r.constructor.name||"Complex Object"}]`);try{return JSON.stringify(r),r}catch(e){return ue(""+e)}}(0,r.name,0,e))};if(n){const e=i(r);return t(o),e}return t(o),i(r)}return i(r)})}let be,ge=1;function me(){return be}function ve(){return ge++}function we(e,t){const n=Ge(e.context);"action"===e.type&&n.assertAlive({actionContext:e});const i=n._isRunningAction;n._isRunningAction=!0;const s=be;be=e;try{return function(e,t,n){const i=new Pe(e,n);if(i.isEmpty)return(0,r.action)(n).apply(null,t.args);let s=null;return function e(t){const o=i.getNextMiddleware(),a=o&&o.handler;if(!a)return(0,r.action)(n).apply(null,t.args);if(!o.includeHooks&&c[t.name])return e(t);let l=!1,h=!1;if(a(t,function(t,n){l=!0,s=e(t),n&&(s=n(s))},function(e){h=!0,s=e}),Tt()){if(!l&&!h){const e=Ge(t.tree);throw st(`Neither the next() nor the abort() callback within the middleware ${a.name} for the action: "${t.name}" on the node: ${e.type.name} was invoked.`)}if(l&&h){const e=Ge(t.tree);throw st(`The next() and abort() callback within the middleware ${a.name} for the action: "${t.name}" on the node: ${e.type.name} were invoked.`)}}return s}(t)}(n,e,t)}finally{be=s,n._isRunningAction=i}}function Ae(e){if(e)return"action"===e.type?e:e.parentActionEvent}function Se(e,t,n){const r=function(){const r=ve(),i=be,s=Ae(i);return we({type:"action",name:t,id:r,args:At(arguments),context:e,tree:I(e),rootId:i?i.rootId:r,parentId:i?i.id:0,allParentIds:i?[...i.allParentIds,i.id]:[],parentEvent:i,parentActionEvent:s},n)};return r._isMSTAction=!0,r._isFlowAction=n._isFlowAction,r}function _e(e,t,n=!0){const r=Ge(e);return Tt()&&(r.isProtectionEnabled||It("It is recommended to protect the state tree before attaching action middleware, as otherwise it cannot be guaranteed that all changes are passed through middleware. See `protect`")),r.addMiddleWare(t,n)}function Ie(e,t,n=!0){const r={handler:e,includeHooks:n};return t.$mst_middleware=t.$mst_middleware||[],t.$mst_middleware.push(r),t}class Pe{arrayIndex=0;inArrayIndex=0;middlewares=[];constructor(e,t){t.$mst_middleware&&this.middlewares.push(t.$mst_middleware);let n=e;for(;n;)n.middlewares&&this.middlewares.push(n.middlewares),n=n.parent}get isEmpty(){return this.middlewares.length<=0}getNextMiddleware(){const e=this.middlewares[this.arrayIndex];if(!e)return;return e[this.inArrayIndex++]||(this.arrayIndex++,this.inArrayIndex=0,this.getNextMiddleware())}}function Ce(){let e=me();for(;e&&"action"!==e.type;)e=e.parentActionEvent;return e}function Te(e,t,n){const r="number"==typeof t?t:t.id;let i=n?e:e.parentActionEvent;for(;i;){if(i.id===r)return!0;i=i.parentActionEvent}return!1}function Ee(e,t){return Te(e,t,!1)}function xe(e,t){return Te(e,t,!0)}function ke(e){return"function"==typeof e?`<function${e.name?" "+e.name:""}>`:Ue(e)?`<${e}>`:`\`${function(e){try{return JSON.stringify(e)}catch(e){return`<Unserializable: ${e}>`}}(e)}\``}function Ve(e){const{value:t}=e,n=e.context[e.context.length-1].type,r=e.context.map(({path:e})=>e).filter(e=>e.length>0).join("/"),i=r.length>0?`at path "/${r}" `:"",s=Ue(t)?`value of type ${Ge(t).type.name}:`:ut(t)?"value":"snapshot",o=n&&Ue(t)&&n.is(Ge(t).snapshot);return`${i}${s} ${ke(t)} is not assignable ${n?`to type: \`${n.name}\``:""}`+(e.message?` (${e.message})`:"")+(n?An(n)||ut(t)?".":`, expected an instance of \`${n.name}\` or a snapshot like \`${n.describe()}\` instead.`+(o?" (Note that a snapshot of the provided value is compatible with the targeted type)":""):".")}function Ne(e,t,n){return e.push({path:t,type:n}),e}function De(e){e.pop()}function $e(){return nt}function Oe(e,t,n){return[{context:e.slice(),value:t,message:n}]}function je(e,t){Pt()&&ze(e,t)}function ze(e,t){const n=e.validate(t,[{path:"",type:e}]);if(n.length>0)throw st(function(e,t,n){var r;if(0!==n.length)return`Error while converting ${r=ke(t),r.length<280?r:`${r.substring(0,272)}......${r.substring(r.length-8)}`} to \`${e.name}\`:\n\n    `+n.map(Ve).join("\n    ")}(e,t,n))}let Re=0;class Me{cacheId=Re++;cache=r.observable.map();lastCacheModificationPerId=r.observable.map();constructor(){}updateLastCacheModificationPerId(e){const t=this.lastCacheModificationPerId.get(e);this.lastCacheModificationPerId.set(e,void 0===t?1:t+1)}getLastCacheModificationPerId(e){const t=this.lastCacheModificationPerId.get(e)||0;return`${this.cacheId}-${t}`}addNodeToCache(e,t=!0){if(e.identifierAttribute){const n=e.identifier;this.cache.has(n)||this.cache.set(n,r.observable.array([],it));const i=this.cache.get(n);if(-1!==i.indexOf(e))throw st("Already registered");i.push(e),t&&this.updateLastCacheModificationPerId(n)}}mergeCache(e){(0,r.values)(e.identifierCache.cache).forEach(e=>e.forEach(e=>{this.addNodeToCache(e)}))}notifyDied(e){if(e.identifierAttribute){const t=e.identifier,n=this.cache.get(t);n&&(n.remove(e),n.length||this.cache.delete(t),this.updateLastCacheModificationPerId(e.identifier))}}splitCache(e){const t=new Me,n=e.path+"/";return(0,r.entries)(this.cache).forEach(([r,i])=>{let s=!1;for(let o=i.length-1;o>=0;o--){const a=i[o];a!==e&&0!==a.path.indexOf(n)||(t.addNodeToCache(a,!1),i.splice(o,1),i.length||this.cache.delete(r),s=!0)}s&&this.updateLastCacheModificationPerId(r)}),t}has(e,t){const n=this.cache.get(t);return!!n&&n.some(t=>e.isAssignableFrom(t.type))}resolve(e,t){const n=this.cache.get(t);if(!n)return null;const r=n.filter(t=>e.isAssignableFrom(t.type));switch(r.length){case 0:return null;case 1:return r[0];default:throw st(`Cannot resolve a reference to type '${e.name}' with id: '${t}' unambigously, there are multiple candidates: ${r.map(e=>e.path).join(", ")}`)}}}function Fe(e,t,n,r,i){const s=Je(i);if(s){if(s.parent)throw st(`Cannot add an object to a state tree if it is already part of the same or another state tree. Tried to assign an object to '${t?t.path:""}/${n}', but it lives already at '${s.path}'`);return t&&s.setParent(t,n),s}return new Q(e,t,n,r,i)}function Le(e,t,n,r,i){return new K(e,t,n,r,i)}function He(e){return e instanceof K||e instanceof Q}var Be;function Ue(e){return!(!e||!e.$treenode)}function We(e,t){xt(e,Ue,"mobx-state-tree node",t)}function Ge(e){if(!Ue(e))throw st(`Value ${e} is no MST Node`);return e.$treenode}function Je(e){return e&&e.$treenode||null}function Ye(){return Ge(this).snapshot}!function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CREATED=1]="CREATED",e[e.FINALIZED=2]="FINALIZED",e[e.DETACHING=3]="DETACHING",e[e.DEAD=4]="DEAD"}(Be||(Be={}));const Ke=e=>"..";function Ze(e,t){if(e.root!==t.root)throw st(`Cannot calculate relative path: objects '${e}' and '${t}' are not part of the same object tree`);const n=Bt(e.path),r=Bt(t.path);let i=0;for(;i<n.length&&n[i]===r[i];i++);return n.slice(i).map(Ke).join("/")+Ht(r.slice(i))}function qe(e,t,n=!0){return Qe(e,Bt(t),n)}function Qe(e,t,n=!0){let r=e;try{for(let e=0;e<t.length;e++){const n=t[e];if(".."===n){if(r=r.parent,r)continue}else{if("."===n)continue;if(r){if(r instanceof K){const e=r.value;Ue(e)&&(r=Ge(e))}if(r instanceof Q&&r.getChildType(n)&&(r=r.getChildNode(n),r))continue}}throw st(`Could not resolve '${n}' in path '${Ht(t.slice(0,e))||"/"}' while resolving '${Ht(t)}'`)}}catch(e){if(!n)return;throw e}return r}function Xe(e){if(!e)return nt;const t=Object.keys(e);if(!t.length)return nt;const n=new Array(t.length);return t.forEach((t,r)=>{n[r]=e[t]}),n}function et(e){return _t("process","`process()` has been renamed to `flow()`. See https://github.com/mobxjs/mobx-state-tree/issues/399 for more information. Note that the middleware event types starting with `process` now start with `flow`."),$t(e)}const tt=Object.toString(),nt=Object.freeze([]),rt=Object.freeze({}),it=(0,r._getGlobalState)().useProxies?{deep:!1}:{deep:!1,proxy:!1};function st(e="Illegal state"){return new Error("[mobx-state-tree] "+e)}function ot(e){return e}Object.freeze(it);const at=Number.isInteger;function ct(e){return Array.isArray(e)||(0,r.isObservableArray)(e)}function lt(e){return e?ct(e)?e:[e]:nt}function ht(e){if(null===e||"object"!=typeof e)return!1;const t=Object.getPrototypeOf(e);return null==t||t.constructor?.toString()===tt}function pt(e){return!(null===e||"object"!=typeof e||e instanceof Date||e instanceof RegExp)}function ut(e,t=!0){return null==e||"string"==typeof e||"number"==typeof e||"boolean"==typeof e||t&&e instanceof Date}function dt(e){return Tt()?ut(e)||(0,r.isObservableArray)(e)?e:Object.freeze(e):e}function ft(e){return Tt()?(dt(e),ht(e)&&Object.keys(e).forEach(t=>{ut(e[t])||Object.isFrozen(e[t])||ft(e[t])}),e):e}function yt(e){return"function"!=typeof e}function bt(e,t,n){(0,r.isObservableObject)(e)?(0,r.defineProperty)(e,t,n):Object.defineProperty(e,t,n)}function gt(e,t,n){bt(e,t,{enumerable:!1,writable:!1,configurable:!0,value:n})}function mt(e,t,n){bt(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}class vt{handlers=[];emitting=!1;pendingUnregisters=null;get hasSubscribers(){return this.handlers.length>0}register(e,t=!1){return t?this.handlers.unshift(e):this.handlers.push(e),()=>{this.unregister(e)}}has(e){return this.handlers.indexOf(e)>=0}unregister(e){if(this.emitting)return this.pendingUnregisters||(this.pendingUnregisters=[]),void this.pendingUnregisters.push(e);const t=this.handlers.indexOf(e);t>=0&&this.handlers.splice(t,1)}clear(){this.handlers.length=0}emit(...e){this.emitting=!0;try{for(const t of this.handlers)t(...e)}finally{if(this.emitting=!1,this.pendingUnregisters){for(const e of this.pendingUnregisters){const t=this.handlers.indexOf(e);t>=0&&this.handlers.splice(t,1)}this.pendingUnregisters=null}}}}class wt{eventHandlers;hasSubscribers(e){const t=this.eventHandlers&&this.eventHandlers[e];return!!t&&t.hasSubscribers}register(e,t,n=!1){this.eventHandlers||(this.eventHandlers={});let r=this.eventHandlers[e];return r||(r=this.eventHandlers[e]=new vt),r.register(t,n)}has(e,t){const n=this.eventHandlers&&this.eventHandlers[e];return!!n&&n.has(t)}unregister(e,t){const n=this.eventHandlers&&this.eventHandlers[e];n&&n.unregister(t)}clear(e){this.eventHandlers&&delete this.eventHandlers[e]}clearAll(){this.eventHandlers=void 0}emit(e,...t){const n=this.eventHandlers&&this.eventHandlers[e];n&&n.emit(...t)}}function At(e){const t=new Array(e.length);for(let n=0;n<e.length;n++)t[n]=e[n];return t}function St(e,t){return 0===e.indexOf(t)}const _t=function(e,t){Tt()&&(_t.ids&&!_t.ids.hasOwnProperty(e)&&It("Deprecation warning: "+t),_t.ids&&(_t.ids[e]=!0))};function It(e){console.warn(new Error(`[mobx-state-tree] ${e}`))}function Pt(){return Tt()||"undefined"!=typeof process&&{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&!0}_t.ids={};let Ct=!1;function Tt(){return Ct}function Et(e){Ct=e}function xt(e,t,n,r){if(Tt()&&!t(e))throw st(`expected ${n} as argument ${lt(r).join(" or ")}, got ${e} instead`)}function kt(e,t){xt(e,e=>"function"==typeof e,"function",t)}function Vt(e,t,n,r){xt(e,e=>"number"==typeof e,"number",t),xt(e,e=>e>=n,`number greater than ${n}`,t)}function Nt(e,t,n=!0){xt(e,e=>"string"==typeof e,"string",t),n||xt(e,e=>""!==e,"not empty string",t)}function Dt(e){"function"==typeof queueMicrotask?queueMicrotask(e):"function"==typeof setImmediate?setImmediate(e):setTimeout(e,1)}function $t(e){return function(e,t){const n=function(){const r=ve(),i=me();if(!i)throw st("a mst flow must always have a parent context");const s=Ae(i);if(!s)throw st("a mst flow must always have a parent action context");const o={name:e,id:r,tree:i.tree,context:i.context,parentId:i.id,allParentIds:[...i.allParentIds,i.id],rootId:i.rootId,parentEvent:i,parentActionEvent:s},a=arguments;function c(e,t,r){return e.$mst_middleware=n.$mst_middleware,we({...o,type:t,args:[r]},e)}return new Promise(function(e,r){let i;const s=function(){i=t.apply(null,arguments),l(void 0)};function l(e){let t;try{const n=c(e=>{t=i.next(e)},"flow_resume",e);n instanceof Error&&(t=i.throw(n))}catch(e){return void Dt(()=>{c(t=>{r(e)},"flow_throw",e)})}p(t)}function h(e){let t;try{c(e=>{t=i.throw(e)},"flow_resume_error",e)}catch(e){return void Dt(()=>{c(t=>{r(e)},"flow_throw",e)})}p(t)}function p(t){if(!t.done){if(!t.value||"function"!=typeof t.value.then)throw st("Only promises can be yielded to `async`, got: "+t);return t.value.then(l,h)}Dt(()=>{c(t=>{e(t)},"flow_return",t.value)})}s.$mst_middleware=n.$mst_middleware,we({...o,type:"flow_spawn",args:At(a)},s)})};return n._isFlowAction=!0,n}(e.name,e)}function Ot(e){return e}function jt(e){return function*(...t){return yield e(...t)}}function*zt(e){return yield e}function Rt(e){switch(e.op){case"add":return{op:"add",path:e.path,value:e.value};case"remove":return{op:"remove",path:e.path};case"replace":return{op:"replace",path:e.path,value:e.value}}}function Mt(e){switch(e.op){case"add":return{op:"remove",path:e.path};case"remove":return{op:"add",path:e.path,value:e.oldValue};case"replace":return{op:"replace",path:e.path,value:e.oldValue}}}function Ft(e){return 1==("number"==typeof e)?""+e:-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function Lt(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function Ht(e){if(0===e.length)return"";const t=e=>e.map(Ft).join("/");return"."===e[0]||".."===e[0]?t(e):"/"+t(e)}function Bt(e){const t=e.split("/").map(Lt);if(!(""===e||"."===e||".."===e||St(e,"/")||St(e,"./")||St(e,"../")))throw st(`a json path must be either rooted, empty or relative, but got '${e}'`);return""===t[0]&&t.shift(),t}const Ut=Symbol("$preProcessorFailed");class Wt extends re{_subtype;_processors;get flags(){return this._subtype.flags|ee.SnapshotProcessor}constructor(e,t,n){super(n||e.name),this._subtype=e,this._processors=t}describe(){return`snapshotProcessor(${this._subtype.describe()})`}preProcessSnapshot(e){return this._processors.preProcessor?this._processors.preProcessor.call(null,e):e}preProcessSnapshotSafe(e){try{return this.preProcessSnapshot(e)}catch(e){return Ut}}postProcessSnapshot(e,t){return this._processors.postProcessor?this._processors.postProcessor.call(null,e,t.storedValue):e}_fixNode(e){!function(e,t,...n){for(const r of n)e[r]=t[r].bind(t)}(e.type,this,"create"),e instanceof Q&&(e.hasSnapshotPostProcessor=!!this._processors.postProcessor);const t=e.getSnapshot;e.getSnapshot=()=>this.postProcessSnapshot(t.call(e),e),xn(this._subtype)||(e.getReconciliationType=()=>this)}instantiate(e,t,n,r){const i=Ue(r)?r:this.preProcessSnapshot(r),s=this._subtype.instantiate(e,t,n,i);return this._fixNode(s),s}reconcile(e,t,n,r){const i=this._subtype.reconcile(e,Ue(t)?t:this.preProcessSnapshot(t),n,r);return i!==e&&this._fixNode(i),i}getSnapshot(e,t=!0){const n=this._subtype.getSnapshot(e);return t?this.postProcessSnapshot(n,e):n}isValidSnapshot(e,t){const n=this.preProcessSnapshotSafe(e);return n===Ut?Oe(t,e,"Failed to preprocess value"):this._subtype.validate(n,t)}getSubTypes(){return this._subtype}is(e){const t=oe(e)?this._subtype:Ue(e)?v(e,!1):this.preProcessSnapshotSafe(e);return t!==Ut&&0===this._subtype.validate(t,[{path:"",type:this._subtype}]).length}isAssignableFrom(e){return this._subtype.isAssignableFrom(e)}isMatchingSnapshotId(e,t){if(!(this._subtype instanceof ie))return!1;const n=this.preProcessSnapshot(t);return this._subtype.isMatchingSnapshotId(e,n)}}const Gt="Map.put can only be used to store complex values that have an identifier type attribute";function Jt(e,t){const n=e.getSubTypes();if(n===te)return!1;if(n){const e=lt(n);for(const n of e)if(!Jt(n,t))return!1}return e instanceof cn&&t.push(e),!0}var Yt;!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.YES=1]="YES",e[e.NO=2]="NO"}(Yt||(Yt={}));class Kt extends r.ObservableMap{constructor(e,t){super(e,r.observable.ref.enhancer,t)}get(e){return super.get(""+e)}has(e){return super.has(""+e)}delete(e){return super.delete(""+e)}set(e,t){return super.set(""+e,t)}put(e){if(!e)throw st("Map.put cannot be used to set empty values");if(Ue(e)){const t=Ge(e);if(Tt()&&!t.identifierAttribute)throw st(Gt);if(null===t.identifier)throw st(Gt);return this.set(t.identifier,e),e}if(pt(e)){const t=Ge(this),n=t.type;if(n.identifierMode!==Yt.YES)throw st(Gt);const r=e[n.mapIdentifierAttribute];if(!tr(r)){const r=this.put(n.getChildType().create(e,t.environment));return this.put(v(r))}const i=er(r);return this.set(i,e),this.get(i)}throw st("Map.put can only be used to store complex values")}}class Zt extends ie{_subType;identifierMode=Yt.UNKNOWN;mapIdentifierAttribute=void 0;flags=ee.Map;hookInitializers=[];constructor(e,t,n=[]){super(e),this._subType=t,this._determineIdentifierMode(),this.hookInitializers=n}hooks(e){const t=this.hookInitializers.length>0?this.hookInitializers.concat(e):[e];return new Zt(this.name,this._subType,t)}instantiate(e,t,n,r){return this._determineIdentifierMode(),Fe(this,e,t,n,r)}_determineIdentifierMode(){if(this.identifierMode!==Yt.UNKNOWN)return;const e=[];if(Jt(this._subType,e)){const t=e.reduce((e,t)=>{if(!t.identifierAttribute)return e;if(e&&e!==t.identifierAttribute)throw st(`The objects in a map should all have the same identifier attribute, expected '${e}', but child of type '${t.name}' declared attribute '${t.identifierAttribute}' as identifier`);return t.identifierAttribute},void 0);t?(this.identifierMode=Yt.YES,this.mapIdentifierAttribute=t):this.identifierMode=Yt.NO}}initializeChildNodes(e,t={}){const n=e.type._subType,r={};return Object.keys(t).forEach(i=>{r[i]=n.instantiate(e,i,void 0,t[i])}),r}createNewInstance(e){return new Kt(e,this.name)}finalizeNewInstance(e,t){(0,r._interceptReads)(t,e.unbox),e.type.hookInitializers.forEach(e=>{const n=e(t);Object.keys(n).forEach(e=>{const r=n[e],i=Se(t,e,r);(Tt()?mt:gt)(t,e,i)})}),(0,r.intercept)(t,this.willChange),(0,r.observe)(t,this.didChange)}describe(){return this.name}getChildren(e){return(0,r.values)(e.storedValue)}getChildNode(e,t){const n=e.storedValue.get(""+t);if(!n)throw st("Not a child "+t);return n}willChange(e){const t=Ge(e.object),n=e.name;t.assertWritable({subpath:n});const r=t.type,i=r._subType;switch(e.type){case"update":{const{newValue:s}=e;if(s===e.object.get(n))return null;je(i,s),e.newValue=i.reconcile(t.getChildNode(n),e.newValue,t,n),r.processIdentifier(n,e.newValue)}break;case"add":je(i,e.newValue),e.newValue=i.instantiate(t,n,void 0,e.newValue),r.processIdentifier(n,e.newValue)}return e}processIdentifier(e,t){if(this.identifierMode===Yt.YES&&t instanceof Q){const n=t.identifier;if(n!==e)throw st(`A map of objects containing an identifier should always store the object under their own identifier. Trying to store key '${n}', but expected: '${e}'`)}}getSnapshot(e){const t={};return e.getChildren().forEach(e=>{t[e.subpath]=e.snapshot}),t}processInitialSnapshot(e){const t={};return Object.keys(e).forEach(n=>{t[n]=e[n].getSnapshot()}),t}didChange(e){const t=Ge(e.object);switch(e.type){case"update":return void t.emitPatch({op:"replace",path:Ft(e.name),value:e.newValue.snapshot,oldValue:e.oldValue?e.oldValue.snapshot:void 0},t);case"add":return void t.emitPatch({op:"add",path:Ft(e.name),value:e.newValue.snapshot,oldValue:void 0},t);case"delete":const n=e.oldValue.snapshot;return e.oldValue.die(),void t.emitPatch({op:"remove",path:Ft(e.name),oldValue:n},t)}}applyPatchLocally(e,t,n){const r=e.storedValue;switch(n.op){case"add":case"replace":r.set(t,n.value);break;case"remove":r.delete(t)}}applySnapshot(e,t){je(this,t);const n=e.storedValue,r={};if(Array.from(n.keys()).forEach(e=>{r[e]=!1}),t)for(const e in t)n.set(e,t[e]),r[""+e]=!0;Object.keys(r).forEach(e=>{!1===r[e]&&n.delete(e)})}getChildType(){return this._subType}isValidSnapshot(e,t){if(!ht(e))return Oe(t,e,"Value is not a plain object");for(const n of Object.keys(e)){Ne(t,n,this._subType);const r=this._subType.validate(e[n],t);if(De(t),r.length>0)return r}return $e()}getDefaultSnapshot(){return rt}removeChild(e,t){e.storedValue.delete(t)}}function qt(e){return oe(e)&&(e.flags&ee.Map)>0}Zt.prototype.applySnapshot=(0,r.action)(Zt.prototype.applySnapshot);class Qt extends ie{_subType;flags=ee.Array;hookInitializers=[];constructor(e,t,n=[]){super(e),this._subType=t,this.hookInitializers=n}hooks(e){const t=this.hookInitializers.length>0?this.hookInitializers.concat(e):[e];return new Qt(this.name,this._subType,t)}instantiate(e,t,n,r){return Fe(this,e,t,n,r)}initializeChildNodes(e,t=[]){const n=e.type._subType,r={};return t.forEach((t,i)=>{const s=""+i;r[s]=n.instantiate(e,s,void 0,t)}),r}createNewInstance(e){const t={...it,name:this.name};return r.observable.array(Xe(e),t)}finalizeNewInstance(e,t){(0,r._getAdministration)(t).dehancer=e.unbox,e.type.hookInitializers.forEach(e=>{const n=e(t);Object.keys(n).forEach(e=>{const r=n[e],i=Se(t,e,r);(Tt()?mt:gt)(t,e,i)})}),(0,r.intercept)(t,this.willChange),(0,r.observe)(t,this.didChange)}describe(){return this.name}getChildren(e){return e.storedValue.slice()}getChildNode(e,t){const n=Number(t);if(n<e.storedValue.length)return e.storedValue[n];throw st("Not a child: "+t)}willChange(e){const t=Ge(e.object);t.assertWritable({subpath:""+e.index});const n=t.type._subType,r=t.getChildren();switch(e.type){case"update":{if(e.newValue===e.object[e.index])return null;const i=Xt(t,n,[r[e.index]],[e.newValue],[e.index]);if(!i)return null;e.newValue=i[0]}break;case"splice":{const{index:i,removedCount:s,added:o}=e,a=Xt(t,n,r.slice(i,i+s),o,o.map((e,t)=>i+t));if(!a)return null;e.added=a;for(let e=i+s;e<r.length;e++)r[e].setParent(t,""+(e+o.length-s))}}return e}getSnapshot(e){return e.getChildren().map(e=>e.snapshot)}processInitialSnapshot(e){const t=[];return Object.keys(e).forEach(n=>{t.push(e[n].getSnapshot())}),t}didChange(e){const t=Ge(e.object);switch(e.type){case"update":return void t.emitPatch({op:"replace",path:""+e.index,value:e.newValue.snapshot,oldValue:e.oldValue?e.oldValue.snapshot:void 0},t);case"splice":for(let n=e.removedCount-1;n>=0;n--)t.emitPatch({op:"remove",path:""+(e.index+n),oldValue:e.removed[n].snapshot},t);for(let n=0;n<e.addedCount;n++)t.emitPatch({op:"add",path:""+(e.index+n),value:t.getChildNode(""+(e.index+n)).snapshot,oldValue:void 0},t);return}}applyPatchLocally(e,t,n){const r=e.storedValue,i="-"===t?r.length:Number(t);switch(n.op){case"replace":r[i]=n.value;break;case"add":r.splice(i,0,n.value);break;case"remove":r.splice(i,1)}}applySnapshot(e,t){je(this,t),e.storedValue.replace(t)}getChildType(){return this._subType}isValidSnapshot(e,t){if(!ct(e))return Oe(t,e,"Value is not an array");for(let n=0;n<e.length;n++){Ne(t,""+n,this._subType);const r=this._subType.validate(e[n],t);if(De(t),r.length>0)return r}return $e()}getDefaultSnapshot(){return nt}removeChild(e,t){e.storedValue.splice(Number(t),1)}}function Xt(e,t,n,r,i){let s=!0;for(let o=0;;o++){const a=o<=r.length-1,c=n[o];let l=a?r[o]:void 0;const h=""+i[o];if(He(l)&&(l=l.storedValue),!c&&!a)break;if(a)if(c)if(tn(c,l))n[o]=en(t,e,h,l,c);else{let r;for(let e=o;e<n.length;e++)if(tn(n[e],l)){r=n.splice(e,1)[0];break}s=!1;const i=en(t,e,h,l,r);n.splice(o,0,i)}else{if(Ue(l)&&Ge(l).parent===e)throw st(`Cannot add an object to a state tree if it is already part of the same or another state tree. Tried to assign an object to '${e.path}/${h}', but it lives already at '${Ge(l).path}'`);s=!1;const r=en(t,e,h,l);n.splice(o,0,r)}else s=!1,n.splice(o,1),c instanceof Q&&c.createObservableInstanceIfNeeded(),c.die(),o--}return s?null:n}function en(e,t,n,r,i){je(e,r);const s=function(){if(Ue(r)){const e=Ge(r);if(e.assertAlive(rt),null!==e.parent&&e.parent===t)return e.setParent(t,n),e}return i?e.reconcile(i,r,t,n):e.instantiate(t,n,void 0,r)}();return i&&i!==s&&(i instanceof Q&&i.createObservableInstanceIfNeeded(),i.die()),s}function tn(e,t){if(!e.isAlive)return!1;if(Ue(t)){const n=Ge(t);return n.isAlive&&n===e}if(e.snapshot===t)return!0;if(!(e instanceof Q))return!1;const n=e.getReconciliationType();return null!==e.identifier&&e.identifierAttribute&&ht(t)&&n.is(t)&&n.isMatchingSnapshotId(e,t)}function nn(e){return oe(e)&&(e.flags&ee.Array)>0}Qt.prototype.applySnapshot=(0,r.action)(Qt.prototype.applySnapshot);const rn="preProcessSnapshot",sn="postProcessSnapshot";function on(){return Ge(this).toString()}const an={name:"AnonymousModel",properties:{},initializers:nt};class cn extends ie{flags=ee.Object;initializers;properties;preProcessor;postProcessor;propertyNames;constructor(e){super(e.name||an.name),Object.assign(this,an,e),this.properties=function(e){const t=Object.keys(e),n=new Set;return t.forEach(e=>{if(n.has(e))throw st(`${e} is declared twice in the model. Model should not contain the same keys`);n.add(e)}),t.reduce((t,n)=>{if(n in c)throw st(`Hook '${n}' was defined as property. Hooks should be defined as part of the actions`);const r=Object.getOwnPropertyDescriptor(e,n);if("get"in r)throw st("Getters are not supported as properties. Please use views instead");const i=r.value;if(null==i)throw st("The default value of an attribute cannot be null or undefined as the type cannot be inferred. Did you mean `types.maybe(someType)`?");if(ut(i))t[n]=Vn(function(e){switch(typeof e){case"string":return pn;case"number":return un;case"boolean":return bn;case"object":if(e instanceof Date)return wn}throw st("Cannot determine primitive type from value "+e)}(i),i);else if(i instanceof Zt)t[n]=Vn(i,{});else if(i instanceof Qt)t[n]=Vn(i,[]);else if(!oe(i))throw Tt()&&"function"==typeof i?st(`Invalid type definition for property '${n}', it looks like you passed a function. Did you forget to invoke it, or did you intend to declare a view / action?`):Tt()&&"object"==typeof i?st(`Invalid type definition for property '${n}', it looks like you passed an object. Try passing another model type or a types.frozen.`):st(`Invalid type definition for property '${n}', cannot infer a type from a value like '${i}' (${typeof i})`);return t},{...e})}(this.properties),dt(this.properties),this.propertyNames=Object.keys(this.properties),this.identifierAttribute=this._getIdentifierAttribute()}_getIdentifierAttribute(){let e;return this.forAllProps((t,n)=>{if(n.flags&ee.Identifier){if(e)throw st(`Cannot define property '${t}' as object identifier, property '${e}' is already defined as identifier property`);e=t}}),e}cloneAndEnhance(e){return new cn({name:e.name||this.name,properties:Object.assign({},this.properties,e.properties),initializers:this.initializers.concat(e.initializers||[]),preProcessor:e.preProcessor||this.preProcessor,postProcessor:e.postProcessor||this.postProcessor})}actions(e){return this.cloneAndEnhance({initializers:[t=>(this.instantiateActions(t,e(t)),t)]})}instantiateActions(e,t){if(!ht(t))throw st("actions initializer should return a plain object containing actions");Object.keys(t).forEach(n=>{if(n===rn)throw st(`Cannot define action '${rn}', it should be defined using 'type.preProcessSnapshot(fn)' instead`);if(n===sn)throw st(`Cannot define action '${sn}', it should be defined using 'type.postProcessSnapshot(fn)' instead`);let r=t[n];const i=e[n];if(n in c&&i){const e=r;r=function(){i.apply(null,arguments),e.apply(null,arguments)}}const s=r.$mst_middleware,o=r.bind(t);o._isFlowAction=r._isFlowAction||!1,o.$mst_middleware=s;const a=Se(e,n,o);t[n]=a,(Tt()?mt:gt)(e,n,a)})}named=e=>this.cloneAndEnhance({name:e});props=e=>this.cloneAndEnhance({properties:e});volatile(e){if("function"!=typeof e)throw st(`You passed an ${typeof e} to volatile state as an argument, when function is expected`);return this.cloneAndEnhance({initializers:[t=>(this.instantiateVolatileState(t,e(t)),t)]})}instantiateVolatileState(e,t){if(!ht(t))throw st("volatile state initializer should return a plain object containing state");(0,r.set)(e,t)}extend(e){return this.cloneAndEnhance({initializers:[t=>{const{actions:n,views:r,state:i,...s}=e(t);for(const e in s)throw st(`The \`extend\` function should return an object with a subset of the fields 'actions', 'views' and 'state'. Found invalid key '${e}'`);return i&&this.instantiateVolatileState(t,i),r&&this.instantiateViews(t,r),n&&this.instantiateActions(t,n),t}]})}views(e){return this.cloneAndEnhance({initializers:[t=>(this.instantiateViews(t,e(t)),t)]})}instantiateViews(e,t){if(!ht(t))throw st("views initializer should return a plain object containing views");Object.getOwnPropertyNames(t).forEach(n=>{const i=Object.getOwnPropertyDescriptor(t,n);if("get"in i)(0,r.defineProperty)(e,n,i),(0,r.makeObservable)(e,{[n]:r.computed});else{if("function"!=typeof i.value)throw st("A view member should either be a function or getter based property");(Tt()?mt:gt)(e,n,i.value)}})}preProcessSnapshot=e=>{const t=this.preProcessor;return t?this.cloneAndEnhance({preProcessor:n=>t(e(n))}):this.cloneAndEnhance({preProcessor:e})};postProcessSnapshot=e=>{const t=this.postProcessor;return t?this.cloneAndEnhance({postProcessor:n=>e(t(n))}):this.cloneAndEnhance({postProcessor:e})};instantiate(e,t,n,r){return Fe(this,e,t,n,Ue(r)?r:this.applySnapshotPreProcessor(r))}initializeChildNodes(e,t={}){const n=e.type,r={};return n.forAllProps((n,i)=>{r[n]=i.instantiate(e,n,void 0,t[n])}),r}createNewInstance(e){const t={...it,name:this.name};return r.observable.object(e,rt,t)}finalizeNewInstance(e,t){gt(t,"toString",on),this.forAllProps(n=>{(0,r._interceptReads)(t,n,e.unbox)}),this.initializers.reduce((e,t)=>t(e),t),(0,r.intercept)(t,this.willChange),(0,r.observe)(t,this.didChange)}willChange(e){const t=e,n=Ge(t.object),r=t.name;n.assertWritable({subpath:r});const i=n.type.properties[r];return i&&(je(i,t.newValue),t.newValue=i.reconcile(n.getChildNode(r),t.newValue,n,r)),t}didChange(e){const t=e,n=Ge(t.object);if(!n.type.properties[t.name])return;const r=t.oldValue?t.oldValue.snapshot:void 0;n.emitPatch({op:"replace",path:Ft(t.name),value:t.newValue.snapshot,oldValue:r},n)}getChildren(e){const t=[];return this.forAllProps(n=>{t.push(this.getChildNode(e,n))}),t}getChildNode(e,t){if(!(t in this.properties))throw st("Not a value property: "+t);const n=(0,r._getAdministration)(e.storedValue,t),i=n.raw?.();if(!i)throw st("Node not available for property "+t);return i}getSnapshot(e,t=!0){const n={};return this.forAllProps((t,i)=>{try{(0,r.getAtom)(e.storedValue,t).reportObserved()}catch(e){throw st(`${t} property is declared twice`)}n[t]=this.getChildNode(e,t).snapshot}),t?this.applySnapshotPostProcessor(n):n}processInitialSnapshot(e){const t={};return Object.keys(e).forEach(n=>{t[n]=e[n].getSnapshot()}),this.applySnapshotPostProcessor(t)}applyPatchLocally(e,t,n){if("replace"!==n.op&&"add"!==n.op)throw st(`object does not support operation ${n.op}`);e.storedValue[t]=n.value}applySnapshot(e,t){je(this,t);const n=this.applySnapshotPreProcessor(t);this.forAllProps(t=>{e.storedValue[t]=n[t]})}applySnapshotPreProcessor(e){const t=this.preProcessor;return t?t.call(null,e):e}applySnapshotPostProcessor(e){const t=this.postProcessor;return t?t.call(null,e):e}getChildType(e){return Nt(e,1),this.properties[e]}isValidSnapshot(e,t){const n=this.applySnapshotPreProcessor(e);if(!ht(n))return Oe(t,n,"Value is not a plain object");for(const e of this.propertyNames){const r=this.properties[e];Ne(t,e,r);const i=r.validate(n[e],t);if(De(t),i.length>0)return i}return $e()}forAllProps(e){this.propertyNames.forEach(t=>e(t,this.properties[t]))}describe(){return"{ "+this.propertyNames.map(e=>e+": "+this.properties[e].describe()).join("; ")+" }"}getDefaultSnapshot(){return rt}removeChild(e,t){e.storedValue[t]=void 0}}function ln(e){return oe(e)&&(e.flags&ee.Object)>0}cn.prototype.applySnapshot=(0,r.action)(cn.prototype.applySnapshot);class hn extends se{flags;checker;initializer;constructor(e,t,n,r=ot){super(e),this.flags=t,this.checker=n,this.initializer=r,this.flags=t}describe(){return this.name}instantiate(e,t,n,r){return Le(this,e,t,n,r)}createNewInstance(e){return this.initializer(e)}isValidSnapshot(e,t){return ut(e)&&this.checker(e)?$e():Oe(t,e,`Value is not a ${"Date"===this.name?"Date or a unix milliseconds timestamp":this.name}`)}}const pn=new hn("string",ee.String,e=>"string"==typeof e),un=new hn("number",ee.Number,e=>"number"==typeof e),dn=new hn("integer",ee.Integer,e=>at(e)),fn=new hn("float",ee.Float,e=>{return t=e,Number(t)===t&&t%1!=0;var t}),yn=new hn("finite",ee.Finite,e=>{return t=e,Number.isFinite(t);var t}),bn=new hn("boolean",ee.Boolean,e=>"boolean"==typeof e),gn=new hn("null",ee.Null,e=>null===e),mn=new hn("undefined",ee.Undefined,e=>void 0===e),vn=new hn("Date",ee.Date,e=>"number"==typeof e||e instanceof Date,e=>e instanceof Date?e:new Date(e));vn.getSnapshot=function(e){return e.storedValue.getTime()};const wn=vn;function An(e){return oe(e)&&(e.flags&(ee.String|ee.Number|ee.Integer|ee.Boolean|ee.Date))>0}class Sn extends se{value;flags=ee.Literal;constructor(e){super(JSON.stringify(e)),this.value=e}instantiate(e,t,n,r){return Le(this,e,t,n,r)}describe(){return JSON.stringify(this.value)}isValidSnapshot(e,t){return ut(e)&&e===this.value?$e():Oe(t,e,`Value is not a literal ${JSON.stringify(this.value)}`)}}function _n(e){return xt(e,ut,"primitive",1),new Sn(e)}function In(e){return oe(e)&&(e.flags&ee.Literal)>0}class Pn extends re{_subtype;_predicate;_message;get flags(){return this._subtype.flags|ee.Refinement}constructor(e,t,n,r){super(e),this._subtype=t,this._predicate=n,this._message=r}describe(){return this.name}instantiate(e,t,n,r){return this._subtype.instantiate(e,t,n,r)}isAssignableFrom(e){return this._subtype.isAssignableFrom(e)}isValidSnapshot(e,t){const n=this._subtype.validate(e,t);if(n.length>0)return n;const r=Ue(e)?Ge(e).snapshot:e;return this._predicate(r)?$e():Oe(t,e,this._message(e))}reconcile(e,t,n,r){return this._subtype.reconcile(e,t,n,r)}getSubTypes(){return this._subtype}}function Cn(e){return(e.flags&ee.Refinement)>0}class Tn extends re{_types;_dispatcher;_eager=!0;get flags(){let e=ee.Union;return this._types.forEach(t=>{e|=t.flags}),e}constructor(e,t,n){super(e),this._types=t,n={eager:!0,dispatcher:void 0,...n},this._dispatcher=n.dispatcher,n.eager||(this._eager=!1)}isAssignableFrom(e){return this._types.some(t=>t.isAssignableFrom(e))}describe(){return"("+this._types.map(e=>e.describe()).join(" | ")+")"}instantiate(e,t,n,r){const i=this.determineType(r,void 0);if(!i)throw st("No matching type for union "+this.describe());return i.instantiate(e,t,n,r)}reconcile(e,t,n,r){const i=this.determineType(t,e.getReconciliationType());if(!i)throw st("No matching type for union "+this.describe());return i.reconcile(e,t,n,r)}determineType(e,t){if(this._dispatcher)return this._dispatcher(e);if(!Pt()){const n=this.tryQuickMatch(e,t);if(n)return n;if(ht(e)&&!Ue(e))for(const t of this._types)if(this.snapshotLooksLikeType(e,t))return t}return t?t.is(e)?t:this._types.filter(e=>e!==t).find(t=>t.is(e)):this._types.find(t=>t.is(e))}tryQuickMatch(e,t){if(Ue(e))return;if(!ht(e))return this.tryMatchPrimitive(e);const n=t?[t,...this._types.filter(e=>e!==t)]:this._types;for(const t of n)if(this.snapshotLooksLikeType(e,t))return t}tryMatchPrimitive(e){const t=typeof e;for(const n of this._types){const r=n.flags;if("string"===t&&r&ee.String||"number"===t&&r&(ee.Number|ee.Integer|ee.Float|ee.Finite)||"boolean"===t&&r&ee.Boolean||null===e&&r&ee.Null||void 0===e&&r&ee.Undefined)return n;if(r&ee.Literal&&n.is(e))return n}}snapshotLooksLikeType(e,t){if(t instanceof cn){const n=t.properties;for(const r of t.propertyNames){const t=n[r],i=t.flags&ee.Optional,s=e[r];if(!(i||r in e&&void 0!==s))return!1;if(t.flags&ee.Literal&&!t.is(s))return!1}return!0}return!1}isValidSnapshot(e,t){if(this._dispatcher)return this._dispatcher(e).validate(e,t);const n=[];let r=0;for(let i=0;i<this._types.length;i++){const s=this._types[i].validate(e,t);if(0===s.length){if(this._eager)return $e();r++}else n.push(s)}return 1===r?$e():Oe(t,e,"No type is applicable for the union").concat(n.flat())}getSubTypes(){return this._types}}function En(e,...t){const n=oe(e)?void 0:e,r=oe(e)?[e,...t]:t,i="("+r.map(e=>e.name).join(" | ")+")";return Tt()&&(n&&xt(n,e=>ht(e),"object { eager?: boolean, dispatcher?: Function }",1),r.forEach((e,t)=>{ae(e,n?t+2:t+1)})),new Tn(i,r,n)}function xn(e){return(e.flags&ee.Union)>0}class kn extends re{_subtype;_defaultValue;optionalValues;get flags(){return this._subtype.flags|ee.Optional}constructor(e,t,n){super(e.name),this._subtype=e,this._defaultValue=t,this.optionalValues=n}describe(){return this._subtype.describe()+"?"}instantiate(e,t,n,r){if(this.optionalValues.indexOf(r)>=0){const r=this.getDefaultInstanceOrSnapshot();return this._subtype.instantiate(e,t,n,r)}return this._subtype.instantiate(e,t,n,r)}reconcile(e,t,n,r){return this._subtype.reconcile(e,this.optionalValues.indexOf(t)<0&&this._subtype.is(t)?t:this.getDefaultInstanceOrSnapshot(),n,r)}getDefaultInstanceOrSnapshot(){const e="function"==typeof this._defaultValue?this._defaultValue():this._defaultValue;return"function"==typeof this._defaultValue&&je(this,e),e}isValidSnapshot(e,t){return this.optionalValues.indexOf(e)>=0?$e():this._subtype.validate(e,t)}isAssignableFrom(e){return this._subtype.isAssignableFrom(e)}getSubTypes(){return this._subtype}}function Vn(e,t,n){return function(e,t){if("function"!=typeof t&&Ue(t))throw st("default value cannot be an instance, pass a snapshot or a function that creates an instance/snapshot instead");ae(e,1),Tt()&&"function"!=typeof t&&je(e,t)}(e,t),new kn(e,t,n||Nn)}const Nn=[void 0];function Dn(e){return oe(e)&&(e.flags&ee.Optional)>0}const $n=Vn(mn,void 0),On=Vn(gn,null);function jn(e){return ae(e,1),En(e,$n)}class zn extends re{_definition;_subType;get flags(){return(this._subType?this._subType.flags:0)|ee.Late}getSubType(e){if(!this._subType){let t;try{t=this._definition()}catch(e){if(!(e instanceof ReferenceError))throw e;t=void 0}if(e&&void 0===t)throw st("Late type seems to be used too early, the definition (still) returns undefined");if(t){if(Tt()&&!oe(t))throw st("Failed to determine subtype, make sure types.late returns a type definition.");this._subType=t}}return this._subType}constructor(e,t){super(e),this._definition=t}instantiate(e,t,n,r){return this.getSubType(!0).instantiate(e,t,n,r)}reconcile(e,t,n,r){return this.getSubType(!0).reconcile(e,t,n,r)}describe(){const e=this.getSubType(!1);return e?e.name:"<uknown late type>"}isValidSnapshot(e,t){const n=this.getSubType(!1);return n?n.validate(e,t):$e()}isAssignableFrom(e){const t=this.getSubType(!1);return!!t&&t.isAssignableFrom(e)}getSubTypes(){return this.getSubType(!1)||te}}function Rn(e){return oe(e)&&(e.flags&ee.Late)>0}class Mn extends se{options;flags=ee.Lazy;loadedType=null;pendingNodeList=r.observable.array();constructor(e,t){super(e),this.options=t,(0,r.when)(()=>this.pendingNodeList.length>0&&this.pendingNodeList.some(e=>e.isAlive&&this.options.shouldLoadPredicate(e.parent?e.parent.value:null)),()=>{this.options.loadType().then((0,r.action)(e=>{this.loadedType=e,this.pendingNodeList.forEach(e=>{e.parent&&this.loadedType&&e.parent.applyPatches([{op:"replace",path:`/${e.subpath}`,value:e.snapshot}])})}))})}describe(){return`<lazy ${this.name}>`}instantiate(e,t,n,i){if(this.loadedType)return this.loadedType.instantiate(e,t,n,i);const s=Le(this,e,t,n,ft(i));return this.pendingNodeList.push(s),(0,r.when)(()=>!s.isAlive,()=>this.pendingNodeList.splice(this.pendingNodeList.indexOf(s),1)),s}isValidSnapshot(e,t){return this.loadedType?this.loadedType.validate(e,t):yt(e)?$e():Oe(t,e,"Value is not serializable and cannot be lazy")}reconcile(e,t,n,r){return this.loadedType?(e.die(),this.loadedType.instantiate(n,r,n.environment,t)):super.reconcile(e,t,n,r)}}class Fn extends se{subType;flags=ee.Frozen;constructor(e){super(e?`frozen(${e.name})`:"frozen"),this.subType=e}describe(){return"<any immutable value>"}instantiate(e,t,n,r){return Le(this,e,t,n,ft(r))}isValidSnapshot(e,t){return yt(e)?this.subType?this.subType.validate(e,t):$e():Oe(t,e,"Value is not serializable and cannot be frozen")}}const Ln=new Fn;function Hn(e){return oe(e)&&(e.flags&ee.Frozen)>0}class Bn{targetType;identifier;node;resolvedReference;constructor(e,t){if(this.targetType=t,tr(e))this.identifier=e;else{if(!Ue(e))throw st(`Can only store references to tree nodes or identifiers, got: '${e}'`);{const t=Ge(e);if(!t.identifierAttribute)throw st("Can only store references with a defined identifier attribute.");const n=t.unnormalizedIdentifier;if(null==n)throw st("Can only store references to tree nodes with a defined identifier.");this.identifier=n}}}updateResolvedReference(e){const t=er(this.identifier),n=e.root,r=n.identifierCache.getLastCacheModificationPerId(t);if(!this.resolvedReference||this.resolvedReference.lastCacheModification!==r){const{targetType:i}=this,s=n.identifierCache.resolve(i,t);if(!s)throw new Un(`[mobx-state-tree] Failed to resolve reference '${this.identifier}' to type '${this.targetType.name}' (from node: ${e.path})`);this.resolvedReference={node:s,lastCacheModification:r}}}get resolvedValue(){return this.updateResolvedReference(this.node),this.resolvedReference.node.value}}class Un extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Un.prototype)}}class Wn extends se{targetType;onInvalidated;flags=ee.Reference;constructor(e,t){super(`reference(${e.name})`),this.targetType=e,this.onInvalidated=t}describe(){return this.name}isAssignableFrom(e){return this.targetType.isAssignableFrom(e)}isValidSnapshot(e,t){return tr(e)?$e():Oe(t,e,"Value is not a valid identifier, which is a string or a number")}fireInvalidated(e,t,n,r){const i=t.parent;if(!i||!i.isAlive)return;const s=i.storedValue;s&&this.onInvalidated({cause:e,parent:s,invalidTarget:r?r.storedValue:void 0,invalidId:n,replaceRef(e){d(t.root.storedValue,{op:"replace",value:e,path:t.path})},removeRef(){ln(i.type)?this.replaceRef(void 0):d(t.root.storedValue,{op:"remove",path:t.path})}})}addTargetNodeWatcher(e,t){const n=this.getValue(e);if(!n)return;const r=Ge(n),i=(n,i)=>{const s=function(e){switch(e){case c.beforeDestroy:return"destroy";case c.beforeDetach:return"detach";default:return}}(i);s&&this.fireInvalidated(s,e,t,r)},s=r.registerHook(c.beforeDetach,i),o=r.registerHook(c.beforeDestroy,i);return()=>{s(),o()}}watchTargetNodeForInvalidations(e,t,n){if(!this.onInvalidated)return;let r;e.registerHook(c.beforeDestroy,()=>{r&&r()});const i=i=>{r&&r();const s=e.parent,o=s&&s.storedValue;if(s&&s.isAlive&&o){let s;s=n?!!n.get(t,o):e.root.identifierCache.has(this.targetType,er(t)),s?r=this.addTargetNodeWatcher(e,t):i||this.fireInvalidated("invalidSnapshotReference",e,t,null)}};e.state===Be.FINALIZED?i(!0):(e.isRoot||e.root.registerHook(c.afterCreationFinalization,()=>{e.parent&&e.parent.createObservableInstanceIfNeeded()}),e.registerHook(c.afterAttach,()=>{i(!1)}))}}class Gn extends Wn{constructor(e,t){super(e,t)}getValue(e){if(e.isAlive)return e.storedValue.resolvedValue}getSnapshot(e){return e.storedValue.identifier}instantiate(e,t,n,r){const i=Ue(r)?k(r):r,s=new Bn(r,this.targetType),o=Le(this,e,t,n,s);return s.node=o,this.watchTargetNodeForInvalidations(o,i,void 0),o}reconcile(e,t,n,r){if(!e.isDetaching&&e.type===this){const i=Ue(t),s=e.storedValue;if(!i&&s.identifier===t||i&&s.resolvedValue===t)return e.setParent(n,r),e}const i=this.instantiate(n,r,void 0,t);return e.die(),i}}class Jn extends Wn{options;constructor(e,t,n){super(e,n),this.options=t}getValue(e){if(e.isAlive)return this.options.get(e.storedValue,e.parent?e.parent.storedValue:null)}getSnapshot(e){return e.storedValue}instantiate(e,t,n,r){const i=Ue(r)?this.options.set(r,e?e.storedValue:null):r,s=Le(this,e,t,n,i);return this.watchTargetNodeForInvalidations(s,i,this.options),s}reconcile(e,t,n,r){const i=Ue(t)?this.options.set(t,e?e.storedValue:null):t;if(!e.isDetaching&&e.type===this&&e.storedValue===i)return e.setParent(n,r),e;const s=this.instantiate(n,r,void 0,i);return e.die(),s}}function Yn(e,t){if(ae(e,1),Tt()&&2===arguments.length&&"string"==typeof arguments[1])throw st("References with base path are no longer supported. Please remove the base path.");const n=t||void 0,r=t?t.onInvalidated:void 0;if(n&&(n.get||n.set)){if(Tt()&&(!n.get||!n.set))throw st("reference options must either contain both a 'get' and a 'set' method or none of them");return new Jn(e,{get:n.get,set:n.set},r)}return new Gn(e,r)}function Kn(e){return(e.flags&ee.Reference)>0}class Zn extends se{validType;flags=ee.Identifier;constructor(e,t){super(e),this.validType=t}instantiate(e,t,n,r){if(!(e&&e.type instanceof cn))throw st("Identifier types can only be instantiated as direct child of a model type");return Le(this,e,t,n,r)}reconcile(e,t,n,r){if(e.storedValue!==t)throw st(`Tried to change identifier from '${e.storedValue}' to '${t}'. Changing identifiers is not allowed.`);return e.setParent(n,r),e}isValidSnapshot(e,t){return typeof e!==this.validType?Oe(t,e,`Value is not a valid ${this.describe()}, expected a ${this.validType}`):$e()}}const qn=new class extends Zn{flags=ee.Identifier;constructor(){super("identifier","string")}describe(){return"identifier"}},Qn=new class extends Zn{constructor(){super("identifierNumber","number")}getSnapshot(e){return e.storedValue}describe(){return"identifierNumber"}};function Xn(e){return oe(e)&&(e.flags&ee.Identifier)>0}function er(e){return""+e}function tr(e){return"string"==typeof e||"number"==typeof e}class nr extends se{options;flags=ee.Custom;constructor(e){super(e.name),this.options=e}describe(){return this.name}isValidSnapshot(e,t){if(this.options.isTargetType(e))return $e();const n=this.options.getValidationMessage(e);return n?Oe(t,e,`Invalid value for type '${this.name}': ${n}`):$e()}getSnapshot(e){return this.options.toSnapshot(e.storedValue)}instantiate(e,t,n,r){return Le(this,e,t,n,this.options.isTargetType(r)?r:this.options.fromSnapshot(r,e&&e.root.environment))}reconcile(e,t,n,r){const i=!this.options.isTargetType(t);if(!e.isDetaching&&e.type===this&&(i?t===e.snapshot:t===e.storedValue))return e.setParent(n,r),e;const s=i?this.options.fromSnapshot(t,n.root.environment):t,o=this.instantiate(n,r,void 0,s);return e.die(),o}}const rr={enumeration:function(e,t){const n="string"==typeof e?t:e;Tt()&&n.forEach((e,t)=>{Nt(e,t+1)});const r=En(...n.map(e=>_n(""+e)));return"string"==typeof e&&(r.name=e),r},model:function(...e){if(Tt()&&"string"!=typeof e[0]&&e[1])throw st("Model creation failed. First argument must be a string when two arguments are provided");const t="string"==typeof e[0]?e.shift():"AnonymousModel",n=e.shift()||{};return new cn({name:t,properties:n})},compose:function(...e){const t="string"==typeof e[0],n=t?e[0]:"AnonymousModel";return t&&e.shift(),Tt()&&e.forEach((e,n)=>{xt(e,ln,"mobx-state-tree model type",t?n+2:n+1)}),e.reduce((e,t)=>e.cloneAndEnhance({name:e.name+"_"+t.name,properties:t.properties,initializers:t.initializers,preProcessor:n=>t.applySnapshotPreProcessor(e.applySnapshotPreProcessor(n)),postProcessor:n=>t.applySnapshotPostProcessor(e.applySnapshotPostProcessor(n))})).named(n)},custom:function(e){return new nr(e)},reference:Yn,safeReference:function(e,t){const n=Yn(e,{...t,onInvalidated(e){t&&t.onInvalidated&&t.onInvalidated(e),e.removeRef()}});return t&&!1===t.acceptsUndefined?n:jn(n)},union:En,optional:Vn,literal:_n,maybe:jn,maybeNull:function(e){return ae(e,1),En(e,On)},refinement:function(...e){const t="string"==typeof e[0]?e.shift():oe(e[0])?e[0].name:null,n=e[0],r=e[1],i=e[2]?e[2]:e=>"Value does not respect the refinement predicate";return ae(n,[1,2]),Nt(t,1),kt(r,[2,3]),kt(i,[3,4]),new Pn(t,n,r,i)},string:pn,boolean:bn,number:un,integer:dn,float:fn,finite:yn,Date:wn,map:function(e){return new Zt(`Map<string, ${e.name}>`,e)},array:function(e){return ae(e,1),new Qt(`${e.name}[]`,e)},frozen:function(e){return 0===arguments.length?Ln:oe(e)?new Fn(e):Vn(Ln,e)},identifier:qn,identifierNumber:Qn,late:function(e,t){const n="string"==typeof e?e:`late(${e.toString()})`,r="string"==typeof e?t:e;if(Tt()&&("function"!=typeof r||0!==r.length))throw st("Invalid late type, expected a function with zero arguments that returns a type, got: "+r);return new zn(n,r)},lazy:function(e,t){return new Mn(e,t)},undefined:mn,null:gn,snapshotProcessor:function(e,t,n){if(ae(e,1),Tt()){if(t.postProcessor&&"function"!=typeof t.postProcessor)throw st("postSnapshotProcessor must be a function");if(t.preProcessor&&"function"!=typeof t.preProcessor)throw st("preSnapshotProcessor must be a function")}return new Wt(e,t,n)}}}}]);
//# sourceMappingURL=7279.598e597d.chunk.js.map