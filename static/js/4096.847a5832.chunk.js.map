{"version":3,"file":"static/js/4096.847a5832.chunk.js","mappings":"sHAAO,SAASA,EAAYC,GAC1B,MAAe,MAAXA,EACK,EACa,MAAXA,GACD,OAER,CAEJ,CAEO,SAASC,EAAcC,GAC5B,OAAO,IAAIC,YAAY,QACpBC,OAAOF,GACPG,MAAM,cACNC,IAAIC,GAAKA,EAAEC,QACXC,OAAOF,KAAOA,EACnB,C,+FCbO,SAASG,EAAeR,GAC7B,MAAMS,GAAQV,EAAAA,EAAAA,GAAcC,GACtBU,EAAOD,EAAMF,OACjBI,KAEIA,EAAKC,WAAW,MAChBD,EAAKC,WAAW,YAChBD,EAAKC,WAAW,WAIhBC,EAAiBJ,EAAMK,SAASH,GAAQA,EAAKC,WAAW,MACxDG,EAAc,CAAC,UAAW,QAAS,OACnCC,EAAkBC,KAAKC,IAC3B,GACCR,EAAK,IAAIP,MAAM,MAAMgB,QAAU,GAAKJ,EAAYI,QAE7CC,EAAaP,GAAgBQ,SAAS,MACxCR,EACGS,MAAM,GACNnB,MAAM,MACNmB,MAAMP,EAAYI,QAClBf,IAAImB,GAAKA,EAAEjB,QACdkB,MAAMC,KAAK,CAAEN,OAAQH,GAAmB,CAACU,EAAIC,IAAM,SAASA,KAIhE,MAAO,CACLC,QAHe,IAAIb,KAAgBK,GAGjBhB,IAAIyB,IAAK,CAAGC,KAAMD,KACpCE,OAAQ,CACNC,KAAMtB,EAAKN,IAAI,CAACO,EAAMsB,KACpB,MAAMC,EAAOvB,EAAKR,MAAM,MACxB,MAAO,CAELgC,SAAU,CACRC,QAASF,EAAK,GACdG,OAAQH,EAAK,GACbI,KAAMJ,EAAK,GACXJ,KAAMI,EAAK,GACXK,MAAOL,EAAK,GACZpC,OAAQoC,EAAK,MACVM,OAAOC,YACRrB,EAAWhB,IAAI,CAACsC,EAAGT,KACjB,MAAMU,EAAIT,EAAKD,EAAMlB,EAAYI,QACjC,MAAO,CAACuB,GAAGE,EAAAA,EAAAA,GAASD,IAAMA,EAAIA,OAKpCE,QAAS,CACPC,SAAU,OAAOb,IACjBG,QAASF,EAAK,GACdG,OAAQH,EAAK,GACbI,KAAMJ,EAAK,GACXJ,KAAMI,EAAK,GACXK,MAAOL,EAAK,GACZpC,QAAQD,EAAAA,EAAAA,GAAYqC,EAAK,OACtBM,OAAOC,YACRrB,EAAWhB,IAAI,CAACsC,EAAGT,KACjB,MAAMU,EAAIT,EAAKD,EAAMlB,EAAYI,QACjC,MAAO,CAACuB,GAAGE,EAAAA,EAAAA,GAASD,IAAMA,EAAIA,WAQ9C,C,eChEO,SAASC,EAASG,GACvB,MAAmB,iBAARA,EACFA,EAAMA,IAAQ,EACG,iBAARA,GAAmC,KAAfA,EAAIzC,QACjC0C,OAAOC,UAAUF,EAI5B,C","sources":["../../../plugins/spreadsheet-view/src/SpreadsheetView/importAdapters/util.ts","../../../plugins/spreadsheet-view/src/SpreadsheetView/importAdapters/BedImport.ts","../../../plugins/spreadsheet-view/src/SpreadsheetView/importAdapters/isNumber.ts"],"sourcesContent":["export function parseStrand(strand?: string) {\n  if (strand === '+') {\n    return 1\n  } else if (strand === '-') {\n    return -1\n  } else {\n    return undefined\n  }\n}\n\nexport function bufferToLines(buffer: Uint8Array) {\n  return new TextDecoder('utf8')\n    .decode(buffer)\n    .split(/\\n|\\r\\n|\\r/)\n    .map(f => f.trim())\n    .filter(f => !!f)\n}\n","import { isNumber } from './isNumber.ts'\nimport { bufferToLines, parseStrand } from './util.ts'\n\nexport function parseBedBuffer(buffer: Uint8Array) {\n  const lines = bufferToLines(buffer)\n  const rest = lines.filter(\n    line =>\n      !(\n        line.startsWith('#') ||\n        line.startsWith('browser') ||\n        line.startsWith('track')\n      ),\n  )\n\n  const lastHeaderLine = lines.findLast(line => line.startsWith('#'))\n  const coreColumns = ['refName', 'start', 'end']\n  const numExtraColumns = Math.max(\n    0,\n    (rest[0]?.split('\\t').length || 0) - coreColumns.length,\n  )\n  const extraNames = lastHeaderLine?.includes('\\t')\n    ? lastHeaderLine\n        .slice(1)\n        .split('\\t')\n        .slice(coreColumns.length)\n        .map(t => t.trim())\n    : Array.from({ length: numExtraColumns }, (_v, i) => `field_${i}`)\n\n  const colNames = [...coreColumns, ...extraNames]\n\n  return {\n    columns: colNames.map(c => ({ name: c })),\n    rowSet: {\n      rows: rest.map((line, idx) => {\n        const cols = line.split('\\t')\n        return {\n          // what is displayed\n          cellData: {\n            refName: cols[0],\n            start: +cols[1]!,\n            end: +cols[2]!,\n            name: cols[3],\n            score: cols[4],\n            strand: cols[5],\n            ...Object.fromEntries(\n              extraNames.map((n, idx) => {\n                const r = cols[idx + coreColumns.length]\n                return [n, isNumber(r) ? +r : r]\n              }),\n            ),\n          },\n          // an actual simplefeatureserialized\n          feature: {\n            uniqueId: `bed-${idx}`,\n            refName: cols[0],\n            start: +cols[1]!,\n            end: +cols[2]!,\n            name: cols[3],\n            score: cols[4],\n            strand: parseStrand(cols[5]),\n            ...Object.fromEntries(\n              extraNames.map((n, idx) => {\n                const r = cols[idx + coreColumns.length]\n                return [n, isNumber(r) ? +r : r]\n              }),\n            ),\n          },\n        }\n      }),\n    },\n  }\n}\n","/**\n * is-number <https://github.com/jonschlinkert/is-number>\n *\n * Copyright (c) 2014-present, Jon Schlinkert.\n * Released under the MIT License.\n */\n\nexport function isNumber(num: unknown): num is number {\n  if (typeof num === 'number') {\n    return num - num === 0\n  } else if (typeof num === 'string' && num.trim() !== '') {\n    return Number.isFinite(+num)\n  } else {\n    return false\n  }\n}\n"],"names":["parseStrand","strand","bufferToLines","buffer","TextDecoder","decode","split","map","f","trim","filter","parseBedBuffer","lines","rest","line","startsWith","lastHeaderLine","findLast","coreColumns","numExtraColumns","Math","max","length","extraNames","includes","slice","t","Array","from","_v","i","columns","c","name","rowSet","rows","idx","cols","cellData","refName","start","end","score","Object","fromEntries","n","r","isNumber","feature","uniqueId","num","Number","isFinite"],"ignoreList":[],"sourceRoot":""}