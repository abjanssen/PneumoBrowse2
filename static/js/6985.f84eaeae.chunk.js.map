{"version":3,"file":"static/js/6985.f84eaeae.chunk.js","mappings":"iLAaA,IAAIA,EAGO,KAEJ,SAASC,IACd,OAAOD,CACT,CAEO,SAASE,IACdF,EAAoB,IACtB,CAiBO,MAAMG,GAAkBC,EAAAA,EAAAA,eAAoC,CACjEC,IAAK,KACLC,gBAAiBA,OACjBC,YAAaA,OACbC,iBAZK,SAAgCC,GACrCT,EAAoB,CAAEU,KAAM,SAAUD,SACxC,EAWEE,qBATK,SAAoCF,GACzCT,EAAoB,CAAEU,KAAM,aAAcD,SAC5C,IAUO,SAAAG,IAAA,OACEC,EAAAA,EAAAA,YAAWV,EAAgB,C,qNCvCpC,MAAMW,GAAYC,EAAAA,EAAAA,IAAAA,CAAaC,IAAS,CACtCC,cAAe,CACbC,QAAS,OACTC,WAAY,SACZC,OAAQ,QAEVC,aAAc,CACZC,QAAS,EACTC,MAAOP,EAAMQ,QAAQC,QAAQC,cAE/BC,WAAY,CACVC,SAAU,OAIC,SAAAC,EAAAC,GAAA,MAAAC,GAAAC,EAAAA,EAAAA,GAAA,KAAmC,aAAAC,EAAA,MAAAC,GAAAJ,GAI1C,QAANK,GAAoBrB,KACd,YAANP,IAAwBK,EAAAA,EAAAA,KAAa,IAAAwB,EAAAL,EAAA,KAAAxB,GAAAwB,EAAA,KAAAE,GAAAF,EAAA,KAAAG,GAEjBE,EAAAC,IAClB,MAAAC,EAAiBL,EAAYM,SAAU,CAAAC,eACrBN,EAAKG,cAGvB9B,EAAY+B,IACbP,EAAA,GAAAxB,EAAAwB,EAAA,GAAAE,EAAAF,EAAA,GAAAG,EAAAH,EAAA,GAAAK,GAAAA,EAAAL,EAAA,GAND,MAAAU,EAAoBL,EAMnB,IAAAM,EAYQC,EAOAC,EAOAC,EACFC,EAKAC,EAEyCC,EACtBC,EAClB,OApCPlB,EAAA,KAAAxB,GAMOmC,EAAA,CAAAQ,MACS,gBAAeC,KAChBC,EAAAA,EAAOC,QACJA,KACP9C,MAEHwB,EAAA,GAAAxB,EAAAwB,EAAA,GAAAW,GAAAA,EAAAX,EAAA,GAAAA,EAAA,KAAAU,GACDE,EAAA,CAAAO,MACS,6BAA4BC,KAC7BG,EAAAA,EAAiBD,QACdA,KACPZ,EAAY,WAEfV,EAAA,GAAAU,EAAAV,EAAA,GAAAY,GAAAA,EAAAZ,EAAA,GAAAA,EAAA,KAAAU,GACDG,EAAA,CAAAM,MACS,2BAA0BC,KAC3BI,EAAAA,EAAmBF,QAChBA,KACPZ,EAAY,WAEfV,EAAA,GAAAU,EAAAV,EAAA,GAAAa,GAAAA,EAAAb,EAAA,GAAAA,EAAA,MAAAW,GAAAX,EAAA,MAAAY,GAAAZ,EAAA,MAAAa,GArBQC,EAAA,CACTH,EAOAC,EAOAC,GAODb,EAAA,IAAAW,EAAAX,EAAA,IAAAY,EAAAZ,EAAA,IAAAa,EAAAb,EAAA,IAAAc,GAAAA,EAAAd,EAAA,IAAAA,EAAA,MAAAG,EAAA7B,KAGQyC,EAAAA,KACPZ,EAAK7B,IAAImD,aACVzB,EAAA,IAAAG,EAAA7B,IAAA0B,EAAA,IAAAe,GAAAA,EAAAf,EAAA,IAAAA,EAAA,MAAAI,EAAAR,YAEDoB,GAAAU,EAAAA,EAAAA,KAACC,EAAAA,EAAO,CAAYC,UAAAxB,EAAOR,aAAeI,EAAA,IAAAI,EAAAR,WAAAI,EAAA,IAAAgB,GAAAA,EAAAhB,EAAA,IAAAA,EAAA,MAAAI,EAAAd,cAAAU,EAAA,MAAAc,GAAAd,EAAA,MAAAe,GAAAf,EAAA,MAAAgB,GA9B5CC,GAAAS,EAAAA,EAAAA,KAACG,EAAAA,EAAmB,CACPC,UAAAhB,EAuBNiB,KAAA,QACMH,UAAAxB,EAAOd,aACTgC,QAAAP,EAERiB,SAEDhB,IACoBhB,EAAA,IAAAI,EAAAd,aAAAU,EAAA,IAAAc,EAAAd,EAAA,IAAAe,EAAAf,EAAA,IAAAgB,EAAAhB,EAAA,IAAAiB,GAAAA,EAAAjB,EAAA,IAAAA,EAAA,MAAAI,EAAAlB,eAAAc,EAAA,MAAAiB,GAhCxBC,GAAAQ,EAAAA,EAAAA,KAAA,OAAgBE,UAAAxB,EAAOlB,cAAc8C,SACnCf,IAgCIjB,EAAA,IAAAI,EAAAlB,cAAAc,EAAA,IAAAiB,EAAAjB,EAAA,IAAAkB,GAAAA,EAAAlB,EAAA,IAjCNkB,CAiCM,C,sGCrEH,SAASe,EACdC,EACAC,GAEA,OAAKA,IAAYC,EAAAA,EAAAA,GAA4BD,GAItC,IADSA,EAAQE,mBAAmBH,IAExCI,IAAIC,GAAMJ,EAAQK,MAAMC,KAAKC,GAAKA,EAAEH,KAAOA,IAC3CI,OAAQD,QAAoCE,IAANF,GALhC,EAMX,CAEO,SAASG,EACdX,EACAC,EACAW,EAAQ,QAER,MAAO,CACLP,GAAIL,EACJa,UAAW,cACXC,aAAc,aACdF,QACAG,OAAQ,CAAEf,UAASC,WAEvB,CAEO,SAASe,EACdC,GAEA,MAAO,IACFA,EACHC,OAAQC,OAAOC,YACbD,OAAOE,QAAQJ,EAAOC,QAAQd,IAAI,EAAEC,EAAIiB,KAAW,CACjDjB,EACA,IAAKiB,EAAOP,OAAQ,CAAC,MAI7B,CAEO,SAASQ,EACdnF,EACA6D,GAEA,IAAK,MAAMqB,KAASlF,EAAI8E,OACtBI,EAAME,OAAO,CAAET,OAAQ,CAAEf,QAASsB,EAAMjB,GAAIJ,YAEhD,CAEO,SAASwB,EACdrF,EACAsF,GAOA,MAAMR,EAAS9E,EAAI8E,OACnB,GAAIA,EAAOS,QAAU,EACnB,OAGF,MAAMC,EAAcV,EAAOd,IAAIyB,IAAK,CAClCxB,GAAIwB,EAAExB,GACNQ,UAAW,cACXC,aAAc,aACdF,MAAOiB,EAAEjB,MACTG,OAAQc,EAAEd,UAGZ,IAAK,MAAMc,KAAKX,EACd9E,EAAI0F,YAAYD,GAElB,IAAK,MAAOE,EAAKC,KAAUJ,EAAYP,UACrCjF,EAAI6F,SAAS,IACRD,EACHE,SAAUR,EAAYK,EAAKH,IAGjC,CCxEA,MAAM/E,GAAYC,EAAAA,EAAAA,IAAAA,CAAaC,IAAS,CACtCC,cAAe,CACbC,QAAS,OACTC,WAAY,SACZC,OAAQ,QAEVC,aAAc,CACZC,QAAS,EACTC,MAAOP,EAAMQ,QAAQC,QAAQC,cAE/BC,WAAY,CACVC,SAAU,OAIC,SAAAwE,EAAAtE,GAAA,MAAAC,GAAAC,EAAAA,EAAAA,GAAA,KAAoC,aAAAC,EAAA,MAAAC,GAAAJ,GAI3C,QAANK,GAAoBrB,KACd,gBAANR,IAA4BM,EAAAA,EAAAA,KAAa,IAAAwB,EAAAL,EAAA,KAAAzB,GAEhB8B,EAAAA,KACvB9B,EAAgB+F,IAOjBtE,EAAA,GAAAzB,EAAAyB,EAAA,GAAAK,GAAAA,EAAAL,EAAA,GARD,MAAAuE,EAAyBlE,EAQxB,IAAAM,EAAAX,EAAA,KAAAzB,GAEsBoC,EAAAA,KACrBpC,EAAgBiG,IAOjBxE,EAAA,GAAAzB,EAAAyB,EAAA,GAAAW,GAAAA,EAAAX,EAAA,GARD,MAAAyE,EAAuB9D,EAQtB,IAAAC,EAAAZ,EAAA,KAAAzB,GAEgBqC,EAAAA,KACfrC,EAAgBmG,IAmBjB1E,EAAA,GAAAzB,EAAAyB,EAAA,GAAAY,GAAAA,EAAAZ,EAAA,GApBD,MAAA2E,EAAiB/D,EAoBhB,IAAAC,EAAAb,EAAA,KAAAzB,GAEgBsC,EAAAA,KACftC,EAAgBqG,IAOjB5E,EAAA,GAAAzB,EAAAyB,EAAA,GAAAa,GAAAA,EAAAb,EAAA,GARD,MAAA6E,EAAiBhE,EAUjBiE,EAA0B5E,EAAYkD,OAAOS,OAAU,EACvDkB,EAAuB7E,EAAY8E,OAAOnB,OAAU,EAAC,IAAA/C,EAiChDC,EAeAC,EACG,OAjD6ChB,EAAA,KAAAI,EAAAd,cAAAU,EAAA,KAAAI,EAAAR,YAAAI,EAAA,MAAA8E,GAAA9E,EAAA,MAAA6E,GAAA7E,EAAA,MAAA2E,GAAA3E,EAAA,MAAAuE,GAAAvE,EAAA,MAAAyE,GAIhD3D,EAAAgE,IAAApD,EAAAA,EAAAA,KACEG,EAAAA,EAAmB,CACPC,UAAA,CACT,CAAAX,MACS,yCAAwCC,KACzC6D,EAAAA,EAAe3D,QACZuD,GAEX,CAAA1D,MACS,4BAA2BC,KAC5B8D,EAAAA,EAAc5D,QACXiD,GAEX,CAAApD,MACS,0BAAyBC,KAC1B+D,EAAAA,EAAa7D,QACVmD,GAEX,CAAAtD,MACS,oBAAmBC,KACpBgE,EAAAA,EAAc9D,QACXqD,IAGR5C,KAAA,QACMH,UAAAxB,EAAOd,aAAa0C,UAE/BN,EAAAA,EAAAA,KAAC2D,EAAAA,EAAa,CAAYzD,UAAAxB,EAAOR,eAEpCI,EAAA,GAAAI,EAAAd,aAAAU,EAAA,GAAAI,EAAAR,WAAAI,EAAA,IAAA8E,EAAA9E,EAAA,IAAA6E,EAAA7E,EAAA,IAAA2E,EAAA3E,EAAA,IAAAuE,EAAAvE,EAAA,IAAAyE,EAAAzE,EAAA,IAAAc,GAAAA,EAAAd,EAAA,IAAAA,EAAA,MAAAI,EAAAd,cAAAU,EAAA,MAAAI,EAAAR,YAAAI,EAAA,MAAAG,GAAAH,EAAA,MAAA+E,GACAhE,EAAAgE,IAAArD,EAAAA,EAAAA,KACE4D,EAAAA,EAAO,CAAOxC,MAAA,cAAad,UAC1BN,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CACJxD,KAAA,QACIT,QAAAA,KACP,IAAK,MAAAkC,KAAerD,EAAKiD,OACvBI,EAAKlF,IAAIkH,SAGF5D,UAAAxB,EAAOd,aAAa0C,UAE/BN,EAAAA,EAAAA,KAAC+D,EAAAA,EAAS,CAAY7D,UAAAxB,EAAOR,iBAGlCI,EAAA,IAAAI,EAAAd,aAAAU,EAAA,IAAAI,EAAAR,WAAAI,EAAA,IAAAG,EAAAH,EAAA,IAAA+E,EAAA/E,EAAA,IAAAe,GAAAA,EAAAf,EAAA,IAAAA,EAAA,MAAAI,EAAAlB,eAAAc,EAAA,MAAAc,GAAAd,EAAA,MAAAe,GA7CHC,GAAA0E,EAAAA,EAAAA,MAAA,OAAgB9D,UAAAxB,EAAOlB,cAAc8C,SAAA,CAClClB,EA8BAC,KAeGf,EAAA,IAAAI,EAAAlB,cAAAc,EAAA,IAAAc,EAAAd,EAAA,IAAAe,EAAAf,EAAA,IAAAgB,GAAAA,EAAAhB,EAAA,IA9CNgB,CA8CM,CA7GK,SAAA4D,EAAAe,GAmDThC,EAA6BrF,EAAKsH,EAIjC,CAvDQ,SAAAA,EAAAC,EAAAC,GAAA,OAoDC,IAAR7B,OAAArB,EAAA,CAAAmD,eAEsBC,EAAO,GAAEzD,GAAIjC,UAAa,SAAU,CAtDnD,SAAAoE,EAAAuB,GA6BT,MAAA7C,EAAe9E,EAAG8E,OAClB,GAAIA,EAAMS,QAAW,EAAC,OAGtB,MAAAqC,EAAaC,KAAIC,KAAMD,KAAIE,KAAMjD,EAAMS,SACvCF,EAA6BrF,EAAK,CAAAgI,EAAAC,KAChC,GAAY,IAARtC,EAAS,OAGb,MAAAuC,EAAYvC,EAAMiC,EAClBO,EAAYN,KAAIO,MAAOzC,EAAMiC,GAC7B,OAAY,IAARM,EAEK,CAAAT,eAAkBC,GADTS,EAAM,GAAKP,GACY3D,GAAIjC,UAAa,SAEnD,CAAAyF,eAAkBC,EAAO/B,EAAM,GAAE1B,GAAIjC,UAAa,UACzD,CA7CO,SAAAkE,EAAAmC,GAmBThD,EAA6BrF,EAAKsI,EAIjC,CAvBQ,SAAAA,EAAAC,EAAAC,GAAA,OAoBC,IAAR7C,OAAArB,EAAA,CAAAmD,eAEsBC,EAAO,GAAEzD,GAAIjC,UAAa,QAAS,CAtBlD,SAAAgE,EAAAhG,GASTqF,EAA6BrF,EAAKyI,EAIjC,CAbQ,SAAAA,EAAA9C,EAAA+B,GAAA,OAUC,IAAR/B,OAAArB,EAAA,CAAAmD,eAEsBC,EAAO,GAAEzD,GAAIjC,UAAa,QAAS,C,eC/BjE,MAAM0G,GAAeC,EAAAA,EAAAA,MAAK,IAAM,iCAE1BlI,GAAYC,EAAAA,EAAAA,IAAAA,CAAaC,IAAS,CACtCiI,UAAW,CACT7H,OAAQ,OACR8H,UAAW,OACXC,WAAYnI,EAAMQ,QAAQ2H,WAAWC,SAEvCC,UAAW,CACTnI,QAAS,OACToI,cAAe,UAEjBC,OAAQ,CACNnI,OAAQ,KAEVoI,WAAY,CACVtI,QAAS,OACTC,WAAY,SACZsI,eAAgB,SAChBrI,OAAQ,WA6CZ,GApCyBsI,EAAAA,EAAAA,UAAS,UAA0B,OAC1D1E,IAEA,MAAM,QAAEf,EAAO,QAAEC,GAAYc,GACvB,QAAE7C,GAAYrB,IAEpB,IAAKoD,EACH,OAAOT,EAAAA,EAAAA,KAAA,OAAKE,UAAWxB,EAAQ8G,UAAUlF,SAAC,eAG5C,MAAMQ,EAAQP,EAAiBC,EAASC,GAExC,OAAqB,IAAjBK,EAAMqB,QAENnC,EAAAA,EAAAA,KAAA,OAAKE,UAAWxB,EAAQ8G,UAAUlF,UAChCN,EAAAA,EAAAA,KAAA,OAAKE,UAAWxB,EAAQqH,WAAWzF,UACjCN,EAAAA,EAAAA,KAACkG,EAAAA,SAAQ,CAACC,SAAU,KAAK7F,UACvBN,EAAAA,EAAAA,KAACsF,EAAY,CAAC7E,QAASA,WAQ/BT,EAAAA,EAAAA,KAAA,OAAKE,UAAWxB,EAAQ8G,UAAUlF,UAChC0D,EAAAA,EAAAA,MAAA,OAAK9D,UAAWxB,EAAQkH,UAAUtF,SAAA,CAC/BQ,EAAMF,IAAIwF,IACTpG,EAAAA,EAAAA,KAACqG,EAAAA,EAAa,CAAeD,KAAMA,EAAM3F,QAASA,GAA9B2F,EAAKvF,MAE3Bb,EAAAA,EAAAA,KAAA,OAAKE,UAAWxB,EAAQoH,aAIhC,G,+CCnEA,MAAMzI,GAAYC,EAAAA,EAAAA,IAAAA,CAAa,CAC7BgJ,SAAU,CACR7I,QAAS,OACTC,WAAY,SACZ6I,WAAY,UAEdC,gBAAiB,CACfD,WAAY,WAEdE,QAAS,CACP5I,QAAS,EACT6I,WAAY,EACZ5I,MAAO,WAET6I,UAAW,CACTxI,SAAU,MAIC,SAAAyI,EAAAvI,GAAA,MAAAC,GAAAC,EAAAA,EAAAA,GAAA,KAAwB,UAAAsI,EAAA,SAAAC,EAAA,QAAAC,GAAA1I,GAS/B,QAANK,GAAoBrB,IAILsB,EAAA,GAAGD,EAAO4H,YAAaO,EAAYnI,EAAO8H,gBAAnB,KAA0C,IAAAvH,EAQvEC,EAKAC,EACFC,EAK6CC,EAC1BC,EAClB,OArBwEhB,EAAA,KAAAwI,GAIxE7H,EAAA,CAAAQ,MACS,aAAYC,KACbsH,EAAAA,EAAQpH,QACLkH,GACVxI,EAAA,GAAAwI,EAAAxI,EAAA,GAAAW,GAAAA,EAAAX,EAAA,GAAAA,EAAA,KAAAyI,GACD7H,EAAA,CAAAO,MACS,YAAWC,KACZqE,EAAAA,EAASnE,QACNmH,GACVzI,EAAA,GAAAyI,EAAAzI,EAAA,GAAAY,GAAAA,EAAAZ,EAAA,GAAAA,EAAA,KAAAW,GAAAX,EAAA,KAAAY,GAVQC,EAAA,CACTF,EAKAC,GAKDZ,EAAA,GAAAW,EAAAX,EAAA,GAAAY,EAAAZ,EAAA,GAAAa,GAAAA,EAAAb,EAAA,GAAAA,EAAA,KAAAI,EAAAiI,WAKDvH,GAAAY,EAAAA,EAAAA,KAACiH,EAAAA,EAAY,CAAY/G,UAAAxB,EAAOiI,YAAcrI,EAAA,GAAAI,EAAAiI,UAAArI,EAAA,GAAAc,GAAAA,EAAAd,EAAA,GAAAA,EAAA,KAAAI,EAAA+H,SAAAnI,EAAA,MAAAa,GAAAb,EAAA,MAAAc,GAjBhDC,GAAAW,EAAAA,EAAAA,KAACG,EAAAA,EAAmB,CACPC,UAAAjB,EAYNkB,KAAA,QACMH,UAAAxB,EAAO+H,QAClBS,iBAAA,EAAe5G,SAEflB,IACoBd,EAAA,GAAAI,EAAA+H,QAAAnI,EAAA,IAAAa,EAAAb,EAAA,IAAAc,EAAAd,EAAA,IAAAe,GAAAA,EAAAf,EAAA,IAAAA,EAAA,MAAAK,GAAAL,EAAA,MAAAe,GArBxBC,GAAAU,EAAAA,EAAAA,KAAA,OACaE,UAAAvB,EAAiE2B,SAE5EjB,IAmBIf,EAAA,IAAAK,EAAAL,EAAA,IAAAe,EAAAf,EAAA,IAAAgB,GAAAA,EAAAhB,EAAA,IAtBNgB,CAsBM,CC9CV,MAAMjC,GAAYC,EAAAA,EAAAA,IAAAA,CAAaC,IAAS,CACtC4J,aAAc,CACZ1J,QAAS,OACTC,WAAY,SACZC,OAAQ,OACRE,QAAS,QACTuJ,IAAK,GAEPC,SAAU,CACR5J,QAAS,OACTC,WAAY,SACZ4J,KAAM,EACNC,SAAU,SACVC,SAAU,GAEZC,aAAc,CACZF,SAAU,SACVG,aAAc,WACdC,WAAY,SACZxJ,SAAU,UAGZyJ,UAAW,CACTzJ,SAAU,SACVN,QAAS,UACTC,MAAO,UACP+J,gBAAiBtK,EAAMQ,QAAQ+J,OAAOC,SACtCC,aAAczK,EAAM0K,MAAMD,aAC1BV,KAAM,MAIV,SAASY,GAAUC,GACjBA,EAAEjB,kBACFiB,EAAEC,gBACJ,CA6BA,MAyFA,IAzFuBnC,EAAAA,EAAAA,UAAS,UAAwB,OACtD1E,EAAM,IACN3E,IAEA,MAAM,QAAE4D,EAAO,QAAEC,GAAYc,GACvB,QAAE7C,GAAYrB,KACbgL,EAAWC,IAAgBC,EAAAA,EAAAA,WAAS,IACpC1B,EAAW2B,IAAgBD,EAAAA,EAAAA,WAAS,IACpCE,EAAWC,IAAgBH,EAAAA,EAAAA,UAAS,IAE3C,IAAK9H,EACH,OACET,EAAAA,EAAAA,KAAA,OAAKE,UAAWxB,EAAQyI,aAAa7G,UACnCN,EAAAA,EAAAA,KAAA,QAAME,UAAWxB,EAAQ+I,aAAanH,SAAC,iBAK7C,MACMqI,EAzCR,SACE7H,EACAL,GAEA,GAAqB,IAAjBK,EAAMqB,OACR,MAAO,QAET,GAAqB,IAAjBrB,EAAMqB,OAAc,CACtB,MAAMiE,EAAOtF,EAAM,GACnB,OACEsF,EAAKwC,aAELxC,EAAKyC,eAEDjI,IAAIkI,GAAKrI,EAAQsI,gBAAgBC,IAAIF,IAAIF,aAC1CK,KAAK,MACR,MAEJ,CACA,MAAO,GAAGnI,EAAMqB,cAClB,CAqBuB+G,CADP3I,EAAiBC,EAASC,GACMA,GAExC0I,EAAkBA,KACtBT,EAAa9L,EAAIwE,OAASuH,GAC1BL,GAAa,IAGTc,EAAaA,KACbX,EAAUY,QACZzM,EAAI0M,SAASb,EAAUY,QAEzBf,GAAa,IAWf,OACEtI,EAAAA,EAAAA,KAAA,OACEE,UAAWxB,EAAQyI,aACnBoC,aAAcA,KACZf,GAAa,IAEfgB,aAAcA,KACZhB,GAAa,IACblI,UAEFN,EAAAA,EAAAA,KAAA,OAAKE,UAAWxB,EAAQ2I,SAAS/G,SAC9B+H,GACCrI,EAAAA,EAAAA,KAACyJ,EAAAA,GAAS,CACRC,WAAS,EACTxJ,UAAWxB,EAAQkJ,UACnB+B,MAAOlB,EACPmB,SAAUzB,IACRO,EAAaP,EAAE0B,OAAOF,QAExBG,QAAS3B,IACPA,EAAE0B,OAAOE,UAEXC,OAAQZ,EACRa,UA/Ba9B,IACP,UAAVA,EAAE+B,IACJd,IACmB,WAAVjB,EAAE+B,KACX5B,GAAa,IA4BP1I,QAASsI,MAGXlE,EAAAA,EAAAA,MAAAmG,EAAAA,SAAA,CAAA7J,SAAA,EACEN,EAAAA,EAAAA,KAACoK,EAAAA,EAAU,CACTlK,UAAWxB,EAAQ+I,aACnB4C,QAAQ,QACRC,cAAenB,EAAgB7I,SAE9B1D,EAAIwE,OAASuH,KAEhB3I,EAAAA,EAAAA,KAAC4G,EAAc,CACbC,UAAWA,EACXC,SAAUqC,EACVpC,QAASA,KACPnK,EAAIkH,iBAQpB,G,SCnIA,MAAMzG,IAAYC,EAAAA,EAAAA,IAAAA,CAAa,KAAM,CACnCkI,UAAW,CACT7H,OAAQ,OACR4M,MAAO,OACPC,QAAS,iBAQb,SAASC,GACPhM,EACAG,GAEA,GAAKH,EAGL,OAAIG,EACK,CAAEG,eAAgBN,EAAOG,aAE3B,CAAEG,eAAgBN,EAC3B,CAEA,MAAMiM,GAAa,CACjBC,YAAaC,GAGTC,GAAgB,CACpBC,WAAYC,IAocd,IAjc4B9E,EAAAA,EAAAA,UAAS,UAA6B,QAChExF,IAEA,MAAM,QAAE/B,GAAYrB,KACdE,GAAQyN,EAAAA,EAAAA,MACPpO,EAAKqO,IAAU1C,EAAAA,EAAAA,UAA6B,MAC7C2C,GAAoBC,EAAAA,EAAAA,QAAoB,IAAIC,KAC5CC,GAAiBF,EAAAA,EAAAA,SAAO,GACxBG,GAAaH,EAAAA,EAAAA,QAAO1K,GAC1B6K,EAAWC,QAAU9K,EAErB,MAAM5D,GAAkB2O,EAAAA,EAAAA,aACrBC,IACC,GAAK7O,EAAL,CAGAyO,EAAeE,SAAU,EACzB,IACEE,EAAQ7O,EACV,CAAE,QACAyO,EAAeE,SAAU,CAC3B,CANA,GAQF,CAAC3O,IAGGE,GAAc0O,EAAAA,EAAAA,aACjBE,IACC,IAAK9O,EACH,OAEF,MAAM4D,EAAU,UAASmL,EAAAA,EAAAA,OACnBlN,EAAQiN,GAAe9O,EAAIgP,YACjChP,EAAI6F,SAAS,IACRtB,EAAkBX,EAASC,EAAS,WACvCiC,SAAU+H,GAAiBhM,MAGzBiC,EAAAA,EAAAA,GAA4BD,IAC9BA,EAAQoL,iBAAiBrL,IAG7B,CAAC5D,EAAK6D,IAGFqL,GAAkBN,EAAAA,EAAAA,aACtB,CAACxO,EAAgB4B,KACf,IAAKhC,KAAQ8D,EAAAA,EAAAA,GAA4BD,GACvC,OAIFA,EAAQsL,oBAAoB/O,GAG5B,MAAMwD,EAAU,UAASmL,EAAAA,EAAAA,OACzB/O,EAAI6F,SAAS,IACRtB,EAAkBX,EAASC,EAAS,WACvCiC,SAAU+H,GAAiB7N,EAAIgP,YAAahN,KAE9C6B,EAAQuL,kBAAkBxL,EAASxD,GACnCyD,EAAQoL,iBAAiBrL,IAE3B,CAAC5D,EAAK6D,IAGF1D,GAAmByO,EAAAA,EAAAA,aACtBxO,IACC8O,EAAgB9O,IAElB,CAAC8O,IAGG5O,GAAuBsO,EAAAA,EAAAA,aAC1BxO,IACC8O,EAAgB9O,EAAQ,UAE1B,CAAC8O,IAGGG,GAAeC,EAAAA,EAAAA,SACnB,KAAM,CACJtP,MACAC,kBACAC,cACAC,mBACAG,yBAEF,CAACN,EAAKC,EAAiBC,EAAaC,EAAkBG,IAGlDiP,GAAsBX,EAAAA,EAAAA,aAAaY,IACvC,MAAM3L,EAAU6K,EAAWC,QACrBc,GAAgB7P,EAAAA,EAAAA,MAGhB8P,GAAa5L,EAAAA,EAAAA,GAA4BD,GAC3CA,EAAQ8L,UACRrL,EAGJ,GAAIoL,IAAc5L,EAAAA,EAAAA,GAA4BD,GAAU,CAEtD,IAAI+L,EADJtB,EAAkBK,QAAQkB,QAI1B,MAAMC,EAA4D,GAIlE,SAASC,EACPC,EACA7N,EACAH,GAEA,GAAKgO,EAAL,CAGA,QAAqB1L,IAAjB0L,EAAKC,QAAuB,CAE9B,MAAMrM,EAAU,UAASmL,EAAAA,EAAAA,OACpBa,IACHA,EAAehM,GAEjB,MAAMkC,EACJ3D,GAAkBH,EACd,CAAEG,iBAAgBH,aAClBG,EACE,CAAEA,uBACFmC,EACRkL,EAAY3J,SAAS,IAChBtB,EAAkBX,EAASC,EAAS,OACvCiC,aAGF,IAAK,MAAM1F,KAAU4P,EAAKC,SACpBnM,EAAAA,EAAAA,GAA4BD,IAC9BA,EAAQuL,kBAAkBxL,EAASxD,GAErCkO,EAAkBK,QAAQuB,IAAI9P,GAGhC,MAAMyB,EAAQ2N,EAAYW,SAASvM,IAAU/B,MAK7C,OAHIA,QAAuByC,IAAd0L,EAAKvM,MAChBqM,EAAWM,KAAK,CAAEvO,QAAO4B,KAAMuM,EAAKvM,OAE/B5B,CACT,CACA,GAAImO,EAAKtM,UAAYsM,EAAKtM,SAAS6B,OAAS,EAAG,CAE7C,MAAM8K,EACe,eAAnBL,EAAKhO,UAA6B,QAAU,QAC9C,IAAIsO,EAAenO,EACnB,IAAK,IAAIoO,EAAI,EAAGA,EAAIP,EAAKtM,SAAS6B,OAAQgL,IAAK,CAC7C,MAIMtO,EAAW8N,EAJHC,EAAKtM,SAAS6M,GAGL,IAANA,EAAUpO,EAAiBmO,EADf,IAANC,EAAUvO,EAAYqO,GAGzCpO,IACFqO,EAAerO,EAEnB,CACA,OAAOqO,CACT,CAhDA,CAkDF,CAOA,GALAP,EAAYL,OAAYpL,OAAWA,GAMjCwL,EAAWvK,QAAU,GACrBmK,EAAW1N,WACX8N,EAAWvK,SAAWmK,EAAWhM,UAAU6B,OAC3C,CACA,MAAMvD,EAAY0N,EAAW1N,UAC7BwO,sBAAsB,KACpB,MAAMC,EAAYX,EAAWY,OAAO,CAACC,EAAKC,IAAMD,EAAMC,EAAEnN,KAAM,GAC9D,GAAIgN,EAAY,EACd,GAAkB,eAAdzO,EAA4B,CAC9B,MAAM6O,EAAiBrB,EAAY7B,MACnC,GAAIkD,EAAiB,EACnB,IAAK,MAAM,MAAEhP,EAAK,KAAE4B,KAAUqM,EAAY,CACxC,MAAMnC,EAAQ9F,KAAKiJ,MAAMD,GAAkBpN,EAAOgN,IAClD5O,EAAM7B,IAAI+Q,QAAQ,CAAEpD,SACtB,CAEJ,KAAO,CACL,MAAMqD,EAAkBxB,EAAYzO,OACpC,GAAIiQ,EAAkB,EACpB,IAAK,MAAM,MAAEnP,EAAK,KAAE4B,KAAUqM,EAAY,CACxC,MAAM/O,EAAS8G,KAAKiJ,MAClBE,GAAmBvN,EAAOgN,IAE5B5O,EAAM7B,IAAI+Q,QAAQ,CAAEhQ,UACtB,CAEJ,GAGN,CASA,OANA8C,EAAQoN,aAAQ3M,QACZsL,IACF/L,EAAQoL,iBAAiBW,GAEzBJ,EAAYW,SAASP,IAAe5P,IAAImD,aAG5C,CAGA,IAAIW,EAAAA,EAAAA,GAA4BD,GAAU,CACxC,IAAK,MAAMD,KAAWC,EAAQqN,qBAAqBC,OACjDtN,EAAQ6B,YAAY9B,GAEtBC,EAAQuN,uBAAkB9M,EAC5B,CAQA,GAPAgK,EAAkBK,QAAQkB,QAKxBJ,GAAiB5L,EAAQK,MAAMmN,KAAKjN,GAAKA,EAAEH,KAAOwL,EAAcrP,UAEzC0D,EAAAA,EAAAA,GAA4BD,GAAU,CAE7D,MAAM,KAAExD,EAAMD,OAAQkR,GAAkB7B,EAClC8B,EAAe1N,EAAQK,MAC1BF,IAAII,GAAKA,EAAEH,IACXI,OAAOJ,GAAMA,IAAOqN,GAIvB,GAAIC,EAAahM,OAAS,EAAG,CAC3B,MAAMqK,EAAe,UAASb,EAAAA,EAAAA,OAC9BS,EAAY3J,SAAStB,EAAkBqL,EAAc/L,IACrD,IAAK,MAAMzD,KAAUmR,EACnB1N,EAAQuL,kBAAkBQ,EAAcxP,GACxCkO,EAAkBK,QAAQuB,IAAI9P,EAElC,CAGA,MAAMoR,EAAiB,UAASzC,EAAAA,EAAAA,OAC1B/M,EAAqB,eAAT3B,EAAwB,aAAUiE,EACpDkL,EAAY3J,SAAS,IAChBtB,EAAkBiN,EAAgB3N,EAAS,WAC9CiC,SAAU+H,GAAiB2B,EAAYR,YAAahN,KAEtD6B,EAAQuL,kBAAkBoC,EAAgBF,GAC1ChD,EAAkBK,QAAQuB,IAAIoB,GAC9BzN,EAAQoL,iBAAiBuC,IAGzB3R,EAAAA,EAAAA,KACF,KAAO,CAEL,MAAM+D,EAAU,UAASmL,EAAAA,EAAAA,OACzBS,EAAY3J,SAAStB,EAAkBX,EAASC,KAE5CC,EAAAA,EAAAA,GAA4BD,IAC9BA,EAAQoL,iBAAiBrL,EAE7B,GACC,IAEG6N,GAAU7C,EAAAA,EAAAA,aACb8C,IACCrD,EAAOqD,EAAM1R,KAEb0R,EAAM1R,IAAI2R,uBAAuBpG,IAC3BA,GAAGtH,KAAMH,EAAAA,EAAAA,GAA4B4K,EAAWC,UAClDD,EAAWC,QAAQM,iBAAiB1D,EAAEtH,MAI1CyN,EAAM1R,IAAI4R,iBAAiBrG,IACzB,IAAIkD,EAAeE,UAGf7K,EAAAA,EAAAA,GAA4B4K,EAAWC,SAAU,CACnD,MAAMsB,EAAUvB,EAAWC,QAAQ5K,mBAAmBwH,EAAEtH,IACxD,IAAK,MAAM7D,KAAU6P,EAAS,CAC5B,MAAMzG,EAAOkF,EAAWC,QAAQzK,MAAMC,KAAKC,GAAKA,EAAEH,KAAO7D,GACrDoJ,GACFkF,EAAWC,QAAQkD,WAAWrI,EAElC,CACAkF,EAAWC,QAAQjJ,YAAY6F,EAAEtH,GACnC,IAGFyN,EAAM1R,IAAI8R,kBAAkB,MAEvBrD,EAAeE,UAChB7K,EAAAA,EAAAA,GAA4B4K,EAAWC,UAEvCD,EAAWC,QAAQyC,kBACjBxM,EAAsB8M,EAAM1R,IAAI+R,aAOtC,MAAMC,EAA+C,QAA5BpS,EAAAA,EAAAA,MACnBqS,GAAkBnO,EAAAA,EAAAA,GAA4B4K,EAAWC,SAC3DD,EAAWC,QACX,KACEuD,GAAeF,GAAoBC,GAAiBE,eAE1D,GAAID,EACF,IACEzD,EAAeE,SAAU,EACzB+C,EAAM1R,IAAIoS,SAASF,GACnB/M,EAAkBuM,EAAM1R,IAAKiS,GAC7B,IAAK,MAAMhC,KAAWgC,EAAgBf,qBAAqBmB,SACzD,IAAK,MAAMjS,KAAU6P,EACnB3B,EAAkBK,QAAQuB,IAAI9P,GAIlC,GAAgC,IAA5BsR,EAAM1R,IAAI8E,OAAOS,OACnB,MAAM,IAAI+M,MAAM,mCAEpB,CAAE,MAAO/G,GACPgH,QAAQC,MAAM,qCAAsCjH,GACpDgE,EAAoBmC,EAAM1R,IAC5B,CAAE,QACAyO,EAAeE,SAAU,CAC3B,MAEAY,EAAoBmC,EAAM1R,MAG9B,CAACuP,KAGHkD,EAAAA,EAAAA,WAAU,KACQC,EAAAA,EAAAA,SAAQ,KACtB,IAAK1S,EACH,OAGF,MAAM,MAAEkE,GAAUL,EACZ8O,EAAiB,IAAInE,IAAItK,EAAMF,IAAII,GAAKA,EAAEH,KAC1C2O,EAAatE,EAAkBK,QAErC,IAAK,MAAMnF,KAAQtF,EACjB,IAAK0O,EAAWC,IAAIrJ,EAAKvF,MACvB2O,EAAW1C,IAAI1G,EAAKvF,KAEhBH,EAAAA,EAAAA,GAA4BD,IAAU,CACxC,IAAIiP,EAAgBjP,EAAQiP,cAC5B,IAAKA,IAAkB9S,EAAImQ,SAAS2C,GAAgB,CAClD,MAAMC,EAAa/S,EAAI8E,OAAO,GAC1BiO,EACFD,EAAgBC,EAAW9O,IAE3B6O,EAAgB,UAAS/D,EAAAA,EAAAA,OACzB/O,EAAI6F,SAAStB,EAAkBuO,EAAejP,KAEhDA,EAAQoL,iBAAiB6D,EAC3B,CACAjP,EAAQuL,kBAAkB0D,EAAetJ,EAAKvF,GAChD,CAIJ,IAAK,MAAMA,KAAM2O,EACVD,EAAeE,IAAI5O,KACtB2O,EAAWI,OAAO/O,IACdH,EAAAA,EAAAA,GAA4BD,IAC9BA,EAAQsL,oBAAoBlL,MAOnC,CAACJ,EAAS7D,KAGbyS,EAAAA,EAAAA,WAAU,KACR,GAAKzS,IAAQ8D,EAAAA,EAAAA,GAA4BD,GAoCzC,OAhCgB6O,EAAAA,EAAAA,SAAQ,KACtB,MAAM,eAAEP,GAAmBtO,EAC3B,IAAKsO,GAAkB1D,EAAeE,QACpC,OAIF,MAAMsE,EAAgBrO,EAAsB5E,EAAI+R,UAChD,GAAImB,KAAKC,UAAUF,KAAmBC,KAAKC,UAAUhB,GAArD,CAKA1D,EAAeE,SAAU,EACzB,IACE3O,EAAIoS,SAASD,GACbhN,EAAkBnF,EAAK0O,EAAWC,SAGlCL,EAAkBK,QAAQkB,QAC1B,IAAK,MAAMI,KAAWpM,EAAQqN,qBAAqBmB,SACjD,IAAK,MAAMjS,KAAU6P,EACnB3B,EAAkBK,QAAQuB,IAAI9P,EAGpC,CAAE,MAAOmL,GACPgH,QAAQC,MAAM,+CAAgDjH,EAChE,CAAE,QACAkD,EAAeE,SAAU,CAC3B,CAnBA,KAuBD,CAAC9K,EAAS7D,IAEb,MAAMoT,EACmB,SAAvBzS,EAAMQ,QAAQkS,KACV,sBACA,uBAEN,OACEjQ,EAAAA,EAAAA,KAACtD,EAAAA,GAAgBwT,SAAQ,CAACvG,MAAOsC,EAAa3L,UAC5CN,EAAAA,EAAAA,KAAA,OAAKE,UAAW,GAAGxB,EAAQ8G,aAAawK,IAAa1P,UACnDN,EAAAA,EAAAA,KAACmQ,EAAAA,GAAa,CACZzF,WAAYA,GACZG,cAAeA,GACfuF,2BAA4BhS,EAC5BiS,4BAA6B1N,EAC7B0L,QAASA,OAKnB,E,yMCzfA,MAAMhR,GAAYC,EAAAA,EAAAA,IAAAA,CAAaC,IAAS,CACtCmC,KAAM,CACJ5B,MAAOP,EAAMQ,QAAQuS,UAAUrS,iBA8BnC,GA1BoBgI,EAAAA,EAAAA,UAAS,UAAqB,KAChDG,EAAI,QACJW,EAAO,WACPwJ,IAMA,MAAM,QAAE7R,GAAYrB,IACpB,OACE2G,EAAAA,EAAAA,MAAAmG,EAAAA,SAAA,CAAA7J,SAAA,EACEN,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CAAC,cAAY,gBAAgBjE,QAAS2Q,EAAWjQ,SACzD8F,EAAKoK,WACJxQ,EAAAA,EAAAA,KAACC,EAAAA,EAAO,CAACC,UAAWxB,EAAQgB,KAAMvB,SAAS,WAE3C6B,EAAAA,EAAAA,KAACyQ,EAAAA,EAAY,CAACvQ,UAAWxB,EAAQgB,KAAMvB,SAAS,aAGpD6B,EAAAA,EAAAA,KAAC6D,EAAAA,EAAU,CAAC,cAAY,aAAajE,QAASmH,EAAQzG,UACpDN,EAAAA,EAAAA,KAAC+D,EAAAA,EAAS,CAAC7D,UAAWxB,EAAQgB,KAAMvB,SAAS,cAIrD,G,0BC/BA,MAAMd,GAAYC,EAAAA,EAAAA,IAAAA,CAAaC,IAAS,CACtCmT,MAAO,CACLC,cAAe,EACfC,WAAY,GAEdC,UAAW,CACT/S,MAAOP,EAAMQ,QAAQuS,UAAUrS,cAEjC6S,UAAW,CACT,UAAW,CACTjJ,gBAAiBtK,EAAMQ,QAAQuS,UAAUS,QAG7CC,aAAc,CACZC,YAAa1T,EAAMQ,QAAQC,QAAQkT,KACnCrJ,gBAAiBtK,EAAMQ,QAAQuS,UAAUS,UAmC7C,GAhC2B9K,EAAAA,EAAAA,UAAS,UAA4B,KAC9DG,IAIA,MAAM,QAAE1H,GAAYrB,KACd,gBAAE0L,IAAoBoI,EAAAA,EAAAA,YAAW/K,GACvC,OACEpG,EAAAA,EAAAA,KAAC4D,EAAAA,EAAO,CAACxC,MAAM,cAAcgQ,OAAK,EAAA9Q,UAChCN,EAAAA,EAAAA,KAACqR,EAAAA,EAAkB,CACjB1H,MACEvD,EAAKwC,aAEL,GAAGxC,EAAKyC,eAAejI,IAAIkI,GAAKC,EAAgBC,IAAIF,IAAIF,aAAaK,KAAK,MAAQ,kBAChF7C,EAAKoK,UAAY,eAAiB,KAGtCc,SAAUC,IACRnL,EAAKoL,eAAeD,IAEtBlH,QAAQ,QACR3L,QAAS,CACPgS,MAAOhS,EAAQgS,MACfG,UAAWnS,EAAQmS,UACnBC,UAAWpS,EAAQoS,UACnBE,aAActS,EAAQsS,iBAKhC,G,6ICpBA,MAuIA,GAvIiB/K,EAAAA,EAAAA,UAAS,UAAkB,MAC1CwL,EAAK,UACLC,IAMA,MAAMjR,GAAU0Q,EAAAA,EAAAA,YAAWM,IAarB,iBAAE1U,EAAgB,qBAAEG,IAAyBC,EAAAA,EAAAA,KAC7CwU,EAAWlR,EAAQmR,gBAAiBlR,EAAAA,EAAAA,GAA4BD,GAChEoR,EAAYF,EAnCpB,SAA2BlR,EAAkBzD,GAC3C,KAAK0D,EAAAA,EAAAA,GAA4BD,GAC/B,OAAO,EAET,IAAK,MAAMoM,KAAWpM,EAAQqN,qBAAqBmB,SACjD,GAAIpC,EAAQiF,SAAS9U,GACnB,OAAO6P,EAAQ1K,OAGnB,OAAO,CACT,CA0BM4P,CAAkBtR,EAASgR,EAAM5Q,IACjCJ,EAAQK,MAAMqB,OAEZ6P,EAAWA,CACfC,EACAC,KAEIP,EACFM,EAAQR,EAAM5Q,IAEdqR,EAAUT,EAAM5Q,KAIpB,OACEb,EAAAA,EAAAA,KAACG,EAAAA,EAAmB,CAClB,cAAY,iBACZC,UAAWA,IAAM,CACf,CACEX,MAAO,eACPxC,KAAM,UACNkV,QAAS,CACP,CACE1S,MAAO,YACPC,KAAM0S,EAAAA,EACNxS,QAASA,KACPa,EAAQ4R,QACNZ,EAAMxU,KCrFjB,SACLqV,GAEA,MAAMC,EAAQ,IAAIC,IA6BlB,OA3BA,SAASC,EAAa9I,GACpB,GAAIA,QACF,OAAOA,EAGT,GAAI+I,MAAMC,QAAQhJ,GAChB,OAAOA,EAAM/I,IAAI6R,GAGnB,GAAqB,iBAAV9I,EAAoB,CAC7B,MAAMiJ,EAAkC,CAAC,EACzC,IAAK,MAAO1I,EAAKqH,KAAQ5P,OAAOE,QAAQ8H,GAC1B,OAARO,GAA+B,iBAARqH,GACpBgB,EAAM9C,IAAI8B,IACbgB,EAAMM,IAAItB,GAAK5F,EAAAA,EAAAA,MAEjBiH,EAAO1I,GAAO,GAAGqH,KAAOgB,EAAMvJ,IAAIuI,MAElCqB,EAAO1I,GAAOuI,EAAalB,GAG/B,OAAOqB,CACT,CAEA,OAAOjJ,CACT,CAEO8I,CAAaH,EACtB,CDqDkBQ,CACEC,iBAEEC,EAAAA,EAAAA,aAAYvB,QAMtB,CACEhS,MAAO,kBACPC,KAAMuT,EAAAA,EACNrT,QAASA,KACP7C,EAAiB0U,EAAM5Q,IACvBJ,EAAQyS,kBAAiB,KAG7B,CACEzT,MAAO,4CACPC,KAAMG,EAAAA,EACND,QAASA,KACP1C,EAAqBuU,EAAM5Q,IAC3BJ,EAAQyS,kBAAiB,QAGzBrB,EAAY,EACZ,CACE,CACEpS,MAAO,mBACPC,KAAMyT,EAAAA,EACNvT,QAASA,KACPoS,EACEvR,EAAQ2S,qBACR3S,EAAQ4S,kBAKhB,MACAxB,EAAY,EACZ,CACE,CACEpS,MAAO,eACPC,KAAM4T,EAAAA,EACN1T,QAASA,KACPoS,EAASvR,EAAQ8S,kBAAmB9S,EAAQ+S,cAGhD,CACE/T,MAAO,iBACPC,KAAM+T,EAAAA,EACN7T,QAASA,KACPoS,EACEvR,EAAQiT,oBACRjT,EAAQkT,iBAKhB,MACA9B,EAAY,EACZ,CACE,CACEpS,MAAO,sBACPC,KAAMkU,EAAAA,EACNhU,QAASA,KACPoS,EACEvR,EAAQoT,wBACRpT,EAAQqT,qBAKhB,QAGLrC,EAAMrR,aACTE,UAEFN,EAAAA,EAAAA,KAAC+T,EAAAA,EAAQ,IAAKrC,EAAWvT,SAAS,WAGxC,GE3JMd,GAAYC,EAAAA,EAAAA,IAAAA,CAAaC,IAAS,CACtCmC,KAAM,CACJ5B,MAAOP,EAAMQ,QAAQuS,UAAUrS,cAEjC+V,KAAM,CACJC,SAAU,GAEZC,WAAY,CACVzW,QAAS,OACTE,OAAQwW,EAAAA,mBACRC,IAAK,EACLC,OAAQ,KAEVC,UAAW,CACT7W,QAAS,OACTC,WAAY,aAkDhB,GA9CmBuI,EAAAA,EAAAA,UAAS,UAAoB,KAC9CG,EAAI,QACJW,EAAO,WACPwJ,EAAU,UACVrQ,IAOA,MAAM,QAAExB,GAAYrB,IACdkX,GAAYpJ,EAAAA,EAAAA,QAAuB,MACnC1K,GAAU0Q,EAAAA,EAAAA,YAAW/K,GAC3B,IAAIoO,GAAoB,EAYxB,OAXIC,EAAAA,EAAAA,GAA2BhU,MACzB+T,qBAAsB/T,IAK5B4O,EAAAA,EAAAA,WAAU,KACY,oBAATqF,MAAwBC,OAAOC,OAASD,OAAOP,KACxDG,EAAUhJ,SAASsJ,eAAe,CAAEC,MAAO,YAE5C,KAED9Q,EAAAA,EAAAA,MAAA,OACE+Q,IAAKR,EACLrU,WAAW8U,EAAAA,EAAAA,IAAGtW,EAAQwV,WAAYhU,GAClC+U,MAAO,CAAEvS,SAAU8R,EAAoB,cAAWtT,GAAYZ,SAAA,EAE9DN,EAAAA,EAAAA,KAACkV,EAAQ,CAACzD,MAAOrL,EAAMsL,UAAW,CAAExR,UAAWxB,EAAQgB,SACvDM,EAAAA,EAAAA,KAAA,OAAKE,UAAWxB,EAAQsV,QACxBhQ,EAAAA,EAAAA,MAAA,OAAK9D,UAAWxB,EAAQ4V,UAAUhU,SAAA,CAC/BG,EAAQ0U,gBAAkB/O,EAAKvF,IAC9Bb,EAAAA,EAAAA,KAACoV,EAAAA,EAAsB,CAAClV,UAAWxB,EAAQgB,KAAMvB,SAAS,UACxD,MACJ6B,EAAAA,EAAAA,KAACqV,EAAkB,CAACjP,KAAMA,QAE5BpG,EAAAA,EAAAA,KAAA,OAAKE,UAAWxB,EAAQsV,QACxBhU,EAAAA,EAAAA,KAACsV,EAAW,CAACvO,QAASA,EAASwJ,WAAYA,EAAYnK,KAAMA,MAGnE,G,eClEA,MAwBA,GAxBoBH,EAAAA,EAAAA,UAAS,UAAqB,KAChDG,EAAI,QACJ3F,IAKA,MAAM,cAAE8U,IAAkBC,EAAAA,EAAAA,QAAO/U,GAC3BgV,EAAWF,EAAcG,YAAYtP,EAAKnJ,MAChD,IAAKwY,EACH,MAAM,IAAIvG,MAAM,qBAAqB9I,EAAKnJ,QAE5C,MAAM,eAAE0Y,GAAmBF,EAC3B,OAAIrP,EAAKoK,UACA,MAIPxQ,EAAAA,EAAAA,KAACkG,EAAAA,SAAQ,CAACC,UAAUnG,EAAAA,EAAAA,KAAC4V,EAAAA,EAAe,CAACvL,QAAQ,OAAQ/J,UACnDN,EAAAA,EAAAA,KAAC2V,EAAc,CAAClE,MAAOrL,EAAM3F,QAASA,KAG5C,GCnBMpD,GAAYC,EAAAA,EAAAA,IAAAA,CAAaC,IAAS,CACtCsY,cAAe,CACbC,OAAQvY,EAAMwY,QAAQ,IACtBlY,QAAS,KAAKN,EAAMwY,QAAQ,MAAMxY,EAAMwY,QAAQ,KAChDxO,SAAU,QAIZyO,YAAa,CACXtQ,WAAYnI,EAAMQ,QAAQuS,UAAUY,MAEtC+E,cAAe,CACbvQ,WAAYnI,EAAMQ,QAAQuS,UAAU4F,SA+DxC,GA3DsBjQ,EAAAA,EAAAA,UAAS,UAAuB,KACpDG,EAAI,QACJ3F,IAKA,MAAMlD,GAAQyN,EAAAA,EAAAA,KACR+J,GAAMoB,EAAAA,EAAAA,gBAAe/P,EAAM7I,EAAMwY,QAAQ,KACzC,QAAErX,GAAYrB,KAEpBgS,EAAAA,EAAAA,WAAU,KACR,SAAS+G,EAAiBjO,GACpBA,EAAE0B,kBAAkBwM,SAAWtB,EAAIxJ,SAAS+K,SAASnO,EAAE0B,SACzDpJ,EAAQ8V,iBAAiBnQ,EAAKvF,GAElC,CAIA,OAFA2V,SAASC,iBAAiB,YAAaL,GACvCI,SAASC,iBAAiB,UAAWL,GAC9B,KACLI,SAASE,oBAAoB,YAAaN,GAC1CI,SAASE,oBAAoB,UAAWN,KAEzC,CAACrB,EAAKtU,EAAS2F,IAElB,MAAMuQ,EACJlW,EAAQ0U,gBAAkB/O,EAAKvF,GAC3BnC,EAAQsX,YACRtX,EAAQuX,cACRW,GAAyB5B,EAAAA,EAAAA,IAC7BtW,EAAQmX,cACRc,GAGF,OACE3S,EAAAA,EAAAA,MAAC6S,EAAAA,EAAK,CACJ9B,IAAKA,EACL+B,UAAW,GACX5W,UAAW0W,EACX,cAAa,kBAAkBxQ,EAAKvF,KAAKP,SAAA,EAEzCN,EAAAA,EAAAA,KAAC+W,EAAU,CACT3Q,KAAMA,EACNW,QAASA,KACPtG,EAAQgO,WAAWrI,IAErBmK,WAAYA,KACVnK,EAAK4Q,cAAc5Q,EAAKoK,YAE1BtQ,UAAWyW,KAEb3W,EAAAA,EAAAA,KAAC6W,EAAAA,EAAK,CAACC,UAAW,EAAExW,UAClBN,EAAAA,EAAAA,KAACiX,EAAW,CAAC7Q,KAAMA,EAAM3F,QAASA,QAI1C,E","sources":["webpack://@jbrowse/web/../../packages/app-core/src/ui/App/DockviewContext.tsx","webpack://@jbrowse/web/../../packages/app-core/src/ui/App/DockviewLeftHeaderActions.tsx","webpack://@jbrowse/web/../../packages/app-core/src/ui/App/dockviewUtils.ts","webpack://@jbrowse/web/../../packages/app-core/src/ui/App/DockviewRightHeaderActions.tsx","webpack://@jbrowse/web/../../packages/app-core/src/ui/App/JBrowseViewPanel.tsx","webpack://@jbrowse/web/../../packages/app-core/src/ui/App/JBrowseTabMenu.tsx","webpack://@jbrowse/web/../../packages/app-core/src/ui/App/JBrowseViewTab.tsx","webpack://@jbrowse/web/../../packages/app-core/src/ui/App/TiledViewsContainer.tsx","webpack://@jbrowse/web/../../packages/app-core/src/ui/App/ViewButtons.tsx","webpack://@jbrowse/web/../../packages/app-core/src/ui/App/ViewContainerTitle.tsx","webpack://@jbrowse/web/../../packages/app-core/src/ui/App/ViewMenu.tsx","webpack://@jbrowse/web/../../packages/app-core/src/ui/App/copyView.ts","webpack://@jbrowse/web/../../packages/app-core/src/ui/App/ViewHeader.tsx","webpack://@jbrowse/web/../../packages/app-core/src/ui/App/ViewWrapper.tsx","webpack://@jbrowse/web/../../packages/app-core/src/ui/App/ViewContainer.tsx"],"sourcesContent":["import { createContext, useContext } from 'react'\n\nimport type { DockviewApi, DockviewGroupPanel } from 'dockview-react'\n\ninterface DockviewContextValue {\n  api: DockviewApi | null\n  rearrangePanels: (arrange: (api: DockviewApi) => void) => void\n  addEmptyTab: (targetGroup?: DockviewGroupPanel) => void\n  moveViewToNewTab: (viewId: string) => void\n  moveViewToSplitRight: (viewId: string) => void\n}\n\n// Pending action stored when workspaces not yet enabled\nlet pendingMoveAction: {\n  type: 'newTab' | 'splitRight'\n  viewId: string\n} | null = null\n\nexport function peekPendingMoveAction() {\n  return pendingMoveAction\n}\n\nexport function clearPendingMoveAction() {\n  pendingMoveAction = null\n}\n\nexport function getPendingMoveAction() {\n  const action = pendingMoveAction\n  pendingMoveAction = null\n  return action\n}\n\n// Functions to set pending actions (used by default context and for testing)\nexport function setPendingMoveToNewTab(viewId: string) {\n  pendingMoveAction = { type: 'newTab', viewId }\n}\n\nexport function setPendingMoveToSplitRight(viewId: string) {\n  pendingMoveAction = { type: 'splitRight', viewId }\n}\n\nexport const DockviewContext = createContext<DockviewContextValue>({\n  api: null,\n  rearrangePanels: () => {},\n  addEmptyTab: () => {},\n  moveViewToNewTab: setPendingMoveToNewTab,\n  moveViewToSplitRight: setPendingMoveToSplitRight,\n})\n\nexport function useDockview() {\n  return useContext(DockviewContext)\n}\n","import CascadingMenuButton from '@jbrowse/core/ui/CascadingMenuButton'\nimport { makeStyles } from '@jbrowse/core/util/tss-react'\nimport AddIcon from '@mui/icons-material/Add'\nimport HorizontalSplitIcon from '@mui/icons-material/HorizontalSplit'\nimport TabIcon from '@mui/icons-material/Tab'\nimport VerticalSplitIcon from '@mui/icons-material/VerticalSplit'\n\nimport { useDockview } from './DockviewContext.tsx'\n\nimport type { IDockviewHeaderActionsProps } from 'dockview-react'\n\nconst useStyles = makeStyles()(theme => ({\n  headerActions: {\n    display: 'flex',\n    alignItems: 'center',\n    height: '100%',\n  },\n  headerButton: {\n    padding: 4,\n    color: theme.palette.primary.contrastText,\n  },\n  headerIcon: {\n    fontSize: 16,\n  },\n}))\n\nexport default function DockviewLeftHeaderActions({\n  containerApi,\n  group,\n}: IDockviewHeaderActionsProps) {\n  const { classes } = useStyles()\n  const { addEmptyTab } = useDockview()\n\n  const handleSplit = (direction: 'right' | 'below') => {\n    const newGroup = containerApi.addGroup({\n      referenceGroup: group,\n      direction,\n    })\n    addEmptyTab(newGroup)\n  }\n\n  return (\n    <div className={classes.headerActions}>\n      <CascadingMenuButton\n        menuItems={[\n          {\n            label: 'New empty tab',\n            icon: TabIcon,\n            onClick: () => {\n              addEmptyTab()\n            },\n          },\n          {\n            label: 'New empty split horizontal',\n            icon: VerticalSplitIcon,\n            onClick: () => {\n              handleSplit('right')\n            },\n          },\n          {\n            label: 'New empty split vertical',\n            icon: HorizontalSplitIcon,\n            onClick: () => {\n              handleSplit('below')\n            },\n          },\n        ]}\n        size=\"small\"\n        className={classes.headerButton}\n        onClick={() => {\n          group.api.setActive()\n        }}\n      >\n        <AddIcon className={classes.headerIcon} />\n      </CascadingMenuButton>\n    </div>\n  )\n}\n","import { isSessionWithDockviewLayout } from '../../DockviewLayout/index.ts'\n\nimport type { DockviewSessionType } from './types.ts'\nimport type { AbstractViewModel } from '@jbrowse/core/util'\nimport type { DockviewApi } from 'dockview-react'\n\nexport function getViewsForPanel(\n  panelId: string,\n  session: DockviewSessionType | undefined,\n): AbstractViewModel[] {\n  if (!session || !isSessionWithDockviewLayout(session)) {\n    return []\n  }\n  const viewIds = session.getViewIdsForPanel(panelId)\n  return [...viewIds]\n    .map(id => session.views.find(v => v.id === id))\n    .filter((v): v is AbstractViewModel => v !== undefined)\n}\n\nexport function createPanelConfig(\n  panelId: string,\n  session: DockviewSessionType,\n  title = 'Main',\n) {\n  return {\n    id: panelId,\n    component: 'jbrowseView' as const,\n    tabComponent: 'jbrowseTab' as const,\n    title,\n    params: { panelId, session },\n  }\n}\n\nexport function cleanLayoutForStorage(\n  layout: ReturnType<DockviewApi['toJSON']>,\n) {\n  return {\n    ...layout,\n    panels: Object.fromEntries(\n      Object.entries(layout.panels).map(([id, panel]) => [\n        id,\n        { ...panel, params: {} },\n      ]),\n    ),\n  }\n}\n\nexport function updatePanelParams(\n  api: DockviewApi,\n  session: DockviewSessionType,\n) {\n  for (const panel of api.panels) {\n    panel.update({ params: { panelId: panel.id, session } })\n  }\n}\n\nexport function rearrangePanelsWithDirection(\n  api: DockviewApi,\n  getPosition: (\n    idx: number,\n    panelStates: { id: string }[],\n  ) =>\n    | { referencePanel: string; direction: 'right' | 'below' | 'within' }\n    | undefined,\n) {\n  const panels = api.panels\n  if (panels.length <= 1) {\n    return\n  }\n\n  const panelStates = panels.map(p => ({\n    id: p.id,\n    component: 'jbrowseView' as const,\n    tabComponent: 'jbrowseTab' as const,\n    title: p.title,\n    params: p.params,\n  }))\n\n  for (const p of panels) {\n    api.removePanel(p)\n  }\n  for (const [idx, state] of panelStates.entries()) {\n    api.addPanel({\n      ...state,\n      position: getPosition(idx, panelStates),\n    })\n  }\n}\n","import CascadingMenuButton from '@jbrowse/core/ui/CascadingMenuButton'\nimport { makeStyles } from '@jbrowse/core/util/tss-react'\nimport CloseIcon from '@mui/icons-material/Close'\nimport DynamicFeedIcon from '@mui/icons-material/DynamicFeed'\nimport MoreHorizIcon from '@mui/icons-material/MoreHoriz'\nimport TableRowsIcon from '@mui/icons-material/TableRows'\nimport ViewColumnIcon from '@mui/icons-material/ViewColumn'\nimport ViewModuleIcon from '@mui/icons-material/ViewModule'\nimport { IconButton, Tooltip } from '@mui/material'\n\nimport { useDockview } from './DockviewContext.tsx'\nimport { rearrangePanelsWithDirection } from './dockviewUtils.ts'\n\nimport type { IDockviewHeaderActionsProps } from 'dockview-react'\n\nconst useStyles = makeStyles()(theme => ({\n  headerActions: {\n    display: 'flex',\n    alignItems: 'center',\n    height: '100%',\n  },\n  headerButton: {\n    padding: 4,\n    color: theme.palette.primary.contrastText,\n  },\n  headerIcon: {\n    fontSize: 16,\n  },\n}))\n\nexport default function DockviewRightHeaderActions({\n  containerApi,\n  group,\n}: IDockviewHeaderActionsProps) {\n  const { classes } = useStyles()\n  const { rearrangePanels } = useDockview()\n\n  const tileHorizontally = () => {\n    rearrangePanels(api => {\n      rearrangePanelsWithDirection(api, (idx, states) =>\n        idx === 0\n          ? undefined\n          : { referencePanel: states[0]!.id, direction: 'right' },\n      )\n    })\n  }\n\n  const tileVertically = () => {\n    rearrangePanels(api => {\n      rearrangePanelsWithDirection(api, (idx, states) =>\n        idx === 0\n          ? undefined\n          : { referencePanel: states[0]!.id, direction: 'below' },\n      )\n    })\n  }\n\n  const tileGrid = () => {\n    rearrangePanels(api => {\n      const panels = api.panels\n      if (panels.length <= 1) {\n        return\n      }\n      const cols = Math.ceil(Math.sqrt(panels.length))\n      rearrangePanelsWithDirection(api, (idx, states) => {\n        if (idx === 0) {\n          return undefined\n        }\n        const col = idx % cols\n        const row = Math.floor(idx / cols)\n        if (col === 0) {\n          const refIdx = (row - 1) * cols\n          return { referencePanel: states[refIdx]!.id, direction: 'below' }\n        }\n        return { referencePanel: states[idx - 1]!.id, direction: 'right' }\n      })\n    })\n  }\n\n  const stackAll = () => {\n    rearrangePanels(api => {\n      rearrangePanelsWithDirection(api, (idx, states) =>\n        idx === 0\n          ? undefined\n          : { referencePanel: states[0]!.id, direction: 'within' },\n      )\n    })\n  }\n\n  const showLayoutOptions = containerApi.panels.length > 1\n  const showCloseGroup = containerApi.groups.length > 1\n\n  return (\n    <div className={classes.headerActions}>\n      {showLayoutOptions && (\n        <CascadingMenuButton\n          menuItems={[\n            {\n              label: 'Global: change layout into set of tabs',\n              icon: DynamicFeedIcon,\n              onClick: stackAll,\n            },\n            {\n              label: 'Global: tile horizontally',\n              icon: ViewColumnIcon,\n              onClick: tileHorizontally,\n            },\n            {\n              label: 'Global: tile vertically',\n              icon: TableRowsIcon,\n              onClick: tileVertically,\n            },\n            {\n              label: 'Global: tile grid',\n              icon: ViewModuleIcon,\n              onClick: tileGrid,\n            },\n          ]}\n          size=\"small\"\n          className={classes.headerButton}\n        >\n          <MoreHorizIcon className={classes.headerIcon} />\n        </CascadingMenuButton>\n      )}\n      {showCloseGroup && (\n        <Tooltip title=\"Close group\">\n          <IconButton\n            size=\"small\"\n            onClick={() => {\n              for (const panel of group.panels) {\n                panel.api.close()\n              }\n            }}\n            className={classes.headerButton}\n          >\n            <CloseIcon className={classes.headerIcon} />\n          </IconButton>\n        </Tooltip>\n      )}\n    </div>\n  )\n}\n","import { Suspense, lazy } from 'react'\n\nimport { makeStyles } from '@jbrowse/core/util/tss-react'\nimport { observer } from 'mobx-react'\n\nimport ViewContainer from './ViewContainer.tsx'\nimport { getViewsForPanel } from './dockviewUtils.ts'\n\nimport type { DockviewSessionType } from './types.ts'\nimport type { IDockviewPanelProps } from 'dockview-react'\n\nconst ViewLauncher = lazy(() => import('./ViewLauncher.tsx'))\n\nconst useStyles = makeStyles()(theme => ({\n  container: {\n    height: '100%',\n    overflowY: 'auto',\n    background: theme.palette.background.default,\n  },\n  viewStack: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  spacer: {\n    height: 300,\n  },\n  emptyPanel: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    height: '100%',\n  },\n}))\n\nexport interface JBrowseViewPanelParams {\n  panelId: string\n  session?: DockviewSessionType\n}\n\nconst JBrowseViewPanel = observer(function JBrowseViewPanel({\n  params,\n}: IDockviewPanelProps<JBrowseViewPanelParams>) {\n  const { panelId, session } = params\n  const { classes } = useStyles()\n\n  if (!session) {\n    return <div className={classes.container}>Loading...</div>\n  }\n\n  const views = getViewsForPanel(panelId, session)\n\n  if (views.length === 0) {\n    return (\n      <div className={classes.container}>\n        <div className={classes.emptyPanel}>\n          <Suspense fallback={null}>\n            <ViewLauncher session={session} />\n          </Suspense>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className={classes.container}>\n      <div className={classes.viewStack}>\n        {views.map(view => (\n          <ViewContainer key={view.id} view={view} session={session} />\n        ))}\n        <div className={classes.spacer} />\n      </div>\n    </div>\n  )\n})\n\nexport default JBrowseViewPanel\n","import CascadingMenuButton from '@jbrowse/core/ui/CascadingMenuButton'\nimport { makeStyles } from '@jbrowse/core/util/tss-react'\nimport CloseIcon from '@mui/icons-material/Close'\nimport EditIcon from '@mui/icons-material/Edit'\nimport MoreVertIcon from '@mui/icons-material/MoreVert'\n\nconst useStyles = makeStyles()({\n  tabIcons: {\n    display: 'flex',\n    alignItems: 'center',\n    visibility: 'hidden',\n  },\n  tabIconsVisible: {\n    visibility: 'visible',\n  },\n  tabIcon: {\n    padding: 2,\n    marginLeft: 2,\n    color: 'inherit',\n  },\n  smallIcon: {\n    fontSize: 14,\n  },\n})\n\nexport default function JBrowseTabMenu({\n  isHovered,\n  onRename,\n  onClose,\n}: {\n  isHovered: boolean\n  onRename: () => void\n  onClose: () => void\n}) {\n  const { classes } = useStyles()\n\n  return (\n    <div\n      className={`${classes.tabIcons} ${isHovered ? classes.tabIconsVisible : ''}`}\n    >\n      <CascadingMenuButton\n        menuItems={[\n          {\n            label: 'Rename tab',\n            icon: EditIcon,\n            onClick: onRename,\n          },\n          {\n            label: 'Close tab',\n            icon: CloseIcon,\n            onClick: onClose,\n          },\n        ]}\n        size=\"small\"\n        className={classes.tabIcon}\n        stopPropagation\n      >\n        <MoreVertIcon className={classes.smallIcon} />\n      </CascadingMenuButton>\n    </div>\n  )\n}\n","import { useState } from 'react'\n\nimport { makeStyles } from '@jbrowse/core/util/tss-react'\nimport { InputBase, Typography } from '@mui/material'\nimport { observer } from 'mobx-react'\n\nimport JBrowseTabMenu from './JBrowseTabMenu.tsx'\nimport { getViewsForPanel } from './dockviewUtils.ts'\n\nimport type { DockviewSessionType } from './types.ts'\nimport type { AbstractViewModel } from '@jbrowse/core/util'\nimport type { IDockviewPanelHeaderProps } from 'dockview-react'\n\nconst useStyles = makeStyles()(theme => ({\n  tabContainer: {\n    display: 'flex',\n    alignItems: 'center',\n    height: '100%',\n    padding: '0 4px',\n    gap: 4,\n  },\n  tabTitle: {\n    display: 'flex',\n    alignItems: 'center',\n    flex: 1,\n    overflow: 'hidden',\n    minWidth: 0,\n  },\n  tabTitleText: {\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    fontSize: '0.8rem',\n  },\n\n  editInput: {\n    fontSize: '0.8rem',\n    padding: '2px 4px',\n    color: 'inherit',\n    backgroundColor: theme.palette.action.selected,\n    borderRadius: theme.shape.borderRadius,\n    flex: 1,\n  },\n}))\n\nfunction stopEvent(e: React.MouseEvent | React.PointerEvent) {\n  e.stopPropagation()\n  e.preventDefault()\n}\n\nexport interface JBrowseViewPanelParams {\n  panelId: string\n  session?: DockviewSessionType\n}\n\nfunction getTabDisplayName(\n  views: AbstractViewModel[],\n  session: DockviewSessionType,\n) {\n  if (views.length === 0) {\n    return 'Empty'\n  }\n  if (views.length === 1) {\n    const view = views[0]!\n    return (\n      view.displayName ||\n      // @ts-expect-error\n      view.assemblyNames\n        // @ts-expect-error\n        ?.map(r => session.assemblyManager.get(r)?.displayName)\n        .join(',') ||\n      'View'\n    )\n  }\n  return `${views.length} views`\n}\n\nconst JBrowseViewTab = observer(function JBrowseViewTab({\n  params,\n  api,\n}: IDockviewPanelHeaderProps<JBrowseViewPanelParams>) {\n  const { panelId, session } = params\n  const { classes } = useStyles()\n  const [isEditing, setIsEditing] = useState(false)\n  const [isHovered, setIsHovered] = useState(false)\n  const [editValue, setEditValue] = useState('')\n\n  if (!session) {\n    return (\n      <div className={classes.tabContainer}>\n        <span className={classes.tabTitleText}>Loading...</span>\n      </div>\n    )\n  }\n\n  const views = getViewsForPanel(panelId, session)\n  const displayValue = getTabDisplayName(views, session)\n\n  const handleStartEdit = () => {\n    setEditValue(api.title || displayValue)\n    setIsEditing(true)\n  }\n\n  const handleSave = () => {\n    if (editValue.trim()) {\n      api.setTitle(editValue.trim())\n    }\n    setIsEditing(false)\n  }\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter') {\n      handleSave()\n    } else if (e.key === 'Escape') {\n      setIsEditing(false)\n    }\n  }\n\n  return (\n    <div\n      className={classes.tabContainer}\n      onMouseEnter={() => {\n        setIsHovered(true)\n      }}\n      onMouseLeave={() => {\n        setIsHovered(false)\n      }}\n    >\n      <div className={classes.tabTitle}>\n        {isEditing ? (\n          <InputBase\n            autoFocus\n            className={classes.editInput}\n            value={editValue}\n            onChange={e => {\n              setEditValue(e.target.value)\n            }}\n            onFocus={e => {\n              e.target.select()\n            }}\n            onBlur={handleSave}\n            onKeyDown={handleKeyDown}\n            onClick={stopEvent}\n          />\n        ) : (\n          <>\n            <Typography\n              className={classes.tabTitleText}\n              variant=\"body2\"\n              onDoubleClick={handleStartEdit}\n            >\n              {api.title || displayValue}\n            </Typography>\n            <JBrowseTabMenu\n              isHovered={isHovered}\n              onRename={handleStartEdit}\n              onClose={() => {\n                api.close()\n              }}\n            />\n          </>\n        )}\n      </div>\n    </div>\n  )\n})\nexport default JBrowseViewTab\n","import { useCallback, useEffect, useMemo, useRef, useState } from 'react'\n\nimport { makeStyles } from '@jbrowse/core/util/tss-react'\nimport { createElementId } from '@jbrowse/core/util/types/mst'\nimport { useTheme } from '@mui/material'\nimport { DockviewReact } from 'dockview-react'\nimport { autorun } from 'mobx'\nimport { observer } from 'mobx-react'\n\nimport {\n  DockviewContext,\n  clearPendingMoveAction,\n  peekPendingMoveAction,\n} from './DockviewContext.tsx'\nimport DockviewLeftHeaderActions from './DockviewLeftHeaderActions.tsx'\nimport DockviewRightHeaderActions from './DockviewRightHeaderActions.tsx'\nimport JBrowseViewPanel from './JBrowseViewPanel.tsx'\nimport JBrowseViewTab from './JBrowseViewTab.tsx'\nimport {\n  cleanLayoutForStorage,\n  createPanelConfig,\n  updatePanelParams,\n} from './dockviewUtils.ts'\nimport { isSessionWithDockviewLayout } from '../../DockviewLayout/index.ts'\n\nimport type { DockviewSessionType } from './types.ts'\nimport type {\n  DockviewApi,\n  DockviewGroupPanel,\n  DockviewReadyEvent,\n} from 'dockview-react'\n\nimport 'dockview-react/dist/styles/dockview.css'\n\nconst useStyles = makeStyles()(() => ({\n  container: {\n    height: '100%',\n    width: '100%',\n    gridRow: 'components',\n  },\n}))\n\ninterface Props {\n  session: DockviewSessionType\n}\n\nfunction getPanelPosition(\n  group: DockviewGroupPanel | undefined,\n  direction?: 'right' | 'below',\n) {\n  if (!group) {\n    return undefined\n  }\n  if (direction) {\n    return { referenceGroup: group, direction }\n  }\n  return { referenceGroup: group }\n}\n\nconst components = {\n  jbrowseView: JBrowseViewPanel,\n}\n\nconst tabComponents = {\n  jbrowseTab: JBrowseViewTab,\n}\n\nconst TiledViewsContainer = observer(function TiledViewsContainer({\n  session,\n}: Props) {\n  const { classes } = useStyles()\n  const theme = useTheme()\n  const [api, setApi] = useState<DockviewApi | null>(null)\n  const trackedViewIdsRef = useRef<Set<string>>(new Set())\n  const rearrangingRef = useRef(false)\n  const sessionRef = useRef(session)\n  sessionRef.current = session\n\n  const rearrangePanels = useCallback(\n    (arrange: (api: DockviewApi) => void) => {\n      if (!api) {\n        return\n      }\n      rearrangingRef.current = true\n      try {\n        arrange(api)\n      } finally {\n        rearrangingRef.current = false\n      }\n    },\n    [api],\n  )\n\n  const addEmptyTab = useCallback(\n    (targetGroup?: DockviewGroupPanel) => {\n      if (!api) {\n        return\n      }\n      const panelId = `panel-${createElementId()}`\n      const group = targetGroup ?? api.activeGroup\n      api.addPanel({\n        ...createPanelConfig(panelId, session, 'New Tab'),\n        position: getPanelPosition(group),\n      })\n\n      if (isSessionWithDockviewLayout(session)) {\n        session.setActivePanelId(panelId)\n      }\n    },\n    [api, session],\n  )\n\n  const moveViewToPanel = useCallback(\n    (viewId: string, direction?: 'right') => {\n      if (!api || !isSessionWithDockviewLayout(session)) {\n        return\n      }\n\n      // Remove view from current panel\n      session.removeViewFromPanel(viewId)\n\n      // Create new panel and assign the view to it\n      const panelId = `panel-${createElementId()}`\n      api.addPanel({\n        ...createPanelConfig(panelId, session, 'New Tab'),\n        position: getPanelPosition(api.activeGroup, direction),\n      })\n      session.assignViewToPanel(panelId, viewId)\n      session.setActivePanelId(panelId)\n    },\n    [api, session],\n  )\n\n  const moveViewToNewTab = useCallback(\n    (viewId: string) => {\n      moveViewToPanel(viewId)\n    },\n    [moveViewToPanel],\n  )\n\n  const moveViewToSplitRight = useCallback(\n    (viewId: string) => {\n      moveViewToPanel(viewId, 'right')\n    },\n    [moveViewToPanel],\n  )\n\n  const contextValue = useMemo(\n    () => ({\n      api,\n      rearrangePanels,\n      addEmptyTab,\n      moveViewToNewTab,\n      moveViewToSplitRight,\n    }),\n    [api, rearrangePanels, addEmptyTab, moveViewToNewTab, moveViewToSplitRight],\n  )\n\n  const createInitialPanels = useCallback((dockviewApi: DockviewApi) => {\n    const session = sessionRef.current\n    const pendingAction = peekPendingMoveAction()\n\n    // Check if there's init configuration from URL params\n    const initLayout = isSessionWithDockviewLayout(session)\n      ? session.init\n      : undefined\n\n    // If we have init configuration from URL params, use it\n    if (initLayout && isSessionWithDockviewLayout(session)) {\n      trackedViewIdsRef.current.clear()\n      let firstPanelId: string | undefined\n\n      // Collect groups and their sizes for post-processing\n      const groupSizes: { group: DockviewGroupPanel; size: number }[] = []\n\n      // Process nested layout structure\n      // Returns the group created for this node (for use as reference by siblings)\n      function processNode(\n        node: typeof initLayout,\n        referenceGroup: DockviewGroupPanel | undefined,\n        direction: 'right' | 'below' | undefined,\n      ): DockviewGroupPanel | undefined {\n        if (!node) {\n          return undefined\n        }\n        if (node.viewIds !== undefined) {\n          // Panel node - create a dockview panel\n          const panelId = `panel-${createElementId()}`\n          if (!firstPanelId) {\n            firstPanelId = panelId\n          }\n          const position =\n            referenceGroup && direction\n              ? { referenceGroup, direction }\n              : referenceGroup\n                ? { referenceGroup }\n                : undefined\n          dockviewApi.addPanel({\n            ...createPanelConfig(panelId, session, 'Tab'),\n            position,\n          })\n          // Populate panelViewAssignments from init\n          for (const viewId of node.viewIds) {\n            if (isSessionWithDockviewLayout(session)) {\n              session.assignViewToPanel(panelId, viewId)\n            }\n            trackedViewIdsRef.current.add(viewId)\n          }\n          // Return the group this panel was added to\n          const group = dockviewApi.getPanel(panelId)?.group\n          // Track size for this group if specified\n          if (group && node.size !== undefined) {\n            groupSizes.push({ group, size: node.size })\n          }\n          return group\n        }\n        if (node.children && node.children.length > 0) {\n          // Container node - process children\n          const dockviewDirection =\n            node.direction === 'horizontal' ? 'right' : 'below'\n          let currentGroup = referenceGroup\n          for (let i = 0; i < node.children.length; i++) {\n            const child = node.children[i]!\n            // First child uses parent's reference/direction, subsequent children split from previous\n            const childDirection = i === 0 ? direction : dockviewDirection\n            const childRef = i === 0 ? referenceGroup : currentGroup\n            const newGroup = processNode(child, childRef, childDirection)\n            if (newGroup) {\n              currentGroup = newGroup\n            }\n          }\n          return currentGroup\n        }\n        return undefined\n      }\n\n      processNode(initLayout, undefined, undefined)\n\n      // Apply proportional sizes after all panels are created\n      // Only handle simple horizontal/vertical splits at the root level\n      // Use requestAnimationFrame to ensure layout is complete\n      if (\n        groupSizes.length >= 2 &&\n        initLayout.direction &&\n        groupSizes.length === initLayout.children?.length\n      ) {\n        const direction = initLayout.direction\n        requestAnimationFrame(() => {\n          const totalSize = groupSizes.reduce((sum, g) => sum + g.size, 0)\n          if (totalSize > 0) {\n            if (direction === 'horizontal') {\n              const containerWidth = dockviewApi.width\n              if (containerWidth > 0) {\n                for (const { group, size } of groupSizes) {\n                  const width = Math.round(containerWidth * (size / totalSize))\n                  group.api.setSize({ width })\n                }\n              }\n            } else {\n              const containerHeight = dockviewApi.height\n              if (containerHeight > 0) {\n                for (const { group, size } of groupSizes) {\n                  const height = Math.round(\n                    containerHeight * (size / totalSize),\n                  )\n                  group.api.setSize({ height })\n                }\n              }\n            }\n          }\n        })\n      }\n\n      // Clear init after processing (it's only needed once)\n      session.setInit(undefined)\n      if (firstPanelId) {\n        session.setActivePanelId(firstPanelId)\n        // Activate the first panel in dockview (otherwise the last added panel is active)\n        dockviewApi.getPanel(firstPanelId)?.api.setActive()\n      }\n      return\n    }\n\n    // Clear any stale state from previous mounts (e.g., React StrictMode double-mounting)\n    if (isSessionWithDockviewLayout(session)) {\n      for (const panelId of session.panelViewAssignments.keys()) {\n        session.removePanel(panelId)\n      }\n      session.setDockviewLayout(undefined)\n    }\n    trackedViewIdsRef.current.clear()\n\n    // Only handle pending action if the view actually exists in session.views\n    // This handles React StrictMode double-mounting and ensures we have all views\n    const pendingViewExists =\n      pendingAction && session.views.some(v => v.id === pendingAction.viewId)\n\n    if (pendingViewExists && isSessionWithDockviewLayout(session)) {\n      // Create correct panel structure upfront when there's a pending move action\n      const { type, viewId: pendingViewId } = pendingAction\n      const otherViewIds = session.views\n        .map(v => v.id)\n        .filter(id => id !== pendingViewId)\n\n      // Create first panel for existing views (excluding the pending view)\n      // Only create if there are other views to put in it\n      if (otherViewIds.length > 0) {\n        const firstPanelId = `panel-${createElementId()}`\n        dockviewApi.addPanel(createPanelConfig(firstPanelId, session))\n        for (const viewId of otherViewIds) {\n          session.assignViewToPanel(firstPanelId, viewId)\n          trackedViewIdsRef.current.add(viewId)\n        }\n      }\n\n      // Create panel for the pending view\n      const pendingPanelId = `panel-${createElementId()}`\n      const direction = type === 'splitRight' ? 'right' : undefined\n      dockviewApi.addPanel({\n        ...createPanelConfig(pendingPanelId, session, 'New Tab'),\n        position: getPanelPosition(dockviewApi.activeGroup, direction),\n      })\n      session.assignViewToPanel(pendingPanelId, pendingViewId)\n      trackedViewIdsRef.current.add(pendingViewId)\n      session.setActivePanelId(pendingPanelId)\n\n      // Only clear the pending action after successful setup\n      clearPendingMoveAction()\n    } else {\n      // Normal case: create single initial panel\n      const panelId = `panel-${createElementId()}`\n      dockviewApi.addPanel(createPanelConfig(panelId, session))\n\n      if (isSessionWithDockviewLayout(session)) {\n        session.setActivePanelId(panelId)\n      }\n    }\n  }, [])\n\n  const onReady = useCallback(\n    (event: DockviewReadyEvent) => {\n      setApi(event.api)\n\n      event.api.onDidActivePanelChange(e => {\n        if (e?.id && isSessionWithDockviewLayout(sessionRef.current)) {\n          sessionRef.current.setActivePanelId(e.id)\n        }\n      })\n\n      event.api.onDidRemovePanel(e => {\n        if (rearrangingRef.current) {\n          return\n        }\n        if (isSessionWithDockviewLayout(sessionRef.current)) {\n          const viewIds = sessionRef.current.getViewIdsForPanel(e.id)\n          for (const viewId of viewIds) {\n            const view = sessionRef.current.views.find(v => v.id === viewId)\n            if (view) {\n              sessionRef.current.removeView(view)\n            }\n          }\n          sessionRef.current.removePanel(e.id)\n        }\n      })\n\n      event.api.onDidLayoutChange(() => {\n        if (\n          !rearrangingRef.current &&\n          isSessionWithDockviewLayout(sessionRef.current)\n        ) {\n          sessionRef.current.setDockviewLayout(\n            cleanLayoutForStorage(event.api.toJSON()),\n          )\n        }\n      })\n\n      // If there's a pending move action, always create fresh panels to handle it\n      // Otherwise, try to restore from saved layout if available\n      const hasPendingAction = peekPendingMoveAction() !== null\n      const dockviewSession = isSessionWithDockviewLayout(sessionRef.current)\n        ? sessionRef.current\n        : null\n      const savedLayout = !hasPendingAction && dockviewSession?.dockviewLayout\n\n      if (savedLayout) {\n        try {\n          rearrangingRef.current = true\n          event.api.fromJSON(savedLayout)\n          updatePanelParams(event.api, dockviewSession)\n          for (const viewIds of dockviewSession.panelViewAssignments.values()) {\n            for (const viewId of viewIds) {\n              trackedViewIdsRef.current.add(viewId)\n            }\n          }\n          // Verify restoration succeeded - if no panels, fall back to fresh creation\n          if (event.api.panels.length === 0) {\n            throw new Error('No panels after fromJSON restore')\n          }\n        } catch (e) {\n          console.error('Failed to restore dockview layout:', e)\n          createInitialPanels(event.api)\n        } finally {\n          rearrangingRef.current = false\n        }\n      } else {\n        createInitialPanels(event.api)\n      }\n    },\n    [createInitialPanels],\n  )\n\n  useEffect(() => {\n    const dispose = autorun(() => {\n      if (!api) {\n        return\n      }\n\n      const { views } = session\n      const currentViewIds = new Set(views.map(v => v.id))\n      const trackedIds = trackedViewIdsRef.current\n\n      for (const view of views) {\n        if (!trackedIds.has(view.id)) {\n          trackedIds.add(view.id)\n\n          if (isSessionWithDockviewLayout(session)) {\n            let activePanelId = session.activePanelId\n            if (!activePanelId || !api.getPanel(activePanelId)) {\n              const firstPanel = api.panels[0]\n              if (firstPanel) {\n                activePanelId = firstPanel.id\n              } else {\n                activePanelId = `panel-${createElementId()}`\n                api.addPanel(createPanelConfig(activePanelId, session))\n              }\n              session.setActivePanelId(activePanelId)\n            }\n            session.assignViewToPanel(activePanelId, view.id)\n          }\n        }\n      }\n\n      for (const id of trackedIds) {\n        if (!currentViewIds.has(id)) {\n          trackedIds.delete(id)\n          if (isSessionWithDockviewLayout(session)) {\n            session.removeViewFromPanel(id)\n          }\n        }\n      }\n    })\n\n    return dispose\n  }, [session, api])\n\n  // React to layout changes from undo/redo\n  useEffect(() => {\n    if (!api || !isSessionWithDockviewLayout(session)) {\n      return\n    }\n\n    const dispose = autorun(() => {\n      const { dockviewLayout } = session\n      if (!dockviewLayout || rearrangingRef.current) {\n        return\n      }\n\n      // Compare current dockview state with session state\n      const currentLayout = cleanLayoutForStorage(api.toJSON())\n      if (JSON.stringify(currentLayout) === JSON.stringify(dockviewLayout)) {\n        return\n      }\n\n      // Layout differs - restore from session (likely from undo/redo)\n      rearrangingRef.current = true\n      try {\n        api.fromJSON(dockviewLayout)\n        updatePanelParams(api, sessionRef.current)\n\n        // Rebuild tracked view IDs from restored layout\n        trackedViewIdsRef.current.clear()\n        for (const viewIds of session.panelViewAssignments.values()) {\n          for (const viewId of viewIds) {\n            trackedViewIdsRef.current.add(viewId)\n          }\n        }\n      } catch (e) {\n        console.error('Failed to restore dockview layout from undo:', e)\n      } finally {\n        rearrangingRef.current = false\n      }\n    })\n\n    return dispose\n  }, [session, api])\n\n  const themeClass =\n    theme.palette.mode === 'dark'\n      ? 'dockview-theme-dark'\n      : 'dockview-theme-light'\n\n  return (\n    <DockviewContext.Provider value={contextValue}>\n      <div className={`${classes.container} ${themeClass}`}>\n        <DockviewReact\n          components={components}\n          tabComponents={tabComponents}\n          leftHeaderActionsComponent={DockviewLeftHeaderActions}\n          rightHeaderActionsComponent={DockviewRightHeaderActions}\n          onReady={onReady}\n        />\n      </div>\n    </DockviewContext.Provider>\n  )\n})\n\nexport default TiledViewsContainer\n","import { makeStyles } from '@jbrowse/core/util/tss-react'\nimport AddIcon from '@mui/icons-material/Add'\nimport CloseIcon from '@mui/icons-material/Close'\nimport MinimizeIcon from '@mui/icons-material/Minimize'\nimport { IconButton } from '@mui/material'\nimport { observer } from 'mobx-react'\n\nimport type { IBaseViewModel } from '@jbrowse/core/pluggableElementTypes/models'\n\nconst useStyles = makeStyles()(theme => ({\n  icon: {\n    color: theme.palette.secondary.contrastText,\n  },\n}))\n\nconst ViewButtons = observer(function ViewButtons({\n  view,\n  onClose,\n  onMinimize,\n}: {\n  view: IBaseViewModel\n  onClose: () => void\n  onMinimize: () => void\n}) {\n  const { classes } = useStyles()\n  return (\n    <>\n      <IconButton data-testid=\"minimize_view\" onClick={onMinimize}>\n        {view.minimized ? (\n          <AddIcon className={classes.icon} fontSize=\"small\" />\n        ) : (\n          <MinimizeIcon className={classes.icon} fontSize=\"small\" />\n        )}\n      </IconButton>\n      <IconButton data-testid=\"close_view\" onClick={onClose}>\n        <CloseIcon className={classes.icon} fontSize=\"small\" />\n      </IconButton>\n    </>\n  )\n})\n\nexport default ViewButtons\n","import EditableTypography from '@jbrowse/core/ui/EditableTypography'\nimport { getSession } from '@jbrowse/core/util'\nimport { makeStyles } from '@jbrowse/core/util/tss-react'\nimport { Tooltip } from '@mui/material'\nimport { observer } from 'mobx-react'\n\nimport type { IBaseViewModel } from '@jbrowse/core/pluggableElementTypes'\n\nconst useStyles = makeStyles()(theme => ({\n  input: {\n    paddingBottom: 0,\n    paddingTop: 2,\n  },\n  inputBase: {\n    color: theme.palette.secondary.contrastText,\n  },\n  inputRoot: {\n    '&:hover': {\n      backgroundColor: theme.palette.secondary.light,\n    },\n  },\n  inputFocused: {\n    borderColor: theme.palette.primary.main,\n    backgroundColor: theme.palette.secondary.light,\n  },\n}))\nconst ViewContainerTitle = observer(function ViewContainerTitle({\n  view,\n}: {\n  view: IBaseViewModel\n}) {\n  const { classes } = useStyles()\n  const { assemblyManager } = getSession(view)\n  return (\n    <Tooltip title=\"Rename view\" arrow>\n      <EditableTypography\n        value={\n          view.displayName ||\n          // @ts-expect-error\n          `${view.assemblyNames?.map(r => assemblyManager.get(r)?.displayName).join(',') || 'Untitled view'}${\n            view.minimized ? ' (minimized)' : ''\n          }`\n        }\n        setValue={val => {\n          view.setDisplayName(val)\n        }}\n        variant=\"body2\"\n        classes={{\n          input: classes.input,\n          inputBase: classes.inputBase,\n          inputRoot: classes.inputRoot,\n          inputFocused: classes.inputFocused,\n        }}\n      />\n    </Tooltip>\n  )\n})\n\nexport default ViewContainerTitle\n","import { CascadingMenuButton } from '@jbrowse/core/ui'\nimport { getSession } from '@jbrowse/core/util'\nimport { getSnapshot } from '@jbrowse/mobx-state-tree'\nimport ContentCopyIcon from '@mui/icons-material/ContentCopy'\nimport KeyboardArrowDownIcon from '@mui/icons-material/KeyboardArrowDown'\nimport KeyboardArrowUpIcon from '@mui/icons-material/KeyboardArrowUp'\nimport KeyboardDoubleArrowDownIcon from '@mui/icons-material/KeyboardDoubleArrowDown'\nimport KeyboardDoubleArrowUpIcon from '@mui/icons-material/KeyboardDoubleArrowUp'\nimport MenuIcon from '@mui/icons-material/Menu'\nimport OpenInNewIcon from '@mui/icons-material/OpenInNew'\nimport VerticalSplitIcon from '@mui/icons-material/VerticalSplit'\nimport { observer } from 'mobx-react'\n\nimport { useDockview } from './DockviewContext.tsx'\nimport { renameIds } from './copyView.ts'\nimport { isSessionWithDockviewLayout } from '../../DockviewLayout/index.ts'\n\nimport type { IBaseViewModel } from '@jbrowse/core/pluggableElementTypes/models'\nimport type { AbstractSessionModel } from '@jbrowse/core/util'\nimport type {\n  IconButtonProps as IconButtonPropsType,\n  SvgIconProps,\n} from '@mui/material'\n\nfunction getPanelViewCount(session: unknown, viewId: string) {\n  if (!isSessionWithDockviewLayout(session)) {\n    return 0\n  }\n  for (const viewIds of session.panelViewAssignments.values()) {\n    if (viewIds.includes(viewId)) {\n      return viewIds.length\n    }\n  }\n  return 0\n}\n\nconst ViewMenu = observer(function ViewMenu({\n  model,\n  IconProps,\n}: {\n  model: IBaseViewModel\n  IconButtonProps?: IconButtonPropsType\n  IconProps: SvgIconProps\n}) {\n  const session = getSession(model) as AbstractSessionModel & {\n    moveViewDown: (arg: string) => void\n    moveViewUp: (arg: string) => void\n    moveViewToBottom: (arg: string) => void\n    moveViewToTop: (arg: string) => void\n    moveViewUpInPanel: (arg: string) => void\n    moveViewDownInPanel: (arg: string) => void\n    moveViewToTopInPanel: (arg: string) => void\n    moveViewToBottomInPanel: (arg: string) => void\n    useWorkspaces: boolean\n    setUseWorkspaces: (arg: boolean) => void\n  }\n\n  const { moveViewToNewTab, moveViewToSplitRight } = useDockview()\n  const usePanel = session.useWorkspaces && isSessionWithDockviewLayout(session)\n  const viewCount = usePanel\n    ? getPanelViewCount(session, model.id)\n    : session.views.length\n\n  const moveView = (\n    panelFn: (id: string) => void,\n    sessionFn: (id: string) => void,\n  ) => {\n    if (usePanel) {\n      panelFn(model.id)\n    } else {\n      sessionFn(model.id)\n    }\n  }\n\n  return (\n    <CascadingMenuButton\n      data-testid=\"view_menu_icon\"\n      menuItems={() => [\n        {\n          label: 'View options',\n          type: 'subMenu' as const,\n          subMenu: [\n            {\n              label: 'Copy view',\n              icon: ContentCopyIcon,\n              onClick: () => {\n                session.addView(\n                  model.type,\n                  renameIds(\n                    structuredClone(\n                      // @ts-expect-error\n                      getSnapshot(model) as Record<string, unknown>,\n                    ),\n                  ),\n                )\n              },\n            },\n            {\n              label: 'Move to new tab',\n              icon: OpenInNewIcon,\n              onClick: () => {\n                moveViewToNewTab(model.id)\n                session.setUseWorkspaces(true)\n              },\n            },\n            {\n              label: 'Move to split view (right side of screen)',\n              icon: VerticalSplitIcon,\n              onClick: () => {\n                moveViewToSplitRight(model.id)\n                session.setUseWorkspaces(true)\n              },\n            },\n            ...(viewCount > 2\n              ? [\n                  {\n                    label: 'Move view to top',\n                    icon: KeyboardDoubleArrowUpIcon,\n                    onClick: () => {\n                      moveView(\n                        session.moveViewToTopInPanel,\n                        session.moveViewToTop,\n                      )\n                    },\n                  },\n                ]\n              : []),\n            ...(viewCount > 1\n              ? [\n                  {\n                    label: 'Move view up',\n                    icon: KeyboardArrowUpIcon,\n                    onClick: () => {\n                      moveView(session.moveViewUpInPanel, session.moveViewUp)\n                    },\n                  },\n                  {\n                    label: 'Move view down',\n                    icon: KeyboardArrowDownIcon,\n                    onClick: () => {\n                      moveView(\n                        session.moveViewDownInPanel,\n                        session.moveViewDown,\n                      )\n                    },\n                  },\n                ]\n              : []),\n            ...(viewCount > 2\n              ? [\n                  {\n                    label: 'Move view to bottom',\n                    icon: KeyboardDoubleArrowDownIcon,\n                    onClick: () => {\n                      moveView(\n                        session.moveViewToBottomInPanel,\n                        session.moveViewToBottom,\n                      )\n                    },\n                  },\n                ]\n              : []),\n          ],\n        },\n        ...model.menuItems(),\n      ]}\n    >\n      <MenuIcon {...IconProps} fontSize=\"small\" />\n    </CascadingMenuButton>\n  )\n})\nexport default ViewMenu\n","import { createElementId } from '@jbrowse/core/util/types/mst'\n\nexport function renameIds(\n  obj: Record<string, unknown>,\n): Record<string, unknown> {\n  const idMap = new Map<string, string>()\n\n  function transformIds(value: unknown): unknown {\n    if (value === null || value === undefined) {\n      return value\n    }\n\n    if (Array.isArray(value)) {\n      return value.map(transformIds)\n    }\n\n    if (typeof value === 'object') {\n      const result: Record<string, unknown> = {}\n      for (const [key, val] of Object.entries(value)) {\n        if (key === 'id' && typeof val === 'string') {\n          if (!idMap.has(val)) {\n            idMap.set(val, createElementId())\n          }\n          result[key] = `${val}-${idMap.get(val)}`\n        } else {\n          result[key] = transformIds(val)\n        }\n      }\n      return result\n    }\n\n    return value\n  }\n\n  return transformIds(obj) as Record<string, unknown>\n}\n","import { useEffect, useRef } from 'react'\n\nimport { VIEW_HEADER_HEIGHT } from '@jbrowse/core/ui'\nimport { getSession } from '@jbrowse/core/util'\nimport { cx, makeStyles } from '@jbrowse/core/util/tss-react'\nimport { isSessionWithMultipleViews } from '@jbrowse/product-core'\nimport KeyboardArrowRightIcon from '@mui/icons-material/KeyboardArrowRight'\nimport { observer } from 'mobx-react'\n\nimport ViewButtons from './ViewButtons.tsx'\nimport ViewContainerTitle from './ViewContainerTitle.tsx'\nimport ViewMenu from './ViewMenu.tsx'\n\nimport type { IBaseViewModel } from '@jbrowse/core/pluggableElementTypes/models'\n\nconst useStyles = makeStyles()(theme => ({\n  icon: {\n    color: theme.palette.secondary.contrastText,\n  },\n  grow: {\n    flexGrow: 1,\n  },\n  viewHeader: {\n    display: 'flex',\n    height: VIEW_HEADER_HEIGHT,\n    top: 0,\n    zIndex: 900,\n  },\n  viewTitle: {\n    display: 'flex',\n    alignItems: 'center',\n  },\n}))\n\nconst ViewHeader = observer(function ViewHeader({\n  view,\n  onClose,\n  onMinimize,\n  className,\n}: {\n  view: IBaseViewModel\n  onClose: () => void\n  onMinimize: () => void\n  className?: string\n}) {\n  const { classes } = useStyles()\n  const scrollRef = useRef<HTMLDivElement>(null)\n  const session = getSession(view)\n  let stickyViewHeaders = false\n  if (isSessionWithMultipleViews(session)) {\n    ;({ stickyViewHeaders } = session)\n  }\n\n  // scroll the view into view when first mounted. note: this effect will run\n  // only once, because of the empty array second param\n  useEffect(() => {\n    if (typeof jest === 'undefined' && window.self === window.top) {\n      scrollRef.current?.scrollIntoView({ block: 'center' })\n    }\n  }, [])\n  return (\n    <div\n      ref={scrollRef}\n      className={cx(classes.viewHeader, className)}\n      style={{ position: stickyViewHeaders ? 'sticky' : undefined }}\n    >\n      <ViewMenu model={view} IconProps={{ className: classes.icon }} />\n      <div className={classes.grow} />\n      <div className={classes.viewTitle}>\n        {session.focusedViewId === view.id ? (\n          <KeyboardArrowRightIcon className={classes.icon} fontSize=\"small\" />\n        ) : null}\n        <ViewContainerTitle view={view} />\n      </div>\n      <div className={classes.grow} />\n      <ViewButtons onClose={onClose} onMinimize={onMinimize} view={view} />\n    </div>\n  )\n})\n\nexport default ViewHeader\n","import { Suspense } from 'react'\n\n// ui elements\nimport LoadingEllipses from '@jbrowse/core/ui/LoadingEllipses'\nimport { getEnv } from '@jbrowse/core/util'\nimport { observer } from 'mobx-react'\n\nimport type {\n  AbstractViewModel,\n  SessionWithFocusedViewAndDrawerWidgets,\n} from '@jbrowse/core/util'\n\nconst ViewWrapper = observer(function ViewWrapper({\n  view,\n  session,\n}: {\n  view: AbstractViewModel\n  session: SessionWithFocusedViewAndDrawerWidgets\n}) {\n  const { pluginManager } = getEnv(session)\n  const viewType = pluginManager.getViewType(view.type)\n  if (!viewType) {\n    throw new Error(`unknown view type ${view.type}`)\n  }\n  const { ReactComponent } = viewType\n  if (view.minimized) {\n    return null\n  }\n\n  return (\n    <Suspense fallback={<LoadingEllipses variant=\"h6\" />}>\n      <ReactComponent model={view} session={session} />\n    </Suspense>\n  )\n})\n\nexport default ViewWrapper\n","import { useEffect } from 'react'\n\nimport { useWidthSetter } from '@jbrowse/core/util'\nimport { cx, makeStyles } from '@jbrowse/core/util/tss-react'\nimport { Paper, useTheme } from '@mui/material'\nimport { observer } from 'mobx-react'\n\nimport ViewHeader from './ViewHeader.tsx'\nimport ViewWrapper from './ViewWrapper.tsx'\n\nimport type {\n  AbstractViewModel,\n  SessionWithFocusedViewAndDrawerWidgets,\n} from '@jbrowse/core/util'\n\nconst useStyles = makeStyles()(theme => ({\n  viewContainer: {\n    margin: theme.spacing(0.5),\n    padding: `0 ${theme.spacing(1)} ${theme.spacing(1)}`,\n    overflow: 'clip',\n    // xref https://stackoverflow.com/questions/43909940/why-does-overflowhidden-prevent-positionsticky-from-working\n    // note that contain:paint also seems to work\n  },\n  focusedView: {\n    background: theme.palette.secondary.main,\n  },\n  unfocusedView: {\n    background: theme.palette.secondary.dark,\n  },\n}))\n\nconst ViewContainer = observer(function ViewContainer({\n  view,\n  session,\n}: {\n  view: AbstractViewModel\n  session: SessionWithFocusedViewAndDrawerWidgets\n}) {\n  const theme = useTheme()\n  const ref = useWidthSetter(view, theme.spacing(1))\n  const { classes } = useStyles()\n\n  useEffect(() => {\n    function handleSelectView(e: Event) {\n      if (e.target instanceof Element && ref.current?.contains(e.target)) {\n        session.setFocusedViewId(view.id)\n      }\n    }\n\n    document.addEventListener('mousedown', handleSelectView)\n    document.addEventListener('keydown', handleSelectView)\n    return () => {\n      document.removeEventListener('mousedown', handleSelectView)\n      document.removeEventListener('keydown', handleSelectView)\n    }\n  }, [ref, session, view])\n\n  const backgroundColorClassName =\n    session.focusedViewId === view.id\n      ? classes.focusedView\n      : classes.unfocusedView\n  const viewContainerClassName = cx(\n    classes.viewContainer,\n    backgroundColorClassName,\n  )\n\n  return (\n    <Paper\n      ref={ref}\n      elevation={12}\n      className={viewContainerClassName}\n      data-testid={`view-container-${view.id}`}\n    >\n      <ViewHeader\n        view={view}\n        onClose={() => {\n          session.removeView(view)\n        }}\n        onMinimize={() => {\n          view.setMinimized(!view.minimized)\n        }}\n        className={backgroundColorClassName}\n      />\n      <Paper elevation={0}>\n        <ViewWrapper view={view} session={session} />\n      </Paper>\n    </Paper>\n  )\n})\n\nexport default ViewContainer\n"],"names":["pendingMoveAction","peekPendingMoveAction","clearPendingMoveAction","DockviewContext","createContext","api","rearrangePanels","addEmptyTab","moveViewToNewTab","viewId","type","moveViewToSplitRight","useDockview","useContext","useStyles","makeStyles","theme","headerActions","display","alignItems","height","headerButton","padding","color","palette","primary","contrastText","headerIcon","fontSize","DockviewLeftHeaderActions","t0","$","_c","containerApi","group","classes","t1","direction","newGroup","addGroup","referenceGroup","handleSplit","t2","t3","t4","t5","t6","t7","t8","t9","label","icon","TabIcon","onClick","VerticalSplitIcon","HorizontalSplitIcon","setActive","_jsx","AddIcon","className","CascadingMenuButton","menuItems","size","children","getViewsForPanel","panelId","session","isSessionWithDockviewLayout","getViewIdsForPanel","map","id","views","find","v","filter","undefined","createPanelConfig","title","component","tabComponent","params","cleanLayoutForStorage","layout","panels","Object","fromEntries","entries","panel","updatePanelParams","update","rearrangePanelsWithDirection","getPosition","length","panelStates","p","removePanel","idx","state","addPanel","position","DockviewRightHeaderActions","_temp2","tileHorizontally","_temp4","tileVertically","_temp5","tileGrid","_temp7","stackAll","showLayoutOptions","showCloseGroup","groups","DynamicFeedIcon","ViewColumnIcon","TableRowsIcon","ViewModuleIcon","MoreHorizIcon","Tooltip","IconButton","close","CloseIcon","_jsxs","api_2","_temp6","idx_2","states_2","referencePanel","states","api_1","cols","Math","ceil","sqrt","idx_1","states_1","col","row","floor","api_0","_temp3","idx_0","states_0","_temp","ViewLauncher","lazy","container","overflowY","background","default","viewStack","flexDirection","spacer","emptyPanel","justifyContent","observer","Suspense","fallback","view","ViewContainer","tabIcons","visibility","tabIconsVisible","tabIcon","marginLeft","smallIcon","JBrowseTabMenu","isHovered","onRename","onClose","EditIcon","MoreVertIcon","stopPropagation","tabContainer","gap","tabTitle","flex","overflow","minWidth","tabTitleText","textOverflow","whiteSpace","editInput","backgroundColor","action","selected","borderRadius","shape","stopEvent","e","preventDefault","isEditing","setIsEditing","useState","setIsHovered","editValue","setEditValue","displayValue","displayName","assemblyNames","r","assemblyManager","get","join","getTabDisplayName","handleStartEdit","handleSave","trim","setTitle","onMouseEnter","onMouseLeave","InputBase","autoFocus","value","onChange","target","onFocus","select","onBlur","onKeyDown","key","_Fragment","Typography","variant","onDoubleClick","width","gridRow","getPanelPosition","components","jbrowseView","JBrowseViewPanel","tabComponents","jbrowseTab","JBrowseViewTab","useTheme","setApi","trackedViewIdsRef","useRef","Set","rearrangingRef","sessionRef","current","useCallback","arrange","targetGroup","createElementId","activeGroup","setActivePanelId","moveViewToPanel","removeViewFromPanel","assignViewToPanel","contextValue","useMemo","createInitialPanels","dockviewApi","pendingAction","initLayout","init","firstPanelId","clear","groupSizes","processNode","node","viewIds","add","getPanel","push","dockviewDirection","currentGroup","i","requestAnimationFrame","totalSize","reduce","sum","g","containerWidth","round","setSize","containerHeight","setInit","panelViewAssignments","keys","setDockviewLayout","some","pendingViewId","otherViewIds","pendingPanelId","onReady","event","onDidActivePanelChange","onDidRemovePanel","removeView","onDidLayoutChange","toJSON","hasPendingAction","dockviewSession","savedLayout","dockviewLayout","fromJSON","values","Error","console","error","useEffect","autorun","currentViewIds","trackedIds","has","activePanelId","firstPanel","delete","currentLayout","JSON","stringify","themeClass","mode","Provider","DockviewReact","leftHeaderActionsComponent","rightHeaderActionsComponent","secondary","onMinimize","minimized","MinimizeIcon","input","paddingBottom","paddingTop","inputBase","inputRoot","light","inputFocused","borderColor","main","getSession","arrow","EditableTypography","setValue","val","setDisplayName","model","IconProps","usePanel","useWorkspaces","viewCount","includes","getPanelViewCount","moveView","panelFn","sessionFn","subMenu","ContentCopyIcon","addView","obj","idMap","Map","transformIds","Array","isArray","result","set","renameIds","structuredClone","getSnapshot","OpenInNewIcon","setUseWorkspaces","KeyboardDoubleArrowUpIcon","moveViewToTopInPanel","moveViewToTop","KeyboardArrowUpIcon","moveViewUpInPanel","moveViewUp","KeyboardArrowDownIcon","moveViewDownInPanel","moveViewDown","KeyboardDoubleArrowDownIcon","moveViewToBottomInPanel","moveViewToBottom","MenuIcon","grow","flexGrow","viewHeader","VIEW_HEADER_HEIGHT","top","zIndex","viewTitle","scrollRef","stickyViewHeaders","isSessionWithMultipleViews","jest","window","self","scrollIntoView","block","ref","cx","style","ViewMenu","focusedViewId","KeyboardArrowRightIcon","ViewContainerTitle","ViewButtons","pluginManager","getEnv","viewType","getViewType","ReactComponent","LoadingEllipses","viewContainer","margin","spacing","focusedView","unfocusedView","dark","useWidthSetter","handleSelectView","Element","contains","setFocusedViewId","document","addEventListener","removeEventListener","backgroundColorClassName","viewContainerClassName","Paper","elevation","ViewHeader","setMinimized","ViewWrapper"],"sourceRoot":""}