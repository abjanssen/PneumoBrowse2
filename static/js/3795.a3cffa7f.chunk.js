"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[3795,8142],{78142:(e,t,n)=>{n.r(t),n.d(t,{default:()=>I});var r=n(7552),o=n(68446),a=n(75785),l=n(23758),s=n(90542),i=n(17307),c=n(59121),m=n(83867),u=n(99546),d=n(20529),p=n(36715);const b=(0,a.n9)()((()=>({bp:{display:"flex",alignItems:"center",marginLeft:10},searchBox:{display:"flex"}}))),v=(0,o.observer)((function({view:e}){const{classes:t}=b(),{assemblyNames:n,coarseTotalBp:o}=e;return r.createElement("span",{className:t.searchBox},r.createElement(d.Gd,{model:e,showHelp:!1}),r.createElement(p.A,{variant:"body2",color:"textSecondary",className:t.bp},n.join(",")," ",(0,u.toLocale)(Math.round(o))," bp"))})),f=(0,a.n9)()({inline:{display:"inline-flex"}}),g=(0,o.observer)((function({model:e}){const{classes:t}=f(),{views:n}=e,[o,a]=(0,r.useState)(n.length<=3),[u,d]=(0,r.useState)(n.length<=3);return r.createElement(m.A,{row:!0},r.createElement(l.A,{menuItems:[{label:"Synteny track selectors",type:"subMenu",subMenu:n.slice(0,-1).map(((t,r)=>({label:`Row ${r+1}->${r+2} (${n[r].assemblyNames.join(",")}->${n[r+1].assemblyNames.join(",")})`,onClick:()=>{e.activateTrackSelector(r)}})))},{label:"Row track selectors",type:"subMenu",subMenu:n.map(((e,t)=>({label:`Row ${t+1} track selector (${e.assemblyNames.join(",")})`,onClick:()=>e.activateTrackSelector()})))}]},r.createElement(s.xU,null)),r.createElement(l.A,{menuItems:[{label:"Row view menus",type:"subMenu",subMenu:n.map(((e,t)=>({label:`View ${t+1} Menu`,subMenu:e.menuItems()})))},...e.headerMenuItems()]},r.createElement(i.A,null)),r.createElement(l.A,{menuItems:[{label:"Show search boxes",type:"checkbox",checked:o,onClick:()=>{a(!o)}},{label:"Orientation - Side-by-side",type:"radio",checked:u,onClick:()=>{d(!u)}},{label:"Orientation - Vertical",type:"radio",checked:!u,onClick:()=>{d(!u)}}]},r.createElement(c.A,null)),o?r.createElement("span",{className:u?t.inline:void 0},n.map((e=>r.createElement(v,{key:e.id,view:e})))):null)}));var h=n(68584),E=n(49823);const y=(0,a.n9)()({container:{display:"grid"},overlay:{zIndex:100,gridArea:"1/1"},resizeHandle:{height:4,background:"#ccc"}});function w({view:e}){const{pluginManager:t}=(0,u.getEnv)(e),{ReactComponent:n}=t.getViewType(e.type);return r.createElement(n,{model:e})}const k=(0,o.observer)((function({model:e}){const{classes:t}=y(),{views:n,levels:o}=e;return r.createElement("div",{className:t.container},n.map(((n,a)=>r.createElement(r.Fragment,{key:n.id},a>0?r.createElement(r.Fragment,null,r.createElement("div",{className:t.container},r.createElement(M,{model:e,level:a-1})),r.createElement(E.ResizeHandle,{onDrag:e=>o[a-1]?.setHeight((o[a-1]?.height||0)+e),className:t.resizeHandle})):null,r.createElement(w,{view:n})))))})),M=(0,o.observer)((function({model:e,level:t}){const{classes:n}=y();return r.createElement(r.Fragment,null,e.levels[t]?.tracks.map((e=>{const[t]=e.displays,{RenderingComponent:o}=t,a=(0,h.getConf)(e,"trackId");return o?r.createElement("div",{className:n.overlay,key:a,style:{height:t.height,overflow:"hidden"}},r.createElement(o,{model:t})):null})))})),C=k;var N=n(963),x=n(9555),S=n(42489),A=n(89003);const O=(0,a.n9)()({guide:{pointerEvents:"none",height:"100%",width:1,position:"absolute",zIndex:10},sm:{fontSize:10}}),R=(0,o.observer)((function({model:e,coordX:t}){const{classes:n}=O();return r.createElement(A.A,{open:!0,placement:"top",title:e.views.map((e=>e.pxToBp(t))).map(((e,t)=>r.createElement(p.A,{className:n.sm,key:[JSON.stringify(e),t].join("-")},(0,u.stringify)(e,!0)))),arrow:!0},r.createElement("div",{className:n.guide,style:{left:t,background:"red"}}))})),B=(0,a.n9)()((e=>({rubberband:{height:"100%",background:(0,N.X4)(e.palette.tertiary.main,.7),position:"absolute",zIndex:10,textAlign:"center",overflow:"hidden"},rubberbandControl:{cursor:"crosshair",width:"100%",minHeight:8},rubberbandText:{color:e.palette.tertiary.contrastText},popover:{mouseEvents:"none",cursor:"crosshair"},paper:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)}}))),T=(0,o.observer)((function({model:e,ControlComponent:t=r.createElement("div",null)}){const[n,o]=(0,r.useState)(),[a,l]=(0,r.useState)(),[s,i]=(0,r.useState)(),[c,m]=(0,r.useState)(),d=(0,r.useRef)(null),b=(0,r.useRef)(null),{classes:v}=B(),f=void 0!==n&&void 0===s;function g(e){e.preventDefault(),e.stopPropagation();const t=e.clientX-e.target.getBoundingClientRect().left;o(t),l(t)}function h(e){const t=e.target;m(e.clientX-t.getBoundingClientRect().left)}function y(){m(void 0),(0,S.transaction)((()=>{e.views.forEach((e=>{e.setOffsets(void 0,void 0)}))}))}function w(){i(void 0),o(void 0),l(void 0)}(0,r.useEffect)((()=>{function t(e){if(d.current&&f){const t=e.clientX-d.current.getBoundingClientRect().left;l(t)}}function r(t){if(void 0!==n&&d.current){const{clientX:r,clientY:o}=t,a=r-d.current.getBoundingClientRect().left;i({offsetX:a,clientX:r,clientY:o}),(0,S.transaction)((()=>{e.views.forEach((e=>{const t=function(e,t){if(void 0===n)return;let r=n,o=e;return o<r&&([r,o]=[o,r]),{leftOffset:t.pxToBp(r),rightOffset:t.pxToBp(o)}}(a,e);if(t){const{leftOffset:n,rightOffset:r}=t;e.setOffsets(n,r)}}))})),m(void 0)}}return f?(window.addEventListener("mousemove",t),window.addEventListener("mouseup",r),()=>{window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",r)}):()=>{}}),[n,f,e]),(0,r.useEffect)((()=>{!f&&void 0!==a&&void 0!==n&&Math.abs(a-n)<=3&&w()}),[f,a,n]);const k=Boolean(s);if(void 0===n)return r.createElement(r.Fragment,null,void 0!==c?r.createElement(R,{model:e,coordX:c}):null,r.createElement("div",{ref:d,className:v.rubberbandControl,onMouseDown:g,onMouseOut:y,onMouseMove:h},t));const M=s?s.offsetX:a||0,C=Math.min(M,n),N=Math.abs(M-n),{views:A}=e,O=A.map((e=>e.pxToBp(C))),T=A.map((e=>e.pxToBp(C+N))),z=A.map((e=>Math.ceil(N*e.bpPerPx)));return r.createElement(r.Fragment,null,b.current?r.createElement(r.Fragment,null,r.createElement(x.Ay,{className:v.popover,classes:{paper:v.paper},open:!0,anchorEl:b.current,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"right"},keepMounted:!0,disableRestoreFocus:!0},O.map(((e,t)=>r.createElement(p.A,{key:[JSON.stringify(e),t,"left"].join("-")},(0,u.stringify)(e,!0))))),r.createElement(x.Ay,{className:v.popover,classes:{paper:v.paper},open:!0,anchorEl:b.current,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"left"},keepMounted:!0,disableRestoreFocus:!0},T.map(((e,t)=>r.createElement(p.A,{key:[JSON.stringify(e),t,"right"].join("-")},(0,u.stringify)(e,!0)))))):null,r.createElement("div",{ref:b,className:v.rubberband,style:{left:C,width:N}},r.createElement(p.A,{variant:"h6",className:v.rubberbandText},z.map(((e,t)=>r.createElement(p.A,{key:`${e}_${t}`},`${e.toLocaleString("en-US")}bp`))))),r.createElement("div",{className:v.rubberbandControl,ref:d,onMouseDown:g,onMouseOut:y,onMouseMove:h},t),s?r.createElement(E.Menu,{anchorReference:"anchorPosition",anchorPosition:{left:s.clientX,top:s.clientY},onMenuItemClick:function(e,t){t(),w()},open:k,onClose:w,menuItems:e.rubberBandMenuItems()}):null)})),z=(0,a.n9)()((e=>({rubberbandContainer:{position:"relative",overflow:"hidden"},rubberbandDiv:{width:"100%",background:e.palette.action.disabledBackground,height:15,"&:hover":{background:e.palette.action.selected}}}))),I=(0,o.observer)((function({model:e}){const{classes:t}=z();return r.createElement("div",{className:t.rubberbandContainer},r.createElement(g,{model:e}),r.createElement(T,{model:e,ControlComponent:r.createElement("div",{className:t.rubberbandDiv})}),r.createElement(C,{model:e}))}))},13795:(e,t,n)=>{n.r(t),n.d(t,{default:()=>s});var r=n(7552),o=n(68446),a=n(78142);const l=(0,r.lazy)((()=>n.e(7712).then(n.bind(n,47712)))),s=(0,o.observer)((function({model:e}){return e.initialized?r.createElement(a.default,{model:e}):r.createElement(l,{model:e})}))}}]);
//# sourceMappingURL=3795.a3cffa7f.chunk.js.map