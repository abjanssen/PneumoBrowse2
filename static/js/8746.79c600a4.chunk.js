"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[8746],{46341(e,t,n){n.d(t,{A:()=>b});var r=n(55614),s=n(30128),o=n(35864),i=n(37472),l=n(62456),a=n(23886),c=n(46625),h=n(7201),d=n(87377),x=n(69566),g=n(44460);const u=(0,c.n)()(e=>({resizeHandle:{height:5,boxSizing:"border-box",background:"transparent","&:hover":{background:e.palette.divider}}})),m=(0,x.observer)(function({children:e,model:t,exportSVG:n}){const{height:r}=t,{width:s,offsetPx:o}=(0,a.getContainingView)(t),i=Math.max(0,-o);return n?(0,g.jsx)("g",{transform:`translate(${i})`,children:e}):(0,g.jsx)("svg",{style:{position:"absolute",top:0,left:i,height:r,width:s},children:e})}),f=(0,x.observer)(function({model:e,exportSVG:t}){const{classes:n}=u(),{assemblyManager:r}=(0,a.getSession)(e),i=(0,a.getContainingView)(e),[l,c]=(0,s.useState)(),{lineZoneHeight:h,featuresVolatile:d}=e,{assemblyNames:x,dynamicBlocks:f}=i,p=r.get(x[0]),b=(f.contentBlocks[0]?.widthPx||0)/(d?.length||1);return p&&d?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(m,{exportSVG:t,model:e,children:[(0,g.jsx)(y,{model:e,setMouseOverLine:c}),l?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("line",{stroke:"#f00c",strokeWidth:2,style:{pointerEvents:"none"},x1:l.idx*b+b/2,x2:l.c,y1:h,y2:0,onMouseLeave:()=>{c(void 0)}}),(0,g.jsx)(j,{contents:l.f.get("name")})]}):null]}),t?null:(0,g.jsx)(o.A,{style:{position:"absolute",top:h-4},onDrag:t=>e.setLineZoneHeight(h+t),className:n.resizeHandle})]}):null}),p=(0,s.forwardRef)(function(e,t){const n=(0,r.c)(5),{message:o}=e;let l,a;return n[0]!==o?(l=(0,s.isValidElement)(o)?o:o?(0,g.jsx)(i.A,{html:String(o)}):null,n[0]=o,n[1]=l):l=n[1],n[2]!==t||n[3]!==l?(a=(0,g.jsx)("div",{ref:t,children:l}),n[2]=t,n[3]=l,n[4]=a):a=n[4],a}),j=(0,x.observer)(function({contents:e}){return e?(0,g.jsx)(l.A,{children:(0,g.jsx)(p,{message:e})}):null}),y=(0,x.observer)(function({model:e,setMouseOverLine:t}){const n=(0,d.A)(),{assemblyManager:r}=(0,a.getSession)(e),o=(0,a.getContainingView)(e),{lineZoneHeight:i,featuresVolatile:l}=e,{offsetPx:c,assemblyNames:x,dynamicBlocks:u}=o,m=r.get(x[0]),f=(u.contentBlocks[0]?.widthPx||0)/(l?.length||1),p=Math.max(c,0),j=(0,a.getStrokeProps)((0,h.X4)(n.palette.text.primary,.4));return m&&l?(0,g.jsx)(g.Fragment,{children:l.map((e,n)=>{const r=e.get("refName"),l=(o.bpToPx({refName:m.getCanonicalRefName2(r),coord:e.get("start")})?.offsetPx||0)-p;return(0,s.createElement)("line",{...j,strokeWidth:1,key:e.id(),x1:n*f+f/2,x2:l,y1:i,y2:0,onMouseEnter:()=>{t({f:e,idx:n,c:l})},onMouseLeave:()=>{t(void 0)}})})}):null}),b=f},68746(e,t,n){n.d(t,{renderSvg:()=>a});var r=n(23886),s=n(44934),o=n(46341),i=n(64500),l=n(44460);async function a(e,t,n){await(0,s.when)(()=>!!e.regionCannotBeRenderedText);const{offsetPx:a}=(0,r.getContainingView)(e),{lineZoneHeight:c}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("g",{transform:`translate(${Math.max(-a,0)})`,children:[(0,l.jsx)(o.A,{exportSVG:!0,model:e}),(0,l.jsxs)("g",{transform:`translate(0,${c})`,children:[(0,l.jsx)("g",{children:await n(t)}),await(0,i.V)(e)]})]})})}},17165(e,t,n){n.d(t,{A:()=>u});var r=n(30128),s=n(23886),o=n(69566),i=n(55614),l=n(87377),a=n(76621),c=n(44460);const h=function(e){const t=(0,i.c)(4),{source:n,idx:r,rowHeight:s}=e,{color:o}=n;let l;return t[0]!==o||t[1]!==r||t[2]!==s?(l=o?(0,c.jsx)(a.A,{y:r*s,x:0,width:15.5,height:s+.5,color:o}):null,t[0]=o,t[1]=r,t[2]=s,t[3]=l):l=t[3],l},d=function(e){const t=(0,i.c)(6),{source:n,idx:r,rowHeight:s,textFillProps:o}=e,{color:l,name:a}=n,h=Math.min(s,12),d=(r+.5)*s,x=l?17:0;let g;return t[0]!==a||t[1]!==h||t[2]!==d||t[3]!==x||t[4]!==o?(g=(0,c.jsx)("text",{y:d,x,fontSize:h,dominantBaseline:"central",...o,children:a}),t[0]=a,t[1]=h,t[2]=d,t[3]=x,t[4]=o,t[5]=g):g=t[5],g},x=(0,o.observer)(function({model:e,labelWidth:t}){const{canDisplayLabels:n,rowHeight:o,sources:i}=e,x=(0,l.A)(),g=t+((0,r.useMemo)(()=>i?.some(e=>e.color)??!1,[i])?20:0),u=(0,r.useMemo)(()=>(0,s.getFillProps)(x.palette.text.primary),[x.palette.text.primary]);return i?(0,c.jsxs)(c.Fragment,{children:[n?(0,c.jsx)(a.A,{y:0,x:0,width:g,height:(i.length+.25)*o}):null,i.map((e,t)=>(0,c.jsx)(h,{source:e,idx:t,rowHeight:o},`${e.name}-${t}`)),n?i.map((e,t)=>(0,c.jsx)(d,{source:e,idx:t,rowHeight:o,textFillProps:u},`${e.name}-text-${t}`)):null]}):null}),g=(0,o.observer)(function({children:e,model:t,exportSVG:n}){const{id:r,scrollTop:o,height:i,hierarchy:l,treeAreaWidth:a,showTree:h}=t,d=`legend-${"undefined"==typeof jest?r:"test"}`,x=l&&h?a:0;return n?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("defs",{children:(0,c.jsx)("clipPath",{id:d,children:(0,c.jsx)("rect",{x:0,y:0,width:1e3,height:i})})}),(0,c.jsx)("g",{clipPath:`url(#${d})`,children:(0,c.jsx)("g",{transform:`translate(0,${-o})`,children:e})})]}):(0,c.jsx)("svg",{style:{position:"absolute",top:0,left:x,zIndex:100,pointerEvents:"none",height:t.totalHeight,width:(0,s.getContainingView)(t).width},children:e})}),u=(0,o.observer)(function(e){const{model:t}=e,{canDisplayLabels:n,rowHeight:o,sources:i}=t,l=Math.min(o,12),a=(0,r.useMemo)(()=>{if(!i)return 0;let e=0;for(const t of i){const r=n?(0,s.measureText)(t.name,l)+10:20;r>e&&(e=r)}return e},[i,l,n]);return i?(0,c.jsx)(g,{...e,children:(0,c.jsx)(x,{model:t,labelWidth:a})}):null})},76621(e,t,n){n.d(t,{A:()=>c});var r=n(55614),s=n(23886),o=n(7201),i=n(87377),l=n(24154),a=n(44460);const c=e=>{const t=(0,r.c)(11),{x:n,y:c,width:h,height:d,color:x}=e,g=(0,i.A)();let u,m,f;return t[0]!==x||t[1]!==g?(u=x||(0,o.X4)(g.palette.background.paper,l.U0),t[0]=x,t[1]=g,t[2]=u):u=t[2],t[3]!==u?(m=(0,s.getFillProps)(u),t[3]=u,t[4]=m):m=t[4],t[5]!==d||t[6]!==m||t[7]!==h||t[8]!==n||t[9]!==c?(f=(0,a.jsx)("rect",{pointerEvents:"auto",x:n,y:c,width:h,height:d,...m}),t[5]=d,t[6]=m,t[7]=h,t[8]=n,t[9]=c,t[10]=f):f=t[10],f}},64500(e,t,n){n.d(t,{V:()=>c});var r=n(23886),s=n(76621),o=n(69566),i=n(44460);const l=(0,o.observer)(function({model:e}){const{treeAreaWidth:t,hierarchy:n}=e,r=[];let s=0;if(n)for(const e of n.links()){const{source:t,target:n}=e,o=t.x,l=n.x,a=n.y,c=t.y;r.push((0,i.jsx)("line",{x1:c,y1:o,x2:c,y2:l,stroke:"black",opacity:"0.4"},`${c}-${o}-${a}-${l}-${s++}`),(0,i.jsx)("line",{x1:c,y1:l,x2:a,y2:l,stroke:"black",opacity:"0.4"},`${c}-${o}-${a}-${l}-${s++}`))}return r});var a=n(17165);async function c(e){const{offsetPx:t}=(0,r.getContainingView)(e),{hierarchy:n,showTree:o,treeAreaWidth:c,availableHeight:h}=e;return(0,i.jsxs)("g",{id:"tree-layer","data-testid":"tree-layer",transform:`translate(${Math.max(-t,0)})`,clipPath:"url(#sidebarClip)",children:[(0,i.jsx)("clipPath",{id:"sidebarClip",children:(0,i.jsx)("rect",{x:"0",y:"0",width:"100%",height:h})}),(0,i.jsx)("g",{id:"legend-layer",transform:`translate(${o&&n?c:0})`,children:(0,i.jsx)(a.A,{model:e,orientation:"left",exportSVG:!0})}),o&&n?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.A,{x:0,y:0,width:c,height:h}),(0,i.jsx)(l,{model:e})]}):null]})}}}]);
//# sourceMappingURL=8746.79c600a4.chunk.js.map