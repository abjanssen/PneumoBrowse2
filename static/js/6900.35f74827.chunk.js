/*! For license information please see 6900.35f74827.chunk.js.LICENSE.txt */
"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[6900],{23835(e,t,r){var o=r(46061);function s(e){return!0===o(e)&&"[object Object]"===Object.prototype.toString.call(e)}e.exports=function(e){var t,r;return!1!==s(e)&&"function"==typeof(t=e.constructor)&&!1!==s(r=t.prototype)&&!1!==r.hasOwnProperty("isPrototypeOf")}},35862(e,t,r){const{deleteProperty:o}=Reflect,s=r(41445),n=r(23835),a=e=>"object"==typeof e&&null!==e||"function"==typeof e,i=e=>{if(!s(e))throw new TypeError("Object keys must be strings or symbols");if((e=>"__proto__"===e||"constructor"===e||"prototype"===e)(e))throw new Error(`Cannot set unsafe key: "${e}"`)},c=(e,t)=>t&&"function"==typeof t.split?t.split(e):"symbol"==typeof e?[e]:Array.isArray(e)?e:((e,t,r)=>{const o=(e=>Array.isArray(e)?e.flat().map(String).join(","):e)(t?((e,t)=>{if("string"!=typeof e||!t)return e;let r=e+";";return void 0!==t.arrays&&(r+=`arrays=${t.arrays};`),void 0!==t.separator&&(r+=`separator=${t.separator};`),void 0!==t.split&&(r+=`split=${t.split};`),void 0!==t.merge&&(r+=`merge=${t.merge};`),void 0!==t.preservePaths&&(r+=`preservePaths=${t.preservePaths};`),r})(e,t):e);i(o);const s=l.cache.get(o)||r();return l.cache.set(o,s),s})(e,t,()=>((e,t={})=>{const r=t.separator||".",o="/"!==r&&t.preservePaths;if("string"==typeof e&&!1!==o&&/\//.test(e))return[e];const s=[];let n="";const a=e=>{let t;""!==e.trim()&&Number.isInteger(t=Number(e))?s.push(t):s.push(e)};for(let t=0;t<e.length;t++){const o=e[t];"\\"!==o?o!==r?n+=o:(a(n),n=""):n+=e[++t]}return n&&a(n),s})(e,t)),u=(e,t,r,s)=>{if(i(t),void 0===r)o(e,t);else if(s&&s.merge){const o="function"===s.merge?s.merge:Object.assign;o&&n(e[t])&&n(r)?e[t]=o(e[t],r):e[t]=r}else e[t]=r;return e},l=(e,t,r,o)=>{if(!t||!a(e))return e;const s=c(t,o);let n=e;for(let e=0;e<s.length;e++){const t=s[e],c=s[e+1];if(i(t),void 0===c){u(n,t,r,o);break}"number"!=typeof c||Array.isArray(n[t])?(a(n[t])||(n[t]={}),n=n[t]):n=n[t]=[]}return e};l.split=c,l.cache=new Map,l.clear=()=>{l.cache=new Map},e.exports=l},41445(e){e.exports=function(e){return"object"==typeof e?null===e:"function"!=typeof e}},46061(e){e.exports=function(e){return null!=e&&"object"==typeof e&&!1===Array.isArray(e)}},86900(e,t,r){r.d(t,{fetchJb1:()=>S});var o=r(33624),s=r(77251),n=r(35862),a=r.n(n);const i=e=>null!==e&&"object"==typeof e,c=(e,t,r)=>"function"==typeof r.join?r.join(e):e[0]+t+e[1],u=(e,t={},r)=>"function"!=typeof r?.isValid||r.isValid(e,t),l=e=>i(e)||"function"==typeof e,f=(e,t,r={})=>{if(i(r)||(r={default:r}),!l(e))return void 0!==r.default?r.default:e;"number"==typeof t&&(t=String(t));const o=Array.isArray(t),s="string"==typeof t,n=r.separator||".",a=r.joinChar||("string"==typeof n?n:".");if(!s&&!o)return e;if(void 0!==e[t])return u(t,e,r)?e[t]:r.default;const f=o?t:((e,t,r)=>"function"==typeof r.split?r.split(e):e.split(t))(t,n,r),p=f.length;let d=0;do{let t=f[d];for("string"!=typeof t&&(t=String(t));t.endsWith("\\");)t=c([t.slice(0,-1),f[++d]||""],a,r);if(void 0!==e[t]){if(!u(t,e,r))return r.default;e=e[t]}else{let o=!1,s=d+1;for(;s<p;)if(t=c([t,f[s++]],a,r),o=void 0!==e[t]){if(!u(t,e,r))return r.default;e=e[t],d=s-1;break}if(!o)return r.default}}while(++d<p&&l(e));return d===p?e:r.default};function p(e){return e?.label&&"string"==typeof e.label}function d(e,t){for(const r of Object.keys(t))"__proto__"!==r&&"constructor"!==r&&"prototype"!==r&&(r in e&&"object"==typeof t[r]&&"object"==typeof e[r]?d(e[r],t[r]):void 0!==e[r]&&void 0===t[r]||(e[r]=t[r]));return e}function y(e){return"include"===e}function w(e,t){if(e.tracks&&!Array.isArray(e.tracks))if(p(e.tracks))e.tracks=[e.tracks];else{const t=[];for(const r of Object.keys(e.tracks)){const o=e.tracks[r];p(o)?t.push(o):t.push({label:r,...o})}e.tracks=t}const r=e.trackMetadata;if(r?.sources){if("string"==typeof r.sources&&(r.sources=[r.sources]),o=r.sources,o?.url&&"string"==typeof o.url&&(r.sources=[r.sources]),!Array.isArray(r.sources)){const e=[];for(const t of Object.keys(r.sources)){const o=r.sources[t];"name"in o||(o.name=t),e.push(o)}r.sources=e}r.sources=r.sources.map(e=>{if("string"==typeof e){const t={url:e},r=/\.(\w+)$/.exec(e);return r&&(t.type=r[1].toLowerCase()),t}return e})}var o;if(e.sourceUrl=e.sourceUrl||t,e.sourceUrl.startsWith("/")&&(e.sourceUrl=new URL(e.sourceUrl,window.location.href).href),e.baseUrl=e.baseUrl||new URL(".",e.sourceUrl).href,e.baseUrl.length&&!e.baseUrl.endsWith("/")&&(e.baseUrl+="/"),e.sourceUrl){const t=[];if(e.tracks)for(const r of e.tracks)t.push(r);if(e.stores)for(const r of Object.values(e.stores))t.push(r);e.names&&t.push(e.names);for(const r of t)r.baseUrl||(r.baseUrl=e.baseUrl||"/");e.refSeqs&&"string"==typeof e.refSeqs&&(e.refSeqs=new URL(e.refSeqs,e.sourceUrl).href),e.nameUrl&&(e.nameUrl=new URL(e.nameUrl,e.sourceUrl).href)}e.stores=e.stores||{};for(let t of e.tracks||[]){if(t.config){const e=t.config;t.config=void 0,t={...e,...t}}if(t.store)continue;let r;r="FeatureTrack"===t.type?"JBrowse/View/Track/HTMLFeatures":"ImageTrack"===t.type?"JBrowse/View/Track/FixedImage":"ImageTrack.Wiggle"===t.type?"JBrowse/View/Track/FixedImage/Wiggle":"SequenceTrack"===t.type?"JBrowse/View/Track/Sequence":h("JBrowse/View/Track",t.type),t.type=r,b(e,t),t.histograms&&(t.histograms.baseUrl||(t.histograms.baseUrl=t.baseUrl),b(e,t.histograms))}return e}function h(e,t){return t?(t.includes("/")||(t=`${e}/${t}`),t=t.replace(/^\//,"")):""}function b(e,t){const{urlTemplate:r=""}=t,o=t.storeClass?h("JBrowse/Store",t.storeClass):function(e,t){return e?e.type?.includes("/FixedImage")?"JBrowse/Store/TiledImage/Fixed"+(0===e.backendVersion?"_v0":""):/\.jsonz?$/i.test(t)?"JBrowse/Store/SeqFeature/NCList"+(0===e.backendVersion?"_v0":""):/\.bam$/i.test(t)?"JBrowse/Store/SeqFeature/BAM":/\.cram$/i.test(t)?"JBrowse/Store/SeqFeature/CRAM":/\.gff3?$/i.test(t)?"JBrowse/Store/SeqFeature/GFF3":/\.bed$/i.test(t)?"JBrowse/Store/SeqFeature/BED":/\.vcf.b?gz$/i.test(t)?"JBrowse/Store/SeqFeature/VCFTabix":/\.gff3?.b?gz$/i.test(t)?"JBrowse/Store/SeqFeature/GFF3Tabix":/\.bed.b?gz$/i.test(t)?"JBrowse/Store/SeqFeature/BEDTabix":/\.(bw|bigwig)$/i.test(t)?"JBrowse/Store/SeqFeature/BigWig":/\.(bb|bigbed)$/i.test(t)?"JBrowse/Store/SeqFeature/BigBed":/\.(fa|fasta)$/i.test(t)?"JBrowse/Store/SeqFeature/IndexedFasta":/\.(fa|fasta)\.b?gz$/i.test(t)?"JBrowse/Store/SeqFeature/BgzipIndexedFasta":/\.2bit$/i.test(t)?"JBrowse/Store/SeqFeature/TwoBit":e.type?.endsWith("/Sequence")?"JBrowse/Store/Sequence/StaticChunked":"":""}(t,r);if(!o)return void console.warn(`Unable to determine an appropriate data store to use with track '${t.label}', please explicitly specify a storeClass in the configuration.`);const n={...t,type:o};n.name="JBrowse/Store/Sequence/StaticChunked"!==o&&"JBrowse/Store/Sequence/IndexedFasta"!==o&&"JBrowse/Store/SeqFeature/IndexedFasta"!==o&&"JBrowse/Store/SeqFeature/BgzipIndexedFasta"!==o&&"JBrowse/Store/SeqFeature/TwoBit"!==o&&"JBrowse/Store/Sequence/TwoBit"!==o&&!t.useAsRefSeqStore||e.stores?.refseqs?`store${(0,s.objectHash)(n)}`:"refseqs",e.stores||(e.stores={}),e.stores[n.name]=n,t.store=n.name}function g(e){return void 0!==e.uri}function m(e){return void 0!==e.localPath}async function S(e={uri:"",locationType:"UriLocation"},t={include:["{dataRoot}/trackList.json","{dataRoot}/tracks.conf"]},r={uri:"",locationType:"UriLocation"}){const o="uri"in e?"uri":"localPath",s=JSON.parse(JSON.stringify(e));let n="";if(g(e)&&(n=e.uri),m(e)&&(n=e.localPath),n.endsWith("/")&&(s[o]=n.slice(0,-1)),g(r)&&r.uri||m(r)&&r.localPath){const e="uri"in r?"uri":"localPath";let t="";g(r)&&(t=r.uri),m(r)&&(t=r.localPath),t.endsWith("/")&&(t=t.slice(0,-1));let n={};for(const r of["jbrowse.conf","jbrowse_conf.json"]){let o=null;try{o=await k({[e]:`${t}/${r}`})}catch(e){console.error(`tried to access ${t}/${r}, but failed`)}n=B(n,o)||{}}return s[o]&&(n.dataRoot=s[o]),v(n)}const a=w(t,window.location.href);return s[o]&&(a.dataRoot=s[o]),v(a)}async function v(e,t=J){const r=d(structuredClone(t),e);let o=await async function(e){return async function t(r,o){const s=r.sourceUrl||r.baseUrl;if(!s)throw new Error(`Could not determine source URL: ${JSON.stringify(r)}`);const n=B(structuredClone(o),r);if(!n)throw new Error("Problem merging configs");const a=$(function(e){return e?(Array.isArray(e)||(e=[e]),e.map(e=>("string"==typeof e&&(e={url:e}),"format"in e||(e.format=e.url.endsWith(".conf")?"conf":"JB_json"),"JB_json"!==e.format||"version"in e||(e.version=1),e))):[]}(r.include||[]),n);r.include=void 0;const i=a.map(async r=>(r.cacheBuster=e.cacheBuster,t(await k({uri:new URL(r.url,s).href,locationType:"UriLocation"}),n))),c=await Promise.all(i);for(const e of c)r=B(r,e)||r;return r}(e=structuredClone(e),{})}(r);return o=B(o,e)||o,$(o,o),function(e){if(e.tracks||(e.tracks=[]),!e.baseUrl)throw new Error("Must provide a `baseUrl` in configuration")}(o),o}async function k(e){const t=await(0,o.openLocation)(e).readFile("utf8");return g(e)?j(t,e.uri):m(e)?j(t,e.localPath):j(t)}function j(e,t=""){return e.trim().startsWith("{")?function(e,t){if("string"==typeof e){let r;try{r=JSON.parse(e)}catch(e){throw new Error(`${e} when parsing configuration.`)}return w(r,t)}return w(e,t)}(e,t):function(e,t){let r;try{r=function(e,t){let r,o,s,n=[];const i={tracks:{}};let c;function u(){if(void 0!==s){let e;try{const t=/^json:(.+)/i.exec(s);if(e=t?JSON.parse(t[1]):/^[+-]?[\d.,]+([eE][-+]?\d+)?$/.test(s)?Number.parseFloat(s.replaceAll(",","")):s,!r)throw new Error(`Error parsing in section ${n.join(" - ")}`);const c=[...n,...r].join(".");if("+="===o){let t=f(i,c);t?Array.isArray(t)||(t=[t]):t=[],t.push(e),e=t}"true"===e&&(e=!0),"false"===e&&(e=!1),a()(i,c,e)}catch(e){throw new Error(`syntax error${t?` in ${t}`:""}${c?" at line "+(c-1):""}`)}}}for(const[t,a]of e.split(/\n|\r\n|\r/).entries()){c=t+1;const e=a.replace(/^\s*#.+/,"");let i;if(i=/^\s*\[([^\]]+)/.exec(e))u(),r=void 0,s=void 0,n=i[1].trim().split(/\s*\.\s*/),1===n.length&&"general"===n[0].toLowerCase()&&(n=[]);else if(i=e.match(void 0===s?/^([^+=]+)(\+?=)(.*)/:/^(\S[^+=]+)(\+?=)(.*)/))u(),r=i[1].trim().split(/\s*\.\s*/),[,,o]=i,y([...n,...r].join("."))&&(o="+="),s=i[3].trim();else if(void 0!==r&&(i=/^\s{0,4}\+\s*(.+)/.exec(e)))u(),o="+=",s=i[1].trim();else if(void 0!==s&&(i=/^\s+(\S.*)/.exec(e))){const e=i[1];s+=s.length?` ${e.trim()}`:e.trim()}else u(),r=void 0,s=void 0}return u(),i}(e,t)}catch(e){throw new Error(`${e} when parsing configuration.`)}return w(r,t)}(e,t)}function B(e,t){if(null===t)return null;null===e&&(e={});for(const r of Object.keys(t))if("tracks"===r&&r in e){const o=e[r]||[],s=t[r]||[];if(!Array.isArray(o)||!Array.isArray(s))throw new Error(`Track config has not been properly regularized: ${o} ${s}`);e[r]=U(o,s)}else!F(r)&&r in e&&"object"==typeof t[r]&&"object"==typeof e[r]?e[r]=d(e[r],t[r]):"dataRoot"===r?(void 0===e[r]||"data"===e[r]&&void 0!==t[r])&&(e[r]=t[r]):void 0!==e[r]&&void 0===t[r]||(e[r]=t[r]);return e}function U(e,t){if(!t.length)return e;const r={};for(const[t,o]of e.entries())o.index=t,r[o.label]=o;for(const o of t){const t=r[o.label];t?B(t,o):e.push(o)}return e}function $(e,t){if(!e)return e;if(Array.isArray(e))for(let r=0;r<e.length;r+=1)e[r]=$(e[r],t);else if("object"==typeof e){const r=e;for(const e of Object.keys(r))r[e]=$(r[e],t)}else if("string"==typeof e)return function(e,t){return e.replaceAll(/{([\s\w.]+)}/g,(e,r)=>{r=r.replaceAll(/\s+/g,"");const o=f(t,r);if(void 0!==o)return"function"==typeof o?o(r):o;if(t.callback){const e=t.callback.call(this,r);if(void 0!==e)return e}return e})}(e,t);return e}function F(e){return"datasets"===e}const J={tracks:[],containerID:"GenomeBrowser",dataRoot:"data",show_tracklist:!0,show_nav:!0,show_menu:!0,show_overview:!0,show_fullviewlink:!0,update_browser_title:!0,updateBrowserURL:!0,refSeqs:"{dataRoot}/seq/refSeqs.json",include:["jbrowse.conf","jbrowse_conf.json"],nameUrl:"{dataRoot}/names/root.json",datasets:{_DEFAULT_EXAMPLES:!0,volvox:{url:"?data=sample_data/json/volvox",name:"Volvox Example"},modencode:{url:"?data=sample_data/json/modencode",name:"MODEncode Example"},yeast:{url:"?data=sample_data/json/yeast",name:"Yeast Example"}},highlightSearchedRegions:!1,highResolutionMode:"auto"}}}]);
//# sourceMappingURL=6900.35f74827.chunk.js.map