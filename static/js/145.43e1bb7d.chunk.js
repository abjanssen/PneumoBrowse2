"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[145],{145(e,t,a){a.d(t,{convertTrackConfig:()=>o});var r=a(23886),i=a(19608);function o(e,t){const a={trackId:(0,r.objectHash)(e),name:e.key||e.label},o=e.metadata&&(e.metadata.description||e.metadata.Description);o&&(a.description=o);const n=e.category||e.metadata?.category;a.category=n?n.split(/\s*\/\s*/):[];const{storeClass:c}=e;if(!e.urlTemplate){if(!c?.endsWith("FromConfig")){const t=e.key||e.label;return console.warn(`Could not import JBrowse1 track "${t}" because it does not have a "urlTemplate" or is not a "FromConfig" track`),(0,i.generateUnsupportedTrackConf)(a.name,t,a.category)}return function(e,t){const a=(e.features||[]).map(e=>{const t=JSON.parse(JSON.stringify(e));return t.refName=e.seq_id,t.uniqueId=`${e.seq_id}:${e.start}-${e.end}:${e.name||""}`,t});return t.adapter={type:"FromConfigAdapter",features:a},t.type="FeatureTrack",t}(e,a)}const p=e=>new URL(e,`${t}/`).href.replaceAll(/%7B/gi,"{").replaceAll(/%7D/gi,"}"),l=p(e.urlTemplate);if(c){if("JBrowse/Store/SeqFeature/BAM"===c){const t={type:"BamAdapter",bamLocation:{uri:l,locationType:"UriLocation"}};return e.baiUrlTemplate?t.index={location:{uri:p(e.baiUrlTemplate),locationType:"UriLocation"}}:e.csiUrlTemplate?t.index={location:{uri:p(e.csiUrlTemplate),locationType:"UriLocation"},indexType:"CSI"}:t.index={location:{uri:`${l}.bai`,locationType:"UriLocation"}},{...a,type:"AlignmentsTrack",adapter:t}}if("JBrowse/Store/SeqFeature/CRAM"===c){const t={type:"CramAdapter",cramLocation:{uri:l,locationType:"UriLocation"},craiLocation:e.craiUrlTemplate?{uri:p(e.craiUrlTemplate),locationType:"UriLocation"}:{uri:`${l}.crai`,locationType:"UriLocation"}};return{...a,type:"AlignmentsTrack",adapter:t}}if("JBrowse/Store/SeqFeature/NCList"===c)return{...a,type:"FeatureTrack",adapter:{type:"NCListAdapter",rootUrlTemplate:{uri:l,locationType:"UriLocation"}}};if("JBrowse/Store/SeqFeature/BigWig"===c||"JBrowse/Store/BigWig"===c)return e.type?.endsWith("XYPlot")?a.defaultRendering="xyplot":e.type?.endsWith("Density")&&(a.defaultRendering="density"),{...a,type:"QuantitativeTrack",adapter:{type:"BigWigAdapter",bigWigLocation:{uri:l,locationType:"UriLocation"}}};if("JBrowse/Store/SeqFeature/VCFTabix"===c){const t={type:"VcfTabixAdapter",vcfGzLocation:{uri:l,locationType:"UriLocation"}};return e.tbiUrlTemplate?t.index={location:{uri:p(e.tbiUrlTemplate),locationType:"UriLocation"}}:e.csiUrlTemplate?t.index={location:{uri:p(e.csiUrlTemplate),locationType:"UriLocation"},indexType:"CSI"}:t.index={location:{uri:`${l}.tbi`,locationType:"UriLocation"}},{...a,type:"VariantTrack",adapter:t}}if("JBrowse/Store/SeqFeature/VCFTribble"===c)return(0,i.generateUnsupportedTrackConf)(a.name,`VCFTribble (${l})`,a.category);if("JBrowse/Store/SeqFeature/GFF3"===c)return{...a,type:"FeatureTrack",adapter:{type:"Gff3Adapter",gffLocation:{uri:l,locationType:"UriLocation"}}};if("JBrowse/Store/SeqFeature/BigBed"===c)return{...a,type:"FeatureTrack",adapter:{type:"BigBedAdapter",bigBedLocation:{uri:l,locationType:"UriLocation"}}};if("JBrowse/Store/SeqFeature/GFF3Tabix"===c){const t={type:"Gff3TabixAdapter",gffGzLocation:{uri:l,locationType:"UriLocation"}};return e.tbiUrlTemplate?t.index={location:{uri:p(e.tbiUrlTemplate),locationType:"UriLocation"}}:e.csiUrlTemplate?t.index={location:{uri:p(e.csiUrlTemplate),locationType:"UriLocation"},indexType:"CSI"}:t.index={location:{uri:`${l}.tbi`,locationType:"UriLocation"}},{...a,type:"FeatureTrack",adapter:t}}if("JBrowse/Store/SeqFeature/BED"===c)return(0,i.generateUnsupportedTrackConf)(a.name,`BED (${l})`,a.category);if("JBrowse/Store/SeqFeature/BEDTabix"===c){const t={type:"BedTabixAdapter",bedGzLocation:{uri:l,locationType:"UriLocation"}};return e.tbiUrlTemplate?t.index={location:{uri:p(e.tbiUrlTemplate),locationType:"UriLocation"}}:e.csiUrlTemplate?t.index={location:{uri:p(e.csiUrlTemplate),locationType:"UriLocation"},indexType:"CSI"}:t.index={location:{uri:`${l}.tbi`,locationType:"UriLocation"}},{...a,type:"FeatureTrack",adapter:t}}if("JBrowse/Store/SeqFeature/GTF"===c)return{...a,type:"FeatureTrack",adapter:{type:"GtfAdapter",gtfLocation:{uri:l,locationType:"UriLocation"}}};if("JBrowse/Store/SeqFeature/StaticChunked"===c||"JBrowse/Store/Sequence/StaticChunked"===c)return(0,i.generateUnsupportedTrackConf)(a.name,`StaticChunked (${l})`,a.category);if("JBrowse/Store/SeqFeature/UnindexedFasta"===c)return(0,i.generateUnsupportedTrackConf)(a.name,`UnindexedFasta (${l})`,a.category);if("JBrowse/Store/SeqFeature/IndexedFasta"===c){const t={type:"IndexedFastaAdapter",fastaLocation:{uri:l,locationType:"UriLocation"},faiLocation:e.faiUrlTemplate?{uri:p(e.faiUrlTemplate),locationType:"UriLocation"}:{uri:`${l}.fai`,locationType:"UriLocation"}};return{...a,type:"SequenceTrack",adapter:t}}if("JBrowse/Store/SeqFeature/BgzipIndexedFasta"===c){const t={type:"BgzipFastaAdapter",fastaLocation:{uri:l,locationType:"UriLocation"},faiLocation:e.faiUrlTemplate?{uri:p(e.faiUrlTemplate),locationType:"UriLocation"}:{uri:`${l}.fai`,locationType:"UriLocation"},gziLocation:e.gziUrlTemplate?{uri:p(e.gziUrlTemplate),locationType:"UriLocation"}:{uri:`${l}.gzi`,locationType:"UriLocation"}};return{...a,type:"ReferenceSequenceTrack",adapter:t}}if("JBrowse/Store/SeqFeature/TwoBit"===c)return{...a,type:"ReferenceSequenceTrack",adapter:{type:"TwoBitAdapter",twoBitLocation:{uri:l,locationType:"UriLocation"}}}}return a.adapter=(0,i.guessAdapter)({uri:l,locationType:"UriLocation"},void 0,l),a.adapter.type===i.UNSUPPORTED?(0,i.generateUnsupportedTrackConf)(a.name,l,a.category):a.adapter.type===i.UNKNOWN?(0,i.generateUnknownTrackConf)(a.name,l,a.category):(a.type=(0,i.guessTrackType)(a.adapter.type),"QuantitativeTrack"===a.type&&(e.type?.endsWith("XYPlot")?a.defaultRendering="xyplot":e.type?.endsWith("Density")&&(a.defaultRendering="density")),a)}}}]);
//# sourceMappingURL=145.43e1bb7d.chunk.js.map