"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[5828],{9807(e,t,r){r.d(t,{A:()=>p});var n=r(42918),i=r(77251),s=r(64074),o=r(30936),l=r(33579),a=r(15943),c=r(32118);const h=e=>{const t=(0,o.c)(11),{x:r,y:n,width:s,height:h,color:d}=e,x=(0,l.A)();let u,g,p;return t[0]!==d||t[1]!==x?(u=d||(0,a.X4)(x.palette.background.paper,.8),t[0]=d,t[1]=x,t[2]=u):u=t[2],t[3]!==u?(g=(0,i.getFillProps)(u),t[3]=u,t[4]=g):g=t[4],t[5]!==h||t[6]!==g||t[7]!==s||t[8]!==r||t[9]!==n?(p=(0,c.jsx)("rect",{pointerEvents:"auto",x:r,y:n,width:s,height:h,...g}),t[5]=h,t[6]=g,t[7]=s,t[8]=r,t[9]=n,t[10]=p):p=t[10],p},d=function(e){const t=(0,o.c)(4),{source:r,idx:n,rowHeight:i}=e,{color:s}=r;let l;return t[0]!==s||t[1]!==n||t[2]!==i?(l=s?(0,c.jsx)(h,{y:n*i,x:0,width:15.5,height:i+.5,color:s}):null,t[0]=s,t[1]=n,t[2]=i,t[3]=l):l=t[3],l},x=function(e){const t=(0,o.c)(6),{source:r,idx:n,rowHeight:i,textFillProps:s}=e,{color:l,name:a}=r,h=Math.min(i,12),d=(n+.5)*i,x=l?17:0;let u;return t[0]!==a||t[1]!==h||t[2]!==d||t[3]!==x||t[4]!==s?(u=(0,c.jsx)("text",{y:d,x,fontSize:h,dominantBaseline:"central",...s,children:a}),t[0]=a,t[1]=h,t[2]=d,t[3]=x,t[4]=s,t[5]=u):u=t[5],u},u=(0,s.observer)(function({model:e,labelWidth:t}){const{canDisplayLabels:r,rowHeight:s,sources:o}=e,a=(0,l.A)(),u=t+((0,n.useMemo)(()=>o?.some(e=>e.color)??!1,[o])?20:0),g=(0,n.useMemo)(()=>(0,i.getFillProps)(a.palette.text.primary),[a.palette.text.primary]);return o?(0,c.jsxs)(c.Fragment,{children:[r?(0,c.jsx)(h,{y:0,x:0,width:u,height:(o.length+.25)*s}):null,o.map((e,t)=>(0,c.jsx)(d,{source:e,idx:t,rowHeight:s},`${e.name}-${t}`)),r?o.map((e,t)=>(0,c.jsx)(x,{source:e,idx:t,rowHeight:s,textFillProps:g},`${e.name}-text-${t}`)):null]}):null}),g=(0,s.observer)(function({children:e,model:t,exportSVG:r}){const{id:n,scrollTop:s,height:o,hierarchy:l,treeAreaWidth:a,showTree:h}=t,d=`legend-${"undefined"==typeof jest?n:"test"}`,x=l&&h?a:0;return r?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("defs",{children:(0,c.jsx)("clipPath",{id:d,children:(0,c.jsx)("rect",{x:0,y:0,width:1e3,height:o})})}),(0,c.jsx)("g",{clipPath:`url(#${d})`,children:(0,c.jsx)("g",{transform:`translate(0,${-s})`,children:e})})]}):(0,c.jsx)("svg",{style:{position:"absolute",top:0,left:x,zIndex:100,pointerEvents:"none",height:t.totalHeight,width:(0,i.getContainingView)(t).width},children:e})}),p=(0,s.observer)(function(e){const{model:t}=e,{canDisplayLabels:r,rowHeight:s,sources:o}=t,l=Math.min(s,12),a=(0,n.useMemo)(()=>{if(!o)return 0;let e=0;for(const t of o){const n=r?(0,i.measureText)(t.name,l)+10:20;n>e&&(e=n)}return e},[o,l,r]);return o?(0,c.jsx)(g,{...e,children:(0,c.jsx)(u,{model:t,labelWidth:a})}):null})},92942(e,t,r){r.d(t,{V:()=>a});var n=r(77251),i=r(64074),s=r(32118);const o=(0,i.observer)(function({model:e}){const{treeAreaWidth:t,hierarchy:r}=e,n=[];let i=0;if(r)for(const e of r.links()){const{source:t,target:r}=e,o=t.x,l=r.x,a=r.y,c=t.y;n.push((0,s.jsx)("line",{x1:c,y1:o,x2:c,y2:l,stroke:"black",opacity:"0.4"},`${c}-${o}-${a}-${l}-${i++}`),(0,s.jsx)("line",{x1:c,y1:l,x2:a,y2:l,stroke:"black",opacity:"0.4"},`${c}-${o}-${a}-${l}-${i++}`))}return n});var l=r(9807);async function a(e){const{offsetPx:t}=(0,n.getContainingView)(e),{hierarchy:r,showTree:i,treeAreaWidth:a,availableHeight:c}=e;return(0,s.jsxs)("g",{id:"tree-layer","data-testid":"tree-layer",transform:`translate(${Math.max(-t,0)})`,clipPath:"url(#sidebarClip)",children:[(0,s.jsx)("clipPath",{id:"sidebarClip",children:(0,s.jsx)("rect",{x:"0",y:"0",width:"100%",height:c})}),(0,s.jsx)("g",{id:"legend-layer",transform:`translate(${i&&r?a:0})`,children:(0,s.jsx)(l.A,{model:e,orientation:"left",exportSVG:!0})}),i?(0,s.jsx)(o,{model:e}):null]})}},95828(e,t,r){r.d(t,{renderSvg:()=>o});var n=r(38567),i=r(92942),s=r(32118);async function o(e,t,r){await(0,n.when)(()=>!!e.regionCannotBeRenderedText);const o=await r(t),l=await(0,i.V)(e);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("g",{id:"data-layer",children:o}),l]})}}}]);
//# sourceMappingURL=5828.9f55c215.chunk.js.map