"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[8698,9865],{7021(e,t,o){o.d(t,{A:()=>n});var r=o(2425),s=o(32118);const n=(0,r.A)((0,s.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1z"}),"Lock")},19865(e,t,o){o.r(t),o.d(t,{default:()=>A});var r=o(30936),s=o(42918),n=o(85787),i=o(27351),a=o(77251),l=o(66837),c=o(41031),d=o(43787),m=o(99367),h=o(16073),p=o(28519),u=o(76143),x=o(8039),g=o(70885),b=o(32118);function f(){const e=(0,r.c)(1);let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,b.jsxs)("div",{children:[(0,b.jsx)(l.A,{size:20,style:{marginRight:20}}),(0,b.jsx)(c.A,{display:"inline",children:"Creating SVG"})]}),e[0]=t):t=e[0],t}function v(e){const t=(0,r.c)(6);let o,s,n;return t[0]!==e?(({children:o,...s}=e),t[0]=e,t[1]=o,t[2]=s):(o=t[1],s=t[2]),t[3]!==o||t[4]!==s?(n=(0,b.jsx)("div",{children:(0,b.jsx)(d.A,{...s,children:o})}),t[3]=o,t[4]=s,t[5]=n):n=t[5],n}function j(e,t){return(0,a.useLocalStorage)(`svg-${e}`,t)}function A({model:e,handleClose:t}){const o=(0,a.getSession)(e),r="undefined"!=typeof OffscreenCanvas,[l,d]=(0,s.useState)(r),[A,k]=(0,s.useState)(!1),[y,C]=(0,s.useState)(),[w,S]=j("file","jbrowse.svg"),[z,M]=j("theme",o.themeName||"default");return(0,b.jsxs)(n.A,{open:!0,onClose:t,title:"Export SVG",children:[(0,b.jsxs)(m.A,{children:[y?(0,b.jsx)(i.A,{error:y}):A?(0,b.jsx)(f,{}):null,(0,b.jsx)(v,{helperText:"filename",value:w,onChange:e=>{S(e.target.value)}}),o.allThemes?(0,b.jsx)(v,{select:!0,label:"Theme",value:z,onChange:e=>{M(e.target.value)},children:Object.entries(o.allThemes()).map(([e,t])=>(0,b.jsx)(h.A,{value:e,children:t.name||"(Unknown name)"},e))}):null,r?(0,b.jsx)(p.A,{control:(0,b.jsx)(u.A,{checked:l,onChange:()=>{d(e=>!e)}}),label:"Rasterize canvas based tracks? File may be much larger if this is turned off"}):(0,b.jsx)(c.A,{children:"Note: rasterizing layers not yet supported in this browser, so SVG size may be large"})]}),(0,b.jsxs)(x.A,{children:[(0,b.jsx)(g.A,{variant:"contained",color:"secondary",onClick:()=>{t()},children:"Cancel"}),(0,b.jsx)(g.A,{variant:"contained",color:"primary",type:"submit",onClick:async()=>{k(!0),C(void 0);try{await e.exportSvg({rasterizeLayers:l,filename:w,themeName:z}),t()}catch(e){console.error(e),C(e)}finally{k(!1)}},children:"Submit"})]})]})}},48698(e,t,o){o.r(t),o.d(t,{default:()=>B});var r=o(87574),s=o(28397),n=o(77251),i=o(65045),a=o(64074),l=o(42918),c=o(58693),d=o(14391),m=o(7021),h=o(2425),p=o(32118);const u=(0,h.A)((0,p.jsx)("path",{d:"M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m0 12H6V10h12z"}),"LockOpen");var x=o(8512),g=o(37171);const b=(0,h.A)((0,p.jsx)("path",{d:"M7.11 8.53 5.7 7.11C4.8 8.27 4.24 9.61 4.07 11h2.02c.14-.87.49-1.72 1.02-2.47M6.09 13H4.07c.17 1.39.72 2.73 1.62 3.89l1.41-1.42c-.52-.75-.87-1.59-1.01-2.47m1.01 5.32c1.16.9 2.51 1.44 3.9 1.61V17.9c-.87-.15-1.71-.49-2.46-1.03zM13 4.07V1L8.45 5.55 13 10V6.09c2.84.48 5 2.94 5 5.91s-2.16 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93s-3.05-7.44-7-7.93"}),"RotateLeft"),f=(0,h.A)((0,p.jsx)("path",{d:"M15.55 5.55 11 1v3.07C7.06 4.56 4 7.92 4 12s3.05 7.44 7 7.93v-2.02c-2.84-.48-5-2.94-5-5.91s2.16-5.43 5-5.91V10zM19.93 11c-.17-1.39-.72-2.73-1.62-3.89l-1.42 1.42c.54.75.88 1.6 1.02 2.47zM13 17.9v2.02c1.39-.17 2.74-.71 3.9-1.61l-1.44-1.44c-.75.54-1.59.89-2.46 1.03m3.89-2.42 1.42 1.41c.9-1.16 1.45-2.5 1.62-3.89h-2.02c-.14.87-.48 1.72-1.02 2.48"}),"RotateRight");var v=o(16470),j=o(89537),A=o(87),k=o(19865);const y=(0,i.n)()(e=>({controls:{position:"absolute",borderRight:`1px solid ${e.palette.divider}`,borderBottom:`1px solid ${e.palette.divider}`,left:0,top:0}})),C=(0,a.observer)(function({model:e}){const{classes:t}=y(),[o,r]=(0,l.useState)(null);return(0,p.jsxs)("div",{className:t.controls,children:[(0,p.jsx)(A.A,{onClick:e.zoomOutButton,title:e.lockedFitToWindow?"unlock to zoom out":"zoom out",disabled:e.atMaxBpPerPx||e.lockedFitToWindow,children:(0,p.jsx)(j.A,{})}),(0,p.jsx)(A.A,{onClick:e.zoomInButton,disabled:e.atMinBpPerPx,title:"zoom in",children:(0,p.jsx)(v.A,{})}),(0,p.jsx)(A.A,{onClick:e.rotateCounterClockwiseButton,title:"rotate counter-clockwise",children:(0,p.jsx)(b,{})}),(0,p.jsx)(A.A,{onClick:e.rotateClockwiseButton,title:"rotate clockwise",children:(0,p.jsx)(f,{})}),(0,p.jsx)(A.A,{onClick:e.toggleFitToWindowLock,title:e.lockedFitToWindow?"locked model to window size":"unlocked model to zoom further",disabled:e.tooSmallToLock,children:e.lockedFitToWindow?(0,p.jsx)(m.A,{}):(0,p.jsx)(u,{})}),(0,p.jsx)(A.A,{onClick:e=>{r(e.currentTarget)},children:(0,p.jsx)(x.A,{})}),e.hideTrackSelectorButton?null:(0,p.jsx)(A.A,{onClick:e.activateTrackSelector,title:"Open track selector","data-testid":"circular_track_select",children:(0,p.jsx)(c.xU,{})}),o?(0,p.jsx)(d.A,{anchorEl:o,menuItems:[{label:"Export SVG",icon:g.A,onClick:()=>{(0,n.getSession)(e).queueDialog(t=>[k.default,{model:e,handleClose:t}])}}],onMenuItemClick:(e,t)=>{t(),r(null)},open:Boolean(o),onClose:()=>{r(null)}}):null]})});var w=o(27351),S=o(34592),z=o(79134),M=o(37882),R=o(70885);const P=(0,i.n)()(e=>({importFormContainer:{padding:e.spacing(6)}})),T=(0,a.observer)(function({model:e}){const{classes:t}=P(),o=(0,n.getSession)(e),{error:r}=e,{assemblyNames:s,assemblyManager:i}=o,[a,c]=(0,l.useState)(s[0]),d=i.get(a),m=s.length?d?.error:"No configured assemblies",h=d?.regions||[],u=m||r;return(0,p.jsxs)(z.A,{className:t.importFormContainer,children:[u?(0,p.jsx)(M.A,{container:!0,spacing:1,justifyContent:"center",alignItems:"center",children:(0,p.jsx)(w.A,{error:u})}):null,(0,p.jsxs)(M.A,{container:!0,spacing:1,justifyContent:"center",alignItems:"center",children:[(0,p.jsx)(S.A,{onChange:t=>{e.setError(void 0),c(t)},session:o,selected:a}),(0,p.jsx)(R.A,{disabled:!h.length,onClick:()=>{e.setError(void 0),e.setDisplayedRegions(h)},variant:"contained",color:"primary",children:h.length||u?"Open":"Loading..."})]})]})});var W=o(90853);const $=(0,i.n)()(e=>({root:{position:"relative",marginBottom:e.spacing(1),overflow:"hidden"},scroller:{overflow:"auto"}})),L=(0,a.observer)(function({model:e}){return(0,p.jsxs)(p.Fragment,{children:[e.staticSlices.map(t=>(0,p.jsx)(W.A,{model:e,slice:t},(0,n.assembleLocString)(t.region.elided?t.region.regions[0]:t.region))),e.tracks.map(t=>{const o=t.displays[0];return(0,p.jsx)(o.RenderingComponent,{display:o,view:e},o.id)})]})}),N=(0,a.observer)(function({model:e}){const{showLoading:t,showView:o,showImportForm:s,loadingMessage:n}=e;return t?(0,p.jsx)(r.A,{variant:"h6",message:n}):s?(0,p.jsx)(T,{model:e}):o?(0,p.jsx)(V,{model:e}):null}),V=(0,a.observer)(function({model:e}){const{width:t,height:o,id:r,offsetRadians:n,centerXY:i,figureWidth:a,figureHeight:l,hideVerticalResizeHandle:c}=e,{classes:d}=$();return(0,p.jsxs)("div",{className:d.root,style:{width:t,height:o},"data-testid":r,children:[(0,p.jsx)("div",{className:d.scroller,style:{width:t,height:o},children:(0,p.jsx)("svg",{style:{transform:`rotate(${n}rad)`,transition:"transform 0.5s",transformOrigin:i.map(e=>`${e}px`).join(" "),position:"absolute",left:0,top:0},width:a,height:l,children:(0,p.jsx)("g",{transform:`translate(${i})`,children:(0,p.jsx)(L,{model:e})})})}),(0,p.jsx)(C,{model:e}),c?null:(0,p.jsx)(s.A,{onDrag:e.resizeHeight,style:{height:3,position:"absolute",bottom:0,left:0,background:"#ccc",boxSizing:"border-box",borderTop:"1px solid #fafafa"}})]})}),B=N},72147(e,t,o){o.d(t,{A:()=>i,w:()=>n});var r=o(97818),s=o(11042);function n(e){return(0,s.Ay)("MuiCheckbox",e)}const i=(0,r.A)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"])},76143(e,t,o){o.d(t,{A:()=>w});var r=o(42918),s=o(77710),n=o(61648),i=o(69364),a=o(2425),l=o(32118);const c=(0,a.A)((0,l.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),d=(0,a.A)((0,l.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),m=(0,a.A)((0,l.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");var h=o(42458),p=o(63154),u=o(72147),x=o(18496),g=o(55030),b=o(77180),f=o(27997),v=o(71562),j=o(84961);const A=(0,x.Ay)(i.A,{shouldForwardProp:e=>(0,p.A)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.indeterminate&&t.indeterminate,t[`size${(0,h.A)(o.size)}`],"default"!==o.color&&t[`color${(0,h.A)(o.color)}`]]}})((0,g.A)(({theme:e})=>({color:(e.vars||e).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity)}}},...Object.entries(e.palette).filter((0,b.A)()).map(([t])=>({props:{color:t,disableRipple:!1},style:{"&:hover":{backgroundColor:e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity)}}})),...Object.entries(e.palette).filter((0,b.A)()).map(([t])=>({props:{color:t},style:{[`&.${u.A.checked}, &.${u.A.indeterminate}`]:{color:(e.vars||e).palette[t].main},[`&.${u.A.disabled}`]:{color:(e.vars||e).palette.action.disabled}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}))),k=(0,l.jsx)(d,{}),y=(0,l.jsx)(c,{}),C=(0,l.jsx)(m,{}),w=r.forwardRef(function(e,t){const o=(0,f.b)({props:e,name:"MuiCheckbox"}),{checkedIcon:i=k,color:a="primary",icon:c=y,indeterminate:d=!1,indeterminateIcon:m=C,inputProps:p,size:x="medium",disableRipple:g=!1,className:b,slots:w={},slotProps:S={},...z}=o,M=d?m:c,R=d?m:i,P={...o,disableRipple:g,color:a,indeterminate:d,size:x},T=(e=>{const{classes:t,indeterminate:o,color:r,size:s}=e,i={root:["root",o&&"indeterminate",`color${(0,h.A)(r)}`,`size${(0,h.A)(s)}`]},a=(0,n.A)(i,u.w,t);return{...t,...a}})(P),W=S.input??p,[$,L]=(0,j.A)("root",{ref:t,elementType:A,className:(0,s.A)(T.root,b),shouldForwardComponentProp:!0,externalForwardedProps:{slots:w,slotProps:S,...z},ownerState:P,additionalProps:{type:"checkbox",icon:r.cloneElement(M,{fontSize:M.props.fontSize??x}),checkedIcon:r.cloneElement(R,{fontSize:R.props.fontSize??x}),disableRipple:g,slots:w,slotProps:{input:(0,v.A)("function"==typeof W?W(P):W,{"data-indeterminate":d})}}});return(0,l.jsx)($,{...L,classes:T})})},79134(e,t,o){o.d(t,{A:()=>v});var r=o(42918),s=o(77710),n=o(11042),i=o(61648),a=o(81212),l=o(46513),c=o(7421),d=o(49450),m=o(32118);const h=(0,d.A)(),p=(0,c.A)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[`maxWidth${(0,a.A)(String(o.maxWidth))}`],o.fixed&&t.fixed,o.disableGutters&&t.disableGutters]}}),u=e=>(0,l.A)({props:e,name:"MuiContainer",defaultTheme:h});var x=o(42458),g=o(18496),b=o(27997);const f=function(e={}){const{createStyledComponent:t=p,useThemeProps:o=u,componentName:l="MuiContainer"}=e,c=t(({theme:e,ownerState:t})=>({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",...!t.disableGutters&&{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}}}),({theme:e,ownerState:t})=>t.fixed&&Object.keys(e.breakpoints.values).reduce((t,o)=>{const r=o,s=e.breakpoints.values[r];return 0!==s&&(t[e.breakpoints.up(r)]={maxWidth:`${s}${e.breakpoints.unit}`}),t},{}),({theme:e,ownerState:t})=>({..."xs"===t.maxWidth&&{[e.breakpoints.up("xs")]:{maxWidth:Math.max(e.breakpoints.values.xs,444)}},...t.maxWidth&&"xs"!==t.maxWidth&&{[e.breakpoints.up(t.maxWidth)]:{maxWidth:`${e.breakpoints.values[t.maxWidth]}${e.breakpoints.unit}`}}})),d=r.forwardRef(function(e,t){const r=o(e),{className:d,component:h="div",disableGutters:p=!1,fixed:u=!1,maxWidth:x="lg",classes:g,...b}=r,f={...r,component:h,disableGutters:p,fixed:u,maxWidth:x},v=((e,t)=>{const{classes:o,fixed:r,disableGutters:s,maxWidth:l}=e,c={root:["root",l&&`maxWidth${(0,a.A)(String(l))}`,r&&"fixed",s&&"disableGutters"]};return(0,i.A)(c,e=>(0,n.Ay)(t,e),o)})(f,l);return(0,m.jsx)(c,{as:h,ownerState:f,className:(0,s.A)(v.root,d),ref:t,...b})});return d}({createStyledComponent:(0,g.Ay)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[`maxWidth${(0,x.A)(String(o.maxWidth))}`],o.fixed&&t.fixed,o.disableGutters&&t.disableGutters]}}),useThemeProps:e=>(0,b.b)({props:e,name:"MuiContainer"})}),v=f},90853(e,t,o){o.d(t,{A:()=>u});var r=o(77251),s=o(86559),n=o(65045),i=o(38715),a=o(64074),l=o(32118);const c=(0,n.n)()({rulerLabel:{fontSize:"0.8rem",fontWeight:500,lineHeight:1.6,letterSpacing:"0.0075em"}});function d(e,t,o,r){e.flipped&&([o,r]=[r,o]);const s=e.bpToXY(o,t),n=e.bpToXY(r,t);return["M",...s,"A",t,t,"0",Math.abs(r-o)/e.bpPerRadian>Math.PI?"1":"0","1",...n].join(" ")}const m=(0,a.observer)(function({model:e,slice:t,region:o}){const s=(0,i.A)(),{radiusPx:n}=e,a=n+1,{endRadians:c,startRadians:d}=t,m=(0,r.polarToCartesian)(a,d),p=(0,r.polarToCartesian)(a,c),u=(c-d)*a,x=c-d>Math.PI?"1":"0",g=(c+d)/2,b=`[${(0,r.toLocale)(o.regions.length)}]`;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h,{text:b,view:e,maxWidthPx:u,radians:g,radiusPx:a,title:`${b} more regions`,color:s.palette.text.primary}),(0,l.jsx)("path",{d:["M",...m,"A",a,a,"0",x,"1",...p].join(" "),...(0,r.getStrokeProps)(s.palette.text.secondary),strokeWidth:2,strokeDasharray:"2,2",fill:"none"})]})}),h=(0,a.observer)(function({view:e,text:t,maxWidthPx:o,radians:s,radiusPx:n,title:i,color:a}){const{classes:d}=c(),m=(0,r.polarToCartesian)(n+5,s);return t?6.5*t.length<o?(0,l.jsxs)("text",{x:0,y:0,className:d.rulerLabel,textAnchor:"middle",dominantBaseline:"middle",transform:`translate(${m}) rotate(${(0,r.radToDeg)(s)+90})`,...(0,r.getFillProps)(a),children:[t,(0,l.jsx)("title",{children:i||t})]}):o>4?(0,r.radToDeg)(s+e.offsetRadians-Math.PI/2)>=180?(0,l.jsxs)("text",{x:0,y:0,className:d.rulerLabel,textAnchor:"start",dominantBaseline:"middle",transform:`translate(${m}) rotate(${(0,r.radToDeg)(s)})`,fill:a,children:[t,(0,l.jsx)("title",{children:i||t})]}):(0,l.jsxs)("text",{x:0,y:0,className:d.rulerLabel,textAnchor:"end",dominantBaseline:"middle",transform:`translate(${m}) rotate(${(0,r.radToDeg)(s)+180})`,fill:a,children:[t,(0,l.jsx)("title",{children:i||t})]}):null:null}),p=(0,a.observer)(function({model:e,slice:t,region:o}){const n=(0,i.A)(),{radiusPx:a}=e,{endRadians:c,startRadians:m}=t,p=(c+m)/2,u=(c-m)*a,x=(0,r.getSession)(e).assemblyManager.get(o.assemblyName);let g=x?x.getRefNameColor(o.refName):void 0;if(g)try{g=(0,s.makeContrasting)(g,n.palette.background.paper)}catch(e){g=n.palette.text.primary}else g=n.palette.text.primary;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h,{text:o.refName,view:e,maxWidthPx:u,radians:p,radiusPx:a,color:g}),(0,l.jsx)("path",{d:d(t,a+1,o.start,o.end),stroke:g,strokeWidth:2,fill:"none"})]})}),u=(0,a.observer)(function({model:e,slice:t}){return t.region.elided?(0,l.jsx)(m,{model:e,region:t.region,slice:t},(0,r.assembleLocString)(t.region.regions[0])):(0,l.jsx)(p,{region:t.region,model:e,slice:t},(0,r.assembleLocString)(t.region))})}}]);
//# sourceMappingURL=8698.413d5c66.chunk.js.map