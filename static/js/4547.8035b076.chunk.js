"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[4547],{46341(e,t,s){s.d(t,{A:()=>p});var n=s(55614),o=s(30128),i=s(35864),r=s(37472),l=s(62456),a=s(23886),d=s(46625),c=s(7201),u=s(87377),h=s(69566),g=s(44460);const x=(0,d.n)()(e=>({resizeHandle:{height:5,boxSizing:"border-box",background:"transparent","&:hover":{background:e.palette.divider}}})),m=(0,h.observer)(function({children:e,model:t,exportSVG:s}){const{height:n}=t,{width:o,offsetPx:i}=(0,a.getContainingView)(t),r=Math.max(0,-i);return s?(0,g.jsx)("g",{transform:`translate(${r})`,children:e}):(0,g.jsx)("svg",{style:{position:"absolute",top:0,left:r,height:n,width:o},children:e})}),f=(0,h.observer)(function({model:e,exportSVG:t}){const{classes:s}=x(),{assemblyManager:n}=(0,a.getSession)(e),r=(0,a.getContainingView)(e),[l,d]=(0,o.useState)(),{lineZoneHeight:c,featuresVolatile:u}=e,{assemblyNames:h,dynamicBlocks:f}=r,b=n.get(h[0]),p=(f.contentBlocks[0]?.widthPx||0)/(u?.length||1);return b&&u?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(m,{exportSVG:t,model:e,children:[(0,g.jsx)(j,{model:e,setMouseOverLine:d}),l?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("line",{stroke:"#f00c",strokeWidth:2,style:{pointerEvents:"none"},x1:l.idx*p+p/2,x2:l.c,y1:c,y2:0,onMouseLeave:()=>{d(void 0)}}),(0,g.jsx)(v,{contents:l.f.get("name")})]}):null]}),t?null:(0,g.jsx)(i.A,{style:{position:"absolute",top:c-4},onDrag:t=>e.setLineZoneHeight(c+t),className:s.resizeHandle})]}):null}),b=(0,o.forwardRef)(function(e,t){const s=(0,n.c)(5),{message:i}=e;let l,a;return s[0]!==i?(l=(0,o.isValidElement)(i)?i:i?(0,g.jsx)(r.A,{html:String(i)}):null,s[0]=i,s[1]=l):l=s[1],s[2]!==t||s[3]!==l?(a=(0,g.jsx)("div",{ref:t,children:l}),s[2]=t,s[3]=l,s[4]=a):a=s[4],a}),v=(0,h.observer)(function({contents:e}){return e?(0,g.jsx)(l.A,{children:(0,g.jsx)(b,{message:e})}):null}),j=(0,h.observer)(function({model:e,setMouseOverLine:t}){const s=(0,u.A)(),{assemblyManager:n}=(0,a.getSession)(e),i=(0,a.getContainingView)(e),{lineZoneHeight:r,featuresVolatile:l}=e,{offsetPx:d,assemblyNames:h,dynamicBlocks:x}=i,m=n.get(h[0]),f=(x.contentBlocks[0]?.widthPx||0)/(l?.length||1),b=Math.max(d,0),v=(0,a.getStrokeProps)((0,c.X4)(s.palette.text.primary,.4));return m&&l?(0,g.jsx)(g.Fragment,{children:l.map((e,s)=>{const n=e.get("refName"),l=(i.bpToPx({refName:m.getCanonicalRefName2(n),coord:e.get("start")})?.offsetPx||0)-b;return(0,o.createElement)("line",{...v,strokeWidth:1,key:e.id(),x1:s*f+f/2,x2:l,y1:r,y2:0,onMouseEnter:()=>{t({f:e,idx:s,c:l})},onMouseLeave:()=>{t(void 0)}})})}):null}),p=f},64547(e,t,s){s.r(t),s.d(t,{default:()=>c});var n=s(30128),o=s(69566),i=s(46341),r=s(20101),l=s(32647),a=s(78341),d=s(44460);const c=(0,o.observer)(function(e){const{model:t}=e,{lineZoneHeight:s,height:o}=t,c=(0,n.useRef)(null),{mouseState:u,handleMouseMove:h,handleMouseLeave:g}=(0,a.A)(c);return(0,d.jsxs)("div",{ref:c,style:{position:"relative",height:o},onMouseMove:h,onMouseLeave:g,children:[(0,d.jsx)("div",{"data-testid":"connecting-lines",children:(0,d.jsx)(i.A,{model:t})}),(0,d.jsx)(l.A,{model:t,topOffset:s,testId:"matrix-display"}),u&&u.y>s?(0,d.jsx)(r.A,{mouseX:u.x,mouseY:u.y,offsetX:u.offsetX,offsetY:u.offsetY,model:t}):null]})})}}]);
//# sourceMappingURL=4547.8035b076.chunk.js.map