"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[3967],{521(e,t,r){r.d(t,{A:()=>o});var n=r(30936),s=r(77251),i=r(38715),a=r(38157),l=r(32118);function o(e){const t=(0,n.c)(15),{model:r,height:o}=e,{dynamicBlocks:c,offsetPx:d,bpPerPx:h}=r,{contentBlocks:x}=c,f=(0,i.A)();let m;t[0]!==f.palette.divider?(m=(0,s.stripAlpha)(f.palette.divider),t[0]=f.palette.divider,t[1]=m):m=t[1];const g=m;let p,u;if(t[2]!==h||t[3]!==g||t[4]!==x||t[5]!==o||t[6]!==d){let e;t[8]!==h||t[9]!==g||t[10]!==o||t[11]!==d?(e=e=>{const{start:t,end:r,key:n,reversed:s,offsetPx:i,widthPx:c}=e,x=i-d,f=(0,a.H2)(t,r,h,!0,!0),m=`gridline-clip-${n}`;return(0,l.jsxs)("g",{children:[(0,l.jsx)("defs",{children:(0,l.jsx)("clipPath",{id:m,children:(0,l.jsx)("rect",{x:0,y:0,width:c,height:o})})}),(0,l.jsx)("g",{transform:`translate(${x} 0)`,clipPath:`url(#${m})`,children:f.map(e=>{const n=(s?r-e.base:e.base-t)/h,i="major"===e.type;return(0,l.jsx)("line",{x1:n,x2:n,y1:0,y2:o,strokeWidth:1,stroke:g,strokeOpacity:i?.3:.15},`gridline-${e.base}`)})})]},n)},t[8]=h,t[9]=g,t[10]=o,t[11]=d,t[12]=e):e=t[12],p=x.map(e),t[2]=h,t[3]=g,t[4]=x,t[5]=o,t[6]=d,t[7]=p}else p=t[7];return t[13]!==p?(u=(0,l.jsx)(l.Fragment,{children:p}),t[13]=p,t[14]=u):u=t[14],u}},13967(e,t,r){r.d(t,{renderToSvg:()=>w});var n=r(17868),s=r(77251),i=r(70203),a=r(9930),l=r(38567),o=r(30936),c=r(38715),d=r(32118);function h(e){const t=(0,o.c)(6),{width:r,height:n,shift:i}=e,a=(0,c.A)(),l=r+2*i;let h,x;return t[0]!==a.palette.background.default?(h=(0,s.stripAlpha)(a.palette.background.default),t[0]=a.palette.background.default,t[1]=h):h=t[1],t[2]!==n||t[3]!==l||t[4]!==h?(x=(0,d.jsx)("rect",{width:l,height:n,fill:h}),t[2]=n,t[3]=l,t[4]=h,t[5]=x):x=t[5],x}var x=r(521),f=r(68589),m=r(88868);function g(e){const t=(0,o.c)(25),{model:r,fontSize:n}=e,{offsetPx:i,dynamicBlocks:a}=r,{totalWidthPxWithoutBorders:l,totalBp:h}=a,x=(0,c.A)();let f;t[0]!==h?(f=(0,s.getBpDisplayStr)(h),t[0]=h,t[1]=f):f=t[1];const m=f,g=Math.max(-i,0),p=g+l;let u;t[2]!==x.palette.text.secondary?(u=(0,s.stripAlpha)(x.palette.text.secondary),t[2]=x.palette.text.secondary,t[3]=u):u=t[3];const y=u,k=g+(p-g)/2,j=n;let b,w,v,B,P;return t[4]!==y||t[5]!==g||t[6]!==p?(b=(0,d.jsx)("line",{x1:g,x2:p,y1:10,y2:10,stroke:y}),t[4]=y,t[5]=g,t[6]=p,t[7]=b):b=t[7],t[8]!==y||t[9]!==g?(w=(0,d.jsx)("line",{x1:g,x2:g,y1:5,y2:15,stroke:y}),t[8]=y,t[9]=g,t[10]=w):w=t[10],t[11]!==y||t[12]!==p?(v=(0,d.jsx)("line",{x1:p,x2:p,y1:5,y2:15,stroke:y}),t[11]=y,t[12]=p,t[13]=v):v=t[13],t[14]!==y||t[15]!==m||t[16]!==n||t[17]!==k||t[18]!==j?(B=(0,d.jsx)("text",{x:k,y:j,textAnchor:"middle",dominantBaseline:"hanging",fontSize:n,fill:y,children:m}),t[14]=y,t[15]=m,t[16]=n,t[17]=k,t[18]=j,t[19]=B):B=t[19],t[20]!==b||t[21]!==w||t[22]!==v||t[23]!==B?(P=(0,d.jsxs)(d.Fragment,{children:[b,w,v,B]}),t[20]=b,t[21]=w,t[22]=v,t[23]=B,t[24]=P):P=t[24],P}var p=r(64995),u=r(25196),y=r(56097);function k(e){const t=(0,o.c)(46),{model:r,fontSize:n,cytobandHeight:i,rulerHeight:a}=e,{width:l,assemblyNames:h,showCytobands:x,displayedRegions:k}=r;let j,b;if(t[0]!==h[0]||t[1]!==h.length||t[2]!==r){const{assemblyManager:e}=(0,s.getSession)(r);j=h.length>1?"":h[0],b=e.get(j),t[0]=h[0],t[1]=h.length,t[2]=r,t[3]=j,t[4]=b}else j=t[3],b=t[4];const w=b,v=(0,c.A)();let B;t[5]!==v.palette.text.primary?(B=(0,s.stripAlpha)(v.palette.text.primary),t[5]=v.palette.text.primary,t[6]=B):B=t[6];const P=B;let S,A,$,T,z;if(t[7]!==k||t[8]!==r.dynamicBlocks.contentBlocks||t[9]!==r.minimumBlockWidth||t[10]!==l){z=Symbol.for("react.early_return_sentinel");e:{$=f.A.create({displayedRegions:JSON.parse(JSON.stringify(k)),interRegionPaddingWidth:0,minimumBlockWidth:r.minimumBlockWidth});const e=r.dynamicBlocks.contentBlocks;if(!e.length){z=null;break e}$.setVolatileWidth(l),$.showAllRegions(),S=$.dynamicBlocks.contentBlocks[0];const t=e.at(0),n=e.at(-1);A=$.bpToPx({...t,coord:t.reversed?t.end:t.start})||0,T=$.bpToPx({...n,coord:n.reversed?n.start:n.end})||0}t[7]=k,t[8]=r.dynamicBlocks.contentBlocks,t[9]=r.minimumBlockWidth,t[10]=l,t[11]=S,t[12]=A,t[13]=$,t[14]=T,t[15]=z}else S=t[11],A=t[12],$=t[13],T=t[14],z=t[15];if(z!==Symbol.for("react.early_return_sentinel"))return z;const W=T,H=+x*i;let O,L;t[16]!==j||t[17]!==P||t[18]!==n?(O=(0,d.jsx)("text",{x:0,y:0,dominantBaseline:"hanging",fontSize:n,fill:P,children:j}),t[16]=j,t[17]=P,t[18]=n,t[19]=O):O=t[19],t[20]!==w||t[21]!==S||t[22]!==A||t[23]!==W||t[24]!==r||t[25]!==$||t[26]!==a||t[27]!==x?(L=x?(0,d.jsxs)("g",{transform:`translate(0 ${a})`,children:[(0,d.jsx)(p.A,{overview:$,assembly:w,block:S}),(0,d.jsx)("rect",{stroke:"red",fill:"rgb(255,0,0)",fillOpacity:.1,width:Math.max(W-A,.5),height:y.Gu-1,x:A,y:.5}),(0,d.jsx)("g",{transform:`translate(0,${y.Gu})`,children:(0,d.jsx)(u.A,{overview:$,model:r,useOffset:!1})})]}):null,t[20]=w,t[21]=S,t[22]=A,t[23]=W,t[24]=r,t[25]=$,t[26]=a,t[27]=x,t[28]=L):L=t[28];const N=`translate(0 ${n+H})`;let R,_;t[29]!==n||t[30]!==r?(R=(0,d.jsx)(g,{model:r,fontSize:n}),t[29]=n,t[30]=r,t[31]=R):R=t[31],t[32]!==N||t[33]!==R?(_=(0,d.jsx)("g",{transform:N,children:R}),t[32]=N,t[33]=R,t[34]=_):_=t[34];const E=`translate(0 ${a+H})`;let F,M,C;return t[35]!==n||t[36]!==r?(F=(0,d.jsx)(m.A,{model:r,fontSize:n}),t[35]=n,t[36]=r,t[37]=F):F=t[37],t[38]!==E||t[39]!==F?(M=(0,d.jsx)("g",{transform:E,children:F}),t[38]=E,t[39]=F,t[40]=M):M=t[40],t[41]!==M||t[42]!==O||t[43]!==L||t[44]!==_?(C=(0,d.jsxs)("g",{id:"header",children:[O,L,_,M]}),t[41]=M,t[42]=O,t[43]=L,t[44]=_,t[45]=C):C=t[45],C}var j=r(37832),b=r(30402);async function w(e,t){await(0,l.when)(()=>e.initialized);const{textHeight:r=18,headerHeight:o=40,rulerHeight:c=50,fontSize:f=13,cytobandHeight:m=100,trackLabels:g="offset",themeName:p="default",showGridlines:u=!1,Wrapper:y=({children:e})=>e}=t,w=(0,s.getSession)(e),{allThemes:v}=w,B=v?.()[p],P=(0,n.createJBrowseTheme)(B),{width:S,pinnedTracks:A,unpinnedTracks:$,tracks:T,showCytobands:z}=e,W=o+c+ +z*m+10,H=(0,b.m)(T,r,g)+W+100,O=(0,s.max)([...A,...$].map(e=>{const t=e.displays[0];return t?.svgLegendWidth?.(P)??0}),0),L=await Promise.all([...A,...$].map(async e=>{const r=e.displays[0];return await(0,l.when)(()=>function(e){return!e.renderProps().notReady||!!e.error}(r)),{track:e,result:await r.renderSvg({...t,theme:B,legendWidth:O})}})),N=(0,s.max)(T.map(e=>(0,s.measureText)((0,i.getTrackName)(e.configuration,w),f)),0)+40,R="left"===g?N:0,_=S+R+O,E=(0,b.m)(T,r,g);return(0,s.renderToStaticMarkup)((0,d.jsx)(a.A,{theme:(0,n.createJBrowseTheme)(B),children:(0,d.jsx)(y,{children:(0,d.jsxs)("svg",{width:_,height:H,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:[0,0,_+100,H].toString(),children:[(0,d.jsx)(h,{width:_,height:H,shift:50}),(0,d.jsxs)("g",{transform:"translate(50 0)",children:[(0,d.jsx)("g",{transform:`translate(${R})`,children:(0,d.jsx)(k,{model:e,fontSize:f,rulerHeight:c,cytobandHeight:m})}),u?(0,d.jsx)("g",{transform:`translate(${R} ${W})`,children:(0,d.jsx)(x.A,{model:e,height:E})}):null,(0,d.jsx)("g",{transform:`translate(0 ${W})`,children:(0,d.jsx)(j.A,{textHeight:r,fontSize:f,model:e,displayResults:L,trackLabels:g,trackLabelOffset:R})})]})]})})}))}},30402(e,t,r){r.d(t,{m:()=>s});var n=r(77251);function s(e,t,r){return(0,n.sum)(e.map(e=>e.displays[0].height+(["none","left"].includes(r)?0:t)))}},37832(e,t,r){r.d(t,{A:()=>h});var n=r(30936),s=r(77251),i=r(70203),a=r(72698),l=r(14227),o=r(38715),c=r(32118);function d(e){const t=(0,n.c)(13),{trackLabels:r,trackName:i,fontSize:a,trackLabelOffset:d,x:h}=e,x=(0,o.A)();let f;t[0]!==x.palette.text.primary?(f=(0,s.stripAlpha)(x.palette.text.primary),t[0]=x.palette.text.primary,t[1]=f):f=t[1];const m=f,g="overlay"===r?5:0,p="offset"===r?5:0;let u;t[2]!==i?(u=(0,l.Z)(i),t[2]=i,t[3]=u):u=t[3];const y=u;let k;return t[4]!==m||t[5]!==a||t[6]!==y||t[7]!==d||t[8]!==r||t[9]!==h||t[10]!==g||t[11]!==p?(k="none"!==r?(0,c.jsx)("g",{children:"left"===r?(0,c.jsx)("text",{x:d-40,y:20,fill:m,fontSize:a,dominantBaseline:"hanging",textAnchor:"end",children:y}):(0,c.jsx)("text",{x:h+g,y:p,fill:m,fontSize:a,dominantBaseline:"hanging",children:y})}):null,t[4]=m,t[5]=a,t[6]=y,t[7]=d,t[8]=r,t[9]=h,t[10]=g,t[11]=p,t[12]=k):k=t[12],k}function h(e){const t=(0,n.c)(9),{displayResults:r,model:l,textHeight:o,fontSize:h,trackLabels:x,trackLabelOffset:f}=e,m=void 0===x?"offset":x,g=void 0===f?0:f;let p,u;if(t[0]!==r||t[1]!==h||t[2]!==l||t[3]!==o||t[4]!==g||t[5]!==m){const e=(0,s.getSession)(l),n="offset"===m?o:0;p=r.reduce((t,r)=>{const{prevOffset:s,reactElements:o}=t,{track:x,result:f}=r,p=x.configuration,u=(0,i.getTrackName)(p,e),y=x.displays[0],k=Math.max(-l.offsetPx,0);return{prevOffset:s+y.height+n,reactElements:[...o,(0,c.jsxs)("g",{transform:`translate(0 ${s})`,children:[(0,c.jsxs)("g",{transform:`translate(${g} ${n})`,children:[(0,c.jsx)(a.A,{model:l,height:y.height}),f]}),(0,c.jsx)(d,{trackName:u,fontSize:h,trackLabels:m,trackLabelOffset:g,x:k})]},p.trackId)]}},{prevOffset:0,reactElements:[]}),t[0]=r,t[1]=h,t[2]=l,t[3]=o,t[4]=g,t[5]=m,t[6]=p}else p=t[6];return t[7]!==p.reactElements?(u=(0,c.jsx)(c.Fragment,{children:p.reactElements}),t[7]=p.reactElements,t[8]=u):u=t[8],u}},72698(e,t,r){r.d(t,{A:()=>i});var n=r(30936),s=r(32118);function i(e){const t=(0,n.c)(11),{model:r,height:i}=e,{dynamicBlocks:a,offsetPx:l,interRegionPaddingWidth:o}=r;let c,d;if(t[0]!==a.contentBlocks||t[1]!==i||t[2]!==o||t[3]!==l){let e;t[5]!==i||t[6]!==o||t[7]!==l?(e=e=>(0,s.jsx)("rect",{x:e.offsetPx-l-o,width:o,y:0,height:i,fill:"grey"},e.key),t[5]=i,t[6]=o,t[7]=l,t[8]=e):e=t[8],c=a.contentBlocks.slice(1).map(e),t[0]=a.contentBlocks,t[1]=i,t[2]=o,t[3]=l,t[4]=c}else c=t[4];return t[9]!==c?(d=(0,s.jsx)(s.Fragment,{children:c}),t[9]=c,t[10]=d):d=t[10],d}},88868(e,t,r){r.d(t,{A:()=>h});var n=r(30936),s=r(77251),i=r(38715),a=r(38157),l=r(72698),o=r(32118);function c(e){const t=(0,n.c)(11),{start:r,end:l,bpPerPx:c,reversed:h,major:x,minor:f,hideText:m,widthPx:g}=e,p=void 0!==h&&h,u=void 0===x||x,y=void 0===f||f,k=void 0!==m&&m,j=(0,a.H2)(r,l,c,u,y),b=(0,i.A)();let w;t[0]!==b.palette.text.secondary?(w=(0,s.stripAlpha)(b.palette.text.secondary),t[0]=b.palette.text.secondary,t[1]=w):w=t[1];const v=w;let B;t[2]!==c||t[3]!==v||t[4]!==l||t[5]!==p||t[6]!==r?(B=e=>{const t=(p?l-e.base:e.base-r)/c;return(0,o.jsx)("line",{x1:t,x2:t,y1:0,y2:"major"===e.type?6:4,strokeWidth:1,stroke:v},`tick-${e.base}`)},t[2]=c,t[3]=v,t[4]=l,t[5]=p,t[6]=r,t[7]=B):B=t[7];const P=j.map(B),S=k?null:j.filter(d).filter(e=>{const t=(p?l-e.base:e.base-r)/c,n=(0,s.getTickDisplayStr)(e.base+1,c),i=(0,s.measureText)(n,11)+4,a=t-3;return a>=0&&a+i<=g}).map(e=>{const t=(p?l-e.base:e.base-r)/c;return(0,o.jsx)("text",{x:t-3,y:18,fontSize:11,fill:v,children:(0,s.getTickDisplayStr)(e.base+1,c)},`label-${e.base}`)});let A;return t[8]!==P||t[9]!==S?(A=(0,o.jsxs)(o.Fragment,{children:[P,S]}),t[8]=P,t[9]=S,t[10]=A):A=t[10],A}function d(e){return"major"===e.type}function h(e){const t=(0,n.c)(20),{model:r,fontSize:a}=e,{dynamicBlocks:d,offsetPx:h,bpPerPx:x}=r,{contentBlocks:f}=d,m=f.length<5,g=(0,i.A)();let p;t[0]!==g.palette.text.primary?(p=(0,s.stripAlpha)(g.palette.text.primary),t[0]=g.palette.text.primary,t[1]=p):p=t[1];const u=p;let y,k,j;if(t[2]!==r?(y=(0,o.jsx)(l.A,{model:r,height:30}),t[2]=r,t[3]=y):y=t[3],t[4]!==x||t[5]!==u||t[6]!==f||t[7]!==a||t[8]!==m||t[9]!==h){let e;t[11]!==x||t[12]!==u||t[13]!==a||t[14]!==m||t[15]!==h?(e=e=>{const{start:t,end:r,key:n,reversed:s,offsetPx:i,refName:l,widthPx:d}=e,f=i-h,g=`clip-${n}`;return(0,o.jsxs)("g",{children:[(0,o.jsx)("defs",{children:(0,o.jsx)("clipPath",{id:g,children:(0,o.jsx)("rect",{x:0,y:0,width:d,height:100})})}),(0,o.jsx)("g",{transform:`translate(${f} 0)`,children:(0,o.jsxs)("g",{clipPath:`url(#${g})`,children:[(0,o.jsx)("text",{x:4,y:a,fontSize:a,fill:u,children:l}),(0,o.jsx)("g",{transform:"translate(0 20)",children:(0,o.jsx)(c,{hideText:!m,start:t,end:r,bpPerPx:x,reversed:s,widthPx:d})})]})})]},n)},t[11]=x,t[12]=u,t[13]=a,t[14]=m,t[15]=h,t[16]=e):e=t[16],k=f.map(e),t[4]=x,t[5]=u,t[6]=f,t[7]=a,t[8]=m,t[9]=h,t[10]=k}else k=t[10];return t[17]!==y||t[18]!==k?(j=(0,o.jsxs)(o.Fragment,{children:[y,k]}),t[17]=y,t[18]=k,t[19]=j):j=t[19],j}}}]);
//# sourceMappingURL=3967.083bef91.chunk.js.map