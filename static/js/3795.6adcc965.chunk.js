"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[3795,8142],{13795:(e,n,t)=>{t.r(n),t.d(n,{default:()=>l});var s=t(7552),o=t(68446),r=t(78142),i=t(69500);const a=(0,s.lazy)((()=>Promise.all([t.e(1819),t.e(7988),t.e(6261)]).then(t.bind(t,86261)))),l=(0,o.observer)((function({model:e}){return e.initialized?(0,i.jsx)(r.default,{model:e}):(0,i.jsx)(a,{model:e})}))},78142:(e,n,t)=>{t.r(n),t.d(n,{default:()=>I});var s=t(68446),o=t(75785),r=t(7552),i=t(23758),a=t(90542),l=t(17307),c=t(59121),d=t(83867),u=t(99546),m=t(51077),p=t(36715),h=t(69500);const b=(0,o.n9)()((()=>({bp:{display:"flex",alignItems:"center",marginLeft:10},searchBox:{display:"flex"}}))),v=(0,s.observer)((function({view:e}){const{classes:n}=b(),{assemblyNames:t,coarseTotalBp:s}=e;return(0,h.jsxs)("span",{className:n.searchBox,children:[(0,h.jsx)(m.Gd,{model:e,showHelp:!1}),(0,h.jsxs)(p.A,{variant:"body2",color:"textSecondary",className:n.bp,children:[t.join(",")," ",(0,u.toLocale)(Math.round(s))," bp"]})]})})),f=(0,o.n9)()({inline:{display:"inline-flex"}}),g=(0,s.observer)((function({model:e}){const{classes:n}=f(),{views:t}=e,[s,o]=(0,r.useState)(t.length<=3),[u,m]=(0,r.useState)(t.length<=3);return(0,h.jsxs)(d.A,{row:!0,children:[(0,h.jsx)(i.A,{menuItems:[{label:"Synteny track selectors",type:"subMenu",subMenu:t.slice(0,-1).map(((n,s)=>({label:`Row ${s+1}->${s+2} (${t[s].assemblyNames.join(",")}->${t[s+1].assemblyNames.join(",")})`,onClick:()=>{e.activateTrackSelector(s)}})))},{label:"Row track selectors",type:"subMenu",subMenu:t.map(((e,n)=>({label:`Row ${n+1} track selector (${e.assemblyNames.join(",")})`,onClick:()=>e.activateTrackSelector()})))}],children:(0,h.jsx)(a.xU,{})}),(0,h.jsx)(i.A,{menuItems:[{label:"Row view menus",type:"subMenu",subMenu:t.map(((e,n)=>({label:`View ${n+1} Menu`,subMenu:e.menuItems()})))},...e.headerMenuItems()],children:(0,h.jsx)(l.A,{})}),(0,h.jsx)(i.A,{menuItems:[{label:"Show search boxes",type:"checkbox",checked:s,onClick:()=>{o(!s)}},{label:"Orientation - Side-by-side",type:"radio",checked:u,onClick:()=>{m(!u)}},{label:"Orientation - Vertical",type:"radio",checked:!u,onClick:()=>{m(!u)}}],children:(0,h.jsx)(c.A,{})}),s?(0,h.jsx)("span",{className:u?n.inline:void 0,children:t.map((e=>(0,h.jsx)(v,{view:e},e.id)))}):null]})}));var x=t(68584),j=t(49823);const w=(0,o.n9)()({container:{display:"grid"},overlay:{zIndex:100,gridArea:"1/1"},resizeHandle:{height:4,background:"#ccc"}});function y({view:e}){const{pluginManager:n}=(0,u.getEnv)(e),{ReactComponent:t}=n.getViewType(e.type);return(0,h.jsx)(t,{model:e})}const k=(0,s.observer)((function({model:e}){const{classes:n}=w(),{views:t,levels:s}=e;return(0,h.jsx)("div",{className:n.container,children:t.map(((t,o)=>(0,h.jsxs)(h.Fragment,{children:[o>0?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:n.container,children:(0,h.jsx)(M,{model:e,level:o-1})}),(0,h.jsx)(j.ResizeHandle,{onDrag:e=>s[o-1]?.setHeight((s[o-1]?.height||0)+e),className:n.resizeHandle})]}):null,(0,h.jsx)(y,{view:t})]},t.id)))})})),M=(0,s.observer)((function({model:e,level:n}){const{classes:t}=w();return(0,h.jsx)(h.Fragment,{children:e.levels[n]?.tracks.map((e=>{const[n]=e.displays,{RenderingComponent:s}=n,o=(0,x.getConf)(e,"trackId");return s?(0,h.jsx)("div",{className:t.overlay,style:{height:n.height,overflow:"hidden"},children:(0,h.jsx)(s,{model:n})},o):null}))})})),C=k;var N=t(963),S=t(9555),A=t(42489),O=t(89003);const R=(0,o.n9)()({guide:{pointerEvents:"none",height:"100%",width:1,position:"absolute",zIndex:10},sm:{fontSize:10}}),B=(0,s.observer)((function({model:e,coordX:n}){const{classes:t}=R();return(0,h.jsx)(O.A,{open:!0,placement:"top",title:e.views.map((e=>e.pxToBp(n))).map(((e,n)=>(0,h.jsx)(p.A,{className:t.sm,children:(0,u.stringify)(e,!0)},[JSON.stringify(e),n].join("-")))),arrow:!0,children:(0,h.jsx)("div",{className:t.guide,style:{left:n,background:"red"}})})})),T=(0,o.n9)()((e=>({rubberband:{height:"100%",background:(0,N.X4)(e.palette.tertiary.main,.7),position:"absolute",zIndex:10,textAlign:"center",overflow:"hidden"},rubberbandControl:{cursor:"crosshair",width:"100%",minHeight:8},rubberbandText:{color:e.palette.tertiary.contrastText},popover:{mouseEvents:"none",cursor:"crosshair"},paper:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)}}))),z=(0,s.observer)((function({model:e,ControlComponent:n=(0,h.jsx)("div",{})}){const[t,s]=(0,r.useState)(),[o,i]=(0,r.useState)(),[a,l]=(0,r.useState)(),[c,d]=(0,r.useState)(),m=(0,r.useRef)(null),b=(0,r.useRef)(null),{classes:v}=T(),f=void 0!==t&&void 0===a;function g(e){e.preventDefault(),e.stopPropagation();const n=e.clientX-e.target.getBoundingClientRect().left;s(n),i(n)}function x(e){const n=e.target;d(e.clientX-n.getBoundingClientRect().left)}function w(){d(void 0),(0,A.transaction)((()=>{e.views.forEach((e=>{e.setOffsets(void 0,void 0)}))}))}function y(){l(void 0),s(void 0),i(void 0)}(0,r.useEffect)((()=>{function n(e){if(m.current&&f){const n=e.clientX-m.current.getBoundingClientRect().left;i(n)}}function s(n){if(void 0!==t&&m.current){const{clientX:s,clientY:o}=n,r=s-m.current.getBoundingClientRect().left;l({offsetX:r,clientX:s,clientY:o}),(0,A.transaction)((()=>{e.views.forEach((e=>{const n=function(e,n){if(void 0===t)return;let s=t,o=e;return o<s&&([s,o]=[o,s]),{leftOffset:n.pxToBp(s),rightOffset:n.pxToBp(o)}}(r,e);if(n){const{leftOffset:t,rightOffset:s}=n;e.setOffsets(t,s)}}))})),d(void 0)}}return f?(window.addEventListener("mousemove",n),window.addEventListener("mouseup",s),()=>{window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",s)}):()=>{}}),[t,f,e]),(0,r.useEffect)((()=>{!f&&void 0!==o&&void 0!==t&&Math.abs(o-t)<=3&&y()}),[f,o,t]);const k=Boolean(a);if(void 0===t)return(0,h.jsxs)(h.Fragment,{children:[void 0!==c?(0,h.jsx)(B,{model:e,coordX:c}):null,(0,h.jsx)("div",{ref:m,className:v.rubberbandControl,onMouseDown:g,onMouseOut:w,onMouseMove:x,children:n})]});const M=a?a.offsetX:o||0,C=Math.min(M,t),N=Math.abs(M-t),{views:O}=e,R=O.map((e=>e.pxToBp(C))),z=O.map((e=>e.pxToBp(C+N))),E=O.map((e=>Math.ceil(N*e.bpPerPx)));return(0,h.jsxs)(h.Fragment,{children:[b.current?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(S.Ay,{className:v.popover,classes:{paper:v.paper},open:!0,anchorEl:b.current,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"right"},keepMounted:!0,disableRestoreFocus:!0,children:R.map(((e,n)=>(0,h.jsx)(p.A,{children:(0,u.stringify)(e,!0)},[JSON.stringify(e),n,"left"].join("-"))))}),(0,h.jsx)(S.Ay,{className:v.popover,classes:{paper:v.paper},open:!0,anchorEl:b.current,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"left"},keepMounted:!0,disableRestoreFocus:!0,children:z.map(((e,n)=>(0,h.jsx)(p.A,{children:(0,u.stringify)(e,!0)},[JSON.stringify(e),n,"right"].join("-"))))})]}):null,(0,h.jsx)("div",{ref:b,className:v.rubberband,style:{left:C,width:N},children:(0,h.jsx)(p.A,{variant:"h6",className:v.rubberbandText,children:E.map(((e,n)=>(0,h.jsx)(p.A,{children:`${e.toLocaleString("en-US")}bp`},`${e}_${n}`)))})}),(0,h.jsx)("div",{className:v.rubberbandControl,ref:m,onMouseDown:g,onMouseOut:w,onMouseMove:x,children:n}),a?(0,h.jsx)(j.Menu,{anchorReference:"anchorPosition",anchorPosition:{left:a.clientX,top:a.clientY},onMenuItemClick:function(e,n){n(),y()},open:k,onClose:y,menuItems:e.rubberBandMenuItems()}):null]})})),E=(0,o.n9)()((e=>({rubberbandContainer:{position:"relative",overflow:"hidden"},rubberbandDiv:{width:"100%",background:e.palette.action.disabledBackground,height:15,"&:hover":{background:e.palette.action.selected}}}))),I=(0,s.observer)((function({model:e}){const{classes:n}=E();return(0,h.jsxs)("div",{className:n.rubberbandContainer,children:[(0,h.jsx)(g,{model:e}),(0,h.jsx)(z,{model:e,ControlComponent:(0,h.jsx)("div",{className:n.rubberbandDiv})}),(0,h.jsx)(C,{model:e})]})}))}}]);
//# sourceMappingURL=3795.6adcc965.chunk.js.map