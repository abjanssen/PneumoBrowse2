{"version":3,"file":"static/js/187.8154386a.chunk.js","mappings":"oQAQA,MAAMA,GAAYC,EAAAA,EAAAA,IAAAA,CAAa,CAC7BC,cAAe,CACbC,MAAO,QAETC,aAAc,CACZC,WAAY,eAGdC,MAAO,CACLC,MAAO,MACPC,SAAU,WAId,SAASC,EAAUC,IACjBC,EAAAA,EAAAA,GAAuBD,EACzB,CAEA,MA2HA,GA3HyBE,EAAAA,EAAAA,UAAS,UAA0B,MAC1DC,EAAK,YACLC,IASA,MAAM,QAAEC,GAAYf,KACd,cAAEgB,GAAkBH,GACnBI,EAAMC,IAAWC,EAAAA,EAAAA,UAASH,IAAgBI,KAAK,QAC/Cd,EAAOe,IAAYF,EAAAA,EAAAA,YAiB1B,OAfAG,EAAAA,EAAAA,WAAU,KACR,IACE,IAAK,MAAMC,KAAQN,EAChBO,MAAM,MACNC,IAAIF,GAAQA,EAAKG,QACjBC,OAAOJ,KAAUA,GAClBd,EAAUc,GAEZF,OAASO,EACX,CAAE,MAAOC,GACPC,QAAQxB,MAAMuB,GACdR,EAASQ,EACX,GACC,CAACZ,KAGFc,EAAAA,EAAAA,MAACC,EAAAA,EAAM,CAACC,SAAS,KAAKC,MAAI,EAACC,QAASrB,EAAasB,MAAM,oBAAmBC,SAAA,EACxEN,EAAAA,EAAAA,MAACO,EAAAA,EAAa,CAAAD,SAAA,EACZN,EAAAA,EAAAA,MAAA,OAAAM,SAAA,CAAK,uFAEc,KACjBN,EAAAA,EAAAA,MAAA,MAAAM,SAAA,EACEN,EAAAA,EAAAA,MAAA,MAAAM,SAAA,EACEE,EAAAA,EAAAA,KAAA,QAAAF,SAAM,sCAAwC,6DAGhDN,EAAAA,EAAAA,MAAA,MAAAM,SAAA,EACEE,EAAAA,EAAAA,KAAA,QAAAF,SAAM,kDAAoD,wGAI5DN,EAAAA,EAAAA,MAAA,MAAAM,SAAA,EACEE,EAAAA,EAAAA,KAAA,QAAAF,SAAM,gDAAkD,mFAI1DN,EAAAA,EAAAA,MAAA,MAAAM,SAAA,EACEE,EAAAA,EAAAA,KAAA,QAAAF,SAAM,qCAAuC,iFAG/CN,EAAAA,EAAAA,MAAA,MAAAM,SAAA,EACEE,EAAAA,EAAAA,KAAA,QAAAF,SAAM,oCAAyC,+DAGjDN,EAAAA,EAAAA,MAAA,MAAAM,SAAA,EACEE,EAAAA,EAAAA,KAAA,QAAAF,SAAM,6DAEE,IAAI,yDAIhBN,EAAAA,EAAAA,MAAA,KAAAM,SAAA,CAAG,aACU,KACXE,EAAAA,EAAAA,KAAA,KAAGC,KAAK,mDAAkDH,SAAC,SAAS,IAAI,2CAK3E/B,GAAQiC,EAAAA,EAAAA,KAAA,KAAGE,UAAW1B,EAAQT,MAAM+B,SAAE,GAAG/B,MAAe,MACzDiC,EAAAA,EAAAA,KAACG,EAAAA,EAAS,CACRC,QAAQ,WACRC,WAAS,EACTC,QAAS,EACTC,QAAS,GACTL,UAAW1B,EAAQb,cACnB6C,WAAS,EACTC,MAAO/B,EACPgC,SAAUC,IACRhC,EAAQgC,EAAMC,OAAOH,QAEvBI,UAAW,CACTC,MAAO,CACLtC,QAAS,CACPsC,MAAOtC,EAAQX,sBAMzB2B,EAAAA,EAAAA,MAACuB,EAAAA,EAAa,CAAAjB,SAAA,EACZE,EAAAA,EAAAA,KAACgB,EAAAA,EAAM,CACLZ,QAAQ,YACRpC,MAAM,UACNiD,KAAK,SACLC,WAAS,EACTC,WAAYpD,EACZqD,QAASA,KACP9C,EAAM+C,eAAe3C,EAAKO,MAAM,OAChCV,KACAuB,SACH,YAGDE,EAAAA,EAAAA,KAACgB,EAAAA,EAAM,CACLZ,QAAQ,YACRpC,MAAM,YACNoD,QAASA,KACP7C,KACAuB,SACH,gBAMT,E","sources":["webpack://@jbrowse/web/../../plugins/linear-genome-view/src/LinearFeatureDisplay/components/AddFiltersDialog.tsx"],"sourcesContent":["import { useEffect, useState } from 'react'\n\nimport { Dialog } from '@jbrowse/core/ui'\nimport { stringToJexlExpression } from '@jbrowse/core/util/jexlStrings'\nimport { makeStyles } from '@jbrowse/core/util/tss-react'\nimport { Button, DialogActions, DialogContent, TextField } from '@mui/material'\nimport { observer } from 'mobx-react'\n\nconst useStyles = makeStyles()({\n  dialogContent: {\n    width: '80em',\n  },\n  textAreaFont: {\n    fontFamily: 'Courier New',\n  },\n\n  error: {\n    color: 'red',\n    fontSize: '0.8em',\n  },\n})\n\nfunction checkJexl(code: string) {\n  stringToJexlExpression(code)\n}\n\nconst AddFiltersDialog = observer(function AddFiltersDialog({\n  model,\n  handleClose,\n}: {\n  model: {\n    jexlFilters?: string[]\n    activeFilters: () => string[]\n    setJexlFilters: (arg?: string[]) => void\n  }\n  handleClose: () => void\n}) {\n  const { classes } = useStyles()\n  const { activeFilters } = model\n  const [data, setData] = useState(activeFilters().join('\\n'))\n  const [error, setError] = useState<unknown>()\n\n  useEffect(() => {\n    try {\n      for (const line of data\n        .split('\\n')\n        .map(line => line.trim())\n        .filter(line => !!line)) {\n        checkJexl(line)\n      }\n      setError(undefined)\n    } catch (e) {\n      console.error(e)\n      setError(e)\n    }\n  }, [data])\n\n  return (\n    <Dialog maxWidth=\"xl\" open onClose={handleClose} title=\"Add track filters\">\n      <DialogContent>\n        <div>\n          Add filters, in jexl format, one per line, starting with the string\n          jexl:. Examples:{' '}\n          <ul>\n            <li>\n              <code>jexl:get(feature,'name')=='BRCA1'</code> - show only feature\n              where the name attribute is BRCA1\n            </li>\n            <li>\n              <code>jexl:startsWith(get(feature,'name'),'PREFIX')</code> - show\n              only feature where the string 'PREFIX' is the prefix of feature\n              name. endsWith also works\n            </li>\n            <li>\n              <code>jexl:includes(get(feature,'name'),'PREFIX')</code> - show\n              only feature where the string 'PREFIX' is the prefix of feature\n              name\n            </li>\n            <li>\n              <code>jexl:get(feature,'type')=='gene'</code> - show only gene\n              type features in a GFF that has many other feature types\n            </li>\n            <li>\n              <code>jexl:get(feature,'score') &gt; 400</code> - show only\n              features that have a score greater than 400\n            </li>\n            <li>\n              <code>\n                jexl:get(feature,'end') - get(feature,'start') &lt; 1000000\n              </code>{' '}\n              - show only features with length less than 1Mbp\n            </li>\n          </ul>\n          <p>\n            Please see{' '}\n            <a href=\"https://jbrowse.org/jb2/docs/config_guides/jexl/\">Jexl</a>{' '}\n            documentation for more information\n          </p>\n        </div>\n\n        {error ? <p className={classes.error}>{`${error}`}</p> : null}\n        <TextField\n          variant=\"outlined\"\n          multiline\n          minRows={5}\n          maxRows={10}\n          className={classes.dialogContent}\n          fullWidth\n          value={data}\n          onChange={event => {\n            setData(event.target.value)\n          }}\n          slotProps={{\n            input: {\n              classes: {\n                input: classes.textAreaFont,\n              },\n            },\n          }}\n        />\n      </DialogContent>\n      <DialogActions>\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          type=\"submit\"\n          autoFocus\n          disabled={!!error}\n          onClick={() => {\n            model.setJexlFilters(data.split('\\n'))\n            handleClose()\n          }}\n        >\n          Submit\n        </Button>\n        <Button\n          variant=\"contained\"\n          color=\"secondary\"\n          onClick={() => {\n            handleClose()\n          }}\n        >\n          Cancel\n        </Button>\n      </DialogActions>\n    </Dialog>\n  )\n})\n\nexport default AddFiltersDialog\n"],"names":["useStyles","makeStyles","dialogContent","width","textAreaFont","fontFamily","error","color","fontSize","checkJexl","code","stringToJexlExpression","observer","model","handleClose","classes","activeFilters","data","setData","useState","join","setError","useEffect","line","split","map","trim","filter","undefined","e","console","_jsxs","Dialog","maxWidth","open","onClose","title","children","DialogContent","_jsx","href","className","TextField","variant","multiline","minRows","maxRows","fullWidth","value","onChange","event","target","slotProps","input","DialogActions","Button","type","autoFocus","disabled","onClick","setJexlFilters"],"sourceRoot":""}