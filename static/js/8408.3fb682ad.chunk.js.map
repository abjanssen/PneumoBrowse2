{"version":3,"file":"static/js/8408.3fb682ad.chunk.js","mappings":"sMAcA,MAAMA,GAAQC,EAAAA,EAAAA,WAAS,UAAU,MAC/BC,IAIA,MAAMC,GAAOC,EAAAA,EAAAA,mBAAkBF,GACzBG,EAAQC,KAAKC,MAAMJ,EAAKK,cAAcC,cACtCC,EAASR,EAAMQ,OAGfC,GAAKC,EAAAA,EAAAA,cACRC,IACCX,EAAMY,OAAOD,EAAI,GAGnB,CAACX,EAAOG,EAAOK,IAIjB,OACEK,EAAAA,cAAA,UACE,cAAY,eACZF,IAAKF,EACLK,MAAO,CAAEX,QAAOK,SAAQO,SAAU,YAClCZ,MAAe,EAARA,EACPK,OAAiB,EAATA,GAGd,IAaA,GAXsCT,EAAAA,EAAAA,WAAS,UAAU,MACvDC,IAIA,OACEa,EAAAA,cAACG,EAAAA,EAAoB,CAAChB,MAAOA,GAC3Ba,EAAAA,cAACf,EAAK,CAACE,MAAOA,IAGpB,G,kHCxCA,MAAMiB,GAAYC,E,SAAAA,KAAAA,EAAaC,IAAS,CACtCC,QAAS,CACPC,gBAAiBF,EAAMG,QAAQC,WAAWC,QAC1CC,gBAAiB,kEAAkEN,EAAMG,QAAQI,OAAOC,2BAA2BR,EAAMG,QAAQI,OAAOC,2BACxJZ,SAAU,WACVa,OAAQ,EACRpB,OAAQ,GACRL,MAAO,IACP0B,MAAO,EACPC,cAAe,OACfC,UAAW,cAITC,GAAajC,EAAAA,EAAAA,WAAS,UAAU,MACpCC,IAIA,MAAM,MAAEiC,GAAUjC,EAClB,OACEa,EAAAA,cAACqB,EAAAA,GAAQ,CACPC,QAAS,GAAGF,IACZG,SAAS,QACTV,OACEb,EAAAA,cAACwB,EAAAA,EAAO,CAACC,MAAM,UACbzB,EAAAA,cAAC0B,EAAAA,EAAM,CACL,cAAY,gBACZC,QAASA,KACPxC,EAAMyC,QAAQ,GAEjB,YAOX,IAEMzB,GAAuBjB,EAAAA,EAAAA,WAAS,UAAU,MAC9CC,EAAK,SACL0C,IAKA,MAAM,MAAET,EAAK,eAAEU,GAAmB3C,EAClC,OAAOiC,EACLpB,EAAAA,cAACmB,EAAU,CAAChC,MAAOA,IACjB2C,EACF3C,EAAM4C,yBAEN/B,EAAAA,cAACgC,EAAW,CAAC7C,MAAOA,GAAQ0C,EAEhC,IAEMG,GAAc9C,EAAAA,EAAAA,WAAS,UAAU,MACrCC,EAAK,SACL0C,IAKA,MAAM,MAAEI,EAAK,QAAE1B,GAAYpB,EACrBC,GAAOC,EAAAA,EAAAA,mBAAkBF,GACzB+C,GAAQ/C,EAAMgD,mBAAqB,GAAK/C,EAAKgD,SACnD,OAGEpC,EAAAA,cAAA,OAAK,cAAa,SAASiC,KACzBjC,EAAAA,cAAA,OAAKC,MAAO,CAAEC,SAAU,WAAYgC,SAASL,GACnC,IAATK,GAAc3B,EAAUP,EAAAA,cAACqC,EAAU,CAAClD,MAAOA,IAAY,KAG9D,IAEMkD,GAAanD,EAAAA,EAAAA,WAAS,UAAU,MACpCC,IAIA,MAAM,QAAEmD,GAAYlC,KACd,QAAEkB,GAAYnC,EACpB,OACEa,EAAAA,cAAA,OAAKuC,UAAWD,EAAQ/B,SACtBP,EAAAA,cAACwC,EAAAA,gBAAe,CAAClB,QAASA,IAGhC,IAEA,G","sources":["../../../plugins/alignments/src/LinearReadCloudDisplay/components/ReactComponent.tsx","../../../plugins/alignments/src/shared/components/BaseDisplayComponent.tsx"],"sourcesContent":["import React, { useCallback } from 'react'\n\nimport { getContainingView } from '@jbrowse/core/util'\nimport { observer } from 'mobx-react'\n\nimport BaseDisplayComponent from '../../shared/components/BaseDisplayComponent'\n\nimport type { LinearReadCloudDisplayModel } from '../model'\nimport type { LinearGenomeViewModel } from '@jbrowse/plugin-linear-genome-view'\n\n// local\n\ntype LGV = LinearGenomeViewModel\n\nconst Cloud = observer(function ({\n  model,\n}: {\n  model: LinearReadCloudDisplayModel\n}) {\n  const view = getContainingView(model) as LGV\n  const width = Math.round(view.dynamicBlocks.totalWidthPx)\n  const height = model.height\n\n  // biome-ignore lint/correctness/useExhaustiveDependencies:\n  const cb = useCallback(\n    (ref: HTMLCanvasElement) => {\n      model.setRef(ref)\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [model, width, height],\n  )\n\n  // note: the position absolute below avoids scrollbar from appearing on track\n  return (\n    <canvas\n      data-testid=\"cloud-canvas\"\n      ref={cb}\n      style={{ width, height, position: 'absolute' }}\n      width={width * 2}\n      height={height * 2}\n    />\n  )\n})\n\nconst LinearReadCloudReactComponent = observer(function ({\n  model,\n}: {\n  model: LinearReadCloudDisplayModel\n}) {\n  return (\n    <BaseDisplayComponent model={model}>\n      <Cloud model={model} />\n    </BaseDisplayComponent>\n  )\n})\nexport default LinearReadCloudReactComponent\n","import React from 'react'\n\nimport { LoadingEllipses } from '@jbrowse/core/ui'\nimport { getContainingView } from '@jbrowse/core/util'\nimport { BlockMsg } from '@jbrowse/plugin-linear-genome-view'\nimport { Button, Tooltip } from '@mui/material'\nimport { observer } from 'mobx-react'\nimport { makeStyles } from 'tss-react/mui'\n\n// local\nimport type { LinearReadArcsDisplayModel } from '../../LinearReadArcsDisplay/model'\nimport type { LinearReadCloudDisplayModel } from '../../LinearReadCloudDisplay/model'\nimport type { LinearGenomeViewModel } from '@jbrowse/plugin-linear-genome-view'\n\nconst useStyles = makeStyles()(theme => ({\n  loading: {\n    backgroundColor: theme.palette.background.default,\n    backgroundImage: `repeating-linear-gradient(45deg, transparent, transparent 5px, ${theme.palette.action.disabledBackground} 5px, ${theme.palette.action.disabledBackground} 10px)`,\n    position: 'absolute',\n    bottom: 0,\n    height: 50,\n    width: 300,\n    right: 0,\n    pointerEvents: 'none',\n    textAlign: 'center',\n  },\n}))\n\nconst BlockError = observer(function ({\n  model,\n}: {\n  model: LinearReadArcsDisplayModel | LinearReadCloudDisplayModel\n}) {\n  const { error } = model\n  return (\n    <BlockMsg\n      message={`${error}`}\n      severity=\"error\"\n      action={\n        <Tooltip title=\"Reload\">\n          <Button\n            data-testid=\"reload_button\"\n            onClick={() => {\n              model.reload()\n            }}\n          >\n            Reload\n          </Button>\n        </Tooltip>\n      }\n    />\n  )\n})\n\nconst BaseDisplayComponent = observer(function ({\n  model,\n  children,\n}: {\n  model: LinearReadArcsDisplayModel | LinearReadCloudDisplayModel\n  children?: React.ReactNode\n}) {\n  const { error, regionTooLarge } = model\n  return error ? (\n    <BlockError model={model} />\n  ) : regionTooLarge ? (\n    model.regionCannotBeRendered()\n  ) : (\n    <DataDisplay model={model}>{children}</DataDisplay>\n  )\n})\n\nconst DataDisplay = observer(function ({\n  model,\n  children,\n}: {\n  model: LinearReadArcsDisplayModel | LinearReadCloudDisplayModel\n  children?: React.ReactNode\n}) {\n  const { drawn, loading } = model\n  const view = getContainingView(model) as LinearGenomeViewModel\n  const left = (model.lastDrawnOffsetPx || 0) - view.offsetPx\n  return (\n    // this data-testid is located here because changing props on the canvas\n    // itself is very sensitive to triggering ref invalidation\n    <div data-testid={`drawn-${drawn}`}>\n      <div style={{ position: 'absolute', left }}>{children}</div>\n      {left !== 0 || loading ? <LoadingBar model={model} /> : null}\n    </div>\n  )\n})\n\nconst LoadingBar = observer(function ({\n  model,\n}: {\n  model: LinearReadArcsDisplayModel | LinearReadCloudDisplayModel\n}) {\n  const { classes } = useStyles()\n  const { message } = model\n  return (\n    <div className={classes.loading}>\n      <LoadingEllipses message={message} />\n    </div>\n  )\n})\n\nexport default BaseDisplayComponent\n"],"names":["Cloud","observer","model","view","getContainingView","width","Math","round","dynamicBlocks","totalWidthPx","height","cb","useCallback","ref","setRef","React","style","position","BaseDisplayComponent","useStyles","makeStyles","theme","loading","backgroundColor","palette","background","default","backgroundImage","action","disabledBackground","bottom","right","pointerEvents","textAlign","BlockError","error","BlockMsg","message","severity","Tooltip","title","Button","onClick","reload","children","regionTooLarge","regionCannotBeRendered","DataDisplay","drawn","left","lastDrawnOffsetPx","offsetPx","LoadingBar","classes","className","LoadingEllipses"],"sourceRoot":""}