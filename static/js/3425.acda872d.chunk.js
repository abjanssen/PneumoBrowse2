"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[3425],{3032:(e,t,a)=>{a.d(t,{A:()=>m});var r=a(7552),n=a(93878),o=a(75100),s=a(80317),i=a(21928),c=a(50864),d=a(18890),l=a(69500);const p=(0,s.Ay)("div",{name:"MuiAccordionDetails",slot:"Root"})((0,i.A)(({theme:e})=>({padding:e.spacing(1,2,2)}))),m=r.forwardRef(function(e,t){const a=(0,c.b)({props:e,name:"MuiAccordionDetails"}),{className:r,...s}=a,i=a,m=(e=>{const{classes:t}=e;return(0,o.A)({root:["root"]},d.n,t)})(i);return(0,l.jsx)(p,{className:(0,n.A)(m.root,r),ref:t,ownerState:i,...s})})},8438:(e,t,a)=>{a.d(t,{A:()=>s,T:()=>o});var r=a(51062),n=a(2958);function o(e){return(0,n.Ay)("MuiAccordionSummary",e)}const s=(0,r.A)("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"])},18890:(e,t,a)=>{a.d(t,{A:()=>s,n:()=>o});var r=a(51062),n=a(2958);function o(e){return(0,n.Ay)("MuiAccordionDetails",e)}const s=(0,r.A)("MuiAccordionDetails",["root"])},23425:(e,t,a)=>{a.r(t),a.d(t,{default:()=>j});var r=a(7552),n=a(67112),o=a(99546),s=a(99834),i=a(92516),c=a(48759),d=a(2323),l=a(76218),p=a(76386),m=a(75068),u=a(61282),h=a(3032),x=a(93062),A=a(30698),f=a(69092),b=a(68446),y=a(75785),w=a(32984),g=a(84495),k=a(69500);const S=(0,y.n9)()(e=>({expandIcon:{color:e.palette.tertiary.contrastText||"#fff"},minWidth:{minWidth:500}})),j=(0,b.observer)(function({onClose:e,model:t}){const{classes:a}=S(),[b,y]=(0,r.useState)(),[j,v]=(0,r.useState)(),[C,I]=(0,r.useState)(""),N=(0,o.getSession)(t),{assemblyNames:P}=N,[W,M]=(0,r.useState)(P[0]),[T,R]=(0,r.useState)("shareLinkAccordion");return(0,k.jsxs)(n.Dialog,{open:!0,onClose:e,maxWidth:"xl",title:"Import bookmarks",children:[(0,k.jsxs)(l.A,{className:a.minWidth,children:[(0,k.jsxs)(p.A,{expanded:"shareLinkAccordion"===T,onChange:()=>{R("shareLinkAccordion")},children:[(0,k.jsx)(m.A,{expandIcon:(0,k.jsx)(c.A,{className:a.expandIcon}),children:(0,k.jsx)(u.A,{style:{display:"flex",alignItems:"center",gap:"5px"},children:"Import from share link"})}),(0,k.jsxs)(h.A,{children:[(0,k.jsx)(u.A,{children:"Paste a bookmark share link generated by the 'Share' button from the bookmarks widget"}),(0,k.jsx)(x.A,{label:"Enter Share URL",variant:"outlined",fullWidth:!0,value:C,onChange:e=>{I(e.target.value)}})]})]}),(0,k.jsxs)(p.A,{expanded:"fileAccordion"===T,onChange:()=>{R("fileAccordion")},children:[(0,k.jsx)(m.A,{expandIcon:(0,k.jsx)(c.A,{className:a.expandIcon}),children:(0,k.jsx)(u.A,{children:"Import from file"})}),(0,k.jsxs)(h.A,{children:[(0,k.jsx)(n.FileSelector,{location:b,setLocation:y,name:"File",description:'Choose a BED or TSV format file to import. Required TSV column headers are "chrom, start, end, label, assembly_name".'}),(0,k.jsx)(n.AssemblySelector,{onChange:e=>{M(e)},helperText:"Select the assembly for BED file.",session:N,selected:W})]})]}),j?(0,k.jsx)(n.ErrorMessage,{error:j}):null]}),(0,k.jsxs)(A.A,{children:[(0,k.jsx)(f.A,{variant:"contained",color:"secondary",onClick:e,children:"Cancel"}),(0,k.jsx)(f.A,{"data-testid":"dialogImport",variant:"contained",color:"primary",disabled:!b&&!C,startIcon:(0,k.jsx)(d.A,{}),onClick:async()=>{try{if("fileAccordion"===T&&b){const e=(await(0,s.openLocation)(b).readFile("utf8")).split(/\n|\r\n|\r/).filter(e=>!!e.trim());"BED"==((a=e[0]).startsWith("chrom")&&a.includes("assembly_name")?"TSV":"BED")?t.importBookmarks(await async function(e,t){return e.filter(e=>!e.startsWith("#")).map(e=>{const[a,r,n,o]=e.split("\t");return{assemblyName:t,refName:a,start:+r,end:+n,label:"."===o?void 0:o}})}(e,W)):t.importBookmarks(await async function(e){return e[0].startsWith("chrom")&&(e=e.slice(1)),e.filter(e=>!e.startsWith("#")).map(e=>{const[t,a,r,n,o]=e.split("\t");return{assemblyName:o,refName:t,start:+a,end:+r,label:"."===n?void 0:n}})}(e))}else"shareLinkAccordion"===T&&C&&(0,i.xv)(N)&&t.importBookmarks(await async function(e,t){const a=new URL(e),r=a.searchParams.get("bookmarks"),n=a.searchParams.get("password"),o=await(0,w.Z)(`${t??"https://share.jbrowse.org/api/v1/"}load`,r||"",n||"");return JSON.parse(await(0,g.LP)(o)).sharedBookmarks}(C,N.shareURL));e()}catch(e){console.error(e),v(e)}var a},children:"Import"})]})]})})},32984:(e,t,a)=>{a.d(t,{J:()=>i,Z:()=>c});var r=a(84495);const n=async(e,t)=>(await Promise.all([a.e(7753),a.e(9831),a.e(5156)]).then(a.t.bind(a,29831,23))).encrypt(e,t).toString(),o=async(e,t)=>{const r=await Promise.all([a.e(7753),a.e(9831),a.e(5156)]).then(a.t.bind(a,29831,23)),n=await Promise.all([a.e(7753),a.e(6235)]).then(a.t.bind(a,12598,23));return r.decrypt(e,t).toString(n)};function s(e){try{return JSON.parse(e).message}catch(t){return e}}async function i(e,t,a){const o=await(0,r.eW)(JSON.stringify(e)),i=window.btoa([...window.crypto.getRandomValues(new Uint8Array(10))].map(e=>String.fromCharCode(e)).join("")).replaceAll(/[+/]/g,"").slice(0,5);const c=await n(o,i),d=new FormData;d.append("session",c),d.append("dateShared",`${Date.now()}`),d.append("referer",a);const l=await fetch(`${t}share`,{method:"POST",mode:"cors",body:d});if(!l.ok){const e=await l.text();throw new Error(s(e))}return{json:await l.json(),encryptedSession:c,password:i}}async function c(e,t,a){const r=t.split("share-")[1],n=`${e}?sessionId=${encodeURIComponent(r)}`,i=await fetch(n);if(!i.ok)throw new Error(s(await i.text()));const c=await i.json();return o(c.session,a)}},48759:(e,t,a)=>{a.d(t,{A:()=>o});var r=a(29772),n=a(69500);const o=(0,r.A)((0,n.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore")},75068:(e,t,a)=>{a.d(t,{A:()=>f});var r=a(7552),n=a(93878),o=a(75100),s=a(80317),i=a(21928),c=a(50864),d=a(43124),l=a(81215),p=a(8438),m=a(22020),u=a(69500);const h=(0,s.Ay)(d.A,{name:"MuiAccordionSummary",slot:"Root"})((0,i.A)(({theme:e})=>{const t={duration:e.transitions.duration.shortest};return{display:"flex",width:"100%",minHeight:48,padding:e.spacing(0,2),transition:e.transitions.create(["min-height","background-color"],t),[`&.${p.A.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${p.A.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`&:hover:not(.${p.A.disabled})`]:{cursor:"pointer"},variants:[{props:e=>!e.disableGutters,style:{[`&.${p.A.expanded}`]:{minHeight:64}}}]}})),x=(0,s.Ay)("span",{name:"MuiAccordionSummary",slot:"Content"})((0,i.A)(({theme:e})=>({display:"flex",textAlign:"start",flexGrow:1,margin:"12px 0",variants:[{props:e=>!e.disableGutters,style:{transition:e.transitions.create(["margin"],{duration:e.transitions.duration.shortest}),[`&.${p.A.expanded}`]:{margin:"20px 0"}}}]}))),A=(0,s.Ay)("span",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper"})((0,i.A)(({theme:e})=>({display:"flex",color:(e.vars||e).palette.action.active,transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),[`&.${p.A.expanded}`]:{transform:"rotate(180deg)"}}))),f=r.forwardRef(function(e,t){const a=(0,c.b)({props:e,name:"MuiAccordionSummary"}),{children:s,className:i,expandIcon:d,focusVisibleClassName:f,onClick:b,slots:y,slotProps:w,...g}=a,{disabled:k=!1,disableGutters:S,expanded:j,toggle:v}=r.useContext(l.A),C={...a,expanded:j,disabled:k,disableGutters:S},I=(e=>{const{classes:t,expanded:a,disabled:r,disableGutters:n}=e,s={root:["root",a&&"expanded",r&&"disabled",!n&&"gutters"],focusVisible:["focusVisible"],content:["content",a&&"expanded",!n&&"contentGutters"],expandIconWrapper:["expandIconWrapper",a&&"expanded"]};return(0,o.A)(s,p.T,t)})(C),N={slots:y,slotProps:w},[P,W]=(0,m.A)("root",{ref:t,shouldForwardComponentProp:!0,className:(0,n.A)(I.root,i),elementType:h,externalForwardedProps:{...N,...g},ownerState:C,additionalProps:{focusRipple:!1,disableRipple:!0,disabled:k,"aria-expanded":j,focusVisibleClassName:(0,n.A)(I.focusVisible,f)},getSlotProps:e=>({...e,onClick:t=>{e.onClick?.(t),(e=>{v&&v(e),b&&b(e)})(t)}})}),[M,T]=(0,m.A)("content",{className:I.content,elementType:x,externalForwardedProps:N,ownerState:C}),[R,D]=(0,m.A)("expandIconWrapper",{className:I.expandIconWrapper,elementType:A,externalForwardedProps:N,ownerState:C});return(0,u.jsxs)(P,{...W,children:[(0,u.jsx)(M,{...T,children:s}),d&&(0,u.jsx)(R,{...D,children:d})]})})}}]);
//# sourceMappingURL=3425.acda872d.chunk.js.map