"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[1853,3958,7258],{3958(e,t,n){n.r(t),n.d(t,{default:()=>c});var r=n(42918),o=n(77251),s=n(10070),i=n(64074),a=n(32118);const l=(0,i.observer)(function({model:e}){const t=(0,o.getContainingView)(e),n=Math.round(t.dynamicBlocks.totalWidthPx),s=e.height,i=(0,r.useCallback)(t=>{e.setRef(t)},[e,n,s]);return(0,a.jsx)("div",{style:{position:"relative",width:n,height:s},children:(0,a.jsx)("canvas",{"data-testid":"arc-canvas",ref:i,style:{width:n,height:s,position:"absolute"},width:2*n,height:2*s})})}),c=(0,i.observer)(function({model:e}){return(0,a.jsx)(s.A,{model:e,children:(0,a.jsx)(l,{model:e})})})},10070(e,t,n){n.d(t,{A:()=>g}),n(42918);var r=n(87574),o=n(77251),s=n(65045),i=n(64074),a=n(91853),l=n(85376),c=n(32118);const d=(0,s.n)()({loading:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.15)",backgroundImage:"repeating-linear-gradient(45deg, transparent, transparent 8px, rgba(0, 0, 0, 0.05) 8px, rgba(0, 0, 0, 0.05) 16px)",pointerEvents:"none",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1},loadingMessage:{zIndex:2,pointerEvents:"none"}}),u=(0,i.observer)(function({model:e,children:t}){const{error:n,regionTooLarge:r}=e;return n?(0,c.jsx)(a.default,{model:e}):r?e.regionCannotBeRendered():(0,c.jsx)(h,{model:e,children:t})}),h=(0,i.observer)(function({model:e,children:t}){const{drawn:n,loading:r,showLegend:s,legendItems:i,lastDrawnBpPerPx:a}=e,d=(0,o.getContainingView)(e),u=i?.()??[],h=void 0!==a&&a!==d.bpPerPx,g=h?0:(e.lastDrawnOffsetPx??0)-d.offsetPx;return(0,c.jsxs)("div",{"data-testid":`drawn-${n}`,children:[(0,c.jsx)("div",{style:{position:"absolute",left:g,visibility:h?"hidden":void 0},children:t}),s&&u.length>0?(0,c.jsx)(l.A,{items:u}):null,h||0!==g||r?(0,c.jsx)(x,{model:e}):null]})}),x=(0,i.observer)(function({model:e}){const{classes:t}=d(),{statusMessage:n}=e;return(0,c.jsx)("div",{className:t.loading,children:(0,c.jsx)("div",{className:t.loadingMessage,children:(0,c.jsx)(r.A,{message:n})})})}),g=u},87258(e,t,n){n.r(t),n.d(t,{default:()=>B});var r=n(42918),o=n(1184),s=n(98373),i=n(66919),a=n(87),l=n(99367),c=n(8039),d=n(70885),u=n(29011),h=n(30936),x=n(52061),g=n(41031),p=n(84830),f=n(65045),j=n(32118);const b="jbrowse2@berkeley.edu",w=(0,f.n)()(e=>({pre:{background:(0,x.X4)(e.palette.error.main,.2),border:`1px solid ${e.palette.divider}`,overflow:"auto",margin:20,maxHeight:300}}));function m(e){const t=(0,h.c)(18),{text:n,extra:r}=e,{classes:o}=w();let s;t[0]!==r?(s=r?`supporting data: ${JSON.stringify(r,null,2)}`:"",t[0]=r,t[1]=s):s=t[1];const i=s;let a;t[2]!==i||t[3]!==n?(a=[n,i].filter(Boolean),t[2]=i,t[3]=n,t[4]=a):a=t[4];const l=a.join("\n"),c=encodeURIComponent(`I got this error from JBrowse, here is the stack trace:\n\n\`\`\`\n${n}\n\`\`\`\n${i}\n`),d=`https://github.com/GMOD/jbrowse-components/issues/new?labels=bug&title=JBrowse+issue&body=${c}`,u=`mailto:${b}?subject=JBrowse%202%20error&body=${c}`;let x,f,m,v,k;return t[5]!==d?(x=(0,j.jsx)(p.A,{href:d,children:"GitHub"}),t[5]=d,t[6]=x):x=t[6],t[7]!==u?(f=(0,j.jsx)(p.A,{href:u,children:b}),t[7]=u,t[8]=f):f=t[8],t[9]!==x||t[10]!==f?(m=(0,j.jsxs)(g.A,{children:["Post a new issue at"," ",x," or send an email to ",f]}),t[9]=x,t[10]=f,t[11]=m):m=t[11],t[12]!==o.pre||t[13]!==l?(v=(0,j.jsx)("pre",{className:o.pre,children:l}),t[12]=o.pre,t[13]=l,t[14]=v):v=t[14],t[15]!==m||t[16]!==v?(k=(0,j.jsxs)(j.Fragment,{children:[m,v]}),t[15]=m,t[16]=v,t[17]=k):k=t[17],k}var v=n(87574);async function k(e){const t=await fetch(e);if(!t.ok)throw new Error(`HTTP ${t.status} fetching ${e}: ${await t.text()}`);return t.text()}const y={},A=/\/\/# sourceMappingURL=(.*)/,C=/(.*)((?:https?|file):\/\/.*):(\d+):(\d+)/;async function $(e){if(y[e])return y[e];const t=new URL(e).search,n=await k(e),r=A.exec(n)?.[1]??"",o=await async function(e){return JSON.parse(await k(e))}(new URL(r,e).href+t),s=new u.SourceMapConsumer(o);return y[e]=s,s}function B({error:e,onClose:t,extra:u}){const[h,x]=(0,r.useState)(),[g,p]=(0,r.useState)(),[f,b]=(0,r.useState)(!1),w=e?`${e}`:"",k=function(e,t){return e.startsWith("Error:")?e.slice(`${t}`.length):e}(function(e){return"object"==typeof e&&null!==e&&"stack"in e?`${e.stack}`:""}(e),w);(0,r.useEffect)(()=>{(async()=>{try{x(await async function(e){const t=[];for(const n of e.split("\n")){const e=C.exec(n);if(!e){t.push(n);continue}const r=e[2],o=(await $(r)).originalPositionFor({line:+e[3],column:+e[4]});o.source&&o.line&&o.column?t.push(`${o.source}:${o.line}:${o.column+1} (${e[1].trim()})`):t.push(n)}return t.join("\n")}(k))}catch(e){console.error(e),x(k),p(e)}})()},[k]);const y=window.JBrowseSession?.version,A=[g?"Error loading source map, showing raw stack trace below:":"",w.length>1e4?`${w.slice(0,1e4)}...`:w,h||"No stack trace available",y?`JBrowse ${y}`:""].filter(Boolean).join("\n");return(0,j.jsxs)(s.A,{open:!0,onClose:t,maxWidth:"xl",children:[(0,j.jsxs)(i.A,{children:["Stack trace",(0,j.jsx)(a.A,{onClick:t,sx:{position:"absolute",right:8,top:8},children:(0,j.jsx)(o.A,{})})]}),(0,j.jsx)(l.A,{children:void 0===h?(0,j.jsx)(v.A,{variant:"h6"}):(0,j.jsx)(m,{text:A,extra:u})}),(0,j.jsxs)(c.A,{children:[(0,j.jsx)(d.A,{variant:"contained",color:"secondary",onClick:async()=>{const{default:e}=await n.e(8284).then(n.t.bind(n,88284,23));e(A),b(!0),setTimeout(()=>{b(!1)},1e3)},children:f?"Copied!":"Copy stack trace to clipboard"}),(0,j.jsx)(d.A,{variant:"contained",color:"primary",onClick:t,children:"Close"})]})]})}},91853(e,t,n){n.r(t),n.d(t,{default:()=>h});var r=n(87258),o=n(77251),s=n(20611),i=n(3136),a=n(7623),l=n(87),c=n(64074),d=n(82947),u=n(32118);const h=(0,c.observer)(function({model:e}){return(0,u.jsx)(d.A,{message:`${e.error}`,severity:"error",action:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(a.A,{title:"Reload track",children:(0,u.jsx)(l.A,{"data-testid":"reload_button",onClick:()=>{e.reload()},children:(0,u.jsx)(s.A,{})})}),(0,u.jsx)(a.A,{title:"Show stack trace",children:(0,u.jsx)(l.A,{onClick:()=>{(0,o.getSession)(e).queueDialog(t=>[r.default,{onClose:t,error:e.error}])},children:(0,u.jsx)(i.A,{})})})]})})})}}]);
//# sourceMappingURL=3958.335fafdd.chunk.js.map