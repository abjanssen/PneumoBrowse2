"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[8333],{88333(e,a,c){c.d(a,{makeImageData:()=>u});var n=c(17378),d=c(95548),t=c(53121),r=c(61425),o=c(29458),b=c(35924),f=c(1801);const i=function(e){const a=e.length;return function(c){return e[Math.max(0,Math.min(a-1,Math.floor(c*a)))]}}(function(e){const a=new Array(256);let c=0;for(;c<256;)a[c]=`#${e.slice(6*c,6*++c)}`;return a}("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));async function u(e,a){const{features:c,config:u,bpPerPx:s,stopToken:l,resolution:g,sessionId:h,adapterConfig:p,useLogScale:m,colorScheme:w,regions:x,pluginManager:k,yScalar:M}=a,{statusCallback:y=()=>{}}=a;y("Drawing Hi-C matrix");const{dataAdapter:S}=await(0,d.cK)(k,h,p),v=await S.getResolution(s/g),A=(0,o.jL)(l),C=v/(s*Math.sqrt(2)),I=(0,t.M)((0,n.QZ)(u,"baseColor")),_=[];let j=0;for(const e of x)_.push(j),j+=(e.end-e.start)/s;const D=x.map(e=>Math.floor(e.start/v));if(!c.length)return;let K=0;(0,o.SW)(l);for(const{counts:e}of c)e>K&&(K=e);(0,o.SW)(l);const L={juicebox:["rgba(0,0,0,0)","red"],fall:(0,b.Ik)(["rgb(255, 255, 255)","rgb(255, 255, 204)","rgb(255, 237, 160)","rgb(254, 217, 118)","rgb(254, 178, 76)","rgb(253, 141, 60)","rgb(252, 78, 42)","rgb(227, 26, 28)","rgb(189, 0, 38)","rgb(128, 0, 38)","rgb(0, 0, 0)"]),viridis:i},P=m?K:K/20,R=L[w]||L.juicebox,T=m?(0,f.a6)(R).domain([1,P]):(0,f.Ay)(R).domain([0,P]);M&&e.scale(1,M),e.save(),e.rotate(-Math.PI/4);const N=s/v,Q=D.map((e,a)=>(_[a]??0)*N-e),W=[],Z=[];for(let a=0,d=c.length;a<d;a++){const{bin1:d,bin2:t,counts:r,region1Idx:b,region2Idx:f}=c[a];e.fillStyle=(0,n.QZ)(u,"color",{count:r,maxScore:K,baseColor:I,scale:T,useLogScale:m});const i=(d+(Q[b]??0))*C,s=(t+(Q[f]??0))*C;e.fillRect(i,s,C,C),W.push(i,s,i+C,s+C),Z.push({bin1:d,bin2:t,counts:r,region1Idx:b,region2Idx:f}),(0,o.As)(A)}e.restore();const q=new r.A(Math.max(Z.length,1));if(W.length)for(let e=0;e<W.length;e+=4)q.add(W[e],W[e+1],W[e+2],W[e+3]);else q.add(0,0);return q.finish(),{flatbush:q.data,items:Z,maxScore:K,w:C}}},1801(e,a,c){c.d(a,{Ay:()=>u,a6:()=>s});var n=c(63913),d=c(73444),t=c(61840),r=c(9496),o=c(91121),b=c(84405);function f(){var e,a,c,r,o,b=0,f=1,i=t.D_,u=!1;function s(a){return null==a||isNaN(a=+a)?o:i(0===c?.5:(a=(r(a)-e)*c,u?Math.max(0,Math.min(1,a)):a))}function l(e){return function(a){var c,n;return arguments.length?([c,n]=a,i=e(c,n),s):[i(0),i(1)]}}return s.domain=function(n){return arguments.length?([b,f]=n,e=r(b=+b),a=r(f=+f),c=e===a?0:1/(a-e),s):[b,f]},s.clamp=function(e){return arguments.length?(u=!!e,s):u},s.interpolator=function(e){return arguments.length?(i=e,s):i},s.range=l(n.A),s.rangeRound=l(d.A),s.unknown=function(e){return arguments.length?(o=e,s):o},function(n){return r=n,e=n(b),a=n(f),c=e===a?0:1/(a-e),s}}function i(e,a){return a.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function u(){var e=(0,o.C)(f()(t.D_));return e.copy=function(){return i(e,u())},r.K.apply(e,arguments)}function s(){var e=(0,b.g)(f()).domain([1,10]);return e.copy=function(){return i(e,s()).base(e.base())},r.K.apply(e,arguments)}}}]);
//# sourceMappingURL=8333.07aff09f.chunk.js.map