{"version":3,"file":"static/js/6242.65bb7730.chunk.js","mappings":"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","sources":["../../../packages/app-core/src/ui/App/ViewButtons.tsx","../../../packages/app-core/src/ui/App/ViewContainerTitle.tsx","../../../packages/app-core/src/ui/App/ViewMenu.tsx","../../../packages/app-core/src/ui/App/copyView.ts","../../../packages/app-core/src/ui/App/ViewHeader.tsx","../../../packages/app-core/src/ui/App/ViewWrapper.tsx","../../../packages/app-core/src/ui/App/ViewContainer.tsx","../../../node_modules/.pnpm/@mui+icons-material@7.3.7_@mui+material@7.3.7_@emotion+react@11.14.0_@types+react@19.2._30e1b55107c86a25823f59a01e2da619/node_modules/@mui/icons-material/esm/VerticalSplit.js","../../../node_modules/.pnpm/@mui+icons-material@7.3.7_@mui+material@7.3.7_@emotion+react@11.14.0_@types+react@19.2._30e1b55107c86a25823f59a01e2da619/node_modules/@mui/icons-material/esm/Menu.js","../../../node_modules/.pnpm/@mui+icons-material@7.3.7_@mui+material@7.3.7_@emotion+react@11.14.0_@types+react@19.2._30e1b55107c86a25823f59a01e2da619/node_modules/@mui/icons-material/esm/KeyboardArrowRight.js","../../../packages/app-core/src/ui/App/DockviewContext.tsx","../../../packages/app-core/src/ui/App/ClassicViewsContainer.tsx"],"sourcesContent":["import { makeStyles } from '@jbrowse/core/util/tss-react'\nimport AddIcon from '@mui/icons-material/Add'\nimport CloseIcon from '@mui/icons-material/Close'\nimport MinimizeIcon from '@mui/icons-material/Minimize'\nimport { IconButton } from '@mui/material'\nimport { observer } from 'mobx-react'\n\nimport type { IBaseViewModel } from '@jbrowse/core/pluggableElementTypes/models'\n\nconst useStyles = makeStyles()(theme => ({\n  icon: {\n    color: theme.palette.secondary.contrastText,\n  },\n}))\n\nconst ViewButtons = observer(function ViewButtons({\n  view,\n  onClose,\n  onMinimize,\n}: {\n  view: IBaseViewModel\n  onClose: () => void\n  onMinimize: () => void\n}) {\n  const { classes } = useStyles()\n  return (\n    <>\n      <IconButton data-testid=\"minimize_view\" onClick={onMinimize}>\n        {view.minimized ? (\n          <AddIcon className={classes.icon} fontSize=\"small\" />\n        ) : (\n          <MinimizeIcon className={classes.icon} fontSize=\"small\" />\n        )}\n      </IconButton>\n      <IconButton data-testid=\"close_view\" onClick={onClose}>\n        <CloseIcon className={classes.icon} fontSize=\"small\" />\n      </IconButton>\n    </>\n  )\n})\n\nexport default ViewButtons\n","import EditableTypography from '@jbrowse/core/ui/EditableTypography'\nimport { getSession } from '@jbrowse/core/util'\nimport { makeStyles } from '@jbrowse/core/util/tss-react'\nimport { Tooltip } from '@mui/material'\nimport { observer } from 'mobx-react'\n\nimport type { IBaseViewModel } from '@jbrowse/core/pluggableElementTypes'\n\nconst useStyles = makeStyles()(theme => ({\n  input: {\n    paddingBottom: 0,\n    paddingTop: 2,\n  },\n  inputBase: {\n    color: theme.palette.secondary.contrastText,\n  },\n  inputRoot: {\n    '&:hover': {\n      backgroundColor: theme.palette.secondary.light,\n    },\n  },\n  inputFocused: {\n    borderColor: theme.palette.primary.main,\n    backgroundColor: theme.palette.secondary.light,\n  },\n}))\nconst ViewContainerTitle = observer(function ViewContainerTitle({\n  view,\n}: {\n  view: IBaseViewModel\n}) {\n  const { classes } = useStyles()\n  const { assemblyManager } = getSession(view)\n  return (\n    <Tooltip title=\"Rename view\" arrow>\n      <EditableTypography\n        value={\n          view.displayName ||\n          // @ts-expect-error\n          `${view.assemblyNames?.map(r => assemblyManager.get(r)?.displayName).join(',') || 'Untitled view'}${\n            view.minimized ? ' (minimized)' : ''\n          }`\n        }\n        setValue={val => {\n          view.setDisplayName(val)\n        }}\n        variant=\"body2\"\n        classes={{\n          input: classes.input,\n          inputBase: classes.inputBase,\n          inputRoot: classes.inputRoot,\n          inputFocused: classes.inputFocused,\n        }}\n      />\n    </Tooltip>\n  )\n})\n\nexport default ViewContainerTitle\n","import { CascadingMenuButton } from '@jbrowse/core/ui'\nimport { getSession } from '@jbrowse/core/util'\nimport { getSnapshot } from '@jbrowse/mobx-state-tree'\nimport ContentCopyIcon from '@mui/icons-material/ContentCopy'\nimport KeyboardArrowDownIcon from '@mui/icons-material/KeyboardArrowDown'\nimport KeyboardArrowUpIcon from '@mui/icons-material/KeyboardArrowUp'\nimport KeyboardDoubleArrowDownIcon from '@mui/icons-material/KeyboardDoubleArrowDown'\nimport KeyboardDoubleArrowUpIcon from '@mui/icons-material/KeyboardDoubleArrowUp'\nimport MenuIcon from '@mui/icons-material/Menu'\nimport OpenInNewIcon from '@mui/icons-material/OpenInNew'\nimport VerticalSplitIcon from '@mui/icons-material/VerticalSplit'\nimport { observer } from 'mobx-react'\n\nimport { useDockview } from './DockviewContext.tsx'\nimport { renameIds } from './copyView.ts'\nimport { isSessionWithDockviewLayout } from '../../DockviewLayout/index.ts'\n\nimport type { IBaseViewModel } from '@jbrowse/core/pluggableElementTypes/models'\nimport type { AbstractSessionModel } from '@jbrowse/core/util'\nimport type {\n  IconButtonProps as IconButtonPropsType,\n  SvgIconProps,\n} from '@mui/material'\n\nfunction getPanelViewCount(session: unknown, viewId: string) {\n  if (!isSessionWithDockviewLayout(session)) {\n    return 0\n  }\n  for (const viewIds of session.panelViewAssignments.values()) {\n    if (viewIds.includes(viewId)) {\n      return viewIds.length\n    }\n  }\n  return 0\n}\n\nconst ViewMenu = observer(function ViewMenu({\n  model,\n  IconProps,\n}: {\n  model: IBaseViewModel\n  IconButtonProps?: IconButtonPropsType\n  IconProps: SvgIconProps\n}) {\n  const session = getSession(model) as AbstractSessionModel & {\n    moveViewDown: (arg: string) => void\n    moveViewUp: (arg: string) => void\n    moveViewToBottom: (arg: string) => void\n    moveViewToTop: (arg: string) => void\n    moveViewUpInPanel: (arg: string) => void\n    moveViewDownInPanel: (arg: string) => void\n    moveViewToTopInPanel: (arg: string) => void\n    moveViewToBottomInPanel: (arg: string) => void\n    useWorkspaces: boolean\n    setUseWorkspaces: (arg: boolean) => void\n  }\n\n  const { moveViewToNewTab, moveViewToSplitRight } = useDockview()\n  const usePanel = session.useWorkspaces && isSessionWithDockviewLayout(session)\n  const viewCount = usePanel\n    ? getPanelViewCount(session, model.id)\n    : session.views.length\n\n  const moveView = (\n    panelFn: (id: string) => void,\n    sessionFn: (id: string) => void,\n  ) => {\n    if (usePanel) {\n      panelFn(model.id)\n    } else {\n      sessionFn(model.id)\n    }\n  }\n\n  return (\n    <CascadingMenuButton\n      data-testid=\"view_menu_icon\"\n      menuItems={() => [\n        {\n          label: 'View options',\n          type: 'subMenu' as const,\n          subMenu: [\n            {\n              label: 'Copy view',\n              icon: ContentCopyIcon,\n              onClick: () => {\n                session.addView(\n                  model.type,\n                  renameIds(\n                    structuredClone(\n                      // @ts-expect-error\n                      getSnapshot(model) as Record<string, unknown>,\n                    ),\n                  ),\n                )\n              },\n            },\n            {\n              label: 'Move to new tab',\n              icon: OpenInNewIcon,\n              onClick: () => {\n                moveViewToNewTab(model.id)\n                session.setUseWorkspaces(true)\n              },\n            },\n            {\n              label: 'Move to split view (right side of screen)',\n              icon: VerticalSplitIcon,\n              onClick: () => {\n                moveViewToSplitRight(model.id)\n                session.setUseWorkspaces(true)\n              },\n            },\n            ...(viewCount > 2\n              ? [\n                  {\n                    label: 'Move view to top',\n                    icon: KeyboardDoubleArrowUpIcon,\n                    onClick: () => {\n                      moveView(\n                        session.moveViewToTopInPanel,\n                        session.moveViewToTop,\n                      )\n                    },\n                  },\n                ]\n              : []),\n            ...(viewCount > 1\n              ? [\n                  {\n                    label: 'Move view up',\n                    icon: KeyboardArrowUpIcon,\n                    onClick: () => {\n                      moveView(session.moveViewUpInPanel, session.moveViewUp)\n                    },\n                  },\n                  {\n                    label: 'Move view down',\n                    icon: KeyboardArrowDownIcon,\n                    onClick: () => {\n                      moveView(\n                        session.moveViewDownInPanel,\n                        session.moveViewDown,\n                      )\n                    },\n                  },\n                ]\n              : []),\n            ...(viewCount > 2\n              ? [\n                  {\n                    label: 'Move view to bottom',\n                    icon: KeyboardDoubleArrowDownIcon,\n                    onClick: () => {\n                      moveView(\n                        session.moveViewToBottomInPanel,\n                        session.moveViewToBottom,\n                      )\n                    },\n                  },\n                ]\n              : []),\n          ],\n        },\n        ...model.menuItems(),\n      ]}\n    >\n      <MenuIcon {...IconProps} fontSize=\"small\" />\n    </CascadingMenuButton>\n  )\n})\nexport default ViewMenu\n","import { createElementId } from '@jbrowse/core/util/types/mst'\n\nexport function renameIds(\n  obj: Record<string, unknown>,\n): Record<string, unknown> {\n  const idMap = new Map<string, string>()\n\n  function transformIds(value: unknown): unknown {\n    if (value === null || value === undefined) {\n      return value\n    }\n\n    if (Array.isArray(value)) {\n      return value.map(transformIds)\n    }\n\n    if (typeof value === 'object') {\n      const result: Record<string, unknown> = {}\n      for (const [key, val] of Object.entries(value)) {\n        if (key === 'id' && typeof val === 'string') {\n          if (!idMap.has(val)) {\n            idMap.set(val, createElementId())\n          }\n          result[key] = `${val}-${idMap.get(val)}`\n        } else {\n          result[key] = transformIds(val)\n        }\n      }\n      return result\n    }\n\n    return value\n  }\n\n  return transformIds(obj) as Record<string, unknown>\n}\n","import { useEffect, useRef } from 'react'\n\nimport { VIEW_HEADER_HEIGHT } from '@jbrowse/core/ui'\nimport { getSession } from '@jbrowse/core/util'\nimport { cx, makeStyles } from '@jbrowse/core/util/tss-react'\nimport { isSessionWithMultipleViews } from '@jbrowse/product-core'\nimport KeyboardArrowRightIcon from '@mui/icons-material/KeyboardArrowRight'\nimport { observer } from 'mobx-react'\n\nimport ViewButtons from './ViewButtons.tsx'\nimport ViewContainerTitle from './ViewContainerTitle.tsx'\nimport ViewMenu from './ViewMenu.tsx'\n\nimport type { IBaseViewModel } from '@jbrowse/core/pluggableElementTypes/models'\n\nconst useStyles = makeStyles()(theme => ({\n  icon: {\n    color: theme.palette.secondary.contrastText,\n  },\n  grow: {\n    flexGrow: 1,\n  },\n  viewHeader: {\n    display: 'flex',\n    height: VIEW_HEADER_HEIGHT,\n    top: 0,\n    zIndex: 900,\n  },\n  viewTitle: {\n    display: 'flex',\n    alignItems: 'center',\n  },\n}))\n\nconst ViewHeader = observer(function ViewHeader({\n  view,\n  onClose,\n  onMinimize,\n  className,\n}: {\n  view: IBaseViewModel\n  onClose: () => void\n  onMinimize: () => void\n  className?: string\n}) {\n  const { classes } = useStyles()\n  const scrollRef = useRef<HTMLDivElement>(null)\n  const session = getSession(view)\n  let stickyViewHeaders = false\n  if (isSessionWithMultipleViews(session)) {\n    ;({ stickyViewHeaders } = session)\n  }\n\n  // scroll the view into view when first mounted. note: this effect will run\n  // only once, because of the empty array second param\n  useEffect(() => {\n    if (typeof jest === 'undefined') {\n      scrollRef.current?.scrollIntoView({ block: 'center' })\n    }\n  }, [])\n  return (\n    <div\n      ref={scrollRef}\n      className={cx(classes.viewHeader, className)}\n      style={{ position: stickyViewHeaders ? 'sticky' : undefined }}\n    >\n      <ViewMenu model={view} IconProps={{ className: classes.icon }} />\n      <div className={classes.grow} />\n      <div className={classes.viewTitle}>\n        {session.focusedViewId === view.id ? (\n          <KeyboardArrowRightIcon className={classes.icon} fontSize=\"small\" />\n        ) : null}\n        <ViewContainerTitle view={view} />\n      </div>\n      <div className={classes.grow} />\n      <ViewButtons onClose={onClose} onMinimize={onMinimize} view={view} />\n    </div>\n  )\n})\n\nexport default ViewHeader\n","import { Suspense } from 'react'\n\n// ui elements\nimport LoadingEllipses from '@jbrowse/core/ui/LoadingEllipses'\nimport { getEnv } from '@jbrowse/core/util'\nimport { observer } from 'mobx-react'\n\nimport type {\n  AbstractViewModel,\n  SessionWithFocusedViewAndDrawerWidgets,\n} from '@jbrowse/core/util'\n\nconst ViewWrapper = observer(function ViewWrapper({\n  view,\n  session,\n}: {\n  view: AbstractViewModel\n  session: SessionWithFocusedViewAndDrawerWidgets\n}) {\n  const { pluginManager } = getEnv(session)\n  const viewType = pluginManager.getViewType(view.type)\n  if (!viewType) {\n    throw new Error(`unknown view type ${view.type}`)\n  }\n  const { ReactComponent } = viewType\n  if (view.minimized) {\n    return null\n  }\n\n  return (\n    <Suspense fallback={<LoadingEllipses variant=\"h6\" />}>\n      <ReactComponent model={view} session={session} />\n    </Suspense>\n  )\n})\n\nexport default ViewWrapper\n","import { useEffect } from 'react'\n\nimport { useWidthSetter } from '@jbrowse/core/util'\nimport { cx, makeStyles } from '@jbrowse/core/util/tss-react'\nimport { Paper, useTheme } from '@mui/material'\nimport { observer } from 'mobx-react'\n\nimport ViewHeader from './ViewHeader.tsx'\nimport ViewWrapper from './ViewWrapper.tsx'\n\nimport type {\n  AbstractViewModel,\n  SessionWithFocusedViewAndDrawerWidgets,\n} from '@jbrowse/core/util'\n\nconst useStyles = makeStyles()(theme => ({\n  viewContainer: {\n    margin: theme.spacing(0.5),\n    padding: `0 ${theme.spacing(1)} ${theme.spacing(1)}`,\n    overflow: 'clip',\n    // xref https://stackoverflow.com/questions/43909940/why-does-overflowhidden-prevent-positionsticky-from-working\n    // note that contain:paint also seems to work\n  },\n  focusedView: {\n    background: theme.palette.secondary.main,\n  },\n  unfocusedView: {\n    background: theme.palette.secondary.dark,\n  },\n}))\n\nconst ViewContainer = observer(function ViewContainer({\n  view,\n  session,\n}: {\n  view: AbstractViewModel\n  session: SessionWithFocusedViewAndDrawerWidgets\n}) {\n  const theme = useTheme()\n  const ref = useWidthSetter(view, theme.spacing(1))\n  const { classes } = useStyles()\n\n  useEffect(() => {\n    function handleSelectView(e: Event) {\n      if (e.target instanceof Element && ref.current?.contains(e.target)) {\n        session.setFocusedViewId(view.id)\n      }\n    }\n\n    document.addEventListener('mousedown', handleSelectView)\n    document.addEventListener('keydown', handleSelectView)\n    return () => {\n      document.removeEventListener('mousedown', handleSelectView)\n      document.removeEventListener('keydown', handleSelectView)\n    }\n  }, [ref, session, view])\n\n  const backgroundColorClassName =\n    session.focusedViewId === view.id\n      ? classes.focusedView\n      : classes.unfocusedView\n  const viewContainerClassName = cx(\n    classes.viewContainer,\n    backgroundColorClassName,\n  )\n\n  return (\n    <Paper\n      ref={ref}\n      elevation={12}\n      className={viewContainerClassName}\n      data-testid={`view-container-${view.id}`}\n    >\n      <ViewHeader\n        view={view}\n        onClose={() => {\n          session.removeView(view)\n        }}\n        onMinimize={() => {\n          view.setMinimized(!view.minimized)\n        }}\n        className={backgroundColorClassName}\n      />\n      <Paper elevation={0}>\n        <ViewWrapper view={view} session={session} />\n      </Paper>\n    </Paper>\n  )\n})\n\nexport default ViewContainer\n","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M3 15h8v-2H3zm0 4h8v-2H3zm0-8h8V9H3zm0-6v2h8V5zm10 0h8v14h-8z\"\n}), 'VerticalSplit');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z\"\n}), 'Menu');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6z\"\n}), 'KeyboardArrowRight');","import { createContext, useContext } from 'react'\n\nimport type { DockviewApi, DockviewGroupPanel } from 'dockview-react'\n\ninterface DockviewContextValue {\n  api: DockviewApi | null\n  rearrangePanels: (arrange: (api: DockviewApi) => void) => void\n  addEmptyTab: (targetGroup?: DockviewGroupPanel) => void\n  moveViewToNewTab: (viewId: string) => void\n  moveViewToSplitRight: (viewId: string) => void\n}\n\n// Pending action stored when workspaces not yet enabled\nlet pendingMoveAction: {\n  type: 'newTab' | 'splitRight'\n  viewId: string\n} | null = null\n\nexport function peekPendingMoveAction() {\n  return pendingMoveAction\n}\n\nexport function clearPendingMoveAction() {\n  pendingMoveAction = null\n}\n\nexport function getPendingMoveAction() {\n  const action = pendingMoveAction\n  pendingMoveAction = null\n  return action\n}\n\n// Functions to set pending actions (used by default context and for testing)\nexport function setPendingMoveToNewTab(viewId: string) {\n  pendingMoveAction = { type: 'newTab', viewId }\n}\n\nexport function setPendingMoveToSplitRight(viewId: string) {\n  pendingMoveAction = { type: 'splitRight', viewId }\n}\n\nexport const DockviewContext = createContext<DockviewContextValue>({\n  api: null,\n  rearrangePanels: () => {},\n  addEmptyTab: () => {},\n  moveViewToNewTab: setPendingMoveToNewTab,\n  moveViewToSplitRight: setPendingMoveToSplitRight,\n})\n\nexport function useDockview() {\n  return useContext(DockviewContext)\n}\n","import { makeStyles } from '@jbrowse/core/util/tss-react'\nimport { observer } from 'mobx-react'\n\nimport ViewContainer from './ViewContainer.tsx'\n\nimport type { SnackbarMessage } from '@jbrowse/core/ui/SnackbarModel'\nimport type {\n  AbstractViewContainer,\n  SessionWithFocusedViewAndDrawerWidgets,\n} from '@jbrowse/core/util'\n\nconst useStyles = makeStyles()({\n  container: {\n    height: '100%',\n    width: '100%',\n    gridRow: 'components',\n    overflowY: 'auto',\n  },\n  spacer: {\n    height: 300,\n  },\n})\n\ntype SessionType = SessionWithFocusedViewAndDrawerWidgets &\n  AbstractViewContainer & {\n    renameCurrentSession: (arg: string) => void\n    snackbarMessages: SnackbarMessage[]\n    popSnackbarMessage: () => unknown\n  }\n\ninterface Props {\n  session: SessionType\n}\n\nconst ClassicViewsContainer = observer(function ClassicViewsContainer({\n  session,\n}: Props) {\n  const { classes } = useStyles()\n  const { views } = session\n\n  return (\n    <div className={classes.container}>\n      {views.map(view => (\n        <ViewContainer key={view.id} view={view} session={session} />\n      ))}\n      <div className={classes.spacer} />\n    </div>\n  )\n})\n\nexport default ClassicViewsContainer\n"],"names":["useStyles","makeStyles","theme","icon","color","palette","secondary","contrastText","observer","view","onClose","onMinimize","classes","_jsxs","_Fragment","children","_jsx","IconButton","onClick","minimized","AddIcon","className","fontSize","MinimizeIcon","CloseIcon","input","paddingBottom","paddingTop","inputBase","inputRoot","backgroundColor","light","inputFocused","borderColor","primary","main","assemblyManager","getSession","Tooltip","title","arrow","EditableTypography","value","displayName","assemblyNames","map","r","get","join","setValue","val","setDisplayName","variant","model","IconProps","session","moveViewToNewTab","moveViewToSplitRight","useDockview","usePanel","useWorkspaces","isSessionWithDockviewLayout","viewCount","viewId","viewIds","panelViewAssignments","values","includes","length","getPanelViewCount","id","views","moveView","panelFn","sessionFn","CascadingMenuButton","menuItems","label","type","subMenu","ContentCopyIcon","addView","obj","idMap","Map","transformIds","Array","isArray","result","key","Object","entries","has","set","createElementId","renameIds","structuredClone","getSnapshot","OpenInNewIcon","setUseWorkspaces","VerticalSplitIcon","KeyboardDoubleArrowUpIcon","moveViewToTopInPanel","moveViewToTop","KeyboardArrowUpIcon","moveViewUpInPanel","moveViewUp","KeyboardArrowDownIcon","moveViewDownInPanel","moveViewDown","KeyboardDoubleArrowDownIcon","moveViewToBottomInPanel","moveViewToBottom","MenuIcon","grow","flexGrow","viewHeader","display","height","VIEW_HEADER_HEIGHT","top","zIndex","viewTitle","alignItems","scrollRef","useRef","stickyViewHeaders","isSessionWithMultipleViews","useEffect","jest","current","scrollIntoView","block","ref","cx","style","position","undefined","ViewMenu","focusedViewId","KeyboardArrowRightIcon","ViewContainerTitle","ViewButtons","pluginManager","getEnv","viewType","getViewType","Error","ReactComponent","Suspense","fallback","LoadingEllipses","viewContainer","margin","spacing","padding","overflow","focusedView","background","unfocusedView","dark","useTheme","useWidthSetter","handleSelectView","e","target","Element","contains","setFocusedViewId","document","addEventListener","removeEventListener","backgroundColorClassName","viewContainerClassName","Paper","elevation","ViewHeader","removeView","setMinimized","ViewWrapper","createSvgIcon","d","pendingMoveAction","peekPendingMoveAction","clearPendingMoveAction","DockviewContext","createContext","api","rearrangePanels","addEmptyTab","useContext","container","width","gridRow","overflowY","spacer","ViewContainer"],"ignoreList":[],"sourceRoot":""}