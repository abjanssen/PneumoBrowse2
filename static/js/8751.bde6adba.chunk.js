"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[8751],{36157:(e,n,t)=>{t.d(n,{A:()=>C});var o=t(67758),l=t(7552),s=t(84340),r=t(95054),c=t(48768),i=t(87626),a=t(59130),d=t(89870),u=t(41450),m=t(68446),h=t(21254),f=t.n(h),x=t(75785),p=t(69500);const j=(0,x.n9)()(e=>({closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}));function g(e){const n=(0,o.c)(2),t=(0,l.useRef)(null);let s;return n[0]!==e?(s=(0,p.jsx)(f(),{nodeRef:t,cancel:'[class*="MuiDialogContent-root"]',onStart:b,children:(0,p.jsx)(r.A,{ref:t,...e})}),n[0]=e,n[1]=s):s=n[1],s}function b(e){return`${e.target?.className}`.includes("MuiDialogTitle")}const C=(0,m.observer)(function(e){const{classes:n}=j(),{title:t,children:o,onClose:l}=e;return(0,p.jsx)(c.A,{...e,PaperComponent:g,children:(0,p.jsxs)(i.A,{children:[(0,p.jsxs)(a.A,{style:{cursor:"move"},children:[t,l?(0,p.jsx)(d.A,{className:n.closeButton,onClick:()=>{l()},children:(0,p.jsx)(s.A,{})}):null]}),(0,p.jsx)(u.A,{}),o]})})})},38751:(e,n,t)=>{t.r(n),t.d(n,{default:()=>U});var o=t(67758),l=t(7552),s=t(36157),r=t(99546),c=t(76218),i=t(69092),a=t(30698),d=t(75785),u=t(67112),m=t(61282),h=t(93062),f=t(69500);const x=(0,d.n9)()({textAreaFont:{fontFamily:"Courier New"}});function p(e){const n=(0,o.c)(29),{onClose:t,currLayout:s}=e,{classes:r}=x(),[d,p]=(0,l.useState)(""),[A,v]=(0,l.useState)();let y,k,_,M,F,H,N,L,O,T,E;return n[0]===Symbol.for("react.memo_cache_sentinel")?(y=(0,f.jsx)(m.A,{children:'Paste CSV or TSV. If a header column is present. First line is a header. If a column called "name" is present, it uses that to connect to IDs in the table, otherwise it uses the first column no.'}),n[0]=y):y=n[0],n[1]!==A?(k=A?(0,f.jsx)(u.ErrorMessage,{error:A}):null,n[1]=A,n[2]=k):k=n[2],n[3]===Symbol.for("react.memo_cache_sentinel")?(_=e=>{p(e.target.value)},n[3]=_):_=n[3],n[4]!==r.textAreaFont?(M={input:{classes:{input:r.textAreaFont}}},n[4]=r.textAreaFont,n[5]=M):M=n[5],n[6]!==M||n[7]!==d?(F=(0,f.jsx)(h.A,{variant:"outlined",multiline:!0,minRows:5,placeholder:"name,population\nHG00098,GBR\nHG00101,GBR\nHG00459,CHS\n...",maxRows:10,fullWidth:!0,value:d,onChange:_,slotProps:M}),n[6]=M,n[7]=d,n[8]=F):F=n[8],n[9]!==k||n[10]!==F?(H=(0,f.jsxs)(c.A,{children:[y,k,F]}),n[9]=k,n[10]=F,n[11]=H):H=n[11],n[12]!==s||n[13]!==t||n[14]!==d?(N=(0,f.jsx)(i.A,{variant:"contained",color:"secondary",onClick:()=>{const e=d.split("\n").map(S).filter(w),n=e[0].split(/[,\t]/gm);if(n.includes("name")){v("");const o=Object.fromEntries(s.map(C)),l=Object.fromEntries(e.slice(1).map(e=>{const t=e.split(/[,\t]/gm),l=Object.fromEntries(t.map((e,t)=>[n[t],e]));return[l.name,{...l,...o[l.name]}]}));t(s.map(e=>({...e,...l[e.name]})))}else v(new Error('No "name" column found on line 1'))},children:"Update rows"}),n[12]=s,n[13]=t,n[14]=d,n[15]=N):N=n[15],n[16]!==s||n[17]!==t||n[18]!==d?(L=(0,f.jsx)(i.A,{variant:"contained",color:"primary",onClick:()=>{const e=d.split("\n").map(b).filter(g),n=e[0].split(/[,\t]/gm);if(n.includes("name")){v("");const o=Object.fromEntries(s.map(j)),l=Object.fromEntries(e.slice(1).map(e=>{const t=e.split(/[,\t]/gm),l=Object.fromEntries(t.map((e,t)=>[n[t],e]));return[l.name,{...l,...o[l.name]}]}));t(s.map(e=>({...l[e.name]})))}else v(new Error('No "name" column found on line 1'))},children:"Replace rows"}),n[16]=s,n[17]=t,n[18]=d,n[19]=L):L=n[19],n[20]!==t?(O=(0,f.jsx)(i.A,{variant:"contained",color:"inherit",onClick:()=>{t()},children:"Cancel"}),n[20]=t,n[21]=O):O=n[21],n[22]!==N||n[23]!==L||n[24]!==O?(T=(0,f.jsxs)(a.A,{children:[N,L,O]}),n[22]=N,n[23]=L,n[24]=O,n[25]=T):T=n[25],n[26]!==T||n[27]!==H?(E=(0,f.jsxs)(f.Fragment,{children:[H,T]}),n[26]=T,n[27]=H,n[28]=E):E=n[28],E}function j(e){return[e.name,e]}function g(e){return!!e}function b(e){return e.trim()}function C(e){return[e.name,e]}function w(e){return!!e}function S(e){return e.trim()}function A(){const e=(0,o.c)(1);let n;return e[0]===Symbol.for("react.memo_cache_sentinel")?(n=(0,f.jsxs)(f.Fragment,{children:["Helpful tips",(0,f.jsxs)("ul",{children:[(0,f.jsx)("li",{children:"You can select rows in the table with the checkboxes"}),(0,f.jsx)("li",{children:"Multi-select is enabled with shift-click and control-click"}),(0,f.jsx)("li",{children:'The "Move selected items up/down" can re-arrange subtracks'}),(0,f.jsx)("li",{children:"Sorting the data grid itself can also re-arrange subtracks"}),(0,f.jsx)("li",{children:"Changes are applied when you hit Submit"}),(0,f.jsx)("li",{children:"You can click and drag the dialog box to move it on the screen"}),(0,f.jsx)("li",{children:"Columns in the table can be hidden using a vertical '...' menu on the right side of each column"})]})]}),e[0]=n):n=e[0],n}var v=t(40898),y=t(42268);function k(e){const n=(0,o.c)(12),{setCurrLayout:t,currLayout:l}=e;let s,r,c,a;return n[0]!==l[0]?(s=Object.keys(l[0]??[]).filter(H),n[0]=l[0],n[1]=s):s=n[1],n[2]!==l||n[3]!==t||n[4]!==s?(r=s.map(e=>(0,f.jsx)(i.A,{variant:"contained",color:"inherit",onClick:()=>{const n=new Map;for(const t of l){const o=n.get(t[e]);o?n.set(t[e],o+1):n.set(t[e],1)}const o=Object.fromEntries([...n.entries()].sort(F).map(M));t(l.map(n=>({...n,color:o[n[e]]})))},children:e},e)),n[2]=l,n[3]=t,n[4]=s,n[5]=r):r=n[5],n[6]!==l||n[7]!==t?(c=(0,f.jsx)(i.A,{onClick:()=>{t(l.map(_))},children:"Clear colors"}),n[6]=l,n[7]=t,n[8]=c):c=n[8],n[9]!==r||n[10]!==c?(a=(0,f.jsxs)("div",{children:["Create color palette based on...",r,c]}),n[9]=r,n[10]=c,n[11]=a):a=n[11],a}function _(e){return{...e,color:void 0}}function M(e,n){return[e[0],v.set1[n]||(0,y.XL)(e[0])]}function F(e,n){return e[1]-n[1]}function H(e){return"name"!==e&&"color"!==e&&"label"!==e&&"id"!==e&&"HP"!==e}var N=t(66395),L=t(25126);const O=(0,d.n9)()({cell:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}});function T(e){const n=(0,o.c)(34),{rows:t,onChange:s,setSelected:c}=e,{classes:i}=O();let a,d;if(n[0]!==t[0]){const{id:e,name:o,label:l,color:s,baseUri:r,HP:c,...i}=t[0];a=i,n[0]=t[0],n[1]=a}else a=n[1];n[2]===Symbol.for("react.memo_cache_sentinel")?(d={idx:0,field:null},n[2]=d):d=n[2];const[m,h]=(0,l.useState)(d);let x,p,j,g,b,C,w,S,A,v,y;return n[3]===Symbol.for("react.memo_cache_sentinel")?(x={height:400,width:"100%"},n[3]=x):x=n[3],n[4]!==c?(p=e=>{c([...e.ids])},n[4]=c,n[5]=p):p=n[5],n[6]!==s||n[7]!==t?(j={field:"color",headerName:"Color",renderCell:e=>{const{value:n,id:o}=e;return(0,f.jsx)(N.Ay,{color:n||"blue",onChange:e=>{const n=t.find(e=>e.name===o);n&&(n.color=e),s([...t])}})}},n[6]=s,n[7]=t,n[8]=j):j=n[8],n[9]!==t?(g=(0,r.measureGridWidth)(t.map(E)),n[9]=t,n[10]=g):g=n[10],n[11]!==g?(b={field:"label",headerName:"Name",width:g},n[11]=g,n[12]=b):b=n[12],n[13]!==a?(C=Object.keys(a),n[13]=a,n[14]=C):C=n[14],n[15]!==i||n[16]!==t||n[17]!==C?(w=C.map(e=>({field:e,renderCell:e=>{const{value:n}=e;return(0,f.jsx)("div",{className:i.cell,children:(0,f.jsx)(u.SanitizedHTML,{html:(0,r.getStr)(n)})})},width:(0,r.measureGridWidth)(t.map(n=>`${n[e]}`))})),n[15]=i,n[16]=t,n[17]=C,n[18]=w):w=n[18],n[19]!==j||n[20]!==b||n[21]!==w?(S=[j,b,...w],n[19]=j,n[20]=b,n[21]=w,n[22]=S):S=n[22],n[23]===Symbol.for("react.memo_cache_sentinel")?(A=[],n[23]=A):A=n[23],n[24]!==m.field||n[25]!==m.idx||n[26]!==s||n[27]!==t?(v=e=>{const n=e[0],o=(m.idx+1)%2,l=n.field||m.field;h({idx:o,field:l}),s(l?[...t].sort((e,n)=>{const t=(0,r.getStr)(e[l]),s=(0,r.getStr)(n[l]);return 1===o?t.localeCompare(s):s.localeCompare(t)}):t)},n[24]=m.field,n[25]=m.idx,n[26]=s,n[27]=t,n[28]=v):v=n[28],n[29]!==t||n[30]!==v||n[31]!==p||n[32]!==S?(y=(0,f.jsx)("div",{style:x,children:(0,f.jsx)(L.z,{checkboxSelection:!0,disableRowSelectionOnClick:!0,onRowSelectionModelChange:p,rows:t,rowHeight:25,columnHeaderHeight:33,columns:S,sortModel:A,onSortModelChange:v})}),n[29]=t,n[30]=v,n[31]=p,n[32]=S,n[33]=y):y=n[33],y}function E(e){return e.label}var R=t(5986),G=t(85179),B=t(85161),I=t(11496);function P(e,n,t=1){const o=n.map(n=>e.findIndex(e=>e.name===n)).sort((e,n)=>e-n);let l=0;for(const n of o){const o=Math.max(l,n-t);o>=l&&e.splice(o,0,e.splice(n,1)[0]),l+=1}return e}function W(e,n,t=1){const o=n.map(n=>e.findIndex(e=>e.name===n)).sort((e,n)=>n-e);let l=e.length-1;for(const n of o){const o=Math.min(l,n+t);o<=l&&e.splice(o,0,e.splice(n,1)[0]),l-=1}return e}function D(e){const n=(0,o.c)(55),{selected:t,onChange:s,rows:r,showTips:c}=e,[a,d]=(0,l.useState)(null),[u,m]=(0,l.useState)("blue"),h=!t.length;let x,p,j;n[0]===Symbol.for("react.memo_cache_sentinel")?(x=e=>{d(e.currentTarget)},n[0]=x):x=n[0],n[1]!==h?(p=(0,f.jsx)(i.A,{disabled:h,onClick:x,children:"Change color of selected items"}),n[1]=h,n[2]=p):p=n[2],n[3]!==s||n[4]!==r||n[5]!==t?(j=()=>{s(P([...r],t))},n[3]=s,n[4]=r,n[5]=t,n[6]=j):j=n[6];const g=!t.length;let b;n[7]===Symbol.for("react.memo_cache_sentinel")?(b=(0,f.jsx)(G.A,{}),n[7]=b):b=n[7];const C=c?"Move selected items up":null;let w,S;n[8]!==j||n[9]!==g||n[10]!==C?(w=(0,f.jsxs)(i.A,{onClick:j,disabled:g,children:[b,C]}),n[8]=j,n[9]=g,n[10]=C,n[11]=w):w=n[11],n[12]!==s||n[13]!==r||n[14]!==t?(S=()=>{s(W([...r],t))},n[12]=s,n[13]=r,n[14]=t,n[15]=S):S=n[15];const A=!t.length;let v;n[16]===Symbol.for("react.memo_cache_sentinel")?(v=(0,f.jsx)(R.A,{}),n[16]=v):v=n[16];const y=c?"Move selected items down":null;let k,_;n[17]!==A||n[18]!==y||n[19]!==S?(k=(0,f.jsxs)(i.A,{onClick:S,disabled:A,children:[v,y]}),n[17]=A,n[18]=y,n[19]=S,n[20]=k):k=n[20],n[21]!==s||n[22]!==r||n[23]!==t?(_=()=>{s(P([...r],t,r.length))},n[21]=s,n[22]=r,n[23]=t,n[24]=_):_=n[24];const M=!t.length;let F;n[25]===Symbol.for("react.memo_cache_sentinel")?(F=(0,f.jsx)(I.A,{}),n[25]=F):F=n[25];const H=c?"Move selected items to top":null;let L,O;n[26]!==_||n[27]!==M||n[28]!==H?(L=(0,f.jsxs)(i.A,{onClick:_,disabled:M,children:[F,H]}),n[26]=_,n[27]=M,n[28]=H,n[29]=L):L=n[29],n[30]!==s||n[31]!==r||n[32]!==t?(O=()=>{s(W([...r],t,r.length))},n[30]=s,n[31]=r,n[32]=t,n[33]=O):O=n[33];const T=!t.length;let E;n[34]===Symbol.for("react.memo_cache_sentinel")?(E=(0,f.jsx)(B.A,{}),n[34]=E):E=n[34];const D=c?"Move selected items to bottom":null;let $,z,U,V,X;return n[35]!==O||n[36]!==T||n[37]!==D?($=(0,f.jsxs)(i.A,{onClick:O,disabled:T,children:[E,D]}),n[35]=O,n[36]=T,n[37]=D,n[38]=$):$=n[38],n[39]!==s||n[40]!==r||n[41]!==t?(z=e=>{m(e);for(const n of t){const t=r.find(e=>e.name===n);t&&(t.color=e)}s([...r])},n[39]=s,n[40]=r,n[41]=t,n[42]=z):z=n[42],n[43]===Symbol.for("react.memo_cache_sentinel")?(U=()=>{d(null)},n[43]=U):U=n[43],n[44]!==a||n[45]!==z||n[46]!==u?(V=(0,f.jsx)(N.FO,{anchorEl:a,color:u,onChange:z,onClose:U}),n[44]=a,n[45]=z,n[46]=u,n[47]=V):V=n[47],n[48]!==k||n[49]!==L||n[50]!==$||n[51]!==V||n[52]!==p||n[53]!==w?(X=(0,f.jsxs)(f.Fragment,{children:[p,w,k,L,$,V]}),n[48]=k,n[49]=L,n[50]=$,n[51]=V,n[52]=p,n[53]=w,n[54]=X):X=n[54],X}const $=function(e){const n=(0,o.c)(12),{rows:t,onChange:s,showTips:r}=e;let c;n[0]===Symbol.for("react.memo_cache_sentinel")?(c=[],n[0]=c):c=n[0];const[i,a]=(0,l.useState)(c);let d,u,m;return n[1]!==s||n[2]!==t||n[3]!==i||n[4]!==r?(d=(0,f.jsx)(D,{selected:i,rows:t,showTips:r,onChange:s}),n[1]=s,n[2]=t,n[3]=i,n[4]=r,n[5]=d):d=n[5],n[6]!==s||n[7]!==t?(u=t.length?(0,f.jsx)(T,{rows:t,onChange:s,setSelected:a}):(0,f.jsx)("div",{children:"No rows"}),n[6]=s,n[7]=t,n[8]=u):u=n[8],n[9]!==d||n[10]!==u?(m=(0,f.jsxs)("div",{children:[d,u]}),n[9]=d,n[10]=u,n[11]=m):m=n[11],m},z=(0,d.n9)()({content:{minWidth:800},fr:{float:"right",display:"flex",gap:8},textAreaFont:{fontFamily:"Courier New"}});function U(e){const n=(0,o.c)(13),{model:t,handleClose:d}=e,{classes:u}=z(),{sources:m}=t,[h,x]=(0,l.useState)(!1);let j;n[0]!==m?(j=m||[],n[0]=m,n[1]=j):j=n[1];const[g,b]=(0,l.useState)(j),[C,w]=(0,r.useLocalStorage)("multivariant-showTips",!1);let S,v;return n[2]!==u||n[3]!==g||n[4]!==d||n[5]!==t||n[6]!==w||n[7]!==h||n[8]!==C?(S=h?(0,f.jsx)(p,{currLayout:g,onClose:e=>{e&&b(e),x(!1)}}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(c.A,{className:u.content,children:[(0,f.jsxs)("div",{className:u.fr,children:[(0,f.jsx)(i.A,{variant:"contained",onClick:()=>{w(!C)},children:C?"Hide tips":"Show tips"}),(0,f.jsx)(i.A,{color:"secondary",variant:"contained",onClick:()=>{x(!h)},children:"Show Bulk row editor"})]}),C?(0,f.jsx)(A,{}):null,(0,f.jsx)("br",{}),(0,f.jsx)(k,{currLayout:g,setCurrLayout:b}),(0,f.jsx)($,{rows:g,onChange:b,showTips:C})]}),(0,f.jsxs)(a.A,{children:[(0,f.jsx)(i.A,{variant:"contained",type:"submit",color:"inherit",onClick:()=>{t.clearLayout(),b(t.sources||[])},children:"Clear custom settings"}),(0,f.jsx)(i.A,{variant:"contained",color:"secondary",onClick:()=>{d(),b([...t.sources||[]])},children:"Cancel"}),(0,f.jsx)(i.A,{variant:"contained",color:"primary",type:"submit",onClick:()=>{t.setLayout(g),d()},children:"Submit"})]})]}),n[2]=u,n[3]=g,n[4]=d,n[5]=t,n[6]=w,n[7]=h,n[8]=C,n[9]=S):S=n[9],n[10]!==d||n[11]!==S?(v=(0,f.jsx)(s.A,{open:!0,onClose:d,maxWidth:"xl",title:"Multi-sample variant display - Color/arrangement editor",children:S}),n[10]=d,n[11]=S,n[12]=v):v=n[12],v}},42268:(e,n,t)=>{function o(e){let n=0;for(let t=0;t<e.length;t++)n+=e.charCodeAt(t);return l(10*n)}function l(e){return`hsl(${e%255}, 50%, 50%)`}t.d(n,{XL:()=>o,qH:()=>l})}}]);
//# sourceMappingURL=8751.bde6adba.chunk.js.map