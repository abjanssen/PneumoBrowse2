"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[965,7083],{35300:(e,t,n)=>{n.r(t),n.d(t,{default:()=>N});var a=n(7552),r=n(503),o=n.n(r),i=n(1178),s=n(99546),l=n(75785),c=n(75459),d=n(76157),m=n(33371),u=n(32808),f=n(36715),p=n(36441),g=n(49823);const b=(0,l.n9)()((e=>({margin:{marginBottom:e.spacing(4)},cell:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}})));function v({value:e,prefix:t,name:n}){const{classes:r}=b(),[o,i]=(0,a.useState)(!1),l=Object.keys(e[0]).sort(),v=new Set(l),h=Object.entries(e).map((([e,t])=>{const{id:n,...a}=t;return{id:e,identifier:n,...a}}));for(const t of e)for(const e of Object.keys(t))v.add(e);let x;v.has("id")?(v.delete("id"),x=["identifier",...v]):x=[...v];const E=x.map((e=>(0,s.measureGridWidth)(h.map((t=>t[e])))));return v.size<l.length+5?a.createElement("div",{className:r.margin},a.createElement(p.A,{prefix:t,name:n}),a.createElement(m.A,{control:a.createElement(u.A,{checked:o,onChange:e=>{i(e.target.checked)}}),label:a.createElement(f.A,{variant:"body2"},"Show options")}),a.createElement(c.z,{autoHeight:!0,disableRowSelectionOnClick:!0,rows:h,rowHeight:20,columnHeaderHeight:35,hideFooter:h.length<25,slots:{toolbar:o?d.O:null},slotProps:{toolbar:{printOptions:{disableToolbarButton:!0}}},columns:x.map(((e,t)=>({field:e,renderCell:e=>{const t=e.value;return a.createElement("div",{className:r.cell},a.createElement(g.SanitizedHTML,{html:(0,s.getStr)(t||"")}))},width:E[t]})))})):null}var h=n(28055);const x=(0,l.n9)()((e=>({field:{display:"flex",flexWrap:"wrap"},fieldSubvalue:{wordBreak:"break-word",maxHeight:300,padding:e.spacing(.5),border:`1px solid ${e.palette.action.selected}`,boxSizing:"border-box",overflow:"auto"}})));function E({name:e,value:t,description:n,prefix:r=[]}){const{classes:i}=x();return 1===t.length?o()(t[0])?a.createElement(N,{attributes:t[0],prefix:[...r,e]}):a.createElement("div",{className:i.field},a.createElement(p.A,{prefix:r,description:n,name:e}),a.createElement(h.A,{value:t[0]})):t.every((e=>o()(e)))?a.createElement(a.Fragment,null,t.map(((t,n)=>a.createElement(N,{key:`${JSON.stringify(t)}-${n}`,attributes:t,prefix:[...r,`${e}-${n}`]})))):a.createElement("div",{className:i.field},a.createElement(p.A,{prefix:r,description:n,name:e}),t.map(((e,t)=>a.createElement("div",{key:`${JSON.stringify(e)}-${t}`,className:i.fieldSubvalue},a.createElement(h.A,{value:e})))))}const A=(0,l.n9)()({field:{display:"flex",flexWrap:"wrap"}});function y({value:e,prefix:t,name:n}){const{classes:r}=A(),{uri:o,baseUri:i=""}=e;let s;try{s=new URL(o,i).href}catch(e){s=o}return a.createElement("div",{className:r.field},a.createElement(p.A,{prefix:t,name:n}),a.createElement(h.A,{value:s}))}var w=n(32106);function S(){return S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},S.apply(null,arguments)}const k=170,C=["__jbrowsefmt","length","position","subfeatures","uniqueId","exonFrames","parentId","thickStart","thickEnd"];function N(e){const{attributes:t,omit:n=[],omitSingleLevel:r=[],descriptions:l,formatter:c=e=>e,hideUris:d,prefix:m=[]}=e,u=new Set([...n,...C,...r]),{__jbrowsefmt:f,...p}=t,g={...p,...f},b=(0,i.kb)(Object.entries(g).filter((([e,t])=>void 0!==t&&!u.has(e))),m);return a.createElement(a.Fragment,null,Object.entries(g).filter((([e,t])=>void 0!==t&&!u.has(e))).map((([t,n])=>{const r=(0,i.wh)([...m,t],l);if(Array.isArray(n))return n.length>1&&n.every((e=>o()(e)))?a.createElement(v,{key:t,name:t,prefix:m,value:n}):a.createElement(E,{key:t,name:t,value:n,description:r,prefix:m});if(o()(n)){const{omitSingleLevel:r,...o}=e;return(0,s.isUriLocation)(n)?d?null:a.createElement(y,{key:t,name:t,prefix:m,value:n}):a.createElement(N,S({key:t},o,{attributes:n,descriptions:l,prefix:[...m,t]}))}return a.createElement(w.A,{key:t,name:t,value:c(n,t),description:r,prefix:m,width:Math.min(b,k)})})))}},87083:(e,t,n)=>{n.r(t),n.d(t,{default:()=>m});var a=n(7552),r=n(63011),o=n(41578),i=n(36715),s=n(63165),l=n(75785),c=n(7720);const d=(0,l.n9)()((e=>({expansionPanelDetails:{display:"block",padding:e.spacing(1)},icon:{color:e.palette.tertiary.contrastText||"#fff"}})));function m({children:e,title:t,defaultExpanded:n=!0}){const{classes:l}=d();return a.createElement(r.A,{defaultExpanded:n},a.createElement(o.A,{expandIcon:a.createElement(c.A,{className:l.icon})},a.createElement(i.A,{variant:"button"},t)),a.createElement(s.A,{className:l.expansionPanelDetails},e))}},28055:(e,t,n)=>{n.d(t,{A:()=>d});var a=n(7552),r=n(75785),o=n(503),i=n.n(o),s=n(87731),l=n(49823);const c=(0,r.n9)()((e=>({fieldValue:{wordBreak:"break-word",maxHeight:300,fontSize:12,padding:e.spacing(.5),overflow:"auto"}})));function d({value:e}){const{classes:t}=c(),n=/^https?:\/\//.exec(`${e}`);return a.createElement("div",{className:t.fieldValue},a.isValidElement(e)?e:n?a.createElement(s.A,{href:`${e}`},`${e}`):a.createElement(l.SanitizedHTML,{html:i()(e)?JSON.stringify(e):String(e)}))}},36441:(e,t,n)=>{n.d(t,{A:()=>i});var a=n(7552),r=n(89003);const o=(0,n(75785).n9)()((e=>({fieldDescription:{"&:hover":{background:"dark"===e.palette.mode?"#e65100":"yellow"}},fieldName:{wordBreak:"break-all",minWidth:90,borderBottom:"1px solid #0003",fontSize:12,background:e.palette.action.disabledBackground,marginRight:e.spacing(1),padding:e.spacing(.5)}})));function i({description:e,name:t,width:n,prefix:i=[]}){const{classes:s,cx:l}=o(),c=[...i,t].join(".");return e?a.createElement(r.A,{title:e,placement:"left"},a.createElement("div",{className:l(s.fieldDescription,s.fieldName)},c)):a.createElement("div",{className:s.fieldName,style:{width:n}},c)}},32106:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(7552),r=n(75785),o=n(36441),i=n(28055);const s=(0,r.n9)()({field:{display:"flex",flexWrap:"wrap"}});function l({name:e,value:t,description:n,prefix:r,width:l}){const{classes:c}=s();return null!=t?a.createElement("div",{className:c.field},a.createElement(o.A,{prefix:r,description:n,name:e,width:l}),a.createElement(i.A,{value:t})):null}},1178:(e,t,n)=>{n.d(t,{Im:()=>s,KS:()=>l,kb:()=>c,wh:()=>d});var a=n(503),r=n.n(a),o=n(99546),i=n(373);function s(e){return 0===Object.keys(e).length}function l(e,t,n){return[(0,i.SX)(`${e||t||""}`),`${n}`].filter((e=>!!e)).join(" - ")}function c(e,t){return Math.ceil((0,o.max)(e.map((e=>(0,o.measureText)([...t,e[0]].join("."),12)))))+10}function d(e,t={}){let n=t;return e.forEach((e=>{r()(n)&&(n=n[e])})),"string"==typeof n?n:r()(n)&&"string"==typeof n.Description?n.Description:void 0}},40965:(e,t,n)=>{n.r(t),n.d(t,{default:()=>k});var a=n(7552),r=n(92562),o=n(99546),i=n(91468),s=n(68446),l=n(33039),c=n.n(l),d=n(31409),m=n.n(d),u=n(5401),f=n(75785),p=n(68584),g=n(35300),b=n(87083),v=n(49823);function h({config:e}){const[t,n]=(0,a.useState)(),[r,i]=(0,a.useState)(),s=(0,o.getSession)(e),{rpcManager:l}=s;(0,a.useEffect)((()=>{(async()=>{try{const t=(0,p.readConfObject)(e,"adapter"),n=await l.call(e.trackId,"CoreGetInfo",{adapterConfig:t});i(n)}catch(e){console.error(e),n(e)}})()}),[e,l]);const c="string"==typeof r?{header:`<pre>${r.replaceAll("<","&lt;").replaceAll(">","&gt;")}</pre>`}:r||{};return a.createElement(b.default,{title:"File info"},t?a.createElement(v.ErrorMessage,{error:t}):void 0===r?a.createElement(v.LoadingEllipses,{message:"Loading file data"}):a.createElement(g.default,{attributes:c}))}var x=n(29499);const E=(0,f.n9)()((e=>({container:{minWidth:800},refNames:{maxHeight:300,overflow:"auto",flexGrow:1,background:e.palette.background.default}}))),A=(0,s.observer)((function({config:e,onClose:t}){const{classes:n}=E(),[r,s]=(0,a.useState)(),[l,c]=(0,a.useState)(),[d,f]=(0,a.useState)(!1),{rpcManager:g}=(0,o.getSession)(e);(0,a.useEffect)((()=>{(async()=>{try{const t=await Promise.all([...new Set((0,i.getConfAssemblyNames)(e))].map((async t=>{const n=(0,p.readConfObject)(e,"adapter");return[t,await g.call(e.trackId,"CoreGetRefNames",{adapterConfig:n,regions:[{assemblyName:t}]})]})));c(Object.fromEntries(t))}catch(e){console.error(e),s(e)}})()}),[e,g]);const b=l?Object.entries(l):[],h=b.flatMap((([e,t])=>[`--- ${e} ---`,...t.slice(0,1e4),t.length>1e4?`\nToo many refNames to show in browser for ${e}, use "Copy ref names" button to copy to clipboard`:""])).filter((e=>!!e)).join("\n");return a.createElement(v.Dialog,{open:!0,title:"Reference sequence names used in track",onClose:t,maxWidth:"xl"},a.createElement(x.A,{className:n.container},r?a.createElement(v.ErrorMessage,{error:r}):void 0===l?a.createElement(v.LoadingEllipses,{message:"Loading refNames"}):a.createElement(a.Fragment,null,a.createElement(u.A,{variant:"contained",onClick:()=>{m()(b.flatMap((([e,t])=>[`--- ${e} ---`,...t])).filter((e=>!!e)).join("\n")),f(!0),setTimeout((()=>{f(!1)}),1e3)}},d?"Copied to clipboard!":"Copy ref names"),a.createElement("pre",{className:n.refNames},h))))})),y=(0,f.n9)()({content:{minWidth:800},button:{float:"right"}});function w(e,t){for(const n in e)n===t?delete e[n]:"object"==typeof e[n]&&w(e[n],t);return e}const S=(0,s.observer)((function({config:e}){const[t,n]=(0,a.useState)(!1),r=(0,p.readConfObject)(e),i=(0,o.getSession)(e),{classes:s}=y(),[l,d]=(0,a.useState)(!1),f=(0,p.getConf)(i,["formatAbout","hideUris"])||(0,p.readConfObject)(e,["formatAbout","hideUris"]),{pluginManager:v}=(0,o.getEnv)(i),x=v.evaluateExtensionPoint("Core-customizeAbout",{config:{...r,...(0,p.getConf)(i,["formatAbout","config"],{config:r}),...(0,p.readConfObject)(e,["formatAbout","config"],{config:r})}},{session:i,config:e}),E=v.evaluateExtensionPoint("Core-extraAboutPanel",null,{session:i,config:e});return a.createElement("div",{className:s.content},a.createElement(b.default,{title:"Configuration"},f?null:a.createElement("span",{className:s.button},a.createElement(u.A,{variant:"contained",color:"secondary",onClick:()=>{d(!0)}},"Show ref names"),a.createElement(u.A,{variant:"contained",onClick:()=>{const e=w(c()(r),"baseUri");m()(JSON.stringify(e,null,2)),n(!0),setTimeout((()=>{n(!1)}),1e3)}},t?"Copied to clipboard!":"Copy config")),a.createElement(g.default,{attributes:x,omit:["displays","baseUri","refNames","formatAbout"],hideUris:f})),E?a.createElement(b.default,{title:E.name},a.createElement(E.Component,{config:e})):null,a.createElement(h,{config:e}),l?a.createElement(A,{config:e,onClose:()=>{d(!1)}}):null)}));function k({config:e,handleClose:t}){const n=(0,o.getSession)(e),s=(0,i.getTrackName)(e,n),{pluginManager:l}=(0,o.getEnv)(n),c=l.evaluateExtensionPoint("Core-replaceAbout",S,{session:n,config:e});return a.createElement(r.A,{open:!0,onClose:t,title:s,maxWidth:"xl"},a.createElement(c,{config:e}))}},7720:(e,t,n)=>{n.d(t,{A:()=>o});var a=n(74893),r=n(69500);const o=(0,a.A)((0,r.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore")},63165:(e,t,n)=>{n.d(t,{A:()=>u});var a=n(7552),r=n(93878),o=n(70799),i=n(51148),s=n(84893),l=n(4785),c=n(79509),d=n(69500);const m=(0,i.Ay)("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(e,t)=>t.root})((0,s.A)((({theme:e})=>({padding:e.spacing(1,2,2)})))),u=a.forwardRef((function(e,t){const n=(0,l.b)({props:e,name:"MuiAccordionDetails"}),{className:a,...i}=n,s=n,u=(e=>{const{classes:t}=e;return(0,o.A)({root:["root"]},c.n,t)})(s);return(0,d.jsx)(m,{className:(0,r.A)(u.root,a),ref:t,ownerState:s,...i})}))},79509:(e,t,n)=>{n.d(t,{A:()=>i,n:()=>o});var a=n(33761),r=n(85693);function o(e){return(0,r.Ay)("MuiAccordionDetails",e)}const i=(0,a.A)("MuiAccordionDetails",["root"])},41578:(e,t,n)=>{n.d(t,{A:()=>x});var a=n(7552),r=n(93878),o=n(70799),i=n(51148),s=n(84893),l=n(4785),c=n(48054),d=n(51132),m=n(33761),u=n(85693);function f(e){return(0,u.Ay)("MuiAccordionSummary",e)}const p=(0,m.A)("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]);var g=n(69500);const b=(0,i.Ay)(c.A,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(e,t)=>t.root})((0,s.A)((({theme:e})=>{const t={duration:e.transitions.duration.shortest};return{display:"flex",minHeight:48,padding:e.spacing(0,2),transition:e.transitions.create(["min-height","background-color"],t),[`&.${p.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${p.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`&:hover:not(.${p.disabled})`]:{cursor:"pointer"},variants:[{props:e=>!e.disableGutters,style:{[`&.${p.expanded}`]:{minHeight:64}}}]}}))),v=(0,i.Ay)("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(e,t)=>t.content})((0,s.A)((({theme:e})=>({display:"flex",flexGrow:1,margin:"12px 0",variants:[{props:e=>!e.disableGutters,style:{transition:e.transitions.create(["margin"],{duration:e.transitions.duration.shortest}),[`&.${p.expanded}`]:{margin:"20px 0"}}}]})))),h=(0,i.Ay)("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(e,t)=>t.expandIconWrapper})((0,s.A)((({theme:e})=>({display:"flex",color:(e.vars||e).palette.action.active,transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),[`&.${p.expanded}`]:{transform:"rotate(180deg)"}})))),x=a.forwardRef((function(e,t){const n=(0,l.b)({props:e,name:"MuiAccordionSummary"}),{children:i,className:s,expandIcon:c,focusVisibleClassName:m,onClick:u,...p}=n,{disabled:x=!1,disableGutters:E,expanded:A,toggle:y}=a.useContext(d.A),w={...n,expanded:A,disabled:x,disableGutters:E},S=(e=>{const{classes:t,expanded:n,disabled:a,disableGutters:r}=e,i={root:["root",n&&"expanded",a&&"disabled",!r&&"gutters"],focusVisible:["focusVisible"],content:["content",n&&"expanded",!r&&"contentGutters"],expandIconWrapper:["expandIconWrapper",n&&"expanded"]};return(0,o.A)(i,f,t)})(w);return(0,g.jsxs)(b,{focusRipple:!1,disableRipple:!0,disabled:x,component:"div","aria-expanded":A,className:(0,r.A)(S.root,s),focusVisibleClassName:(0,r.A)(S.focusVisible,m),onClick:e=>{y&&y(e),u&&u(e)},ref:t,ownerState:w,...p,children:[(0,g.jsx)(v,{className:S.content,ownerState:w,children:i}),c&&(0,g.jsx)(h,{className:S.expandIconWrapper,ownerState:w,children:c})]})}))}}]);
//# sourceMappingURL=965.f18396b3.chunk.js.map