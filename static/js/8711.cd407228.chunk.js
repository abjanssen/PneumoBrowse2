"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[8711],{78711(e,t,o){o.d(t,{renderDensity:()=>i});var r=o(77251),s=o(83640),l=o(16876),a=o(26931),n=o(93925),c=o(27535);async function i(e,t){const{height:o,regions:i,bpPerPx:u,statusCallback:g=()=>{}}=e,f=i[0],d=(f.end-f.start)/u,{reducedFeatures:h,...p}=await(0,r.updateStatus)("Rendering plot",g,()=>(0,s.u)(d,o,e,o=>(0,n.t)(o,{...e,features:t}))),b={...p,features:h.map(c.serializeWiggleFeature),height:o,width:d};return(0,l.lk)(b,(0,a.X)(p))}},93925(e,t,o){o.d(t,{t:()=>a});var r=o(11259),s=o(52901),l=o(27535);function a(e,t){const{features:o,regions:a,bpPerPx:n,scaleOpts:c,height:i,config:u,stopToken:g,lastCheck:f=(0,s.jL)(g)}=t,d=a[0],h=d.start,p=d.end,b=d.reversed,v=1/n,k=(0,r.QZ)(u,"bicolorPivot"),w=(0,r.QZ)(u,"bicolorPivotValue"),C=(0,r.QZ)(u,"negColor"),y=(0,r.QZ)(u,"posColor"),Q=(0,r.QZ)(u,"color"),T=(0,r.QZ)(u,"clipColor"),Z="none"!==k&&"log"!==c.scaleType,P=(0,l.getScale)({...c,pivotValue:Z?w:void 0,range:Z?[C,"#eee",y]:["#eee",y]}),S="#f0f"===Q?(e,t)=>P(t):(e,t)=>(0,r.QZ)(u,"color",{feature:e,score:t}),_=(0,l.getScale)({...c,range:[0,i]}).domain(),m=_[0],F=_[1];let I=Number.NEGATIVE_INFINITY,N=!1;const R=[];for(const t of o.values()){(0,s.As)(f);const o=t.get("start"),r=t.get("end"),l=b?(p-r)*v:(o-h)*v,a=b?(p-o)*v:(r-h)*v;(Math.floor(l)!==Math.floor(I)||a-l>1)&&(R.push(t),I=l);const n=t.get("score");N=N||n>F||n<m;const u=a-l+.3;n>=c.domain[0]?(e.fillStyle=S(t,n),e.fillRect(l,0,u,i)):(e.fillStyle="#eee",e.fillRect(l,0,u,i))}if(e.save(),N){e.fillStyle=T;for(const t of o.values()){(0,s.As)(f);const o=t.get("start"),r=t.get("end"),a=b?(p-r)*v:(o-h)*v,n=(b?(p-o)*v:(r-h)*v)-a+.3,i=t.get("score");(i>F||i<m&&"log"!==c.scaleType)&&(0,l.fillRectCtx)(a,0,n,2,e)}}return e.restore(),{reducedFeatures:R}}}}]);
//# sourceMappingURL=8711.cd407228.chunk.js.map