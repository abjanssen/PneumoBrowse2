"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[1819],{11819:(e,r,t)=>{t.r(r),t.d(r,{default:()=>R});var n=t(67758),s=t(7552),o=t(68446),c=t(99546);const a="rgb(220,220,180)",l="rgba(250,200,200)";function d({str:e,charactersPerRow:r,showCoordinates:t,currRemainder:n=0,spacingInterval:s=10}){const o=Math.ceil(e.length/r),c=new Array(o);let a=n%s,l=0,d=0;for(;l<o+1;++l){const o=0===l?r-n:r,i=e.slice(d,d+o);if(!i)break;c[l]=t?u(i,a,s):i,a=0,d+=o}return{segments:c,remainder:i(c,l,n,r)}}function u(e,r,t){if(!e)return"";let n="";for(let s=0,o=r;s<e.length;s++,o++)o%t===0&&(n+=" ",o=0),n+=e[s];return n}function i(e,r,t,n){return((e.at(-1)?.replaceAll(" ","").length||0)+(r<2?t:0))%n}var m=t(69500);const h=(0,o.observer)(function({chunks:e,start:r,color:t,strand:n=1,coordStart:o=r,model:c}){const{charactersPerRow:a,showCoordinates:l}=c;return e.map((c,d)=>{const u=0===d&&r%a===0||d>0?`${(""+(o-r%a+d*n*a)).padStart(4)}   `:"",i=d===e.length-1&&(e.at(-1)?.replaceAll(" ","").length||0)+(0===d?r%a:0)!==a?null:l?" \n":"";return(0,m.jsxs)(s.Fragment,{children:[l?u:null,(0,m.jsx)("span",{style:{background:t},children:c}),i]},`${c}-${d}`)})}),f=(0,o.observer)(function({utr:e,cds:r,exons:t,sequence:n,upstream:s,downstream:o,feature:c,includeIntrons:u,collapseIntron:i,model:f}){const{upperCaseCDS:g,intronBp:w,charactersPerRow:p,showCoordinates:x,showCoordinatesSetting:b}=f,j=r.length>0,C=(r.length?[...r,...e].sort((e,r)=>e.start-r.start):t).filter(e=>e.start!==e.end),S=e=>g?e.toLowerCase():e,q=e=>g?e.toUpperCase():e,_=-1===c.strand?-1:1,k="genomic"===b&&u&&!i,R=k?_:1;let v=k?_>0?c.start+1-(s?.length||0):c.end+(s?.length||0):0,y=0,P=0,$=null;if(s){const{segments:e,remainder:r}=d({str:S(s),charactersPerRow:p,showCoordinates:x});$=(0,m.jsx)(h,{model:f,color:l,strand:R,start:y,coordStart:v,chunks:e}),P=r,y+=s.length*R,v+=s.length*R}const I=[];for(let e=0;e<C.length;e++){const r=C[e],t=n.slice(r.end,C[e+1]?.start),s=n.slice(r.start,r.end),{segments:o,remainder:c}=d({str:j?"CDS"===r.type?q(s):S(s):q(s),charactersPerRow:p,currRemainder:P,showCoordinates:x});if(I.push((0,m.jsx)(h,{model:f,color:"CDS"===r.type?a:"rgb(200,240,240)",strand:R,start:y,coordStart:v,chunks:o},`${JSON.stringify(r)}-mid`)),P=c,y+=s.length*R,v+=s.length*R,t&&u&&e<C.length-1){const e=S(i&&t.length>2*w?`${t.slice(0,w)}...${t.slice(-w)}`:t),{segments:n,remainder:s}=d({str:e,charactersPerRow:p,currRemainder:P,showCoordinates:x});n.length&&(I.push((0,m.jsx)(h,{model:f,strand:R,coordStart:v,start:y,chunks:n},`${JSON.stringify(r)}-intron`)),P=s,y+=e.length*R,v+=e.length*R)}}let T=null;if(o){const{segments:e}=d({str:S(o),charactersPerRow:p,currRemainder:P,showCoordinates:x});T=(0,m.jsx)(h,{start:y,model:f,strand:R,chunks:e,coordStart:v,color:l})}return(0,m.jsxs)(m.Fragment,{children:[$,I,T]})});var g=t(373);const w=(0,o.observer)(function({cds:e,sequence:r,model:t}){const{charactersPerRow:n,showCoordinates:s}=t,{segments:o}=d({str:(0,g.o9)(e,r),charactersPerRow:n,showCoordinates:s});return(0,m.jsx)(h,{model:t,color:a,chunks:o,start:0})}),p=(0,o.observer)(function({sequence:e,upstream:r,feature:t,downstream:n,model:s}){const{charactersPerRow:o,showCoordinatesSetting:c,showCoordinates:a}=s;let u=0,i=null,f=0;const g=-1===t.strand?-1:1,w="genomic"===c,p=w?g:1;let x=w?g>0?t.start+1-(r?.length||0):t.end+(r?.length||0):0;if(r){const{segments:e,remainder:t}=d({str:r,charactersPerRow:o,showCoordinates:a});i=(0,m.jsx)(h,{model:s,color:l,start:u,coordStart:x,chunks:e}),f=t,u+=r.length*p,x+=r.length*p}const{segments:b,remainder:j}=d({str:e,charactersPerRow:o,showCoordinates:a,currRemainder:f}),C=(0,m.jsx)(h,{model:s,color:"rgb(200,280,200)",start:u,coordStart:x,chunks:b});f=j,u+=e.length*p,x+=e.length*p;let S=null;if(n){const{segments:e}=d({str:n,charactersPerRow:o,currRemainder:f,showCoordinates:a});S=(0,m.jsx)(h,{start:u,model:s,chunks:e,coordStart:x,color:l})}return(0,m.jsxs)(m.Fragment,{children:[i,C,S]})});var x=t(31813);const b=(0,o.observer)(function({cds:e,sequence:r,codonTable:t,model:n}){const{charactersPerRow:s,showCoordinates:o}=n,c=(0,x.E)({cds:e,sequence:r,codonTable:t}),{segments:a}=d({str:c,charactersPerRow:s,showCoordinates:o});return(0,m.jsx)(h,{model:n,color:"rgb(220,160,220)",chunks:a,start:0})});var j=t(24499);function C(e){const r=(0,n.c)(59),{mode:t,feature:s,model:o,sequenceData:a}=e,{seq:l,upstream:d,downstream:u,cds:i,exons:h,utr:g}=a;switch(t){case"genomic":{let e;return r[0]!==s||r[1]!==o||r[2]!==l?(e=(0,m.jsx)(p,{feature:s,model:o,sequence:l}),r[0]=s,r[1]=o,r[2]=l,r[3]=e):e=r[3],e}case"genomic_sequence_updownstream":{let e;return r[4]!==u||r[5]!==s||r[6]!==o||r[7]!==l||r[8]!==d?(e=(0,m.jsx)(p,{model:o,feature:s,sequence:l,upstream:d,downstream:u}),r[4]=u,r[5]=s,r[6]=o,r[7]=l,r[8]=d,r[9]=e):e=r[9],e}case"cds":{let e;return r[10]!==i||r[11]!==o||r[12]!==l?(e=(0,m.jsx)(w,{model:o,cds:i,sequence:l}),r[10]=i,r[11]=o,r[12]=l,r[13]=e):e=r[13],e}case"cdna":{let e;return r[14]!==i||r[15]!==h||r[16]!==s||r[17]!==o||r[18]!==l||r[19]!==g?(e=(0,m.jsx)(f,{model:o,exons:h,feature:s,cds:i,utr:g,sequence:l}),r[14]=i,r[15]=h,r[16]=s,r[17]=o,r[18]=l,r[19]=g,r[20]=e):e=r[20],e}case"protein":{let e,t;return r[21]===Symbol.for("react.memo_cache_sentinel")?(e=(0,c.generateCodonTable)(c.defaultCodonTable),r[21]=e):e=r[21],r[22]!==i||r[23]!==o||r[24]!==l?(t=(0,m.jsx)(b,{model:o,cds:i,codonTable:e,sequence:l}),r[22]=i,r[23]=o,r[24]=l,r[25]=t):t=r[25],t}case"gene":{let e;return r[26]!==i||r[27]!==h||r[28]!==s||r[29]!==o||r[30]!==l||r[31]!==g?(e=(0,m.jsx)(f,{model:o,exons:h,feature:s,cds:i,utr:g,sequence:l,includeIntrons:!0}),r[26]=i,r[27]=h,r[28]=s,r[29]=o,r[30]=l,r[31]=g,r[32]=e):e=r[32],e}case"gene_collapsed_intron":{let e;return r[33]!==i||r[34]!==h||r[35]!==s||r[36]!==o||r[37]!==l||r[38]!==g?(e=(0,m.jsx)(f,{model:o,exons:h,feature:s,cds:i,sequence:l,utr:g,includeIntrons:!0,collapseIntron:!0}),r[33]=i,r[34]=h,r[35]=s,r[36]=o,r[37]=l,r[38]=g,r[39]=e):e=r[39],e}case"gene_updownstream":{let e;return r[40]!==i||r[41]!==u||r[42]!==h||r[43]!==s||r[44]!==o||r[45]!==l||r[46]!==d||r[47]!==g?(e=(0,m.jsx)(f,{model:o,exons:h,feature:s,cds:i,sequence:l,utr:g,upstream:d,downstream:u,includeIntrons:!0}),r[40]=i,r[41]=u,r[42]=h,r[43]=s,r[44]=o,r[45]=l,r[46]=d,r[47]=g,r[48]=e):e=r[48],e}case"gene_updownstream_collapsed_intron":{let e;return r[49]!==i||r[50]!==u||r[51]!==h||r[52]!==s||r[53]!==o||r[54]!==l||r[55]!==d||r[56]!==g?(e=(0,m.jsx)(f,{model:o,exons:h,feature:s,cds:i,sequence:l,utr:g,upstream:d,downstream:u,includeIntrons:!0,collapseIntron:!0}),r[49]=i,r[50]=u,r[51]=h,r[52]=s,r[53]=o,r[54]=l,r[55]=d,r[56]=g,r[57]=e):e=r[57],e}default:{let e;return r[58]===Symbol.for("react.memo_cache_sentinel")?(e=(0,m.jsx)("div",{children:"Unknown type"}),r[58]=e):e=r[58],e}}}const S=(0,o.observer)(function({mode:e,feature:r,sequence:t,model:n}){const s=(0,j.f)({feature:r,sequence:t});return s?(0,m.jsx)(C,{mode:e,feature:r,model:n,sequenceData:s}):null}),q=(0,o.observer)(function({mode:e,model:r,feature:t}){return(0,m.jsx)("div",{style:{background:"white"},children:`>${[[t.name||t.id,e].filter(e=>!!e).join("-"),`${t.refName}:${(0,c.toLocale)(t.start+1)}-${(0,c.toLocale)(t.end)}${n=t.strand,-1===n?"(-)":1===n?"(+)":""}`,e.endsWith("updownstream")?`+/- ${(0,c.toLocale)(r.upDownBp)} up/downstream bp`:""].filter(e=>!!e).join(" ")}\n`});var n});function _(e){const r=(0,n.c)(3),{children:t}=e;let s,o;return r[0]===Symbol.for("react.memo_cache_sentinel")?(s={fontFamily:"monospace",color:"black",fontSize:11},r[0]=s):s=r[0],r[1]!==t?(o=(0,m.jsx)("pre",{style:s,children:t}),r[1]=t,r[2]=o):o=r[2],o}function k(e){const r=(0,n.c)(3),{children:t}=e;let s,o;return r[0]===Symbol.for("react.memo_cache_sentinel")?(s={fontFamily:"monospace",color:"black",fontSize:11,maxWidth:600,whiteSpace:"wrap",wordBreak:"break-all"},r[0]=s):s=r[0],r[1]!==t?(o=(0,m.jsx)("div",{style:s,children:t}),r[1]=t,r[2]=o):o=r[2],o}const R=(0,o.observer)((0,s.forwardRef)(function(e,r){const t=(0,n.c)(17),{sequence:s,model:o,feature:c}=e,{showCoordinates:a,mode:l}=o,d=a?_:k;let u,i,h,f,g;return t[0]===Symbol.for("react.memo_cache_sentinel")?(u={maxHeight:300,overflow:"auto"},t[0]=u):u=t[0],t[1]!==c||t[2]!==l||t[3]!==o?(i=(0,m.jsx)(q,{model:o,mode:l,feature:c}),t[1]=c,t[2]=l,t[3]=o,t[4]=i):i=t[4],t[5]!==c||t[6]!==l||t[7]!==o||t[8]!==s?(h=(0,m.jsx)(S,{model:o,mode:l,feature:c,sequence:s}),t[5]=c,t[6]=l,t[7]=o,t[8]=s,t[9]=h):h=t[9],t[10]!==d||t[11]!==i||t[12]!==h?(f=(0,m.jsxs)(d,{children:[i,h]}),t[10]=d,t[11]=i,t[12]=h,t[13]=f):f=t[13],t[14]!==r||t[15]!==f?(g=(0,m.jsx)("div",{"data-testid":"sequence_panel",ref:r,style:u,children:f}),t[14]=r,t[15]=f,t[16]=g):g=t[16],g}))}}]);
//# sourceMappingURL=1819.48a80ef6.chunk.js.map