/*! For license information please see 2369.fc14cad7.chunk.js.LICENSE.txt */
(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[2369],{52369:(e,t,A)=>{"use strict";A.d(t,{Wb:()=>Ge,bQ:()=>xe});var r=A(57864),n=A(22609).hp;function i(e){return n.from((0,r.inflate)(e))}var o=A(5181),a=A.n(o),s=A(16308),g=A.n(s),c=A(25164),h=A.n(c),f=A(22823),I=A.n(f),C=A(41967);class d extends Error{}class l extends Error{}class B extends d{}class u extends d{}class Q extends d{}const E=12,w=4096,y=1<<23;class m{constructor(){this.F=void 0,this.C=void 0}}function p(e,t,A,r){return A*(e>>r)+(e&(1<<r)-1)-t}const v={FC:m,AriDecoder:class{constructor(){this.fc=new Array(256);for(let e=0;e<this.fc.length;e+=1)this.fc[e]=new m;this.R=null}},Symbol:class{constructor(){this.start=void 0,this.freq=void 0}},symbolInit:function(e,t,A){if(!(t<=65536))throw new B("assertion failed: start <= 1<<16");if(!(A<=65536-t))throw new B("assertion failed: freq <= 1<<16");e.start=t,e.freq=A},advanceStep:p,advanceSymbolStep:function(e,t,A){return p(e,t.start,t.freq,A)},get:function(e,t){return e&(1<<t)-1},advanceSymbol:function(e,t,A,r){return function(e,t,A,r,n){if((e=r*(e>>n)+(e&(1<<n)-1)-A)<y)do{e=e<<8|255&t.get()}while(e<y);return e}(e,t,A.start,A.freq,r)},renormalize:function(e,t){if(e<y)do{e=e<<8|255&t.get()}while(e<y);return e}};function S(e){if(!e)throw new B("assertion failed")}var D=A(22609).hp;class b{constructor(e,t=0){this._buffer=e,this._position=t,this.length=e.length}get(){const e=this._buffer[this._position];return this._position+=1,e}getByte(){return this.get()}getByteAt(e){return this._buffer[e]}position(){return this._position}put(e){return this._buffer[this._position]=e,this._position+=1,e}putAt(e,t){return this._buffer[e]=t,t}setPosition(e){return this._position=e,e}getInt(){const e=this._buffer.readInt32LE(this._position);return this._position+=4,e}remaining(){return this._buffer.length-this._position}}var R=A(85252);const N=(new R.i).itf8(),k={parser:(new R.i).string("magic",{length:4}).uint8("majorVersion").uint8("minorVersion").string("fileId",{length:20,stripNull:!0}),maxLength:26},q={parser:(new R.i).uint8("compressionMethod",{formatter:e=>{const t=["raw","gzip","bzip2","lzma","rans","rans4x16","arith","fqzcomp","tok3"][e];if(!t)throw new Error(`compression method number ${e} not implemented`);return t}}).uint8("contentType",{formatter:e=>{const t=["FILE_HEADER","COMPRESSION_HEADER","MAPPED_SLICE_HEADER","UNMAPPED_SLICE_HEADER","EXTERNAL_DATA","CORE_DATA"][e];if(!t)throw new Error(`invalid block content type id ${e}`);return t}}).itf8("contentId").itf8("compressedSize").itf8("uncompressedSize"),maxLength:17},F={parser:(new R.i).uint32("crc32"),maxLength:4},L=(new R.i).itf8("size").buffer("ents",{length:"size",formatter:e=>{function t(t,A){const r=e.toString("utf8",t,A),n=[];for(let e=0;e<r.length;e+=3)n.push(r.substr(e,3));return n}var A,r=[],n=0;for(A=0;A<e.length;A+=1)e[A]||(r.push(t(n,A)),n=A+1);return A>n&&r.push(t(n,A)),r}}),M=(new R.i).uint8(null,{formatter:e=>!!e}),U=(new R.i).itf8("mapSize").itf8("mapCount").array("ents",{length:"mapCount",type:(new R.i).string("key",{length:2,stripNull:!1}).choice("value",{tag:"key",choices:{MI:M,UI:M,PI:M,RN:M,AP:M,RR:M,SM:(new R.i).array(null,{type:"uint8",length:5}),TD:(new R.i).nest(null,{type:L,formatter:e=>e.ents})}})});function x(e){const t={};for(let A=0;A<e.ents.length;A+=1){const{key:r,value:n}=e.ents[A];t[r]&&console.warn(`duplicate key ${r} in map`),t[r]=n}return t}const _={cramFileDefinition:k,cramBlockHeader:q,cramBlockCrc32:F};function J(e){return"number"==typeof e.refSeqId}const H={cramUnmappedSliceHeader(e){let t=0,A=(new R.i).itf8("numRecords");return t+=5,e>=3?(A=A.ltf8("recordCounter"),t+=9):2===e&&(A=A.itf8("recordCounter"),t+=5),A=A.itf8("numBlocks").itf8("numContentIds").array("contentIds",{type:N,length:"numContentIds"}),t+=10,e>=2&&(A=A.array("md5",{type:"uint8",length:16}),t+=16),{parser:A,maxLength:e=>t+5*e}},cramMappedSliceHeader(e){let t=(new R.i).itf8("refSeqId").itf8("refSeqStart").itf8("refSeqSpan").itf8("numRecords"),A=20;return e>=3?(t=t.ltf8("recordCounter"),A+=9):2===e&&(t=t.itf8("recordCounter"),A+=5),t=t.itf8("numBlocks").itf8("numContentIds").array("contentIds",{type:N,length:"numContentIds"}).itf8("refBaseBlockId"),A+=15,e>=2&&(t=t.array("md5",{type:"uint8",length:16}),A+=16),{parser:t,maxLength:e=>A+5*e}},cramEncoding:e=>({parser:(new R.i).namely("cramEncoding").itf8("codecId").itf8("parametersBytes").choice("parameters",{tag:"codecId",choices:{0:new R.i,1:(new R.i).itf8("blockContentId"),2:(new R.i).itf8("offset").itf8("M"),3:R.i.start().itf8("numCodes").array("symbols",{length:"numCodes",type:N}).itf8("numLengths").array("bitLengths",{length:"numLengths",type:N}),4:R.i.start().nest("lengthsEncoding",{type:"cramEncoding"}).nest("valuesEncoding",{type:"cramEncoding"}),5:(new R.i).uint8("stopByte").itf8("blockContentId"),6:(new R.i).itf8("offset").itf8("length"),7:(new R.i).itf8("offset").itf8("K"),8:(new R.i).itf8("offset").itf8("log2m"),9:(new R.i).itf8("offset")}})}),cramDataSeriesEncodingMap(e){return(new R.i).itf8("mapSize").itf8("mapCount").array("ents",{length:"mapCount",type:(new R.i).string("key",{length:2,stripNull:!1}).nest("value",{type:this.cramEncoding(e).parser})})},cramTagEncodingMap(e){return(new R.i).itf8("mapSize").itf8("mapCount").array("ents",{length:"mapCount",type:(new R.i).itf8("key",{formatter:e=>String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)}).nest("value",{type:this.cramEncoding(e).parser})})},cramCompressionHeader(e){let t=new R.i;return t=t.nest("preservation",{type:U,formatter:x}).nest("dataSeriesEncoding",{type:this.cramDataSeriesEncodingMap(e),formatter:x}).nest("tagEncoding",{type:this.cramTagEncodingMap(e),formatter:x}),{parser:t}},cramContainerHeader1(e){let t=(new R.i).int32("length").itf8("refSeqId").itf8("refSeqStart").itf8("alignmentSpan").itf8("numRecords"),A=24;return e>=3?(t=t.ltf8("recordCounter"),A+=9):2===e&&(t=t.itf8("recordCounter"),A+=5),e>1&&(t=t.ltf8("numBases"),A+=9),t=t.itf8("numBlocks").itf8("numLandmarks"),A+=10,{parser:t,maxLength:A}},cramContainerHeader2(e){let t=(new R.i).itf8("numLandmarks").array("landmarks",{type:(new R.i).itf8(),length:"numLandmarks"}),A=0;return e>=3&&(t=t.uint32("crc32"),A=4),{parser:t,maxLength:e=>5+5*e+A}}};var G=A(12363),Y=A.n(G);class W extends Error{}function P(e,t,A){let r=0;if(t.bytePosition+(7-t.bitPosition+A)/8>e.length)throw new W("read error during decoding. the file seems to be truncated.");for(let n=A;n;n--)r<<=1,r|=e[t.bytePosition]>>t.bitPosition&1,t.bitPosition-=1,t.bitPosition<0&&(t.bytePosition+=1),t.bitPosition&=7;return r}function K(e,t,A=0,r=0){const{offset:n,result:i}=t.parse(e);return{...i,_endPosition:n+r,_size:n-A}}function z(e,t){const A=e.prototype[t],r=`_memo_${t}`;e.prototype[t]=function(){if(!(r in this)){const e=A.call(this);this[r]=e,Promise.resolve(e).catch((()=>{delete this[r]}))}return this[r]}}const T=1,O=2,X=4,j=8,V=1,$=2,Z=4,ee=8,te=16,Ae=32,re=64,ne=128,ie=256,oe=512,ae=1024,se=2048;var ge=A(59086),ce=A.n(ge);const he={a:0,A:0,c:1,C:1,g:2,G:2,t:3,T:3,n:4,N:4};function fe(e){const t={};for(const[A,r]of e)t["is"+r]=e=>!!(e&A),t["set"+r]=e=>e|A;return t}const Ie=fe([[1,"Paired"],[2,"ProperlyPaired"],[4,"SegmentUnmapped"],[8,"MateUnmapped"],[16,"ReverseComplemented"],[32,"MateReverseComplemented"],[64,"Read1"],[128,"Read2"],[256,"Secondary"],[512,"FailedQc"],[1024,"Duplicate"],[2048,"Supplementary"]]),Ce=fe([[1,"PreservingQualityScores"],[2,"Detached"],[4,"WithMateDownstream"],[8,"DecodeSequenceAsStar"]]),de=fe([[1,"OnNegativeStrand"],[2,"Unmapped"]]);class le{constructor({flags:e,cramFlags:t,readLength:A,mappingQuality:r,lengthOnRef:n,qualityScores:i,mateRecordNumber:o,readBases:a,readFeatures:s,mateToUse:g,readGroupId:c,readName:h,sequenceId:f,uniqueId:I,templateSize:C,alignmentStart:d,tags:l}){this.flags=e,this.cramFlags=t,this.readLength=A,this.mappingQuality=r,this.lengthOnRef=n,this.qualityScores=i,a&&(this.readBases=a),this.readGroupId=c,this.readName=h,this.sequenceId=f,this.uniqueId=I,this.templateSize=C,this.alignmentStart=d,this.tags=l,s&&(this.readFeatures=s),g&&(this.mate={flags:g.mateFlags,readName:g.mateReadName,sequenceId:g.mateSequenceId,alignmentStart:g.mateAlignmentStart}),o&&(this.mateRecordNumber=o)}isPaired(){return!!(this.flags&V)}isProperlyPaired(){return!!(this.flags&$)}isSegmentUnmapped(){return!!(this.flags&Z)}isMateUnmapped(){return!!(this.flags&ee)}isReverseComplemented(){return!!(this.flags&te)}isMateReverseComplemented(){return!!(this.flags&Ae)}isRead1(){return!!(this.flags&re)}isRead2(){return!!(this.flags&ne)}isSecondary(){return!!(this.flags&ie)}isFailedQc(){return!!(this.flags&oe)}isDuplicate(){return!!(this.flags&ae)}isSupplementary(){return!!(this.flags&se)}isDetached(){return!!(this.cramFlags&O)}hasMateDownStream(){return!!(this.cramFlags&X)}isPreservingQualityScores(){return!!(this.cramFlags&T)}isUnknownBases(){return!!(this.cramFlags&j)}getReadBases(){if(!this.readBases&&this._refRegion){const e=function(e,t){if(!e.lengthOnRef&&!e.readLength)return null;if(e.isUnknownBases())return null;const A=e.alignmentStart-t.start;if(!e.readFeatures)return t.seq.substr(A,e.lengthOnRef).toUpperCase();let r="",n=A,i=0;for(;r.length<e.readLength;)if(i<e.readFeatures.length){const A=e.readFeatures[i];if("Q"===A.code||"q"===A.code)i+=1;else if(A.pos===r.length+1)if(i+=1,"b"===A.code){const e=A.data;r+=e,n+=e.length}else"B"===A.code?(r+=A.data[0],n+=1):"X"===A.code?(r+=A.sub,n+=1):"I"===A.code?r+=A.data:"D"===A.code?n+=A.data:"i"===A.code?r+=A.data:"N"===A.code?n+=A.data:"S"===A.code?r+=A.data:"P"===A.code||A.code;else if(i<e.readFeatures.length){const A=t.seq.substr(n,e.readFeatures[i].pos-r.length-1);r+=A,n+=A.length}}else{const A=t.seq.substr(n,e.readLength-r.length);r+=A,n+=A.length}return r.toUpperCase()}(this,this._refRegion);e&&(this.readBases=e)}return this.readBases}getPairOrientation(){if(!this.isSegmentUnmapped()&&this.isPaired()&&!this.isMateUnmapped()&&this.mate&&this.sequenceId===this.mate.sequenceId){const e=this.isReverseComplemented()?"R":"F",t=this.isMateReverseComplemented()?"R":"F";let A=" ",r=" ";this.isRead1()?(A="1",r="2"):this.isRead2()&&(A="2",r="1");const n=[];let i=this.templateLength||this.templateSize;if(void 0===i)throw new Error("One of templateSize and templateLength must be set");return this.alignmentStart>this.mate.alignmentStart&&i>0&&(i=-i),i>0?(n[0]=e,n[1]=A,n[2]=t,n[3]=r):(n[2]=e,n[3]=A,n[0]=t,n[1]=r),n.join("")}return null}addReferenceSequence(e,t){this.readFeatures&&this.readFeatures.forEach((A=>{"X"===A.code&&function(e,t,A,r){if(!t)return;const n=r.refPos-t.start,i=t.seq.charAt(n);i&&(r.ref=i);let o=he[i];void 0===o&&(o=4);const a=A.substitutionMatrix[o][r.data];a&&(r.sub=a)}(0,e,t,A)})),!this.readBases&&e.start<=this.alignmentStart&&e.end>=this.alignmentStart+(this.lengthOnRef||this.readLength)-1&&(this._refRegion=e)}toJSON(){const e={};return Object.keys(this).forEach((t=>{"_"!==t.charAt(0)&&(e[t]=this[t])})),e.readBases=this.getReadBases(),e}}function Be(e){let t="";for(let A=0;A<e.length&&0!==e[A];A++)t+=String.fromCharCode(e[A]);return t}function ue(e,t){if("Z"===e)return Be(t);if("A"===e)return String.fromCharCode(t[0]);if("I"===e)return ce().fromBytesLE(t).toNumber();if("i"===e)return new Int32Array(t.buffer)[0];if("s"===e)return new Int16Array(t.buffer)[0];if("S"===e)return new Uint16Array(t.buffer)[0];if("c"===e)return new Int8Array(t.buffer)[0];if("C"===e)return t[0];if("f"===e)return new Float32Array(t.buffer)[0];if("H"===e)return Number.parseInt(Be(t).replace(/^0x/,""),16);if("B"===e)return function(e){const t=String.fromCharCode(e[0]),A=Int32Array.from(e.slice(1))[0],r=new Array(A);if(e=e.slice(5),"c"===t){const t=new Int8Array(e.buffer);for(let e=0;e<A;e+=1)r[e]=t[e]}else if("C"===t){const t=new Uint8Array(e.buffer);for(let e=0;e<A;e+=1)r[e]=t[e]}else if("s"===t){const t=new Int16Array(e.buffer);for(let e=0;e<A;e+=1)r[e]=t[e]}else if("S"===t){const t=new Uint16Array(e.buffer);for(let e=0;e<A;e+=1)r[e]=t[e]}else if("i"===t){const t=new Int32Array(e.buffer);for(let e=0;e<A;e+=1)r[e]=t[e]}else if("I"===t){const t=new Uint32Array(e.buffer);for(let e=0;e<A;e+=1)r[e]=t[e]}else{if("f"!==t)throw new Error("unknown type: "+t);{const t=new Float32Array(e.buffer);for(let e=0;e<A;e+=1)r[e]=t[e]}}return r}(t);throw new B(`Unrecognized tag type ${e}`)}function Qe(e,t,A,r,n,i,o,a,s){let g=t("BF");const c=t("CF");if(!J(r.parsedContent))throw new Error;let h;h=a>1&&-2===r.parsedContent.refSeqId?t("RI"):r.parsedContent.refSeqId;const f=t("RL");let I=t("AP");A.APdelta&&(I+=o.lastAlignmentStart),o.lastAlignmentStart=I;const C=t("RG");let d,l,u,Q;if(A.readNamesIncluded&&(d=Be(t("RN"))),Ce.isDetached(c)){const e=t("MF");let r;A.readNamesIncluded||(r=Be(t("RN")),d=r);const n=t("NS"),i=t("NP");(e||n>-1)&&(l={mateFlags:e,mateSequenceId:n,mateAlignmentStart:i,mateReadName:r}),u=t("TS"),de.isUnmapped(e)&&(g=Ie.setMateUnmapped(g)),de.isOnNegativeStrand(e)&&(g=Ie.setMateReverseComplemented(g))}else Ce.isWithMateDownstream(c)&&(Q=t("NF")+s+1);const E=t("TL");if(E<0)throw new B("invalid TL index");const w={},y=A.getTagNames(E),m=y.length;for(let t=0;t<m;t+=1){const r=y[t],a=r.substr(0,2),s=r.substr(2,1),g=A.getCodecForTag(r);if(!g)throw new B(`no codec defined for auxiliary tag ${r}`);const c=g.decode(e,n,i,o);w[a]=ue(s,c)}let p,v,S,D,b;if(Ie.isSegmentUnmapped(g))if(Ce.isDecodeSequenceAsStar(c))b=null,D=null;else{const e=new Array(f);for(let A=0;A<e.length;A+=1)e[A]=t("BA");if(b=String.fromCharCode(...e),Ce.isPreservingQualityScores(c)){D=new Array(f);for(let A=0;A<e.length;A+=1)D[A]=t("QS")}}else{const e=t("FN");if(e&&(p=function(e,t,A,r,n){let i=0,o=e-1;const a=new Array(t);function s([e,t]){const r=A(t);if("character"===e)return String.fromCharCode(r);if("string"===e){let e="";for(let t=0;t<r.byteLength;t++)e+=String.fromCharCode(r[t]);return e}return"numArray"===e?r.toArray():r}for(let e=0;e<t;e+=1){const t=String.fromCharCode(A("FC")),r=A("FP"),g={B:["character","BA"],S:["string",n>1?"SC":"IN"],X:["number","BS"],D:["number","DL"],I:["string","IN"],i:["character","BA"],b:["string","BB"],q:["numArray","QQ"],Q:["number","QS"],H:["number","HC"],P:["number","PD"],N:["number","RS"]}[t];if(!g)throw new B(`invalid read feature code "${t}"`);let c=s(g);const h={B:["number","QS"]}[t];h&&(c=[c,s(h)]),i+=r;const f=i;o+=r;const I=o;"D"===t||"N"===t?o+=c:"I"===t||"S"===t?o-=c.length:"i"===t&&(o-=1),a[e]={code:t,pos:f,refPos:I,data:c}}return a}(I,e,t,0,a)),v=f,p)for(const{code:e,data:t}of p)"D"===e||"N"===e?v+=t:"I"===e||"S"===e?v-=t.length:"i"===e&&(v-=1);if(Number.isNaN(v)&&(console.warn(`${d||`${h}:${I}`} record has invalid read features`),v=f),S=t("MQ"),Ce.isPreservingQualityScores(c)){D=new Array(f);for(let e=0;e<D.length;e++)D[e]=t("QS")}}return{readLength:f,sequenceId:h,cramFlags:c,flags:g,alignmentStart:I,readGroupId:C,readName:d,mateToUse:l,templateSize:u,mateRecordNumber:Q,readFeatures:p,lengthOnRef:v,mappingQuality:S,qualityScores:D,readBases:b,tags:w}}function Ee(e,t,A,r){if(!r)throw new B("could not resolve intra-slice mate pairs, file seems truncated or malformed");const n=!!(r.mate||void 0!==r.mateRecordNumber&&r.mateRecordNumber!==t);A.readName||(A.readName=String(A.uniqueId),r.readName=A.readName),A.mate={sequenceId:r.sequenceId,alignmentStart:r.alignmentStart,uniqueId:r.uniqueId},r.readName&&(A.mate.readName=r.readName),r.mate||void 0!==r.mateRecordNumber||(r.mate={sequenceId:A.sequenceId,alignmentStart:A.alignmentStart,uniqueId:A.uniqueId},A.readName&&(r.mate.readName=A.readName)),A.flags|=V,r.flags&Z&&(A.flags|=ee),A.flags&Z&&(r.flags|=ee),r.flags&te&&(A.flags|=Ae),A.flags&te&&(r.flags|=Ae),void 0===A.templateLength&&(n?function(e,t,A){const r=function t(A){const r=[A];if(void 0!==A.mateRecordNumber&&A.mateRecordNumber>=0){const n=e[A.mateRecordNumber];if(!n)throw new B("intra-slice mate record not found, this file seems malformed");r.push(...t(n))}return r}(A),n=r.map((e=>e.alignmentStart)),i=r.map((e=>e.alignmentStart+e.readLength-1)),o=Math.max(...i)-Math.min(...n)+1;o>=0&&r.forEach((e=>{if(void 0!==e.templateLength)throw new B("mate pair group has some members that have template lengths already, this file seems malformed");e.templateLength=o}))}(e,0,A):function(e,t){const A=Math.min(e.alignmentStart,t.alignmentStart),r=Math.max(e.alignmentStart+e.readLength-1,t.alignmentStart+t.readLength-1)-A+1;e.templateLength=r,t.templateLength=r}(A,r)),delete A.mateRecordNumber}class we{constructor(e,t,A){this.container=e,this.containerPosition=t,this.file=e.file}async getHeader(){const e=await this.file.getSectionParsers(),t=await this.container.getHeader(),A=await this.file.readBlock(t._endPosition+this.containerPosition);if(void 0===A)throw new Error;if("MAPPED_SLICE_HEADER"===A.contentType){const r=K(A.content,e.cramMappedSliceHeader.parser,0,t._endPosition);return{...A,parsedContent:r}}if("UNMAPPED_SLICE_HEADER"===A.contentType){const r=K(A.content,e.cramUnmappedSliceHeader.parser,0,t._endPosition);return{...A,parsedContent:r}}throw new B(`error reading slice header block, invalid content type ${A.contentType}`)}async getBlocks(){const e=await this.getHeader();let t=e._endPosition;const A=new Array(e.parsedContent.numBlocks);for(let e=0;e<A.length;e+=1){const r=await this.file.readBlock(t);if(void 0===r)throw new Error;A[e]=r,t=A[e]._endPosition}return A}async getCoreDataBlock(){return(await this.getBlocks())[0]}async _getBlocksContentIdIndex(){const e=await this.getBlocks(),t={};return e.forEach((e=>{"EXTERNAL_DATA"===e.contentType&&(t[e.contentId]=e)})),t}async getBlockByContentId(e){return(await this._getBlocksContentIdIndex())[e]}async getReferenceRegion(){const e=(await this.getHeader()).parsedContent;if(!J(e))throw new Error;if(e.refSeqId<0)return;const t=await this.container.getCompressionScheme();if(void 0===t)throw new Error;if(e.refBaseBlockId>=0){const t=await this.getBlockByContentId(e.refBaseBlockId);if(!t)throw new B("embedded reference specified, but reference block does not exist");return{seq:t.data.toString("utf8"),start:e.refSeqStart,end:e.refSeqStart+e.refSeqSpan-1,span:e.refSeqSpan}}if(t.referenceRequired||this.file.fetchReferenceSequenceCallback){if(!this.file.fetchReferenceSequenceCallback)throw new Error("reference sequence not embedded, and seqFetch callback not provided, cannot fetch reference sequence");const t=await this.file.fetchReferenceSequenceCallback(e.refSeqId,e.refSeqStart,e.refSeqStart+e.refSeqSpan-1);if(t.length!==e.refSeqSpan)throw new Q("seqFetch callback returned a reference sequence of the wrong length");return{seq:t,start:e.refSeqStart,end:e.refSeqStart+e.refSeqSpan-1,span:e.refSeqSpan}}}getAllRecords(){return this.getRecords((()=>!0))}async _fetchRecords(){const{majorVersion:e}=await this.file.getDefinition(),t=await this.container.getCompressionScheme();if(void 0===t)throw new Error;const A=await this.getHeader();if(void 0===A)throw new Error;const r=await this._getBlocksContentIdIndex();if(e>1&&this.file.options.checkSequenceMD5&&J(A.parsedContent)&&A.parsedContent.refSeqId>=0&&"0000000000000000"!==A.parsedContent.md5.join("")){const e=await this.getReferenceRegion();if(e){const{seq:t,start:r,end:n}=e,i=function(e){return Y()(e.toUpperCase().replace(/[^\x21-\x7e]/g,""))}(t),o=A.parsedContent.md5.map((e=>(e<16?"0":"")+e.toString(16))).join("");if(i!==o)throw new B(`MD5 checksum reference mismatch for ref ${A.parsedContent.refSeqId} pos ${r}..${n}. recorded MD5: ${o}, calculated MD5: ${i}`)}}const n=await this.getCoreDataBlock(),i={lastAlignmentStart:J(A.parsedContent)?A.parsedContent.refSeqStart:0,coreBlock:{bitPosition:7,bytePosition:0},externalBlocks:{map:new Map,getCursor(e){let t=this.map.get(e);return void 0===t&&(t={bitPosition:7,bytePosition:0},this.map.set(e,t)),t}}},o=e=>{const A=t.getCodecForDataSeries(e);if(!A)throw new B(`no codec defined for ${e} data series`);return A.decode(this,n,r,i)};let a=new Array(A.parsedContent.numRecords);for(let s=0;s<a.length;s+=1)try{const g=Qe(this,o,t,A,n,r,i,e,s);a[s]=new le({...g,uniqueId:A.contentPosition+A.parsedContent.recordCounter+s+1})}catch(e){if(e instanceof W){console.warn("read attempted beyond end of buffer, file seems truncated."),a=a.filter((e=>!!e));break}throw e}for(let e=0;e<a.length;e+=1){const{mateRecordNumber:t}=a[e];void 0!==t&&t>=0&&Ee(a,e,a[e],a[t])}return a}async getRecords(e){const t=this.container.filePosition+this.containerPosition;let A=this.file.featureCache.get(t.toString());A||(A=this._fetchRecords(),this.file.featureCache.set(t.toString(),A));const r=(await A).filter(e);if(r.length&&this.file.fetchReferenceSequenceCallback){const e=await this.getHeader();if(J(e.parsedContent)&&(e.parsedContent.refSeqId>=0||-2===e.parsedContent.refSeqId)){const t=e.parsedContent.refSeqId>=0?e.parsedContent.refSeqId:void 0,A=await this.container.getCompressionScheme();if(void 0===A)throw new Error;const n={};for(let e=0;e<r.length;e+=1){const A=void 0!==t?t:r[e].sequenceId;let i=n[A];i||(i={id:A,start:r[e].alignmentStart,end:-1/0,seq:null},n[A]=i);const o=r[e].alignmentStart+(r[e].lengthOnRef||r[e].readLength)-1;o>i.end&&(i.end=o),r[e].alignmentStart<i.start&&(i.start=r[e].alignmentStart)}await Promise.all(Object.values(n).map((async e=>{-1!==e.id&&e.start<=e.end&&(e.seq=await this.file.fetchReferenceSequenceCallback(e.id,e.start,e.end))})));for(let e=0;e<r.length;e+=1){const i=n[void 0!==t?t:r[e].sequenceId];if(i&&i.seq){const t=i.seq;r[e].addReferenceSequence({...i,seq:t},A)}}}}return r}}"getHeader getBlocks _getBlocksContentIdIndex".split(" ").forEach((e=>z(we,e)));class ye{constructor(e,t){this.parameters=e,this.dataType=t}}class me extends ye{constructor(e,t,A){if(super(e,t),this.instantiateCodec=A,"byteArray"!==t)throw new TypeError(`byteArrayLength does not support data type ${t}`)}decode(e,t,A,r){const n=this._getLengthCodec().decode(e,t,A,r),i=this._getDataCodec(),o=new Uint8Array(n);for(let a=0;a<n;a+=1)o[a]=i.decode(e,t,A,r);return o}_getLengthCodec(){const e=this.parameters.lengthsEncoding;return this.instantiateCodec(e,"int")}_getDataCodec(){const e=this.parameters.valuesEncoding;return this.instantiateCodec(e,"byte")}}"_getLengthCodec _getDataCodec".split(" ").forEach((e=>z(me,e)));const pe={1:class extends ye{constructor(e,t){if(super(e,t),"int"===this.dataType)this._decodeData=this._decodeInt;else{if("byte"!==this.dataType)throw new l(`${this.dataType} decoding not yet implemented by EXTERNAL codec`);this._decodeData=this._decodeByte}}decode(e,t,A,r){const{blockContentId:n}=this.parameters,i=A[n];if(!i)throw new B(`no block found with content ID ${n}`);const o=r.externalBlocks.getCursor(n);return this._decodeData(i,o)}_decodeInt(e,t){const[A,r]=function(e,t){let A=t;const r=e[A];let n;if(r<128?(n=r,A+=1):r<192?(n=16383&(r<<8|e[A+1]),A+=2):r<224?(n=2097151&(r<<16|e[A+1]<<8|e[A+2]),A+=3):r<240?(n=268435455&(r<<24|e[A+1]<<16|e[A+2]<<8|e[A+3]),A+=4):(n=(15&r)<<28|e[A+1]<<20|e[A+2]<<12|e[A+3]<<4|15&e[A+4],A+=5),A>e.length)throw new W("Attempted to read beyond end of buffer; this file seems truncated.");return[n,A-t]}(e.content,t.bytePosition);return t.bytePosition=t.bytePosition+r,A}_decodeByte(e,t){if(t.bytePosition>=e.content.length)throw new W("attempted to read beyond end of block. this file seems truncated.");return e.content[t.bytePosition++]}},3:class extends ye{constructor(e,t){if(super(e,t),this.codes={},this.codeBook={},this.sortedByValue=[],this.sortedCodes=[],this.sortedValuesByBitCode=[],this.sortedBitCodes=[],this.sortedBitLengthsByBitCode=[],this.bitCodeToValue=[],!["byte","int"].includes(this.dataType))throw new TypeError(`${this.dataType} decoding not yet implemented by HUFFMAN_INT codec`);this.buildCodeBook(),this.buildCodes(),this.buildCaches(),0===this.sortedCodes[0].bitLength&&(this._decode=this._decodeZeroLengthCode)}buildCodeBook(){let e=new Array(this.parameters.numCodes);for(let t=0;t<this.parameters.numCodes;t+=1)e[t]={symbol:this.parameters.symbols[t],bitLength:this.parameters.bitLengths[t]};e=e.sort(((e,t)=>e.bitLength-t.bitLength||e.symbol-t.symbol)),this.codeBook={},e.forEach((e=>{this.codeBook[e.bitLength]||(this.codeBook[e.bitLength]=[]),this.codeBook[e.bitLength].push(e.symbol)}))}buildCodes(){this.codes={};let e=0,t=-1;Object.entries(this.codeBook).forEach((([A,r])=>{const n=parseInt(A,10);r.forEach((A=>{const r={bitLength:n,value:A,bitCode:0};t+=1;const i=n-e;if(t<<=i,r.bitCode=t,e+=i,function(e){let t=e-(e>>1)&1431655765;return t=(858993459&t)+(t>>2&858993459),16843009*(t+(t>>4)&252645135)>>24}(t)>n)throw new B("Symbol out of range");this.codes[A]=r}))}))}buildCaches(){this.sortedCodes=Object.values(this.codes).sort(((e,t)=>e.bitLength-t.bitLength||e.bitCode-t.bitCode)),this.sortedByValue=Object.values(this.codes).sort(((e,t)=>e.value-t.value)),this.sortedValuesByBitCode=this.sortedCodes.map((e=>e.value)),this.sortedBitCodes=this.sortedCodes.map((e=>e.bitCode)),this.sortedBitLengthsByBitCode=this.sortedCodes.map((e=>e.bitLength));const e=Math.max(...this.sortedBitCodes);this.bitCodeToValue=new Array(e+1).fill(-1);for(let e=0;e<this.sortedBitCodes.length;e+=1)this.bitCodeToValue[this.sortedCodes[e].bitCode]=e}decode(e,t,A,r){return this._decode(e,t,r.coreBlock)}_decodeZeroLengthCode(){return this.sortedCodes[0].value}_decode(e,t,A){const r=t.content;let n=0,i=0;for(let e=0;e<this.sortedCodes.length;e+=1){const t=this.sortedCodes[e].bitLength;i<<=t-n,i|=P(r,A,t-n),n=t;{const A=this.bitCodeToValue[i];if(A>-1&&this.sortedBitLengthsByBitCode[A]===t)return this.sortedValuesByBitCode[A];for(let A=e;this.sortedCodes[A+1].bitLength===t&&A<this.sortedCodes.length;A+=1)e+=1}}throw new B("Huffman symbol not found.")}},4:me,5:class extends ye{constructor(e,t){if(super(e,t),"byteArray"!==t)throw new TypeError(`byteArrayStop codec does not support data type ${t}`)}decode(e,t,A,r){const{blockContentId:n}=this.parameters,i=A[n];if(!i)throw new B(`no block found with content ID ${n}`);const o=r.externalBlocks.getCursor(n);return this._decodeByteArray(i,o)}_decodeByteArray(e,t){const A=e.content,{stopByte:r}=this.parameters,n=t.bytePosition;let i=t.bytePosition;for(;A[i]!==r&&i<A.length;){if(i===A.length)throw new W("byteArrayStop reading beyond length of data buffer?");i+=1}return t.bytePosition=i+1,A.subarray(n,i)}},6:class extends ye{constructor(e,t){if(super(e,t),"int"!==this.dataType)throw new l(`${this.dataType} decoding not yet implemented by BETA codec`)}decode(e,t,A,r){return P(t.content,r.coreBlock,this.parameters.length)-this.parameters.offset}},7:class extends ye{constructor(e,t){if(super(e,t),"int"!==this.dataType)throw new l(`${this.dataType} decoding not yet implemented by SUBEXP codec`)}decode(e,t,A,r){let n,i,o=0;for(;P(t.content,r.coreBlock,1);)o+=1;return 0===o?(n=this.parameters.K,i=P(t.content,r.coreBlock,n)):(n=o+this.parameters.K-1,i=1<<n|P(t.content,r.coreBlock,n)),i-this.parameters.offset}},9:class extends ye{constructor(e,t){if(super(e,t),"int"!==this.dataType)throw new l(`${this.dataType} decoding not yet implemented by GAMMA codec`)}decode(e,t,A,r){let n=1;for(;0===P(t.content,r.coreBlock,1);)n+=1;return(P(t.content,r.coreBlock,n-1)|1<<n-1)-this.parameters.offset}}};function ve(e,t){const A=(r="ignore"===t?0:e.codecId,pe[r]);var r;if(!A)throw new l(`no codec implemented for codec ID ${e.codecId}`);return new A(e.parameters,t,ve)}const Se={BF:"int",CF:"int",RI:"int",RL:"int",AP:"int",RG:"int",MF:"int",NS:"int",NP:"int",TS:"int",NF:"int",TC:"byte",TN:"int",FN:"int",FC:"byte",FP:"int",BS:"byte",IN:"byteArray",SC:"byteArray",DL:"int",BA:"byte",BB:"byteArray",RS:"int",PD:"int",HC:"int",MQ:"int",RN:"byteArray",QS:"byte",QQ:"byteArray",TL:"int"};class De{constructor(e){this.dataSeriesCodecCache={},this.tagCodecCache={},this.tagEncoding={},this.readNamesIncluded=e.preservation.RN,this.APdelta=e.preservation.AP,this.referenceRequired=!!e.preservation.RR,this.tagIdsDictionary=e.preservation.TD,this.substitutionMatrix=function(e){const t=new Array(5);for(let e=0;e<5;e+=1)t[e]=new Array(4);return t[0][e[0]>>6&3]="C",t[0][e[0]>>4&3]="G",t[0][e[0]>>2&3]="T",t[0][e[0]>>0&3]="N",t[1][e[1]>>6&3]="A",t[1][e[1]>>4&3]="G",t[1][e[1]>>2&3]="T",t[1][e[1]>>0&3]="N",t[2][e[2]>>6&3]="A",t[2][e[2]>>4&3]="C",t[2][e[2]>>2&3]="T",t[2][e[2]>>0&3]="N",t[3][e[3]>>6&3]="A",t[3][e[3]>>4&3]="C",t[3][e[3]>>2&3]="G",t[3][e[3]>>0&3]="N",t[4][e[4]>>6&3]="A",t[4][e[4]>>4&3]="C",t[4][e[4]>>2&3]="G",t[4][e[4]>>0&3]="T",t}(e.preservation.SM),this.dataSeriesEncoding=e.dataSeriesEncoding,this.tagEncoding=e.tagEncoding,this.preservation=e.preservation,this._size=e._size,this._endPosition=e._endPosition}getCodecForTag(e){if(!this.tagCodecCache[e]){const t=this.tagEncoding[e];t&&(this.tagCodecCache[e]=ve(t,"byteArray"))}return this.tagCodecCache[e]}getTagNames(e){return this.tagIdsDictionary[e]}getCodecForDataSeries(e){let t=this.dataSeriesCodecCache[e];if(void 0===t){const A=this.dataSeriesEncoding[e];if(A){const r=Se[e];if(!r)throw new B(`data series name ${e} not defined in file compression header`);t=ve(A,r),this.dataSeriesCodecCache[e]=t}}return t}toJSON(){const e={};return Object.keys(this).forEach((t=>{/Cache$/.test(t)||(e[t]=this[t])})),e}}var be=A(22609).hp;class Re{constructor(e,t){this.file=e,this.filePosition=t}getHeader(){return this._readContainerHeader(this.filePosition)}async getCompressionHeaderBlock(){if(!(await this.getHeader()).numRecords)return null;const e=await this.file.getSectionParsers(),t=await this.getFirstBlock();if(void 0===t)return;if("COMPRESSION_HEADER"!==t.contentType)throw new B(`invalid content type ${t.contentType} in what is supposed to be the compression header block`);const A=K(t.content,e.cramCompressionHeader.parser,0,t.contentPosition);return{...t,parsedContent:A}}async getFirstBlock(){const e=await this.getHeader();return this.file.readBlock(e._endPosition)}async getCompressionScheme(){const e=await this.getCompressionHeaderBlock();if(e)return new De(e.parsedContent)}getSlice(e,t){return new we(this,e,t)}async _readContainerHeader(e){const t=await this.file.getSectionParsers(),{cramContainerHeader1:A,cramContainerHeader2:r}=t,{size:n}=await this.file.stat();if(e>=n)return;const i=be.allocUnsafe(A.maxLength);await this.file.read(i,0,A.maxLength,e);const o=K(i,A.parser),a=-128&(s=o.numLandmarks)?-16384&s?-2097152&s?-268435456&s?5:4:3:2:1;var s;if(e+o.length>=n)return void console.warn(`${this.file}: container header at ${e} indicates that the container has length ${o.length}, which extends beyond the length of the file. Skipping this container.`);const g=be.allocUnsafe(r.maxLength(o.numLandmarks));await this.file.read(g,0,r.maxLength(o.numLandmarks),e+o._size-a);const c=K(g,r.parser);return this.file.validateChecksums&&void 0!==c.crc32&&await this.file.checkCrc32(e,o._size+c._size-a-4,c.crc32,`container header beginning at position ${e}`),Object.assign(o,c,{_size:o._size+c._size-a,_endPosition:o._size+c._size-a+e})}}"getHeader getCompressionHeaderBlock getCompressionScheme".split(" ").forEach((e=>z(Re,e)));var Ne=A(62991),ke=A(45834);function qe(e,t,A){if(A)return A;if(e)return function(e){const{protocol:t,pathname:A}=Ne.parse(e);return"file:"===t?new ke.EY(unescape(function(e){if(null==e)throw new Error("Value must not be nullish.");return e}(A))):new ke.Tx(e)}(e);if(t)return new ke.EY(t);throw new Error("no url, path, or filehandle provided, cannot open")}function Fe(e){const t=e.split(/\r?\n/),A=[];return t.forEach((e=>{const[t,...r]=e.split(/\t/),n=r.map((e=>{const[t,A]=e.split(":",2);return{tag:t,value:A}}));t&&A.push({tag:t.substr(1),data:n})})),A}var Le=A(22609).hp;class Me{constructor(e){var t;if(this.file=qe(e.url,e.path,e.filehandle),this.validateChecksums=!0,this.fetchReferenceSequenceCallback=e.seqFetch,this.options={checkSequenceMD5:e.checkSequenceMD5,cacheSize:null!==(t=e.cacheSize)&&void 0!==t?t:2e4},this.featureCache=new(g())({maxSize:this.options.cacheSize}),function(){const e=new Uint32Array([287454020]),t=new Uint8Array(e.buffer);return 68===t[0]?0:17===t[0]?1:2}()>0)throw new Error("Detected big-endian machine, may be unable to run")}read(e,t,A,r){return this.file.read(e,t,A,r)}stat(){return this.file.stat()}async getDefinition(){const e=Le.allocUnsafe(k.maxLength);await this.file.read(e,0,k.maxLength,0);const t=k.parser.parse(e).result;if(2!==t.majorVersion&&3!==t.majorVersion)throw new l(`CRAM version ${t.majorVersion} not supported`);return t}async getSamHeader(){const e=await this.getContainerById(0);if(!e)throw new B("file contains no containers");const t=await e.getFirstBlock();if(void 0===t)return Fe("");const A=t.content,r=A.readInt32LE(0),n=A.toString("utf8",4,4+r);return this.header=n,Fe(n)}async getHeaderText(){return await this.getSamHeader(),this.header}async getSectionParsers(){const{majorVersion:e}=await this.getDefinition();return function(e){const t=Object.assign({},_);return Object.keys(H).forEach((A=>{t[A]=H[A](e)})),t}(e)}async getContainerById(e){const t=await this.getSectionParsers();let A=t.cramFileDefinition.maxLength;const{size:r}=await this.file.stat(),{cramContainerHeader1:n}=t;let i;for(let t=0;t<=e;t+=1){if(A+n.maxLength+8>=r)return;i=this.getContainerAtPosition(A);const o=await i.getHeader();if(!o)throw new B(`container ${e} not found in file`);if(0===t){A=o._endPosition;for(let e=0;e<o.numBlocks;e+=1){const e=await this.readBlock(A);if(void 0===e)return;A=e._endPosition}}else A+=o._size+o.length}return i}async checkCrc32(e,t,A,r){const n=Le.allocUnsafe(t);await this.file.read(n,0,t,e);const i=a().unsigned(n);if(i!==A)throw new B(`crc mismatch in ${r}: recorded CRC32 = ${A}, but calculated CRC32 = ${i}`)}async containerCount(){const e=await this.getSectionParsers(),{size:t}=await this.file.stat(),{cramContainerHeader1:A}=e;let r=0,n=e.cramFileDefinition.maxLength;for(;n+A.maxLength+8<t;){const e=await this.getContainerAtPosition(n).getHeader();if(!e)break;if(0===r){n=e._endPosition;for(let t=0;t<e.numBlocks;t+=1){const e=await this.readBlock(n);if(void 0===e)return;n=e._endPosition}}else n+=e._size+e.length;r+=1}return r}getContainerAtPosition(e){return new Re(this,e)}async readBlockHeader(e){const t=await this.getSectionParsers(),{cramBlockHeader:A}=t,{size:r}=await this.file.stat();if(e+A.maxLength>=r)return;const n=Le.allocUnsafe(A.maxLength);return await this.file.read(n,0,A.maxLength,e),K(n,A.parser,0,e)}async _parseSection(e,t,A=e.maxLength,r=void 0){let n;if(r)n=r;else{const{size:e}=await this.file.stat();if(t+A>=e)return;n=Le.allocUnsafe(A),await this.file.read(n,0,A,t)}const i=K(n,e.parser,0,t);if(i._size!==A)throw new B(`section read error: requested size ${A} does not equal parsed size ${i._size}`);return i}async _uncompress(e,t,A){if("gzip"===e)i(t).copy(A);else if("bzip2"===e){const e=I().array(t);let r,n=I().header(e),i=0;do{r=I().decompress(e,n),-1!=r&&(Le.from(r).copy(A,i),i+=r.length,n-=r.length)}while(-1!=r)}else if("lzma"===e){const e=new Response(new C.XzReadableStream((r=t,new ReadableStream({start(e){e.enqueue(r),e.close()}}))));Le.from(await e.arrayBuffer()).copy(A)}else if("rans"===e)!function(e,t,A=0){if(0===e.length)return t.fill(0),t;const r=new b(e,A),n=r.get();if(0!==n&&1!==n)throw new B(`Invalid rANS order ${n}`);if(r.getInt()!==r.remaining()-4)throw new B("Incorrect input length.");const i=r.getInt(),o=new b(t||D.allocUnsafe(i));if(o.length<i)throw new B(`Output buffer too small to fit ${i} bytes.`);switch(n){case 0:return function(e,t){const A=new v.AriDecoder,r=new Array(256);for(let e=0;e<r.length;e+=1)r[e]=new v.Symbol;return function(e,t,A){let r=0,n=0,i=255&e.get();do{null==t.fc[i]&&(t.fc[i]=new v.FC),t.fc[i].F=255&e.get(),t.fc[i].F>=128&&(t.fc[i].F&=-129,t.fc[i].F=(127&t.fc[i].F)<<8|255&e.get()),t.fc[i].C=n,v.symbolInit(A[i],t.fc[i].C,t.fc[i].F),t.R||(t.R=new Array(w)),t.R.fill(i,n,n+t.fc[i].F),n+=t.fc[i].F,0===r&&i+1===(255&e.getByteAt(e.position()))?(i=255&e.get(),r=255&e.get()):0!==r?(r-=1,i+=1):i=255&e.get()}while(0!==i);S(n<w)}(e,A,r),function(e,t,A,r){let n=e.getInt(),i=e.getInt(),o=e.getInt(),a=e.getInt();const s=r.remaining(),g=-4&s;for(let s=0;s<g;s+=4){const g=t.R[v.get(n,E)],c=t.R[v.get(i,E)],h=t.R[v.get(o,E)],f=t.R[v.get(a,E)];r.putAt(s,g),r.putAt(s+1,c),r.putAt(s+2,h),r.putAt(s+3,f),n=v.advanceSymbolStep(n,A[255&g],E),i=v.advanceSymbolStep(i,A[255&c],E),o=v.advanceSymbolStep(o,A[255&h],E),a=v.advanceSymbolStep(a,A[255&f],E),n=v.renormalize(n,e),i=v.renormalize(i,e),o=v.renormalize(o,e),a=v.renormalize(a,e)}let c;switch(r.setPosition(g),3&s){case 0:break;case 1:c=t.R[v.get(n,E)],v.advanceSymbol(n,e,A[255&c],E),r.put(c);break;case 2:c=t.R[v.get(n,E)],v.advanceSymbol(n,e,A[255&c],E),r.put(c),c=t.R[v.get(i,E)],v.advanceSymbol(i,e,A[255&c],E),r.put(c);break;case 3:c=t.R[v.get(n,E)],v.advanceSymbol(n,e,A[255&c],E),r.put(c),c=t.R[v.get(i,E)],v.advanceSymbol(i,e,A[255&c],E),r.put(c),c=t.R[v.get(o,E)],v.advanceSymbol(o,e,A[255&c],E),r.put(c);break;default:throw new B("invalid output size encountered during rANS decoding")}r.setPosition(0)}(e,A,r,t),t}(r,o);case 1:return function(e,t){const A=new Array(256);for(let e=0;e<A.length;e+=1)A[e]=new v.AriDecoder;const r=new Array(256);for(let e=0;e<r.length;e+=1){r[e]=new Array(256);for(let t=0;t<r[e].length;t+=1)r[e][t]=new v.Symbol}return function(e,t,A){let r=0,n=255&e.get();do{let i=0,o=0,a=255&e.get();null==t[n]&&(t[n]=new v.AriDecoder);do{null==t[n].fc[a]&&(t[n].fc[a]=new v.FC),t[n].fc[a].F=255&e.get(),t[n].fc[a].F>=128&&(t[n].fc[a].F&=-129,t[n].fc[a].F=(127&t[n].fc[a].F)<<8|255&e.get()),t[n].fc[a].C=o,0===t[n].fc[a].F&&(t[n].fc[a].F=w),null==A[n][a]&&(A[n][a]=new v.RansDecSymbol),v.symbolInit(A[n][a],t[n].fc[a].C,t[n].fc[a].F),null==t[n].R&&(t[n].R=new Array(w)),t[n].R.fill(a,o,o+t[n].fc[a].F),o+=t[n].fc[a].F,S(o<=w),0===i&&a+1===(255&e.getByteAt(e.position()))?(a=255&e.get(),i=255&e.get()):0!==i?(i-=1,a+=1):a=255&e.get()}while(0!==a);0===r&&n+1===(255&e.getByteAt(e.position()))?(n=255&e.get(),r=255&e.get()):0!==r?(r-=1,n+=1):n=255&e.get()}while(0!==n)}(e,A,r),function(e,t,A,r){const n=t.remaining();let i=e.getInt(),o=e.getInt(),a=e.getInt(),s=e.getInt();const g=n>>2;let c=0,h=g,f=2*g,I=3*g,C=0,d=0,l=0,B=0;for(;c<g;c+=1,h+=1,f+=1,I+=1){const n=255&A[C].R[v.get(i,E)],g=255&A[d].R[v.get(o,E)],u=255&A[l].R[v.get(a,E)],Q=255&A[B].R[v.get(s,E)];t.putAt(c,n),t.putAt(h,g),t.putAt(f,u),t.putAt(I,Q),i=v.advanceSymbolStep(i,r[C][n],E),o=v.advanceSymbolStep(o,r[d][g],E),a=v.advanceSymbolStep(a,r[l][u],E),s=v.advanceSymbolStep(s,r[B][Q],E),i=v.renormalize(i,e),o=v.renormalize(o,e),a=v.renormalize(a,e),s=v.renormalize(s,e),C=n,d=g,l=u,B=Q}for(;I<n;I+=1){const n=255&A[B].R[v.get(s,E)];t.putAt(I,n),s=v.advanceSymbol(s,e,r[B][n],E),B=n}}(e,t,A,r),t}(r,o);default:throw new B(`Invalid rANS order: ${n}`)}}(t,A);else if("rans4x16"===e)h().r4x16_uncompress(t,A);else if("arith"===e)h().arith_uncompress(t,A);else if("fqzcomp"===e)h().fqzcomp_uncompress(t,A);else{if("tok3"!==e)throw new l(`${e} decompression not yet implemented`);h().tok3_uncompress(t,A)}var r}async readBlock(e){const{majorVersion:t}=await this.getDefinition(),A=await this.getSectionParsers(),r=await this.readBlockHeader(e);if(void 0===r)return;const n=r._endPosition,i=Le.allocUnsafe(r.uncompressedSize),o={...r,_endPosition:n,contentPosition:n,content:i};if("raw"!==r.compressionMethod){const e=Le.allocUnsafe(r.compressedSize);await this.read(e,0,r.compressedSize,n),await this._uncompress(r.compressionMethod,e,i)}else await this.read(i,0,r.uncompressedSize,n);if(t>=3){const t=await this._parseSection(A.cramBlockCrc32,n+r.compressedSize);if(void 0===t)return;o.crc32=t.crc32,this.validateChecksums&&await this.checkCrc32(e,r._size+r.compressedSize,t.crc32,"block data"),o._endPosition=t._endPosition,o._size=o.compressedSize+A.cramBlockCrc32.maxLength}else o._endPosition=n+o.compressedSize,o._size=o.compressedSize;return o}}"getDefinition getSectionParsers getSamHeader".split(" ").forEach((e=>z(Me,e)));const Ue=Me;class xe{constructor(e){if(e.cram?this.cram=e.cram:this.cram=new Ue({url:e.cramUrl,path:e.cramPath,filehandle:e.cramFilehandle,seqFetch:e.seqFetch,checkSequenceMD5:e.checkSequenceMD5,cacheSize:e.cacheSize}),!(this.cram instanceof Ue))throw new Error("invalid arguments: no cramfile");if(this.index=e.index,!this.index.getEntriesForRange)throw new Error("invalid arguments: not an index");this.fetchSizeLimit=e.fetchSizeLimit||3e6}async getRecordsForRange(e,t,A,r={}){if(r.viewAsPairs=r.viewAsPairs||!1,r.pairAcrossChr=r.pairAcrossChr||!1,r.maxInsertSize=r.maxInsertSize||2e5,"string"==typeof e)throw new l("string sequence names not yet supported");const n=e,i=await this.index.getEntriesForRange(n,t,A),o=i.map((e=>e.sliceBytes)).reduce(((e,t)=>e+t),0);if(o>this.fetchSizeLimit)throw new u(`data size of ${o.toLocaleString()} bytes exceeded fetch size limit of ${this.fetchSizeLimit.toLocaleString()} bytes`);const a=r=>r.sequenceId===e&&r.alignmentStart<=A&&void 0!==r.lengthOnRef&&r.alignmentStart+r.lengthOnRef-1>=t,s=await Promise.all(i.map((e=>this.getRecordsInSlice(e,a))));let g=Array.prototype.concat(...s);if(r.viewAsPairs){const e={},t={};for(let A=0;A<g.length;A+=1){const r=g[A].readName;if(void 0===r)throw new Error;const n=g[A].uniqueId;e[r]||(e[r]=0),e[r]+=1,t[n]=1}const A={};Object.entries(e).forEach((([e,t])=>{1===t&&(A[e]=!0)}));const i=[];for(let e=0;e<g.length;e+=1){const t=g[e],o=t.readName;if(void 0===o)throw new Error;if(A[o]&&t.mate&&(t.mate.sequenceId===n||r.pairAcrossChr)&&Math.abs(t.alignmentStart-t.mate.alignmentStart)<r.maxInsertSize){const e=this.index.getEntriesForRange(t.mate.sequenceId,t.mate.alignmentStart,t.mate.alignmentStart+1);i.push(e)}}const o=await Promise.all(i);let a=[];for(let e=0;e<o.length;e+=1)a.push(...o[e]);a=a.sort(((e,t)=>e.toString().localeCompare(t.toString()))).filter(((e,t,A)=>!t||e.toString()!==A[t-1].toString()));const s=[],c=[],h=a.map((e=>e.sliceBytes)).reduce(((e,t)=>e+t),0);if(h>this.fetchSizeLimit)throw new Error(`mate data size of ${h.toLocaleString()} bytes exceeded fetch size limit of ${this.fetchSizeLimit.toLocaleString()} bytes`);a.forEach((e=>{let r=this.cram.featureCache.get(e.toString());r||(r=this.getRecordsInSlice(e,(()=>!0)),this.cram.featureCache.set(e.toString(),r)),s.push(r);const n=r.then((e=>{const r=[];for(let n=0;n<e.length;n+=1){const i=e[n];if(void 0===i.readName)throw new Error;A[i.readName]&&!t[i.uniqueId]&&r.push(i)}return r}));c.push(n)}));const f=await Promise.all(c);if(f.length){const e=f.reduce(((e,t)=>e.concat(t)));g=g.concat(e)}}return g}getRecordsInSlice({containerStart:e,sliceStart:t,sliceBytes:A},r){return this.cram.getContainerAtPosition(e).getSlice(t,A).getRecords(r)}hasDataForReferenceSequence(e){return this.index.hasDataForReferenceSequence(e)}}var _e=A(5742),Je=A.n(_e);function He(e,t){if(t.some((e=>void 0===e)))throw new B("invalid .crai index file");const[A,r,n,i,o,a]=t;e[A]||(e[A]=[]),e[A].push({start:r,span:n,containerStart:i,sliceStart:o,sliceBytes:a})}class Ge{constructor(e){this.filehandle=qe(e.url,e.path,e.filehandle),this._parseCache=new(Je())({cache:new(g())({maxSize:1}),fill:(e,t)=>this.parseIndex()})}parseIndex(){const e={};return this.filehandle.readFile().then((e=>31===e[0]&&139===e[1]?i(e):e)).then((t=>{if(t.length>4&&21578050===t.readUInt32LE(0))throw new B("invalid .crai index file. note: file appears to be a .bai index. this is technically legal but please open a github issue if you need support");let A=[],r="";for(let n=0;n<t.length;n+=1){const i=t[n];if(i>=48&&i<=57||!r&&45===i)r+=String.fromCharCode(i);else if(9===i)A.push(Number.parseInt(r,10)),r="";else if(10===i)A.push(Number.parseInt(r,10)),r="",He(e,A),A=[];else if(13!==i&&32!==i)throw new B("invalid .crai index file")}return r&&A.push(Number.parseInt(r,10)),6===A.length&&He(e,A),Object.entries(e).forEach((([t,A])=>{e[t]=A.sort(((e,t)=>e.start-t.start||e.span-t.span))})),e}))}getIndex(e={}){return this._parseCache.get("index",null,e.signal)}async hasDataForReferenceSequence(e){return!!(await this.getIndex())[e]}async getEntriesForRange(e,t,A){const r=(await this.getIndex())[e];if(!r)return[];const n=e=>{const r=e.start,n=e.start+e.span;return r>A?-1:n<=t?1:0},i=[];for(let e=0;e<r.length;e+=1)0===n(r[e])&&i.push(r[e]);return i}}},85911:(e,t,A)=>{var r=A(22609).hp;const n=A(88946),i=A(76526),o=A(38298),a=A(22823),s=128;e.exports=class{decode(e){return this.stream=new i(e),this.decodeStream(this.stream)}decodeStream(e,t=0){var A=this.stream.ReadByte();16&A||(t=this.stream.ReadUint7());var r,n=t,i=1&A;if(8&A)return this.decodeStripe(this.stream,t);if(A&s&&([r,n]=this.decodePackMeta(this.stream)),32&A)var o=this.decodeCat(this.stream,n);else o=4&A?this.decodeExt(this.stream,n):64&A?i?this.decodeRLE1(this.stream,n):this.decodeRLE0(this.stream,n):i?this.decode1(this.stream,n):this.decode0(this.stream,n);return A&s&&(o=this.decodePack(o,r,t)),o}encode(e,t){if(this.stream=new i("",0,1.1*e.length+100),this.stream.WriteByte(t),16&t||this.stream.WriteUint7(e.length),8&t)return r.concat([this.stream.buf.slice(0,this.stream.pos),this.encodeStripe(this.stream,e,t>>8)]);var A,n=1&t,o=e.length;return t&s&&([A,e,o]=this.encodePack(e)),t&s&&this.stream.WriteStream(A),64&t?n?this.encodeRLE1(e,o,this.stream):this.encodeRLE0(e,o,this.stream):n?this.encode1(e,o,this.stream):this.encode0(e,o,this.stream)}decode0(e,t){var A=new r.allocUnsafe(t),i=e.ReadByte();0==i&&(i=256);var a=new o(i),s=new n(e);s.RangeStartDecode(e);for(var g=0;g<t;g++)A[g]=a.ModelDecode(e,s);return A}encode0(e,t,A){for(var r=0,i=0;i<t;i++)r<e[i]&&(r=e[i]);r++;var a=new o(r);A.WriteByte(r);var s=new n(A);for(i=0;i<t;i++)a.ModelEncode(A,s,e[i]);return s.RangeFinishEncode(A),A.buf.slice(0,A.pos)}decode1(e,t){var A=new r.allocUnsafe(t),i=e.ReadByte();0==i&&(i=256);for(var a=new Array(i),s=0;s<i;s++)a[s]=new o(i);var g=new n(e);g.RangeStartDecode(e);var c=0;for(s=0;s<t;s++)A[s]=a[c].ModelDecode(e,g),c=A[s];return A}encode1(e,t,A){for(var r=0,i=0;i<t;i++)r<e[i]&&(r=e[i]);r++;var a=new Array(r);for(i=0;i<r;i++)a[i]=new o(r);A.WriteByte(r);var s=new n(A),g=0;for(i=0;i<t;i++)a[g].ModelEncode(A,s,e[i]),g=e[i];return s.RangeFinishEncode(A),A.buf.slice(0,A.pos)}decodeExt(e,t){var A=new r.allocUnsafe(t),n=a.array(e.buf.slice(e.pos)),i=a.header(n),o=0;do{var s=a.decompress(n,i);-1!=s&&(r.from(s).copy(A,o),o+=s.length,i-=s.length)}while(-1!=s);return A}encodeExt(e,t){}decodeRLE0(e,t){var A=new r.allocUnsafe(t),i=e.ReadByte();0==i&&(i=256);for(var a=new o(i),s=new Array(258),g=0;g<=257;g++)s[g]=new o(4);var c=new n(e);for(c.RangeStartDecode(e),g=0;g<t;){A[g]=a.ModelDecode(e,c);for(var h=s[A[g]].ModelDecode(e,c),f=h,I=256;3==h;)h=s[I].ModelDecode(e,c),I=257,f+=h;for(var C=1;C<=f;C++)A[g+C]=A[g];g+=f+1}return A}encodeRLE0(e,t,A){for(var r=0,i=0;i<t;i++)r<e[i]&&(r=e[i]);r++;var a=new o(r),s=new Array(258);for(i=0;i<=257;i++)s[i]=new o(4);A.WriteByte(r);var g=new n(A);for(i=0;i<t;){a.ModelEncode(A,g,e[i]);for(var c=1;i+c<t&&e[i+c]==e[i];)c++;c--;var h=e[i];e[i],i+=c+1;var f=c>=3?3:c;for(s[h].ModelEncode(A,g,f),c-=f,h=256;3==f;)f=c>=3?3:c,s[h].ModelEncode(A,g,f),h=257,c-=f}return g.RangeFinishEncode(A),A.buf.slice(0,A.pos)}decodeRLE1(e,t){var A=new r.allocUnsafe(t),i=e.ReadByte();0==i&&(i=256);for(var a=new Array(i),s=0;s<i;s++)a[s]=new o(i);var g=new Array(258);for(s=0;s<=257;s++)g[s]=new o(4);var c=new n(e);c.RangeStartDecode(e);var h=0;for(s=0;s<t;){A[s]=a[h].ModelDecode(e,c),h=A[s];for(var f=g[A[s]].ModelDecode(e,c),I=f,C=256;3==f;)f=g[C].ModelDecode(e,c),C=257,I+=f;for(var d=1;d<=I;d++)A[s+d]=A[s];s+=I+1}return A}encodeRLE1(e,t,A){for(var r=0,i=0;i<t;i++)r<e[i]&&(r=e[i]);r++;var a=new Array(r);for(i=0;i<r;i++)a[i]=new o(r);var s=new Array(258);for(i=0;i<=257;i++)s[i]=new o(4);A.WriteByte(r);for(var g=new n(A),c=(i=0,0);i<t;){a[c].ModelEncode(A,g,e[i]);for(var h=1;i+h<t&&e[i+h]==e[i];)h++;h--;var f=e[i];c=e[i],i+=h+1;var I=h>=3?3:h;for(s[f].ModelEncode(A,g,I),h-=I,f=256;3==I;)I=h>=3?3:h,s[f].ModelEncode(A,g,I),f=257,h-=I}return g.RangeFinishEncode(A),A.buf.slice(0,A.pos)}decodePackMeta(e){this.nsym=e.ReadByte();for(var t=new Array(this.nsym),A=0;A<this.nsym;A++)t[A]=e.ReadByte();return[t,e.ReadUint7()]}decodePack(e,t,A){var n=new r.allocUnsafe(A);if(this.nsym<=1)for(var i=0;i<A;i++)n[i]=t[0];else if(this.nsym<=2){i=0;for(var o=0;i<A;i++){if(i%8==0)var a=e[o++];n[i]=t[1&a],a>>=1}}else if(this.nsym<=4)for(i=0,o=0;i<A;i++)i%4==0&&(a=e[o++]),n[i]=t[3&a],a>>=2;else{if(!(this.nsym<=16))return e;for(i=0,o=0;i<A;i++)i%2==0&&(a=e[o++]),n[i]=t[15&a],a>>=4}return n}packMeta(e){for(var t=new i("",0,1024),A=new Array(256),r=0;r<e.length;r++)A[e[r]]=1;var n=0;for(r=0;r<256;r++)A[r]&&(A[r]=++n);for(t.WriteByte(n),r=0;r<256;r++)A[r]&&(t.WriteByte(r),A[r]--);return[t,A,n]}encodePack(e){var t,A,n;[t,A,n]=this.packMeta(e);var i=e.length,o=0;if(n<=1)return t.WriteUint7(0),[t,new r.allocUnsafe(0),0];if(n<=2){for(var a=new r.allocUnsafe(Math.floor((i+7)/8)),s=(o=0,0);o<(-8&i);o+=8,s++)a[s]=(A[e[o+0]]<<0)+(A[e[o+1]]<<1)+(A[e[o+2]]<<2)+(A[e[o+3]]<<3)+(A[e[o+4]]<<4)+(A[e[o+5]]<<5)+(A[e[o+6]]<<6)+(A[e[o+7]]<<7);if(o<i){a[s]=0;for(var g=0;o<i;)a[s]|=A[e[o++]]<<g,g++;s++}return t.WriteUint7(s),[t,a,a.length]}if(n<=4){for(a=new r.allocUnsafe(Math.floor((i+3)/4)),o=0,s=0;o<(-4&i);o+=4,s++)a[s]=(A[e[o+0]]<<0)+(A[e[o+1]]<<2)+(A[e[o+2]]<<4)+(A[e[o+3]]<<6);if(o<i){for(a[s]=0,g=0;o<i;)a[s]|=A[e[o++]]<<g,g+=2;s++}return t.WriteUint7(s),[t,a,a.length]}if(n<=16){for(a=new r.allocUnsafe(Math.floor((i+1)/2)),o=0,s=0;o<(-2&i);o+=2,s++)a[s]=(A[e[o+0]]<<0)+(A[e[o+1]]<<4);return o<i&&(a[s++]=A[e[o++]]),t.WriteUint7(s),[t,a,a.length]}return t.WriteUint7(e.length),[t,e,e.length]}encodeStripe(e,t,A){0==A&&(A=4);for(var r=new Array(A),n=new Array(A),o=0;o<A;o++)n[o]=Math.floor(t.length/A)+(t.length%A>o),r[o]=new Array(n[o]);for(var a=0,s=0;s<t.length;s+=A,a++)for(var g=0;g<A;g++)a<r[g].length&&(r[g][a]=t[s+g]);var c=new Array(A),h=0;for(o=0;o<A;o++){var f=this.encode(r[o],0),I=this.encode(r[o],1);c[o]=I.length<f.length?I:f,h+=c[o].length}var C=new i("",0,h+5*A+1);for(C.WriteByte(A),o=0;o<A;o++)C.WriteUint7(c[o].length);for(o=0;o<A;o++)C.WriteData(c[o],c[o].length);return C.buf.slice(0,C.buf.pos)}decodeStripe(e,t){for(var A=e.ReadByte(),n=new Array(A),i=new Array(A),o=0;o<A;o++)n[o]=e.ReadUint7();var a=new Array(A);for(o=0;o<A;o++)i[o]=Math.floor(t/A)+(t%A>o),a[o]=this.decodeStream(e,i[o]);var s=new r.allocUnsafe(t);for(o=0;o<A;o++)for(var g=0;g<i[o];g++)s[g*A+o]=a[o][g];return s}decodeCat(e,t){for(var A=new r.allocUnsafe(t),n=0;n<t;n++)A[n]=e.ReadByte();return A}}},88946:e=>{e.exports=class{constructor(e){this.low=0,this.range=4294967295,this.code=0,this.FFnum=0,this.carry=0,this.cache=0}RangeStartDecode(e){for(var t=0;t<5;t++)this.code=(this.code<<8)+e.ReadByte();this.code&=4294967295,this.code>>>=0}RangeGetFrequency(e){return this.range=Math.floor(this.range/e),Math.floor(this.code/this.range)}RangeDecode(e,t,A,r){for(this.code-=t*this.range,this.range*=A;this.range<1<<24;)this.range*=256,this.code=256*this.code+e.ReadByte()}RangeShiftLow(e){if(this.low<4278190080|this.carry){for(e.WriteByte(this.cache+this.carry);this.FFnum;)e.WriteByte(this.carry-1),this.FFnum--;this.cache=this.low>>>24,this.carry=0}else this.FFnum++;this.low<<=8,this.low>>>=0}RangeEncode(e,t,A,r){var n=this.low;for(this.range=Math.floor(this.range/r),this.low+=t*this.range,this.low>>>=0,this.range*=A,this.low<n&&(0!=this.carry&&console.log("ERROR: Multiple carry"),this.carry=1);this.range<1<<24;)this.range*=256,this.RangeShiftLow(e)}RangeFinishEncode(e){for(var t=0;t<5;t++)this.RangeShiftLow(e)}}},38298:e=>{e.exports=class{constructor(e=256){this.total_freq=e,this.max_sym=e-1,this.S=new Array,this.F=new Array;for(var t=0;t<=this.max_sym;t++)this.S[t]=t,this.F[t]=1}ModelDecode(e,t){for(var A=t.RangeGetFrequency(this.total_freq),r=0,n=0;r+this.F[n]<=A;)r+=this.F[n++];t.RangeDecode(e,r,this.F[n],this.total_freq),this.F[n]+=16,this.total_freq+=16,this.total_freq>65519&&this.ModelRenormalise();var i=this.S[n];if(n>0&&this.F[n]>this.F[n-1]){var o=this.F[n];this.F[n]=this.F[n-1],this.F[n-1]=o,o=this.S[n],this.S[n]=this.S[n-1],this.S[n-1]=o}return i}ModelRenormalise(){this.total_freq=0;for(var e=0;e<=this.max_sym;e++)this.F[e]-=Math.floor(this.F[e]/2),this.total_freq+=this.F[e]}ModelEncode(e,t,A){for(var r=0,n=0;this.S[n]!=A;n++)r+=this.F[n];if(t.RangeEncode(e,r,this.F[n],this.total_freq),this.F[n]+=16,this.total_freq+=16,this.total_freq>65519&&this.ModelRenormalise(),A=this.S[n],n>0&&this.F[n]>this.F[n-1]){var i=this.F[n];this.F[n]=this.F[n-1],this.F[n-1]=i,i=this.S[n],this.S[n]=this.S[n-1],this.S[n-1]=i}}}},50786:(e,t,A)=>{var r=A(22609).hp,n=A(62282);const i=A(76526),o=A(38298),a=A(88946);function s(e,t,A){for(var r=0,n=0,i=-1,o=new Array(1024);n<A;){var a=e.ReadByte();if(o[r++]=a,n+=a,a==i){var s=e.ReadByte();for(n+=a*s;s--;)o[r++]=a}i=a}var g=0;for(r=0,n=0;n<A;){var c=0;do{var h=o[r++];c+=h}while(255==h);for(;c--;)t[n++]=g;g++}}const g=2,c=4,h=8,f=16,I=32,C=64,d=128;function l(e,t,A){var r=e.context;return t.qctx=(t.qctx<<e.qshift)+e.qtab[A],r+=(t.qctx&(1<<e.qbits)-1)<<e.qloc,e.do_pos&&(r+=e.ptab[Math.min(t.p,1023)]<<e.ploc),e.do_delta&&(r+=e.dtab[Math.min(t.delta,255)]<<e.dloc,t.delta+=t.prevq!=A?1:0,t.prevq=A),e.do_sel&&(r+=t.s<<e.sloc),t.p--,65535&r}function B(e){var t={};t.context=e.ReadUint16(),t.pflags=e.ReadByte(),t.do_dedup=t.pflags&g,t.fixed_len=t.pflags&c,t.do_sel=t.pflags&h,t.do_qmap=t.pflags&f,t.do_pos=t.pflags&I,t.do_delta=t.pflags&C,t.do_qtab=t.pflags&d,t.max_sym=e.ReadByte();var A=e.ReadByte();if(t.qbits=A>>4,t.qshift=15&A,A=e.ReadByte(),t.qloc=A>>4,t.sloc=15&A,A=e.ReadByte(),t.ploc=A>>4,t.dloc=15&A,t.qmap=new Array(256),t.pflags&f)for(var r=0;r<t.max_sym;r++)t.qmap[r]=e.ReadByte();else for(r=0;r<256;r++)t.qmap[r]=r;if(t.qtab=new Array(1024),t.qbits>0&&t.pflags&d)s(e,t.qtab,256);else for(r=0;r<256;r++)t.qtab[r]=r;return t.ptab=new Array(1024),t.pflags&I&&s(e,t.ptab,1024),t.dtab=new Array(256),t.pflags&C&&s(e,t.dtab,256),t}function u(e,t,A,r,n,i){A.max_sel>0?n.s=r.sel.ModelDecode(e,t):n.s=0,n.x=A.stab[n.s];var o=A.params[n.x];if(o.fixed_len>=0){var a=r.len[0].ModelDecode(e,t);a|=r.len[1].ModelDecode(e,t)<<8,a|=r.len[2].ModelDecode(e,t)<<16,a|=r.len[3].ModelDecode(e,t)<<24,o.fixed_len>0&&(o.fixed_len=-a)}else a=-o.fixed_len;n.len=a,A.do_rev&&(i[n.rec]=r.rev.ModelDecode(e,t)),n.is_dup=0,o.pflags&g&&r.dup.ModelDecode(e,t)&&(n.is_dup=1),n.p=a,n.delta=0,n.qctx=0,n.prevq=0,n.rec++}function Q(e,t,A){for(var r=0,n=0,i=new Array(2*A),o=0;r<A;){for(var a=r;r<A&&t[r]==n;)r++;var s=r-a;do{var g=Math.min(255,s);i[o++]=g,s-=g}while(255==g);n++}var c=-1,h=new Array(2*A),f=0;for(r=0;r<o;){var I=i[r++];if(h[f++]=I,I==c){for(a=r;r<o&&i[r]==c&&r-a<255;)r++;h[f++]=r-a}else c=I}e.WriteData(h,f)}e.exports={decode:function(e,t){return function(e,t){var A=e.ReadUint7(),n=function(e){var t={max_sym:0};if(5==e.ReadByte()){var A=e.ReadByte(),r=1&A?e.ReadByte():1,n=A.nparam>1?A.nparam-1:0,i=new Array(256);if(2&A)n=e.ReadByte(),s(e,i,256);else{for(var o=0;o<r;o++)i[o]=o;for(;o<256;o++)i[o]=r-1}t.do_rev=4&A,t.stab=i,t.max_sel=n,t.params=new Array(t.nparam);for(var a=0;a<r;a++)t.params[a]=B(e),t.max_sym<t.params[a].max_sym&&(t.max_sym=t.params[a].max_sym);return t}console.error("Invalid FQZComp version number")}(e);if(n){var i=n.params,g=new Array(t.length),c=function(e){var t={};t.qual=new Array(65536);for(var A=0;A<65536;A++)t.qual[A]=new o(e.max_sym+1);for(t.len=new Array(4),A=0;A<4;A++)t.len[A]=new o(256);return t.rev=new o(2),t.dup=new o(2),e.max_sel>0&&(t.sel=new o(e.max_sel+1)),t}(n),h=new a(e);h.RangeStartDecode(e);for(var f=new r.allocUnsafe(A),I={qctx:0,prevq:0,delta:0,p:0,s:0,x:0,len:0,is_dup:0,rec:0},C=0;C<A;){if(0==I.p){if(u(e,h,n,c,I,g),I.is_dup>0&&c.dup.ModelDecode(e,h)){for(var d=0;d<len;d++)f[C+d]=f[C+d-I.len];C+=I.len,I.p=0;continue}t.push(I.len);var Q=(i=n.params[I.x]).context}var E=c.qual[Q].ModelDecode(e,h);f[C++]=i.qmap[E],Q=l(i,I,E)}return n.do_rev&&function(e,t,A,r){for(var n=0,i=0;i<t;){if(A[n])for(var o=0,a=r[n]-1;o<a;){var s=e[i+o];e[i+o]=e[i+a],e[i+a]=s,o++,a--}i+=r[n++]}}(f,A,g,t),f}}(new i(e),t)},encode:function(e,t,A){for(var r=new Array(2),s=new Array(2),l=new Array(2),B=new Array(2),u=new Array(256),E=0;E<2;E++)r[E]=new Array(256),s[E]=new Array(256),l[E]=new Array(1024),B[E]=new Array(256);(y=new i("",0,1.1*e.length+100)).WriteUint7(e.length);var w=function(e,t,A,r){for(var n=A[0],i=0;i<A.length&&A[i]==n;i++);var o=i==A.length?1:0,a=0,s=0;for(i=0;i<256;i++)r[0][i]=0;var g=0,c=0;for(i=0;i<e.length;i++)0==c&&(c=t[g<t.length-1?g++:g]),r[0][e[i]]++,c--;for(i=0;i<256;i++)r[0][i]&&(s<i&&(s=i),a++);var h=5,f=0;return a<=16&&(f=1,h=a<=2?1:a<=4?2:a<=8?3:4),[{qbits:8+(h>4),qshift:h,qloc:7,pbits:7,pshift:t[0]>128?1:0,ploc:0,dbits:h>4?0:1,dshift:3,dloc:15,sbits:0,sloc:15,do_stab:0,context:0,max_sym:s,nsym:a,do_qmap:f,do_dedup:0,fixed_len:1==t.length?1:0,do_sel:0,do_rev:0,do_pos:1,do_delta:h<=4?1:0,do_qtab:0,qbits:8+(h>4)-(0==o),sbits:1,sloc:15-(h<=4),do_stab:1,do_sel:1}]}(e,t,A,r),y=function(e,t,A,r,n,i,o){for(var a=[0,1,1,1,2,2,2,2,2,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],s=0;s<t.length;s++)o[s]=s;for(;s<256;s++)o[s]=t.length-1;e.WriteByte(5);var l=(t.length>1?1:0)|(t[0].do_stab?2:0);if(e.WriteByte(l),1&l&&e.WriteByte(t.length),2&l){var B=1<<t[0].sbits;B>0&&B--,e.WriteByte(B),Q(e,o,256)}for(var u=0;u<t.length;u++){if(e.WriteUint16(t[u].context),e.WriteByte((t[u].do_qtab?d:0)|(t[u].do_delta?C:0)|(t[u].do_pos?I:0)|(t[u].do_qmap?f:0)|(t[u].do_sel?h:0)|(t[u].fixed_len?c:0)|(t[u].do_dedup?g:0)),t[u].do_qmap?e.WriteByte(t[u].nsym):e.WriteByte(t[u].max_sym),e.WriteByte(t[u].qbits<<4|t[u].qshift),e.WriteByte(t[u].qloc<<4|t[u].sloc),e.WriteByte(t[u].ploc<<4|t[u].dloc),t[u].do_qmap){t[u].max_sym=t[u].nsym;var E=0;for(s=0;s<256;s++)A[u][s]&&(e.WriteByte(s),A[u][s]=E++);for(;E<t[u].nsym;E++)e.WriteByte(0)}else for(s=0;s<256;s++)A[u][s]=s;if(t[u].qbits>0){for(s=0;s<256;s++)r[u][s]=s;t[u].do_qtab&&Q(e,r[u],256)}if(t[u].pbits>0){for(s=0;s<1024;s++)n[u][s]=Math.min((1<<t[u].pbits)-1,s>>t[u].pshift);Q(e,n[u],1024)}if(t[u].dbits>0){for(s=0;s<256;s++)a[s]>(1<<t[u].dbits)-1&&(a[s]=(1<<t[u].dbits)-1);for(s=0;s<256;s++)i[u][s]=a[Math.min(a.length-1,s>>t[u].dshift)];Q(e,i[u],256)}}return e}(y,w,r,s,l,B,u);return function(e,t,A,r,i,s,g,c,h,f){var I=1<<i[0].sbits;I>0&&I--;for(var C=t.length,d=0,l=0;l<i.length;l++)d<i[l].max_sym&&(d=i[l].max_sym);for(var B=new Array(65536),u=0;u<65536;u++)B[u]=new o(d+1);var Q=new Array(4);for(u=0;u<4;u++)Q[u]=new o(256);new o(2),new o(2);for(var E=new o(I+1),w=new a(t),y=(l=0,u=0,0);u<C;){if(0==l){var m=r[y];i[0].sbits>0&&E.ModelEncode(e,w,m);var p=f[m],v=A[Math.min(A.length-1,y++)];i[p].fixed_len?i[p].fixed_len>0&&(Q[0].ModelEncode(e,w,255&v),Q[1].ModelEncode(e,w,v>>8&255),Q[2].ModelEncode(e,w,v>>16&255),Q[3].ModelEncode(e,w,v>>24&255),i[p].fixed_len=-1):(Q[0].ModelEncode(e,w,255&v),Q[1].ModelEncode(e,w,v>>8&255),Q[2].ModelEncode(e,w,v>>16&255),Q[3].ModelEncode(e,w,v>>24&255)),i[p].do_dedup&&n.exit(1),l=v;var S=0,D=i[p].context,b=0,R=0}var N=t[u++],k=s[p][N];B[D].ModelEncode(e,w,k),b=(b<<i[p].qshift)+g[p][k],D=i[p].context,D+=(b&(1<<i[p].qbits)-1)<<i[p].qloc,i[p].pbits>0&&(D+=c[p][Math.min(l,1023)]<<i[p].ploc),i[p].dbits>0&&(D+=h[p][Math.min(S,255)]<<i[p].dloc,S+=R!=k?1:0,R=k),i[p].do_sel&&(D+=m<<i[p].sloc),D&=65535,l--}return w.RangeFinishEncode(e),e.buf.slice(0,e.pos)}(y,e,t,A,w,r,s,l,B,u)}}},25164:(e,t,A)=>{"use strict";var r=A(22609).hp,n=A(5960),i=A(57379),o=A(85911),a=A(50786),s=A(57561);e.exports={r4x8_uncompress:function(e,t){n.decode(e).copy(t,0,0)},r4x16_uncompress:function(e,t){i.decode(e).copy(t,0,0)},arith_uncompress:function(e,t){o.decode(e).copy(t,0,0)},fqzcomp_uncompress:function(e,t){var A=new Array;a.decode(e,A).copy(t,0,0)},tok3_uncompress:function(e,t){var A=s.decode(e,0,"\0");r.from(A,"binary").copy(t,0,0)}}},76526:(e,t,A)=>{var r=A(22609).hp;e.exports=class{constructor(e,t=0,A=0){0!=A?(this.buf=r.allocUnsafe(A),this.length=A):(this.buf=e,this.length=e.length),this.pos=t}EOF(){return this.pos>=this.length}ReadData(e){var t=this.buf.slice(this.pos,this.pos+e);return this.pos+=e,t}ReadByte(){const e=this.buf[this.pos];return this.pos++,e}ReadChar(){const e=this.buf[this.pos];return this.pos++,String.fromCharCode(e)}ReadUint16(){return this.ReadByte()|this.ReadByte()<<8}ReadUint32(){const e=this.buf.readInt32LE(this.pos);return this.pos+=4,e}ReadString(){var e="";do{var t=this.buf[this.pos++];t&&(e+=String.fromCharCode(t))}while(t);return e}ReadUint7(){var e=0;do{var t=this.ReadByte();e=e<<7|127&t}while(128&t);return e}ReadITF8(){var e=this.buf[this.pos];return this.pos++,e>=240?(e=(15&e)<<28,e+=(this.buf[this.pos+0]<<20)+(this.buf[this.pos+1]<<12)+(this.buf[this.pos+2]<<4)+(this.buf[this.pos+3]>>4),this.pos+=4):e>=224?(e=(15&e)<<24,e+=(this.buf[this.pos+0]<<16)+(this.buf[this.pos+1]<<8)+(this.buf[this.pos+2]<<0),this.pos+=3):e>=192?(e=(31&e)<<16,e+=(this.buf[this.pos+0]<<8)+(this.buf[this.pos+1]<<0),this.pos+=2):e>=128&&(e=(63&e)<<8,e+=this.buf[this.pos],this.pos++),e}WriteByte(e){this.buf[this.pos++]=e}WriteChar(e){this.buf[this.pos++]=e.charCodeAt(0)}WriteString(e){for(var t=0;t<e.length;t++)this.buf[this.pos++]=e.charCodeAt(t);this.buf[this.pos++]=0}WriteData(e,t){for(var A=0;A<t;A++)this.buf[this.pos++]=e[A]}WriteStream(e){this.WriteData(e.buf,e.pos)}WriteUint16(e){this.WriteByte(255&e),this.WriteByte(e>>8&255)}WriteUint32(e){this.buf.writeInt32LE(e,this.pos),this.pos+=4}WriteUint7(e){var t=0,A=e;do{t+=7,A>>=7}while(A>0);do{t-=7,this.WriteByte((e>>t&127)+((t>0)<<7))}while(t>0)}WriteITF8(e){e<0&&(e=1+e),e<=127?this.buf[this.pos++]=e:e<=16383?(this.buf[this.pos++]=128|Math.floor(e/256),this.buf[this.pos++]=255&e):e<131071?(this.buf[this.pos++]=192|Math.floor(e/65536),this.buf[this.pos++]=255&Math.floor(e/256),this.buf[this.pos++]=255&e):e<268435455?(this.buf[this.pos++]=224|Math.floor(e/16777216),this.buf[this.pos++]=255&Math.floor(e/65536),this.buf[this.pos++]=255&Math.floor(e/256),this.buf[this.pos++]=255&e):(this.buf[this.pos++]=240|Math.floor(e/268435456),this.buf[this.pos++]=255&Math.floor(e/1048576),this.buf[this.pos++]=255&Math.floor(e/4096),this.buf[this.pos++]=255&Math.floor(e/4),this.buf[this.pos++]=15&e)}WriteByteNeg(e){this.buf[--this.pos]=e}}},5960:(e,t,A)=>{var r=A(22609).hp;const n=A(76526);function i(e){return 4095&e}function o(e,t){for(var A=0;t>=e[A+1];)A++;return A}function a(e){for(var t=new Array(4096),A=0,r=0;r<4096;r++){for(;r>=e[A+1];)A++;t[r]=A}return t}function s(e,t,A){return A*(e>>12)+(4095&e)-t}function g(e,t){for(;t<1<<23;)t=(t<<8)+e.ReadByte();return t}function c(e,t){t.WriteByteNeg(e>>24&255),t.WriteByteNeg(e>>16&255),t.WriteByteNeg(e>>8&255),t.WriteByteNeg(e>>0&255)}function h(e,t,A,r,n){return e=function(e,t,A,r){for(var n=(1<<23>>r<<8)*A;e>=n;)t.WriteByteNeg(255&e),e>>=8;return e}(e,t,r,n),(Math.floor(e/r)<<n)+e%r+A}function f(e,t,A){for(var r=0;r<256;r++)t[r]=0;var n=e.ReadByte(),i=n,o=0;do{var a=e.ReadITF8();t[n]=a,o>0?(o--,n++):(n=e.ReadByte())==i+1&&(o=e.ReadByte()),i=n}while(0!=n);for(A[0]=0,r=0;r<=255;r++)A[r+1]=A[r]+t[r]}function I(e){for(var t=0,A=0;A<256;A++)t+=e[A];const r=4096;var n=r/t;do{var i=0,o=0,a=0;for(t=0,A=0;A<256;A++)0!=e[A]&&(i<e[A]&&(i=e[A],o=A),e[A]=Math.floor(e[A]*n),0==e[A]&&(e[A]=1),t+=e[A]);t<r?e[o]+=r-t:t-r<e[o]/2&&e[o]>2?e[o]-=t-r:t!=r&&(n*=.99,a=1)}while(a)}function C(e,t){for(var A=0,r=0;r<256;r++)if(t[r]){if(A>0)A--;else if(e.WriteByte(r),r>0&&t[r-1]>0){for(A=r+1;A<256&&t[A];A++);A-=r+1,e.WriteByte(A)}e.WriteITF8(t[r])}e.WriteByte(0)}e.exports={decode:function(e){var t=new n(e),A=t.ReadByte(),c=(t.ReadUint32(),t.ReadUint32());return 0==A?function(e,t){var A=new Array(256),n=new Array(256);f(e,A,n);for(var o=a(n),c=new Array(4),h=0;h<4;h++)c[h]=e.ReadUint32();var I=new r.allocUnsafe(t);for(h=0;h<t;h++){var C=h%4,d=o[i(c[C])];I[h]=d,c[C]=s(c[C],n[d],A[d]),c[C]=g(e,c[C])}return I}(t,c):function(e,t){var A=new Array(256),n=new Array(256);!function(e,t,A){for(var r=0;r<256;r++){t[r]=new Array(256),A[r]=new Array(256);for(var n=0;n<256;n++)t[r][n]=0}var i=e.ReadByte(),o=i,a=0;do{f(e,t[i],A[i]),a>0?(a--,i++):(i=e.ReadByte())==o+1&&(a=e.ReadByte()),o=i}while(0!=i)}(e,A,n);for(var c=new Array(256),h=0;h<256;h++)c[h]=a(n[h]);for(var I=new Array(4),C=new Array(4),d=0;d<4;d++)I[d]=e.ReadUint32(),C[d]=0;var l=new r.allocUnsafe(t),B=Math.floor(t/4);for(h=0;h<B;h++)for(d=0;d<4;d++){var u=i(I[d]),Q=c[C[d]][u];l[h+d*B]=Q,I[d]=s(I[d],n[C[d]][Q],A[C[d]][Q]),I[d]=g(e,I[d]),C[d]=Q}for(h*=4;h<t;)u=i(I[3]),Q=o(n[C[3]],u),l[h++]=Q,I[3]=s(I[3],n[C[3]][Q],A[C[3]][Q]),I[3]=g(e,I[3]),C[3]=Q;return l}(t,c)},encode:function(e,t){return 0==t?function(e){const t=e.length;var A=new n("",0,780);A.WriteByte(0),A.WriteUint32(0),A.WriteUint32(0);var i=new Array(256);(function(e,t){for(var A=0;A<256;A++)t[A]=0;for(A=0;A<e.length;A++)t[e[A]]++})(e,i),I(i),C(A,i);var o=new Array(256);o[0]=0;for(var a=1;a<256;a++)o[a]=o[a-1]+i[a-1];var s=new Array(4);for(a=0;a<4;a++)s[a]=1<<23;var g=Math.floor(1.05*t+100),f=new n("",g,g);for(a=t-1;a>=0;a--)s[a%4]=h(s[a%4],f,o[e[a]],i[e[a]],12);for(a=3;a>=0;a--)c(s[a],f);var d=A.pos;return A.buf.writeInt32LE(d-9+(f.length-f.pos),1),A.buf.writeInt32LE(t,5),r.concat([A.buf.slice(0,A.pos),f.buf.slice(f.pos,f.length)],A.pos+f.length-f.pos)}(e):function(e){const t=e.length;var A=new n("",0,198156);A.WriteByte(1),A.WriteUint32(0),A.WriteUint32(0);for(var i=new Array(256),o=new Array(256),a=new Array(256),s=0;s<256;s++)o[s]=new Array(256),a[s]=new Array(256);for(function(e,t,A){for(var r=0;r<256;r++){A[r]=0;for(var n=0;n<256;n++)t[r][n]=0}var i=0;for(r=0;r<e.length;r++)A[e[r]]++,t[i][e[r]]++,i=e[r];t[0][e[1*(e.length>>2)]]++,t[0][e[2*(e.length>>2)]]++,t[0][e[3*(e.length>>2)]]++,A[0]+=3}(e,o,i),function(e,t){for(var A=0;A<256;A++)t[A]&&I(e[A])}(o,i),function(e,t,A){for(var r=0,n=0;n<256;n++)if(A[n]){if(r>0)r--;else if(e.WriteByte(n),n>0&&A[n-1]>0){for(r=n+1;r<256&&A[r];r++);r-=n+1,e.WriteByte(r)}C(e,t[n])}e.WriteByte(0)}(A,o,i),s=0;s<256;s++)if(i[s]){a[s][0]=0;for(var g=1;g<256;g++)a[s][g]=a[s][g-1]+o[s][g-1]}var f=new Array(4),d=new Array(4);for(g=0;g<4;g++)f[g]=1<<23,d[g]=0;var l=new n("",t,t),B=Math.floor(t/4),u=new Array(4),Q=new Array(4);for(g=0;g<4;g++)u[g]=(g+1)*B-2,Q[g]=e[u[g]+1];for(Q[3]=e[t-1],s=t-2;s>4*B-2;s--)f[3]=h(f[3],l,a[e[s]][Q[3]],o[e[s]][Q[3]],12),Q[3]=e[s];for(;u[0]>=0;)for(g=3;g>=0;g--){var E=e[u[g]];f[g]=h(f[g],l,a[E][Q[g]],o[E][Q[g]],12),Q[g]=E,u[g]--}for(g=3;g>=0;g--)f[g]=h(f[g],l,a[0][Q[g]],o[0][Q[g]],12);for(s=3;s>=0;s--)c(f[s],l);var w=A.pos;return A.buf.writeInt32LE(w-9+(l.length-l.pos),1),A.buf.writeInt32LE(t,5),r.concat([A.buf.slice(0,A.pos),l.buf.slice(l.pos,l.length)],A.pos+l.length-l.pos)}(e)}}},57379:(e,t,A)=>{var r=A(22609).hp;const n=A(76526);function i(e,t){return e&(1<<t)-1}function o(e,t){for(var A=0;t>=e[A+1];)A++;return A}function a(e,t){for(var A=1<<t,r=new Array(A),n=0,i=0;i<A;i++){for(;i>=e[n+1];)n++;r[i]=n}return r}function s(e,t,A,r){return A*(e>>r)+(e&(1<<r)-1)-t}function g(e,t){return t<32768&&(t=(t<<16)+e.ReadUint16()),t}function c(e,t){t.WriteByteNeg(e>>24&255),t.WriteByteNeg(e>>16&255),t.WriteByteNeg(e>>8&255),t.WriteByteNeg(e>>0&255)}function h(e,t,A,r,n){return e=function(e,t,A,r){for(var n=(1<<31-r)*A;e>=n;)t.WriteByteNeg(e>>8&255),t.WriteByteNeg(255&e),e>>=16;return e}(e,t,r,n),(Math.floor(e/r)<<n)+e%r+A}function f(e,t,A){0==A&&(A=4);for(var r=new Array(A),i=new Array(A),o=0;o<A;o++)i[o]=Math.floor(t.length/A)+(t.length%A>o),r[o]=new Array(i[o]);for(var a=0,s=0;s<t.length;s+=A,a++)for(var g=0;g<A;g++)a<r[g].length&&(r[g][a]=t[s+g]);var c=new Array(A),h=0;for(o=0;o<A;o++){var f=C(r[o],0),I=C(r[o],1);c[o]=I.length<f.length?I:f,h+=c[o].length}var d=new n("",0,h+5*A+1);for(d.WriteByte(A),o=0;o<A;o++)d.WriteUint7(c[o].length);for(o=0;o<A;o++)d.WriteData(c[o],c[o].length);return d.buf.slice(0,d.buf.pos)}function I(e,t){var A=e.ReadByte(),c=1&A,h=8&A,f=32&A,C=64&A,B=128&A;if(16&A||(t=e.ReadUint7()),h)return function(e,t){for(var A=e.ReadByte(),n=new Array(A),i=new Array(A),o=0;o<A;o++)n[o]=e.ReadUint7();var a=new Array(A);for(o=0;o<A;o++)i[o]=Math.floor(t/A)+(t%A>o),a[o]=I(e,i[o]);var s=new r.allocUnsafe(t);for(o=0;o<A;o++)for(var g=0;g<i[o];g++)s[g*A+o]=a[o][g];return s}(e,t);if(B)var Q=t,[E,w,t]=function(e){for(var t=e.ReadByte(),A=new Array(t),r=0;r<t;r++)A[r]=e.ReadByte();return[A,t,e.ReadUint7()]}(e);if(C)var y=t,[m,p,t]=function(e){var t=e.ReadUint7(),A=e.ReadUint7();if(1&t)var r=e.ReadData((t-1)/2);else{var i=e.ReadUint7();r=e.ReadData(i),r=l(new n(r),t/2)}r=new n(r);var o=new Array(256),a=r.ReadByte();0==a&&(a=256);for(var s=0;s<a;s++)o[r.ReadByte()]=1;return[o,r,A]}(e);if(f)var v=e.ReadData(t);else v=0==c?l(e,t):function(e,t){var A=(I=e.ReadByte())>>4,c=e;if(1&I){var h=e.ReadUint7(),f=e.ReadUint7(),I=new n(e.ReadData(f));c=new n(l(I,h))}var C=new Array(256),B=new Array(256);!function(e,t,A,r){for(var n=0;n<256;n++){t[n]=new Array(256),A[n]=new Array(256);for(var i=0;i<256;i++)t[n][i]=0}var o=d(e);for(n=0;n<256;n++)if(o[n]){var a=0;for(i=0;i<256;i++)o[i]&&(a>0?a--:(t[n][i]=e.ReadUint7(),0==t[n][i]&&(a=e.ReadByte())));for(u(t[n],r),A[n][0]=0,i=0;i<256;i++)A[n][i+1]=A[n][i]+t[n][i]}}(c,C,B,A);for(var Q=new Array(256),E=0;E<256;E++)Q[E]=a(B[E],A);for(var w=new Array(4),y=new Array(4),m=0;m<4;m++)w[m]=e.ReadUint32(),y[m]=0;var p=new r.allocUnsafe(t),v=Math.floor(t/4);for(E=0;E<v;E++)for(m=0;m<4;m++){var S=i(w[m],A),D=Q[y[m]][S];p[E+m*v]=D,w[m]=s(w[m],B[y[m]][D],C[y[m]][D],A),w[m]=g(e,w[m]),y[m]=D}for(E*=4;E<t;)S=i(w[3],A),D=o(B[y[3]],S),p[E++]=D,w[3]=s(w[3],B[y[3]][D],C[y[3]][D],A),w[3]=g(e,w[3]),y[3]=D;return p}(e,t);return C&&(v=function(e,t,A,i){new n(e);for(var o=new r.allocUnsafe(i),a=0,s=0;a<i;s++){var g=e[s];if(t[g])for(var c=A.ReadUint7(),h=0;h<=c;h++)o[a++]=g;else o[a++]=g}return o}(v,m,p,y)),B&&(v=function(e,t,A,n){var i=new r.allocUnsafe(n),o=0;if(A<=1)for(var a=0;a<n;a++)i[a]=t[0];else if(A<=2)for(a=0;a<n;a++){if(a%8==0)var s=e[o++];i[a]=t[1&s],s>>=1}else if(A<=4)for(a=0;a<n;a++)a%4==0&&(s=e[o++]),i[a]=t[3&s],s>>=2;else if(A<=16)for(a=0;a<n;a++)a%2==0&&(s=e[o++]),i[a]=t[15&s],s>>=4;return i}(v,E,w,Q)),v}function C(e,t){var A=new n("",0,10);A.WriteByte(t);var i=1&t,o=8&t,a=32&t,s=64&t,g=128&t,I=t>>8;if(16&t||A.WriteUint7(e.length),o)return r.concat([A.buf.slice(0,A.pos),f(0,e,I)]);var C=new r.alloc(0);g&&([C,e]=function(e){for(var t=new Array(256),A=0;A<256;A++)t[A]=0;for(A=0;A<e.length;A++)t[e[A]]++;var i=new Array(256),o=0;for(A=0;A<256;A++)t[A]>0&&(i[A]=o++);if(!(o>16)){if(o<=1)var a=new r.allocUnsafe(0);else if(o<=2){a=new r.allocUnsafe(Math.ceil(e.length/8));var s=-1;for(A=0;A<e.length;A++)A%8==0&&(a[++s]=0),a[s]+=i[e[A]]<<A%8}else if(o<=4)for(a=new r.allocUnsafe(Math.ceil(e.length/4)),s=-1,A=0;A<e.length;A++)A%4==0&&(a[++s]=0),a[s]+=i[e[A]]<<A%4*2;else for(a=new r.allocUnsafe(Math.ceil(e.length/2)),s=-1,A=0;A<e.length;A++)A%2==0&&(a[++s]=0),a[s]+=i[e[A]]<<A%2*4;var g=new n("",0,o+5);for(g.WriteByte(o),s=0,A=0;A<256;A++)t[A]>0&&(t[A]=s++,g.WriteByte(A));return g.WriteUint7(a.length),[g.buf.slice(0,g.pos),a]}}(e));var d=new r.alloc(0);if(s&&([d,e]=function(e){for(var t=new Array(256),A=0;A<256;A++)t[A]=0;var i=-1;for(A=0;A<e.length;A++)t[e[A]]+=e[A]==i?1:-1,i=e[A];var o=0;for(A=0;A<256;A++)t[A]>0&&o++;for(o||(o=1,t[0]=1),(c=new n("",0,o+1+e.length)).WriteByte(o),A=0;A<256;A++)t[A]>0&&c.WriteByte(A);var a=new r.allocUnsafe(e.length),s=0;for(A=0;A<e.length;A++)if(a[s++]=e[A],t[e[A]]>0){i=e[A];for(var g=0;A+g+1<e.length&&e[A+g+1]==i;)g++;c.WriteUint7(g),A+=g}var c,h=E(c.buf.slice(0,c.pos)),f=new n("",0,16);return f.WriteUint7(2*c.pos),f.WriteUint7(s),f.WriteUint7(h.length),[c=r.concat([f.buf.slice(0,f.pos),h]),a.slice(0,s)]}(e)),e.length<4&&1==i&&(i=0,A.buf[0]&=-2),a)var l=e;else l=0==i?E(e):function(e){const t=e.length;for(var A=new n("",0,198156),i=new Array(256),o=new Array(256),a=new Array(256),s=0;s<256;s++)o[s]=new Array(256),a[s]=new Array(256);var g=12;(function(e,t,A){for(var r=0;r<256;r++){A[r]=0;for(var n=0;n<256;n++)t[r][n]=0}var i=0;for(r=0;r<e.length;r++)A[i]++,t[i][e[r]]++,i=e[r];A[i]++,t[0][e[1*(e.length>>2)]]++,t[0][e[2*(e.length>>2)]]++,t[0][e[3*(e.length>>2)]]++,A[0]+=3})(e,o,i),function(e,t,A){for(var r=0;r<256;r++)if(t[r]){var n=Math.ceil(Math.log2(t[r]));n>12&&(n=12),B(e[r],n)}}(o,i);var f=new n("",0,198156);!function(e,t,A){Q(e,A);for(var r=0;r<256;r++)if(A[r])for(var n=0,i=0;i<256;i++)if(A[i])if(n)n--;else if(e.WriteUint7(t[r][i]),!t[r][i]){for(var o=i+1;o<256;o++)if(A[o]){if(0!=t[r][o])break;n++}e.WriteByte(n)}}(f,o,i);var I=E(f.buf.slice(0,f.pos));for(I.length<f.pos?(A.WriteByte(193),A.WriteUint7(f.pos),A.WriteUint7(I.length),A.WriteData(I,I.length)):(A.WriteByte(192),A.WriteData(f.buf,f.pos)),function(e,t,A){for(var r=0;r<256;r++)t[r]&&u(e[r],12)}(o,i),s=0;s<256;s++)if(i[s]){a[s][0]=0;for(var C=1;C<256;C++)a[s][C]=a[s][C-1]+o[s][C-1]}var d=new Array(4),l=new Array(4);for(C=0;C<4;C++)d[C]=32768,l[C]=0;var w=new n("",1.05*t+100>>0,1.05*t+100>>0),y=Math.floor(t/4),m=new Array(4),p=new Array(4);for(C=0;C<4;C++)m[C]=(C+1)*y-2,p[C]=e[m[C]+1];for(p[3]=e[t-1],s=t-2;s>4*y-2;s--)d[3]=h(d[3],w,a[e[s]][p[3]],o[e[s]][p[3]],g),p[3]=e[s];for(;m[0]>=0;)for(C=3;C>=0;C--){var v=e[m[C]];d[C]=h(d[C],w,a[v][p[C]],o[v][p[C]],g),p[C]=v,m[C]--}for(C=3;C>=0;C--)d[C]=h(d[C],w,a[0][p[C]],o[0][p[C]],g);for(s=3;s>=0;s--)c(d[s],w);return r.concat([A.buf.slice(0,A.pos),w.buf.slice(w.pos,w.length)],A.pos+w.length-w.pos)}(e);return r.concat([A.buf.slice(0,A.pos),C,d,l])}function d(e){for(var t=new Array(256),A=0;A<256;A++)t[A]=0;var r=0,n=e.ReadByte(),i=n;do{t[n]=1,r>0?(r--,n++):(n=e.ReadByte())==i+1&&(r=e.ReadByte()),i=n}while(0!=n);return t}function l(e,t){var A=new Array(256),n=new Array(256);!function(e,t,A){for(var r=0;r<256;r++)t[r]=0;var n=d(e);for(r=0;r<256;r++)n[r]>0&&(t[r]=e.ReadUint7());for(u(t,12),A[0]=0,r=0;r<=255;r++)A[r+1]=A[r]+t[r]}(e,A,n);for(var o=a(n,12),c=new Array(4),h=0;h<4;h++)c[h]=e.ReadUint32();var f=new r.allocUnsafe(t);for(h=0;h<t;h++){var I=h%4,C=o[i(c[I],12)];f[h]=C,c[I]=s(c[I],n[C],A[C],12),c[I]=g(e,c[I])}return f}function B(e,t){for(var A=0,r=0;r<256;r++)A+=e[r];const n=1<<t;var i=n/A;do{var o=0,a=0,s=0;for(A=0,r=0;r<256;r++)0!=e[r]&&(o<e[r]&&(o=e[r],a=r),e[r]=Math.floor(e[r]*i),0==e[r]&&(e[r]=1),A+=e[r]);A<n?e[a]+=n-A:A-n<e[a]/2&&e[a]>2?e[a]-=A-n:A!=n&&(i=n/A,s=1)}while(s)}function u(e,t){for(var A=0,r=0;r<256;r++)A+=e[r];if(0!=A&&A!=1<<t){for(var n=0;A<1<<t;)A*=2,n++;for(r=0;r<256;r++)e[r]<<=n}}function Q(e,t){for(var A=0,r=0;r<256;r++)if(t[r])if(A>0)A--;else if(e.WriteByte(r),r>0&&t[r-1]>0){for(A=r+1;A<256&&t[A];A++);A-=r+1,e.WriteByte(A)}e.WriteByte(0)}function E(e){const t=e.length;var A=new n("",0,780),i=new Array(256);!function(e,t){for(var A=0;A<256;A++)t[A]=0;for(A=0;A<e.length;A++)t[e[A]]++}(e,i);var o=Math.ceil(Math.log2(t));o>12&&(o=12),B(i,o),function(e,t){Q(e,t);for(var A=0;A<256;A++)t[A]&&e.WriteUint7(t[A])}(A,i),B(i,12);var a=new Array(256);a[0]=0;for(var s=1;s<256;s++)a[s]=a[s-1]+i[s-1];var g=new Array(4);for(s=0;s<4;s++)g[s]=32768;var f=new n("",1.05*t+100>>0,1.05*t+100>>0);for(s=t-1;s>=0;s--)g[s%4]=h(g[s%4],f,a[e[s]],i[e[s]],12);for(s=3;s>=0;s--)c(g[s],f);return r.concat([A.buf.slice(0,A.pos),f.buf.slice(f.pos,f.length)],A.pos+f.length-f.pos)}e.exports={decode:function(e){return I(new n(e),0)},encode:C}},57561:(e,t,A)=>{var r=A(22609).hp;const n=A(76526),i=A(57379);var o=new(A(85911));function a(e,t){for(var A=e+"";A.length<t;)A="0"+A;return A}function s(e,t,A,r){var n=e[0][0].ReadByte(),i=r-e[0][n].ReadUint32();if(5==n)return t[r]=t[i],A[r]=A[i],t[r];var o=1;t[r]="",A[r]=new Array(256);do{switch(n=e[o][0].ReadByte()){case 2:A[r][o]=e[o][2].ReadChar();break;case 1:A[r][o]=e[o][1].ReadString();break;case 7:A[r][o]=e[o][7].ReadUint32();break;case 3:var s=e[o][3].ReadUint32(),g=e[o][4].ReadByte();A[r][o]=a(s,g);break;case 8:A[r][o]=(A[i][o]>>0)+e[o][8].ReadByte();break;case 9:s=(A[i][o]>>0)+e[o][9].ReadByte(),g=A[i][o].length,A[r][o]=a(s,g);break;case 10:A[r][o]=A[i][o];break;default:A[r][o]=""}t[r]+=A[r][o++]}while(12!=n);return t[r]}function g(e,t,A,r,n,i){for(var o=0;o<r.length;o++)if(!(A>0&&5==t[o][0].type)&&t[o][A])switch(e[0].WriteByte(t[o][A].type),t[o][A].type){case 6:e[6].WriteUint32(t[o][A].val);break;case 5:e[5].WriteUint32(t[o][A].val);break;case 1:e[1].WriteString(t[o][A].val);break;case 2:e[2].WriteChar(t[o][A].val);break;case 7:e[7].WriteUint32(t[o][A].val);break;case 3:e[3].WriteUint32(t[o][A].val),e[4].WriteByte(t[o][A].val.length);break;case 8:case 9:e[t[o][A].type].WriteByte(t[o][A].val)}}function c(e,t,A,r){for(var n=0;n<=12;n++)if(!(e[n].pos<=0)){r.WriteByte(n+(0==n?128:0)),e[n]=e[n].buf.slice(0,e[n].pos);var i=h(e[n],A);r.WriteUint7(i.length),r.WriteData(i,i.length)}}function h(e,t){var A,r=1<<30,n=[0,1,64,65,128,129,201];for(var a in n){var s=n[a];if(!(1&s&&e.length<100||8&s&&e.length%4!=0)){try{var g=t?o.encode(e,s):i.encode(e,s)}catch(e){g=0}g&&r>g.length&&(r=g.length,A=g)}}return A}function f(e,t,A,r,n){var i=0,o=n-1;e[n]=new Array(256),t[r]?e[n][0]={type:5,val:n-t[r]}:e[n][0]={type:6,val:0==n?0:1},t[r]=n;for(var a=r.match(/([a-zA-Z0-9]{1,9})|([^a-zA-Z0-9]+)/g),s=0;s<a.length;s++){var g=s+1,c=1,h=a[s];if(a[s].match(/^0+[0-9]*$/g)?c=3:a[s].match(/^[0-9]+$/g)?c=7:1==a[s].length&&(c=2),o>=0&&e[o][g])if(e[o][g].str==a[s])c=10,h="";else if(7==e[o][g].type||8==e[o][g].type){var f=h-e[o][g].str;A[g]++,f>=0&&f<256&&A[g]>n/2&&(c=8,h=f)}else 3!=e[o][g].type&&9!=e[o][g].type||e[o][g].str.length!=h.length||(f=h-e[o][g].str,A[g]++,f>=0&&f<256&&A[g]>n/2&&(c=9,h=f));e[n][g]={str:a[s],val:h,type:c},i<e[n][g].val.length+3&&(i=e[n][g].val.length+3)}return e[n][++g]={type:12},[g+1,i]}e.exports={encode:function(e,t){var A=e.toString();"\n"==A[A.length-1]&&(A=A.substring(0,A.length-1));var r=A.split("\n"),i=new n("",0,2*A.length+1e4);i.WriteUint32(A.length),i.WriteUint32(r.length),i.WriteByte(t);for(var o=new Array(r.length),a={},s=new Array(256).fill(0),h=0,I=0,C=0;C<r.length;C++){var[d,l]=f(o,a,s,r[C],C);h<d&&(h=d),I<l&&(I=l)}for(var B=0;B<h;B++){for(var u=new Array(13),Q=0;Q<=12;Q++)u[Q]=new n("",0,r.length*I);g(u,o,B,r),c(u,0,t,i)}return i.buf.slice(0,i.pos)},decode:function(e,t,A){(e=new n(e)).ReadUint32();var a=e.ReadUint32(),g=e.ReadByte(),c=function(e,t,A,a){for(var s=-1,g=new Array(256);!e.EOF();){var c=e.ReadByte(),h=128&c,f=64&c,I=63&c;if(h&&(g[++s]=new Array(13)),0!=I&&h){var C=new Array(a-1).fill(10);g[s][0]=new n(r.from([I].concat(C)))}if(f){var d=e.ReadByte(),l=e.ReadByte();g[s][I]=new n(g[d][l].buf)}else{var B=e.ReadUint7(),u=e.ReadData(B);g[s][I]=A?o.decode(u):i.decode(u),g[s][I]=new n(g[s][I])}}return g}(e,0,g,a),h=new Array(a),f=new Array(a),I="";void 0===A&&(A="\n");for(var C=0;C<a;C++)I+=s(c,h,f,C)+A;return I}}},22823:e=>{var t={array:function(e){var t=0,A=0,r=[0,1,3,7,15,31,63,127,255];return function(n){for(var i=0;n>0;){var o=8-t;n>=o?(i<<=o,i|=r[o]&e[A++],t=0,n-=o):(i<<=n,i|=(e[A]&r[n]<<8-n-t)>>8-n-t,t+=n,n=0)}return i}},simple:function(e){var A,r,n=t.header(e),i=[],o=0;do{-1!=(r=t.decompress(e,n))&&(i.push(r),o+=r.byteLength)}while(-1!=r);A=new Uint8Array(o),o=0;for(var a=0;a<i.length;++a)r=i[a],A.set(r,o),o+=r.byteLength;return A},header:function(e){if(4348520!=e(24))throw"No magic number found";var t=e(8)-48;if(t<1||t>9)throw"Not a BZIP archive";return t},decompress:function(e,t,A){for(var r=9e5,n="",i=0;i<6;i++)n+=e(8).toString(16);if("177245385090"==n)return-1;if("314159265359"!=n)throw"eek not valid bzip data";if(e(32),e(1))throw"unsupported obsolete version";var o=e(24);if(o>r)throw"Initial position larger than buffer size";var a=e(16),s=new Uint8Array(256),g=0;for(i=0;i<16;i++)if(a&1<<15-i){var c=e(16);for(d=0;d<16;d++)c&1<<15-d&&(s[g++]=16*i+d)}var h=e(3);if(h<2||h>6)throw"another error";var f=e(15);if(0==f)throw"meh";var I=[];for(i=0;i<h;i++)I[i]=i;var C=new Uint8Array(32768);for(i=0;i<f;i++){for(var d=0;e(1);d++)if(d>=h)throw"whoops another error";var l=I[d];I.splice(d,1),I.splice(0,0,l),C[i]=l}var B=g+2,u=[];for(d=0;d<h;d++){var Q,E,w,y=new Uint8Array(258),m=new Uint8Array(21);for(a=e(5),i=0;i<B;i++){for(;;){if(a<1||a>20)throw"I gave up a while ago on writing error messages";if(!e(1))break;e(1)?a--:a++}y[i]=a}for(Q=E=y[0],i=1;i<B;i++)y[i]>E?E=y[i]:y[i]<Q&&(Q=y[i]);(w=u[d]={}).permute=new Uint32Array(258),w.limit=new Uint32Array(21),w.base=new Uint32Array(21),w.minLen=Q,w.maxLen=E;var p=w.base.subarray(1),v=w.limit.subarray(1),S=0;for(i=Q;i<=E;i++)for(a=0;a<B;a++)y[a]==i&&(w.permute[S++]=a);for(i=Q;i<=E;i++)m[i]=v[i]=0;for(i=0;i<B;i++)m[y[i]]++;for(S=a=0,i=Q;i<E;i++)S+=m[i],v[i]=S-1,S<<=1,p[i+1]=S-(a+=m[i]);v[E]=S+m[E]-1,p[Q]=0}var D,b,R,N=new Uint32Array(256);for(i=0;i<256;i++)I[i]=i;D=b=B=R=0;for(var k=new Uint32Array(r);;){if(!B--){if(B=49,R>=f)throw"meow i'm a kitty, that's an error";p=(w=u[C[R++]]).base.subarray(1),v=w.limit.subarray(1)}for(d=e(i=w.minLen);;){if(i>w.maxLen)throw"rawr i'm a dinosaur";if(d<=v[i])break;i++,d=d<<1|e(1)}if((d-=p[i])<0||d>=258)throw"moo i'm a cow";var q=w.permute[d];if(0!=q&&1!=q){if(D){if(D=0,b+a>=r)throw"Boom.";for(N[l=s[I[0]]]+=a;a--;)k[b++]=l}if(q>g)break;if(b>=r)throw"I can't think of anything. Error";l=I[i=q-1],I.splice(i,1),I.splice(0,0,l),N[l=s[l]]++,k[b++]=l}else D||(D=1,a=0),a+=0==q?D:2*D,D<<=1}if(o<0||o>=b)throw"I'm a monkey and I'm throwing something at someone, namely you";for(d=0,i=0;i<256;i++)c=d+N[i],N[i]=d,d=c;for(i=0;i<b;i++)k[N[l=255&k[i]]]|=i<<8,N[l]++;var F=0,L=0,M=0;b&&(L=255&(F=k[o]),F>>=8,M=-1);var U,x,_,J=new Uint8Array(r),H=0;for(A||(A=1/0);b;){for(b--,x=L,L=255&(F=k[F]),F>>=8,3==M++?(U=L,_=x,L=-1):(U=1,_=L);U--;)if(J[H++]=_,! --A)return J;L!=x&&(M=0)}return J.subarray(0,H)}};e.exports=t},14579:e=>{var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],A=0;A<e.length;A++)t.push(255&e.charCodeAt(A));return t},bytesToString:function(e){for(var t=[],A=0;A<e.length;A++)t.push(String.fromCharCode(e[A]));return t.join("")}}};e.exports=t},93647:e=>{var t,A;t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",A={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&A.rotl(e,8)|4278255360&A.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=A.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],A=0,r=0;A<e.length;A++,r+=8)t[r>>>5]|=e[A]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],A=0;A<32*e.length;A+=8)t.push(e[A>>>5]>>>24-A%32&255);return t},bytesToHex:function(e){for(var t=[],A=0;A<e.length;A++)t.push((e[A]>>>4).toString(16)),t.push((15&e[A]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],A=0;A<e.length;A+=2)t.push(parseInt(e.substr(A,2),16));return t},bytesToBase64:function(e){for(var A=[],r=0;r<e.length;r+=3)for(var n=e[r]<<16|e[r+1]<<8|e[r+2],i=0;i<4;i++)8*r+6*i<=8*e.length?A.push(t.charAt(n>>>6*(3-i)&63)):A.push("=");return A.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var A=[],r=0,n=0;r<e.length;n=++r%4)0!=n&&A.push((t.indexOf(e.charAt(r-1))&Math.pow(2,-2*n+8)-1)<<2*n|t.indexOf(e.charAt(r))>>>6-2*n);return A}},e.exports=A},80962:e=>{function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},12363:(e,t,A)=>{var r,n,i,o,a;r=A(93647),n=A(14579).utf8,i=A(80962),o=A(14579).bin,(a=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?o.stringToBytes(e):n.stringToBytes(e):i(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var A=r.bytesToWords(e),s=8*e.length,g=1732584193,c=-271733879,h=-1732584194,f=271733878,I=0;I<A.length;I++)A[I]=16711935&(A[I]<<8|A[I]>>>24)|4278255360&(A[I]<<24|A[I]>>>8);A[s>>>5]|=128<<s%32,A[14+(s+64>>>9<<4)]=s;var C=a._ff,d=a._gg,l=a._hh,B=a._ii;for(I=0;I<A.length;I+=16){var u=g,Q=c,E=h,w=f;g=C(g,c,h,f,A[I+0],7,-680876936),f=C(f,g,c,h,A[I+1],12,-389564586),h=C(h,f,g,c,A[I+2],17,606105819),c=C(c,h,f,g,A[I+3],22,-1044525330),g=C(g,c,h,f,A[I+4],7,-176418897),f=C(f,g,c,h,A[I+5],12,1200080426),h=C(h,f,g,c,A[I+6],17,-1473231341),c=C(c,h,f,g,A[I+7],22,-45705983),g=C(g,c,h,f,A[I+8],7,1770035416),f=C(f,g,c,h,A[I+9],12,-1958414417),h=C(h,f,g,c,A[I+10],17,-42063),c=C(c,h,f,g,A[I+11],22,-1990404162),g=C(g,c,h,f,A[I+12],7,1804603682),f=C(f,g,c,h,A[I+13],12,-40341101),h=C(h,f,g,c,A[I+14],17,-1502002290),g=d(g,c=C(c,h,f,g,A[I+15],22,1236535329),h,f,A[I+1],5,-165796510),f=d(f,g,c,h,A[I+6],9,-1069501632),h=d(h,f,g,c,A[I+11],14,643717713),c=d(c,h,f,g,A[I+0],20,-373897302),g=d(g,c,h,f,A[I+5],5,-701558691),f=d(f,g,c,h,A[I+10],9,38016083),h=d(h,f,g,c,A[I+15],14,-660478335),c=d(c,h,f,g,A[I+4],20,-405537848),g=d(g,c,h,f,A[I+9],5,568446438),f=d(f,g,c,h,A[I+14],9,-1019803690),h=d(h,f,g,c,A[I+3],14,-187363961),c=d(c,h,f,g,A[I+8],20,1163531501),g=d(g,c,h,f,A[I+13],5,-1444681467),f=d(f,g,c,h,A[I+2],9,-51403784),h=d(h,f,g,c,A[I+7],14,1735328473),g=l(g,c=d(c,h,f,g,A[I+12],20,-1926607734),h,f,A[I+5],4,-378558),f=l(f,g,c,h,A[I+8],11,-2022574463),h=l(h,f,g,c,A[I+11],16,1839030562),c=l(c,h,f,g,A[I+14],23,-35309556),g=l(g,c,h,f,A[I+1],4,-1530992060),f=l(f,g,c,h,A[I+4],11,1272893353),h=l(h,f,g,c,A[I+7],16,-155497632),c=l(c,h,f,g,A[I+10],23,-1094730640),g=l(g,c,h,f,A[I+13],4,681279174),f=l(f,g,c,h,A[I+0],11,-358537222),h=l(h,f,g,c,A[I+3],16,-722521979),c=l(c,h,f,g,A[I+6],23,76029189),g=l(g,c,h,f,A[I+9],4,-640364487),f=l(f,g,c,h,A[I+12],11,-421815835),h=l(h,f,g,c,A[I+15],16,530742520),g=B(g,c=l(c,h,f,g,A[I+2],23,-995338651),h,f,A[I+0],6,-198630844),f=B(f,g,c,h,A[I+7],10,1126891415),h=B(h,f,g,c,A[I+14],15,-1416354905),c=B(c,h,f,g,A[I+5],21,-57434055),g=B(g,c,h,f,A[I+12],6,1700485571),f=B(f,g,c,h,A[I+3],10,-1894986606),h=B(h,f,g,c,A[I+10],15,-1051523),c=B(c,h,f,g,A[I+1],21,-2054922799),g=B(g,c,h,f,A[I+8],6,1873313359),f=B(f,g,c,h,A[I+15],10,-30611744),h=B(h,f,g,c,A[I+6],15,-1560198380),c=B(c,h,f,g,A[I+13],21,1309151649),g=B(g,c,h,f,A[I+4],6,-145523070),f=B(f,g,c,h,A[I+11],10,-1120210379),h=B(h,f,g,c,A[I+2],15,718787259),c=B(c,h,f,g,A[I+9],21,-343485551),g=g+u>>>0,c=c+Q>>>0,h=h+E>>>0,f=f+w>>>0}return r.endian([g,c,h,f])})._ff=function(e,t,A,r,n,i,o){var a=e+(t&A|~t&r)+(n>>>0)+o;return(a<<i|a>>>32-i)+t},a._gg=function(e,t,A,r,n,i,o){var a=e+(t&r|A&~r)+(n>>>0)+o;return(a<<i|a>>>32-i)+t},a._hh=function(e,t,A,r,n,i,o){var a=e+(t^A^r)+(n>>>0)+o;return(a<<i|a>>>32-i)+t},a._ii=function(e,t,A,r,n,i,o){var a=e+(A^(t|~r))+(n>>>0)+o;return(a<<i|a>>>32-i)+t},a._blocksize=16,a._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var A=r.wordsToBytes(a(e,t));return t&&t.asBytes?A:t&&t.asString?o.bytesToString(A):r.bytesToHex(A)}},41967:function(e,t,A){var r;r=e=>(()=>{"use strict";var t=[,e=>{e.exports="data:application/wasm;base64,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IgENAAsLIAJCf4UL1RACDH8CfgJAAkAgACgCJEUNACAAKAIAIQIMAQtBACECIABBADoAKCAAQgA3AwAgAEIANwMYIABByABqQQBB5AAQhoCAgAAaIABBrAFqQQw2AgALIAAgASgCBCIDNgIQIABBsAFqIQQgAEHgAGohBSAAQcgAaiEGIABBtgFqIQcgAEGoAWohCCABKAIQIQkCQAJAAkACQANAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAIOCgECAAQFBgcICQoPCyABKAIAIQogACgCqAEhAiAAKAKsASELIAEoAgQhDCABKAIIIQ0MAgsgCCAAKAKoASIMakEIaiABKAIAIAEoAgQiAmogASgCCCACayICIAAoAqwBIAxrIgwgAiAMSRsiAhCHgICAABogASABKAIEIAJqNgIEQQAhDCAAQQAgACgCqAEgAmoiAiACIAAoAqwBIgtGGzYCqAEgAiALRw0RIABBATYCAAJAIARBqIiAgABBBhCEgICAAEUNAEEFIQwMEgsgB0ECQQAQjYCAgAAgACgAuAFHDRBBBiEMIActAAANESAAIAAtALcBIgI2AiAgAkEESw0RQQEgAnRBE3FFDRELIAEoAgQiDCABKAIIIg1GDQ4CQCABKAIAIgogDGotAAAiCw0AIAAgDDYCECABIAxBAWo2AgRBBiECDAwLQQAhAiAAQQA2AqgBIABBAjYCACAAIAtBAnRBBGoiCzYCrAEgACALNgJACyAIIAJqQQhqIAogDGogDSAMayIMIAsgAmsiAiAMIAJJGyICEIeAgIAAGiABIAIgASgCBGo2AgRBACEMIABBACAAKAKoASACaiICIAIgACgCrAEiC0YbNgKoASACIAtHDQ8gACACQXxqIgI2AqwBQQchDCAEIAJBABCNgICAACAAIAAoAqwBIgtqQbABaigAAEcNDyAAQQI2AqgBIAAtALEBIgJBP3ENDAJAAkAgAkHAAHFFDQAgACAEIAggCxCRgICAAEEBRw0RIAAgACkDCDcDMCAALQCxASECDAELIABCfzcDMAtCfyEOAkAgAkEYdEEYdUF/Sg0AIAAgBCAIIAAoAqwBEJGAgIAAQQFHDRAgACkDCCEOCyAAIA43AzggACgCrAEiDSAAKAKoASICa0ECSQ0PIAAgAkEBaiIKNgKoASAIIAJqQQhq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IgM2AhAgACAOQQh0IAAoAgwgCWotAAByIg42AgQgAyEJCwJAAkAgDiALQQt2IA8vAQAiCmwiA08iEg0AIAAgAzYCACAKQYAQIAprQQV2aiEKDAELIAAgDiADayIONgIEIAAgCyADayIDNgIAIAogCkEFdmshCkEAIQ0LIA8gCjsBACANIBFzIQ0gBEEBdCASciIEQYACSQ0ACwsgACACQQFqNgIgIAAoAhggAmogBDoAAAJAIAAoAiQgACgCICICTw0AIAAgAjYCJAtBACEDAkAgACgCZCIEQQRJDQACQCAEQQlLDQAgBEF9aiEDDAELIARBemohAwsgACADNgJkDAELIAAgDiADayIONgIEIAAgBCADayIDNgIAIA0gDyAPQQV2azsBACAAIApBAXRqIg9B+ANqIQQCQAJAIANB////B00NACAJIQoMAQsgACADQQh0IgM2AgAgACAJQQFqIgo2AhAgACAOQQh0IAAoAgwgCWotAAByIg42AgQLAkACQCAOIANBC3YgBC8BACINbCIJSQ0AIAAgDiAJayIONgIEIAAgAyAJayIDNgIAIAQgDSANQQV2azsBACAPQZAEaiENAkACQCADQf///wdNDQAgCiEQDAELIAAgA0EIdCIDNgIAIAAgCkEBaiIQNgIQIAAgDkEIdCAAKAIMIApqLQAAciIONgIECwJAAkAgDiADQQt2IA0vAQAiCWwiBE8NACANIAlBgBAgCWtBBXZqOwEAIAxB2ARqIQMCQCAEQf///wdLDQAgACAEQQh0IgQ2AgAgACAQQQFqNgIQIAAgDkEIdCAAKAIMIBBqLQAAciIONgIECwJAIA4gBEELdiADLwEAIg1sIglJDQAgACAOIAlrNgIEIAAgBCAJazYCACADIA0gDUEFdms7AQAMAgsgAyANQYAQIA1rQQV2ajsBACAAIAk2AgAgAEEBNgJoIABBCUELIAAoAmRBB0kbNgJkDAMLIAAgDiAEayIONgIEIA0gCSAJQQV2azsBACAPQagEaiENAkACQCADIARrIgNB////B00NACAQIQoMAQsgACADQQh0IgM2AgAgACAQQQFqIgo2AhAgACAOQQh0IAAoAgwgEGotAAByIg42AgQLAkACQCAOIANBC3YgDS8BACIEbCIJTw0AIAAgCTYCACANIARBgBAgBGtBBXZqOwEAIAAoAlghAwwBCyAAIA4gCWsiDjYCBCANIAQgBEEFdms7AQAgD0HABGohBAJAIAMgCWsiA0H///8HSw0AIAAgA0EIdCIDNgIAIAAgCkEBajYCECAAIA5BCHQgACgCDCAKai0AAHIiDjYCBAsCQAJAIA4gA0ELdiAELwEAIg1sIglPDQAgACAJNgIAIAQgDUGAECANa0EFdmo7AQAgACgCXCEDDAELIAAgDiAJazYCBCAAIAMgCWs2AgAgACgCYCEDIAAgACgCXDYCYCAEIA0gDUEFdms7AQALIAAgACgCWDYCXAsgACAAKAJUNgJYIAAgAzYCVAsgAEEIQQsgACgCZEEHSRs2AmQgACAHIAsQn4CAgAAMAQsgBCANQYAQIA1rQQV2ajsBACAAIAk2AgAgACAAKAJcNgJgIAAgACkCVDcCWCAAQQdBCiAAKAJkQQdJGzYCZCAAIAUgCxCfgICAACAAKAJoIgNBfmpBAyADQQZJGyEKIAAoAgAhA0EBIQ4DQCAAIApBB3RqIA5BAXQiDmpB2AdqIQ0CQAJAIANBgICACEkNACAAKAIEIQQMAQsgACADQQh0IgM2AgAgACAAKAIQIgRBAWo2AhAgACAAKAIEQQh0IAQgACgCDGotAAByIgQ2AgQLAkACQCAEIANBC3YgDS8BACIJbCIPSQ0AIAAgBCAPayIENgIEIAAgAyAPayIDNgIAIA0gCSAJQQV2azsBACAOQQFyIQ4MAQsgACAPNgIAIA0gCUGAECAJa0EFdmo7AQAgDyEDCyAOQcAASQ0ACwJAIA5BQGoiCUEDSw0AIAAgCTYCVAwBCyAAIA5BAXFBAnIiDTYCVCAJQQF2IQ8CQCAJQQ1LDQAgACANIA9Bf2oiDHQiCzYCVEEBIQ0gCCALQQF0akGEC2ohEEE/IA5rIRFBACEPA0AgECARIA1qQQF0aiEOAkACQCADQf///wdNDQAgAyEKDAELIAAgA0EIdCIKNgIAIAAgACgCECIDQQFqNgIQIAAgBEEIdCADIAAoAgxqLQAAciIENgIECwJAAkAgBCAKQQt2IA4vAQAiCWwiA0kNACAAIAQgA2siBDYCBCAAIAogA2siAzYCACAOIAkgCUEFdms7AQAgAEEBIA90IAtqIgs2AlQgDUEBdEEBciENDAELIAAgAzYCACAOIAlBgBAgCWtBBXZqOwEAIA1BAXQhDQsgDCAPQQFqIg9HDQAMAgsLIA9Be2ohDgNAAkAgA0H///8HSw0AIAAgA0EIdCIDNgIAIAAgACgCECIJQQFqNgIQIARBCHQgCSAAKAIMai0AAHIhBAsgACADQQF2IgM2AgAgACAEIANrIgRBH3UiCSANQQF0akEBaiINNgJUIAAgCSADcSAEaiIENgIEIA5Bf2oiDg0ACyAAIA1BBHQiCzYCVEEAIQ9BASEOA0AgACAOQQF0Ig5qQbwNaiENAkACQCADQf///wdNDQAgAyEKDAELIAAgA0EIdCIKNgIAIAAgACgCECIDQQFqNgIQIAAgBEEIdCADIAAoAgxqLQAAciIENgIECwJAAkAgBCAKQQt2IA0vAQAiCWwiA0kNACAAIAQgA2siBDYCBCAAIAogA2siAzYCACANIAkgCUEFdms7AQAgAEEBIA90IAtqIgs2AlQgDkEBciEODAELIAAgAzYCACANIAlBgBAgCWtBBXZqOwEACyAPQQFqIg9BBEcNAAsLAkAgASAGIAAoAlQQnoCAgAANAEEADwsgACgCICECCyACIAAoAihJDQALC0EBIQMCQCAAKAIAIgRB////B0sNACAAIARBCHQ2AgBBASEDIAAgACgCECIEQQFqNgIQIAAgACgCBEEIdCAEIAAoAgxqLQAAcjYCBAsgAwtwAQF/AkBBqN4BEICAgIAAIgJFDQAgAkE0aiABNgIAIAJBPGogADYCAAJAAkACQCAAQX9qDgIAAQILIAIgARCAgICAACIANgIYIAANASACEIKAgIAADAILIAJBADYCGCACQThqQQA2AgALIAIPC0EAC9IBAQJ/QQYhAgJAIAFBJ0sNACAAQTBqIAFBAXFBAnIgAUEBdkELanQiATYCAAJAAkAgAEE8aigCACIDRQ0AQQQhAiABIABBNGooAgBLDQIgAEEsaiABNgIAIANBAkcNACAAQThqIgMoAgAgAU8NACAAIAE2AjggACgCGBCCgICAACAAIAAoAjAQgICAgAAiATYCGCABDQBBAyECDAELQQAhAiAAQQA2AkAgAEHQAGpBAToAACAAQegAakEANgIAIABB5N0BaiEDCyADQQA2AgALIAILIwACQCAAQTxqKAIARQ0AIAAoAhgQgoCAgAALIAAQgoCAgAAL9QEBBH9BACEDAkAgACgCDCACTQ0AIAAoAhggAk0NACABIAEoAgAiBCAAKAIQIAAoAggiBWsiBiAEIAYgBEkbIgRrNgIAIAUgAkF/c2ohAQJAIAUgAksNACAAKAIUIAFqIQELIAAoAgAiAiABai0AACEGQQEhAyAAIAVBAWo2AgggAiAFaiAGOgAAAkAgBEF/aiICRQ0AA0AgACgCACIFQQAgAUEBaiIBIAEgACgCFEYbIgFqLQAAIQQgACAAKAIIIgZBAWo2AgggBSAGaiAEOgAAIAJBf2oiAg0ACwsgACgCDCAAKAIIIgFPDQAgACABNgIMCyADC8gEAQd/AkACQCAAKAIAIgNBgICACEkNACAAKAIEIQQMAQsgACADQQh0IgM2AgAgACAAKAIQIgVBAWo2AhAgACAAKAIEQQh0IAUgACgCDGotAAByIgQ2AgQLAkACQCAEIANBC3YgAS8BACIGbCIFTw0AIAEgBkGAECAGa0EFdmo7AQAgASACQQR0akEEaiEHQQghCEECIQkMAQsgACAEIAVrIgQ2AgQgASAGIAZBBXZrOwEAAkAgAyAFayIDQf///wdLDQAgACADQQh0IgM2AgAgACAAKAIQIgVBAWo2AhAgACAEQQh0IAUgACgCDGotAAByIgQ2AgQLAkAgBCADQQt2IAEvAQIiBmwiBU8NACABIAZBgBAgBmtBBXZqOwECIAEgAkEEdGpBhAJqIQdBCCEIQQohCQwBCyAAIAQgBWsiBDYCBCABIAYgBkEFdms7AQIgAUGEBGohByADIAVrIQVBgAIhCEESIQkLIABB6ABqIAk2AgBBASEBA0AgByABQQF0IgFqIQMCQAJAIAVB////B00NACAFIQIMAQsgACAFQQh0IgI2AgAgACAAKAIQIgVBAWo2AhAgACAEQQh0IAUgACgCDGotAAByIgQ2AgQLAkACQCAEIAJBC3YgAy8BACIGbCIFSQ0AIAAgBCAFayIENgIEIAAgAiAFayIFNgIAIAMgBiAGQQV2azsBACABQQFyIQEMAQsgACAFNgIAIAMgBkGAECAGa0EFdmo7AQALIAEgCEkNAAsgAEHoAGogASAIayAJajYCAAsLNQEAQYAICy4IAAAAEAAAABgAAAAgAAAAKAAAADAAAABAAAAAUAAAAIAAAAAAAQAA/Td6WFoA"},t=>{t.exports=e}],A={};function r(e){var n=A[e];if(void 0!==n)return n.exports;var i=A[e]={exports:{}};return t[e](i,i.exports,r),i.exports}r.d=(e,t)=>{for(var A in t)r.o(t,A)&&!r.o(e,A)&&Object.defineProperty(e,A,{enumerable:!0,get:t[A]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return(()=>{r.r(n),r.d(n,{XzReadableStream:()=>i});var e=r(1);const t=globalThis.ReadableStream||r(2).ReadableStream;class A{constructor(e){this.exports=e.exports,this.memory=this.exports.memory,this.ptr=this.exports.create_context(),this._refresh(),this.bufSize=this.mem32[0],this.inStart=this.mem32[1]-this.ptr,this.inEnd=this.inStart+this.bufSize,this.outStart=this.mem32[4]-this.ptr}supplyInput(e){this.mem8.subarray(this.inStart,this.inEnd).set(e,0),this.exports.supply_input(this.ptr,e.byteLength),this._refresh()}getNextOutput(){const e=this.exports.get_next_output(this.ptr);if(this._refresh(),0!==e&&1!==e)throw new Error(`get_next_output failed with error code ${e}`);return{outChunk:this.mem8.slice(this.outStart,this.outStart+this.mem32[5]),finished:1===e}}needsMoreInput(){return this.mem32[2]===this.mem32[3]}outputBufferIsFull(){return this.mem32[5]===this.bufSize}resetOutputBuffer(){this.outPos=this.mem32[5]=0}dispose(){this.exports.destroy_context(this.ptr),this.exports=null}_refresh(){this.memory.buffer!==this.mem8?.buffer&&(this.mem8=new Uint8Array(this.memory.buffer,this.ptr),this.mem32=new Uint32Array(this.memory.buffer,this.ptr))}}class i extends t{static _moduleInstancePromise;static _moduleInstance;static async _getModuleInstance(){const t=e.replace("data:application/wasm;base64,",""),A=Uint8Array.from(atob(t),(e=>e.charCodeAt(0))).buffer,r=await WebAssembly.instantiate(A,{});i._moduleInstance=r.instance}constructor(e){let t,r=null;const n=e.getReader();super({async start(e){i._moduleInstance||await(i._moduleInstancePromise||(i._moduleInstancePromise=i._getModuleInstance())),t=new A(i._moduleInstance)},async pull(e){if(t.needsMoreInput()){if(null===r||0===r.byteLength){const{done:e,value:t}=await n.read();e||(r=t)}const e=Math.min(t.bufSize,r.byteLength);t.supplyInput(r.subarray(0,e)),r=r.subarray(e)}const A=t.getNextOutput();e.enqueue(A.outChunk),t.resetOutputBuffer(),A.finished&&(t.dispose(),e.close())},cancel:()=>(t.dispose(),n.cancel())})}}})(),n})(),e.exports=r(A(81239))}}]);
//# sourceMappingURL=2369.fc14cad7.chunk.js.map