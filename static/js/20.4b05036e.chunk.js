"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[20],{70020:(e,t,n)=>{n.r(t),n.d(t,{default:()=>k});var o=n(67758),a=n(92562),s=n(99546),i=n(91468),r=n(7552),c=n(35300),l=n(87083),f=n(68584),d=n(68446),u=n(75785),g=n(67112),p=n(69500);function m(e){const t=(0,o.c)(12),{config:n}=e,[a,i]=(0,r.useState)(),[d,u]=(0,r.useState)();let m;t[0]!==n?(m=(0,s.getSession)(n),t[0]=n,t[1]=m):m=t[1];const x=m,{rpcManager:b}=x;let j,h,C;t[2]!==n||t[3]!==b?(j=()=>{(async()=>{try{const e=(0,f.readConfObject)(n,"adapter"),t=await b.call(n.trackId,"CoreGetInfo",{adapterConfig:e});u(t)}catch(e){const t=e;console.error(t),i(t)}})()},h=[n,b],t[2]=n,t[3]=b,t[4]=j,t[5]=h):(j=t[4],h=t[5]),(0,r.useEffect)(j,h),t[6]!==d?(C="string"==typeof d?{header:`<pre>${d.replaceAll("<","&lt;").replaceAll(">","&gt;")}</pre>`}:d||{},t[6]=d,t[7]=C):C=t[7];const A=C;let v;return t[8]!==A||t[9]!==a||t[10]!==d?(v=(0,p.jsx)(l.default,{title:"File info",children:a?(0,p.jsx)(g.ErrorMessage,{error:a}):void 0===d?(0,p.jsx)(g.LoadingEllipses,{message:"Loading file data"}):(0,p.jsx)(c.default,{attributes:A})}),t[8]=A,t[9]=a,t[10]=d,t[11]=v):v=t[11],v}var x=n(69092),b=n(31409),j=n.n(b);function h(e,t){for(const n in e)n===t?delete e[n]:"object"==typeof e[n]&&h(e[n],t);return e}const C=(0,u.n9)()({button:{float:"right"}}),A=function(e){const t=(0,o.c)(11),{conf:n,setShowRefNames:a}=e,[s,i]=(0,r.useState)(!1),{classes:c}=C();let l,f;t[0]!==a?(l=(0,p.jsx)(x.A,{variant:"contained",color:"secondary",onClick:()=>{a(!0)},children:"Show ref names"}),t[0]=a,t[1]=l):l=t[1],t[2]!==n?(f=()=>{const e=h(structuredClone(n),"baseUri");j()(JSON.stringify(e,null,2)),i(!0),setTimeout(()=>{i(!1)},1e3)},t[2]=n,t[3]=f):f=t[3];const d=s?"Copied to clipboard!":"Copy config";let u,g;return t[4]!==f||t[5]!==d?(u=(0,p.jsx)(x.A,{variant:"contained",onClick:f,children:d}),t[4]=f,t[5]=d,t[6]=u):u=t[6],t[7]!==c.button||t[8]!==l||t[9]!==u?(g=(0,p.jsxs)("span",{className:c.button,children:[l,u]}),t[7]=c.button,t[8]=l,t[9]=u,t[10]=g):g=t[10],g};var v=n(76218);const y=(0,u.n9)()(e=>({container:{minWidth:800},refNames:{maxHeight:300,overflow:"auto",flexGrow:1,background:e.palette.background.default}})),N=(0,d.observer)(function({config:e,onClose:t}){const{classes:n}=y(),[o,a]=(0,r.useState)(),[c,l]=(0,r.useState)(),[d,u]=(0,r.useState)(!1),{rpcManager:m}=(0,s.getSession)(e);(0,r.useEffect)(()=>{(async()=>{try{const t=await Promise.all([...new Set((0,i.getConfAssemblyNames)(e))].map(async t=>{const n=(0,f.readConfObject)(e,"adapter");return[t,await m.call(e.trackId,"CoreGetRefNames",{adapterConfig:n,regions:[{assemblyName:t}]})]}));l(Object.fromEntries(t))}catch(e){console.error(e),a(e)}})()},[e,m]);const b=c?Object.entries(c):[],h=b.flatMap(([e,t])=>[`--- ${e} ---`,...t.slice(0,1e4),t.length>1e4?`\nToo many refNames to show in browser for ${e}, use "Copy ref names" button to copy to clipboard`:""]).filter(e=>!!e).join("\n");return(0,p.jsx)(g.Dialog,{open:!0,title:"Reference sequence names used in track",onClose:t,maxWidth:"xl",children:(0,p.jsx)(v.A,{className:n.container,children:o?(0,p.jsx)(g.ErrorMessage,{error:o}):void 0===c?(0,p.jsx)(g.LoadingEllipses,{message:"Loading refNames"}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(x.A,{variant:"contained",onClick:()=>{j()(b.flatMap(([e,t])=>[`--- ${e} ---`,...t]).filter(e=>!!e).join("\n")),u(!0),setTimeout(()=>{u(!1)},1e3)},children:d?"Copied to clipboard!":"Copy ref names"}),(0,p.jsx)("pre",{className:n.refNames,children:h})]})})})}),w=(0,u.n9)()({content:{minWidth:800}}),S=(0,d.observer)(function({config:e}){const t=(0,f.readConfObject)(e),n=(0,s.getSession)(e),{classes:o}=w(),[a,i]=(0,r.useState)(!1),d=(0,f.getConf)(n,["formatAbout","hideUris"])||(0,f.readConfObject)(e,["formatAbout","hideUris"]),{pluginManager:u}=(0,s.getEnv)(n),g=function({config:e,pluginManager:t}){const n=(0,s.getSession)(e),o=(0,f.readConfObject)(e);return t.evaluateExtensionPoint("Core-customizeAbout",{config:{...o,...(0,f.getConf)(n,["formatAbout","config"],{config:o}),...(0,f.readConfObject)(e,["formatAbout","config"],{config:o})}},{session:n,config:e})}({config:e,pluginManager:u}),x=u.evaluateExtensionPoint("Core-extraAboutPanel",null,{session:n,config:e}),b=["displays","baseUri","refNames","formatAbout"];return(0,p.jsxs)("div",{className:o.content,children:[(0,p.jsxs)(l.default,{title:"Configuration",children:[d?null:(0,p.jsx)(A,{conf:t,setShowRefNames:i}),(0,p.jsx)(c.default,{attributes:g.config,omit:[...b,"metadata"],hideUris:d})]}),g.config.metadata?(0,p.jsx)(l.default,{title:"Metadata",children:(0,p.jsx)(c.default,{attributes:g.config.metadata,omit:b,hideUris:d})}):null,x?(0,p.jsx)(l.default,{title:x.name,children:(0,p.jsx)(x.Component,{config:e})}):null,(0,p.jsx)(m,{config:e}),a?(0,p.jsx)(N,{config:e,onClose:()=>{i(!1)}}):null]})});function k(e){const t=(0,o.c)(10),{config:n,handleClose:r}=e;let c,l;if(t[0]!==n){const e=(0,s.getSession)(n);l=(0,i.getTrackName)(n,e);const{pluginManager:o}=(0,s.getEnv)(e);c=o.evaluateExtensionPoint("Core-replaceAbout",S,{session:e,config:n}),t[0]=n,t[1]=c,t[2]=l}else c=t[1],l=t[2];const f=c;let d,u;return t[3]!==f||t[4]!==n?(d=(0,p.jsx)(f,{config:n}),t[3]=f,t[4]=n,t[5]=d):d=t[5],t[6]!==r||t[7]!==d||t[8]!==l?(u=(0,p.jsx)(a.A,{open:!0,onClose:r,title:l,maxWidth:"xl",children:d}),t[6]=r,t[7]=d,t[8]=l,t[9]=u):u=t[9],u}},87083:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var o=n(67758),a=n(48759),s=n(61282),i=n(75068),r=n(3032),c=n(76386),l=n(75785),f=n(69500);const d=(0,l.n9)()(e=>({expansionPanelDetails:{display:"block",padding:e.spacing(1)},icon:{color:e.palette.tertiary.contrastText||"#fff"}}));function u(e){const t=(0,o.c)(14),{children:n,title:l,defaultExpanded:u}=e,g=void 0===u||u,{classes:p}=d();let m,x,b,j,h;return t[0]!==p.icon?(m=(0,f.jsx)(a.A,{className:p.icon}),t[0]=p.icon,t[1]=m):m=t[1],t[2]!==l?(x=(0,f.jsx)(s.A,{variant:"button",children:l}),t[2]=l,t[3]=x):x=t[3],t[4]!==m||t[5]!==x?(b=(0,f.jsx)(i.A,{expandIcon:m,children:x}),t[4]=m,t[5]=x,t[6]=b):b=t[6],t[7]!==n||t[8]!==p.expansionPanelDetails?(j=(0,f.jsx)(r.A,{className:p.expansionPanelDetails,children:n}),t[7]=n,t[8]=p.expansionPanelDetails,t[9]=j):j=t[9],t[10]!==g||t[11]!==b||t[12]!==j?(h=(0,f.jsxs)(c.A,{defaultExpanded:g,children:[b,j]}),t[10]=g,t[11]=b,t[12]=j,t[13]=h):h=t[13],h}}}]);
//# sourceMappingURL=20.4b05036e.chunk.js.map