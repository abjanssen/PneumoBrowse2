{"version":3,"file":"static/js/6589.04f438ce.chunk.js","mappings":"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","sources":["webpack://@jbrowse/web/../../plugins/sequence/src/DivSequenceRenderer/components/Sequence.tsx","webpack://@jbrowse/web/../../plugins/sequence/src/DivSequenceRenderer/components/Translation.tsx","webpack://@jbrowse/web/../../plugins/sequence/src/DivSequenceRenderer/components/DivSequenceRendering.tsx"],"sourcesContent":["import { bpSpanPx } from '@jbrowse/core/util'\nimport { useTheme } from '@mui/material'\n\nimport type { Feature, Region } from '@jbrowse/core/util'\n\nexport default function Sequence({\n  bpPerPx,\n  region,\n  feature,\n  sequenceType,\n  height,\n  seq,\n  y,\n}: {\n  seq: string\n  bpPerPx: number\n  sequenceType: string\n  height: number\n  region: Region\n  feature: Feature\n  y: number\n}) {\n  const theme = useTheme()\n  const render = 1 / bpPerPx >= 12\n  const s = feature.get('start')\n  const e = feature.get('end')\n  const [leftPx, rightPx] = bpSpanPx(s, e, region, bpPerPx)\n  const reverse = region.reversed\n  const len = e - s\n  const w = Math.max((rightPx - leftPx) / len, 0.8)\n\n  let svg = ''\n  for (let i = 0, l = seq.length; i < l; i++) {\n    const letter = seq[i]!\n    const color =\n      sequenceType === 'dna'\n        ? // @ts-expect-error\n          theme.palette.bases[letter.toUpperCase()]\n        : undefined\n    const x = reverse ? rightPx - (i + 1) * w : leftPx + i * w\n    const fill = color ? color.main : '#aaa'\n    const stroke = render ? '#555' : 'none'\n\n    svg += `<rect x=\"${x}\" y=\"${y}\" width=\"${w}\" height=\"${height}\" fill=\"${fill}\" stroke=\"${stroke}\"/>`\n\n    if (render) {\n      const textFill = color\n        ? theme.palette.getContrastText(color.main)\n        : 'black'\n      svg += `<text x=\"${x + w / 2}\" y=\"${y + height / 2}\" dominant-baseline=\"middle\" text-anchor=\"middle\" font-size=\"${height - 2}\" fill=\"${textFill}\">${letter}</text>`\n    }\n  }\n\n  return <g dangerouslySetInnerHTML={{ __html: svg }} />\n}\n","import { defaultStarts, defaultStops, revcom } from '@jbrowse/core/util'\nimport { useTheme } from '@mui/material'\n\nimport type { Frame, Region } from '@jbrowse/core/util'\n\nexport default function Translation({\n  codonTable,\n  seq,\n  frame,\n  width,\n  bpPerPx,\n  colorByCDS,\n  region,\n  seqStart,\n  height,\n  y,\n  reverse = false,\n}: {\n  codonTable: Record<string, string>\n  width: number\n  seq: string\n  frame: Frame\n  colorByCDS: boolean\n  bpPerPx: number\n  region: Region\n  seqStart: number\n  reverse?: boolean\n  height: number\n  y: number\n}) {\n  const theme = useTheme()\n  const normalizedFrame = Math.abs(frame) - 1\n  const seqFrame = seqStart % 3\n  const frameShift = (normalizedFrame - seqFrame + 3) % 3\n\n  const frameShiftAdjustedSeqLength = seq.length - frameShift\n  const multipleOfThreeLength =\n    frameShiftAdjustedSeqLength - (frameShiftAdjustedSeqLength % 3)\n  const seqSliced = seq.slice(frameShift, frameShift + multipleOfThreeLength)\n\n  const translated: { letter: string; codon: string }[] = []\n  for (let i = 0; i < seqSliced.length; i += 3) {\n    const codon = seqSliced.slice(i, i + 3)\n    const normalizedCodon = reverse ? revcom(codon) : codon\n    const aminoAcid = codonTable[normalizedCodon] || ''\n    translated.push({\n      letter: aminoAcid,\n      codon: normalizedCodon.toUpperCase(),\n    })\n  }\n\n  const codonWidth = (1 / bpPerPx) * 3\n  const renderLetter = 1 / bpPerPx >= 12\n  const frameOffset = frameShift / bpPerPx\n  const startOffset = (region.start - seqStart) / bpPerPx\n  const offset = frameOffset - startOffset\n  const defaultFill = colorByCDS\n    ? theme.palette.framesCDS.at(frame)?.main\n    : theme.palette.frames.at(frame)?.main\n\n  let svg = `<rect x=\"0\" y=\"${y}\" width=\"${width}\" height=\"${height}\" fill=\"${defaultFill}\"/>`\n\n  for (let i = 0, l = translated.length; i < l; i++) {\n    const element = translated[i]!\n    const x = region.reversed\n      ? width - (i + 1) * codonWidth - offset\n      : codonWidth * i + offset\n    const { letter, codon } = element\n    const codonFill = defaultStarts.includes(codon)\n      ? theme.palette.startCodon\n      : defaultStops.includes(codon)\n        ? theme.palette.stopCodon\n        : undefined\n\n    if (renderLetter || codonFill) {\n      const rectWidth = renderLetter\n        ? codonWidth\n        : codonWidth + 0.7 /* small fudge factor when zoomed out*/\n      const stroke = renderLetter ? '#555' : 'none'\n      svg += `<rect x=\"${x}\" y=\"${y}\" width=\"${rectWidth}\" height=\"${height}\" stroke=\"${stroke}\" fill=\"${codonFill || 'none'}\"/>`\n\n      if (renderLetter) {\n        svg += `<text x=\"${x + codonWidth / 2}\" font-size=\"${height - 2}\" y=\"${y + height / 2}\" dominant-baseline=\"middle\" text-anchor=\"middle\">${letter}</text>`\n      }\n    }\n  }\n\n  return <g dangerouslySetInnerHTML={{ __html: svg }} />\n}\n","import type { ReactNode } from 'react'\n\nimport {\n  complement,\n  defaultCodonTable,\n  generateCodonTable,\n} from '@jbrowse/core/util'\nimport { observer } from 'mobx-react'\n\nimport Sequence from './Sequence.tsx'\nimport Translation from './Translation.tsx'\n\nimport type { AnyConfigurationModel } from '@jbrowse/core/configuration'\nimport type { Feature, Frame, Region } from '@jbrowse/core/util'\n\nfunction SequenceSVG({\n  regions,\n  width,\n  colorByCDS,\n  features,\n  showReverse = true,\n  showForward = true,\n  showTranslation = true,\n  sequenceType = 'dna',\n  bpPerPx,\n  rowHeight,\n}: {\n  regions: Region[]\n  width: number\n  features: Map<string, Feature>\n  colorByCDS: boolean\n  showReverse?: boolean\n  showForward?: boolean\n  showTranslation?: boolean\n  sequenceType?: string\n  bpPerPx: number\n  rowHeight: number\n}) {\n  const region = regions[0]!\n  const codonTable = generateCodonTable(defaultCodonTable)\n  const [feature] = [...features.values()]\n  if (!feature) {\n    return null\n  }\n  const seq: string = feature.get('seq')\n  if (!seq) {\n    return null\n  }\n\n  const showSequence = bpPerPx <= 1\n\n  const forwardFrames: Frame[] = showTranslation && showForward ? [3, 2, 1] : []\n  const reverseFrames: Frame[] =\n    showTranslation && showReverse ? [-1, -2, -3] : []\n\n  // if region.reversed, the forward translation is on bottom, reverse on top\n  const [topFrames, bottomFrames] = region.reversed\n    ? [reverseFrames.toReversed(), forwardFrames.toReversed()]\n    : [forwardFrames, reverseFrames]\n\n  const elements: ReactNode[] = []\n  let currentY = 0\n\n  for (const index of topFrames) {\n    elements.push(\n      <Translation\n        key={`translation-${index}`}\n        width={width}\n        colorByCDS={colorByCDS}\n        seq={seq}\n        y={currentY}\n        codonTable={codonTable}\n        frame={index}\n        bpPerPx={bpPerPx}\n        region={region}\n        seqStart={feature.get('start')}\n        height={rowHeight}\n        reverse={region.reversed}\n      />,\n    )\n    currentY += rowHeight\n  }\n\n  if (showForward && showSequence) {\n    elements.push(\n      <Sequence\n        key=\"forward_seq\"\n        height={rowHeight}\n        sequenceType={sequenceType}\n        y={currentY}\n        feature={feature}\n        region={region}\n        seq={region.reversed ? complement(seq) : seq}\n        bpPerPx={bpPerPx}\n      />,\n    )\n    currentY += rowHeight\n  }\n\n  if (showReverse && showSequence) {\n    elements.push(\n      <Sequence\n        key=\"reverse_seq\"\n        height={rowHeight}\n        sequenceType={sequenceType}\n        y={currentY}\n        feature={feature}\n        region={region}\n        seq={region.reversed ? seq : complement(seq)}\n        bpPerPx={bpPerPx}\n      />,\n    )\n    currentY += rowHeight\n  }\n\n  for (const index of bottomFrames) {\n    elements.push(\n      <Translation\n        key={`rev-translation-${index}`}\n        width={width}\n        colorByCDS={colorByCDS}\n        seq={seq}\n        y={currentY}\n        codonTable={codonTable}\n        frame={index}\n        bpPerPx={bpPerPx}\n        region={region}\n        seqStart={feature.get('start')}\n        height={rowHeight}\n        reverse={!region.reversed}\n      />,\n    )\n    currentY += rowHeight\n  }\n\n  return <>{elements}</>\n}\n\nfunction Wrapper({\n  exportSVG,\n  width,\n  totalHeight,\n  children,\n}: {\n  exportSVG?: { rasterizeLayers: boolean }\n  width: number\n  totalHeight: number\n  children: ReactNode\n}) {\n  return exportSVG ? (\n    children\n  ) : (\n    <svg\n      data-testid=\"sequence_track\"\n      width={width}\n      height={totalHeight}\n      style={{\n        // use block because svg by default is inline, which adds a margin\n        display: 'block',\n        width,\n        height: totalHeight,\n        userSelect: 'none',\n      }}\n    >\n      {children}\n    </svg>\n  )\n}\n\nconst DivSequenceRendering = observer(function DivSequenceRendering({\n  exportSVG,\n  features,\n  regions,\n  colorByCDS,\n  bpPerPx,\n  rowHeight,\n  sequenceHeight,\n  showForward,\n  showReverse,\n  showTranslation,\n}: {\n  exportSVG?: { rasterizeLayers: boolean }\n  features: Map<string, Feature>\n  regions: Region[]\n  colorByCDS: boolean\n  bpPerPx: number\n  rowHeight: number\n  sequenceHeight: number\n  config: AnyConfigurationModel\n  showForward?: boolean\n  showReverse?: boolean\n  showTranslation?: boolean\n}) {\n  const region = regions[0]!\n  const width = Math.ceil((region.end - region.start) / bpPerPx)\n\n  return (\n    <Wrapper exportSVG={exportSVG} totalHeight={sequenceHeight} width={width}>\n      <SequenceSVG\n        width={width}\n        showReverse={showReverse}\n        showForward={showForward}\n        showTranslation={showTranslation}\n        colorByCDS={colorByCDS}\n        bpPerPx={bpPerPx}\n        rowHeight={rowHeight}\n        features={features}\n        regions={regions}\n      />\n    </Wrapper>\n  )\n})\n\nexport default DivSequenceRendering\n"],"names":["Sequence","t0","$","_c","bpPerPx","region","feature","sequenceType","height","seq","y","theme","useTheme","render","e","s","t1","get","bpSpanPx","leftPx","rightPx","reverse","reversed","len","w","Math","max","t2","svg","i","l","length","letter","color","palette","bases","toUpperCase","undefined","x","main","getContrastText","_jsx","dangerouslySetInnerHTML","__html","Translation","codonTable","frame","width","colorByCDS","seqStart","frameShift","abs","frameShiftAdjustedSeqLength","multipleOfThreeLength","seqSliced","slice","translated","codon","normalizedCodon","revcom","aminoAcid","push","codonWidth","renderLetter","offset","start","frames","framesCDS","at","i_0","element","codon_0","codonFill","defaultStarts","includes","startCodon","defaultStops","stopCodon","SequenceSVG","regions","features","showReverse","showForward","showTranslation","t3","t4","rowHeight","t5","Symbol","for","generateCodonTable","defaultCodonTable","t6","t7","bb0","values","showSequence","forwardFrames","reverseFrames","topFrames","bottomFrames","toReversed","elements","currentY","index","t8","t9","complement","index_0","_Fragment","children","Wrapper","exportSVG","totalHeight","style","display","userSelect","observer","sequenceHeight","ceil","end"],"sourceRoot":""}