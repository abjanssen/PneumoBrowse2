"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[1266],{11266:(e,t,r)=>{r.d(t,{renderToSvg:()=>f});var i=r(67112),n=r(99546),s=r(91063),o=r(42489),l=r(67758),a=r(51414),d=r(69500);function h(e){const t=(0,l.c)(6),{width:r,height:i}=e,s=(0,a.A)();let o,h;return t[0]!==s.palette.background.default?(o=(0,n.stripAlpha)(s.palette.background.default),t[0]=s.palette.background.default,t[1]=o):o=t[1],t[2]!==i||t[3]!==o||t[4]!==r?(h=(0,d.jsx)("rect",{x:0,y:0,width:r,height:i,fill:o}),t[2]=i,t[3]=o,t[4]=r,t[5]=h):h=t[5],h}var c=r(91392),x=r(86495);async function f(e,t){await(0,o.when)((()=>e.initialized));const{themeName:r="default",Wrapper:l=({children:e})=>e}=t,a=(0,n.getSession)(e),f=a.allThemes?.()[r],{width:m,borderX:g,viewWidth:p,viewHeight:y,tracks:u,height:w}=e,j=await Promise.all(u.map((async e=>{const r=e.displays[0];return await(0,o.when)((()=>void 0===r.ready||r.ready)),{track:e,result:await r.renderSvg({...t,theme:f})}}))),v=m+100;return(0,n.renderToStaticMarkup)((0,d.jsx)(s.A,{theme:(0,i.createJBrowseTheme)(f),children:(0,d.jsx)(l,{children:(0,d.jsxs)("svg",{width:m,height:w,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:[0,0,v,w].toString(),children:[(0,d.jsx)(h,{width:v,height:w}),(0,d.jsx)(c.kb,{model:e}),(0,d.jsxs)("g",{transform:`translate(${g} 0)`,children:[(0,d.jsx)(x.z,{model:e}),(0,d.jsx)("defs",{children:(0,d.jsx)("clipPath",{id:"clip-ruler",children:(0,d.jsx)("rect",{x:0,y:0,width:p,height:y})})}),(0,d.jsx)("g",{clipPath:"url(#clip-ruler)",children:j.map((({result:e},t)=>(0,d.jsx)("g",{children:e},t)))})]}),(0,d.jsx)("g",{transform:`translate(${g} ${y})`,children:(0,d.jsx)(c.se,{model:e})})]})})}))}},86495:(e,t,r)=>{r.d(t,{A:()=>d,z:()=>a});var i=r(67758),n=r(99546),s=r(51414),o=r(68446),l=r(69500);const a=(0,o.observer)((function({model:e,children:t}){const{viewWidth:r,viewHeight:i,hview:o,vview:a}=e,d=o.dynamicBlocks.contentBlocks,h=a.dynamicBlocks.contentBlocks;if(!d.length||!h.length)return null;const c=o.displayedRegionsTotalPx-o.offsetPx,x=a.displayedRegionsTotalPx-a.offsetPx,f=d[0].offsetPx-o.offsetPx,m=h[0].offsetPx-a.offsetPx,g=(0,s.A)(),p=g.palette.divider,y=Math.max(f,0),u=Math.max(i-x,0),w=Math.min(c-f,r),j=Math.min(i-m-u,i);let v=Number.POSITIVE_INFINITY,k=Number.POSITIVE_INFINITY;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("rect",{x:y,y:u,width:w,height:j,...(0,n.getFillProps)(g.palette.background.default)}),(0,l.jsxs)("g",{children:[d.map((e=>{const t=e.offsetPx-o.offsetPx,r=Math.floor(t)!==Math.floor(v);return r&&(v=t),r?(0,l.jsx)("line",{x1:t,y1:0,x2:t,y2:i,...(0,n.getStrokeProps)(p)},JSON.stringify(e)):null})),h.map((e=>{const t=i-(e.offsetPx-a.offsetPx),s=Math.floor(t)!==Math.floor(k);return s&&(k=t),s?(0,l.jsx)("line",{x1:0,y1:t,x2:r,y2:t,...(0,n.getStrokeProps)(p)},JSON.stringify(e)):null})),(0,l.jsx)("line",{x1:c,y1:0,x2:c,y2:i,...(0,n.getStrokeProps)(p)}),(0,l.jsx)("line",{x1:0,y1:i-x,x2:r,y2:i-x,...(0,n.getStrokeProps)(p)})]}),t]})}));function d(e){const t=(0,i.c)(8),{model:r,children:n}=e,{viewWidth:s,viewHeight:o}=r;let d,h,c;return t[0]===Symbol.for("react.memo_cache_sentinel")?(d={background:"rgba(0,0,0,0.12)"},t[0]=d):d=t[0],t[1]!==n||t[2]!==r?(h=(0,l.jsx)(a,{model:r,children:n}),t[1]=n,t[2]=r,t[3]=h):h=t[3],t[4]!==h||t[5]!==o||t[6]!==s?(c=(0,l.jsx)("svg",{width:s,height:o,style:d,children:h}),t[4]=h,t[5]=o,t[6]=s,t[7]=c):c=t[7],c}},91392:(e,t,r)=>{r.d(t,{KM:()=>x,en:()=>m,kb:()=>g,se:()=>f});var i=r(99546),n=r(95095),s=r(51414),o=r(68446),l=r(36422),a=r(75785),d=r(90257),h=r(69500);const c=(0,a.n9)()((()=>({vtext:{gridColumn:"1/2",gridRow:"1/2",pointerEvents:"none",userSelect:"none"},htext:{gridColumn:"2/2",gridRow:"2/2",pointerEvents:"none",userSelect:"none"}}))),x=(0,o.observer)((function({model:e}){const{viewWidth:t,borderY:r}=e,{classes:i}=c();return(0,h.jsx)("svg",{width:t,height:r,className:i.htext,children:(0,h.jsx)(f,{model:e})})})),f=(0,o.observer)((function({model:e}){const{viewWidth:t,borderX:r,borderY:o,hview:a,htextRotation:c,hticks:x}=e,{offsetPx:f,width:m,dynamicBlocks:g,bpPerPx:p}=a,y=g.contentBlocks,u=(0,d.rQ)(y,t,f),w=(0,s.A)(),j={...(0,l.getSnapshot)(a),width:m,staticBlocks:a.staticBlocks},v=x.map((e=>[e,(0,n.eB)({refName:e.refName,coord:e.base,self:j})?.offsetPx])).filter((e=>void 0!==e[1])).map((e=>[e[0],e[1]-f]));return(0,h.jsxs)(h.Fragment,{children:[y.filter((e=>!u.has(e.key))).map((e=>{const t=e.offsetPx,r=Math.floor(t-a.offsetPx);return(0,h.jsx)("text",{transform:`rotate(${c},${r},0)`,x:r,y:1,fontSize:11,dominantBaseline:"hanging",textAnchor:"end",...(0,i.getFillProps)(w.palette.text.primary),children:e.refName},JSON.stringify(e))})),v.map((([e,t])=>t>0&&t<m?(0,h.jsx)("line",{x1:t,x2:t,y1:0,y2:"major"===e.type?6:4,strokeWidth:1,...(0,i.getFillProps)(w.palette.text.primary)},`line-${JSON.stringify(e)}`):null)),v.filter((e=>"major"===e[0].type)).map((([e,t])=>t>10&&t<m?(0,h.jsx)("text",{x:t-7,y:0,transform:`rotate(${c},${t},0)`,fontSize:11,dominantBaseline:"middle",textAnchor:"end",...(0,i.getFillProps)(w.palette.text.primary),children:(0,i.getTickDisplayStr)(e.base+1,p)},`text-${JSON.stringify(e)}`):null)),(0,h.jsx)("text",{y:o-12,x:(t-r)/2,textAnchor:"middle",fontSize:11,dominantBaseline:"hanging",...(0,i.getFillProps)(w.palette.text.primary),children:a.assemblyNames.join(",")})]})})),m=(0,o.observer)((function({model:e}){const{borderX:t,viewHeight:r}=e,{classes:i}=c();return(0,h.jsx)("svg",{className:i.vtext,width:t,height:r,children:(0,h.jsx)(g,{model:e})})})),g=(0,o.observer)((function({model:e}){const{viewHeight:t,borderX:r,borderY:o,vview:a,vtextRotation:c,vticks:x}=e,{offsetPx:f,width:m,dynamicBlocks:g,bpPerPx:p}=a,y=g.contentBlocks,u=(0,d.rQ)(y,t,f),w=(0,s.A)(),j={...(0,l.getSnapshot)(a),width:m,staticBlocks:a.staticBlocks},v=x.map((e=>[e,(0,n.eB)({refName:e.refName,coord:e.base,self:j})?.offsetPx])).filter((e=>void 0!==e[1])).map((e=>[e[0],e[1]-f]));return(0,h.jsxs)(h.Fragment,{children:[y.filter((e=>!u.has(e.key))).map((e=>{const n=e.offsetPx,s=r,o=Math.floor(t-n+f);return(0,h.jsx)("text",{transform:`rotate(${c},${s},${n})`,x:s,y:o,fontSize:11,textAnchor:"end",...(0,i.getFillProps)(w.palette.text.primary),children:e.refName},JSON.stringify(e))})),v.map((([e,n])=>n>0?(0,h.jsx)("line",{y1:t-n,y2:t-n,x1:r,x2:r-("major"===e.type?6:4),strokeWidth:1,...(0,i.getStrokeProps)(w.palette.grey[400])},`line-${JSON.stringify(e)}`):null)),v.filter((e=>"major"===e[0].type)).map((([e,n])=>n>10&&n<t?(0,h.jsx)("text",{y:t-n-3,x:r-7,textAnchor:"end",dominantBaseline:"hanging",fontSize:11,...(0,i.getFillProps)(w.palette.text.primary),children:(0,i.getTickDisplayStr)(e.base+1,p)},`text-${JSON.stringify(e)}`):null)),(0,h.jsx)("text",{y:(t-o)/2,x:12,transform:`rotate(-90,12,${(t-o)/2})`,textAnchor:"middle",fontSize:11,...(0,i.getFillProps)(w.palette.text.primary),children:a.assemblyNames.join(",")})]})}))}}]);
//# sourceMappingURL=1266.e62b87cf.chunk.js.map