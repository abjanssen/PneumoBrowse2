"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[6897],{9807(e,t,n){n.d(t,{A:()=>m});var r=n(42918),s=n(77251),o=n(64074),i=n(30936),l=n(33579),a=n(15943),c=n(32118);const h=e=>{const t=(0,i.c)(11),{x:n,y:r,width:o,height:h,color:d}=e,x=(0,l.A)();let g,u,m;return t[0]!==d||t[1]!==x?(g=d||(0,a.X4)(x.palette.background.paper,.8),t[0]=d,t[1]=x,t[2]=g):g=t[2],t[3]!==g?(u=(0,s.getFillProps)(g),t[3]=g,t[4]=u):u=t[4],t[5]!==h||t[6]!==u||t[7]!==o||t[8]!==n||t[9]!==r?(m=(0,c.jsx)("rect",{pointerEvents:"auto",x:n,y:r,width:o,height:h,...u}),t[5]=h,t[6]=u,t[7]=o,t[8]=n,t[9]=r,t[10]=m):m=t[10],m},d=function(e){const t=(0,i.c)(4),{source:n,idx:r,rowHeight:s}=e,{color:o}=n;let l;return t[0]!==o||t[1]!==r||t[2]!==s?(l=o?(0,c.jsx)(h,{y:r*s,x:0,width:15.5,height:s+.5,color:o}):null,t[0]=o,t[1]=r,t[2]=s,t[3]=l):l=t[3],l},x=function(e){const t=(0,i.c)(6),{source:n,idx:r,rowHeight:s,textFillProps:o}=e,{color:l,name:a}=n,h=Math.min(s,12),d=(r+.5)*s,x=l?17:0;let g;return t[0]!==a||t[1]!==h||t[2]!==d||t[3]!==x||t[4]!==o?(g=(0,c.jsx)("text",{y:d,x,fontSize:h,dominantBaseline:"central",...o,children:a}),t[0]=a,t[1]=h,t[2]=d,t[3]=x,t[4]=o,t[5]=g):g=t[5],g},g=(0,o.observer)(function({model:e,labelWidth:t}){const{canDisplayLabels:n,rowHeight:o,sources:i}=e,a=(0,l.A)(),g=t+((0,r.useMemo)(()=>i?.some(e=>e.color)??!1,[i])?20:0),u=(0,r.useMemo)(()=>(0,s.getFillProps)(a.palette.text.primary),[a.palette.text.primary]);return i?(0,c.jsxs)(c.Fragment,{children:[n?(0,c.jsx)(h,{y:0,x:0,width:g,height:(i.length+.25)*o}):null,i.map((e,t)=>(0,c.jsx)(d,{source:e,idx:t,rowHeight:o},`${e.name}-${t}`)),n?i.map((e,t)=>(0,c.jsx)(x,{source:e,idx:t,rowHeight:o,textFillProps:u},`${e.name}-text-${t}`)):null]}):null}),u=(0,o.observer)(function({children:e,model:t,exportSVG:n}){const{id:r,scrollTop:o,height:i,hierarchy:l,treeAreaWidth:a,showTree:h}=t,d=`legend-${"undefined"==typeof jest?r:"test"}`,x=l&&h?a:0;return n?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("defs",{children:(0,c.jsx)("clipPath",{id:d,children:(0,c.jsx)("rect",{x:0,y:0,width:1e3,height:i})})}),(0,c.jsx)("g",{clipPath:`url(#${d})`,children:(0,c.jsx)("g",{transform:`translate(0,${-o})`,children:e})})]}):(0,c.jsx)("svg",{style:{position:"absolute",top:0,left:x,zIndex:100,pointerEvents:"none",height:t.totalHeight,width:(0,s.getContainingView)(t).width},children:e})}),m=(0,o.observer)(function(e){const{model:t}=e,{canDisplayLabels:n,rowHeight:o,sources:i}=t,l=Math.min(o,12),a=(0,r.useMemo)(()=>{if(!i)return 0;let e=0;for(const t of i){const r=n?(0,s.measureText)(t.name,l)+10:20;r>e&&(e=r)}return e},[i,l,n]);return i?(0,c.jsx)(u,{...e,children:(0,c.jsx)(g,{model:t,labelWidth:a})}):null})},76897(e,t,n){n.d(t,{renderSvg:()=>a});var r=n(77251),s=n(38567),o=n(94162),i=n(92942),l=n(32118);async function a(e,t,n){await(0,s.when)(()=>!!e.regionCannotBeRenderedText);const{offsetPx:a}=(0,r.getContainingView)(e),{lineZoneHeight:c}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("g",{transform:`translate(${Math.max(-a,0)})`,children:[(0,l.jsx)(o.A,{exportSVG:!0,model:e}),(0,l.jsxs)("g",{transform:`translate(0,${c})`,children:[(0,l.jsx)("g",{children:await n(t)}),await(0,i.V)(e)]})]})})}},92942(e,t,n){n.d(t,{V:()=>a});var r=n(77251),s=n(64074),o=n(32118);const i=(0,s.observer)(function({model:e}){const{treeAreaWidth:t,hierarchy:n}=e,r=[];let s=0;if(n)for(const e of n.links()){const{source:t,target:n}=e,i=t.x,l=n.x,a=n.y,c=t.y;r.push((0,o.jsx)("line",{x1:c,y1:i,x2:c,y2:l,stroke:"black",opacity:"0.4"},`${c}-${i}-${a}-${l}-${s++}`),(0,o.jsx)("line",{x1:c,y1:l,x2:a,y2:l,stroke:"black",opacity:"0.4"},`${c}-${i}-${a}-${l}-${s++}`))}return r});var l=n(9807);async function a(e){const{offsetPx:t}=(0,r.getContainingView)(e),{hierarchy:n,showTree:s,treeAreaWidth:a,availableHeight:c}=e;return(0,o.jsxs)("g",{id:"tree-layer","data-testid":"tree-layer",transform:`translate(${Math.max(-t,0)})`,clipPath:"url(#sidebarClip)",children:[(0,o.jsx)("clipPath",{id:"sidebarClip",children:(0,o.jsx)("rect",{x:"0",y:"0",width:"100%",height:c})}),(0,o.jsx)("g",{id:"legend-layer",transform:`translate(${s&&n?a:0})`,children:(0,o.jsx)(l.A,{model:e,orientation:"left",exportSVG:!0})}),s?(0,o.jsx)(i,{model:e}):null]})}},94162(e,t,n){n.d(t,{A:()=>b});var r=n(30936),s=n(42918),o=n(28397),i=n(50639),l=n(71547),a=n(77251),c=n(65045),h=n(15943),d=n(33579),x=n(64074),g=n(32118);const u=(0,c.n)()(e=>({resizeHandle:{height:5,boxSizing:"border-box",background:"transparent","&:hover":{background:e.palette.divider}}})),m=(0,x.observer)(function({children:e,model:t,exportSVG:n}){const{height:r}=t,{width:s,offsetPx:o}=(0,a.getContainingView)(t),i=Math.max(0,-o);return n?(0,g.jsx)("g",{transform:`translate(${i})`,children:e}):(0,g.jsx)("svg",{style:{position:"absolute",top:0,left:i,height:r,width:s},children:e})}),f=(0,x.observer)(function({model:e,exportSVG:t}){const{classes:n}=u(),{assemblyManager:r}=(0,a.getSession)(e),i=(0,a.getContainingView)(e),[l,c]=(0,s.useState)(),{lineZoneHeight:h,featuresVolatile:d}=e,{assemblyNames:x,dynamicBlocks:f}=i,p=r.get(x[0]),b=(f.contentBlocks[0]?.widthPx||0)/(d?.length||1);return p&&d?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(m,{exportSVG:t,model:e,children:[(0,g.jsx)(y,{model:e,setMouseOverLine:c}),l?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("line",{stroke:"#f00c",strokeWidth:2,style:{pointerEvents:"none"},x1:l.idx*b+b/2,x2:l.c,y1:h,y2:0,onMouseLeave:()=>{c(void 0)}}),(0,g.jsx)(j,{contents:l.f.get("name")})]}):null]}),t?null:(0,g.jsx)(o.A,{style:{position:"absolute",top:h-4},onDrag:t=>e.setLineZoneHeight(h+t),className:n.resizeHandle})]}):null}),p=(0,s.forwardRef)(function(e,t){const n=(0,r.c)(5),{message:o}=e;let l,a;return n[0]!==o?(l=(0,s.isValidElement)(o)?o:o?(0,g.jsx)(i.A,{html:String(o)}):null,n[0]=o,n[1]=l):l=n[1],n[2]!==t||n[3]!==l?(a=(0,g.jsx)("div",{ref:t,children:l}),n[2]=t,n[3]=l,n[4]=a):a=n[4],a}),j=(0,x.observer)(function({contents:e}){return e?(0,g.jsx)(l.A,{children:(0,g.jsx)(p,{message:e})}):null}),y=(0,x.observer)(function({model:e,setMouseOverLine:t}){const n=(0,d.A)(),{assemblyManager:r}=(0,a.getSession)(e),o=(0,a.getContainingView)(e),{lineZoneHeight:i,featuresVolatile:l}=e,{offsetPx:c,assemblyNames:x,dynamicBlocks:u}=o,m=r.get(x[0]),f=(u.contentBlocks[0]?.widthPx||0)/(l?.length||1),p=Math.max(c,0),j=(0,a.getStrokeProps)((0,h.X4)(n.palette.text.primary,.4));return m&&l?(0,g.jsx)(g.Fragment,{children:l.map((e,n)=>{const r=e.get("refName"),l=(o.bpToPx({refName:m.getCanonicalRefName2(r),coord:e.get("start")})?.offsetPx||0)-p;return(0,s.createElement)("line",{...j,strokeWidth:1,key:e.id(),x1:n*f+f/2,x2:l,y1:i,y2:0,onMouseEnter:()=>{t({f:e,idx:n,c:l})},onMouseLeave:()=>{t(void 0)}})})}):null}),b=f}}]);
//# sourceMappingURL=6897.b7b25482.chunk.js.map