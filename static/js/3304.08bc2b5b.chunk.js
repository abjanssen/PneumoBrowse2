"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[3304],{36917:(r,e,o)=>{o.d(e,{DW:()=>f,J8:()=>n,L9:()=>l,PJ:()=>u,Pq:()=>p,en:()=>_,pf:()=>i,sY:()=>d,w7:()=>a});var t=o(86576);const n={PROPER_PAIR:0,LONG_INSERT:1,SHORT_INSERT:2,INTER_CHROM:3,ABNORMAL_ORIENTATION:4,UNMAPPED_MATE:5},i={color_fwd_strand_not_proper:"#ECC8C8",color_rev_strand_not_proper:"#BEBED8",color_fwd_strand:"#EC8B8B",color_rev_strand:"#8F8FD8",color_fwd_missing_mate:"#D11919",color_rev_missing_mate:"#1919D1",color_fwd_diff_chr:"#000",color_rev_diff_chr:"#969696",color_pair_lr:"#c8c8c8",color_pair_rr:"#3a3a9d",color_pair_rl:"teal",color_pair_ll:"green",color_nostrand:"#c8c8c8",color_interchrom:"purple",color_longinsert:"red",color_shortinsert:"pink",color_unmapped_mate:"#8B008B",color_unknown:"grey"},a={color_fwd_strand_not_proper:"#CA6767",color_rev_strand_not_proper:"#7272AA",color_fwd_strand:"#DC2A2A",color_rev_strand:"#4141BA",color_fwd_missing_mate:"#921111",color_rev_missing_mate:"#111192",color_fwd_diff_chr:"#000000",color_rev_diff_chr:"#696969",color_pair_lr:"#8C8C8C",color_pair_rr:"#00002A",color_pair_rl:"#005A5A",color_pair_ll:"#005A00",color_nostrand:"#8C8C8C",color_interchrom:"#5A005A",color_longinsert:"#B30000",color_shortinsert:"#FF3A5C",color_unmapped_mate:"#5A005A",color_unknown:"#444"},s=[i.color_pair_lr,a.color_pair_lr];function _({type:r,f1:e,f2:o,stats:i}){if(void 0!==e.flags&&8&e.flags)return n.UNMAPPED_MATE;if("insertSizeAndOrientation"===r||"orientation"===r){const r=t.il.fr[e.pair_orientation||""];if(r&&"LR"!==r)return n.ABNORMAL_ORIENTATION}if("insertSizeAndOrientation"===r||"insertSize"===r){const r=e.refName===o.refName,t=Math.abs(e.tlen||0);if(!r)return n.INTER_CHROM;if(i){if(t>i.upper)return n.LONG_INSERT;if(t<i.lower)return n.SHORT_INSERT}}return n.PROPER_PAIR}function l(r,e,o){switch(_({type:"insertSize",f1:r,f2:e,stats:o})){case n.UNMAPPED_MATE:return[i.color_unmapped_mate,a.color_unmapped_mate];case n.LONG_INSERT:return[i.color_longinsert,a.color_longinsert];case n.SHORT_INSERT:return[i.color_shortinsert,a.color_shortinsert];case n.INTER_CHROM:return[i.color_interchrom,a.color_interchrom];case n.PROPER_PAIR:default:return}}function c(r){if(void 0!==r.flags&&8&r.flags)return[i.color_unmapped_mate,a.color_unmapped_mate];const e=t.il.fr[r.pair_orientation||""],o=t.rr[e];return"LR"===e?void 0:[i[o],a[o]]}function f(r){return c(r)||s}function d(r,e,o){return c(r)||l(r,e,o)||s}function p(r,e){const o=Math.abs(r.tlen||0);return e&&o>e.upper?[i.color_fwd_missing_mate,a.color_fwd_missing_mate]:s}function u({type:r,v0:e,v1:o,stats:t}){return"insertSizeAndOrientation"===r?d(e,o,t):"orientation"===r?f(e):"insertSize"===r?l(e,o,t):void 0}},63304:(r,e,o)=>{o.d(e,{drawFeats:()=>l});var t=o(99546),n=o(95805),i=o(36917),a=o(91476);function s(r){return 2*Math.random()*r-r}function _(r,e,o,t){r.strokeStyle=t,r.beginPath(),r.moveTo(e,0),r.lineTo(e,o),r.stroke()}function l(r,e,o,l){const{chainData:c,colorBy:f,drawInter:d,drawLongRange:p,lineWidthSetting:u,jitterVal:m}=r;if(!c)return;const g=(0,t.getContainingView)(r),{assemblyManager:h}=(0,t.getSession)(r),{chains:A,stats:N}=c,R=(0,a.dv)(c),P=h.get(g.assemblyNames[0]),S=f?.type||"insertSizeAndOrientation";if(P){e.lineWidth=u;for(const r of A)if(1===r.length&&p){const e=r[0];if(!R||8&e.flags){const r=[e,...(0,n.featurizeSA)(e.SA,e.id,e.strand,e.name)].sort((r,e)=>r.clipPos-e.clipPos);for(let e=0;e<r.length-1;e++)T(r[e],r[e+1],P,!0)}else T(e,{refName:e.next_ref||"",start:e.next_pos||0,end:e.next_pos||0,strand:e.strand},P,!0)}else{const e=R?r.filter(r=>!(2048&r.flags||8&r.flags)):r.sort((r,e)=>r.clipPos-e.clipPos).filter(r=>!(256&r.flags));for(let r=0;r<e.length-1;r++)T(e[r],e[r+1],P,!1)}}function T(r,o,t,n){const a=r.strand,c=o.strand,f=-1===c,p=-1===a?r.start:r.end,u=R?f?o.start:o.end:f?o.end:o.start,h=t.getCanonicalRefName(r.refName)||r.refName,A=t.getCanonicalRefName(o.refName)||o.refName,P=g.bpToPx({refName:h,coord:p})?.offsetPx,T=g.bpToPx({refName:A,coord:u})?.offsetPx;if(void 0!==P&&void 0!==T){const t=(T-P)/2,f=Math.abs(t),d=P-g.offsetPx,p=T-g.offsetPx,u=f>1e4;n&&u?(e.moveTo(d,0),e.beginPath()):(e.beginPath(),e.moveTo(d,0)),n&&u?e.strokeStyle="red":R?"insertSizeAndOrientation"===S?e.strokeStyle=(0,i.sY)(r,o,N)[0]:"orientation"===S?e.strokeStyle=(0,i.DW)(r)[0]:"insertSize"===S?e.strokeStyle=(0,i.L9)(r,o,N)?.[0]||"grey":"gradient"===S&&(e.strokeStyle=`hsl(${10*Math.log10(f)},50%,50%)`):"orientation"===S||"insertSizeAndOrientation"===S?e.strokeStyle=-1===a&&1===c?"navy":1===a&&-1===c?"green":"grey":"gradient"===S&&(e.strokeStyle=`hsl(${10*Math.log10(f)},50%,50%)`);const h=d+2*t,A=Math.min(l+s(m),f);n?f>1e5?(_(e,d+s(m),l,"red"),_(e,p+s(m),l,"red")):u?(e.arc(d+t+s(m),0,f,0,Math.PI),e.stroke()):(e.bezierCurveTo(d+s(m),A,h,A,h+s(m),0),e.stroke()):(e.bezierCurveTo(d+s(m),A,h,A,h+s(m),0),e.stroke())}else P&&d&&_(e,P-g.offsetPx,l,"purple")}}}}]);
//# sourceMappingURL=3304.08bc2b5b.chunk.js.map