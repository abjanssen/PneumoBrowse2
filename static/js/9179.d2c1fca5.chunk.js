"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[9179],{521(e,t,r){r.d(t,{A:()=>c});var s=r(30936),a=r(77251),n=r(33579),i=r(38157),l=r(32118);function c(e){const t=(0,s.c)(15),{model:r,height:c}=e,{dynamicBlocks:o,offsetPx:d,bpPerPx:h}=r,{contentBlocks:x}=o,f=(0,n.A)();let m;t[0]!==f.palette.divider?(m=(0,a.stripAlpha)(f.palette.divider),t[0]=f.palette.divider,t[1]=m):m=t[1];const p=m;let g,u;if(t[2]!==h||t[3]!==p||t[4]!==x||t[5]!==c||t[6]!==d){let e;t[8]!==h||t[9]!==p||t[10]!==c||t[11]!==d?(e=e=>{const{start:t,end:r,key:s,reversed:a,offsetPx:n,widthPx:o}=e,x=n-d,f=(0,i.H2)(t,r,h,!0,!0),m=`gridline-clip-${s}`;return(0,l.jsxs)("g",{children:[(0,l.jsx)("defs",{children:(0,l.jsx)("clipPath",{id:m,children:(0,l.jsx)("rect",{x:0,y:0,width:o,height:c})})}),(0,l.jsx)("g",{transform:`translate(${x} 0)`,clipPath:`url(#${m})`,children:f.map(e=>{const s=(a?r-e.base:e.base-t)/h,n="major"===e.type;return(0,l.jsx)("line",{x1:s,x2:s,y1:0,y2:c,strokeWidth:1,stroke:p,strokeOpacity:n?.3:.15},`gridline-${e.base}`)})})]},s)},t[8]=h,t[9]=p,t[10]=c,t[11]=d,t[12]=e):e=t[12],g=x.map(e),t[2]=h,t[3]=p,t[4]=x,t[5]=c,t[6]=d,t[7]=g}else g=t[7];return t[13]!==g?(u=(0,l.jsx)(l.Fragment,{children:g}),t[13]=g,t[14]=u):u=t[14],u}},30402(e,t,r){r.d(t,{m:()=>a});var s=r(77251);function a(e,t,r){return(0,s.sum)(e.map(e=>e.displays[0].height+(["none","left"].includes(r)?0:t)))}},37832(e,t,r){r.d(t,{A:()=>h});var s=r(30936),a=r(77251),n=r(70203),i=r(72698),l=r(14227),c=r(33579),o=r(32118);function d(e){const t=(0,s.c)(13),{trackLabels:r,trackName:n,fontSize:i,trackLabelOffset:d,x:h}=e,x=(0,c.A)();let f;t[0]!==x.palette.text.primary?(f=(0,a.stripAlpha)(x.palette.text.primary),t[0]=x.palette.text.primary,t[1]=f):f=t[1];const m=f,p="overlay"===r?5:0,g="offset"===r?5:0;let u;t[2]!==n?(u=(0,l.Z)(n),t[2]=n,t[3]=u):u=t[3];const j=u;let k;return t[4]!==m||t[5]!==i||t[6]!==j||t[7]!==d||t[8]!==r||t[9]!==h||t[10]!==p||t[11]!==g?(k="none"!==r?(0,o.jsx)("g",{children:"left"===r?(0,o.jsx)("text",{x:d-40,y:20,fill:m,fontSize:i,dominantBaseline:"hanging",textAnchor:"end",children:j}):(0,o.jsx)("text",{x:h+p,y:g,fill:m,fontSize:i,dominantBaseline:"hanging",children:j})}):null,t[4]=m,t[5]=i,t[6]=j,t[7]=d,t[8]=r,t[9]=h,t[10]=p,t[11]=g,t[12]=k):k=t[12],k}function h(e){const t=(0,s.c)(9),{displayResults:r,model:l,textHeight:c,fontSize:h,trackLabels:x,trackLabelOffset:f}=e,m=void 0===x?"offset":x,p=void 0===f?0:f;let g,u;if(t[0]!==r||t[1]!==h||t[2]!==l||t[3]!==c||t[4]!==p||t[5]!==m){const e=(0,a.getSession)(l),s="offset"===m?c:0;g=r.reduce((t,r)=>{const{prevOffset:a,reactElements:c}=t,{track:x,result:f}=r,g=x.configuration,u=(0,n.getTrackName)(g,e),j=x.displays[0],k=Math.max(-l.offsetPx,0);return{prevOffset:a+j.height+s,reactElements:[...c,(0,o.jsxs)("g",{transform:`translate(0 ${a})`,children:[(0,o.jsxs)("g",{transform:`translate(${p} ${s})`,children:[(0,o.jsx)(i.A,{model:l,height:j.height}),f]}),(0,o.jsx)(d,{trackName:u,fontSize:h,trackLabels:m,trackLabelOffset:p,x:k})]},g.trackId)]}},{prevOffset:0,reactElements:[]}),t[0]=r,t[1]=h,t[2]=l,t[3]=c,t[4]=p,t[5]=m,t[6]=g}else g=t[6];return t[7]!==g.reactElements?(u=(0,o.jsx)(o.Fragment,{children:g.reactElements}),t[7]=g.reactElements,t[8]=u):u=t[8],u}},59179(e,t,r){r.d(t,{renderToSvg:()=>u});var s=r(17868),a=r(77251),n=r(30402),i=r(88868),l=r(521),c=r(37832),o=r(34202),d=r(38567),h=r(30936),x=r(33579),f=r(32118);function m(e){const t=(0,h.c)(6),{width:r,height:s,shift:n}=e,i=(0,x.A)(),l=r+2*n;let c,o;return t[0]!==i.palette.background.default?(c=(0,a.stripAlpha)(i.palette.background.default),t[0]=i.palette.background.default,t[1]=c):c=t[1],t[2]!==s||t[3]!==l||t[4]!==c?(o=(0,f.jsx)("rect",{width:l,height:s,fill:c}),t[2]=s,t[3]=l,t[4]=c,t[5]=o):o=t[5],o}var p=r(70203),g=r(6128);async function u(e,t){const{textHeight:r=18,headerHeight:h=30,rulerHeight:x=30,fontSize:u=13,trackLabels:j="offset",showGridlines:k=!1,Wrapper:y=({children:e})=>e,themeName:b="default"}=t,w=(0,a.getSession)(e),v=w.allThemes?.()[b],{width:P,views:A}=e,S=h+x,$=A.map(e=>(0,n.m)(e.tracks,r,j)+S),T=(0,a.sum)($)+100,z=await Promise.all(A.map(async e=>({view:e,data:await Promise.all(e.tracks.map(async e=>{const r=e.displays[0];return await(0,d.when)(()=>void 0===r.ready||r.ready),{track:e,result:await r.renderSvg({...t,theme:v})}}))}))),B=function(e,t,r){return(0,a.max)(e.flatMap(e=>e.tracks.map(e=>(0,a.measureText)((0,p.getTrackName)(e.configuration,r),t))),0)}(A,u,w)+40,L="left"===j?B:0,O="offset"===j?r:0,H=A.map((e,t)=>function(e,t,r=0){const s={};let a=t;for(const n of e.tracks)s[n.configuration.trackId]=a+r,a+=n.displays[0].height+t;return s}(e,O,u+(t>0?$[t-1]:0)+S)),N=P+L,E=(0,s.createJBrowseTheme)(v),F=A.map(e=>(0,n.m)(e.tracks,r,j));return(0,a.renderToStaticMarkup)((0,f.jsx)(o.A,{theme:E,children:(0,f.jsx)(y,{children:(0,f.jsxs)("svg",{width:P,height:T,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:[0,0,N+100,T].toString(),children:[(0,f.jsx)(m,{width:N,height:T,shift:50}),A[0]?(0,f.jsxs)("g",{transform:`translate(50 ${u})`,children:[(0,f.jsxs)("g",{transform:`translate(${L})`,children:[(0,f.jsx)("text",{x:0,fontSize:u,fill:E.palette.text.primary,children:A[0].assemblyNames.join(", ")}),(0,f.jsx)(i.A,{model:z[0].view,fontSize:u})]}),k?(0,f.jsx)("g",{transform:`translate(${L} ${S})`,children:(0,f.jsx)(l.A,{model:z[0].view,height:F[0]})}):null,(0,f.jsx)("g",{transform:`translate(0 ${S})`,children:(0,f.jsx)(c.A,{textHeight:r,trackLabels:j,fontSize:u,model:z[0].view,displayResults:z[0].data,trackLabelOffset:L})})]}):null,A[1]?(0,f.jsxs)("g",{transform:`translate(50 ${u+$[0]})`,children:[(0,f.jsxs)("g",{transform:`translate(${L})`,children:[(0,f.jsx)("text",{x:0,fontSize:u,fill:E.palette.text.primary,children:A[1].assemblyNames.join(", ")}),(0,f.jsx)(i.A,{model:z[1].view,fontSize:u})]}),k?(0,f.jsx)("g",{transform:`translate(${L} ${S})`,children:(0,f.jsx)(l.A,{model:z[1].view,height:F[1]})}):null,(0,f.jsx)("g",{transform:`translate(0 ${S})`,children:(0,f.jsx)(c.A,{textHeight:r,trackLabels:j,fontSize:u,model:z[1].view,displayResults:z[1].data,trackLabelOffset:L})})]}):null,(0,f.jsx)("defs",{children:(0,f.jsx)("clipPath",{id:"clip-bsv",children:(0,f.jsx)("rect",{x:0,y:0,width:P,height:T})})}),(0,f.jsx)("g",{transform:`translate(${L+50})`,clipPath:"url(#clip-bsv)",children:e.matchedTracks.map(t=>(0,f.jsx)(g.A,{parentRef:{current:null},model:e,trackId:t.configuration.trackId,getTrackYPosOverride:(e,t)=>H[t][e]},t.configuration.trackId))})]})})}))}},72698(e,t,r){r.d(t,{A:()=>n});var s=r(30936),a=r(32118);function n(e){const t=(0,s.c)(11),{model:r,height:n}=e,{dynamicBlocks:i,offsetPx:l,interRegionPaddingWidth:c}=r;let o,d;if(t[0]!==i.contentBlocks||t[1]!==n||t[2]!==c||t[3]!==l){let e;t[5]!==n||t[6]!==c||t[7]!==l?(e=e=>(0,a.jsx)("rect",{x:e.offsetPx-l-c,width:c,y:0,height:n,fill:"grey"},e.key),t[5]=n,t[6]=c,t[7]=l,t[8]=e):e=t[8],o=i.contentBlocks.slice(1).map(e),t[0]=i.contentBlocks,t[1]=n,t[2]=c,t[3]=l,t[4]=o}else o=t[4];return t[9]!==o?(d=(0,a.jsx)(a.Fragment,{children:o}),t[9]=o,t[10]=d):d=t[10],d}},88868(e,t,r){r.d(t,{A:()=>h});var s=r(30936),a=r(77251),n=r(33579),i=r(38157),l=r(72698),c=r(32118);function o(e){const t=(0,s.c)(11),{start:r,end:l,bpPerPx:o,reversed:h,major:x,minor:f,hideText:m,widthPx:p}=e,g=void 0!==h&&h,u=void 0===x||x,j=void 0===f||f,k=void 0!==m&&m,y=(0,i.H2)(r,l,o,u,j),b=(0,n.A)();let w;t[0]!==b.palette.text.secondary?(w=(0,a.stripAlpha)(b.palette.text.secondary),t[0]=b.palette.text.secondary,t[1]=w):w=t[1];const v=w;let P;t[2]!==o||t[3]!==v||t[4]!==l||t[5]!==g||t[6]!==r?(P=e=>{const t=(g?l-e.base:e.base-r)/o;return(0,c.jsx)("line",{x1:t,x2:t,y1:0,y2:"major"===e.type?6:4,strokeWidth:1,stroke:v},`tick-${e.base}`)},t[2]=o,t[3]=v,t[4]=l,t[5]=g,t[6]=r,t[7]=P):P=t[7];const A=y.map(P),S=k?null:y.filter(d).filter(e=>{const t=(g?l-e.base:e.base-r)/o,s=(0,a.getTickDisplayStr)(e.base+1,o),n=(0,a.measureText)(s,11)+4,i=t-3;return i>=0&&i+n<=p}).map(e=>{const t=(g?l-e.base:e.base-r)/o;return(0,c.jsx)("text",{x:t-3,y:18,fontSize:11,fill:v,children:(0,a.getTickDisplayStr)(e.base+1,o)},`label-${e.base}`)});let $;return t[8]!==A||t[9]!==S?($=(0,c.jsxs)(c.Fragment,{children:[A,S]}),t[8]=A,t[9]=S,t[10]=$):$=t[10],$}function d(e){return"major"===e.type}function h(e){const t=(0,s.c)(20),{model:r,fontSize:i}=e,{dynamicBlocks:d,offsetPx:h,bpPerPx:x}=r,{contentBlocks:f}=d,m=f.length<5,p=(0,n.A)();let g;t[0]!==p.palette.text.primary?(g=(0,a.stripAlpha)(p.palette.text.primary),t[0]=p.palette.text.primary,t[1]=g):g=t[1];const u=g;let j,k,y;if(t[2]!==r?(j=(0,c.jsx)(l.A,{model:r,height:30}),t[2]=r,t[3]=j):j=t[3],t[4]!==x||t[5]!==u||t[6]!==f||t[7]!==i||t[8]!==m||t[9]!==h){let e;t[11]!==x||t[12]!==u||t[13]!==i||t[14]!==m||t[15]!==h?(e=e=>{const{start:t,end:r,key:s,reversed:a,offsetPx:n,refName:l,widthPx:d}=e,f=n-h,p=`clip-${s}`;return(0,c.jsxs)("g",{children:[(0,c.jsx)("defs",{children:(0,c.jsx)("clipPath",{id:p,children:(0,c.jsx)("rect",{x:0,y:0,width:d,height:100})})}),(0,c.jsx)("g",{transform:`translate(${f} 0)`,children:(0,c.jsxs)("g",{clipPath:`url(#${p})`,children:[(0,c.jsx)("text",{x:4,y:i,fontSize:i,fill:u,children:l}),(0,c.jsx)("g",{transform:"translate(0 20)",children:(0,c.jsx)(o,{hideText:!m,start:t,end:r,bpPerPx:x,reversed:a,widthPx:d})})]})})]},s)},t[11]=x,t[12]=u,t[13]=i,t[14]=m,t[15]=h,t[16]=e):e=t[16],k=f.map(e),t[4]=x,t[5]=u,t[6]=f,t[7]=i,t[8]=m,t[9]=h,t[10]=k}else k=t[10];return t[17]!==j||t[18]!==k?(y=(0,c.jsxs)(c.Fragment,{children:[j,k]}),t[17]=j,t[18]=k,t[19]=y):y=t[19],y}}}]);
//# sourceMappingURL=9179.d2c1fca5.chunk.js.map