"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[9260],{89260(e,t,n){n.r(t),n.d(t,{default:()=>c});var i=n(42918),r=n(93111),o=n(77251),l=n(57141),s=n(64074),u=n(96960),a=n(32118);const c=(0,s.observer)(function(e){const{flatbush:t,items:n,displayModel:s,featureGenotypeMap:c,totalHeight:p,origScrollTop:f}=e,g=(0,i.useRef)(null),d=(0,i.useRef)(void 0),h=(0,i.useMemo)(()=>l.A.from(t),[t]),v=(0,i.useCallback)((e,t)=>{if(!g.current)return;const i=g.current.getBoundingClientRect(),r=e-i.left,l=t-i.top-f,s=h.search(r,l,r+1,l+1);if(s.length){const e=function(e,t){let n,i=1/0;for(const r of e){const e=t(r);e<i&&(i=e,n=r)}return n}(s,e=>n[e]?.bpLen??0),{bpLen:t,genotype:i,featureId:r,...l}=n[e]??{},a=void 0!==r?c[r]:void 0;if(a&&i){const{ref:e,alt:t,name:n,description:r,length:s}=a;return{...l,genotype:i,alleles:(0,u.Fm)(i,e,t),featureName:n,description:t.length>=3?"multiple ALT alleles":r,length:(0,o.getBpDisplayStr)(s)}}}},[h,n,c,f]),b=(0,i.useCallback)(e=>{const t=v(e.clientX,e.clientY),n=t?`${t.name}:${t.genotype}`:void 0;n!==d.current&&(d.current=n,s.setHoveredGenotype?.(t))},[v,s]),y=(0,i.useCallback)(()=>{void 0!==d.current&&(d.current=void 0,s.setHoveredGenotype?.(void 0))},[s]);return(0,a.jsx)("div",{ref:g,onMouseMove:b,onMouseLeave:y,onMouseOut:y,style:{overflow:"visible",position:"relative",height:p},children:(0,a.jsx)(r.A,{...e,style:{position:"absolute",left:0,top:f}})})})},96960(e,t,n){n.d(t,{Fm:()=>f,M_:()=>a,bC:()=>p});var i=n(93750),r=n(77251);const o=/[/|]/;function l(e){return e.includes("[")||e.includes("]")||e.startsWith(".")||e.endsWith(".")}function s(e){return e.startsWith("<")||l(e)}const u={"<DEL>":"deletion","<INS>":"insertion","<DUP>":"duplication","<INV>":"inversion","<INVDUP>":"inverted_duplication","<CNV>":"copy_number_variation","<TRA>":"translocation","<DUP:TANDEM>":"tandem_duplication","<NON_REF>":"sequence_variant","<*>":"sequence_variant"};function a(e,t,n){if(!t||0===t.length)return["remark","no alternative alleles"];const o=t.map(t=>function(e,t,n){if(e.startsWith("<"))return c(e,n)??"variant";if(l(e)&&(0,i.h)(e))return"breakend";const r=t.length,o=e.length;return 1===r&&1===o?"SNV":r===o?function(e,t){return e.split("").reverse().join("")===t}(t,e)?"inversion":"substitution":r<o?"insertion":"deletion"}(t,e,n)),u=[...new Set(o)],a=function(e,t){if(t.every(s))return t.join(",");const n=e.length;return`${e.length>10?(0,r.getBpDisplayStr)(n):e} -> ${t.map(e=>e.length>10?(0,r.getBpDisplayStr)(e.length):e).join(",")}`}(e,t);return[u.join(","),a]}function c(e,t){if(u[e])return u[e];if(t.getMetadata("ALT",e))return"sequence_variant";const n=e.slice(1,-1).split(":");return n.length>1?c(`<${n.slice(0,-1).join(":")}>`,t):void 0}function p(e,t){if(s(t)||1===e.length&&1===t.length)return t;const n=e.length,i=t.length;return n>5||i>5?`${(0,r.getBpDisplayStr)(n)} -> ${(0,r.getBpDisplayStr)(i)}`:`${e} -> ${t}`}function f(e,t,n){return e.split(o).map(e=>"."===e?".":0===+e?`ref(${t.length<10?t:(0,r.getBpDisplayStr)(t.length)})`:p(t,n[+e-1]||"")).join(e.includes("|")?"|":"/")}}}]);
//# sourceMappingURL=9260.95cf0061.chunk.js.map