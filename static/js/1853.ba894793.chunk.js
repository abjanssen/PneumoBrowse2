"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[1853,7258],{87258(e,t,r){r.r(t),r.d(t,{default:()=>S});var n=r(42918),o=r(1184),s=r(98373),i=r(66919),a=r(87),c=r(99367),l=r(8039),u=r(70885),d=r(29011),h=r(30936),x=r(52061),w=r(41031),p=r(84830),f=r(65045),j=r(32118);const b="jbrowse2@berkeley.edu",g=(0,f.n)()(e=>({pre:{background:(0,x.X4)(e.palette.error.main,.2),border:`1px solid ${e.palette.divider}`,overflow:"auto",margin:20,maxHeight:300}}));function m(e){const t=(0,h.c)(18),{text:r,extra:n}=e,{classes:o}=g();let s;t[0]!==n?(s=n?`supporting data: ${JSON.stringify(n,null,2)}`:"",t[0]=n,t[1]=s):s=t[1];const i=s;let a;t[2]!==i||t[3]!==r?(a=[r,i].filter(Boolean),t[2]=i,t[3]=r,t[4]=a):a=t[4];const c=a.join("\n"),l=encodeURIComponent(`I got this error from JBrowse, here is the stack trace:\n\n\`\`\`\n${r}\n\`\`\`\n${i}\n`),u=`https://github.com/GMOD/jbrowse-components/issues/new?labels=bug&title=JBrowse+issue&body=${l}`,d=`mailto:${b}?subject=JBrowse%202%20error&body=${l}`;let x,f,m,k,$;return t[5]!==u?(x=(0,j.jsx)(p.A,{href:u,children:"GitHub"}),t[5]=u,t[6]=x):x=t[6],t[7]!==d?(f=(0,j.jsx)(p.A,{href:d,children:b}),t[7]=d,t[8]=f):f=t[8],t[9]!==x||t[10]!==f?(m=(0,j.jsxs)(w.A,{children:["Post a new issue at"," ",x," or send an email to ",f]}),t[9]=x,t[10]=f,t[11]=m):m=t[11],t[12]!==o.pre||t[13]!==c?(k=(0,j.jsx)("pre",{className:o.pre,children:c}),t[12]=o.pre,t[13]=c,t[14]=k):k=t[14],t[15]!==m||t[16]!==k?($=(0,j.jsxs)(j.Fragment,{children:[m,k]}),t[15]=m,t[16]=k,t[17]=$):$=t[17],$}var k=r(87574);async function $(e){const t=await fetch(e);if(!t.ok)throw new Error(`HTTP ${t.status} fetching ${e}: ${await t.text()}`);return t.text()}const A={},y=/\/\/# sourceMappingURL=(.*)/,C=/(.*)((?:https?|file):\/\/.*):(\d+):(\d+)/;async function v(e){if(A[e])return A[e];const t=new URL(e).search,r=await $(e),n=y.exec(r)?.[1]??"",o=await async function(e){return JSON.parse(await $(e))}(new URL(n,e).href+t),s=new d.SourceMapConsumer(o);return A[e]=s,s}function S({error:e,onClose:t,extra:d}){const[h,x]=(0,n.useState)(),[w,p]=(0,n.useState)(),[f,b]=(0,n.useState)(!1),g=e?`${e}`:"",$=function(e,t){return e.startsWith("Error:")?e.slice(`${t}`.length):e}(function(e){return"object"==typeof e&&null!==e&&"stack"in e?`${e.stack}`:""}(e),g);(0,n.useEffect)(()=>{(async()=>{try{x(await async function(e){const t=[];for(const r of e.split("\n")){const e=C.exec(r);if(!e){t.push(r);continue}const n=e[2],o=(await v(n)).originalPositionFor({line:+e[3],column:+e[4]});o.source&&o.line&&o.column?t.push(`${o.source}:${o.line}:${o.column+1} (${e[1].trim()})`):t.push(r)}return t.join("\n")}($))}catch(e){console.error(e),x($),p(e)}})()},[$]);const A=window.JBrowseSession?.version,y=[w?"Error loading source map, showing raw stack trace below:":"",g.length>1e4?`${g.slice(0,1e4)}...`:g,h||"No stack trace available",A?`JBrowse ${A}`:""].filter(Boolean).join("\n");return(0,j.jsxs)(s.A,{open:!0,onClose:t,maxWidth:"xl",children:[(0,j.jsxs)(i.A,{children:["Stack trace",(0,j.jsx)(a.A,{onClick:t,sx:{position:"absolute",right:8,top:8},children:(0,j.jsx)(o.A,{})})]}),(0,j.jsx)(c.A,{children:void 0===h?(0,j.jsx)(k.A,{variant:"h6"}):(0,j.jsx)(m,{text:y,extra:d})}),(0,j.jsxs)(l.A,{children:[(0,j.jsx)(u.A,{variant:"contained",color:"secondary",onClick:async()=>{const{default:e}=await r.e(8284).then(r.t.bind(r,88284,23));e(y),b(!0),setTimeout(()=>{b(!1)},1e3)},children:f?"Copied!":"Copy stack trace to clipboard"}),(0,j.jsx)(u.A,{variant:"contained",color:"primary",onClick:t,children:"Close"})]})]})}},91853(e,t,r){r.r(t),r.d(t,{default:()=>h});var n=r(87258),o=r(77251),s=r(20611),i=r(3136),a=r(7623),c=r(87),l=r(64074),u=r(82947),d=r(32118);const h=(0,l.observer)(function({model:e}){return(0,d.jsx)(u.A,{message:`${e.error}`,severity:"error",action:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(a.A,{title:"Reload track",children:(0,d.jsx)(c.A,{"data-testid":"reload_button",onClick:()=>{e.reload()},children:(0,d.jsx)(s.A,{})})}),(0,d.jsx)(a.A,{title:"Show stack trace",children:(0,d.jsx)(c.A,{onClick:()=>{(0,o.getSession)(e).queueDialog(t=>[n.default,{onClose:t,error:e.error}])},children:(0,d.jsx)(i.A,{})})})]})})})}}]);
//# sourceMappingURL=1853.ba894793.chunk.js.map