"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[5736],{15736:(e,t,n)=>{n.r(t),n.d(t,{default:()=>h});var a=n(7552),l=n(87083),r=n(99546),s=n(49823),o=n(36715),i=n(87731),u=n(95805);const c=(0,a.lazy)((()=>n.e(5930).then(n.bind(n,45930)))),m=(0,a.lazy)((()=>n.e(457).then(n.bind(n,80457))));function f({model:e,feature:t}){const{view:n}=e,[l,i]=(0,a.useState)(),[c,m]=(0,a.useState)();(0,a.useEffect)((()=>{(async()=>{try{const e=await async function({view:e,feature:t}){const{assemblyManager:n}=(0,r.getSession)(e),a=t.get("CIGAR"),l=t.get("strand"),s=t.get("tags")?.SA||"",o=t.get("name"),i=(0,u.getClip)(a,1),c=await n.waitForAssembly(e.assemblyNames[0]);if(!c)throw new Error("assembly not found");const m=(0,u.featurizeSA)(s,t.id(),l,o,!0),f=t.toJSON();f.clipPos=i,f.strand=1,f.mate={refName:o,start:i,end:i+(0,u.getLengthSansClipping)(a)};const g=[f,...m];return g.forEach(((e,t)=>{e.refName=c.getCanonicalRefName(e.refName)||e.refName,e.syntenyId=t,e.mate.syntenyId=t,e.mate.uniqueId=`${e.uniqueId}_mate`})),g.sort(((e,t)=>e.clipPos-t.clipPos)),g}({view:n,feature:new r.SimpleFeature(t)});i(e)}catch(e){m(e),console.error(e)}})()}),[t,n]);const f=[];if(l)for(let e=0;e<l.length-1;e++)f.push([l[e],l[e+1]]);return f.length?a.createElement("div",null,a.createElement(o.A,null,"Launch split view"),c?a.createElement(s.ErrorMessage,{error:c}):null,a.createElement("ul",null,f.map(((t,n)=>{const[l,s]=t;return a.createElement("li",{key:`${JSON.stringify(t)}-${n}`},l.refName,":",(0,r.toLocale)(1===l.strand?l.end:l.start)," ->"," ",s.refName,":",(0,r.toLocale)(1===s.strand?s.start:s.end)," ",a.createElement(g,{model:e,f1:l,f2:s})," ",a.createElement(d,{model:e,f1:l,f2:s}))})))):null}function g({model:e,f1:t,f2:n}){return a.createElement(i.A,{href:"#",onClick:a=>{a.preventDefault();const l=(0,r.getSession)(e);l.queueDialog((a=>[c,{handleClose:a,session:l,feature:new r.SimpleFeature({...t,mate:n}),view:e.view,assemblyName:e.view.displayedRegions[0].assemblyName}]))}},"(top/bottom)")}function d({model:e,f1:t,f2:n}){return a.createElement(i.A,{href:"#",onClick:a=>{a.preventDefault();const l=(0,r.getSession)(e);l.queueDialog((a=>[m,{handleClose:a,session:l,feature:new r.SimpleFeature({...t,mate:n}),view:e.view,assemblyName:e.view.displayedRegions[0].assemblyName}]))}},"(single row)")}var p=n(51762);function y({tag:e,model:t}){return a.createElement("div",null,a.createElement(o.A,null,"List of supplementary alignment locations"),a.createElement("ul",null,e.split(";").filter((e=>!!e)).map(((e,n)=>{const[l,r,s,o]=e.split(","),c=(0,u.getLengthOnRef)(o),m=Math.floor(c/5),f=+r,g=+r+c,d=f-m,y=g+m,w=`${l}:${Math.max(1,d)}-${y}`,h=`${l}:${f.toLocaleString("en-US")}-${g.toLocaleString("en-US")} (${s}) [${c}bp]`;return a.createElement("li",{key:`${w}-${n}`},a.createElement(i.A,{href:"#",onClick:async e=>{e.preventDefault(),(0,p.h)(w,t)}},h))}))))}function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},w.apply(null,arguments)}function h(e){const{model:t,tag:n,feature:s}=e,o=(0,r.getSession)(t),{pluginManager:i}=(0,r.getEnv)(o);let u=!1;try{u=!!i.getViewType("BreakpointSplitView")}catch(e){}return a.createElement(l.default,w({},e,{title:"Supplementary alignments"}),a.createElement(y,{model:t,tag:n}),u?a.createElement(f,{model:t,feature:s}):null)}}}]);
//# sourceMappingURL=5736.dcc60395.chunk.js.map