{"version":3,"file":"static/js/7308.e6c39b3d.chunk.js","mappings":"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","sources":["webpack://@jbrowse/web/../../packages/core/src/BaseFeatureWidget/SequenceFeatureDetails/consts.ts","webpack://@jbrowse/web/../../packages/core/src/BaseFeatureWidget/SequenceFeatureDetails/util.ts","webpack://@jbrowse/web/../../packages/core/src/BaseFeatureWidget/SequenceFeatureDetails/seqtypes/SequenceDisplay.tsx","webpack://@jbrowse/web/../../packages/core/src/BaseFeatureWidget/SequenceFeatureDetails/seqtypes/CDNASequence.tsx","webpack://@jbrowse/web/../../packages/core/src/BaseFeatureWidget/SequenceFeatureDetails/seqtypes/CDSSequence.tsx","webpack://@jbrowse/web/../../packages/core/src/BaseFeatureWidget/SequenceFeatureDetails/seqtypes/GenomicSequence.tsx","webpack://@jbrowse/web/../../packages/core/src/BaseFeatureWidget/SequenceFeatureDetails/seqtypes/ProteinSequence.tsx","webpack://@jbrowse/web/../../packages/core/src/BaseFeatureWidget/SequenceFeatureDetails/SequenceContents.tsx","webpack://@jbrowse/web/../../packages/core/src/BaseFeatureWidget/SequenceFeatureDetails/useSequenceData.ts","webpack://@jbrowse/web/../../packages/core/src/BaseFeatureWidget/SequenceFeatureDetails/SequenceName.tsx","webpack://@jbrowse/web/../../packages/core/src/BaseFeatureWidget/SequenceFeatureDetails/SequencePanel.tsx"],"sourcesContent":["// note that these are currently put into the style section instead of being\n// defined in classes to aid copy and paste to an external document e.g. word\nexport const intronColor = undefined\nexport const utrColor = 'rgb(200,240,240)'\nexport const proteinColor = 'rgb(220,160,220)'\nexport const cdsColor = 'rgb(220,220,180)'\nexport const updownstreamColor = 'rgba(250,200,200)'\nexport const genomeColor = 'rgb(200,280,200)'\n","/**\n * Splits a string into chunks for display with optional coordinate spacing.\n */\nexport function splitString({\n  str,\n  charactersPerRow,\n  showCoordinates,\n  currRemainder = 0,\n  spacingInterval = 10,\n}: {\n  str: string\n  charactersPerRow: number\n  showCoordinates: boolean\n  currRemainder?: number\n  spacingInterval?: number\n}) {\n  const numChunks = Math.ceil(str.length / charactersPerRow)\n  const segments = new Array(numChunks)\n  // Initialize position counter for coordinate spacing\n  let positionCounter = currRemainder % spacingInterval\n\n  let chunkIndex = 0\n  let stringOffset = 0\n\n  // Process the string in chunks\n  for (; chunkIndex < numChunks + 1; ++chunkIndex) {\n    // For the first chunk, adjust for remainder from previous section\n    const chunkSize =\n      chunkIndex === 0 ? charactersPerRow - currRemainder : charactersPerRow\n\n    const currentChunk = str.slice(stringOffset, stringOffset + chunkSize)\n\n    // Break if no more content\n    if (!currentChunk) {\n      break\n    }\n\n    segments[chunkIndex] = showCoordinates\n      ? formatWithCoordinateSpacing(\n          currentChunk,\n          positionCounter,\n          spacingInterval,\n        )\n      : currentChunk\n\n    // Reset position counter after each row\n    positionCounter = 0\n    stringOffset += chunkSize\n  }\n\n  // Calculate remainder for the next section\n  return {\n    segments,\n    remainder: calculateRemainder(\n      segments,\n      chunkIndex,\n      currRemainder,\n      charactersPerRow,\n    ),\n  }\n}\n\n/**\n * Formats a string chunk with spaces at regular intervals to help with\n * coordinate visualization.\n */\nfunction formatWithCoordinateSpacing(\n  chunk: string,\n  startPosition: number,\n  spacingInterval: number,\n) {\n  if (!chunk) {\n    return ''\n  }\n\n  let formattedChunk = ''\n\n  for (let i = 0, j = startPosition; i < chunk.length; i++, j++) {\n    // Add space at interval boundaries\n    if (j % spacingInterval === 0) {\n      formattedChunk += ' '\n      j = 0 // Reset counter after adding space\n    }\n    formattedChunk += chunk[i]\n  }\n\n  return formattedChunk\n}\n\n/**\n * Calculates the remainder count for continuing to the next section.\n */\nfunction calculateRemainder(\n  segments: string[],\n  chunkIndex: number,\n  currRemainder: number,\n  charactersPerRow: number,\n) {\n  // Get the length of the last segment without spaces\n  const lastSegmentLength = segments.at(-1)?.replaceAll(' ', '').length || 0\n\n  // If we're on the first chunk, include the previous remainder\n  const additionalRemainder = chunkIndex < 2 ? currRemainder : 0\n\n  // Calculate the new remainder\n  return (lastSegmentLength + additionalRemainder) % charactersPerRow\n}\n","import { Fragment } from 'react'\n\nimport { observer } from 'mobx-react'\n\nimport type { SequenceFeatureDetailsModel } from '../model.ts'\n\nconst SequenceDisplay = observer(function SequenceDisplay({\n  chunks,\n  start,\n  color,\n  strand = 1,\n  coordStart = start,\n  model,\n}: {\n  chunks: string[]\n  start: number\n  coordStart?: number\n  strand?: number\n  color?: string\n  model: SequenceFeatureDetailsModel\n}) {\n  const { charactersPerRow, showCoordinates } = model\n\n  return chunks.map((chunk, idx) => {\n    const f = coordStart - (start % charactersPerRow)\n    const prefix =\n      (idx === 0 && start % charactersPerRow === 0) || idx > 0\n        ? `${`${f + idx * strand * charactersPerRow}`.padStart(4)}   `\n        : ''\n    const postfix =\n      idx === chunks.length - 1 &&\n      (chunks.at(-1)?.replaceAll(' ', '').length || 0) +\n        (idx === 0 ? start % charactersPerRow : 0) !==\n        charactersPerRow\n        ? null\n        : showCoordinates\n          ? ' \\n'\n          : ''\n    return (\n      /* biome-ignore lint/suspicious/noArrayIndexKey: */\n      <Fragment key={`${chunk}-${idx}`}>\n        {showCoordinates ? prefix : null}\n        <span style={{ background: color }}>{chunk}</span>\n        {postfix}\n      </Fragment>\n    )\n  })\n})\n\nexport default SequenceDisplay\n","import { observer } from 'mobx-react'\n\nimport { cdsColor, updownstreamColor, utrColor } from '../consts.ts'\nimport { splitString } from '../util.ts'\nimport SequenceDisplay from './SequenceDisplay.tsx'\n\nimport type { SimpleFeatureSerialized } from '../../../util/index.ts'\nimport type { Feat } from '../../util.tsx'\nimport type { SequenceFeatureDetailsModel } from '../model.ts'\n\nconst CDNASequence = observer(function CDNASequence({\n  utr,\n  cds,\n  exons,\n  sequence,\n  upstream,\n  downstream,\n  feature,\n  includeIntrons,\n  collapseIntron,\n  model,\n}: {\n  utr: Feat[]\n  cds: Feat[]\n  exons: Feat[]\n  sequence: string\n  upstream?: string\n  downstream?: string\n  feature: SimpleFeatureSerialized\n  includeIntrons?: boolean\n  collapseIntron?: boolean\n  model: SequenceFeatureDetailsModel\n}) {\n  const {\n    upperCaseCDS,\n    intronBp,\n    charactersPerRow,\n    showCoordinates,\n    showCoordinatesSetting,\n  } = model\n  const hasCds = cds.length > 0\n  const chunks = (\n    cds.length ? [...cds, ...utr].sort((a, b) => a.start - b.start) : exons\n  ).filter(f => f.start !== f.end)\n  const toLower = (s: string) => (upperCaseCDS ? s.toLowerCase() : s)\n  const toUpper = (s: string) => (upperCaseCDS ? s.toUpperCase() : s)\n\n  const strand = feature.strand === -1 ? -1 : 1\n  const fullGenomicCoordinates =\n    showCoordinatesSetting === 'genomic' && includeIntrons && !collapseIntron\n\n  const mult = fullGenomicCoordinates ? strand : 1\n  let coordStart = fullGenomicCoordinates\n    ? strand > 0\n      ? feature.start + 1 - (upstream?.length || 0)\n      : feature.end + (upstream?.length || 0)\n    : 0\n  let currStart = 0\n  let currRemainder = 0\n\n  let upstreamChunk = null as React.ReactNode\n  if (upstream) {\n    const { segments, remainder } = splitString({\n      str: toLower(upstream),\n      charactersPerRow,\n      showCoordinates,\n    })\n    upstreamChunk = (\n      <SequenceDisplay\n        model={model}\n        color={updownstreamColor}\n        strand={mult}\n        start={currStart}\n        coordStart={coordStart}\n        chunks={segments}\n      />\n    )\n    currRemainder = remainder\n    currStart = currStart + upstream.length * mult\n    coordStart = coordStart + upstream.length * mult\n  }\n\n  const middleChunks = [] as React.ReactNode[]\n  for (let idx = 0; idx < chunks.length; idx++) {\n    const chunk = chunks[idx]!\n    const intron = sequence.slice(chunk.end, chunks[idx + 1]?.start)\n    const s = sequence.slice(chunk.start, chunk.end)\n    const { segments, remainder } = splitString({\n      str: hasCds\n        ? chunk.type === 'CDS'\n          ? toUpper(s)\n          : toLower(s)\n        : toUpper(s),\n      charactersPerRow,\n      currRemainder,\n      showCoordinates,\n    })\n\n    middleChunks.push(\n      <SequenceDisplay\n        key={`${JSON.stringify(chunk)}-mid`}\n        model={model}\n        color={chunk.type === 'CDS' ? cdsColor : utrColor}\n        strand={mult}\n        start={currStart}\n        coordStart={coordStart}\n        chunks={segments}\n      />,\n    )\n    currRemainder = remainder\n    currStart = currStart + s.length * mult\n    coordStart = coordStart + s.length * mult\n\n    if (intron && includeIntrons && idx < chunks.length - 1) {\n      const str = toLower(\n        collapseIntron && intron.length > intronBp * 2\n          ? `${intron.slice(0, intronBp)}...${intron.slice(-intronBp)}`\n          : intron,\n      )\n      const { segments, remainder } = splitString({\n        str,\n        charactersPerRow,\n        currRemainder,\n        showCoordinates,\n      })\n\n      if (segments.length) {\n        middleChunks.push(\n          <SequenceDisplay\n            key={`${JSON.stringify(chunk)}-intron`}\n            model={model}\n            strand={mult}\n            coordStart={coordStart}\n            start={currStart}\n            chunks={segments}\n          />,\n        )\n        currRemainder = remainder\n        currStart = currStart + str.length * mult\n        coordStart = coordStart + str.length * mult\n      }\n    }\n  }\n\n  let downstreamChunk = null as React.ReactNode\n  if (downstream) {\n    const { segments } = splitString({\n      str: toLower(downstream),\n      charactersPerRow,\n      currRemainder,\n      showCoordinates,\n    })\n    downstreamChunk = (\n      <SequenceDisplay\n        start={currStart}\n        model={model}\n        strand={mult}\n        chunks={segments}\n        coordStart={coordStart}\n        color={updownstreamColor}\n      />\n    )\n  }\n  return (\n    <>\n      {upstreamChunk}\n      {middleChunks}\n      {downstreamChunk}\n    </>\n  )\n})\n\nexport default CDNASequence\n","import { observer } from 'mobx-react'\n\nimport { stitch } from '../../util.tsx'\nimport { cdsColor } from '../consts.ts'\nimport { splitString } from '../util.ts'\nimport SequenceDisplay from './SequenceDisplay.tsx'\n\nimport type { Feat } from '../../util.tsx'\nimport type { SequenceFeatureDetailsModel } from '../model.ts'\n\nconst CDSSequence = observer(function CDSSequence({\n  cds,\n  sequence,\n  model,\n}: {\n  cds: Feat[]\n  sequence: string\n  model: SequenceFeatureDetailsModel\n}) {\n  const { charactersPerRow, showCoordinates } = model\n  const { segments } = splitString({\n    str: stitch(cds, sequence),\n    charactersPerRow,\n    showCoordinates,\n  })\n  return (\n    <SequenceDisplay\n      model={model}\n      color={cdsColor}\n      chunks={segments}\n      start={0}\n    />\n  )\n})\n\nexport default CDSSequence\n","import { observer } from 'mobx-react'\n\nimport { genomeColor, updownstreamColor } from '../consts.ts'\nimport { splitString } from '../util.ts'\nimport SequenceDisplay from './SequenceDisplay.tsx'\n\nimport type { SimpleFeatureSerialized } from '../../../util/index.ts'\nimport type { SequenceFeatureDetailsModel } from '../model.ts'\n\nconst GenomicSequence = observer(function GenomicSequence({\n  sequence,\n  upstream,\n  feature,\n  downstream,\n  model,\n}: {\n  sequence: string\n  feature: SimpleFeatureSerialized\n  upstream?: string\n  downstream?: string\n  model: SequenceFeatureDetailsModel\n}) {\n  const { charactersPerRow, showCoordinatesSetting, showCoordinates } = model\n  let currStart = 0\n  let upstreamChunk = null as React.ReactNode\n  let currRemainder = 0\n  const strand = feature.strand === -1 ? -1 : 1\n  const fullGenomicCoordinates = showCoordinatesSetting === 'genomic'\n  const mult = fullGenomicCoordinates ? strand : 1\n  let coordStart = fullGenomicCoordinates\n    ? strand > 0\n      ? feature.start + 1 - (upstream?.length || 0)\n      : feature.end + (upstream?.length || 0)\n    : 0\n  if (upstream) {\n    const { segments, remainder } = splitString({\n      str: upstream,\n      charactersPerRow,\n      showCoordinates,\n    })\n    upstreamChunk = (\n      <SequenceDisplay\n        model={model}\n        color={updownstreamColor}\n        start={currStart}\n        coordStart={coordStart}\n        chunks={segments}\n      />\n    )\n    currRemainder = remainder\n    currStart = currStart + upstream.length * mult\n    coordStart = coordStart + upstream.length * mult\n  }\n\n  const { segments, remainder } = splitString({\n    str: sequence,\n    charactersPerRow,\n    showCoordinates,\n    currRemainder,\n  })\n  const middleChunk = (\n    <SequenceDisplay\n      model={model}\n      color={genomeColor}\n      start={currStart}\n      coordStart={coordStart}\n      chunks={segments}\n    />\n  )\n  currRemainder = remainder\n  currStart += sequence.length * mult\n  coordStart = coordStart + sequence.length * mult\n\n  let downstreamChunk = null as React.ReactNode\n  if (downstream) {\n    const { segments } = splitString({\n      str: downstream,\n      charactersPerRow,\n      currRemainder,\n      showCoordinates,\n    })\n    downstreamChunk = (\n      <SequenceDisplay\n        start={currStart}\n        model={model}\n        chunks={segments}\n        coordStart={coordStart}\n        color={updownstreamColor}\n      />\n    )\n  }\n\n  return (\n    <>\n      {upstreamChunk}\n      {middleChunk}\n      {downstreamChunk}\n    </>\n  )\n})\n\nexport default GenomicSequence\n","import { observer } from 'mobx-react'\n\nimport { convertCodingSequenceToPeptides } from '../../../util/convertCodingSequenceToPeptides.ts'\nimport { proteinColor } from '../consts.ts'\nimport { splitString } from '../util.ts'\nimport SequenceDisplay from './SequenceDisplay.tsx'\n\nimport type { Feat } from '../../util.tsx'\nimport type { SequenceFeatureDetailsModel } from '../model.ts'\n\nconst ProteinSequence = observer(function ProteinSequence({\n  cds,\n  sequence,\n  codonTable,\n  model,\n}: {\n  cds: Feat[]\n  sequence: string\n  codonTable: Record<string, string>\n  model: SequenceFeatureDetailsModel\n}) {\n  const { charactersPerRow, showCoordinates } = model\n  const str = convertCodingSequenceToPeptides({\n    cds,\n    sequence,\n    codonTable,\n  })\n  const { segments } = splitString({\n    str,\n    charactersPerRow,\n    showCoordinates,\n  })\n  return (\n    <SequenceDisplay\n      model={model}\n      color={proteinColor}\n      chunks={segments}\n      start={0}\n    />\n  )\n})\n\nexport default ProteinSequence\n","import { observer } from 'mobx-react'\n\nimport CDNASequence from './seqtypes/CDNASequence.tsx'\nimport CDSSequence from './seqtypes/CDSSequence.tsx'\nimport GenomicSequence from './seqtypes/GenomicSequence.tsx'\nimport ProteinSequence from './seqtypes/ProteinSequence.tsx'\nimport { useSequenceData } from './useSequenceData.ts'\nimport { defaultCodonTable, generateCodonTable } from '../../util/index.ts'\n\nimport type { SequenceFeatureDetailsModel } from './model.ts'\nimport type { SimpleFeatureSerialized } from '../../util/index.ts'\nimport type { SeqState } from '../util.tsx'\n\n/**\n * Renders the appropriate sequence component based on the selected mode\n */\nfunction RenderedSequenceComponent({\n  mode,\n  feature,\n  model,\n  sequenceData,\n}: {\n  mode: string\n  feature: SimpleFeatureSerialized\n  model: SequenceFeatureDetailsModel\n  sequenceData: {\n    seq: string\n    upstream?: string\n    downstream?: string\n    cds: any[]\n    exons: any[]\n    utr: any[]\n  }\n}) {\n  const { seq, upstream, downstream, cds, exons, utr } = sequenceData\n\n  switch (mode) {\n    case 'genomic':\n      return <GenomicSequence feature={feature} model={model} sequence={seq} />\n\n    case 'genomic_sequence_updownstream':\n      return (\n        <GenomicSequence\n          model={model}\n          feature={feature}\n          sequence={seq}\n          upstream={upstream}\n          downstream={downstream}\n        />\n      )\n\n    case 'cds':\n      return <CDSSequence model={model} cds={cds} sequence={seq} />\n\n    case 'cdna':\n      return (\n        <CDNASequence\n          model={model}\n          exons={exons}\n          feature={feature}\n          cds={cds}\n          utr={utr}\n          sequence={seq}\n        />\n      )\n\n    case 'protein':\n      return (\n        <ProteinSequence\n          model={model}\n          cds={cds}\n          codonTable={generateCodonTable(defaultCodonTable)}\n          sequence={seq}\n        />\n      )\n\n    case 'gene':\n      return (\n        <CDNASequence\n          model={model}\n          exons={exons}\n          feature={feature}\n          cds={cds}\n          utr={utr}\n          sequence={seq}\n          includeIntrons\n        />\n      )\n\n    case 'gene_collapsed_intron':\n      return (\n        <CDNASequence\n          model={model}\n          exons={exons}\n          feature={feature}\n          cds={cds}\n          sequence={seq}\n          utr={utr}\n          includeIntrons\n          collapseIntron\n        />\n      )\n\n    case 'gene_updownstream':\n      return (\n        <CDNASequence\n          model={model}\n          exons={exons}\n          feature={feature}\n          cds={cds}\n          sequence={seq}\n          utr={utr}\n          upstream={upstream}\n          downstream={downstream}\n          includeIntrons\n        />\n      )\n\n    case 'gene_updownstream_collapsed_intron':\n      return (\n        <CDNASequence\n          model={model}\n          exons={exons}\n          feature={feature}\n          cds={cds}\n          sequence={seq}\n          utr={utr}\n          upstream={upstream}\n          downstream={downstream}\n          includeIntrons\n          collapseIntron\n        />\n      )\n\n    default:\n      return <div>Unknown type</div>\n  }\n}\n\nconst SequenceContents = observer(function SequenceContents({\n  mode,\n  feature,\n  sequence,\n  model,\n}: {\n  mode: string\n  feature: SimpleFeatureSerialized\n  sequence: SeqState\n  model: SequenceFeatureDetailsModel\n}) {\n  const sequenceData = useSequenceData({\n    feature,\n    sequence,\n  })\n  return sequenceData ? (\n    <RenderedSequenceComponent\n      mode={mode}\n      feature={feature}\n      model={model}\n      sequenceData={sequenceData}\n    />\n  ) : null\n})\n\nexport default SequenceContents\n","import { revcom } from '../../util/index.ts'\nimport {\n  calculateUTRs2,\n  calculateUTRs,\n  filterSuccessiveElementsWithSameStartAndEndCoord,\n  revlist,\n} from '../util.tsx'\n\nimport type { SimpleFeatureSerialized } from '../../util/index.ts'\nimport type { ErrorState, SeqState } from '../util.tsx'\n\n/**\n * Handles sequence orientation for reverse strand features\n */\ninterface FeatureData {\n  sequence: SeqState\n  cds: any[]\n  exons: any[]\n  utr: any[]\n} /**\n * Prepares feature subfeatures for display by sorting and adjusting coordinates\n * relative to the parent feature start position\n */\nfunction prepareSubfeatures(feature: SimpleFeatureSerialized) {\n  const { start, subfeatures } = feature\n  return (\n    subfeatures\n      ?.sort((a, b) => a.start - b.start)\n      .map(sub => ({\n        ...sub,\n        start: sub.start - start,\n        end: sub.end - start,\n      })) || []\n  )\n}\n\n/**\n * Processes feature data to extract and deduplicate CDS, UTR, and exon features\n */\nfunction processFeatureData(children: any[], feature: SimpleFeatureSerialized) {\n  // Filter duplicate entries in cds and exon lists Duplicate entries may be\n  // rare but were seen in Gencode v36 track NCList (produces broken protein\n  // translations if included)\n  const featureType = feature.type?.toLowerCase()\n  const isMatureProteinRegion = featureType === 'mature_protein_region_of_cds'\n  const cds = isMatureProteinRegion\n    ? [{ start: 0, end: feature.end - feature.start, type: 'CDS' }]\n    : filterSuccessiveElementsWithSameStartAndEndCoord(\n        children.filter(sub => {\n          const type = sub.type?.toLowerCase()\n          return type === 'cds' || type === 'mature_protein_region_of_cds'\n        }),\n      )\n  const exons = filterSuccessiveElementsWithSameStartAndEndCoord(\n    children.filter(sub => sub.type === 'exon'),\n  )\n  let utr = filterSuccessiveElementsWithSameStartAndEndCoord(\n    children.filter(sub => sub.type?.match(/utr/i)),\n  )\n\n  // Calculate UTRs if not present but we have CDS and exons\n  if (!utr.length && cds.length && exons.length) {\n    utr = calculateUTRs(cds, exons)\n  } else if (!utr.length && cds.length && !exons.length) {\n    utr = calculateUTRs2(cds, {\n      start: 0,\n      end: feature.end - feature.start,\n      type: 'gene',\n    })\n  }\n\n  return {\n    cds,\n    exons,\n    utr,\n  }\n}\n\nfunction handleReverseStrand(\n  sequence: SeqState,\n  cds: any[],\n  exons: any[],\n  utr: any[],\n): FeatureData {\n  const { seq, upstream = '', downstream = '' } = sequence\n\n  // For reverse strand, reverse complement the sequence and swap\n  // upstream/downstream\n  return {\n    sequence: {\n      seq: revcom(seq),\n      upstream: downstream ? revcom(downstream) : '',\n      downstream: upstream ? revcom(upstream) : '',\n    },\n    cds: revlist(cds, seq.length),\n    exons: revlist(exons, seq.length),\n    utr: revlist(utr, seq.length),\n  }\n}\n\nexport function useSequenceData({\n  feature,\n  sequence,\n}: {\n  feature: SimpleFeatureSerialized\n  sequence?: SeqState | ErrorState\n}) {\n  // Prepare subfeatures relative to parent feature start position\n  const children = prepareSubfeatures(feature)\n\n  // Process feature data to extract CDS, exons, and UTRs\n  const { cds, exons, utr } = processFeatureData(children, feature)\n\n  if (!sequence || 'error' in sequence) {\n    return undefined\n  } else {\n    // Handle reverse strand orientation if needed\n    const {\n      sequence: adjustedSequence,\n      cds: adjustedCds,\n      exons: adjustedExons,\n      utr: adjustedUtr,\n    } = feature.strand === -1\n      ? handleReverseStrand(sequence, cds, exons, utr)\n      : { sequence, cds, exons, utr }\n\n    const { seq, upstream, downstream } = adjustedSequence\n    return {\n      seq,\n      upstream,\n      downstream,\n      cds: adjustedCds,\n      exons: adjustedExons,\n      utr: adjustedUtr,\n    }\n  }\n}\n","import { observer } from 'mobx-react'\n\nimport { toLocale } from '../../util/index.ts'\n\nimport type { SequenceFeatureDetailsModel } from './model.ts'\nimport type { SimpleFeatureSerialized } from '../../util/index.ts'\n\nfunction getStrand(strand: number) {\n  if (strand === -1) {\n    return '(-)'\n  } else if (strand === 1) {\n    return '(+)'\n  } else {\n    return ''\n  }\n}\n\nconst SequenceName = observer(function SequenceName({\n  mode,\n  model,\n  feature,\n}: {\n  model: SequenceFeatureDetailsModel\n  mode: string\n  feature: SimpleFeatureSerialized\n}) {\n  return (\n    <div style={{ background: 'white' }}>\n      {`>${[\n        [feature.name || feature.id, mode].filter(f => !!f).join('-'),\n        `${feature.refName}:${toLocale(feature.start + 1)}-${toLocale(feature.end)}${getStrand(feature.strand as number)}`,\n        mode.endsWith('updownstream')\n          ? `+/- ${toLocale(model.upDownBp)} up/downstream bp`\n          : '',\n      ]\n        .filter(f => !!f)\n        .join(' ')}\\n`}\n    </div>\n  )\n})\n\nexport default SequenceName\n","import { forwardRef } from 'react'\n\nimport { observer } from 'mobx-react'\n\nimport SequenceContents from './SequenceContents.tsx'\nimport SequenceName from './SequenceName.tsx'\n\nimport type { SequencePanelProps } from './types.ts'\n\nfunction WordWrap({ children }: { children: React.ReactNode }) {\n  return (\n    <pre\n      style={{\n        /* raw styles instead of className so that html copy works */\n        fontFamily: 'monospace',\n        color: 'black',\n        fontSize: 11,\n      }}\n    >\n      {children}\n    </pre>\n  )\n}\n\nfunction NoWordWrap({ children }: { children: React.ReactNode }) {\n  return (\n    <div\n      style={{\n        /* raw styles instead of className so that html copy works */\n        fontFamily: 'monospace',\n        color: 'black',\n        fontSize: 11,\n        maxWidth: 600,\n        whiteSpace: 'wrap',\n        wordBreak: 'break-all',\n      }}\n    >\n      {children}\n    </div>\n  )\n}\n\nconst SequencePanel = observer(\n  forwardRef<HTMLDivElement, SequencePanelProps>(function S(props, ref) {\n    const { sequence, model, feature } = props\n    const { showCoordinates, mode } = model\n\n    const Container = showCoordinates ? WordWrap : NoWordWrap\n    return (\n      <div\n        data-testid=\"sequence_panel\"\n        ref={ref}\n        style={{ maxHeight: 300, overflow: 'auto' }}\n      >\n        <Container>\n          <SequenceName model={model} mode={mode} feature={feature} />\n          <SequenceContents\n            model={model}\n            mode={mode}\n            feature={feature}\n            sequence={sequence}\n          />\n        </Container>\n      </div>\n    )\n  }),\n)\n\nexport default SequencePanel\n"],"names":["cdsColor","updownstreamColor","splitString","str","charactersPerRow","showCoordinates","currRemainder","spacingInterval","numChunks","Math","ceil","length","segments","Array","positionCounter","chunkIndex","stringOffset","chunkSize","currentChunk","slice","formatWithCoordinateSpacing","remainder","calculateRemainder","chunk","startPosition","formattedChunk","i","j","at","replaceAll","observer","chunks","start","color","strand","coordStart","model","map","idx","prefix","padStart","postfix","_jsxs","Fragment","children","_jsx","style","background","utr","cds","exons","sequence","upstream","downstream","feature","includeIntrons","collapseIntron","upperCaseCDS","intronBp","showCoordinatesSetting","hasCds","sort","a","b","filter","f","end","toLower","s","toLowerCase","toUpper","toUpperCase","fullGenomicCoordinates","mult","currStart","upstreamChunk","SequenceDisplay","middleChunks","intron","type","push","JSON","stringify","downstreamChunk","_Fragment","stitch","middleChunk","codonTable","convertCodingSequenceToPeptides","RenderedSequenceComponent","t0","$","_c","mode","sequenceData","seq","t1","GenomicSequence","CDSSequence","CDNASequence","t2","Symbol","for","generateCodonTable","defaultCodonTable","ProteinSequence","subfeatures","sub","prepareSubfeatures","featureType","filterSuccessiveElementsWithSameStartAndEndCoord","match","calculateUTRs","calculateUTRs2","processFeatureData","adjustedSequence","adjustedCds","adjustedExons","adjustedUtr","revcom","revlist","handleReverseStrand","useSequenceData","name","id","join","refName","toLocale","endsWith","upDownBp","WordWrap","fontFamily","fontSize","NoWordWrap","maxWidth","whiteSpace","wordBreak","forwardRef","props","ref","Container","t3","t4","maxHeight","overflow","SequenceName","SequenceContents"],"sourceRoot":""}