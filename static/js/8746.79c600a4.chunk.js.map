{"version":3,"file":"static/js/8746.79c600a4.chunk.js","mappings":"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","sources":["webpack://@jbrowse/web/../../plugins/variants/src/MultiLinearVariantMatrixDisplay/components/LinesConnectingMatrixToGenomicPosition.tsx","webpack://@jbrowse/web/../../plugins/variants/src/MultiLinearVariantMatrixDisplay/renderSvg.tsx","webpack://@jbrowse/web/../../plugins/variants/src/shared/components/MultiVariantColorLegend.tsx","webpack://@jbrowse/web/../../plugins/variants/src/shared/components/MultiVariantLegendBarWrapper.tsx","webpack://@jbrowse/web/../../plugins/variants/src/shared/components/MultiVariantLegendBar.tsx","webpack://@jbrowse/web/../../plugins/variants/src/shared/components/RectBg.tsx","webpack://@jbrowse/web/../../plugins/variants/src/shared/components/SvgTree.tsx","webpack://@jbrowse/web/../../plugins/variants/src/shared/makeSidebarSvg.tsx"],"sourcesContent":["import { forwardRef, isValidElement, useState } from 'react'\n\nimport { ResizeHandle, SanitizedHTML } from '@jbrowse/core/ui'\nimport BaseTooltip from '@jbrowse/core/ui/BaseTooltip'\nimport {\n  getContainingView,\n  getSession,\n  getStrokeProps,\n} from '@jbrowse/core/util'\nimport { makeStyles } from '@jbrowse/core/util/tss-react'\nimport { alpha, useTheme } from '@mui/material'\nimport { observer } from 'mobx-react'\n\nimport type { Feature } from '@jbrowse/core/util'\nimport type { LinearGenomeViewModel } from '@jbrowse/plugin-linear-genome-view'\n\nconst useStyles = makeStyles()(theme => ({\n  resizeHandle: {\n    height: 5,\n    boxSizing: 'border-box',\n    background: 'transparent',\n    '&:hover': {\n      background: theme.palette.divider,\n    },\n  },\n}))\n\ninterface MinimalModel {\n  setLineZoneHeight: (arg: number) => number\n  height: number\n  lineZoneHeight: number\n  featuresVolatile: Feature[] | undefined\n}\n\nconst Wrapper = observer(function Wrapper({\n  children,\n  model,\n  exportSVG,\n}: {\n  model: MinimalModel\n  children: React.ReactNode\n  exportSVG?: boolean\n}) {\n  const { height } = model\n  const { width, offsetPx } = getContainingView(model) as LinearGenomeViewModel\n  const left = Math.max(0, -offsetPx)\n  return exportSVG ? (\n    <g transform={`translate(${left})`}>{children}</g>\n  ) : (\n    <svg\n      style={{\n        position: 'absolute',\n        top: 0,\n        left,\n        height,\n        width,\n      }}\n    >\n      {children}\n    </svg>\n  )\n})\n\ninterface MouseOverLine {\n  f: Feature\n  idx: number\n  c: number\n}\n\nconst LinesConnectingMatrixToGenomicPosition = observer(\n  function LinesConnectingMatrixToGenomicPosition({\n    model,\n    exportSVG,\n  }: {\n    model: MinimalModel\n    exportSVG?: boolean\n  }) {\n    const { classes } = useStyles()\n    const { assemblyManager } = getSession(model)\n    const view = getContainingView(model) as LinearGenomeViewModel\n    const [mouseOverLine, setMouseOverLine] = useState<MouseOverLine>()\n    const { lineZoneHeight, featuresVolatile } = model\n    const { assemblyNames, dynamicBlocks } = view\n    const assembly = assemblyManager.get(assemblyNames[0]!)\n    const b0 = dynamicBlocks.contentBlocks[0]?.widthPx || 0\n    const w = b0 / (featuresVolatile?.length || 1)\n    return assembly && featuresVolatile ? (\n      <>\n        <Wrapper exportSVG={exportSVG} model={model}>\n          <AllLines model={model} setMouseOverLine={setMouseOverLine} />\n          {mouseOverLine ? (\n            <>\n              <line\n                stroke=\"#f00c\"\n                strokeWidth={2}\n                style={{\n                  pointerEvents: 'none',\n                }}\n                x1={mouseOverLine.idx * w + w / 2}\n                x2={mouseOverLine.c}\n                y1={lineZoneHeight}\n                y2={0}\n                onMouseLeave={() => {\n                  setMouseOverLine(undefined)\n                }}\n              />\n              <LineTooltip contents={mouseOverLine.f.get('name')} />\n            </>\n          ) : null}\n        </Wrapper>\n        {!exportSVG ? (\n          <ResizeHandle\n            style={{\n              position: 'absolute',\n              top: lineZoneHeight - 4,\n            }}\n            onDrag={n => model.setLineZoneHeight(lineZoneHeight + n)}\n            className={classes.resizeHandle}\n          />\n        ) : null}\n      </>\n    ) : null\n  },\n)\ninterface Props {\n  message: React.ReactNode | string\n}\nconst TooltipContents = forwardRef<HTMLDivElement, Props>(\n  function TooltipContents2({ message }, ref) {\n    return (\n      <div ref={ref}>\n        {isValidElement(message) ? (\n          message\n        ) : message ? (\n          <SanitizedHTML html={String(message)} />\n        ) : null}\n      </div>\n    )\n  },\n)\nconst LineTooltip = observer(function LineTooltip({\n  contents,\n}: {\n  contents?: string\n}) {\n  return contents ? (\n    <BaseTooltip>\n      <TooltipContents message={contents} />\n    </BaseTooltip>\n  ) : null\n})\n\nconst AllLines = observer(function AllLines({\n  model,\n  setMouseOverLine,\n}: {\n  model: MinimalModel\n  setMouseOverLine: (arg: any) => void\n}) {\n  const theme = useTheme()\n  const { assemblyManager } = getSession(model)\n  const view = getContainingView(model) as LinearGenomeViewModel\n  const { lineZoneHeight, featuresVolatile } = model\n  const { offsetPx, assemblyNames, dynamicBlocks } = view\n  const assembly = assemblyManager.get(assemblyNames[0]!)\n  const b0 = dynamicBlocks.contentBlocks[0]?.widthPx || 0\n  const w = b0 / (featuresVolatile?.length || 1)\n  const l = Math.max(offsetPx, 0)\n  const p = getStrokeProps(alpha(theme.palette.text.primary, 0.4))\n  return assembly && featuresVolatile ? (\n    <>\n      {featuresVolatile.map((f, i) => {\n        const ref = f.get('refName')\n        const c =\n          (view.bpToPx({\n            refName: assembly.getCanonicalRefName2(ref),\n            coord: f.get('start'),\n          })?.offsetPx || 0) - l\n        return (\n          <line\n            {...p}\n            strokeWidth={1}\n            key={f.id()}\n            x1={i * w + w / 2}\n            x2={c}\n            y1={lineZoneHeight}\n            y2={0}\n            onMouseEnter={() => {\n              setMouseOverLine({ f, idx: i, c })\n            }}\n            onMouseLeave={() => {\n              setMouseOverLine(undefined)\n            }}\n          />\n        )\n      })}\n    </>\n  ) : null\n})\n\nexport default LinesConnectingMatrixToGenomicPosition\n","import { getContainingView } from '@jbrowse/core/util'\nimport { when } from 'mobx'\n\nimport LinesConnectingMatrixToGenomicPosition from './components/LinesConnectingMatrixToGenomicPosition.tsx'\nimport { makeSidebarSvg } from '../shared/makeSidebarSvg.tsx'\n\nimport type { MultiLinearVariantMatrixDisplayModel } from './model.ts'\nimport type {\n  ExportSvgDisplayOptions,\n  LinearGenomeViewModel,\n} from '@jbrowse/plugin-linear-genome-view'\n\nexport async function renderSvg(\n  model: MultiLinearVariantMatrixDisplayModel,\n  opts: ExportSvgDisplayOptions,\n  superRenderSvg: (opts: ExportSvgDisplayOptions) => Promise<React.ReactNode>,\n) {\n  await when(() => !!model.regionCannotBeRenderedText)\n  const { offsetPx } = getContainingView(model) as LinearGenomeViewModel\n  const { lineZoneHeight } = model\n\n  return (\n    <>\n      <g transform={`translate(${Math.max(-offsetPx, 0)})`}>\n        <LinesConnectingMatrixToGenomicPosition exportSVG model={model} />\n        <g transform={`translate(0,${lineZoneHeight})`}>\n          <g>{await superRenderSvg(opts)}</g>\n          {await makeSidebarSvg(model)}\n        </g>\n      </g>\n    </>\n  )\n}\n","import { useMemo } from 'react'\n\nimport { getFillProps } from '@jbrowse/core/util'\nimport { useTheme } from '@mui/material'\nimport { observer } from 'mobx-react'\n\nimport RectBg from './RectBg.tsx'\n\nimport type { Source } from '../types.ts'\n\nconst LegendItem = function ({\n  source,\n  idx,\n  rowHeight,\n}: {\n  source: Source\n  idx: number\n  rowHeight: number\n}) {\n  const { color } = source\n  const colorBoxWidth = 15\n  return color ? (\n    <RectBg\n      y={idx * rowHeight}\n      x={0}\n      width={colorBoxWidth + 0.5}\n      height={rowHeight + 0.5}\n      color={color}\n    />\n  ) : null\n}\n\nconst LegendItemText = function ({\n  source,\n  idx,\n  rowHeight,\n  textFillProps,\n}: {\n  source: Source\n  idx: number\n  rowHeight: number\n  textFillProps: ReturnType<typeof getFillProps>\n}) {\n  const { color, name } = source\n  const svgFontSize = Math.min(rowHeight, 12)\n  const colorBoxWidth = 15\n  return (\n    <text\n      y={(idx + 0.5) * rowHeight}\n      x={color ? colorBoxWidth + 2 : 0}\n      fontSize={svgFontSize}\n      dominantBaseline=\"central\"\n      {...textFillProps}\n    >\n      {name}\n    </text>\n  )\n}\n\nconst MultiVariantColorLegend = observer(function MultiVariantColorLegend({\n  model,\n  labelWidth,\n}: {\n  model: {\n    canDisplayLabels: boolean\n    rowHeight: number\n    sources?: Source[]\n  }\n  labelWidth: number\n}) {\n  const { canDisplayLabels, rowHeight, sources } = model\n  const colorBoxWidth = 15\n  const theme = useTheme()\n\n  const hasColors = useMemo(\n    () => sources?.some(s => s.color) ?? false,\n    [sources],\n  )\n  const legendWidth = labelWidth + (hasColors ? colorBoxWidth + 5 : 0)\n\n  const textFillProps = useMemo(\n    () => getFillProps(theme.palette.text.primary),\n    [theme.palette.text.primary],\n  )\n\n  return sources ? (\n    <>\n      {canDisplayLabels ? (\n        <RectBg\n          y={0}\n          x={0}\n          width={legendWidth}\n          height={(sources.length + 0.25) * rowHeight}\n        />\n      ) : null}\n      {/* Render all background rectangles first */}\n      {sources.map((source, idx) => (\n        <LegendItem\n          key={`${source.name}-${idx}`}\n          source={source}\n          idx={idx}\n          rowHeight={rowHeight}\n        />\n      ))}\n      {/* Then render all text elements on top */}\n      {canDisplayLabels\n        ? sources.map((source, idx) => (\n            <LegendItemText\n              key={`${source.name}-text-${idx}`}\n              source={source}\n              idx={idx}\n              rowHeight={rowHeight}\n              textFillProps={textFillProps}\n            />\n          ))\n        : null}\n    </>\n  ) : null\n})\n\nexport default MultiVariantColorLegend\n","import { getContainingView } from '@jbrowse/core/util'\nimport { observer } from 'mobx-react'\n\nimport type { LegendBarModel } from './types.ts'\n\nconst MultiVariantLegendBarWrapper = observer(\n  function MultiVariantLegendBarWrapper({\n    children,\n    model,\n    exportSVG,\n  }: {\n    model: LegendBarModel\n    children: React.ReactNode\n    exportSVG?: boolean\n  }) {\n    const { id, scrollTop, height, hierarchy, treeAreaWidth, showTree } = model\n    const clipid = `legend-${typeof jest === 'undefined' ? id : 'test'}`\n    const leftOffset = hierarchy && showTree ? treeAreaWidth : 0\n    return exportSVG ? (\n      <>\n        <defs>\n          <clipPath id={clipid}>\n            <rect x={0} y={0} width={1000} height={height} />\n          </clipPath>\n        </defs>\n        <g clipPath={`url(#${clipid})`}>\n          <g transform={`translate(0,${-scrollTop})`}>{children}</g>\n        </g>\n      </>\n    ) : (\n      <svg\n        style={{\n          position: 'absolute',\n          top: 0,\n          left: leftOffset,\n          zIndex: 100,\n          pointerEvents: 'none',\n          height: model.totalHeight,\n          width: getContainingView(model).width,\n        }}\n      >\n        {children}\n      </svg>\n    )\n  },\n)\n\nexport default MultiVariantLegendBarWrapper\n","import { useMemo } from 'react'\n\nimport { measureText } from '@jbrowse/core/util'\nimport { observer } from 'mobx-react'\n\nimport ColorLegend from './MultiVariantColorLegend.tsx'\nimport MultiVariantLegendBarWrapper from './MultiVariantLegendBarWrapper.tsx'\n\nimport type { LegendBarModel } from './types.ts'\n\nconst MultiVariantLegendBar = observer(function MultiVariantLegendBar(props: {\n  model: LegendBarModel\n  orientation?: string\n  exportSVG?: boolean\n}) {\n  const { model } = props\n  const { canDisplayLabels, rowHeight, sources } = model\n  const svgFontSize = Math.min(rowHeight, 12)\n\n  const labelWidth = useMemo(() => {\n    if (!sources) {\n      return 0\n    }\n    let maxWidth = 0\n    for (const s of sources) {\n      const width = canDisplayLabels\n        ? measureText(s.name, svgFontSize) + 10\n        : 20\n      if (width > maxWidth) {\n        maxWidth = width\n      }\n    }\n    return maxWidth\n  }, [sources, svgFontSize, canDisplayLabels])\n\n  return sources ? (\n    <MultiVariantLegendBarWrapper {...props}>\n      <ColorLegend model={model} labelWidth={labelWidth} />\n    </MultiVariantLegendBarWrapper>\n  ) : null\n})\n\nexport default MultiVariantLegendBar\n","import { getFillProps } from '@jbrowse/core/util'\nimport { alpha, useTheme } from '@mui/material'\n\nimport { SIDEBAR_BACKGROUND_OPACITY } from '../constants.ts'\n\nconst RectBg = ({\n  x,\n  y,\n  width,\n  height,\n  color,\n}: {\n  x: number\n  y: number\n  width: number\n  height: number\n  color?: string\n}) => {\n  const theme = useTheme()\n  return (\n    <rect\n      pointerEvents=\"auto\"\n      x={x}\n      y={y}\n      width={width}\n      height={height}\n      {...getFillProps(\n        color ||\n          alpha(theme.palette.background.paper, SIDEBAR_BACKGROUND_OPACITY),\n      )}\n    />\n  )\n}\n\nexport default RectBg\n","import { observer } from 'mobx-react'\n\nimport type { LegendBarModel } from './types.ts'\n\nconst SvgTree = observer(function SvgTree({\n  model,\n}: {\n  model: LegendBarModel\n}) {\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const { treeAreaWidth: _treeAreaWidth, hierarchy } = model\n  const svg = []\n  let idx = 0\n  if (hierarchy) {\n    for (const link of hierarchy.links()) {\n      const { source, target } = link\n      const sy = source.x!\n      const ty = target.x!\n      const tx = target.y!\n      const sx = source.y!\n\n      // Vertical line\n      svg.push(\n        <line\n          key={`${sx}-${sy}-${tx}-${ty}-${idx++}`}\n          x1={sx}\n          y1={sy}\n          x2={sx}\n          y2={ty}\n          stroke=\"black\"\n          opacity=\"0.4\"\n        />,\n        <line\n          key={`${sx}-${sy}-${tx}-${ty}-${idx++}`}\n          x1={sx}\n          y1={ty}\n          x2={tx}\n          y2={ty}\n          stroke=\"black\"\n          opacity=\"0.4\"\n        />,\n      )\n    }\n  }\n  return svg\n})\n\nexport default SvgTree\n","import { getContainingView } from '@jbrowse/core/util'\n\nimport RectBg from './components/RectBg.tsx'\nimport SvgTree from './components/SvgTree.tsx'\nimport LegendBar from '../shared/components/MultiVariantLegendBar.tsx'\n\nimport type { LegendBarModel } from './components/types.ts'\nimport type { LinearGenomeViewModel } from '@jbrowse/plugin-linear-genome-view'\n\ninterface Model extends LegendBarModel {\n  hierarchy: any\n  availableHeight: number\n  totalHeight: number\n  treeAreaWidth: number\n}\n\nexport async function makeSidebarSvg(self: Model) {\n  const { offsetPx } = getContainingView(self) as LinearGenomeViewModel\n  const { hierarchy, showTree, treeAreaWidth, availableHeight } = self\n\n  return (\n    <g\n      id=\"tree-layer\"\n      data-testid=\"tree-layer\"\n      transform={`translate(${Math.max(-offsetPx, 0)})`}\n      clipPath=\"url(#sidebarClip)\"\n    >\n      <clipPath id=\"sidebarClip\">\n        <rect x=\"0\" y=\"0\" width=\"100%\" height={availableHeight} />\n      </clipPath>\n      <g\n        id=\"legend-layer\"\n        transform={`translate(${showTree && hierarchy ? treeAreaWidth : 0})`}\n      >\n        <LegendBar model={self} orientation=\"left\" exportSVG />\n      </g>\n      {showTree && hierarchy ? (\n        <>\n          <RectBg x={0} y={0} width={treeAreaWidth} height={availableHeight} />\n          <SvgTree model={self} />\n        </>\n      ) : null}\n    </g>\n  )\n}\n"],"names":["useStyles","makeStyles","theme","resizeHandle","height","boxSizing","background","palette","divider","Wrapper","observer","children","model","exportSVG","width","offsetPx","getContainingView","left","Math","max","_jsx","transform","style","position","top","LinesConnectingMatrixToGenomicPosition","classes","assemblyManager","getSession","view","mouseOverLine","setMouseOverLine","useState","lineZoneHeight","featuresVolatile","assemblyNames","dynamicBlocks","assembly","get","w","contentBlocks","widthPx","length","_jsxs","_Fragment","AllLines","stroke","strokeWidth","pointerEvents","x1","idx","x2","c","y1","y2","onMouseLeave","undefined","LineTooltip","contents","f","ResizeHandle","onDrag","n","setLineZoneHeight","className","TooltipContents","forwardRef","t0","ref","$","_c","message","t1","t2","isValidElement","SanitizedHTML","html","String","BaseTooltip","useTheme","l","p","getStrokeProps","alpha","text","primary","map","i","bpToPx","refName","getCanonicalRefName2","coord","_createElement","key","id","onMouseEnter","async","renderSvg","opts","superRenderSvg","when","regionCannotBeRenderedText","makeSidebarSvg","LegendItem","source","rowHeight","color","RectBg","y","x","LegendItemText","textFillProps","name","svgFontSize","min","t3","dominantBaseline","labelWidth","canDisplayLabels","sources","legendWidth","useMemo","some","s","colorBoxWidth","getFillProps","scrollTop","hierarchy","treeAreaWidth","showTree","clipid","jest","leftOffset","clipPath","zIndex","totalHeight","props","maxWidth","measureText","MultiVariantLegendBarWrapper","ColorLegend","paper","SIDEBAR_BACKGROUND_OPACITY","_treeAreaWidth","svg","link","links","target","sy","ty","tx","sx","push","opacity","self","availableHeight","LegendBar","orientation","SvgTree"],"sourceRoot":""}