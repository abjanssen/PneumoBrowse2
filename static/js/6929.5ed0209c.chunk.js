"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[6929],{76929(e,t,o){o.d(t,{executeClusterGenotypeMatrix:()=>u});var s=o(76567),n=o(8297),a=o(29458),r=o(19520),l=o(95548),i=o(88068),c=o(90013),p=o(44732);async function u({pluginManager:e,args:t}){const{renderingMode:o,sampleInfo:u,stopToken:g}=t,f=(0,a.jL)(g),d={...t,stopTokenCheck:f},k="phased"===o&&u?await async function({pluginManager:e,args:t}){const{sources:o,minorAlleleFrequencyFilter:s,regions:n,adapterConfig:r,sessionId:u,lengthCutoffFilter:g,stopTokenCheck:f,sampleInfo:d}=t,k=(await(0,l.cK)(e,u,r)).dataAdapter,h={},b={};for(const{name:e}of o){const t=d[e],o=t?.maxPloidy??2;for(let t=0;t<o;t++)h[`${e} HP${t}`]=[]}const C=(0,p.Cg)({minorAlleleFrequencyFilter:s,lengthCutoffFilter:g,stopTokenCheck:f,splitCache:b,features:await(0,i._)(k.getFeaturesInMultipleRegions(n,t).pipe((0,c.$)()))});for(const{feature:e}of C){const t=e.get("genotypes");for(const{name:e}of o){const o=t[e],s=d[e],n=s?.maxPloidy??2;if(o.includes("|")){const t=b[o]??(b[o]=o.split("|"));for(let o=0;o<n;o++){const s=t[o],n="."===s||void 0===s?-1:+s;h[`${e} HP${o}`].push(n)}}else for(let t=0;t<n;t++)h[`${e} HP${t}`].push(-1)}(0,a.As)(f)}return h}({pluginManager:e,args:{...d,sampleInfo:u}}):await(0,r.v)({pluginManager:e,args:d}),h=Object.keys(k),b=await(0,s.D)({data:Object.values(k),sampleLabels:h,stopToken:t.stopToken,onProgress:t.statusCallback});return{order:b.order,tree:(0,n.B3)(b.tree)}}}}]);
//# sourceMappingURL=6929.5ed0209c.chunk.js.map