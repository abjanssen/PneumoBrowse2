{"version":3,"file":"static/js/8147.90a2bd5d.chunk.js","mappings":"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","sources":["../../../packages/core/src/BaseFeatureWidget/SequenceFeatureDetails/dialogs/SequenceDialog.tsx","../../../packages/core/src/BaseFeatureWidget/SequenceFeatureDetails/consts.ts","../../../packages/core/src/BaseFeatureWidget/SequenceFeatureDetails/util.ts","../../../packages/core/src/BaseFeatureWidget/SequenceFeatureDetails/seqtypes/SequenceDisplay.tsx","../../../packages/core/src/BaseFeatureWidget/SequenceFeatureDetails/seqtypes/CDNASequence.tsx","../../../packages/core/src/BaseFeatureWidget/SequenceFeatureDetails/seqtypes/CDSSequence.tsx","../../../packages/core/src/BaseFeatureWidget/SequenceFeatureDetails/seqtypes/GenomicSequence.tsx","../../../packages/core/src/BaseFeatureWidget/SequenceFeatureDetails/seqtypes/ProteinSequence.tsx","../../../packages/core/src/BaseFeatureWidget/SequenceFeatureDetails/SequenceContents.tsx","../../../packages/core/src/BaseFeatureWidget/SequenceFeatureDetails/useSequenceData.ts","../../../packages/core/src/BaseFeatureWidget/SequenceFeatureDetails/SequenceName.tsx","../../../packages/core/src/BaseFeatureWidget/SequenceFeatureDetails/SequencePanel.tsx"],"sourcesContent":["import { Suspense, useRef, useState } from 'react'\n\nimport { Button, DialogActions, DialogContent, Typography } from '@mui/material'\nimport { observer } from 'mobx-react'\n\nimport SequenceFeatureMenu from './SequenceFeatureMenu.tsx'\nimport SequenceTypeSelector from './SequenceTypeSelector.tsx'\nimport { Dialog, ErrorMessage, LoadingEllipses } from '../../../ui/index.ts'\nimport {\n  SimpleFeature,\n  type SimpleFeatureSerialized,\n  getSession,\n} from '../../../util/index.ts'\nimport { makeStyles } from '../../../util/tss-react/index.ts'\nimport { useFeatureSequence } from '../../../util/useFeatureSequence.ts'\nimport SequencePanel from '../SequencePanel.tsx'\n\nimport type { BaseFeatureWidgetModel } from '../../stateModelFactory.ts'\n\nconst useStyles = makeStyles()({\n  dialogContent: {\n    width: '80em',\n  },\n})\n\nconst SequenceDialog = observer(function SequenceDialog({\n  handleClose,\n  model,\n  feature,\n}: {\n  handleClose: () => void\n  feature: SimpleFeatureSerialized\n  model: BaseFeatureWidgetModel\n}) {\n  const { sequenceFeatureDetails } = model\n  const { upDownBp } = sequenceFeatureDetails\n  const { classes } = useStyles()\n  const seqPanelRef = useRef<HTMLDivElement>(null)\n  const [forceLoad, setForceLoad] = useState(false)\n  const session = getSession(model)\n  const assemblyName = model.view?.assemblyNames?.[0]\n  const { sequence, error } = useFeatureSequence({\n    assemblyName,\n    session,\n    feature: new SimpleFeature(feature),\n    upDownBp,\n    forceLoad,\n  })\n\n  return (\n    <Dialog\n      maxWidth=\"xl\"\n      open\n      title=\"Sequence view\"\n      onClose={() => {\n        handleClose()\n      }}\n    >\n      <DialogContent className={classes.dialogContent}>\n        <div>\n          <SequenceTypeSelector model={sequenceFeatureDetails} />\n          <SequenceFeatureMenu\n            ref={seqPanelRef}\n            model={sequenceFeatureDetails}\n          />\n        </div>\n\n        <div>\n          {feature.type === 'gene' ? (\n            <Typography>\n              Note: inspect subfeature sequences for protein/CDS computations\n            </Typography>\n          ) : null}\n          {error ? (\n            <ErrorMessage error={error} />\n          ) : !sequence ? (\n            <LoadingEllipses />\n          ) : 'error' in sequence ? (\n            <>\n              <Typography color=\"error\">{sequence.error}</Typography>\n              <Button\n                variant=\"contained\"\n                color=\"inherit\"\n                onClick={() => {\n                  setForceLoad(true)\n                }}\n              >\n                Force load\n              </Button>\n            </>\n          ) : (\n            <Suspense fallback={<LoadingEllipses />}>\n              <SequencePanel\n                ref={seqPanelRef}\n                feature={feature}\n                sequence={sequence}\n                model={sequenceFeatureDetails}\n              />\n            </Suspense>\n          )}\n        </div>\n      </DialogContent>\n\n      <DialogActions>\n        <Button\n          onClick={() => {\n            handleClose()\n          }}\n          variant=\"contained\"\n        >\n          Close\n        </Button>\n      </DialogActions>\n    </Dialog>\n  )\n})\n\nexport default SequenceDialog\n","// note that these are currently put into the style section instead of being\n// defined in classes to aid copy and paste to an external document e.g. word\nexport const intronColor = undefined\nexport const utrColor = 'rgb(200,240,240)'\nexport const proteinColor = 'rgb(220,160,220)'\nexport const cdsColor = 'rgb(220,220,180)'\nexport const updownstreamColor = 'rgba(250,200,200)'\nexport const genomeColor = 'rgb(200,280,200)'\n","/**\n * Splits a string into chunks for display with optional coordinate spacing.\n */\nexport function splitString({\n  str,\n  charactersPerRow,\n  showCoordinates,\n  currRemainder = 0,\n  spacingInterval = 10,\n}: {\n  str: string\n  charactersPerRow: number\n  showCoordinates: boolean\n  currRemainder?: number\n  spacingInterval?: number\n}) {\n  const numChunks = Math.ceil(str.length / charactersPerRow)\n  const segments = new Array(numChunks)\n  // Initialize position counter for coordinate spacing\n  let positionCounter = currRemainder % spacingInterval\n\n  let chunkIndex = 0\n  let stringOffset = 0\n\n  // Process the string in chunks\n  for (; chunkIndex < numChunks + 1; ++chunkIndex) {\n    // For the first chunk, adjust for remainder from previous section\n    const chunkSize =\n      chunkIndex === 0 ? charactersPerRow - currRemainder : charactersPerRow\n\n    const currentChunk = str.slice(stringOffset, stringOffset + chunkSize)\n\n    // Break if no more content\n    if (!currentChunk) {\n      break\n    }\n\n    segments[chunkIndex] = showCoordinates\n      ? formatWithCoordinateSpacing(\n          currentChunk,\n          positionCounter,\n          spacingInterval,\n        )\n      : currentChunk\n\n    // Reset position counter after each row\n    positionCounter = 0\n    stringOffset += chunkSize\n  }\n\n  // Calculate remainder for the next section\n  return {\n    segments,\n    remainder: calculateRemainder(\n      segments,\n      chunkIndex,\n      currRemainder,\n      charactersPerRow,\n    ),\n  }\n}\n\n/**\n * Formats a string chunk with spaces at regular intervals to help with\n * coordinate visualization.\n */\nfunction formatWithCoordinateSpacing(\n  chunk: string,\n  startPosition: number,\n  spacingInterval: number,\n) {\n  if (!chunk) {\n    return ''\n  }\n\n  let formattedChunk = ''\n\n  for (let i = 0, j = startPosition; i < chunk.length; i++, j++) {\n    // Add space at interval boundaries\n    if (j % spacingInterval === 0) {\n      formattedChunk += ' '\n      j = 0 // Reset counter after adding space\n    }\n    formattedChunk += chunk[i]\n  }\n\n  return formattedChunk\n}\n\n/**\n * Calculates the remainder count for continuing to the next section.\n */\nfunction calculateRemainder(\n  segments: string[],\n  chunkIndex: number,\n  currRemainder: number,\n  charactersPerRow: number,\n) {\n  // Get the length of the last segment without spaces\n  const lastSegmentLength = segments.at(-1)?.replaceAll(' ', '').length || 0\n\n  // If we're on the first chunk, include the previous remainder\n  const additionalRemainder = chunkIndex < 2 ? currRemainder : 0\n\n  // Calculate the new remainder\n  return (lastSegmentLength + additionalRemainder) % charactersPerRow\n}\n","import { Fragment } from 'react'\n\nimport { observer } from 'mobx-react'\n\nimport type { SequenceFeatureDetailsModel } from '../model.ts'\n\nconst SequenceDisplay = observer(function SequenceDisplay({\n  chunks,\n  start,\n  color,\n  strand = 1,\n  coordStart = start,\n  model,\n}: {\n  chunks: string[]\n  start: number\n  coordStart?: number\n  strand?: number\n  color?: string\n  model: SequenceFeatureDetailsModel\n}) {\n  const { charactersPerRow, showCoordinates } = model\n\n  return chunks.map((chunk, idx) => {\n    const f = coordStart - (start % charactersPerRow)\n    const prefix =\n      (idx === 0 && start % charactersPerRow === 0) || idx > 0\n        ? `${`${f + idx * strand * charactersPerRow}`.padStart(4)}   `\n        : ''\n    const postfix =\n      idx === chunks.length - 1 &&\n      (chunks.at(-1)?.replaceAll(' ', '').length || 0) +\n        (idx === 0 ? start % charactersPerRow : 0) !==\n        charactersPerRow\n        ? null\n        : showCoordinates\n          ? ' \\n'\n          : ''\n    return (\n      /* biome-ignore lint/suspicious/noArrayIndexKey: */\n      <Fragment key={`${chunk}-${idx}`}>\n        {showCoordinates ? prefix : null}\n        <span style={{ background: color }}>{chunk}</span>\n        {postfix}\n      </Fragment>\n    )\n  })\n})\n\nexport default SequenceDisplay\n","import { observer } from 'mobx-react'\n\nimport { cdsColor, updownstreamColor, utrColor } from '../consts.ts'\nimport { splitString } from '../util.ts'\nimport SequenceDisplay from './SequenceDisplay.tsx'\n\nimport type { SimpleFeatureSerialized } from '../../../util/index.ts'\nimport type { Feat } from '../../util.tsx'\nimport type { SequenceFeatureDetailsModel } from '../model.ts'\n\nconst CDNASequence = observer(function CDNASequence({\n  utr,\n  cds,\n  exons,\n  sequence,\n  upstream,\n  downstream,\n  feature,\n  includeIntrons,\n  collapseIntron,\n  model,\n}: {\n  utr: Feat[]\n  cds: Feat[]\n  exons: Feat[]\n  sequence: string\n  upstream?: string\n  downstream?: string\n  feature: SimpleFeatureSerialized\n  includeIntrons?: boolean\n  collapseIntron?: boolean\n  model: SequenceFeatureDetailsModel\n}) {\n  const {\n    upperCaseCDS,\n    intronBp,\n    charactersPerRow,\n    showCoordinates,\n    showCoordinatesSetting,\n  } = model\n  const hasCds = cds.length > 0\n  const chunks = (\n    cds.length ? [...cds, ...utr].sort((a, b) => a.start - b.start) : exons\n  ).filter(f => f.start !== f.end)\n  const toLower = (s: string) => (upperCaseCDS ? s.toLowerCase() : s)\n  const toUpper = (s: string) => (upperCaseCDS ? s.toUpperCase() : s)\n\n  const strand = feature.strand === -1 ? -1 : 1\n  const fullGenomicCoordinates =\n    showCoordinatesSetting === 'genomic' && includeIntrons && !collapseIntron\n\n  const mult = fullGenomicCoordinates ? strand : 1\n  let coordStart = fullGenomicCoordinates\n    ? strand > 0\n      ? feature.start + 1 - (upstream?.length || 0)\n      : feature.end + (upstream?.length || 0)\n    : 0\n  let currStart = 0\n  let currRemainder = 0\n\n  let upstreamChunk = null as React.ReactNode\n  if (upstream) {\n    const { segments, remainder } = splitString({\n      str: toLower(upstream),\n      charactersPerRow,\n      showCoordinates,\n    })\n    upstreamChunk = (\n      <SequenceDisplay\n        model={model}\n        color={updownstreamColor}\n        strand={mult}\n        start={currStart}\n        coordStart={coordStart}\n        chunks={segments}\n      />\n    )\n    currRemainder = remainder\n    currStart = currStart + upstream.length * mult\n    coordStart = coordStart + upstream.length * mult\n  }\n\n  const middleChunks = [] as React.ReactNode[]\n  for (let idx = 0; idx < chunks.length; idx++) {\n    const chunk = chunks[idx]!\n    const intron = sequence.slice(chunk.end, chunks[idx + 1]?.start)\n    const s = sequence.slice(chunk.start, chunk.end)\n    const { segments, remainder } = splitString({\n      str: hasCds\n        ? chunk.type === 'CDS'\n          ? toUpper(s)\n          : toLower(s)\n        : toUpper(s),\n      charactersPerRow,\n      currRemainder,\n      showCoordinates,\n    })\n\n    middleChunks.push(\n      <SequenceDisplay\n        key={`${JSON.stringify(chunk)}-mid`}\n        model={model}\n        color={chunk.type === 'CDS' ? cdsColor : utrColor}\n        strand={mult}\n        start={currStart}\n        coordStart={coordStart}\n        chunks={segments}\n      />,\n    )\n    currRemainder = remainder\n    currStart = currStart + s.length * mult\n    coordStart = coordStart + s.length * mult\n\n    if (intron && includeIntrons && idx < chunks.length - 1) {\n      const str = toLower(\n        collapseIntron && intron.length > intronBp * 2\n          ? `${intron.slice(0, intronBp)}...${intron.slice(-intronBp)}`\n          : intron,\n      )\n      const { segments, remainder } = splitString({\n        str,\n        charactersPerRow,\n        currRemainder,\n        showCoordinates,\n      })\n\n      if (segments.length) {\n        middleChunks.push(\n          <SequenceDisplay\n            key={`${JSON.stringify(chunk)}-intron`}\n            model={model}\n            strand={mult}\n            coordStart={coordStart}\n            start={currStart}\n            chunks={segments}\n          />,\n        )\n        currRemainder = remainder\n        currStart = currStart + str.length * mult\n        coordStart = coordStart + str.length * mult\n      }\n    }\n  }\n\n  let downstreamChunk = null as React.ReactNode\n  if (downstream) {\n    const { segments } = splitString({\n      str: toLower(downstream),\n      charactersPerRow,\n      currRemainder,\n      showCoordinates,\n    })\n    downstreamChunk = (\n      <SequenceDisplay\n        start={currStart}\n        model={model}\n        strand={mult}\n        chunks={segments}\n        coordStart={coordStart}\n        color={updownstreamColor}\n      />\n    )\n  }\n  return (\n    <>\n      {upstreamChunk}\n      {middleChunks}\n      {downstreamChunk}\n    </>\n  )\n})\n\nexport default CDNASequence\n","import { observer } from 'mobx-react'\n\nimport { stitch } from '../../util.tsx'\nimport { cdsColor } from '../consts.ts'\nimport { splitString } from '../util.ts'\nimport SequenceDisplay from './SequenceDisplay.tsx'\n\nimport type { Feat } from '../../util.tsx'\nimport type { SequenceFeatureDetailsModel } from '../model.ts'\n\nconst CDSSequence = observer(function CDSSequence({\n  cds,\n  sequence,\n  model,\n}: {\n  cds: Feat[]\n  sequence: string\n  model: SequenceFeatureDetailsModel\n}) {\n  const { charactersPerRow, showCoordinates } = model\n  const { segments } = splitString({\n    str: stitch(cds, sequence),\n    charactersPerRow,\n    showCoordinates,\n  })\n  return (\n    <SequenceDisplay\n      model={model}\n      color={cdsColor}\n      chunks={segments}\n      start={0}\n    />\n  )\n})\n\nexport default CDSSequence\n","import { observer } from 'mobx-react'\n\nimport { genomeColor, updownstreamColor } from '../consts.ts'\nimport { splitString } from '../util.ts'\nimport SequenceDisplay from './SequenceDisplay.tsx'\n\nimport type { SimpleFeatureSerialized } from '../../../util/index.ts'\nimport type { SequenceFeatureDetailsModel } from '../model.ts'\n\nconst GenomicSequence = observer(function GenomicSequence({\n  sequence,\n  upstream,\n  feature,\n  downstream,\n  model,\n}: {\n  sequence: string\n  feature: SimpleFeatureSerialized\n  upstream?: string\n  downstream?: string\n  model: SequenceFeatureDetailsModel\n}) {\n  const { charactersPerRow, showCoordinatesSetting, showCoordinates } = model\n  let currStart = 0\n  let upstreamChunk = null as React.ReactNode\n  let currRemainder = 0\n  const strand = feature.strand === -1 ? -1 : 1\n  const fullGenomicCoordinates = showCoordinatesSetting === 'genomic'\n  const mult = fullGenomicCoordinates ? strand : 1\n  let coordStart = fullGenomicCoordinates\n    ? strand > 0\n      ? feature.start + 1 - (upstream?.length || 0)\n      : feature.end + (upstream?.length || 0)\n    : 0\n  if (upstream) {\n    const { segments, remainder } = splitString({\n      str: upstream,\n      charactersPerRow,\n      showCoordinates,\n    })\n    upstreamChunk = (\n      <SequenceDisplay\n        model={model}\n        color={updownstreamColor}\n        start={currStart}\n        coordStart={coordStart}\n        chunks={segments}\n      />\n    )\n    currRemainder = remainder\n    currStart = currStart + upstream.length * mult\n    coordStart = coordStart + upstream.length * mult\n  }\n\n  const { segments, remainder } = splitString({\n    str: sequence,\n    charactersPerRow,\n    showCoordinates,\n    currRemainder,\n  })\n  const middleChunk = (\n    <SequenceDisplay\n      model={model}\n      color={genomeColor}\n      start={currStart}\n      coordStart={coordStart}\n      chunks={segments}\n    />\n  )\n  currRemainder = remainder\n  currStart += sequence.length * mult\n  coordStart = coordStart + sequence.length * mult\n\n  let downstreamChunk = null as React.ReactNode\n  if (downstream) {\n    const { segments } = splitString({\n      str: downstream,\n      charactersPerRow,\n      currRemainder,\n      showCoordinates,\n    })\n    downstreamChunk = (\n      <SequenceDisplay\n        start={currStart}\n        model={model}\n        chunks={segments}\n        coordStart={coordStart}\n        color={updownstreamColor}\n      />\n    )\n  }\n\n  return (\n    <>\n      {upstreamChunk}\n      {middleChunk}\n      {downstreamChunk}\n    </>\n  )\n})\n\nexport default GenomicSequence\n","import { observer } from 'mobx-react'\n\nimport { convertCodingSequenceToPeptides } from '../../../util/convertCodingSequenceToPeptides.ts'\nimport { proteinColor } from '../consts.ts'\nimport { splitString } from '../util.ts'\nimport SequenceDisplay from './SequenceDisplay.tsx'\n\nimport type { Feat } from '../../util.tsx'\nimport type { SequenceFeatureDetailsModel } from '../model.ts'\n\nconst ProteinSequence = observer(function ProteinSequence({\n  cds,\n  sequence,\n  codonTable,\n  model,\n}: {\n  cds: Feat[]\n  sequence: string\n  codonTable: Record<string, string>\n  model: SequenceFeatureDetailsModel\n}) {\n  const { charactersPerRow, showCoordinates } = model\n  const str = convertCodingSequenceToPeptides({\n    cds,\n    sequence,\n    codonTable,\n  })\n  const { segments } = splitString({\n    str,\n    charactersPerRow,\n    showCoordinates,\n  })\n  return (\n    <SequenceDisplay\n      model={model}\n      color={proteinColor}\n      chunks={segments}\n      start={0}\n    />\n  )\n})\n\nexport default ProteinSequence\n","import { observer } from 'mobx-react'\n\nimport CDNASequence from './seqtypes/CDNASequence.tsx'\nimport CDSSequence from './seqtypes/CDSSequence.tsx'\nimport GenomicSequence from './seqtypes/GenomicSequence.tsx'\nimport ProteinSequence from './seqtypes/ProteinSequence.tsx'\nimport { useSequenceData } from './useSequenceData.ts'\nimport { defaultCodonTable, generateCodonTable } from '../../util/index.ts'\n\nimport type { SequenceFeatureDetailsModel } from './model.ts'\nimport type { SimpleFeatureSerialized } from '../../util/index.ts'\nimport type { SeqState } from '../util.tsx'\n\n/**\n * Renders the appropriate sequence component based on the selected mode\n */\nfunction RenderedSequenceComponent({\n  mode,\n  feature,\n  model,\n  sequenceData,\n}: {\n  mode: string\n  feature: SimpleFeatureSerialized\n  model: SequenceFeatureDetailsModel\n  sequenceData: {\n    seq: string\n    upstream?: string\n    downstream?: string\n    cds: any[]\n    exons: any[]\n    utr: any[]\n  }\n}) {\n  const { seq, upstream, downstream, cds, exons, utr } = sequenceData\n\n  switch (mode) {\n    case 'genomic':\n      return <GenomicSequence feature={feature} model={model} sequence={seq} />\n\n    case 'genomic_sequence_updownstream':\n      return (\n        <GenomicSequence\n          model={model}\n          feature={feature}\n          sequence={seq}\n          upstream={upstream}\n          downstream={downstream}\n        />\n      )\n\n    case 'cds':\n      return <CDSSequence model={model} cds={cds} sequence={seq} />\n\n    case 'cdna':\n      return (\n        <CDNASequence\n          model={model}\n          exons={exons}\n          feature={feature}\n          cds={cds}\n          utr={utr}\n          sequence={seq}\n        />\n      )\n\n    case 'protein':\n      return (\n        <ProteinSequence\n          model={model}\n          cds={cds}\n          codonTable={generateCodonTable(defaultCodonTable)}\n          sequence={seq}\n        />\n      )\n\n    case 'gene':\n      return (\n        <CDNASequence\n          model={model}\n          exons={exons}\n          feature={feature}\n          cds={cds}\n          utr={utr}\n          sequence={seq}\n          includeIntrons\n        />\n      )\n\n    case 'gene_collapsed_intron':\n      return (\n        <CDNASequence\n          model={model}\n          exons={exons}\n          feature={feature}\n          cds={cds}\n          sequence={seq}\n          utr={utr}\n          includeIntrons\n          collapseIntron\n        />\n      )\n\n    case 'gene_updownstream':\n      return (\n        <CDNASequence\n          model={model}\n          exons={exons}\n          feature={feature}\n          cds={cds}\n          sequence={seq}\n          utr={utr}\n          upstream={upstream}\n          downstream={downstream}\n          includeIntrons\n        />\n      )\n\n    case 'gene_updownstream_collapsed_intron':\n      return (\n        <CDNASequence\n          model={model}\n          exons={exons}\n          feature={feature}\n          cds={cds}\n          sequence={seq}\n          utr={utr}\n          upstream={upstream}\n          downstream={downstream}\n          includeIntrons\n          collapseIntron\n        />\n      )\n\n    default:\n      return <div>Unknown type</div>\n  }\n}\n\nconst SequenceContents = observer(function SequenceContents({\n  mode,\n  feature,\n  sequence,\n  model,\n}: {\n  mode: string\n  feature: SimpleFeatureSerialized\n  sequence: SeqState\n  model: SequenceFeatureDetailsModel\n}) {\n  const sequenceData = useSequenceData({\n    feature,\n    sequence,\n  })\n  return sequenceData ? (\n    <RenderedSequenceComponent\n      mode={mode}\n      feature={feature}\n      model={model}\n      sequenceData={sequenceData}\n    />\n  ) : null\n})\n\nexport default SequenceContents\n","import { revcom } from '../../util/index.ts'\nimport {\n  calculateUTRs2,\n  calculateUTRs,\n  filterSuccessiveElementsWithSameStartAndEndCoord,\n  revlist,\n} from '../util.tsx'\n\nimport type { SimpleFeatureSerialized } from '../../util/index.ts'\nimport type { ErrorState, SeqState } from '../util.tsx'\n\n/**\n * Handles sequence orientation for reverse strand features\n */\ninterface FeatureData {\n  sequence: SeqState\n  cds: any[]\n  exons: any[]\n  utr: any[]\n} /**\n * Prepares feature subfeatures for display by sorting and adjusting coordinates\n * relative to the parent feature start position\n */\nfunction prepareSubfeatures(feature: SimpleFeatureSerialized) {\n  const { start, subfeatures } = feature\n  return (\n    subfeatures\n      ?.sort((a, b) => a.start - b.start)\n      .map(sub => ({\n        ...sub,\n        start: sub.start - start,\n        end: sub.end - start,\n      })) || []\n  )\n}\n\n/**\n * Processes feature data to extract and deduplicate CDS, UTR, and exon features\n */\nfunction processFeatureData(children: any[], feature: SimpleFeatureSerialized) {\n  // Filter duplicate entries in cds and exon lists Duplicate entries may be\n  // rare but were seen in Gencode v36 track NCList (produces broken protein\n  // translations if included)\n  const featureType = feature.type?.toLowerCase()\n  const isMatureProteinRegion = featureType === 'mature_protein_region_of_cds'\n  const cds = isMatureProteinRegion\n    ? [{ start: 0, end: feature.end - feature.start, type: 'CDS' }]\n    : filterSuccessiveElementsWithSameStartAndEndCoord(\n        children.filter(sub => {\n          const type = sub.type?.toLowerCase()\n          return type === 'cds' || type === 'mature_protein_region_of_cds'\n        }),\n      )\n  const exons = filterSuccessiveElementsWithSameStartAndEndCoord(\n    children.filter(sub => sub.type === 'exon'),\n  )\n  let utr = filterSuccessiveElementsWithSameStartAndEndCoord(\n    children.filter(sub => sub.type?.match(/utr/i)),\n  )\n\n  // Calculate UTRs if not present but we have CDS and exons\n  if (!utr.length && cds.length && exons.length) {\n    utr = calculateUTRs(cds, exons)\n  } else if (!utr.length && cds.length && !exons.length) {\n    utr = calculateUTRs2(cds, {\n      start: 0,\n      end: feature.end - feature.start,\n      type: 'gene',\n    })\n  }\n\n  return {\n    cds,\n    exons,\n    utr,\n  }\n}\n\nfunction handleReverseStrand(\n  sequence: SeqState,\n  cds: any[],\n  exons: any[],\n  utr: any[],\n): FeatureData {\n  const { seq, upstream = '', downstream = '' } = sequence\n\n  // For reverse strand, reverse complement the sequence and swap\n  // upstream/downstream\n  return {\n    sequence: {\n      seq: revcom(seq),\n      upstream: downstream ? revcom(downstream) : '',\n      downstream: upstream ? revcom(upstream) : '',\n    },\n    cds: revlist(cds, seq.length),\n    exons: revlist(exons, seq.length),\n    utr: revlist(utr, seq.length),\n  }\n}\n\nexport function useSequenceData({\n  feature,\n  sequence,\n}: {\n  feature: SimpleFeatureSerialized\n  sequence?: SeqState | ErrorState\n}) {\n  // Prepare subfeatures relative to parent feature start position\n  const children = prepareSubfeatures(feature)\n\n  // Process feature data to extract CDS, exons, and UTRs\n  const { cds, exons, utr } = processFeatureData(children, feature)\n\n  if (!sequence || 'error' in sequence) {\n    return undefined\n  } else {\n    // Handle reverse strand orientation if needed\n    const {\n      sequence: adjustedSequence,\n      cds: adjustedCds,\n      exons: adjustedExons,\n      utr: adjustedUtr,\n    } = feature.strand === -1\n      ? handleReverseStrand(sequence, cds, exons, utr)\n      : { sequence, cds, exons, utr }\n\n    const { seq, upstream, downstream } = adjustedSequence\n    return {\n      seq,\n      upstream,\n      downstream,\n      cds: adjustedCds,\n      exons: adjustedExons,\n      utr: adjustedUtr,\n    }\n  }\n}\n","import { observer } from 'mobx-react'\n\nimport { toLocale } from '../../util/index.ts'\n\nimport type { SequenceFeatureDetailsModel } from './model.ts'\nimport type { SimpleFeatureSerialized } from '../../util/index.ts'\n\nfunction getStrand(strand: number) {\n  if (strand === -1) {\n    return '(-)'\n  } else if (strand === 1) {\n    return '(+)'\n  } else {\n    return ''\n  }\n}\n\nconst SequenceName = observer(function SequenceName({\n  mode,\n  model,\n  feature,\n}: {\n  model: SequenceFeatureDetailsModel\n  mode: string\n  feature: SimpleFeatureSerialized\n}) {\n  return (\n    <div style={{ background: 'white' }}>\n      {`>${[\n        [feature.name || feature.id, mode].filter(f => !!f).join('-'),\n        `${feature.refName}:${toLocale(feature.start + 1)}-${toLocale(feature.end)}${getStrand(feature.strand as number)}`,\n        mode.endsWith('updownstream')\n          ? `+/- ${toLocale(model.upDownBp)} up/downstream bp`\n          : '',\n      ]\n        .filter(f => !!f)\n        .join(' ')}\\n`}\n    </div>\n  )\n})\n\nexport default SequenceName\n","import { forwardRef } from 'react'\n\nimport { observer } from 'mobx-react'\n\nimport SequenceContents from './SequenceContents.tsx'\nimport SequenceName from './SequenceName.tsx'\n\nimport type { SequencePanelProps } from './types.ts'\n\nfunction WordWrap({ children }: { children: React.ReactNode }) {\n  return (\n    <pre\n      style={{\n        /* raw styles instead of className so that html copy works */\n        fontFamily: 'monospace',\n        color: 'black',\n        fontSize: 11,\n      }}\n    >\n      {children}\n    </pre>\n  )\n}\n\nfunction NoWordWrap({ children }: { children: React.ReactNode }) {\n  return (\n    <div\n      style={{\n        /* raw styles instead of className so that html copy works */\n        fontFamily: 'monospace',\n        color: 'black',\n        fontSize: 11,\n        maxWidth: 600,\n        whiteSpace: 'wrap',\n        wordBreak: 'break-all',\n      }}\n    >\n      {children}\n    </div>\n  )\n}\n\nconst SequencePanel = observer(\n  forwardRef<HTMLDivElement, SequencePanelProps>(function S(props, ref) {\n    const { sequence, model, feature } = props\n    const { showCoordinates, mode } = model\n\n    const Container = showCoordinates ? WordWrap : NoWordWrap\n    return (\n      <div\n        data-testid=\"sequence_panel\"\n        ref={ref}\n        style={{ maxHeight: 300, overflow: 'auto' }}\n      >\n        <Container>\n          <SequenceName model={model} mode={mode} feature={feature} />\n          <SequenceContents\n            model={model}\n            mode={mode}\n            feature={feature}\n            sequence={sequence}\n          />\n        </Container>\n      </div>\n    )\n  }),\n)\n\nexport default SequencePanel\n"],"names":["useStyles","makeStyles","dialogContent","width","observer","handleClose","model","feature","sequenceFeatureDetails","upDownBp","classes","seqPanelRef","useRef","forceLoad","setForceLoad","useState","session","getSession","assemblyName","view","assemblyNames","sequence","error","useFeatureSequence","SimpleFeature","_jsxs","Dialog","maxWidth","open","title","onClose","children","DialogContent","className","_jsx","SequenceTypeSelector","SequenceFeatureMenu","ref","type","Typography","ErrorMessage","_Fragment","color","Button","variant","onClick","Suspense","fallback","LoadingEllipses","SequencePanel","DialogActions","cdsColor","updownstreamColor","splitString","str","charactersPerRow","showCoordinates","currRemainder","spacingInterval","numChunks","Math","ceil","length","segments","Array","positionCounter","chunkIndex","stringOffset","chunkSize","currentChunk","slice","formatWithCoordinateSpacing","remainder","calculateRemainder","chunk","startPosition","formattedChunk","i","j","at","replaceAll","chunks","start","strand","coordStart","map","idx","prefix","padStart","postfix","Fragment","style","background","utr","cds","exons","upstream","downstream","includeIntrons","collapseIntron","upperCaseCDS","intronBp","showCoordinatesSetting","hasCds","sort","a","b","filter","f","end","toLower","s","toLowerCase","toUpper","toUpperCase","fullGenomicCoordinates","mult","currStart","upstreamChunk","SequenceDisplay","middleChunks","intron","push","JSON","stringify","downstreamChunk","stitch","middleChunk","codonTable","convertCodingSequenceToPeptides","RenderedSequenceComponent","t0","$","_c","mode","sequenceData","seq","t1","GenomicSequence","CDSSequence","CDNASequence","t2","Symbol","for","generateCodonTable","defaultCodonTable","ProteinSequence","subfeatures","sub","prepareSubfeatures","featureType","filterSuccessiveElementsWithSameStartAndEndCoord","match","calculateUTRs","calculateUTRs2","processFeatureData","adjustedSequence","adjustedCds","adjustedExons","adjustedUtr","revcom","revlist","handleReverseStrand","useSequenceData","name","id","join","refName","toLocale","endsWith","WordWrap","fontFamily","fontSize","NoWordWrap","whiteSpace","wordBreak","forwardRef","props","Container","t3","t4","maxHeight","overflow","SequenceName","SequenceContents"],"ignoreList":[],"sourceRoot":""}