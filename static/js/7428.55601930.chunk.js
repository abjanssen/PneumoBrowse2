"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[7428],{14465:(e,n,t)=>{t.d(n,{A:()=>d});var o=t(91818),s=t(21049),r=t(10240),a=t(68446),l=t(75785),c=t(69500);const i=(0,l.n9)()({formControl:{margin:0,marginLeft:4}}),d=(0,a.observer)((function({model:e}){const{classes:n}=i(),{intronBp:t,upDownBp:a,mode:l,hasCDS:d,hasExonOrCDS:u}=e;return(0,c.jsx)(o.A,{className:n.formControl,children:(0,c.jsx)(s.A,{size:"small",value:l,onChange:n=>{e.setMode(n.target.value)},children:Object.entries({...d?{cds:"CDS"}:{},...d?{protein:"Protein"}:{},...u?{cdna:"cDNA"}:{},...u?{gene:"Genomic w/ full introns"}:{},...u?{gene_updownstream:`Genomic w/ full introns +/- ${a}bp up+down stream`}:{},...u?{gene_collapsed_intron:`Genomic w/ ${t}bp intron`}:{},...u?{gene_updownstream_collapsed_intron:`Genomic w/ ${t}bp intron +/- ${a}bp up+down stream `}:{},...u?{}:{genomic:"Genomic"},...u?{}:{genomic_sequence_updownstream:`Genomic +/- ${a}bp up+down stream`}}).map((([e,n])=>(0,c.jsx)(r.A,{value:e,children:n},e)))})})}))},27428:(e,n,t)=>{t.r(n),t.d(n,{default:()=>h});var o=t(7552),s=t(61282),r=t(69092),a=t(68446),l=t(78781),c=t(67112),i=t(54579),d=t(14465),u=t(69500);const m=(0,o.lazy)((()=>t.e(5669).then(t.bind(t,45669)))),p=(0,o.lazy)((()=>t.e(6746).then(t.bind(t,76746)))),h=(0,a.observer)((function({model:e,feature:n}){const{sequenceFeatureDetails:t}=e,{upDownBp:a}=t,h=(0,o.useRef)(null),[f,b]=(0,o.useState)(!1),[w,g]=(0,o.useState)(!1),{sequence:x,error:C}=(0,l.p)(e,n,a,w);return(0,o.useEffect)((()=>{t.setFeature(n)}),[t,n]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{children:[(0,u.jsx)(d.A,{model:t}),(0,u.jsx)(i.A,{ref:h,model:t,extraItems:[{label:"Open in dialog",onClick:()=>{setTimeout((()=>{b(!0)}),1)}}]})]}),f?(0,u.jsxs)("div",{children:["Open in dialog...",(0,u.jsx)(o.Suspense,{fallback:(0,u.jsx)(c.LoadingEllipses,{}),children:(0,u.jsx)(p,{model:e,feature:n,handleClose:()=>{b(!1)}})})]}):(0,u.jsxs)("div",{children:["gene"===n.type?(0,u.jsx)(s.A,{children:"Note: inspect subfeature sequences for protein/CDS computations"}):null,C?(0,u.jsx)(c.ErrorMessage,{error:C}):x?"error"in x?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(s.A,{color:"error",children:x.error}),(0,u.jsx)(r.A,{variant:"contained",color:"inherit",onClick:()=>{g(!0)},children:"Force load"})]}):(0,u.jsx)(o.Suspense,{fallback:(0,u.jsx)(c.LoadingEllipses,{}),children:(0,u.jsx)(m,{ref:h,feature:n,sequence:x,model:t})}):(0,u.jsx)(c.LoadingEllipses,{})]})]})}))},54579:(e,n,t)=>{t.d(n,{A:()=>p});var o=t(7552),s=t(2020),r=t(72851),a=t(31409),l=t.n(a),c=t(45465),i=t(68446),d=t(23758),u=t(69500);const m=(0,o.lazy)((()=>t.e(3550).then(t.bind(t,21169)))),p=(0,i.observer)((0,o.forwardRef)((function({model:e,extraItems:n=[]},t){if("function"==typeof t)throw new Error("needs a non function ref");const[a,i]=(0,o.useState)(!1),{showCoordinatesSetting:p,showGenomicCoordsOption:h}=e;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(d.A,{menuItems:[{label:"Copy plaintext",onClick:()=>{const e=t?.current;e&&l()(e.textContent||"",{format:"text/plain"})}},{label:"Copy HTML",onClick:()=>{const e=t?.current;e&&l()(e.outerHTML,{format:"text/html"})}},{label:"Download plaintext",onClick:()=>{const e=t?.current;e&&(0,c.saveAs)(new Blob([e.textContent||""],{type:"text/plain;charset=utf-8"}),"sequence.txt")}},{label:"Download HTML",onClick:()=>{const e=t?.current;e&&(0,c.saveAs)(new Blob([e.outerHTML||""],{type:"text/html;charset=utf-8"}),"sequence.html")}},...n,{label:"Show coordinates?",type:"subMenu",subMenu:[{label:"No coordinates",type:"radio",checked:"none"===p,onClick:()=>{e.setShowCoordinates("none")}},{label:"Coordinates relative to feature start",type:"radio",checked:"relative"===p,onClick:()=>{e.setShowCoordinates("relative")}},...h?[{label:"Coordinates relative to genome (only available for continuous genome based sequence types)",type:"radio",checked:"genomic"===p,onClick:()=>{e.setShowCoordinates("genomic")}}]:[]]},{label:"Settings",icon:r.A,onClick:()=>{i(!0)}}],children:(0,u.jsx)(s.A,{})}),a?(0,u.jsx)(m,{model:e,handleClose:()=>{i(!1)}}):null]})})))},72851:(e,n,t)=>{t.d(n,{A:()=>r});var o=t(29772),s=t(69500);const r=(0,o.A)((0,s.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings")},78781:(e,n,t)=>{t.d(n,{p:()=>l});var o=t(7552),s=t(68584),r=t(99546);const a=5e5;function l(e,n,t,l){const[c,i]=(0,o.useState)(),[d,u]=(0,o.useState)();return(0,o.useEffect)((()=>{if(!e)return;const{assemblyManager:o,rpcManager:c}=(0,r.getSession)(e),d=e.view?.assemblyNames?.[0]||"";async function m(e,n,t){const r=await o.waitForAssembly(d);if(!r)throw new Error("assembly not found");const a="getSequence",l=await c.call(a,"CoreGetFeatures",{adapterConfig:(0,s.getConf)(r,["sequence","adapter"]),sessionId:a,regions:[{start:e,end:n,refName:r.getCanonicalRefName(t),assemblyName:d}]}),[i]=l;return i?.get("seq")||""}(async()=>{try{u(void 0);const{start:e,end:o,refName:s}=n;if(!l&&o-e>a)i({error:`Genomic sequence larger than ${a}bp, use "force load" button to display`});else{const n=e-t,r=o+t,a=await m(e,o,s),l=await m(Math.max(0,n),e,s),c=await m(o,r,s);i({seq:a,upstream:l,downstream:c})}}catch(e){console.error(e),u(e)}})()}),[n,e,t,l]),{sequence:c,error:d}}}}]);
//# sourceMappingURL=7428.55601930.chunk.js.map