{"version":3,"file":"static/js/3025.c847ad48.chunk.js","mappings":"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","sources":["../../../plugins/spreadsheet-view/src/SpreadsheetView/importAdapters/BedpeImport.ts","../../../plugins/spreadsheet-view/src/SpreadsheetView/importAdapters/util.ts","../../../node_modules/@mui/x-data-grid/esm/utils/utils.js"],"sourcesContent":["import { isNumber } from '@mui/x-data-grid/internals'\n\nimport { bufferToLines, parseStrand } from './util'\n\nexport function parseBedPEBuffer(buffer: Uint8Array) {\n  const lines = bufferToLines(buffer)\n  const rest = lines.filter(\n    line =>\n      !(\n        line.startsWith('#') ||\n        line.startsWith('browser') ||\n        line.startsWith('track')\n      ),\n  )\n  const lastHeaderLine = lines.findLast(line => line.startsWith('#'))\n\n  const coreColumns = [\n    'refName',\n    'start',\n    'end',\n    'mateRef',\n    'mateStart',\n    'mateEnd',\n    'name',\n    'score',\n    'strand',\n    'mateStrand',\n  ]\n  const numExtraColumns = Math.max(\n    0,\n    (rest[0]?.split('\\t').length || 0) - coreColumns.length,\n  )\n\n  const extraNames = lastHeaderLine?.includes('\\t')\n    ? lastHeaderLine\n        .slice(1)\n        .split('\\t')\n        .slice(coreColumns.length)\n        .map(t => t.trim())\n    : Array.from({ length: numExtraColumns }, (_v, i) => `field_${i}`)\n\n  const colNames = [...coreColumns, ...extraNames]\n  return {\n    columns: colNames.map(c => ({ name: c })),\n    rowSet: {\n      rows: rest.map((line, idx) => {\n        const cols = line.split('\\t')\n\n        return {\n          // what is displayed\n          cellData: {\n            refName: cols[0],\n            start: cols[1],\n            end: cols[2],\n            mateRefName: cols[3],\n            mateStart: cols[4],\n            mateEnd: cols[5],\n            name: cols[6],\n            score: +cols[7]! || cols[7],\n            strand: cols[8],\n            mateStrand: cols[9],\n            ...Object.fromEntries(\n              extraNames.map((n, idx) => {\n                const r = cols[idx + coreColumns.length]\n                return [n, isNumber(r) ? +r : r]\n              }),\n            ),\n          },\n          // an actual simplefeatureserialized\n          feature: {\n            uniqueId: `bedpe-${idx}`,\n            refName: cols[0],\n            start: +cols[1]!,\n            end: +cols[2]!,\n            strand: parseStrand(cols[8]),\n            mate: {\n              refName: cols[3],\n              start: +cols[4]!,\n              end: +cols[5]!,\n              strand: parseStrand(cols[9]),\n            },\n            name: cols[6],\n            score: cols[7],\n            ...Object.fromEntries(\n              extraNames.map((n, idx) => {\n                const r = cols[idx + coreColumns.length]\n                return [n, isNumber(r) ? +r : r]\n              }),\n            ),\n          },\n        }\n      }),\n    },\n  }\n}\n","export function parseStrand(strand?: string) {\n  if (strand === '+') {\n    return 1\n  } else if (strand === '-') {\n    return -1\n  } else {\n    return undefined\n  }\n}\n\nexport function bufferToLines(buffer: Uint8Array) {\n  return new TextDecoder('utf8')\n    .decode(buffer)\n    .split(/\\n|\\r\\n|\\r/)\n    .map(f => f.trim())\n    .filter(f => !!f)\n}\n","export function isNumber(value) {\n  return typeof value === 'number' && !Number.isNaN(value);\n}\nexport function isFunction(value) {\n  return typeof value === 'function';\n}\nexport function isObject(value) {\n  return typeof value === 'object' && value !== null;\n}\nexport function localStorageAvailable() {\n  try {\n    // Incognito mode might reject access to the localStorage for security reasons.\n    // window isn't defined on Node.js\n    // https://stackoverflow.com/questions/16427636/check-if-localstorage-is-available\n    const key = '__some_random_key_you_are_not_going_to_use__';\n    window.localStorage.setItem(key, key);\n    window.localStorage.removeItem(key);\n    return true;\n  } catch (err) {\n    return false;\n  }\n}\nexport function escapeRegExp(value) {\n  return value.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\n}\n\n/**\n * Follows the CSS specification behavior for min and max\n * If min > max, then the min have priority\n */\nexport const clamp = (value, min, max) => Math.max(min, Math.min(max, value));\n\n/**\n * Create an array containing the range [from, to[\n */\nexport function range(from, to) {\n  return Array.from({\n    length: to - from\n  }).map((_, i) => from + i);\n}\n\n// Pseudo random number. See https://stackoverflow.com/a/47593316\nfunction mulberry32(a) {\n  return () => {\n    /* eslint-disable */\n    let t = a += 0x6d2b79f5;\n    t = Math.imul(t ^ t >>> 15, t | 1);\n    t ^= t + Math.imul(t ^ t >>> 7, t | 61);\n    return ((t ^ t >>> 14) >>> 0) / 4294967296;\n    /* eslint-enable */\n  };\n}\n\n/**\n * Create a random number generator from a seed. The seed\n * ensures that the random number generator produces the\n * same sequence of 'random' numbers on every render. It\n * returns a function that generates a random number between\n * a specified min and max.\n */\nexport function createRandomNumberGenerator(seed) {\n  const random = mulberry32(seed);\n  return (min, max) => min + (max - min) * random();\n}\nexport function deepClone(obj) {\n  if (typeof structuredClone === 'function') {\n    return structuredClone(obj);\n  }\n  return JSON.parse(JSON.stringify(obj));\n}\n\n/**\n * Mark a value as used so eslint doesn't complain. Use this instead\n * of a `eslint-disable-next-line react-hooks/exhaustive-deps` because\n * that hint disables checks on all values instead of just one.\n */\nexport function eslintUseValue(_) {}\nexport const runIf = (condition, fn) => params => {\n  if (condition) {\n    fn(params);\n  }\n};"],"names":["parseBedPEBuffer","buffer","lines","bufferToLines","rest","filter","line","startsWith","lastHeaderLine","findLast","coreColumns","numExtraColumns","Math","max","split","length","extraNames","includes","slice","map","t","trim","Array","from","_v","i","columns","c","name","rowSet","rows","idx","cols","cellData","refName","start","end","mateRefName","mateStart","mateEnd","score","strand","mateStrand","Object","fromEntries","n","r","isNumber","feature","uniqueId","parseStrand","mate","TextDecoder","decode","f","value","Number","isNaN","isFunction","isObject","localStorageAvailable","key","window","localStorage","setItem","removeItem","err","escapeRegExp","replace","clamp","min","range","to","_","createRandomNumberGenerator","seed","random","a","imul","deepClone","obj","structuredClone","JSON","parse","stringify","eslintUseValue","runIf","condition","fn","params"],"sourceRoot":""}