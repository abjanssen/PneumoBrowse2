"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[8109],{88109:(e,t,n)=>{n.r(t),n.d(t,{default:()=>F});var r=n(7552),a=n(9502),l=n(84144),i=n(943),s=n(68446),o=n(87083),c=n(99546),u=n(33371),d=n(32808),m=n(36715),f=n(28237),p=n(76157);function h({rows:e,columns:t}){const[n,a]=(0,r.useState)(!1),l=t.map((t=>(0,c.measureGridWidth)(e.map((e=>e[t.field])))));return e.length?r.createElement("div",null,r.createElement(u.A,{control:r.createElement(d.A,{checked:n,onChange:e=>{a(e.target.checked)}}),label:r.createElement(m.A,{variant:"body2"},"Show options")}),r.createElement(f.z,{rowHeight:25,rows:e,columns:t.map(((e,t)=>({...e,width:l[t]}))),slots:{toolbar:n?p.O:null}})):null}function b({data:e,fields:t,title:n}){return e.length?r.createElement(o.default,{title:n},r.createElement(h,{rows:e.map(((e,n)=>({id:n,...Object.fromEntries(e.split("|").map(((e,n)=>[t[n],e])))}))),columns:t.map((e=>({field:e})))})):null}var g=n(1343);function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E.apply(null,arguments)}function O({columns:e,filter:t,setFilter:n}){return r.createElement(r.Fragment,null,r.createElement(m.A,null,"These filters can use a plain text search or regex style query, e.g. in the genotype field, entering 1 will query for all genotypes that include the first alternate allele e.g. 0|1 or 1|1, entering [1-9]\\d* will find any non-zero allele e.g. 0|2 or 2/33"),e.map((({field:e})=>r.createElement(g.A,{key:`filter-${e}`,placeholder:`Filter ${e}`,value:t[e]||"",onChange:r=>{n({...t,[e]:r.target.value})}}))))}function w(e){const{feature:t,descriptions:n={}}=e,[a,l]=(0,r.useState)({}),i=t.samples||{},s=Object.entries(i);let h,b=[];const g=Object.keys(a);try{b=s.map((e=>({...Object.fromEntries(Object.entries(e[1]).map((e=>[e[0],`${e[1]}`]))),sample:e[0],id:e[0]}))).filter((e=>!g.length||g.every((t=>{const n=a[t];return!n||new RegExp(n,"i").exec(e[t])}))))}catch(e){h=e}const[w,y]=(0,r.useState)(!1),v=["sample",...Object.keys(s[0]?.[1]||{})],A=v.map((e=>(0,c.measureGridWidth)(b.map((t=>t[e]))))),N=v.map(((e,t)=>({field:e,description:n?.FORMAT?.[e]?.Description,width:A[t]})));return s.length?r.createElement(o.default,E({},e,{title:"Samples"}),h?r.createElement(m.A,{color:"error"},`${h}`):null,r.createElement(u.A,{control:r.createElement(d.A,{checked:w,onChange:e=>{y(e.target.checked)}}),label:r.createElement(m.A,{variant:"body2"},"Show options")}),w?r.createElement(O,{setFilter:l,columns:N,filter:a}):null,r.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.createElement(f.z,{rows:b,hideFooter:b.length<100,columns:N,disableRowSelectionOnClick:!0,rowHeight:25,columnHeaderHeight:35,disableColumnMenu:!0,slots:{toolbar:w?p.O:null},slotProps:{toolbar:{printOptions:{disableToolbarButton:!0}}}}))):null}const y={CHROM:"chromosome: An identifier from the reference genome",POS:"position: The reference position, with the 1st base having position 1",ID:"identifier: Semi-colon separated list of unique identifiers where available",REF:"reference base(s): Each base must be one of A,C,G,T,N (case insensitive).",ALT:"alternate base(s): Comma-separated list of alternate non-reference alleles",QUAL:"quality: Phred-scaled quality score for the assertion made in ALT",FILTER:"filter status: PASS if this position has passed all filters, otherwise a semicolon-separated list of codes for filters that fail"};function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v.apply(null,arguments)}const A=(0,r.lazy)((()=>n.e(7087).then(n.bind(n,67087))));function N({descriptions:e,feature:t}){const n=e?.INFO?.ANN?.Description,a=n?.match(/.*Functional annotations:'(.*)'$/)?.[1]?.split("|")||[],l=t.INFO?.ANN||[];return r.createElement(b,{fields:a,data:l,title:"Variant ANN field"})}function S({descriptions:e,feature:t}){const n=e?.INFO?.CSQ?.Description,a=n?.match(/.*Format: (.*)/)?.[1]?.split("|")||[],l=t.INFO?.CSQ||[];return r.createElement(b,{fields:a,data:l,title:"Variant CSQ field"})}const F=(0,s.observer)((function(e){const{model:t}=e,{featureData:n,descriptions:s}=t,o=JSON.parse(JSON.stringify(n)),{samples:c,ALT:u,type:d="",...m}=o;return r.createElement(i.A,{"data-testid":"variant-side-drawer"},r.createElement(l.default,v({feature:m,descriptions:{...y,...s}},e)),r.createElement(S,{feature:m,descriptions:s}),r.createElement(N,{feature:m,descriptions:s}),r.createElement(r.Suspense,{fallback:null},"breakend"===d?r.createElement(A,{feature:o,locStrings:o.ALT.map((e=>(0,a.h)(e)?.MatePosition||"")),model:t}):null,"translocation"===d?r.createElement(A,{feature:o,model:t,locStrings:[`${o.INFO.CHR2[0]}:${o.INFO.END}`]}):null,"paired_feature"===d?r.createElement(A,{feature:o,model:t,locStrings:[`${o.mate.refName}:${o.mate.start}`]}):null,d.includes("inversion")||d.includes("deletion")||d.includes("duplication")||d.includes("cnv")||d.includes("sv")?r.createElement(A,{feature:{uniqueId:"random",refName:o.refName,start:o.start,end:o.start+1,mate:{refName:o.refName,start:o.end,end:o.end+1}},model:t,locStrings:[`${o.refName}:${o.end}`]}):null),r.createElement(w,v({feature:o},e,{descriptions:s})))}))}}]);
//# sourceMappingURL=8109.dcbe99d3.chunk.js.map