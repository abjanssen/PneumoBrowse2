"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[7663],{47663:(e,t,r)=>{r.r(t),r.d(t,{default:()=>R});var s=r(7552),a=r(49823),n=r(90542),o=r(74893),l=r(69500);const c=(0,o.A)((0,l.jsx)("path",{d:"M21 7h-2v2h-2V7h-2V5h2V3h2v2h2zm-2 14-7-3-7 3V5c0-1.1.9-2 2-2h7c-.63.84-1 1.87-1 3 0 2.76 2.24 5 5 5 .34 0 .68-.03 1-.1z"}),"BookmarkAdd");var i=r(22168),h=r(1343),u=r(29499),d=r(99123),m=r(61723),w=r(36715),p=r(58507),E=r(5401),S=r(31409),b=r.n(S),C=r(68446),g=r(36422),f=r(430),k=r(17765),y=r(49409);const A=(0,s.lazy)((()=>r.e(4741).then(r.bind(r,84741))));function L({url:e}){return s.createElement(h.A,{label:"URL",value:e,variant:"filled",fullWidth:!0,onClick:e=>{e.target.select()},slotProps:{input:{readOnly:!0}}})}const R=(0,C.observer)((function({handleClose:e,session:t}){const[r,o]=(0,s.useState)(""),[l,h]=(0,s.useState)(""),[S,C]=(0,s.useState)(""),[R,v]=(0,s.useState)(""),[P,U]=(0,s.useState)(!0),[I,j]=(0,s.useState)(),[B,D]=(0,s.useState)(!1),[,J]=(0,f.useQueryParam)("password",f.StringParam),[,M]=(0,f.useQueryParam)("session",f.StringParam),V=t.shareURL,$=localStorage.getItem("jbrowse-shareURL")||"short",_=(0,g.getSnapshot)(t);(0,s.useEffect)((()=>{(async()=>{if(!I)try{if("short"===$){U(!0);const e=new URL(window.location.href),t=await(0,k.J)(_,V,e.href),r=new URLSearchParams(e.search);r.set("session",`share-${t.json.sessionId}`),r.set("password",t.password),e.search=r.toString(),C(e.href),o(`share-${t.json.sessionId}`),h(t.password)}else{const e=await(0,y.eW)(JSON.stringify((0,g.getSnapshot)(t))),r=new URL(window.location.href),s=new URLSearchParams(r.search);s.set("session",`encoded-${e}`),o(`encoded-${e}`),r.search=s.toString(),v(r.toString())}}catch(e){j(e)}finally{U(!1)}})()}),[$,I,t,V,_]);const x="short"===$&&P||!!I;return s.createElement(s.Fragment,null,s.createElement(a.Dialog,{maxWidth:"xl",open:!0,onClose:e,title:"JBrowse Shareable Link"},s.createElement(u.A,null,s.createElement(d.A,null,"Copy the URL below to share your current JBrowse session.",s.createElement(m.A,{onClick:()=>{D(!0)}},s.createElement(i.A,null))),"short"===$?I?s.createElement(a.ErrorMessage,{error:I,onReset:()=>{j(void 0)}}):P?s.createElement(w.A,null,"Generating short URL..."):s.createElement(L,{url:S}):s.createElement(L,{url:R})),s.createElement(p.A,null,s.createElement(E.A,{startIcon:s.createElement(c,null),disabled:x,onClick:e=>{e.preventDefault(),J(l,"replaceIn"),M(r,"replaceIn"),alert("Now press Ctrl+D (PC) or Cmd+D (Mac)")}},"Create browser Bookmark"),s.createElement(E.A,{onClick:()=>{b()(S||R),t.notify("Copied to clipboard","success")},startIcon:s.createElement(n.PM,null),disabled:x},"Copy to Clipboard"),s.createElement(E.A,{onClick:e,autoFocus:!0},"Close"))),s.createElement(A,{open:B,onClose:()=>{D(!1)},currentSetting:$}))}))}}]);
//# sourceMappingURL=7663.8ee5a338.chunk.js.map