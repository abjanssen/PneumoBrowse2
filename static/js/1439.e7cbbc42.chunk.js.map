{"version":3,"file":"static/js/1439.e7cbbc42.chunk.js","mappings":"kPAiBO,SAASA,EAA6BC,IAW3CC,EAAAA,EAAAA,aACED,GACAE,EAAAA,EAAAA,SAAQC,UACN,IACE,MAAMC,GAAOC,EAAAA,EAAAA,mBAAkBL,GAC/B,IAAKI,EAAKE,YACR,OAEF,MAAM,WAAEC,IAAeC,EAAAA,EAAAA,YAAWR,IAC5B,cAAES,GAAkBT,EACpBU,GAAQC,EAAAA,EAAAA,MACdX,EAAKY,kBAAkBF,GACvB,MAAMG,GAAYC,EAAAA,EAAAA,iBAAgBd,GAC5Be,QAAiBR,EAAWS,KAChCH,EACA,wBACA,CACEI,QAASb,EAAKc,aAAaC,cAC3BN,YACAJ,mBAGAW,EAAAA,EAAAA,SAAQpB,IACVA,EAAKqB,WAAWN,EAEpB,CAAE,MAAOO,KACFC,EAAAA,EAAAA,IAAiBD,KAAMF,EAAAA,EAAAA,SAAQpB,KAClCwB,QAAQC,MAAMH,IACdd,EAAAA,EAAAA,YAAWR,GAAM0B,YAAY,GAAGJ,IAAKA,GAEzC,IAGN,C","sources":["../../../plugins/wiggle/src/getMultiWiggleSourcesAutorun.ts"],"sourcesContent":["import { getContainingView, getSession } from '@jbrowse/core/util'\nimport { isAbortException } from '@jbrowse/core/util/aborting'\nimport { createStopToken } from '@jbrowse/core/util/stopToken'\nimport { getRpcSessionId } from '@jbrowse/core/util/tracks'\nimport { autorun } from 'mobx'\nimport { addDisposer, isAlive } from 'mobx-state-tree'\n\nimport type { AnyConfigurationModel } from '@jbrowse/core/configuration'\nimport type { LinearGenomeViewModel } from '@jbrowse/plugin-linear-genome-view'\n\nexport interface Source {\n  name: string\n  source: string\n  color?: string\n  group?: string\n}\n\nexport function getMultiWiggleSourcesAutorun(self: {\n  quantitativeStatsReady: boolean\n  configuration: AnyConfigurationModel\n  adapterConfig: AnyConfigurationModel\n  autoscaleType: string\n  adapterProps: () => Record<string, unknown>\n  setSourcesLoading: (aborter: string) => void\n  setError: (error: unknown) => void\n  setMessage: (str: string) => void\n  setSources: (sources: Source[]) => void\n}) {\n  addDisposer(\n    self,\n    autorun(async () => {\n      try {\n        const view = getContainingView(self) as LinearGenomeViewModel\n        if (!view.initialized) {\n          return\n        }\n        const { rpcManager } = getSession(self)\n        const { adapterConfig } = self\n        const token = createStopToken()\n        self.setSourcesLoading(token)\n        const sessionId = getRpcSessionId(self)\n        const sources = (await rpcManager.call(\n          sessionId,\n          'MultiWiggleGetSources',\n          {\n            regions: view.staticBlocks.contentBlocks,\n            sessionId,\n            adapterConfig,\n          },\n        )) as Source[]\n        if (isAlive(self)) {\n          self.setSources(sources)\n        }\n      } catch (e) {\n        if (!isAbortException(e) && isAlive(self)) {\n          console.error(e)\n          getSession(self).notifyError(`${e}`, e)\n        }\n      }\n    }),\n  )\n}\n"],"names":["getMultiWiggleSourcesAutorun","self","addDisposer","autorun","async","view","getContainingView","initialized","rpcManager","getSession","adapterConfig","token","createStopToken","setSourcesLoading","sessionId","getRpcSessionId","sources","call","regions","staticBlocks","contentBlocks","isAlive","setSources","e","isAbortException","console","error","notifyError"],"sourceRoot":""}