"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[4630,6839],{46839:(e,t,n)=>{n.r(t),n.d(t,{default:()=>h});var r=n(74630),o=n(99546),s=n(98231),i=n(65468),c=n(37962),a=n(89870),l=n(68446),u=n(37205),d=n(69500);const h=(0,l.observer)(function({model:e}){return(0,d.jsx)(u.A,{message:`${e.error}`,severity:"error",action:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(c.A,{title:"Reload track",children:(0,d.jsx)(a.A,{"data-testid":"reload_button",onClick:()=>{e.reload()},children:(0,d.jsx)(s.A,{})})}),(0,d.jsx)(c.A,{title:"Show stack trace",children:(0,d.jsx)(a.A,{onClick:()=>{(0,o.getSession)(e).queueDialog(t=>[r.default,{onClose:t,error:e.error}])},children:(0,d.jsx)(i.A,{})})})]})})})},74630:(e,t,n)=>{n.r(t),n.d(t,{default:()=>A});var r=n(67758),o=n(7552),s=n(62266),i=n(61282),c=n(76218),a=n(69092),l=n(30698),u=n(31409),d=n.n(u),h=n(1631),w=n(75785),p=n(92562),x=n(58531),f=n(37565),j=n(69500);async function b(e){const t=await fetch(e);if(!t.ok)throw new Error(`HTTP ${t.status} fetching ${e}: ${await t.text()}`);return t}const g={};async function m(e){if(void 0!==g[e])return g[e];const t=new URL(e).search,n=await async function(e){return(await b(e)).text()}(e);let r=new RegExp(/\/\/# sourceMappingURL=(.*)/).exec(n)?.[1]||"";r=new URL(r,e).href+t;const o=await async function(e){return(await b(e)).json()}(r),s=new h.SourceMapConsumer(o);return g[e]=s,s}const k=1e4,$=(0,w.n9)()(e=>({pre:{background:(0,s.X4)(e.palette.error.main,.2),border:`1px solid ${e.palette.divider}`,overflow:"auto",margin:20,maxHeight:300}}));function y(e){const t=(0,r.c)(23),{text:n,extra:o}=e,{classes:s}=$();let c,a;t[0]!==o?(c=o?`supporting data: ${JSON.stringify(o,null,2)}`:"",t[0]=o,t[1]=c):c=t[1],t[2]!==c||t[3]!==n?(a=["I got this error from JBrowse, here is the stack trace:\n","```",n,"```",c],t[2]=c,t[3]=n,t[4]=a):a=t[4];const l=encodeURIComponent(`${a.join("\n")}\n`);let u,d;t[5]!==o?(u=o?`supporting data: ${JSON.stringify(o,null,2)}`:"",t[5]=o,t[6]=u):u=t[6],t[7]!==u||t[8]!==n?(d=[n,u],t[7]=u,t[8]=n,t[9]=d):d=t[9];const h=d.join("\n"),w=`https://github.com/GMOD/jbrowse-components/issues/new?labels=bug&title=JBrowse+issue&body=${l}`,p=`mailto:jbrowse2@berkeley.edu?subject=JBrowse%202%20error&body=${l}`;let f,b,g,m,k;return t[10]!==w?(f=(0,j.jsx)(x.A,{href:w,children:"GitHub"}),t[10]=w,t[11]=f):f=t[11],t[12]!==p?(b=(0,j.jsx)(x.A,{href:p,children:"jbrowse2@berkeley.edu"}),t[12]=p,t[13]=b):b=t[13],t[14]!==f||t[15]!==b?(g=(0,j.jsxs)(i.A,{children:["Post a new issue at"," ",f," or send an email to ",b," "]}),t[14]=f,t[15]=b,t[16]=g):g=t[16],t[17]!==s.pre||t[18]!==h?(m=(0,j.jsx)("pre",{className:s.pre,children:h}),t[17]=s.pre,t[18]=h,t[19]=m):m=t[19],t[20]!==g||t[21]!==m?(k=(0,j.jsxs)(j.Fragment,{children:[g,m]}),t[20]=g,t[21]=m,t[22]=k):k=t[22],k}function A(e){const t=(0,r.c)(30),{error:n,onClose:s,extra:i}=e,[u,h]=(0,o.useState)(),[w,x]=(0,o.useState)(),[b,g]=(0,o.useState)(!1),$=`${"object"==typeof n&&null!==n&&"stack"in n?n.stack:""}`,A=n?`${n}`:"";let v;t[0]!==A||t[1]!==$?(v=function(e,t){if(e.startsWith("Error:")){const n=`${t}`;return e.slice(n.length)}return e}($,A),t[0]=A,t[1]=$,t[2]=v):v=t[2];const S=v;let J,R;t[3]!==S?(J=()=>{(async()=>{try{const e=await async function(e){const t=e.split("\n"),n=[];for(const e of t){const t=new RegExp(/(.*)(https?:\/\/.*):(\d+):(\d+)/).exec(e);if(null===t){n.push(e);continue}const r=t[2],o=(await m(r)).originalPositionFor({line:Number.parseInt(t[3]),column:Number.parseInt(t[4])});o.source&&o.line&&o.column?n.push(`${o.source}:${o.line}:${o.column+1} (${t[1].trim()})`):n.push(e)}return n.join("\n")}(S);h(e)}catch(e){const t=e;console.error(t),h(S),x(t)}})()},R=[S],t[3]=S,t[4]=J,t[5]=R):(J=t[4],R=t[5]),(0,o.useEffect)(J,R);const B=w?"Error loading source map, showing raw stack trace below:":"";let E;t[6]!==A?(E=A.length>k?`${A.slice(0,k)}...`:A,t[6]=A,t[7]=E):E=t[7];const N=u||"No stack trace available";let T;t[8]!==B||t[9]!==E||t[10]!==N?(T=[B,E,N,window.JBrowseSession?`JBrowse ${window.JBrowseSession.version}`:""].filter(C),t[8]=B,t[9]=E,t[10]=N,t[11]=T):T=t[11];const _=T.join("\n");let I,U;t[12]!==_||t[13]!==i||t[14]!==u?(I=(0,j.jsx)(c.A,{children:void 0===u?(0,j.jsx)(f.A,{variant:"h6"}):(0,j.jsx)(y,{text:_,extra:i})}),t[12]=_,t[13]=i,t[14]=u,t[15]=I):I=t[15],t[16]!==_?(U=()=>{d()(_),g(!0),setTimeout(()=>{g(!1)},1e3)},t[16]=_,t[17]=U):U=t[17];const F=b?"Copied!":"Copy stack trace to clipboard";let H,L,M,O;return t[18]!==F||t[19]!==U?(H=(0,j.jsx)(a.A,{variant:"contained",color:"secondary",onClick:U,children:F}),t[18]=F,t[19]=U,t[20]=H):H=t[20],t[21]!==s?(L=(0,j.jsx)(a.A,{variant:"contained",color:"primary",onClick:s,children:"Close"}),t[21]=s,t[22]=L):L=t[22],t[23]!==H||t[24]!==L?(M=(0,j.jsxs)(l.A,{children:[H,L]}),t[23]=H,t[24]=L,t[25]=M):M=t[25],t[26]!==s||t[27]!==M||t[28]!==I?(O=(0,j.jsxs)(p.A,{open:!0,onClose:s,title:"Stack trace",maxWidth:"xl",children:[I,M]}),t[26]=s,t[27]=M,t[28]=I,t[29]=O):O=t[29],O}function C(e){return!!e}}}]);
//# sourceMappingURL=6839.83396823.chunk.js.map