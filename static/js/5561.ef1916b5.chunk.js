"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[5561],{36326(e,t,a){a.d(t,{X:()=>r});var i=a(77251),n=a(99226),s=a(77346),o=a(86470);function r(e,t){(0,o.vi)(e,async()=>{if(!t())return;const a=(0,i.getContainingView)(e),{adapterConfig:o}=e,{staticBlocks:r}=a,{modifications:d,simplexModifications:c}=await(0,s.D)({model:e,adapterConfig:o,blocks:r});(0,n.isAlive)(e)&&(e.updateVisibleModifications(d),e.setSimplexModifications(c),e.setModificationsReady(!0))},{delay:1e3,name:"GetModInfo"})}},39630(e,t,a){a.d(t,{K:()=>u,y:()=>g});var i=a(77251),n=a(8201),s=a(52901),o=a(70203),r=a(99226),d=a(42456),c=a(38567),l=a(86470);function g({self:e,rpcMethodName:t,getRPCParams:a,onResult:d}){return async()=>{const l=(0,i.getContainingView)(e);if(!l.initialized||e.error||!e.featureDensityStatsReadyAndRegionNotTooLarge)return;const{bpPerPx:g}=l;try{const n=(0,i.getSession)(e),{rpcManager:u,assemblyManager:f}=n,m=l.assemblyNames[0];if(!m)return;const p=f.get(m),h=p?.configuration?.sequence?.adapter,y=h?(0,r.getSnapshot)(h):void 0,C=(0,c.untracked)(()=>e.renderingStopToken);C&&(0,s.CF)(C);const w=(0,s.y5)();e.setRenderingStopToken(w),e.setLoading(!0),e.setCanvasDrawn?.(!1);const R={displayedRegions:structuredClone(l.displayedRegions),bpPerPx:l.bpPerPx,offsetPx:l.offsetPx,interRegionPaddingWidth:l.interRegionPaddingWidth,minimumBlockWidth:l.minimumBlockWidth,width:l.width},v=(0,o.getRpcSessionId)(e),P=e.adapterConfig,b=(0,r.getSnapshot)(e.configuration),k=await u.call(v,t,{sessionId:v,view:R,adapterConfig:P,sequenceAdapter:y,config:b,statusCallback:t=>{(0,r.isAlive)(e)&&e.setStatusMessage?.(t)},stopToken:w,...a({view:l,session:n,sequenceAdapter:y,stopToken:w})});k.imageData&&(e.setRenderingImageData(k.imageData),void 0!==k.offsetPx&&e.setLastDrawnOffsetPx(k.offsetPx),d(k)),e.setLastDrawnBpPerPx(g)}catch(t){(0,n.Kp)(t)||(console.error(t),e.setError(t))}finally{e.setRenderingStopToken(void 0),e.setLoading(!1)}}}function u(e){(0,l.vi)(e,async()=>{const t=(0,d.y6)(e.ref,e.renderingImageData);(0,r.isAlive)(e)&&e.setCanvasDrawn?.(t)},{name:"CanvasRenderAutorun"})}},55561(e,t,a){a.d(t,{doAfterAttachRPC:()=>c});var i=a(77251),n=a(99226),s=a(3962),o=a(39630),r=a(36326),d=a(86470);function c(e){const t=t=>(0,o.y)({self:e,rpcMethodName:"RenderLinearReadCloudDisplay",getRPCParams:()=>({...e.renderProps(),drawCloud:t,...t&&{cloudModeHeight:e.height}}),onResult:a=>{t||void 0===a.layoutHeight||e.setLayoutHeight(a.layoutHeight),t&&void 0!==a.cloudMaxDistance&&e.setCloudMaxDistance(a.cloudMaxDistance),a.featuresForFlatbush&&(0,s.sw)(a.featuresForFlatbush,e),a.mismatchFlatbush&&a.mismatchItems&&(0,s.Cj)(a.mismatchFlatbush,a.mismatchItems,e)}}),a=t(!0),c=t(!1);(0,d.vi)(e,async()=>{e.drawCloud&&(0,n.isAlive)(e)&&a()},{delay:1e3,name:"CloudRender"}),(0,d.vi)(e,async()=>{!e.drawCloud&&(0,n.isAlive)(e)&&c()},{delay:1e3,name:"StackRender"}),(0,o.K)(e),(0,r.X)(e,()=>(0,i.getContainingView)(e).initialized&&e.featureDensityStatsReadyAndRegionNotTooLarge)}}}]);
//# sourceMappingURL=5561.ef1916b5.chunk.js.map