"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[4613],{44613(e,n,t){t.r(n),t.d(n,{default:()=>P});var s=t(42918),i=t(87574),r=t(27351),o=t(90975),a=t(77251),l=t(64074),d=t(28397),c=t(65045),u=t(58955),g=t(32118);const h=(0,c.n)()(e=>({paper:{overflowY:"auto",height:"100%",position:"relative",zIndex:e.zIndex.drawer,outline:"none",background:e.palette.background.default},resizeHandle:{width:4,position:"fixed",top:0,zIndex:e.zIndex.drawer+1}})),x=(0,l.observer)(function({children:e,session:n}){const{drawerPosition:t,drawerWidth:i}=n,{classes:r}=h(),o=(0,s.useRef)(null);return(0,s.useEffect)(()=>{function e(e){if(e.target instanceof Element&&o.current?.contains(e.target)){const e=n.visibleWidget?.view?.id;e&&n.setFocusedViewId(e)}}return document.addEventListener("mousedown",e),document.addEventListener("keydown",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("keydown",e)}},[n]),(0,g.jsxs)(u.A,{ref:o,className:r.paper,elevation:16,square:!0,children:["right"===t?(0,g.jsx)(d.A,{onDrag:n.resizeDrawer,className:r.resizeHandle,vertical:!0}):null,e,"left"===t?(0,g.jsx)(d.A,{onDrag:n.resizeDrawer,className:r.resizeHandle,style:{left:i},vertical:!0}):null]})});var p=t(96322),j=t(35466),w=t(19335),v=t(27607),m=t(74919),f=t(6773),b=t(91073),A=t(21267),k=t(75695),y=t(9625);const C=(0,l.observer)(function({session:e}){const[n,t]=(0,s.useState)(null),{drawerPosition:i,visibleWidget:r}=e;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(m.A,{color:"inherit",onClick:e=>{t(e.currentTarget)},children:(0,g.jsx)(A.A,{})}),(0,g.jsx)(v.A,{title:"Minimize drawer",children:(0,g.jsx)(m.A,{"data-testid":"drawer-minimize",color:"inherit",onClick:()=>{e.notify(`Drawer minimized, click button on ${i} side of screen to re-open`,"info"),e.minimizeWidgetDrawer()},children:(0,g.jsx)(b.A,{})})}),(0,g.jsx)(v.A,{title:"Close drawer",children:(0,g.jsx)(m.A,{color:"inherit",onClick:()=>{e.hideWidget(r)},children:(0,g.jsx)(f.A,{})})}),(0,g.jsx)(k.A,{anchorEl:n,open:Boolean(n),onClose:()=>{t(null)},children:["left","right"].map(n=>(0,g.jsx)(y.A,{selected:"option"===i,onClick:()=>{e.setDrawerPosition(n),t(null)},children:n},n))})]})});var W=t(22762),z=t(96919),T=t(40338),D=t(1591);const E=(0,c.n)()(e=>({formControl:{margin:0},drawerSelect:{margin:0,color:e.palette.secondary.contrastText},dropDownIcon:{color:e.palette.secondary.contrastText}})),H=(0,l.observer)(function({session:e}){const{visibleWidget:n,activeWidgets:t}=e,{classes:s}=E(),{pluginManager:i}=(0,a.getEnv)(e);return(0,g.jsx)(z.A,{className:s.formControl,children:(0,g.jsx)(T.A,{value:n?.id,"data-testid":"widget-drawer-selects",className:s.drawerSelect,classes:{icon:s.dropDownIcon},renderValue:n=>{const t=e.activeWidgets.get(n);if(!t)return(0,g.jsx)(D.A,{variant:"h6",color:"inherit",children:"Unknown widget"});const s=i.getWidgetType(t.type),{HeadingComponent:r,heading:o}=s;return r?(0,g.jsx)(r,{model:t}):(0,g.jsx)(D.A,{variant:"h6",color:"inherit",children:o})},onChange:n=>{const t=e.activeWidgets.get(n.target.value);t?e.showWidget(t):e.notify(`Widget not found ${n.target.value}`,"warning")},children:[...t.values()].map(n=>{const t=i.getWidgetType(n.type),{HeadingComponent:s,heading:r}=t;return(0,g.jsxs)(y.A,{"data-testid":`widget-drawer-selects-item-${n.type}`,value:n.id,children:[s?(0,g.jsx)(s,{model:n}):(0,g.jsx)(D.A,{variant:"h6",color:"inherit",children:r}),(0,g.jsx)(m.A,{"data-testid":`${n.type}-drawer-delete`,color:"inherit","aria-label":"Delete",onClick:()=>{e.hideWidget(n)},children:(0,g.jsx)(W.A,{})})]},n.id)})})})}),I=(0,s.lazy)(()=>t.e(3628).then(t.bind(t,73628))),F=(0,c.n)()(e=>({spacer:{flexGrow:1},headerFocused:{background:e.palette.secondary.main},headerUnfocused:{background:e.palette.secondary.dark}})),N=(0,l.observer)(function({session:e,setToolbarHeight:n,onPopoutDrawer:t}){const{classes:i}=F(),r=e.focusedViewId,{visibleWidget:o}=e,l=o?.view?.id,{pluginManager:d}=(0,a.getEnv)(e),c=o?d.getWidgetType(o.type):void 0,{helpText:u}=c||{};return(0,g.jsx)(j.A,{position:"sticky",className:r===l?i.headerFocused:i.headerUnfocused,ref:e=>{n(e?.getBoundingClientRect().height||0)},children:(0,g.jsxs)(w.A,{disableGutters:!0,children:[(0,g.jsx)(H,{session:e}),(0,g.jsx)(v.A,{title:"Open drawer in dialog",children:(0,g.jsx)(m.A,{color:"inherit",onClick:()=>{t()},children:(0,g.jsx)(p.A,{})})}),u?(0,g.jsx)(s.Suspense,{fallback:null,children:(0,g.jsx)(I,{helpText:u,session:e})}):null,(0,g.jsx)("div",{className:i.spacer}),(0,g.jsx)(C,{session:e})]})})}),S=(0,s.lazy)(()=>t.e(6186).then(t.bind(t,76186))),P=(0,l.observer)(function({session:e}){const{visibleWidget:n}=e,{pluginManager:t}=(0,a.getEnv)(e),l=n?t.evaluateExtensionPoint("Core-replaceWidget",t.getWidgetType(n.type).ReactComponent,{session:e,model:n}):null,[d,c]=(0,s.useState)(0),[u,h]=(0,s.useState)(!1);return(0,g.jsxs)(x,{session:e,children:[(0,g.jsx)(N,{onPopoutDrawer:()=>{h(!0)},session:e,setToolbarHeight:c}),(0,g.jsx)(s.Suspense,{fallback:(0,g.jsx)(i.A,{}),children:(0,g.jsx)(o.t,{FallbackComponent:({error:e})=>(0,g.jsx)(r.A,{error:e}),children:l?u?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{children:"Opened in dialog..."}),(0,g.jsx)(S,{session:e,onClose:()=>{h(!1)}})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(l,{model:n,session:e,toolbarHeight:d}),(0,g.jsx)("div",{style:{height:300}})]}):null})})]})})}}]);
//# sourceMappingURL=4613.308bf21a.chunk.js.map