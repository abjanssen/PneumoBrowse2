{"version":3,"file":"static/js/8526.03a1c2ed.chunk.js","mappings":"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","sources":["../../../plugins/wiggle/src/MultiLinearWiggleDisplay/components/WiggleDisplayComponent.tsx","../../../plugins/wiggle/src/MultiLinearWiggleDisplay/components/RectBg.tsx","../../../plugins/wiggle/src/MultiLinearWiggleDisplay/components/LegendItem.tsx","../../../plugins/wiggle/src/MultiLinearWiggleDisplay/components/LegendItemText.tsx","../../../plugins/wiggle/src/MultiLinearWiggleDisplay/components/ColorLegend.tsx","../../../plugins/wiggle/src/MultiLinearWiggleDisplay/components/FullHeightScaleBar.tsx","../../../plugins/wiggle/src/MultiLinearWiggleDisplay/components/ScoreLegend.tsx","../../../plugins/wiggle/src/MultiLinearWiggleDisplay/components/IndividualScaleBars.tsx","../../../plugins/wiggle/src/MultiLinearWiggleDisplay/components/YScaleBars.tsx","../../../plugins/wiggle/src/MultiLinearWiggleDisplay/components/util.ts"],"sourcesContent":["import { BaseLinearDisplayComponent } from '@jbrowse/plugin-linear-genome-view'\nimport { observer } from 'mobx-react'\n\nimport YScaleBars from './YScaleBars'\n\nimport type { WiggleDisplayModel } from '../model'\n\nconst MultiLinearWiggleDisplayComponent = observer(function (props: {\n  model: WiggleDisplayModel\n}) {\n  const { model } = props\n\n  return (\n    <div>\n      <BaseLinearDisplayComponent {...props} />\n      <YScaleBars model={model} />\n    </div>\n  )\n})\n\nexport default MultiLinearWiggleDisplayComponent\n","import { getFillProps } from '@jbrowse/core/util'\n\nconst RectBg = (props: {\n  x: number\n  y: number\n  width: number\n  height: number\n  color?: string\n}) => {\n  const { color = 'rgb(255,255,255,0.8)' } = props\n  return <rect {...props} {...getFillProps(color)} />\n}\n\nexport default RectBg\n","import RectBg from './RectBg'\n\nimport type { Source } from '../../util'\nimport type { WiggleDisplayModel } from '../model'\n\nconst LegendItem = function ({\n  source,\n  idx,\n  rowHeight,\n  labelWidth,\n  model,\n  exportSVG,\n}: {\n  source: Source\n  idx: number\n  rowHeight: number\n  labelWidth: number\n  model: WiggleDisplayModel\n  exportSVG?: boolean\n}) {\n  const boxHeight = Math.min(20, rowHeight)\n  const {\n    needsCustomLegend,\n    graphType,\n    needsFullHeightScalebar,\n    rowHeightTooSmallForScalebar,\n    renderColorBoxes,\n  } = model\n  const colorBoxWidth = renderColorBoxes ? 15 : 0\n  const legendWidth = labelWidth + colorBoxWidth + 5\n  const svgOffset = exportSVG ? 10 : 0\n  const extraOffset =\n    svgOffset || (graphType && !rowHeightTooSmallForScalebar ? 50 : 0)\n  return (\n    <>\n      {needsFullHeightScalebar ? null : (\n        <RectBg\n          y={idx * rowHeight + 1}\n          x={extraOffset}\n          width={legendWidth}\n          height={boxHeight}\n        />\n      )}\n      {source.color ? (\n        <RectBg\n          y={idx * rowHeight + 1}\n          x={extraOffset}\n          width={colorBoxWidth}\n          height={needsCustomLegend ? rowHeight : boxHeight}\n          color={source.color}\n        />\n      ) : null}\n    </>\n  )\n}\n\nexport default LegendItem\n","import type { Source } from '../../util'\nimport type { WiggleDisplayModel } from '../model'\n\nconst LegendItemText = function ({\n  source,\n  idx,\n  rowHeight,\n  model,\n  exportSVG,\n}: {\n  source: Source\n  idx: number\n  rowHeight: number\n  model: WiggleDisplayModel\n  exportSVG?: boolean\n}) {\n  const { graphType, rowHeightTooSmallForScalebar, renderColorBoxes } = model\n  const svgFontSize = Math.min(rowHeight, 12)\n  const canDisplayLabel = rowHeight >= 6\n  const colorBoxWidth = renderColorBoxes ? 15 : 0\n  const svgOffset = exportSVG ? 10 : 0\n  const extraOffset =\n    svgOffset || (graphType && !rowHeightTooSmallForScalebar ? 50 : 0)\n\n  return canDisplayLabel ? (\n    <text\n      y={idx * rowHeight + 13}\n      x={extraOffset + colorBoxWidth + 2}\n      fontSize={svgFontSize}\n    >\n      {source.name}\n    </text>\n  ) : null\n}\n\nexport default LegendItemText\n","import { observer } from 'mobx-react'\n\nimport LegendItem from './LegendItem'\nimport LegendItemText from './LegendItemText'\nimport RectBg from './RectBg'\n\nimport type { WiggleDisplayModel } from '../model'\n\nconst ColorLegend = observer(function ({\n  model,\n  rowHeight,\n  exportSVG,\n}: {\n  model: WiggleDisplayModel\n  rowHeight: number\n  exportSVG?: boolean\n}) {\n  const {\n    graphType,\n    needsFullHeightScalebar,\n    rowHeightTooSmallForScalebar,\n    renderColorBoxes,\n    sources,\n    labelWidth,\n  } = model\n  const colorBoxWidth = renderColorBoxes ? 15 : 0\n  const legendWidth = labelWidth + colorBoxWidth + 5\n  const svgOffset = exportSVG ? 10 : 0\n  const extraOffset =\n    svgOffset || (graphType && !rowHeightTooSmallForScalebar ? 50 : 0)\n\n  return sources ? (\n    <>\n      {\n        /* 0.25 for hanging letters like g */\n        needsFullHeightScalebar ? (\n          <RectBg\n            y={0}\n            x={extraOffset}\n            width={legendWidth}\n            height={(sources.length + 0.25) * rowHeight}\n          />\n        ) : null\n      }\n      {/* Render all background rectangles first */}\n      {sources.map((source, idx) => (\n        <LegendItem\n          key={`${source.name}-${idx}`}\n          source={source}\n          idx={idx}\n          model={model}\n          rowHeight={rowHeight}\n          exportSVG={exportSVG}\n          labelWidth={labelWidth}\n        />\n      ))}\n      {/* Then render all text elements on top */}\n      {sources.map((source, idx) => (\n        <LegendItemText\n          key={`${source.name}-text-${idx}`}\n          source={source}\n          idx={idx}\n          model={model}\n          rowHeight={rowHeight}\n          exportSVG={exportSVG}\n        />\n      ))}\n    </>\n  ) : null\n})\n\nexport default ColorLegend\n","import { getContainingView } from '@jbrowse/core/util'\nimport { observer } from 'mobx-react'\n\nimport ColorLegend from './ColorLegend'\nimport { getOffset } from './util'\nimport YScaleBar from '../../shared/YScaleBar'\n\nimport type { WiggleDisplayModel } from '../model'\nimport type { LinearGenomeViewModel } from '@jbrowse/plugin-linear-genome-view'\n\nconst FullHeightScaleBar = observer(function ({\n  model,\n  orientation,\n  exportSVG,\n}: {\n  model: WiggleDisplayModel\n  orientation?: string\n  exportSVG?: boolean\n}) {\n  const { labelWidth } = model\n  const { width: viewWidth } = getContainingView(model) as LinearGenomeViewModel\n  return (\n    <>\n      <g transform={`translate(${!exportSVG ? getOffset(model) : 0},0)`}>\n        <YScaleBar model={model} orientation={orientation} />\n      </g>\n      <g transform={`translate(${viewWidth - labelWidth - 100},0)`}>\n        <ColorLegend exportSVG={exportSVG} model={model} rowHeight={12} />\n      </g>\n    </>\n  )\n})\n\nexport default FullHeightScaleBar\n","import { getContainingView, measureText } from '@jbrowse/core/util'\nimport { observer } from 'mobx-react'\n\nimport RectBg from './RectBg'\n\nimport type { WiggleDisplayModel } from '../model'\nimport type { LinearGenomeViewModel } from '@jbrowse/plugin-linear-genome-view'\n\ntype LGV = LinearGenomeViewModel\n\nconst ScoreLegend = observer(({ model }: { model: WiggleDisplayModel }) => {\n  const { ticks, scaleType } = model\n  const { width } = getContainingView(model) as LGV\n  const legend = `[${ticks?.values[0]}-${ticks?.values[1]}]${scaleType === 'log' ? ' (log scale)' : ''}`\n  const len = measureText(legend, 14)\n  const padding = 25\n  const xpos = width - len - padding\n  return (\n    <>\n      <RectBg y={0} x={xpos} width={len + 6} height={16} />\n      <text y={13} x={xpos}>\n        {legend}\n      </text>\n    </>\n  )\n})\n\nexport default ScoreLegend\n","import { observer } from 'mobx-react'\n\nimport ColorLegend from './ColorLegend'\nimport ScoreLegend from './ScoreLegend'\nimport YScaleBar from '../../shared/YScaleBar'\n\nimport type { WiggleDisplayModel } from '../model'\n\nconst IndividualScaleBars = observer(function ({\n  model,\n  orientation,\n  exportSVG,\n}: {\n  model: WiggleDisplayModel\n  orientation?: string\n  exportSVG?: boolean\n}) {\n  const {\n    sources,\n    rowHeight,\n    rowHeightTooSmallForScalebar,\n    needsCustomLegend,\n    ticks,\n  } = model\n\n  return sources?.length ? (\n    <>\n      <ColorLegend\n        exportSVG={exportSVG}\n        model={model}\n        rowHeight={model.rowHeight}\n      />\n\n      {rowHeightTooSmallForScalebar || needsCustomLegend ? (\n        <ScoreLegend model={model} />\n      ) : (\n        sources.map((_source, idx) => (\n          <g\n            transform={`translate(0 ${rowHeight * idx})`}\n            key={`${JSON.stringify(ticks)}-${idx}`}\n          >\n            <YScaleBar model={model} orientation={orientation} />\n          </g>\n        ))\n      )}\n    </>\n  ) : null\n})\n\nexport default IndividualScaleBars\n","import { getContainingView } from '@jbrowse/core/util'\nimport { observer } from 'mobx-react'\n\nimport FullHeightScaleBar from './FullHeightScaleBar'\nimport IndividualScaleBars from './IndividualScaleBars'\n\nimport type { WiggleDisplayModel } from '../model'\n\nconst Wrapper = observer(function ({\n  children,\n  model,\n  exportSVG,\n}: {\n  model: WiggleDisplayModel\n  children: React.ReactNode\n  exportSVG?: boolean\n}) {\n  const { height } = model\n  return exportSVG ? (\n    children\n  ) : (\n    <svg\n      style={{\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        pointerEvents: 'none',\n        height,\n        width: getContainingView(model).width,\n      }}\n    >\n      {children}\n    </svg>\n  )\n})\n\nexport const YScaleBars = observer(function (props: {\n  model: WiggleDisplayModel\n  orientation?: string\n  exportSVG?: boolean\n}) {\n  const { model, orientation, exportSVG } = props\n  const { showSidebar, stats, needsFullHeightScalebar, sources } = model\n  return stats && sources ? (\n    <Wrapper {...props}>\n      {showSidebar ? (\n        needsFullHeightScalebar ? (\n          <FullHeightScaleBar\n            model={model}\n            orientation={orientation}\n            exportSVG={exportSVG}\n          />\n        ) : (\n          <IndividualScaleBars\n            model={model}\n            orientation={orientation}\n            exportSVG={exportSVG}\n          />\n        )\n      ) : null}\n    </Wrapper>\n  ) : null\n})\n\nexport default YScaleBars\n","import { getConf } from '@jbrowse/core/configuration'\nimport {\n  getContainingTrack,\n  getContainingView,\n  measureText,\n} from '@jbrowse/core/util'\n\nimport type { WiggleDisplayModel } from '../model'\nimport type { LinearGenomeViewModel } from '@jbrowse/plugin-linear-genome-view'\nimport type { GridRowId } from '@mui/x-data-grid'\n\nexport function moveUp<T extends { name: string }>(\n  arr: T[],\n  sel: GridRowId[],\n  by = 1,\n) {\n  const idxs = sel\n    .map(l => arr.findIndex(v => v.name === l))\n    .sort((a, b) => a - b)\n  let lastIdx = 0\n  for (const old of idxs) {\n    const idx = Math.max(lastIdx, old - by)\n    if (idx >= lastIdx) {\n      arr.splice(idx, 0, arr.splice(old, 1)[0]!)\n    }\n    lastIdx = lastIdx + 1\n  }\n\n  return arr\n}\n\nexport function moveDown<T extends { name: string }>(\n  arr: T[],\n  sel: GridRowId[],\n  by = 1,\n) {\n  const idxs = sel\n    .map(l => arr.findIndex(v => v.name === l))\n    .sort((a, b) => b - a)\n  let lastIdx = arr.length - 1\n  for (const old of idxs) {\n    const idx = Math.min(lastIdx, old + by)\n    if (idx <= lastIdx) {\n      arr.splice(idx, 0, arr.splice(old, 1)[0]!)\n    }\n    lastIdx = lastIdx - 1\n  }\n\n  return arr\n}\n\nconst trackLabelFontSize = 12.8\n\nexport function getOffset(model: WiggleDisplayModel) {\n  const { prefersOffset } = model\n  const { trackLabels } = getContainingView(model) as LinearGenomeViewModel\n  const track = getContainingTrack(model)\n  const trackName = getConf(track, 'name')\n  return trackLabels === 'overlapping' && !prefersOffset\n    ? measureText(trackName, trackLabelFontSize) + 100\n    : 10\n}\n"],"names":["observer","props","model","_jsxs","children","_jsx","BaseLinearDisplayComponent","YScaleBars","$","_c","color","t0","undefined","t1","t2","getFillProps","source","idx","rowHeight","labelWidth","exportSVG","boxHeight","Math","min","needsCustomLegend","graphType","needsFullHeightScalebar","rowHeightTooSmallForScalebar","renderColorBoxes","colorBoxWidth","legendWidth","extraOffset","t3","RectBg","y","height","_Fragment","svgFontSize","canDisplayLabel","x","name","sources","width","length","map","LegendItem","LegendItemText","orientation","viewWidth","getContainingView","transform","getOffset","YScaleBar","ColorLegend","ticks","scaleType","legend","values","len","measureText","xpos","ScoreLegend","_source","JSON","stringify","Wrapper","style","position","top","left","pointerEvents","showSidebar","stats","FullHeightScaleBar","IndividualScaleBars","moveUp","arr","sel","by","idxs","l","findIndex","v","sort","a","b","lastIdx","old","max","splice","moveDown","trackLabelFontSize","prefersOffset","trackLabels","track","getContainingTrack","trackName","getConf"],"sourceRoot":""}