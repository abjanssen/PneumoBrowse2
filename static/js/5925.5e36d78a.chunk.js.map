{"version":3,"file":"static/js/5925.5e36d78a.chunk.js","mappings":"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","sources":["../../../plugins/variants/src/shared/components/AddFiltersDialog.tsx"],"sourcesContent":["import { useMemo, useState } from 'react'\n\nimport { Dialog } from '@jbrowse/core/ui'\nimport { stringToJexlExpression } from '@jbrowse/core/util/jexlStrings'\nimport { makeStyles } from '@jbrowse/core/util/tss-react'\nimport { Button, DialogActions, DialogContent, TextField } from '@mui/material'\n\nconst useStyles = makeStyles()({\n  dialogContent: {\n    width: '80em',\n  },\n  textAreaFont: {\n    fontFamily: 'Courier New',\n  },\n  error: {\n    color: 'red',\n    fontSize: '0.8em',\n  },\n})\n\nfunction validateJexl(data: string) {\n  try {\n    for (const line of data\n      .split('\\n')\n      .map(l => l.trim())\n      .filter(Boolean)) {\n      stringToJexlExpression(line)\n    }\n    return undefined\n  } catch (e) {\n    console.error(e)\n    return e\n  }\n}\n\nexport default function AddFiltersDialog({\n  model,\n  handleClose,\n}: {\n  model: {\n    jexlFilters?: string[]\n    activeFilters: string[]\n    setJexlFilters: (arg?: string[]) => void\n  }\n  handleClose: () => void\n}) {\n  const { classes } = useStyles()\n  const { activeFilters } = model\n  const [data, setData] = useState(activeFilters.join('\\n'))\n  const error = useMemo(() => validateJexl(data), [data])\n\n  return (\n    <Dialog maxWidth=\"xl\" open onClose={handleClose} title=\"Add track filters\">\n      <DialogContent>\n        <div>\n          Add filters, in jexl format, one per line, starting with the string\n          jexl:. Examples:{' '}\n          <ul>\n            <li>\n              <code>jexl:get(feature,'name')=='BRCA1'</code> - show only feature\n              where the name attribute is BRCA1\n            </li>\n            <li>\n              <code>jexl:get(feature,'type')=='gene'</code> - show only gene\n              type features in a GFF that has many other feature types\n            </li>\n            <li>\n              <code>jexl:get(feature,'score') &gt; 400</code> - show only\n              features that have a score greater than 400\n            </li>\n            <li>\n              <code>\n                jexl:get(feature,'end') - get(feature,'start') &lt; 1000000\n              </code>{' '}\n              - show only features with length less than 1Mbp\n            </li>\n          </ul>\n        </div>\n\n        {error ? <p className={classes.error}>{`${error}`}</p> : null}\n        <TextField\n          variant=\"outlined\"\n          multiline\n          minRows={5}\n          maxRows={10}\n          className={classes.dialogContent}\n          fullWidth\n          value={data}\n          onChange={event => {\n            setData(event.target.value)\n          }}\n          slotProps={{\n            input: {\n              classes: {\n                input: classes.textAreaFont,\n              },\n            },\n          }}\n        />\n      </DialogContent>\n      <DialogActions>\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          type=\"submit\"\n          autoFocus\n          disabled={!!error}\n          onClick={() => {\n            model.setJexlFilters(data.split('\\n'))\n            handleClose()\n          }}\n        >\n          Submit\n        </Button>\n        <Button variant=\"contained\" color=\"secondary\" onClick={handleClose}>\n          Cancel\n        </Button>\n      </DialogActions>\n    </Dialog>\n  )\n}\n"],"names":["useStyles","makeStyles","dialogContent","width","textAreaFont","fontFamily","error","color","fontSize","AddFiltersDialog","t0","$","_c","model","handleClose","classes","activeFilters","t1","join","data","setData","useState","t2","line","split","map","l","trim","filter","Boolean","stringToJexlExpression","e","console","validateJexl","t3","t4","t5","t6","t7","t8","Symbol","for","_jsxs","children","_jsx","className","event","target","value","input","TextField","variant","multiline","minRows","maxRows","fullWidth","onChange","slotProps","DialogContent","t9","t10","t11","t12","t13","t14","setJexlFilters","Button","type","autoFocus","disabled","onClick","DialogActions","Dialog","maxWidth","open","title"],"ignoreList":[],"sourceRoot":""}