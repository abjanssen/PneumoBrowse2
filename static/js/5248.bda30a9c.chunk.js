"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[5248],{45248(t,a,e){e.d(a,{default:()=>p});var s=e(48455),r=e(24644),i=e(12644),n=e(77251),o=e(53155),c=e(86618),u=e(9768),l=e(92160);function g(t){const a=t.slice(t.lastIndexOf("/")+1);return a.slice(0,a.lastIndexOf("."))}class p extends s.L{static capabilities=["hasResolution","hasLocalStats","hasGlobalStats"];async getAdapters(){return this.adaptersP||(this.adaptersP=this.getAdaptersImpl()),this.adaptersP}async getAdaptersImpl(){const t=this.getSubAdapter;if(!t)throw new Error("no getSubAdapter available");let a=this.getConf("subadapters");return a?.length||(a=this.getConf("bigWigs").map(t=>({type:"BigWigAdapter",source:g(t),bigWigLocation:{uri:t}}))),Promise.all(a.map(async a=>{const e=(await t(a)).dataAdapter,s=a.source||a.name||function(t){try{if("BigWigAdapter"===t.type&&t.bigWigLocation){const a=t.bigWigLocation;if("uri"in a&&a.uri)return g(a.uri);if("localPath"in a&&a.localPath)return g(a.localPath);if("blob"in a&&a.blob){const t=a.blob;return t.name?g(t.name):void 0}}return}catch(t){return}}(a)||e.id;return{...a,dataAdapter:e,source:s}}))}async getRefNames(t){const a=await this.getAdapters(),e=await Promise.all(a.map(a=>a.dataAdapter.getRefNames(t)));return[...new Set(e.flat())]}async getGlobalStats(t){const a=await this.getAdapters(),e=(await Promise.all(a.map(a=>a.dataAdapter.getGlobalStats?.(t)))).filter(t=>!!t);return{scoreMin:(0,n.min)(e.map(t=>t.scoreMin)),scoreMax:(0,n.max)(e.map(t=>t.scoreMax))}}getFeatures(t,a={}){return(0,c.ObservableCreate)(async e=>{const s=await this.getAdapters();(0,u.h)(...s.map(e=>{const{source:s,dataAdapter:r}=e;return r.getFeatures(t,a).pipe((0,l.T)(t=>{if(t.get("source"))return t;const a=t.toJSON();return a.uniqueId=`${s}-${t.id()}`,a.source=s,new o.A(a)}))})).subscribe(e)},a.stopToken)}async getRegionQuantitativeStats(t,a){const e=await this.getAdapters(),s=await Promise.all(e.map(async e=>{const{dataAdapter:s}=e;return s.getRegionQuantitativeStats(t,a)}));return(0,r.iz)(s.filter(Boolean))}async getMultiRegionFeatureDensityStats(t){return{featureDensity:0}}async getMultiRegionQuantitativeStats(t=[],a={}){if(!t.length)return(0,i.Yv)();const e=await this.getAdapters(),s=await Promise.all(e.map(async e=>{const{dataAdapter:s}=e;return s.getMultiRegionQuantitativeStats(t,a)}));return(0,r.iz)(s.filter(Boolean))}async getSources(t){return(await this.getAdapters()).map(({type:t,bigWigLocation:a,dataAdapter:e,...s})=>({...s,name:s.source}))}}}}]);
//# sourceMappingURL=5248.bda30a9c.chunk.js.map