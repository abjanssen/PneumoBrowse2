{"version":3,"file":"static/js/489.08fc36f2.chunk.js","mappings":"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","sources":["../../../plugins/alignments/src/LinearSNPCoverageDisplay/components/Tooltip.tsx"],"sourcesContent":["import { forwardRef } from 'react'\n\nimport { toLocale } from '@jbrowse/core/util'\nimport { Tooltip } from '@jbrowse/plugin-wiggle'\nimport { observer } from 'mobx-react'\nimport { makeStyles } from 'tss-react/mui'\n\nimport type { BaseCoverageBin } from '../../shared/types'\nimport type { Feature } from '@jbrowse/core/util'\n\nconst useStyles = makeStyles()(() => ({\n  td: {\n    whiteSpace: 'nowrap',\n  },\n}))\n\nconst toP = (s = 0) => +(+s).toFixed(1)\n\nconst pct = (n: number, total = 1) => `${toP((n / (total || 1)) * 100)}%`\n\ninterface Props {\n  feature: Feature\n  model: { visibleModifications: Map<string, { color: string }> }\n}\n\nconst TooltipContents = forwardRef<HTMLDivElement, Props>(\n  function TooltipContents2(props, reactRef) {\n    const { feature, model } = props\n    const { classes } = useStyles()\n    const start = feature.get('start') + 1\n    const end = feature.get('end')\n    const name = feature.get('refName')\n    const { refbase, readsCounted, depth, ref, ...info } = feature.get(\n      'snpinfo',\n    ) as BaseCoverageBin\n    const loc = [\n      name,\n      start === end ? toLocale(start) : `${toLocale(start)}..${toLocale(end)}`,\n    ]\n      .filter(f => !!f)\n      .join(':')\n\n    return (\n      <div ref={reactRef}>\n        <table>\n          <caption>{loc}</caption>\n          <thead>\n            <tr>\n              <th />\n              <th>Base</th>\n              <th>Count</th>\n              <th>% of Total</th>\n              <th>Strands</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <td />\n              <td>Total</td>\n              <td>{readsCounted}</td>\n              <td> </td>\n              <td> </td>\n            </tr>\n            <tr>\n              <td />\n              <td>REF {refbase ? `(${refbase.toUpperCase()})` : ''}</td>\n              <td>{ref.entryDepth}</td>\n              <td>{pct(ref.entryDepth, readsCounted)}</td>\n              <td>\n                {ref['-1'] ? `${ref['-1']}(-)` : ''}\n                {ref['1'] ? `${ref['1']}(+)` : ''}\n              </td>\n            </tr>\n\n            {Object.entries(info).map(([key, entry]) =>\n              Object.entries(entry).map(([base, score]) => (\n                <tr key={`${key}_${base}`}>\n                  <td>\n                    <ColorSquare model={model} base={base} />\n                  </td>\n                  <td>{base.toUpperCase()} </td>\n                  <td className={classes.td}>\n                    {[\n                      score.entryDepth,\n                      score.avgProbability !== undefined\n                        ? `(avg. ${pct(score.avgProbability)} prob.)`\n                        : '',\n                    ]\n                      .filter(f => !!f)\n                      .join(' ')}\n                  </td>\n\n                  <td>\n                    {base === 'depth' || base === 'skip'\n                      ? '---'\n                      : pct(score.entryDepth, readsCounted)}\n                  </td>\n                  <td>\n                    {score['-1'] ? `${score['-1']}(-)` : ''}\n                    {score['1'] ? `${score['1']}(+)` : ''}\n                  </td>\n                </tr>\n              )),\n            )}\n          </tbody>\n        </table>\n      </div>\n    )\n  },\n)\n\nfunction ColorSquare({\n  base,\n  model,\n}: {\n  base: string\n  model: { visibleModifications: Map<string, { color: string }> }\n}) {\n  const { visibleModifications } = model\n  return base.startsWith('mod_') ? (\n    <div\n      style={{\n        width: 10,\n        height: 10,\n        background: visibleModifications.get(base.replace('mod_', ''))?.color,\n      }}\n    />\n  ) : null\n}\n\ntype Coord = [number, number]\n\nconst SNPCoverageTooltip = observer(function (props: {\n  model: {\n    featureUnderMouse?: Feature\n  }\n  height: number\n  offsetMouseCoord: Coord\n  clientMouseCoord: Coord\n  clientRect?: DOMRect\n}) {\n  const { model } = props\n  const { featureUnderMouse: feat } = model\n  return feat && feat.get('type') === 'skip' ? null : (\n    <Tooltip TooltipContents={TooltipContents} {...props} />\n  )\n})\n\nexport default SNPCoverageTooltip\n"],"names":["useStyles","makeStyles","td","whiteSpace","pct","n","total","toP","s","toFixed","TooltipContents","forwardRef","props","reactRef","feature","model","classes","start","get","end","name","refbase","readsCounted","depth","ref","info","loc","toLocale","filter","f","join","_jsx","children","_jsxs","toUpperCase","entryDepth","Object","entries","map","key","entry","base","score","ColorSquare","className","undefined","avgProbability","visibleModifications","startsWith","style","width","height","background","replace","color","observer","featureUnderMouse","feat","Tooltip"],"sourceRoot":""}