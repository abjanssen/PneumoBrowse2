"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[9088],{49088:(e,a,c)=>{c.d(a,{makeImageData:()=>M});var n=c(68584),d=c(3496),t=c(87485),r=c(37347),b=c(20095),o=c(20314),f=c(61300),i=c(90493),u=c(6219),l=c(45824),s=c(35873);function g(){var e,a,c,n,d,t=0,r=1,b=i.D_,u=!1;function l(a){return null==a||isNaN(a=+a)?d:b(0===c?.5:(a=(n(a)-e)*c,u?Math.max(0,Math.min(1,a)):a))}function s(e){return function(a){var c,n;return arguments.length?([c,n]=a,b=e(c,n),l):[b(0),b(1)]}}return l.domain=function(d){return arguments.length?([t,r]=d,e=n(t=+t),a=n(r=+r),c=e===a?0:1/(a-e),l):[t,r]},l.clamp=function(e){return arguments.length?(u=!!e,l):u},l.interpolator=function(e){return arguments.length?(b=e,l):b},l.range=s(o.A),l.rangeRound=s(f.A),l.unknown=function(e){return arguments.length?(d=e,l):d},function(d){return n=d,e=d(t),a=d(r),c=e===a?0:1/(a-e),l}}function h(e,a){return a.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function m(){var e=(0,l.C)(g()(i.D_));return e.copy=function(){return h(e,m())},u.K.apply(e,arguments)}function p(){var e=(0,s.g)(g()).domain([1,10]);return e.copy=function(){return h(e,p()).base(e.base())},u.K.apply(e,arguments)}const w=function(e){const a=e.length;return function(c){return e[Math.max(0,Math.min(a-1,Math.floor(c*a)))]}}(function(e){const a=new Array(256);let c=0;for(;c<256;)a[c]=`#${e.slice(6*c,6*++c)}`;return a}("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));async function M(e,a){const{features:c,config:o,bpPerPx:f,stopToken:i,resolution:u,sessionId:l,adapterConfig:s,useLogScale:g,colorScheme:h,regions:M,pluginManager:k,yScalar:x}=a,{statusCallback:C=()=>{}}=a;C("Drawing Hi-C matrix");const S=M[0],{dataAdapter:v}=await(0,d.cK)(k,l,s),y=await v.getResolution(f/u),j=(S.end-S.start)/f,_=y/(f*Math.sqrt(2)),A=(0,t.M)((0,n.readConfObject)(o,"baseColor")),D=Math.floor(S.start/y);if(c.length){let a=0,d=0,t=0;(0,r.SW)(i);for(const{bin1:e,bin2:n,counts:r}of c)a=Math.max(r,a),d=Math.min(Math.min(e,n),d),t=Math.max(Math.max(e,n),t);(0,r.SW)(i);const f={juicebox:["rgba(0,0,0,0)","red"],fall:(0,b.Ik)(["rgb(255, 255, 255)","rgb(255, 255, 204)","rgb(255, 237, 160)","rgb(254, 217, 118)","rgb(254, 178, 76)","rgb(253, 141, 60)","rgb(252, 78, 42)","rgb(227, 26, 28)","rgb(189, 0, 38)","rgb(128, 0, 38)","rgb(0, 0, 0)"]),viridis:w},u=g?a:a/20,l=f[h]||f.juicebox,s=g?p(l).domain([1,u]):m(l).domain([0,u]);x&&e.scale(1,x),e.save(),!0===S.reversed&&(e.scale(-1,1),e.translate(-j,0)),e.rotate(-Math.PI/4);let M=performance.now();for(const{bin1:d,bin2:t,counts:b}of c)e.fillStyle=(0,n.readConfObject)(o,"color",{count:b,maxScore:a,baseColor:A,scale:s,useLogScale:g}),e.fillRect((d-D)*_,(t-D)*_,_,_),performance.now()-M>400&&((0,r.SW)(i),M=performance.now());e.restore()}}}}]);
//# sourceMappingURL=9088.821d4743.chunk.js.map