"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[8408],{19669:(e,t,n)=>{n.d(t,{A:()=>x});var l=n(67112),o=n(99546),s=n(90863),a=n(37962),i=n(69092),r=n(68446),d=n(75785),u=n(69500);const c=(0,d.n9)()(e=>({loading:{backgroundColor:e.palette.background.default,backgroundImage:`repeating-linear-gradient(45deg, transparent, transparent 5px, ${e.palette.action.disabledBackground} 5px, ${e.palette.action.disabledBackground} 10px)`,position:"absolute",bottom:0,height:50,width:300,right:0,pointerEvents:"none",textAlign:"center"}})),h=(0,r.observer)(function({model:e}){const{error:t}=e;return(0,u.jsx)(s.LW,{message:`${t}`,severity:"error",action:(0,u.jsx)(a.A,{title:"Reload",children:(0,u.jsx)(i.A,{"data-testid":"reload_button",onClick:()=>{e.reload()},children:"Reload"})})})}),g=(0,r.observer)(function({model:e,children:t}){const{error:n,regionTooLarge:l}=e;return n?(0,u.jsx)(h,{model:e}):l?e.regionCannotBeRendered():(0,u.jsx)(b,{model:e,children:t})}),b=(0,r.observer)(function({model:e,children:t}){const{drawn:n,loading:l}=e,s=(0,o.getContainingView)(e),a=(e.lastDrawnOffsetPx||0)-s.offsetPx;return(0,u.jsxs)("div",{"data-testid":`drawn-${n}`,children:[(0,u.jsx)("div",{style:{position:"absolute",left:a},children:t}),0!==a||l?(0,u.jsx)(f,{model:e}):null]})}),f=(0,r.observer)(function({model:e}){const{classes:t}=c(),{message:n}=e;return(0,u.jsx)("div",{className:t.loading,children:(0,u.jsx)(l.LoadingEllipses,{message:n})})}),x=g},48408:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var l=n(7552),o=n(9236),s=n(99546),a=n(65944),i=n(68446),r=n(19669),d=n(69500);const u=(0,i.observer)(function({model:e}){const t=(0,s.getContainingView)(e),n=Math.round(t.dynamicBlocks.totalWidthPx),i=e.drawCloud?e.height:e.layoutHeight,r=(0,l.useRef)(null),[u,c]=(0,l.useState)(null),[h,g]=(0,l.useState)(null),[b,f]=(0,l.useState)(null),x=(0,l.useMemo)(()=>e.featureLayout?a.A.from(e.featureLayout.data):null,[e.featureLayout]),v=(0,l.useCallback)(t=>{e.setRef(t)},[e,n,i]),p=(0,l.useCallback)(t=>{e.setMouseoverRef(t)},[e,n,i]),m=(0,l.useCallback)(t=>{if(!r.current||!x)return c(null),g(null),void f(null);const n=r.current.getBoundingClientRect(),l=t.clientX-n.left,o=t.clientY-n.top;f({x:t.clientX,y:t.clientY});const s=x.search(l,o,l+1,o+1);if(s.length>0){const t=s[0],n=e.featuresForFlatbush[t];n?(c({x:n.chainMinX,y:n.y1,width:n.chainMaxX-n.chainMinX,height:n.y2-n.y1}),g(n.data)):(c(null),g(null))}else c(null),g(null)},[x,e.featuresForFlatbush]),j=(0,l.useCallback)(()=>{c(null),g(null),f(null)},[]),w=(0,l.useCallback)(t=>{if(!r.current||!x)return;const n=r.current.getBoundingClientRect(),l=t.clientX-n.left,o=t.clientY-n.top,s=x.search(l,o,l+1,o+1);if(s.length>0){const t=s[0],n=e.featuresForFlatbush[t];n&&e.selectFeature(n.chain)}},[x,e]);return(0,d.jsxs)("div",{ref:r,style:{position:"relative",width:n,height:i},onMouseMove:m,onMouseLeave:j,onClick:w,children:[(0,d.jsx)("canvas",{"data-testid":e.drawCloud?"cloud-canvas":"stack-canvas",ref:v,style:{width:n,height:i,position:"absolute",left:0,top:0},width:2*n,height:2*i}),(0,d.jsx)("canvas",{"data-testid":"cloud-mouseover-canvas",ref:p,style:{width:n,height:i,position:"absolute",left:0,top:0,pointerEvents:"none"},width:2*n,height:2*i}),u?(0,d.jsx)("div",{style:{position:"absolute",left:u.x,top:u.y,width:u.width,height:u.height,backgroundColor:"rgba(0, 0, 0, 0.2)",pointerEvents:"none"}}):null,h&&b?(0,d.jsx)(o.A,{clientPoint:{x:b.x,y:b.y+20},placement:"bottom-start",children:(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{children:(0,d.jsx)("strong",{children:h.name})}),(0,d.jsxs)("div",{children:[h.refName,":",h.start.toLocaleString(),"-",h.end.toLocaleString()]}),0!==h.tlen?(0,d.jsxs)("div",{children:["Template length: ",h.tlen]}):null]})}):null]})}),c=(0,i.observer)(function({model:e}){return(0,d.jsx)(r.A,{model:e,children:(0,d.jsx)(u,{model:e})})})}}]);
//# sourceMappingURL=8408.5f6e1021.chunk.js.map