"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[4539,5243],{14539:(e,t,r)=>{r.r(t),r.d(t,{default:()=>T});var a=r(7552),n=r(68446),o=r(49823),i=r(99546),l=r(75785),s=r(83803),c=r(61723),d=r(8463),m=r(95936),u=r(50253),g=r(18355),p=r(43962),h=r(25746),f=r(45374),v=r(32306),b=r(64359),x=r(90542),k=r(15243);const y=(0,l.n9)()((e=>({controls:{position:"absolute",borderRight:`1px solid ${e.palette.divider}`,borderBottom:`1px solid ${e.palette.divider}`,left:0,top:0}}))),A=(0,n.observer)((function({model:e}){const{classes:t}=y(),[r,n]=(0,a.useState)(null);return a.createElement("div",{className:t.controls},a.createElement(c.A,{onClick:e.zoomOutButton,title:e.lockedFitToWindow?"unlock to zoom out":"zoom out",disabled:e.atMaxBpPerPx||e.lockedFitToWindow},a.createElement(m.A,null)),a.createElement(c.A,{onClick:e.zoomInButton,disabled:e.atMinBpPerPx,title:"zoom in"},a.createElement(u.A,null)),a.createElement(c.A,{onClick:e.rotateCounterClockwiseButton,title:"rotate counter-clockwise"},a.createElement(g.A,null)),a.createElement(c.A,{onClick:e.rotateClockwiseButton,title:"rotate clockwise"},a.createElement(p.A,null)),a.createElement(c.A,{onClick:e.toggleFitToWindowLock,title:e.lockedFitToWindow?"locked model to window size":"unlocked model to zoom further",disabled:e.tooSmallToLock},e.lockedFitToWindow?a.createElement(f.A,null):a.createElement(h.A,null)),a.createElement(c.A,{onClick:e=>{n(e.currentTarget)}},a.createElement(b.A,null)),e.hideTrackSelectorButton?null:a.createElement(c.A,{onClick:e.activateTrackSelector,title:"Open track selector","data-testid":"circular_track_select"},a.createElement(x.xU,null)),r?a.createElement(d.A,{anchorEl:r,menuItems:[{label:"Export SVG",icon:v.A,onClick:()=>{(0,i.getSession)(e).queueDialog((t=>[k.default,{model:e,handleClose:t}]))}}],onMenuItemClick:(e,t)=>{t(),n(null)},open:Boolean(r),onClose:()=>{n(null)}}):null)}));var E=r(75653),S=r(67314),C=r(5401);const w=(0,l.n9)()((e=>({importFormContainer:{padding:e.spacing(6)}}))),M=(0,n.observer)((function({model:e}){const{classes:t}=w(),r=(0,i.getSession)(e),{error:n}=e,{assemblyNames:l,assemblyManager:s}=r,[c,d]=(0,a.useState)(l[0]),m=s.get(c),u=l.length?m?.error:"No configured assemblies",g=m?.regions||[],p=u||n;return a.createElement(E.A,{className:t.importFormContainer},p?a.createElement(S.Ay,{container:!0,spacing:1,justifyContent:"center",alignItems:"center"},a.createElement(S.Ay,{item:!0},a.createElement(o.ErrorMessage,{error:p}))):null,a.createElement(S.Ay,{container:!0,spacing:1,justifyContent:"center",alignItems:"center"},a.createElement(S.Ay,{item:!0},a.createElement(o.AssemblySelector,{onChange:t=>{e.setError(void 0),d(t)},session:r,selected:c})),a.createElement(S.Ay,{item:!0},a.createElement(C.A,{disabled:!g.length,onClick:()=>{e.setError(void 0),e.setDisplayedRegions(g)},variant:"contained",color:"primary"},g.length||p?"Open":"Loading..."))))})),R=(0,l.n9)()((e=>({root:{position:"relative",marginBottom:e.spacing(1),overflow:"hidden"},scroller:{overflow:"auto"}}))),W=(0,n.observer)((({model:e})=>a.createElement(a.Fragment,null,e.staticSlices.map((t=>a.createElement(s.A,{key:(0,i.assembleLocString)(t.region.elided?t.region.regions[0]:t.region),model:e,slice:t}))),e.tracks.map((t=>{const r=t.displays[0];return a.createElement(r.RenderingComponent,{key:r.id,display:r,view:e})}))))),$=(0,n.observer)((({model:e})=>{const t=!!e.displayedRegions.length&&!!e.figureWidth&&!!e.figureHeight&&e.initialized,r=!t&&!e.disableImportForm,n=t&&!r;return r||e.error?a.createElement(M,{model:e}):n?a.createElement(P,{model:e}):null})),P=(0,n.observer)((function({model:e}){const{width:t,height:r,id:n,offsetRadians:i,centerXY:l,figureWidth:s,figureHeight:c,hideVerticalResizeHandle:d}=e,{classes:m}=R();return a.createElement("div",{className:m.root,style:{width:t,height:r},"data-testid":n},a.createElement("div",{className:m.scroller,style:{width:t,height:r}},a.createElement("svg",{style:{transform:`rotate(${i}rad)`,transition:"transform 0.5s",transformOrigin:l.map((e=>`${e}px`)).join(" "),position:"absolute",left:0,top:0},width:s,height:c},a.createElement("g",{transform:`translate(${l})`},a.createElement(W,{model:e})))),a.createElement(A,{model:e}),d?null:a.createElement(o.ResizeHandle,{onDrag:e.resizeHeight,style:{height:3,position:"absolute",bottom:0,left:0,background:"#ccc",boxSizing:"border-box",borderTop:"1px solid #fafafa"}}))})),T=$},15243:(e,t,r)=>{r.r(t),r.d(t,{default:()=>b});var a=r(7552),n=r(59705),o=r(36715),i=r(1343),l=r(29499),s=r(29629),c=r(33371),d=r(32808),m=r(58507),u=r(5401),g=r(49823),p=r(99546);function h(){return a.createElement("div",null,a.createElement(n.A,{size:20,style:{marginRight:20}}),a.createElement(o.A,{display:"inline"},"Creating SVG"))}function f({children:e,...t}){return a.createElement("div",null,a.createElement(i.A,t,e))}function v(e,t){return(0,p.useLocalStorage)(`svg-${e}`,t)}function b({model:e,handleClose:t}){const r=(0,p.getSession)(e),n="undefined"!=typeof OffscreenCanvas,[i,b]=(0,a.useState)(n),[x,k]=(0,a.useState)(!1),[y,A]=(0,a.useState)(),[E,S]=v("file","jbrowse.svg"),[C,w]=v("theme",r.themeName||"default");return a.createElement(g.Dialog,{open:!0,onClose:t,title:"Export SVG"},a.createElement(l.A,null,y?a.createElement(g.ErrorMessage,{error:y}):x?a.createElement(h,null):null,a.createElement(f,{helperText:"filename",value:E,onChange:e=>{S(e.target.value)}}),r.allThemes?a.createElement(f,{select:!0,label:"Theme",value:C,onChange:e=>{w(e.target.value)}},Object.entries(r.allThemes()).map((([e,t])=>a.createElement(s.A,{key:e,value:e},t.name||"(Unknown name)")))):null,n?a.createElement(c.A,{control:a.createElement(d.A,{checked:i,onChange:()=>{b((e=>!e))}}),label:"Rasterize canvas based tracks? File may be much larger if this is turned off"}):a.createElement(o.A,null,"Note: rasterizing layers not yet supported in this browser, so SVG size may be large")),a.createElement(m.A,null,a.createElement(u.A,{variant:"contained",color:"secondary",onClick:()=>{t()}},"Cancel"),a.createElement(u.A,{variant:"contained",color:"primary",type:"submit",onClick:async()=>{k(!0),A(void 0);try{await e.exportSvg({rasterizeLayers:i,filename:E,themeName:C}),t()}catch(e){console.error(e),A(e)}finally{k(!1)}}},"Submit")))}},83803:(e,t,r)=>{r.d(t,{A:()=>p});var a=r(7552),n=r(68446),o=r(99546),i=r(80208),l=r(48231);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},s.apply(null,arguments)}const c=(0,r(75785).n9)()({rulerLabel:{fontSize:"0.8rem",fontWeight:500,lineHeight:1.6,letterSpacing:"0.0075em"}});function d(e,t,r,a){e.flipped&&([r,a]=[a,r]);const n=e.bpToXY(r,t),o=e.bpToXY(a,t);return["M",...n,"A",t,t,"0",Math.abs(a-r)/e.bpPerRadian>Math.PI?"1":"0","1",...o].join(" ")}const m=(0,n.observer)((function({model:e,slice:t,region:r}){const n=(0,l.A)(),{radiusPx:i}=e,c=i+1,{endRadians:d,startRadians:m}=t,g=(0,o.polarToCartesian)(c,m),p=(0,o.polarToCartesian)(c,d),h=(d-m)*c,f=d-m>Math.PI?"1":"0",v=(d+m)/2,b=`[${Number(r.regions.length).toLocaleString()}]`;return a.createElement(a.Fragment,null,a.createElement(u,{text:b,view:e,maxWidthPx:h,radians:v,radiusPx:c,title:`${b} more regions`,color:n.palette.text.primary}),a.createElement("path",s({d:["M",...g,"A",c,c,"0",f,"1",...p].join(" ")},(0,o.getStrokeProps)(n.palette.text.secondary),{strokeWidth:2,strokeDasharray:"2,2",fill:"none"})))})),u=(0,n.observer)((function({view:e,text:t,maxWidthPx:r,radians:n,radiusPx:i,title:l,color:d}){const{classes:m}=c(),u=(0,o.polarToCartesian)(i+5,n);return t?6.5*t.length<r?a.createElement("text",s({x:0,y:0,className:m.rulerLabel,textAnchor:"middle",dominantBaseline:"baseline",transform:`translate(${u}) rotate(${(0,o.radToDeg)(n)+90})`},(0,o.getFillProps)(d)),t,a.createElement("title",null,l||t)):r>4?(0,o.radToDeg)(n+e.offsetRadians-Math.PI/2)>=180?a.createElement("text",{x:0,y:0,className:m.rulerLabel,textAnchor:"start",dominantBaseline:"middle",transform:`translate(${u}) rotate(${(0,o.radToDeg)(n)})`,fill:d},t,a.createElement("title",null,l||t)):a.createElement("text",{x:0,y:0,className:m.rulerLabel,textAnchor:"end",dominantBaseline:"middle",transform:`translate(${u}) rotate(${(0,o.radToDeg)(n)+180})`,fill:d},t,a.createElement("title",null,l||t)):null:null})),g=(0,n.observer)((function({model:e,slice:t,region:r}){const n=(0,l.A)(),{radiusPx:s}=e,{endRadians:c,startRadians:m}=t,g=(c+m)/2,p=(c-m)*s,h=(0,o.getSession)(e).assemblyManager.get(r.assemblyName);let f=h?h.getRefNameColor(r.refName):void 0;if(f)try{f=(0,i.makeContrasting)(f,n.palette.background.paper)}catch(e){f=n.palette.text.primary}else f=n.palette.text.primary;return a.createElement(a.Fragment,null,a.createElement(u,{text:r.refName,view:e,maxWidthPx:p,radians:g,radiusPx:s,color:f}),a.createElement("path",{d:d(t,s+1,r.start,r.end),stroke:f,strokeWidth:2,fill:"none"}))})),p=(0,n.observer)((function({model:e,slice:t}){return t.region.elided?a.createElement(m,{key:(0,o.assembleLocString)(t.region.regions[0]),model:e,region:t.region,slice:t}):a.createElement(g,{key:(0,o.assembleLocString)(t.region),region:t.region,model:e,slice:t})}))},45374:(e,t,r)=>{var a=r(92120);t.A=void 0;var n=a(r(33380)),o=r(69500);t.A=(0,n.default)((0,o.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1z"}),"Lock")},25746:(e,t,r)=>{var a=r(92120);t.A=void 0;var n=a(r(33380)),o=r(69500);t.A=(0,n.default)((0,o.jsx)("path",{d:"M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m0 12H6V10h12z"}),"LockOpen")},18355:(e,t,r)=>{var a=r(92120);t.A=void 0;var n=a(r(33380)),o=r(69500);t.A=(0,n.default)((0,o.jsx)("path",{d:"M7.11 8.53 5.7 7.11C4.8 8.27 4.24 9.61 4.07 11h2.02c.14-.87.49-1.72 1.02-2.47M6.09 13H4.07c.17 1.39.72 2.73 1.62 3.89l1.41-1.42c-.52-.75-.87-1.59-1.01-2.47m1.01 5.32c1.16.9 2.51 1.44 3.9 1.61V17.9c-.87-.15-1.71-.49-2.46-1.03zM13 4.07V1L8.45 5.55 13 10V6.09c2.84.48 5 2.94 5 5.91s-2.16 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93s-3.05-7.44-7-7.93"}),"RotateLeft")},43962:(e,t,r)=>{var a=r(92120);t.A=void 0;var n=a(r(33380)),o=r(69500);t.A=(0,n.default)((0,o.jsx)("path",{d:"M15.55 5.55 11 1v3.07C7.06 4.56 4 7.92 4 12s3.05 7.44 7 7.93v-2.02c-2.84-.48-5-2.94-5-5.91s2.16-5.43 5-5.91V10zM19.93 11c-.17-1.39-.72-2.73-1.62-3.89l-1.42 1.42c.54.75.88 1.6 1.02 2.47zM13 17.9v2.02c1.39-.17 2.74-.71 3.9-1.61l-1.44-1.44c-.75.54-1.59.89-2.46 1.03m3.89-2.42 1.42 1.41c.9-1.16 1.45-2.5 1.62-3.89h-2.02c-.14.87-.48 1.72-1.02 2.48"}),"RotateRight")},59705:(e,t,r)=>{r.d(t,{A:()=>k});var a=r(7552),n=r(93878),o=r(70799),i=r(64761),l=r(51148),s=r(60129),c=r(4785),d=r(15622),m=r(72489),u=r(69500);const g=i.i7`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,p=i.i7`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`,h="string"!=typeof g?i.AH`
        animation: ${g} 1.4s linear infinite;
      `:null,f="string"!=typeof p?i.AH`
        animation: ${p} 1.4s ease-in-out infinite;
      `:null,v=(0,l.Ay)("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`color${(0,d.A)(r.color)}`]]}})((0,s.A)((({theme:e})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("transform")}},{props:{variant:"indeterminate"},style:h||{animation:`${g} 1.4s linear infinite`}},...Object.entries(e.palette).filter((([,e])=>e&&e.main)).map((([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})))]})))),b=(0,l.Ay)("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),x=(0,l.Ay)("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.circle,t[`circle${(0,d.A)(r.variant)}`],r.disableShrink&&t.circleDisableShrink]}})((0,s.A)((({theme:e})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:e})=>"indeterminate"===e.variant&&!e.disableShrink,style:f||{animation:`${p} 1.4s ease-in-out infinite`}}]})))),k=a.forwardRef((function(e,t){const r=(0,c.b)({props:e,name:"MuiCircularProgress"}),{className:a,color:i="primary",disableShrink:l=!1,size:s=40,style:g,thickness:p=3.6,value:h=0,variant:f="indeterminate",...k}=r,y={...r,color:i,disableShrink:l,size:s,thickness:p,value:h,variant:f},A=(e=>{const{classes:t,variant:r,color:a,disableShrink:n}=e,i={root:["root",r,`color${(0,d.A)(a)}`],svg:["svg"],circle:["circle",`circle${(0,d.A)(r)}`,n&&"circleDisableShrink"]};return(0,o.A)(i,m.b,t)})(y),E={},S={},C={};if("determinate"===f){const e=2*Math.PI*((44-p)/2);E.strokeDasharray=e.toFixed(3),C["aria-valuenow"]=Math.round(h),E.strokeDashoffset=`${((100-h)/100*e).toFixed(3)}px`,S.transform="rotate(-90deg)"}return(0,u.jsx)(v,{className:(0,n.A)(A.root,a),style:{width:s,height:s,...S,...g},ownerState:y,ref:t,role:"progressbar",...C,...k,children:(0,u.jsx)(b,{className:A.svg,ownerState:y,viewBox:"22 22 44 44",children:(0,u.jsx)(x,{className:A.circle,style:E,ownerState:y,cx:44,cy:44,r:(44-p)/2,fill:"none",strokeWidth:p})})})}))},72489:(e,t,r)=>{r.d(t,{A:()=>i,b:()=>o});var a=r(33761),n=r(85693);function o(e){return(0,n.Ay)("MuiCircularProgress",e)}const i=(0,a.A)("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"])},75653:(e,t,r)=>{r.d(t,{A:()=>x});var a=r(7552),n=r(93878),o=r(85693),i=r(70799),l=r(33283),s=r(82081),c=r(24959),d=r(72861),m=r(69500);const u=(0,d.A)(),g=(0,c.A)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`maxWidth${(0,l.A)(String(r.maxWidth))}`],r.fixed&&t.fixed,r.disableGutters&&t.disableGutters]}}),p=e=>(0,s.A)({props:e,name:"MuiContainer",defaultTheme:u});var h=r(15622),f=r(51148),v=r(31049);const b=function(e={}){const{createStyledComponent:t=g,useThemeProps:r=p,componentName:s="MuiContainer"}=e,c=t((({theme:e,ownerState:t})=>({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",...!t.disableGutters&&{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}}})),(({theme:e,ownerState:t})=>t.fixed&&Object.keys(e.breakpoints.values).reduce(((t,r)=>{const a=r,n=e.breakpoints.values[a];return 0!==n&&(t[e.breakpoints.up(a)]={maxWidth:`${n}${e.breakpoints.unit}`}),t}),{})),(({theme:e,ownerState:t})=>({..."xs"===t.maxWidth&&{[e.breakpoints.up("xs")]:{maxWidth:Math.max(e.breakpoints.values.xs,444)}},...t.maxWidth&&"xs"!==t.maxWidth&&{[e.breakpoints.up(t.maxWidth)]:{maxWidth:`${e.breakpoints.values[t.maxWidth]}${e.breakpoints.unit}`}}}))),d=a.forwardRef((function(e,t){const a=r(e),{className:d,component:u="div",disableGutters:g=!1,fixed:p=!1,maxWidth:h="lg",classes:f,...v}=a,b={...a,component:u,disableGutters:g,fixed:p,maxWidth:h},x=((e,t)=>{const{classes:r,fixed:a,disableGutters:n,maxWidth:s}=e,c={root:["root",s&&`maxWidth${(0,l.A)(String(s))}`,a&&"fixed",n&&"disableGutters"]};return(0,i.A)(c,(e=>(0,o.Ay)(t,e)),r)})(b,s);return(0,m.jsx)(c,{as:u,ownerState:b,className:(0,n.A)(x.root,d),ref:t,...v})}));return d}({createStyledComponent:(0,f.Ay)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`maxWidth${(0,h.A)(String(r.maxWidth))}`],r.fixed&&t.fixed,r.disableGutters&&t.disableGutters]}}),useThemeProps:e=>(0,v.A)({props:e,name:"MuiContainer"})}),x=b},24959:(e,t,r)=>{r.d(t,{A:()=>a});const a=(0,r(15543).Ay)()}}]);
//# sourceMappingURL=4539.9f78a81d.chunk.js.map