"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[8885],{58885(e,o,r){r.d(o,{renderSvg:()=>g});var t=r(77251),c=r(70203),s=r(28423),l=r(30936),i=r(36790),n=r(85512),f=r(32118);const a={juicebox:[{offset:"0%",color:"rgba(0,0,0,0)"},{offset:"100%",color:"red"}],fall:[{offset:"0%",color:"rgb(255,255,255)"},{offset:"10%",color:"rgb(255,255,204)"},{offset:"20%",color:"rgb(255,237,160)"},{offset:"30%",color:"rgb(254,217,118)"},{offset:"40%",color:"rgb(254,178,76)"},{offset:"50%",color:"rgb(253,141,60)"},{offset:"60%",color:"rgb(252,78,42)"},{offset:"70%",color:"rgb(227,26,28)"},{offset:"80%",color:"rgb(189,0,38)"},{offset:"90%",color:"rgb(128,0,38)"},{offset:"100%",color:"rgb(0,0,0)"}],viridis:[{offset:"0%",color:"#440154"},{offset:"11%",color:"#482878"},{offset:"22%",color:"#3e4a89"},{offset:"33%",color:"#31688e"},{offset:"44%",color:"#26828e"},{offset:"55%",color:"#1f9e89"},{offset:"66%",color:"#35b779"},{offset:"77%",color:"#6ece58"},{offset:"88%",color:"#b5de2b"},{offset:"100%",color:"#fde725"}]};function d(e){const o=(0,l.c)(22),{maxScore:r,colorScheme:c,useLogScale:s,width:d,legendAreaWidth:g}=e,x=void 0===c?"juicebox":c,b=`hic-gradient-${x}`,m=a[x]||a.juicebox;let u,j;if(o[0]!==r||o[1]!==s){const{min:e,max:c}=function(e,o){if(o){const o=(0,i.A)().base(2).domain([1,e]).nice(),[r,t]=o.domain();return{min:r,max:t}}const r=(0,n.A)().domain([0,e]).nice(),[t,c]=r.domain();return{min:t,max:c}}(r,s);u=void 0!==e?(0,t.toLocale)(e):"",j=void 0!==c?(0,t.toLocale)(c):"",o[0]=r,o[1]=s,o[2]=u,o[3]=j}else u=o[2],j=o[3];const p=`${j}${s?" (log)":""}`,S=`translate(${g?d+10:d-120-10}, 10)`;let w,y,k;o[4]!==m?(w=m.map(h),o[4]=m,o[5]=w):w=o[5],o[6]!==b||o[7]!==w?(y=(0,f.jsx)("defs",{children:(0,f.jsx)("linearGradient",{id:b,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:w})}),o[6]=b,o[7]=w,o[8]=y):y=o[8],o[9]===Symbol.for("react.memo_cache_sentinel")?(k=(0,f.jsx)("rect",{x:0,y:0,width:120,height:40,fill:"rgba(255,255,255,0.9)",stroke:"#ccc",strokeWidth:1,rx:4}),o[9]=k):k=o[9];const P=`url(#${b})`;let v,$,C,L;return o[10]!==P?(v=(0,f.jsx)("rect",{x:8,y:8,width:100,height:12,fill:P,rx:2}),o[10]=P,o[11]=v):v=o[11],o[12]!==u?($=(0,f.jsx)("text",{x:8,y:32,fontSize:10,fill:"black",children:u}),o[12]=u,o[13]=$):$=o[13],o[14]!==p?(C=(0,f.jsx)("text",{x:108,y:32,fontSize:10,fill:"black",textAnchor:"end",children:p}),o[14]=p,o[15]=C):C=o[15],o[16]!==C||o[17]!==S||o[18]!==y||o[19]!==v||o[20]!==$?(L=(0,f.jsxs)("g",{transform:S,children:[y,k,v,$,C]}),o[16]=C,o[17]=S,o[18]=y,o[19]=v,o[20]=$,o[21]=L):L=o[21],L}function h(e,o){return(0,f.jsx)("stop",{offset:e.offset,style:{stopColor:e.color,stopOpacity:1}},o)}async function g(e,o){const r=(0,t.getContainingView)(e),l=(0,t.getSession)(e),{rpcManager:i}=l,n=o.overrideHeight??e.height,{useLogScale:a,colorScheme:h,showLegend:g,adapterConfig:x}=e,{bpPerPx:b,dynamicBlocks:m}=r,u=m.contentBlocks;if(!u.length)return null;const j=e.renderProps(),p=(0,c.getRpcSessionId)(e),S=await i.call(p,"CoreRender",{sessionId:p,rendererType:"HicRenderer",regions:[...u],adapterConfig:x,bpPerPx:b,...j,exportSVG:o}),w=await(0,s.MD)(S,r.staticBlocks.totalWidthPx,n),y=r.width,k=`clip-${e.id}-svg`,P=S.maxScore??e.maxScore;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("defs",{children:(0,f.jsx)("clipPath",{id:k,children:(0,f.jsx)("rect",{x:0,y:0,width:y,height:n})})}),(0,f.jsx)("g",{clipPath:`url(#${k})`,children:(0,f.jsx)("g",{transform:`translate(${Math.max(0,-r.offsetPx)} 0)`,children:(0,f.jsx)(s.aE,{rendering:w})})}),g&&P>0?(0,f.jsx)(d,{maxScore:P,colorScheme:h,useLogScale:a,width:y,legendAreaWidth:o.legendWidth}):null]})}}}]);
//# sourceMappingURL=8885.a1a07b70.chunk.js.map