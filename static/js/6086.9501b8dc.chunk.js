"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[6086],{96086(e,t,n){n.r(t),n.d(t,{default:()=>L});var s=n(77251),o=n(65045),i=n(64074),r=n(42918),l=n(6128),a=n(32118);const c=(0,o.n)()({overlay:{display:"flex",width:"100%",gridArea:"1/1","& path":{cursor:"crosshair",fill:"none"}},base:{pointerEvents:"none",width:"100%",zIndex:100}}),d=(0,i.observer)(function({model:e}){const{classes:t}=c(),{matchedTracks:n}=e,s=(0,r.useRef)(null);return(0,a.jsx)("div",{className:t.overlay,children:(0,a.jsx)("svg",{ref:s,className:t.base,children:n.map(t=>(0,a.jsx)(l.A,{parentRef:s,model:e,trackId:t.configuration.trackId},t.configuration.trackId))})})});var u=n(35913),f=n(21267),m=n(66489),h=n(58919),p=n(47864),b=n(1591);const v=(0,o.n)()(()=>({bp:{display:"flex",alignItems:"center",marginLeft:10},searchBox:{display:"flex"}})),x=(0,i.observer)(function({view:e}){const{classes:t}=v(),{assemblyDisplayNames:n,coarseTotalBp:o}=e;return(0,a.jsxs)("span",{className:t.searchBox,children:[(0,a.jsx)(p.A,{model:e,showHelp:!1}),(0,a.jsxs)(b.A,{variant:"body2",color:"textSecondary",className:t.bp,children:[n.join(",")," ",(0,s.getBpDisplayStr)(o)]})]})}),g=(0,o.n)()({inline:{display:"inline-flex"}}),w=(0,i.observer)(function({model:e}){const{classes:t}=g(),{views:n}=e,[s,o]=(0,r.useState)(n.length<=3),[i,l]=(0,r.useState)(n.length<=3);return(0,a.jsxs)(h.A,{row:!0,children:[(0,a.jsx)(u.A,{menuItems:()=>e.menuItems(),children:(0,a.jsx)(f.A,{})}),(0,a.jsx)(u.A,{menuItems:[{label:"Show search boxes",type:"checkbox",checked:s,onClick:()=>{o(!s)}},{label:"Orientation - Side-by-side",type:"radio",checked:i,onClick:()=>{l(!i)}},{label:"Orientation - Vertical",type:"radio",checked:!i,onClick:()=>{l(!i)}}],children:(0,a.jsx)(m.A,{})}),s?(0,a.jsx)("span",{className:i?t.inline:void 0,children:n.map(e=>(0,a.jsx)(x,{view:e},e.id))}):null]})});var j=n(14391),y=n(30936),O=n(15943),k=n(27607);function B(e){const t=(0,y.c)(8),{anchorEl:n,side:s,text:o}=e,i="left"===s?"left-start":"right-start";let r,l,c,d;return t[0]===Symbol.for("react.memo_cache_sentinel")?(r=[{name:"offset",options:{offset:[-30,-10]}}],t[0]=r):r=t[0],t[1]!==n?(l={popper:{anchorEl:n,modifiers:r}},t[1]=n,t[2]=l):l=t[2],t[3]===Symbol.for("react.memo_cache_sentinel")?(c=(0,a.jsx)("span",{}),t[3]=c):c=t[3],t[4]!==i||t[5]!==l||t[6]!==o?(d=(0,a.jsx)(k.A,{title:o,open:!0,placement:i,slotProps:l,children:c}),t[4]=i,t[5]=l,t[6]=o,t[7]=d):d=t[7],d}const S=(0,o.n)()(e=>{const{tertiary:t}=e.palette;return{rubberband:{height:"100%",background:(0,O.X4)(t.light,.7),position:"absolute",zIndex:830,textAlign:"center"},rubberbandText:{color:e.palette.tertiary.contrastText}}});function C(e){const t=(0,y.c)(19),{leftBpOffset:n,rightBpOffset:s,numOfBpSelected:o,left:i,width:l,top:c,sticky:d}=e,u=void 0===c?0:c,f=void 0!==d&&d,{classes:m}=S(),[h,p]=(0,r.useState)(null);let v,x,g,w,j;return t[0]!==h||t[1]!==n||t[2]!==s?(v=h?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(B,{side:"left",anchorEl:h,text:n.map(I)}),(0,a.jsx)(B,{side:"right",anchorEl:h,text:s.map(N)})]}):null,t[0]=h,t[1]=n,t[2]=s,t[3]=v):v=t[3],t[4]!==i||t[5]!==l?(x={left:i,width:l},t[4]=i,t[5]=l,t[6]=x):x=t[6],t[7]!==m.rubberbandText||t[8]!==o||t[9]!==f||t[10]!==u?(g=o?(0,a.jsx)(b.A,{ref:p,variant:"h6",className:m.rubberbandText,style:{top:u,position:f?"sticky":void 0},children:o.map(M)}):null,t[7]=m.rubberbandText,t[8]=o,t[9]=f,t[10]=u,t[11]=g):g=t[11],t[12]!==m.rubberband||t[13]!==x||t[14]!==g?(w=(0,a.jsx)("div",{className:m.rubberband,style:x,children:g}),t[12]=m.rubberband,t[13]=x,t[14]=g,t[15]=w):w=t[15],t[16]!==v||t[17]!==w?(j=(0,a.jsxs)(a.Fragment,{children:[v,w]}),t[16]=v,t[17]=w,t[18]=j):j=t[18],j}function M(e,t){return(0,a.jsx)("div",{children:(0,s.getBpDisplayStr)(e)},`bpSelectedRow-${t}`)}function N(e,t){return(0,a.jsx)("div",{children:(0,s.stringify)(e,!0)},`${JSON.stringify(e)}-right-${t}`)}function I(e,t){return(0,a.jsx)("div",{children:(0,s.stringify)(e,!0)},`${JSON.stringify(e)}-left-${t}`)}const A=(0,o.n)()({guide:{pointerEvents:"none",height:"100%",width:1,position:"absolute",background:"red",zIndex:1001}}),T=(0,i.observer)(function({model:e,coordX:t}){const{classes:n}=A();return(0,a.jsx)(k.A,{open:!0,placement:"top",title:e.views.map(e=>e.pxToBp(t)).map((e,t)=>(0,a.jsx)("div",{children:(0,s.stringify)(e,!0)},[JSON.stringify(e),t].join("-"))),arrow:!0,children:(0,a.jsx)("div",{className:n.guide,style:{left:t}})})});var _=n(38567);function D(e,t){return e.clientX-(t?.getBoundingClientRect().left||0)}function E(){}const X=(0,o.n)()({rubberbandControl:{cursor:"crosshair",width:"100%",minHeight:8,position:"relative",zIndex:900}}),P=(0,i.observer)(function({model:e,ControlComponent:t=(0,a.jsx)("div",{})}){const n=(0,r.useRef)(null),{classes:s}=X(),{guideX:o,rubberbandOn:i,leftBpOffset:l,rightBpOffset:c,numOfBpSelected:d,width:u,left:f,anchorPosition:m,open:h,handleMenuItemClick:p,handleClose:b,mouseMove:v,mouseDown:x,mouseOut:g}=function(e,t){const n=(0,y.c)(49),[s,o]=(0,r.useState)(),[i,l]=(0,r.useState)(),[a,c]=(0,r.useState)(),[d,u]=(0,r.useState)(),f=void 0!==s&&void 0===a;let m;n[0]===Symbol.for("react.memo_cache_sentinel")?(m=()=>{c(void 0),o(void 0),l(void 0)},n[0]=m):m=n[0];const h=m;let p,b,v;n[1]!==t||n[2]!==f||n[3]!==e||n[4]!==s?(p=()=>{const n=function(t){if(e.current&&f){const n=D(t,e.current);l(n)}},o=function(n){if(void 0!==s&&e.current){const{clientX:o,clientY:i}=n,r=D(n,e.current);if(Math.abs(r-s)<=3)return void h();c({offsetX:r,clientX:o,clientY:i});const l=function(e){if(void 0===s)return;const n=Math.min(s,e),o=Math.max(s,e);return t.views.map(e=>({leftOffset:e.pxToBp(n),rightOffset:e.pxToBp(o)}))}(r);l&&(0,_.transaction)(()=>{for(const[e,n]of l.entries())t.views[e].setOffsets(n.leftOffset,n.rightOffset)}),u(void 0)}};return f?(window.addEventListener("mousemove",n),window.addEventListener("mouseup",o),()=>{window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",o)}):E},b=[s,f,t,e,h],n[1]=t,n[2]=f,n[3]=e,n[4]=s,n[5]=p,n[6]=b):(p=n[5],b=n[6]),(0,r.useEffect)(p,b),n[7]!==e?(v=function(t){t.preventDefault(),t.stopPropagation();const n=D(t,e.current);o(n),l(n)},n[7]=e,n[8]=v):v=n[8];const x=v;let g;n[9]!==a||n[10]!==e?(g=function(t){a||u(D(t,e.current))},n[9]=a,n[10]=e,n[11]=g):g=n[11];const w=g;let j;n[12]!==t?(j=function(){u(void 0),(0,_.transaction)(()=>{for(const e of t.views)e.setOffsets(void 0,void 0)})},n[12]=t,n[13]=j):j=n[13];const O=j;let k;n[14]===Symbol.for("react.memo_cache_sentinel")?(k=function(e,t){t(),h()},n[14]=k):k=n[14];const B=k,S=Boolean(a);if(void 0===s){let e;return n[15]!==d||n[16]!==x||n[17]!==w||n[18]!==O||n[19]!==S?(e={open:S,guideX:d,mouseDown:x,mouseMove:w,mouseOut:O,handleMenuItemClick:B},n[15]=d,n[16]=x,n[17]=w,n[18]=O,n[19]=S,n[20]=e):e=n[20],e}const C=a?a.offsetX:i||0,M=Math.min(C,s),N=Math.abs(C-s);let I;if(n[21]!==M||n[22]!==t.views){let e;n[24]!==M?(e=e=>e.pxToBp(M),n[24]=M,n[25]=e):e=n[25],I=t.views.map(e),n[21]=M,n[22]=t.views,n[23]=I}else I=n[23];const A=I;let T;if(n[26]!==M||n[27]!==t.views||n[28]!==N){let e;n[30]!==M||n[31]!==N?(e=e=>e.pxToBp(M+N),n[30]=M,n[31]=N,n[32]=e):e=n[32],T=t.views.map(e),n[26]=M,n[27]=t.views,n[28]=N,n[29]=T}else T=n[29];const X=T;let P;if(n[33]!==t.views||n[34]!==N){let e;n[36]!==N?(e=e=>Math.ceil(N*e.bpPerPx),n[36]=N,n[37]=e):e=n[37],P=t.views.map(e),n[33]=t.views,n[34]=N,n[35]=P}else P=n[35];const R=P;let $;return n[38]!==a||n[39]!==M||n[40]!==A||n[41]!==x||n[42]!==w||n[43]!==O||n[44]!==R||n[45]!==S||n[46]!==X||n[47]!==N?($={open:S,rubberbandOn:!0,mouseDown:x,mouseMove:w,mouseOut:O,handleClose:h,handleMenuItemClick:B,leftBpOffset:A,rightBpOffset:X,anchorPosition:a,numOfBpSelected:R,width:N,left:M},n[38]=a,n[39]=M,n[40]=A,n[41]=x,n[42]=w,n[43]=O,n[44]=R,n[45]=S,n[46]=X,n[47]=N,n[48]=$):$=n[48],$}(n,e);return(0,a.jsxs)(a.Fragment,{children:[void 0!==o?(0,a.jsx)(T,{model:e,coordX:o}):i?(0,a.jsx)(C,{leftBpOffset:l,rightBpOffset:c,numOfBpSelected:d,width:u,left:f}):null,m?(0,a.jsx)(j.A,{anchorReference:"anchorPosition",anchorPosition:{left:m.clientX,top:m.clientY},onMenuItemClick:p,open:h,onClose:b,menuItems:e.rubberBandMenuItems()}):null,(0,a.jsx)("div",{"data-testid":"rubberband_controls",className:s.rubberbandControl,ref:n,onMouseDown:x,onMouseMove:v,onMouseOut:g,children:t})]})}),R=(0,o.n)()(e=>({viewDivider:{background:e.palette.secondary.main,height:3},container:{display:"grid"},content:{gridArea:"1/1"},rel:{position:"relative"},rubberbandContainer:{position:"relative",overflow:"hidden"},rubberbandDiv:{width:"100%",background:e.palette.action.disabledBackground,height:15,"&:hover":{background:e.palette.action.selected}}})),$=(0,i.observer)(function({model:e}){const{classes:t}=R(),{views:n}=e,{pluginManager:o}=(0,s.getEnv)(e);return(0,a.jsx)("div",{className:t.content,children:(0,a.jsx)("div",{className:t.rel,children:n.map((e,s)=>{const{ReactComponent:i}=o.getViewType(e.type),r=(0,a.jsx)(i,{model:e},e.id);return s===n.length-1?r:[r,(0,a.jsx)("div",{className:t.viewDivider},`${e.id}-divider`)]})})})}),L=(0,i.observer)(function({model:e}){const{classes:t}=R();return(0,a.jsxs)("div",{className:t.rubberbandContainer,children:[e.showHeader?(0,a.jsx)(w,{model:e}):null,(0,a.jsx)(P,{model:e,ControlComponent:(0,a.jsx)("div",{className:t.rubberbandDiv})}),(0,a.jsxs)("div",{className:t.container,children:[(0,a.jsx)($,{model:e}),(0,a.jsx)(d,{model:e})]})]})})}}]);
//# sourceMappingURL=6086.9501b8dc.chunk.js.map