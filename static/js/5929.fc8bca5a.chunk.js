"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[1838,5929],{51838(e,t,n){n.r(t),n.d(t,{default:()=>Z});var s=n(65045),o=n(64074),r=n(42918),i=n(35913),l=n(58693),a=n(21267),c=n(66489),d=n(58919),u=n(29242),m=n(32118);const f=(0,o.observer)(function({model:e}){const t=e.levels[0]?.tracks[0]?.displays[0],n=t?.colorBy??"default",s=t=>{for(const n of e.levels)for(const e of n.tracks)for(const n of e.displays)n.setColorBy(t)};return(0,m.jsx)(i.A,{menuItems:[{label:"Default",type:"radio",checked:"default"===n,onClick:()=>{s("default")},helpText:"Use the default color scheme with CIGAR operation coloring. Insertions, deletions, matches, and mismatches are shown in different colors with transparency."},{label:"Strand",type:"radio",checked:"strand"===n,onClick:()=>{s("strand")},helpText:"Color alignments by strand orientation. Forward strand alignments and reverse strand alignments are shown in different colors, making it easy to identify inversions and strand-specific patterns."},{label:"Query",type:"radio",checked:"query"===n,onClick:()=>{s("query")},helpText:"Color alignments by query sequence name. Each unique query sequence is assigned a consistent color based on its name, making it easy to visually distinguish between different sequences."}],children:(0,m.jsx)(u.A,{})})});var h=n(77251),p=n(47864),b=n(1591);const v=(0,s.n)()(()=>({bp:{display:"flex",alignItems:"center",marginLeft:10},searchBox:{display:"flex"}})),x=(0,o.observer)(function({view:e}){const{classes:t}=v(),{assemblyDisplayNames:n,coarseTotalBp:s}=e;return(0,m.jsxs)("span",{className:t.searchBox,children:[(0,m.jsx)(p.A,{model:e,showHelp:!1}),(0,m.jsxs)(b.A,{variant:"body2",color:"textSecondary",className:t.bp,children:[n.join(",")," ",(0,h.getBpDisplayStr)(s)]})]})});var g=n(17252),y=n(60550),w=n(30936),j=n(27607);function k(e){const t=(0,w.c)(4),{children:n,open:s,value:o}=e;let r;return t[0]!==n||t[1]!==s||t[2]!==o?(r=(0,m.jsx)(j.A,{open:s,enterTouchDelay:0,placement:"top",title:o,arrow:!0,children:n}),t[0]=n,t[1]=s,t[2]=o,t[3]=r):r=t[3],r}const M=(0,s.n)()({container:{display:"flex",alignItems:"center",marginLeft:16,marginRight:16,minWidth:150}}),C=(0,o.observer)(function({model:e}){const{classes:t}=M(),{levels:n}=e,s=n[0]?.tracks[0]?.displays[0],o=s?.minAlignmentLength??0,[i,l]=(0,r.useState)(100*Math.log2(Math.max(1,o)));return(0,r.useEffect)(()=>{l(100*Math.log2(Math.max(1,o)))},[o]),(0,m.jsxs)(g.A,{className:t.container,children:[(0,m.jsx)(b.A,{variant:"body2",style:{marginRight:8},children:"Min length:"}),(0,m.jsx)(y.Ay,{value:i,onChange:(e,t)=>{l(t)},onChangeCommitted:()=>{const e=Math.round(2**(i/100));for(const t of n)for(const n of t.tracks)for(const t of n.displays)t.setMinAlignmentLength(e)},min:0,max:100*Math.log2(1e6),valueLabelDisplay:"auto",valueLabelFormat:e=>(0,h.toLocale)(Math.round(2**(e/100))),size:"small",style:{minWidth:100},slots:{valueLabel:k}})]})}),O=(0,s.n)()(e=>({container:{display:"flex",alignItems:"center",marginLeft:16,marginRight:16,minWidth:150},slider:{width:100,color:e.palette.text.secondary}})),A=(0,o.observer)(function({model:e}){const{classes:t}=O(),{levels:n}=e,s=n[0]?.tracks[0]?.displays[0],o=e=>Math.pow(e,3),r=(i=s?.alpha??1,Math.pow(i,1/3));var i;return(0,m.jsxs)(g.A,{className:t.container,children:[(0,m.jsx)(b.A,{variant:"body2",style:{marginRight:8},children:"Opacity:"}),(0,m.jsx)(y.Ay,{value:r,onChange:(e,t)=>{const s="number"==typeof t?t:t[0],r=o(s);for(const e of n)for(const t of e.tracks)for(const e of t.displays)e.setAlpha(r)},min:0,max:1,step:.01,valueLabelDisplay:"auto",size:"small",className:t.slider,slots:{valueLabel:k},valueLabelFormat:e=>o(e).toFixed(3)})]})}),S=(0,s.n)()({inline:{display:"inline-flex"}}),B=(0,o.observer)(function({model:e}){const{classes:t}=S(),{views:n,levels:s,showDynamicControls:o}=e,[u,h]=(0,r.useState)(n.length<=3),[p,b]=(0,r.useState)(n.length<=3),v=s[0]?.tracks[0]?.displays[0];return(0,m.jsxs)(d.A,{row:!0,children:[(0,m.jsx)(i.A,{menuItems:[{label:"Synteny track selectors",type:"subMenu",subMenu:n.slice(0,-1).map((t,s)=>({label:`Row ${s+1}->${s+2} (${n[s].assemblyNames.join(",")}->${n[s+1].assemblyNames.join(",")})`,onClick:()=>{e.activateTrackSelector(s)}}))},{label:"Row track selectors",type:"subMenu",subMenu:n.map((e,t)=>({label:`Row ${t+1} track selector (${e.assemblyNames.join(",")})`,onClick:()=>e.activateTrackSelector()}))}],children:(0,m.jsx)(l.xU,{})}),(0,m.jsx)(i.A,{menuItems:()=>[{label:"Row view menus",type:"subMenu",subMenu:n.map((e,t)=>({label:`View ${t+1} Menu`,subMenu:e.menuItems()}))},...e.headerMenuItems()],children:(0,m.jsx)(a.A,{})}),(0,m.jsx)(i.A,{menuItems:[{label:"Show search boxes",type:"checkbox",checked:u,onClick:()=>{h(!u)}},{label:"Orientation - Side-by-side",type:"radio",checked:p,onClick:()=>{b(!p)}},{label:"Orientation - Vertical",type:"radio",checked:!p,onClick:()=>{b(!p)}}],children:(0,m.jsx)(c.A,{})}),v&&o?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(f,{model:e}),(0,m.jsx)(A,{model:e}),(0,m.jsx)(C,{model:e})]}):null,u?(0,m.jsx)("span",{className:p?t.inline:void 0,children:n.map(e=>(0,m.jsx)(x,{view:e},e.id))}):null]})});var I=n(11259),N=n(28397);const T=(0,s.n)()({container:{display:"grid"},overlay:{zIndex:100,gridArea:"1/1"},resizeHandle:{height:4,background:"#ccc","&:hover":{background:"#aaa"}}});function L(e){const t=(0,w.c)(5),{view:n}=e;let s;if(t[0]!==n){const{pluginManager:e}=(0,h.getEnv)(n);s=e.getViewType(n.type),t[0]=n,t[1]=s}else s=t[1];const{ReactComponent:o}=s;let r;return t[2]!==o||t[3]!==n?(r=(0,m.jsx)(o,{model:n}),t[2]=o,t[3]=n,t[4]=r):r=t[4],r}const D=(0,o.observer)(function({model:e}){const{classes:t}=T(),{views:n,levels:s}=e;return(0,m.jsx)("div",{className:t.container,children:n.map((n,o)=>(0,m.jsxs)(m.Fragment,{children:[o>0?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:t.container,children:(0,m.jsx)(R,{model:e,level:o-1})}),(0,m.jsx)(N.A,{onDrag:e=>s[o-1]?.setHeight((s[o-1]?.height||0)+e),className:t.resizeHandle})]}):null,(0,m.jsx)(L,{view:n})]},n.id))})}),R=(0,o.observer)(function({model:e,level:t}){const{classes:n}=T(),s=e.levels[t].tracks;return(0,m.jsx)(m.Fragment,{children:s.map(e=>{const t=e.displays[0],s=t?.RenderingComponent,o=(0,I.FI)(e,"trackId");return s?(0,m.jsx)("div",{className:n.overlay,style:{height:t.height,overflow:"hidden"},children:(0,m.jsx)(s,{model:t})},o):null})})}),E=D;var F=n(14391),_=n(15943);function $(e){const t=(0,w.c)(8),{anchorEl:n,side:s,text:o}=e,r="left"===s?"left-start":"right-start";let i,l,a,c;return t[0]===Symbol.for("react.memo_cache_sentinel")?(i=[{name:"offset",options:{offset:[-30,-10]}}],t[0]=i):i=t[0],t[1]!==n?(l={popper:{anchorEl:n,modifiers:i}},t[1]=n,t[2]=l):l=t[2],t[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,m.jsx)("span",{}),t[3]=a):a=t[3],t[4]!==r||t[5]!==l||t[6]!==o?(c=(0,m.jsx)(j.A,{title:o,open:!0,placement:r,slotProps:l,children:a}),t[4]=r,t[5]=l,t[6]=o,t[7]=c):c=t[7],c}const X=(0,s.n)()(e=>{const{tertiary:t}=e.palette;return{rubberband:{height:"100%",background:(0,_.X4)(t.light,.7),position:"absolute",zIndex:830,textAlign:"center"},rubberbandText:{color:e.palette.tertiary.contrastText}}});function z(e){const t=(0,w.c)(19),{leftBpOffset:n,rightBpOffset:s,numOfBpSelected:o,left:i,width:l,top:a,sticky:c}=e,d=void 0===a?0:a,u=void 0!==c&&c,{classes:f}=X(),[h,p]=(0,r.useState)(null);let v,x,g,y,j;return t[0]!==h||t[1]!==n||t[2]!==s?(v=h?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)($,{side:"left",anchorEl:h,text:n.map(H)}),(0,m.jsx)($,{side:"right",anchorEl:h,text:s.map(q)})]}):null,t[0]=h,t[1]=n,t[2]=s,t[3]=v):v=t[3],t[4]!==i||t[5]!==l?(x={left:i,width:l},t[4]=i,t[5]=l,t[6]=x):x=t[6],t[7]!==f.rubberbandText||t[8]!==o||t[9]!==u||t[10]!==d?(g=o?(0,m.jsx)(b.A,{ref:p,variant:"h6",className:f.rubberbandText,style:{top:d,position:u?"sticky":void 0},children:o.map(P)}):null,t[7]=f.rubberbandText,t[8]=o,t[9]=u,t[10]=d,t[11]=g):g=t[11],t[12]!==f.rubberband||t[13]!==x||t[14]!==g?(y=(0,m.jsx)("div",{className:f.rubberband,style:x,children:g}),t[12]=f.rubberband,t[13]=x,t[14]=g,t[15]=y):y=t[15],t[16]!==v||t[17]!==y?(j=(0,m.jsxs)(m.Fragment,{children:[v,y]}),t[16]=v,t[17]=y,t[18]=j):j=t[18],j}function P(e,t){return(0,m.jsx)("div",{children:(0,h.getBpDisplayStr)(e)},`bpSelectedRow-${t}`)}function q(e,t){return(0,m.jsx)("div",{children:(0,h.stringify)(e,!0)},`${JSON.stringify(e)}-right-${t}`)}function H(e,t){return(0,m.jsx)("div",{children:(0,h.stringify)(e,!0)},`${JSON.stringify(e)}-left-${t}`)}const J=(0,s.n)()({guide:{pointerEvents:"none",height:"100%",width:1,position:"absolute",background:"red",zIndex:1001}}),V=(0,o.observer)(function({model:e,coordX:t}){const{classes:n}=J();return(0,m.jsx)(j.A,{open:!0,placement:"top",title:e.views.map(e=>e.pxToBp(t)).map((e,t)=>(0,m.jsx)("div",{children:(0,h.stringify)(e,!0)},[JSON.stringify(e),t].join("-"))),arrow:!0,children:(0,m.jsx)("div",{className:n.guide,style:{left:t}})})});var W=n(38567);function Y(e,t){return e.clientX-(t?.getBoundingClientRect().left||0)}function U(){}const G=(0,s.n)()({rubberbandControl:{cursor:"crosshair",width:"100%",minHeight:8,position:"relative",zIndex:900}}),Q=(0,o.observer)(function({model:e,ControlComponent:t=(0,m.jsx)("div",{})}){const n=(0,r.useRef)(null),{classes:s}=G(),{guideX:o,rubberbandOn:i,leftBpOffset:l,rightBpOffset:a,numOfBpSelected:c,width:d,left:u,anchorPosition:f,open:h,handleMenuItemClick:p,handleClose:b,mouseMove:v,mouseDown:x,mouseOut:g}=function(e,t){const n=(0,w.c)(49),[s,o]=(0,r.useState)(),[i,l]=(0,r.useState)(),[a,c]=(0,r.useState)(),[d,u]=(0,r.useState)(),m=void 0!==s&&void 0===a;let f;n[0]===Symbol.for("react.memo_cache_sentinel")?(f=()=>{c(void 0),o(void 0),l(void 0)},n[0]=f):f=n[0];const h=f;let p,b,v;n[1]!==t||n[2]!==m||n[3]!==e||n[4]!==s?(p=()=>{const n=function(t){if(e.current&&m){const n=Y(t,e.current);l(n)}},o=function(n){if(void 0!==s&&e.current){const{clientX:o,clientY:r}=n,i=Y(n,e.current);if(Math.abs(i-s)<=3)return void h();c({offsetX:i,clientX:o,clientY:r});const l=function(e){if(void 0===s)return;const n=Math.min(s,e),o=Math.max(s,e);return t.views.map(e=>({leftOffset:e.pxToBp(n),rightOffset:e.pxToBp(o)}))}(i);l&&(0,W.transaction)(()=>{for(const[e,n]of l.entries())t.views[e].setOffsets(n.leftOffset,n.rightOffset)}),u(void 0)}};return m?(window.addEventListener("mousemove",n),window.addEventListener("mouseup",o),()=>{window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",o)}):U},b=[s,m,t,e,h],n[1]=t,n[2]=m,n[3]=e,n[4]=s,n[5]=p,n[6]=b):(p=n[5],b=n[6]),(0,r.useEffect)(p,b),n[7]!==e?(v=function(t){t.preventDefault(),t.stopPropagation();const n=Y(t,e.current);o(n),l(n)},n[7]=e,n[8]=v):v=n[8];const x=v;let g;n[9]!==a||n[10]!==e?(g=function(t){a||u(Y(t,e.current))},n[9]=a,n[10]=e,n[11]=g):g=n[11];const y=g;let j;n[12]!==t?(j=function(){u(void 0),(0,W.transaction)(()=>{for(const e of t.views)e.setOffsets(void 0,void 0)})},n[12]=t,n[13]=j):j=n[13];const k=j;let M;n[14]===Symbol.for("react.memo_cache_sentinel")?(M=function(e,t){t(),h()},n[14]=M):M=n[14];const C=M,O=Boolean(a);if(void 0===s){let e;return n[15]!==d||n[16]!==x||n[17]!==y||n[18]!==k||n[19]!==O?(e={open:O,guideX:d,mouseDown:x,mouseMove:y,mouseOut:k,handleMenuItemClick:C},n[15]=d,n[16]=x,n[17]=y,n[18]=k,n[19]=O,n[20]=e):e=n[20],e}const A=a?a.offsetX:i||0,S=Math.min(A,s),B=Math.abs(A-s);let I;if(n[21]!==S||n[22]!==t.views){let e;n[24]!==S?(e=e=>e.pxToBp(S),n[24]=S,n[25]=e):e=n[25],I=t.views.map(e),n[21]=S,n[22]=t.views,n[23]=I}else I=n[23];const N=I;let T;if(n[26]!==S||n[27]!==t.views||n[28]!==B){let e;n[30]!==S||n[31]!==B?(e=e=>e.pxToBp(S+B),n[30]=S,n[31]=B,n[32]=e):e=n[32],T=t.views.map(e),n[26]=S,n[27]=t.views,n[28]=B,n[29]=T}else T=n[29];const L=T;let D;if(n[33]!==t.views||n[34]!==B){let e;n[36]!==B?(e=e=>Math.ceil(B*e.bpPerPx),n[36]=B,n[37]=e):e=n[37],D=t.views.map(e),n[33]=t.views,n[34]=B,n[35]=D}else D=n[35];const R=D;let E;return n[38]!==a||n[39]!==S||n[40]!==N||n[41]!==x||n[42]!==y||n[43]!==k||n[44]!==R||n[45]!==O||n[46]!==L||n[47]!==B?(E={open:O,rubberbandOn:!0,mouseDown:x,mouseMove:y,mouseOut:k,handleClose:h,handleMenuItemClick:C,leftBpOffset:N,rightBpOffset:L,anchorPosition:a,numOfBpSelected:R,width:B,left:S},n[38]=a,n[39]=S,n[40]=N,n[41]=x,n[42]=y,n[43]=k,n[44]=R,n[45]=O,n[46]=L,n[47]=B,n[48]=E):E=n[48],E}(n,e);return(0,m.jsxs)(m.Fragment,{children:[void 0!==o?(0,m.jsx)(V,{model:e,coordX:o}):i?(0,m.jsx)(z,{leftBpOffset:l,rightBpOffset:a,numOfBpSelected:c,width:d,left:u}):null,f?(0,m.jsx)(F.A,{anchorReference:"anchorPosition",anchorPosition:{left:f.clientX,top:f.clientY},onMenuItemClick:p,open:h,onClose:b,menuItems:e.rubberBandMenuItems()}):null,(0,m.jsx)("div",{"data-testid":"rubberband_controls",className:s.rubberbandControl,ref:n,onMouseDown:x,onMouseMove:v,onMouseOut:g,children:t})]})}),K=(0,s.n)()(e=>({rubberbandContainer:{position:"relative",overflow:"hidden"},rubberbandDiv:{width:"100%",background:e.palette.action.disabledBackground,height:15,"&:hover":{background:e.palette.action.selected}}})),Z=(0,o.observer)(function({model:e}){const{classes:t}=K();return(0,m.jsxs)("div",{className:t.rubberbandContainer,children:[(0,m.jsx)(B,{model:e}),(0,m.jsx)(Q,{model:e,ControlComponent:(0,m.jsx)("div",{className:t.rubberbandDiv})}),(0,m.jsx)(E,{model:e})]})})},95929(e,t,n){n.r(t),n.d(t,{default:()=>c});var s=n(42918),o=n(87574),r=n(64074),i=n(51838),l=n(32118);const a=(0,s.lazy)(()=>Promise.all([n.e(2913),n.e(8718),n.e(8522)]).then(n.bind(n,28522))),c=(0,r.observer)(function({model:e}){const{showLoading:t,showImportForm:n,loadingMessage:s}=e;return t?(0,l.jsx)(o.A,{variant:"h6",message:s}):n?(0,l.jsx)(a,{model:e}):(0,l.jsx)(i.default,{model:e})})}}]);
//# sourceMappingURL=5929.fc8bca5a.chunk.js.map