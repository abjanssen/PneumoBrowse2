{"version":3,"file":"static/js/4401.4fdce7ea.chunk.js","mappings":"oMAWA,MAAMA,GAAYC,EAAAA,EAAAA,IAAAA,CAAa,CAC7BC,UAAW,CACTC,OAAQ,OACRC,MAAO,OACPC,QAAS,aACTC,UAAW,QAEbC,OAAQ,CACNJ,OAAQ,OA+BZ,GAhB8BK,EAAAA,EAAAA,UAAS,UAA+B,QACpEC,IAEA,MAAM,QAAEC,GAAYV,KACd,MAAEW,GAAUF,EAElB,OACEG,EAAAA,EAAAA,MAAA,OAAKC,UAAWH,EAAQR,UAAUY,SAAA,CAC/BH,EAAMI,IAAIC,IACTC,EAAAA,EAAAA,KAACC,EAAAA,EAAa,CAAeF,KAAMA,EAAMP,QAASA,GAA9BO,EAAKG,MAE3BF,EAAAA,EAAAA,KAAA,OAAKJ,UAAWH,EAAQH,WAG9B,E,0ECnCA,IAAIa,EAGO,KAEJ,SAASC,IACd,OAAOD,CACT,CAEO,SAASE,IACdF,EAAoB,IACtB,CAiBO,MAAMG,GAAkBC,EAAAA,EAAAA,eAAoC,CACjEC,IAAK,KACLC,gBAAiBA,OACjBC,YAAaA,OACbC,iBAZK,SAAgCC,GACrCT,EAAoB,CAAEU,KAAM,SAAUD,SACxC,EAWEE,qBATK,SAAoCF,GACzCT,EAAoB,CAAEU,KAAM,aAAcD,SAC5C,IAUO,SAAAG,IAAA,OACEC,EAAAA,EAAAA,YAAWV,EAAgB,C,yMCzCpC,MAAMvB,GAAYC,EAAAA,EAAAA,IAAAA,CAAaiC,IAAS,CACtCC,KAAM,CACJC,MAAOF,EAAMG,QAAQC,UAAUC,iBA8BnC,GA1BoB/B,EAAAA,EAAAA,UAAS,UAAqB,KAChDQ,EAAI,QACJwB,EAAO,WACPC,IAMA,MAAM,QAAE/B,GAAYV,IACpB,OACEY,EAAAA,EAAAA,MAAA8B,EAAAA,SAAA,CAAA5B,SAAA,EACEG,EAAAA,EAAAA,KAAC0B,EAAAA,EAAU,CAAC,cAAY,gBAAgBC,QAASH,EAAW3B,SACzDE,EAAK6B,WACJ5B,EAAAA,EAAAA,KAAC6B,EAAAA,EAAO,CAACjC,UAAWH,EAAQyB,KAAMY,SAAS,WAE3C9B,EAAAA,EAAAA,KAAC+B,EAAAA,EAAY,CAACnC,UAAWH,EAAQyB,KAAMY,SAAS,aAGpD9B,EAAAA,EAAAA,KAAC0B,EAAAA,EAAU,CAAC,cAAY,aAAaC,QAASJ,EAAQ1B,UACpDG,EAAAA,EAAAA,KAACgC,EAAAA,EAAS,CAACpC,UAAWH,EAAQyB,KAAMY,SAAS,cAIrD,G,0BC/BA,MAAM/C,GAAYC,EAAAA,EAAAA,IAAAA,CAAaiC,IAAS,CACtCgB,MAAO,CACLC,cAAe,EACfC,WAAY,GAEdC,UAAW,CACTjB,MAAOF,EAAMG,QAAQC,UAAUC,cAEjCe,UAAW,CACT,UAAW,CACTC,gBAAiBrB,EAAMG,QAAQC,UAAUkB,QAG7CC,aAAc,CACZC,YAAaxB,EAAMG,QAAQsB,QAAQC,KACnCL,gBAAiBrB,EAAMG,QAAQC,UAAUkB,UAmC7C,GAhC2BhD,EAAAA,EAAAA,UAAS,UAA4B,KAC9DQ,IAIA,MAAM,QAAEN,GAAYV,KACd,gBAAE6D,IAAoBC,EAAAA,EAAAA,YAAW9C,GACvC,OACEC,EAAAA,EAAAA,KAAC8C,EAAAA,EAAO,CAACC,MAAM,cAAcC,OAAK,EAAAnD,UAChCG,EAAAA,EAAAA,KAACiD,EAAAA,EAAkB,CACjBC,MACEnD,EAAKoD,aAEL,GAAGpD,EAAKqD,eAAetD,IAAIuD,GAAKT,EAAgBU,IAAID,IAAIF,aAAaI,KAAK,MAAQ,kBAChFxD,EAAK6B,UAAY,eAAiB,KAGtC4B,SAAUC,IACR1D,EAAK2D,eAAeD,IAEtBE,QAAQ,QACRlE,QAAS,CACPwC,MAAOxC,EAAQwC,MACfG,UAAW3C,EAAQ2C,UACnBC,UAAW5C,EAAQ4C,UACnBG,aAAc/C,EAAQ+C,iBAKhC,G,6ICpBA,MAuIA,GAvIiBjD,EAAAA,EAAAA,UAAS,UAAkB,MAC1CqE,EAAK,UACLC,IAMA,MAAMrE,GAAUqD,EAAAA,EAAAA,YAAWe,IAarB,iBAAEjD,EAAgB,qBAAEG,IAAyBC,EAAAA,EAAAA,KAC7C+C,EAAWtE,EAAQuE,gBAAiBC,EAAAA,EAAAA,GAA4BxE,GAChEyE,EAAYH,EAnCpB,SAA2BtE,EAAkBoB,GAC3C,KAAKoD,EAAAA,EAAAA,GAA4BxE,GAC/B,OAAO,EAET,IAAK,MAAM0E,KAAW1E,EAAQ2E,qBAAqBC,SACjD,GAAIF,EAAQG,SAASzD,GACnB,OAAOsD,EAAQI,OAGnB,OAAO,CACT,CA0BMC,CAAkB/E,EAASoE,EAAM1D,IACjCV,EAAQE,MAAM4E,OAEZE,EAAWA,CACfC,EACAC,KAEIZ,EACFW,EAAQb,EAAM1D,IAEdwE,EAAUd,EAAM1D,KAIpB,OACEF,EAAAA,EAAAA,KAAC2E,EAAAA,EAAmB,CAClB,cAAY,iBACZC,UAAWA,IAAM,CACf,CACEC,MAAO,eACPhE,KAAM,UACNiE,QAAS,CACP,CACED,MAAO,YACP3D,KAAM6D,EAAAA,EACNpD,QAASA,KACPnC,EAAQwF,QACNpB,EAAM/C,KCrFjB,SACLoE,GAEA,MAAMC,EAAQ,IAAIC,IA6BlB,OA3BA,SAASC,EAAalC,GACpB,GAAIA,QACF,OAAOA,EAGT,GAAImC,MAAMC,QAAQpC,GAChB,OAAOA,EAAMpD,IAAIsF,GAGnB,GAAqB,iBAAVlC,EAAoB,CAC7B,MAAMqC,EAAkC,CAAC,EACzC,IAAK,MAAOC,EAAK/B,KAAQgC,OAAOC,QAAQxC,GAC1B,OAARsC,GAA+B,iBAAR/B,GACpByB,EAAMS,IAAIlC,IACbyB,EAAMU,IAAInC,GAAKoC,EAAAA,EAAAA,MAEjBN,EAAOC,GAAO,GAAG/B,KAAOyB,EAAM5B,IAAIG,MAElC8B,EAAOC,GAAOJ,EAAa3B,GAG/B,OAAO8B,CACT,CAEA,OAAOrC,CACT,CAEOkC,CAAaH,EACtB,CDqDkBa,CACEC,iBAEEC,EAAAA,EAAAA,aAAYpC,QAMtB,CACEiB,MAAO,kBACP3D,KAAM+E,EAAAA,EACNtE,QAASA,KACPhB,EAAiBiD,EAAM1D,IACvBV,EAAQ0G,kBAAiB,KAG7B,CACErB,MAAO,4CACP3D,KAAMiF,EAAAA,EACNxE,QAASA,KACPb,EAAqB8C,EAAM1D,IAC3BV,EAAQ0G,kBAAiB,QAGzBjC,EAAY,EACZ,CACE,CACEY,MAAO,mBACP3D,KAAMkF,EAAAA,EACNzE,QAASA,KACP6C,EACEhF,EAAQ6G,qBACR7G,EAAQ8G,kBAKhB,MACArC,EAAY,EACZ,CACE,CACEY,MAAO,eACP3D,KAAMqF,EAAAA,EACN5E,QAASA,KACP6C,EAAShF,EAAQgH,kBAAmBhH,EAAQiH,cAGhD,CACE5B,MAAO,iBACP3D,KAAMwF,EAAAA,EACN/E,QAASA,KACP6C,EACEhF,EAAQmH,oBACRnH,EAAQoH,iBAKhB,MACA3C,EAAY,EACZ,CACE,CACEY,MAAO,sBACP3D,KAAM2F,EAAAA,EACNlF,QAASA,KACP6C,EACEhF,EAAQsH,wBACRtH,EAAQuH,qBAKhB,QAGLnD,EAAMgB,aACT/E,UAEFG,EAAAA,EAAAA,KAACgH,EAAAA,EAAQ,IAAKnD,EAAW/B,SAAS,WAGxC,GE3JM/C,GAAYC,EAAAA,EAAAA,IAAAA,CAAaiC,IAAS,CACtCC,KAAM,CACJC,MAAOF,EAAMG,QAAQC,UAAUC,cAEjC2F,KAAM,CACJC,SAAU,GAEZC,WAAY,CACVC,QAAS,OACTlI,OAAQmI,EAAAA,mBACRC,IAAK,EACLC,OAAQ,KAEVC,UAAW,CACTJ,QAAS,OACTK,WAAY,aAkDhB,GA9CmBlI,EAAAA,EAAAA,UAAS,UAAoB,KAC9CQ,EAAI,QACJwB,EAAO,WACPC,EAAU,UACV5B,IAOA,MAAM,QAAEH,GAAYV,IACd2I,GAAYC,EAAAA,EAAAA,QAAuB,MACnCnI,GAAUqD,EAAAA,EAAAA,YAAW9C,GAC3B,IAAI6H,GAAoB,EAYxB,OAXIC,EAAAA,EAAAA,GAA2BrI,MACzBoI,qBAAsBpI,IAK5BsI,EAAAA,EAAAA,WAAU,KACY,oBAATC,MAAwBC,OAAOC,OAASD,OAAOV,KACxDI,EAAUQ,SAASC,eAAe,CAAEC,MAAO,YAE5C,KAEDzI,EAAAA,EAAAA,MAAA,OACE0I,IAAKX,EACL9H,WAAW0I,EAAAA,EAAAA,IAAG7I,EAAQ0H,WAAYvH,GAClC2I,MAAO,CAAEC,SAAUZ,EAAoB,cAAWa,GAAY5I,SAAA,EAE9DG,EAAAA,EAAAA,KAAC0I,EAAQ,CAAC9E,MAAO7D,EAAM8D,UAAW,CAAEjE,UAAWH,EAAQyB,SACvDlB,EAAAA,EAAAA,KAAA,OAAKJ,UAAWH,EAAQwH,QACxBtH,EAAAA,EAAAA,MAAA,OAAKC,UAAWH,EAAQ+H,UAAU3H,SAAA,CAC/BL,EAAQmJ,gBAAkB5I,EAAKG,IAC9BF,EAAAA,EAAAA,KAAC4I,EAAAA,EAAsB,CAAChJ,UAAWH,EAAQyB,KAAMY,SAAS,UACxD,MACJ9B,EAAAA,EAAAA,KAAC6I,EAAkB,CAAC9I,KAAMA,QAE5BC,EAAAA,EAAAA,KAAA,OAAKJ,UAAWH,EAAQwH,QACxBjH,EAAAA,EAAAA,KAAC8I,EAAW,CAACvH,QAASA,EAASC,WAAYA,EAAYzB,KAAMA,MAGnE,G,eClEA,MAwBA,GAxBoBR,EAAAA,EAAAA,UAAS,UAAqB,KAChDQ,EAAI,QACJP,IAKA,MAAM,cAAEuJ,IAAkBC,EAAAA,EAAAA,QAAOxJ,GAC3ByJ,EAAWF,EAAcG,YAAYnJ,EAAKc,MAChD,IAAKoI,EACH,MAAM,IAAIE,MAAM,qBAAqBpJ,EAAKc,QAE5C,MAAM,eAAEuI,GAAmBH,EAC3B,OAAIlJ,EAAK6B,UACA,MAIP5B,EAAAA,EAAAA,KAACqJ,EAAAA,SAAQ,CAACC,UAAUtJ,EAAAA,EAAAA,KAACuJ,EAAAA,EAAe,CAAC5F,QAAQ,OAAQ9D,UACnDG,EAAAA,EAAAA,KAACoJ,EAAc,CAACxF,MAAO7D,EAAMP,QAASA,KAG5C,GCnBMT,GAAYC,EAAAA,EAAAA,IAAAA,CAAaiC,IAAS,CACtCuI,cAAe,CACbC,OAAQxI,EAAMyI,QAAQ,IACtBC,QAAS,KAAK1I,EAAMyI,QAAQ,MAAMzI,EAAMyI,QAAQ,KAChDE,SAAU,QAIZC,YAAa,CACXC,WAAY7I,EAAMG,QAAQC,UAAUsB,MAEtCoH,cAAe,CACbD,WAAY7I,EAAMG,QAAQC,UAAU2I,SA+DxC,GA3DsBzK,EAAAA,EAAAA,UAAS,UAAuB,KACpDQ,EAAI,QACJP,IAKA,MAAMyB,GAAQgJ,EAAAA,EAAAA,KACR5B,GAAM6B,EAAAA,EAAAA,gBAAenK,EAAMkB,EAAMyI,QAAQ,KACzC,QAAEjK,GAAYV,KAEpB+I,EAAAA,EAAAA,WAAU,KACR,SAASqC,EAAiBC,GACpBA,EAAEC,kBAAkBC,SAAWjC,EAAIH,SAASqC,SAASH,EAAEC,SACzD7K,EAAQgL,iBAAiBzK,EAAKG,GAElC,CAIA,OAFAuK,SAASC,iBAAiB,YAAaP,GACvCM,SAASC,iBAAiB,UAAWP,GAC9B,KACLM,SAASE,oBAAoB,YAAaR,GAC1CM,SAASE,oBAAoB,UAAWR,KAEzC,CAAC9B,EAAK7I,EAASO,IAElB,MAAM6K,EACJpL,EAAQmJ,gBAAkB5I,EAAKG,GAC3BT,EAAQoK,YACRpK,EAAQsK,cACRc,GAAyBvC,EAAAA,EAAAA,IAC7B7I,EAAQ+J,cACRoB,GAGF,OACEjL,EAAAA,EAAAA,MAACmL,EAAAA,EAAK,CACJzC,IAAKA,EACL0C,UAAW,GACXnL,UAAWiL,EACX,cAAa,kBAAkB9K,EAAKG,KAAKL,SAAA,EAEzCG,EAAAA,EAAAA,KAACgL,EAAU,CACTjL,KAAMA,EACNwB,QAASA,KACP/B,EAAQyL,WAAWlL,IAErByB,WAAYA,KACVzB,EAAKmL,cAAcnL,EAAK6B,YAE1BhC,UAAWgL,KAEb5K,EAAAA,EAAAA,KAAC8K,EAAAA,EAAK,CAACC,UAAW,EAAElL,UAClBG,EAAAA,EAAAA,KAACmL,EAAW,CAACpL,KAAMA,EAAMP,QAASA,QAI1C,E,0DCpFA,SAAe4L,EAAAA,EAAAA,IAA2BpL,EAAAA,EAAAA,KAAK,OAAQ,CACrDqL,EAAG,iDACD,qB,yDCFJ,SAAeD,EAAAA,EAAAA,IAA2BpL,EAAAA,EAAAA,KAAK,OAAQ,CACrDqL,EAAG,4CACD,O,yDCFJ,SAAeD,EAAAA,EAAAA,IAA2BpL,EAAAA,EAAAA,KAAK,OAAQ,CACrDqL,EAAG,kEACD,gB","sources":["webpack://@jbrowse/web/../../packages/app-core/src/ui/App/ClassicViewsContainer.tsx","webpack://@jbrowse/web/../../packages/app-core/src/ui/App/DockviewContext.tsx","webpack://@jbrowse/web/../../packages/app-core/src/ui/App/ViewButtons.tsx","webpack://@jbrowse/web/../../packages/app-core/src/ui/App/ViewContainerTitle.tsx","webpack://@jbrowse/web/../../packages/app-core/src/ui/App/ViewMenu.tsx","webpack://@jbrowse/web/../../packages/app-core/src/ui/App/copyView.ts","webpack://@jbrowse/web/../../packages/app-core/src/ui/App/ViewHeader.tsx","webpack://@jbrowse/web/../../packages/app-core/src/ui/App/ViewWrapper.tsx","webpack://@jbrowse/web/../../packages/app-core/src/ui/App/ViewContainer.tsx","webpack://@jbrowse/web/../../node_modules/.pnpm/@mui+icons-material@7.3.8_@mui+material@7.3.8_@emotion+react@11.14.0_@types+react@19.2._eea1b8ae36d0998f6630ee1e4377c145/node_modules/@mui/icons-material/esm/KeyboardArrowRight.js","webpack://@jbrowse/web/../../node_modules/.pnpm/@mui+icons-material@7.3.8_@mui+material@7.3.8_@emotion+react@11.14.0_@types+react@19.2._eea1b8ae36d0998f6630ee1e4377c145/node_modules/@mui/icons-material/esm/Menu.js","webpack://@jbrowse/web/../../node_modules/.pnpm/@mui+icons-material@7.3.8_@mui+material@7.3.8_@emotion+react@11.14.0_@types+react@19.2._eea1b8ae36d0998f6630ee1e4377c145/node_modules/@mui/icons-material/esm/VerticalSplit.js"],"sourcesContent":["import { makeStyles } from '@jbrowse/core/util/tss-react'\nimport { observer } from 'mobx-react'\n\nimport ViewContainer from './ViewContainer.tsx'\n\nimport type { SnackbarMessage } from '@jbrowse/core/ui/SnackbarModel'\nimport type {\n  AbstractViewContainer,\n  SessionWithFocusedViewAndDrawerWidgets,\n} from '@jbrowse/core/util'\n\nconst useStyles = makeStyles()({\n  container: {\n    height: '100%',\n    width: '100%',\n    gridRow: 'components',\n    overflowY: 'auto',\n  },\n  spacer: {\n    height: 300,\n  },\n})\n\ntype SessionType = SessionWithFocusedViewAndDrawerWidgets &\n  AbstractViewContainer & {\n    renameCurrentSession: (arg: string) => void\n    snackbarMessages: SnackbarMessage[]\n    popSnackbarMessage: () => unknown\n  }\n\ninterface Props {\n  session: SessionType\n}\n\nconst ClassicViewsContainer = observer(function ClassicViewsContainer({\n  session,\n}: Props) {\n  const { classes } = useStyles()\n  const { views } = session\n\n  return (\n    <div className={classes.container}>\n      {views.map(view => (\n        <ViewContainer key={view.id} view={view} session={session} />\n      ))}\n      <div className={classes.spacer} />\n    </div>\n  )\n})\n\nexport default ClassicViewsContainer\n","import { createContext, useContext } from 'react'\n\nimport type { DockviewApi, DockviewGroupPanel } from 'dockview-react'\n\ninterface DockviewContextValue {\n  api: DockviewApi | null\n  rearrangePanels: (arrange: (api: DockviewApi) => void) => void\n  addEmptyTab: (targetGroup?: DockviewGroupPanel) => void\n  moveViewToNewTab: (viewId: string) => void\n  moveViewToSplitRight: (viewId: string) => void\n}\n\n// Pending action stored when workspaces not yet enabled\nlet pendingMoveAction: {\n  type: 'newTab' | 'splitRight'\n  viewId: string\n} | null = null\n\nexport function peekPendingMoveAction() {\n  return pendingMoveAction\n}\n\nexport function clearPendingMoveAction() {\n  pendingMoveAction = null\n}\n\nexport function getPendingMoveAction() {\n  const action = pendingMoveAction\n  pendingMoveAction = null\n  return action\n}\n\n// Functions to set pending actions (used by default context and for testing)\nexport function setPendingMoveToNewTab(viewId: string) {\n  pendingMoveAction = { type: 'newTab', viewId }\n}\n\nexport function setPendingMoveToSplitRight(viewId: string) {\n  pendingMoveAction = { type: 'splitRight', viewId }\n}\n\nexport const DockviewContext = createContext<DockviewContextValue>({\n  api: null,\n  rearrangePanels: () => {},\n  addEmptyTab: () => {},\n  moveViewToNewTab: setPendingMoveToNewTab,\n  moveViewToSplitRight: setPendingMoveToSplitRight,\n})\n\nexport function useDockview() {\n  return useContext(DockviewContext)\n}\n","import { makeStyles } from '@jbrowse/core/util/tss-react'\nimport AddIcon from '@mui/icons-material/Add'\nimport CloseIcon from '@mui/icons-material/Close'\nimport MinimizeIcon from '@mui/icons-material/Minimize'\nimport { IconButton } from '@mui/material'\nimport { observer } from 'mobx-react'\n\nimport type { IBaseViewModel } from '@jbrowse/core/pluggableElementTypes/models'\n\nconst useStyles = makeStyles()(theme => ({\n  icon: {\n    color: theme.palette.secondary.contrastText,\n  },\n}))\n\nconst ViewButtons = observer(function ViewButtons({\n  view,\n  onClose,\n  onMinimize,\n}: {\n  view: IBaseViewModel\n  onClose: () => void\n  onMinimize: () => void\n}) {\n  const { classes } = useStyles()\n  return (\n    <>\n      <IconButton data-testid=\"minimize_view\" onClick={onMinimize}>\n        {view.minimized ? (\n          <AddIcon className={classes.icon} fontSize=\"small\" />\n        ) : (\n          <MinimizeIcon className={classes.icon} fontSize=\"small\" />\n        )}\n      </IconButton>\n      <IconButton data-testid=\"close_view\" onClick={onClose}>\n        <CloseIcon className={classes.icon} fontSize=\"small\" />\n      </IconButton>\n    </>\n  )\n})\n\nexport default ViewButtons\n","import EditableTypography from '@jbrowse/core/ui/EditableTypography'\nimport { getSession } from '@jbrowse/core/util'\nimport { makeStyles } from '@jbrowse/core/util/tss-react'\nimport { Tooltip } from '@mui/material'\nimport { observer } from 'mobx-react'\n\nimport type { IBaseViewModel } from '@jbrowse/core/pluggableElementTypes'\n\nconst useStyles = makeStyles()(theme => ({\n  input: {\n    paddingBottom: 0,\n    paddingTop: 2,\n  },\n  inputBase: {\n    color: theme.palette.secondary.contrastText,\n  },\n  inputRoot: {\n    '&:hover': {\n      backgroundColor: theme.palette.secondary.light,\n    },\n  },\n  inputFocused: {\n    borderColor: theme.palette.primary.main,\n    backgroundColor: theme.palette.secondary.light,\n  },\n}))\nconst ViewContainerTitle = observer(function ViewContainerTitle({\n  view,\n}: {\n  view: IBaseViewModel\n}) {\n  const { classes } = useStyles()\n  const { assemblyManager } = getSession(view)\n  return (\n    <Tooltip title=\"Rename view\" arrow>\n      <EditableTypography\n        value={\n          view.displayName ||\n          // @ts-expect-error\n          `${view.assemblyNames?.map(r => assemblyManager.get(r)?.displayName).join(',') || 'Untitled view'}${\n            view.minimized ? ' (minimized)' : ''\n          }`\n        }\n        setValue={val => {\n          view.setDisplayName(val)\n        }}\n        variant=\"body2\"\n        classes={{\n          input: classes.input,\n          inputBase: classes.inputBase,\n          inputRoot: classes.inputRoot,\n          inputFocused: classes.inputFocused,\n        }}\n      />\n    </Tooltip>\n  )\n})\n\nexport default ViewContainerTitle\n","import { CascadingMenuButton } from '@jbrowse/core/ui'\nimport { getSession } from '@jbrowse/core/util'\nimport { getSnapshot } from '@jbrowse/mobx-state-tree'\nimport ContentCopyIcon from '@mui/icons-material/ContentCopy'\nimport KeyboardArrowDownIcon from '@mui/icons-material/KeyboardArrowDown'\nimport KeyboardArrowUpIcon from '@mui/icons-material/KeyboardArrowUp'\nimport KeyboardDoubleArrowDownIcon from '@mui/icons-material/KeyboardDoubleArrowDown'\nimport KeyboardDoubleArrowUpIcon from '@mui/icons-material/KeyboardDoubleArrowUp'\nimport MenuIcon from '@mui/icons-material/Menu'\nimport OpenInNewIcon from '@mui/icons-material/OpenInNew'\nimport VerticalSplitIcon from '@mui/icons-material/VerticalSplit'\nimport { observer } from 'mobx-react'\n\nimport { useDockview } from './DockviewContext.tsx'\nimport { renameIds } from './copyView.ts'\nimport { isSessionWithDockviewLayout } from '../../DockviewLayout/index.ts'\n\nimport type { IBaseViewModel } from '@jbrowse/core/pluggableElementTypes/models'\nimport type { AbstractSessionModel } from '@jbrowse/core/util'\nimport type {\n  IconButtonProps as IconButtonPropsType,\n  SvgIconProps,\n} from '@mui/material'\n\nfunction getPanelViewCount(session: unknown, viewId: string) {\n  if (!isSessionWithDockviewLayout(session)) {\n    return 0\n  }\n  for (const viewIds of session.panelViewAssignments.values()) {\n    if (viewIds.includes(viewId)) {\n      return viewIds.length\n    }\n  }\n  return 0\n}\n\nconst ViewMenu = observer(function ViewMenu({\n  model,\n  IconProps,\n}: {\n  model: IBaseViewModel\n  IconButtonProps?: IconButtonPropsType\n  IconProps: SvgIconProps\n}) {\n  const session = getSession(model) as AbstractSessionModel & {\n    moveViewDown: (arg: string) => void\n    moveViewUp: (arg: string) => void\n    moveViewToBottom: (arg: string) => void\n    moveViewToTop: (arg: string) => void\n    moveViewUpInPanel: (arg: string) => void\n    moveViewDownInPanel: (arg: string) => void\n    moveViewToTopInPanel: (arg: string) => void\n    moveViewToBottomInPanel: (arg: string) => void\n    useWorkspaces: boolean\n    setUseWorkspaces: (arg: boolean) => void\n  }\n\n  const { moveViewToNewTab, moveViewToSplitRight } = useDockview()\n  const usePanel = session.useWorkspaces && isSessionWithDockviewLayout(session)\n  const viewCount = usePanel\n    ? getPanelViewCount(session, model.id)\n    : session.views.length\n\n  const moveView = (\n    panelFn: (id: string) => void,\n    sessionFn: (id: string) => void,\n  ) => {\n    if (usePanel) {\n      panelFn(model.id)\n    } else {\n      sessionFn(model.id)\n    }\n  }\n\n  return (\n    <CascadingMenuButton\n      data-testid=\"view_menu_icon\"\n      menuItems={() => [\n        {\n          label: 'View options',\n          type: 'subMenu' as const,\n          subMenu: [\n            {\n              label: 'Copy view',\n              icon: ContentCopyIcon,\n              onClick: () => {\n                session.addView(\n                  model.type,\n                  renameIds(\n                    structuredClone(\n                      // @ts-expect-error\n                      getSnapshot(model) as Record<string, unknown>,\n                    ),\n                  ),\n                )\n              },\n            },\n            {\n              label: 'Move to new tab',\n              icon: OpenInNewIcon,\n              onClick: () => {\n                moveViewToNewTab(model.id)\n                session.setUseWorkspaces(true)\n              },\n            },\n            {\n              label: 'Move to split view (right side of screen)',\n              icon: VerticalSplitIcon,\n              onClick: () => {\n                moveViewToSplitRight(model.id)\n                session.setUseWorkspaces(true)\n              },\n            },\n            ...(viewCount > 2\n              ? [\n                  {\n                    label: 'Move view to top',\n                    icon: KeyboardDoubleArrowUpIcon,\n                    onClick: () => {\n                      moveView(\n                        session.moveViewToTopInPanel,\n                        session.moveViewToTop,\n                      )\n                    },\n                  },\n                ]\n              : []),\n            ...(viewCount > 1\n              ? [\n                  {\n                    label: 'Move view up',\n                    icon: KeyboardArrowUpIcon,\n                    onClick: () => {\n                      moveView(session.moveViewUpInPanel, session.moveViewUp)\n                    },\n                  },\n                  {\n                    label: 'Move view down',\n                    icon: KeyboardArrowDownIcon,\n                    onClick: () => {\n                      moveView(\n                        session.moveViewDownInPanel,\n                        session.moveViewDown,\n                      )\n                    },\n                  },\n                ]\n              : []),\n            ...(viewCount > 2\n              ? [\n                  {\n                    label: 'Move view to bottom',\n                    icon: KeyboardDoubleArrowDownIcon,\n                    onClick: () => {\n                      moveView(\n                        session.moveViewToBottomInPanel,\n                        session.moveViewToBottom,\n                      )\n                    },\n                  },\n                ]\n              : []),\n          ],\n        },\n        ...model.menuItems(),\n      ]}\n    >\n      <MenuIcon {...IconProps} fontSize=\"small\" />\n    </CascadingMenuButton>\n  )\n})\nexport default ViewMenu\n","import { createElementId } from '@jbrowse/core/util/types/mst'\n\nexport function renameIds(\n  obj: Record<string, unknown>,\n): Record<string, unknown> {\n  const idMap = new Map<string, string>()\n\n  function transformIds(value: unknown): unknown {\n    if (value === null || value === undefined) {\n      return value\n    }\n\n    if (Array.isArray(value)) {\n      return value.map(transformIds)\n    }\n\n    if (typeof value === 'object') {\n      const result: Record<string, unknown> = {}\n      for (const [key, val] of Object.entries(value)) {\n        if (key === 'id' && typeof val === 'string') {\n          if (!idMap.has(val)) {\n            idMap.set(val, createElementId())\n          }\n          result[key] = `${val}-${idMap.get(val)}`\n        } else {\n          result[key] = transformIds(val)\n        }\n      }\n      return result\n    }\n\n    return value\n  }\n\n  return transformIds(obj) as Record<string, unknown>\n}\n","import { useEffect, useRef } from 'react'\n\nimport { VIEW_HEADER_HEIGHT } from '@jbrowse/core/ui'\nimport { getSession } from '@jbrowse/core/util'\nimport { cx, makeStyles } from '@jbrowse/core/util/tss-react'\nimport { isSessionWithMultipleViews } from '@jbrowse/product-core'\nimport KeyboardArrowRightIcon from '@mui/icons-material/KeyboardArrowRight'\nimport { observer } from 'mobx-react'\n\nimport ViewButtons from './ViewButtons.tsx'\nimport ViewContainerTitle from './ViewContainerTitle.tsx'\nimport ViewMenu from './ViewMenu.tsx'\n\nimport type { IBaseViewModel } from '@jbrowse/core/pluggableElementTypes/models'\n\nconst useStyles = makeStyles()(theme => ({\n  icon: {\n    color: theme.palette.secondary.contrastText,\n  },\n  grow: {\n    flexGrow: 1,\n  },\n  viewHeader: {\n    display: 'flex',\n    height: VIEW_HEADER_HEIGHT,\n    top: 0,\n    zIndex: 900,\n  },\n  viewTitle: {\n    display: 'flex',\n    alignItems: 'center',\n  },\n}))\n\nconst ViewHeader = observer(function ViewHeader({\n  view,\n  onClose,\n  onMinimize,\n  className,\n}: {\n  view: IBaseViewModel\n  onClose: () => void\n  onMinimize: () => void\n  className?: string\n}) {\n  const { classes } = useStyles()\n  const scrollRef = useRef<HTMLDivElement>(null)\n  const session = getSession(view)\n  let stickyViewHeaders = false\n  if (isSessionWithMultipleViews(session)) {\n    ;({ stickyViewHeaders } = session)\n  }\n\n  // scroll the view into view when first mounted. note: this effect will run\n  // only once, because of the empty array second param\n  useEffect(() => {\n    if (typeof jest === 'undefined' && window.self === window.top) {\n      scrollRef.current?.scrollIntoView({ block: 'center' })\n    }\n  }, [])\n  return (\n    <div\n      ref={scrollRef}\n      className={cx(classes.viewHeader, className)}\n      style={{ position: stickyViewHeaders ? 'sticky' : undefined }}\n    >\n      <ViewMenu model={view} IconProps={{ className: classes.icon }} />\n      <div className={classes.grow} />\n      <div className={classes.viewTitle}>\n        {session.focusedViewId === view.id ? (\n          <KeyboardArrowRightIcon className={classes.icon} fontSize=\"small\" />\n        ) : null}\n        <ViewContainerTitle view={view} />\n      </div>\n      <div className={classes.grow} />\n      <ViewButtons onClose={onClose} onMinimize={onMinimize} view={view} />\n    </div>\n  )\n})\n\nexport default ViewHeader\n","import { Suspense } from 'react'\n\n// ui elements\nimport LoadingEllipses from '@jbrowse/core/ui/LoadingEllipses'\nimport { getEnv } from '@jbrowse/core/util'\nimport { observer } from 'mobx-react'\n\nimport type {\n  AbstractViewModel,\n  SessionWithFocusedViewAndDrawerWidgets,\n} from '@jbrowse/core/util'\n\nconst ViewWrapper = observer(function ViewWrapper({\n  view,\n  session,\n}: {\n  view: AbstractViewModel\n  session: SessionWithFocusedViewAndDrawerWidgets\n}) {\n  const { pluginManager } = getEnv(session)\n  const viewType = pluginManager.getViewType(view.type)\n  if (!viewType) {\n    throw new Error(`unknown view type ${view.type}`)\n  }\n  const { ReactComponent } = viewType\n  if (view.minimized) {\n    return null\n  }\n\n  return (\n    <Suspense fallback={<LoadingEllipses variant=\"h6\" />}>\n      <ReactComponent model={view} session={session} />\n    </Suspense>\n  )\n})\n\nexport default ViewWrapper\n","import { useEffect } from 'react'\n\nimport { useWidthSetter } from '@jbrowse/core/util'\nimport { cx, makeStyles } from '@jbrowse/core/util/tss-react'\nimport { Paper, useTheme } from '@mui/material'\nimport { observer } from 'mobx-react'\n\nimport ViewHeader from './ViewHeader.tsx'\nimport ViewWrapper from './ViewWrapper.tsx'\n\nimport type {\n  AbstractViewModel,\n  SessionWithFocusedViewAndDrawerWidgets,\n} from '@jbrowse/core/util'\n\nconst useStyles = makeStyles()(theme => ({\n  viewContainer: {\n    margin: theme.spacing(0.5),\n    padding: `0 ${theme.spacing(1)} ${theme.spacing(1)}`,\n    overflow: 'clip',\n    // xref https://stackoverflow.com/questions/43909940/why-does-overflowhidden-prevent-positionsticky-from-working\n    // note that contain:paint also seems to work\n  },\n  focusedView: {\n    background: theme.palette.secondary.main,\n  },\n  unfocusedView: {\n    background: theme.palette.secondary.dark,\n  },\n}))\n\nconst ViewContainer = observer(function ViewContainer({\n  view,\n  session,\n}: {\n  view: AbstractViewModel\n  session: SessionWithFocusedViewAndDrawerWidgets\n}) {\n  const theme = useTheme()\n  const ref = useWidthSetter(view, theme.spacing(1))\n  const { classes } = useStyles()\n\n  useEffect(() => {\n    function handleSelectView(e: Event) {\n      if (e.target instanceof Element && ref.current?.contains(e.target)) {\n        session.setFocusedViewId(view.id)\n      }\n    }\n\n    document.addEventListener('mousedown', handleSelectView)\n    document.addEventListener('keydown', handleSelectView)\n    return () => {\n      document.removeEventListener('mousedown', handleSelectView)\n      document.removeEventListener('keydown', handleSelectView)\n    }\n  }, [ref, session, view])\n\n  const backgroundColorClassName =\n    session.focusedViewId === view.id\n      ? classes.focusedView\n      : classes.unfocusedView\n  const viewContainerClassName = cx(\n    classes.viewContainer,\n    backgroundColorClassName,\n  )\n\n  return (\n    <Paper\n      ref={ref}\n      elevation={12}\n      className={viewContainerClassName}\n      data-testid={`view-container-${view.id}`}\n    >\n      <ViewHeader\n        view={view}\n        onClose={() => {\n          session.removeView(view)\n        }}\n        onMinimize={() => {\n          view.setMinimized(!view.minimized)\n        }}\n        className={backgroundColorClassName}\n      />\n      <Paper elevation={0}>\n        <ViewWrapper view={view} session={session} />\n      </Paper>\n    </Paper>\n  )\n})\n\nexport default ViewContainer\n","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6z\"\n}), 'KeyboardArrowRight');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z\"\n}), 'Menu');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M3 15h8v-2H3zm0 4h8v-2H3zm0-8h8V9H3zm0-6v2h8V5zm10 0h8v14h-8z\"\n}), 'VerticalSplit');"],"names":["useStyles","makeStyles","container","height","width","gridRow","overflowY","spacer","observer","session","classes","views","_jsxs","className","children","map","view","_jsx","ViewContainer","id","pendingMoveAction","peekPendingMoveAction","clearPendingMoveAction","DockviewContext","createContext","api","rearrangePanels","addEmptyTab","moveViewToNewTab","viewId","type","moveViewToSplitRight","useDockview","useContext","theme","icon","color","palette","secondary","contrastText","onClose","onMinimize","_Fragment","IconButton","onClick","minimized","AddIcon","fontSize","MinimizeIcon","CloseIcon","input","paddingBottom","paddingTop","inputBase","inputRoot","backgroundColor","light","inputFocused","borderColor","primary","main","assemblyManager","getSession","Tooltip","title","arrow","EditableTypography","value","displayName","assemblyNames","r","get","join","setValue","val","setDisplayName","variant","model","IconProps","usePanel","useWorkspaces","isSessionWithDockviewLayout","viewCount","viewIds","panelViewAssignments","values","includes","length","getPanelViewCount","moveView","panelFn","sessionFn","CascadingMenuButton","menuItems","label","subMenu","ContentCopyIcon","addView","obj","idMap","Map","transformIds","Array","isArray","result","key","Object","entries","has","set","createElementId","renameIds","structuredClone","getSnapshot","OpenInNewIcon","setUseWorkspaces","VerticalSplitIcon","KeyboardDoubleArrowUpIcon","moveViewToTopInPanel","moveViewToTop","KeyboardArrowUpIcon","moveViewUpInPanel","moveViewUp","KeyboardArrowDownIcon","moveViewDownInPanel","moveViewDown","KeyboardDoubleArrowDownIcon","moveViewToBottomInPanel","moveViewToBottom","MenuIcon","grow","flexGrow","viewHeader","display","VIEW_HEADER_HEIGHT","top","zIndex","viewTitle","alignItems","scrollRef","useRef","stickyViewHeaders","isSessionWithMultipleViews","useEffect","jest","window","self","current","scrollIntoView","block","ref","cx","style","position","undefined","ViewMenu","focusedViewId","KeyboardArrowRightIcon","ViewContainerTitle","ViewButtons","pluginManager","getEnv","viewType","getViewType","Error","ReactComponent","Suspense","fallback","LoadingEllipses","viewContainer","margin","spacing","padding","overflow","focusedView","background","unfocusedView","dark","useTheme","useWidthSetter","handleSelectView","e","target","Element","contains","setFocusedViewId","document","addEventListener","removeEventListener","backgroundColorClassName","viewContainerClassName","Paper","elevation","ViewHeader","removeView","setMinimized","ViewWrapper","createSvgIcon","d"],"sourceRoot":""}