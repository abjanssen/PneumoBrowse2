"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[1272],{61272(e,n,t){t.r(n),t.d(n,{default:()=>Ae});var s=t(11259),a=t(50639),r=t(65045),o=t(99226),l=t(2016),i=t(22687),c=t(1161),d=t(1591),u=t(93673),x=t(58919),p=t(64074),h=t(23747),m=t(30936),j=t(42918),v=t(82699),g=t(77251),b=t(47785),A=t(30108),f=t(15675),C=t(27159),y=t(9625),N=t(58955),k=t(74919),S=t(96919),T=t(37015),w=t(42783),M=t(52743),L=t(32118);const F=(0,p.observer)(function({slot:e}){return(0,L.jsxs)(S.A,{children:[(0,L.jsx)(T.A,{label:e.name,control:(0,L.jsx)(w.A,{checked:e.value,onChange:n=>{e.set(n.target.checked)}})}),(0,L.jsx)(M.A,{children:e.description})]})});var E=t(19482),$=t(43506),P=t(27607);const _='Consolas, "Andale Mono WT", "Andale Mono", "Lucida Console", "Lucida Sans Typewriter", "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Liberation Mono", "Nimbus Mono L", Monaco, "Courier New", Courier, monospace',I=(0,r.n)()(e=>({callbackEditor:{marginTop:"16px",borderBottom:`1px solid ${e.palette.divider}`,width:"100%",fontFamily:_},textAreaFont:{fontFamily:_},callbackContainer:{width:"100%",overflowX:"auto"},error:{color:"red",fontSize:"0.8em"}})),W=(0,p.observer)(function({slot:e}){const{classes:n}=I(),[t,s]=(0,j.useState)(e.value),[a,r]=(0,j.useState)(),[,l]=(0,j.useTransition)();return(0,L.jsxs)(L.Fragment,{children:[a?(0,L.jsx)("p",{className:n.error,children:`${a}`}):null,(0,L.jsxs)("div",{className:n.callbackContainer,children:[(0,L.jsx)(f.A,{multiline:!0,className:n.callbackEditor,value:t.startsWith("jexl:")?t.split("jexl:")[1]:t,onChange:n=>{const t=n.target.value;s(t),l(()=>{!function(e,n,t){try{const s=e.startsWith("jexl:")?e:`jexl:${e}`;if("jexl:"===s)throw new Error("Empty jexl expression is not valid");(0,E.A)(s,(0,o.getEnv)(n).pluginManager?.jexl),n.set(s),t(void 0)}catch(e){console.error({e}),t(e)}}(t,e,r)})},style:{background:a?"#fdd":void 0},slotProps:{input:{classes:{input:n.textAreaFont}}}}),(0,L.jsx)("p",{children:e.description}),(0,L.jsx)(P.A,{title:(0,L.jsxs)("div",{children:["Callbacks are written in Jexl format. Click to learn more.",(0,L.jsx)("br",{})," Names of available context items: ",e.contextVariable]}),arrow:!0,children:(0,L.jsx)(k.A,{color:"primary",onClick:()=>{const e=window.open("https://github.com/TomFrost/Jexl","_blank","noopener,noreferrer");e&&(e.opener=null)},children:(0,L.jsx)($.A,{})})})]})]})});var V=t(58501);const O=e=>{const n=(0,m.c)(22),{value:t,label:s,TextFieldProps:a,onChange:r}=e,o=void 0===s?"":s;let l;n[0]!==a?(l=void 0===a?{}:a,n[0]=a,n[1]=l):l=n[1];const i=l,[c,d]=(0,j.useState)(!1);let u,x,p,h,v,g,b,A;return n[2]===Symbol.for("react.memo_cache_sentinel")?(u={display:"flex"},n[2]=u):u=n[2],n[3]!==c?(x=()=>{d(!c)},n[3]=c,n[4]=x):x=n[4],n[5]!==r?(p=e=>{r(e.target.value)},n[5]=r,n[6]=p):p=n[6],n[7]!==i||n[8]!==o||n[9]!==x||n[10]!==p||n[11]!==t?(h=(0,L.jsx)(f.A,{value:t,label:o,onClick:x,onChange:p,...i}),n[7]=i,n[8]=o,n[9]=x,n[10]=p,n[11]=t,n[12]=h):h=n[12],n[13]===Symbol.for("react.memo_cache_sentinel")?(v={marginTop:10},n[13]=v):v=n[13],n[14]!==r?(g=e=>{r(e)},n[14]=r,n[15]=g):g=n[15],n[16]!==g||n[17]!==t?(b=(0,L.jsx)("div",{style:v,children:(0,L.jsx)(j.Suspense,{fallback:null,children:(0,L.jsx)(V.Ay,{color:t,onChange:g})})}),n[16]=g,n[17]=t,n[18]=b):b=n[18],n[19]!==h||n[20]!==b?(A=(0,L.jsxs)("div",{style:u,children:[h,b]}),n[19]=h,n[20]=b,n[21]=A):A=n[21],A},J=(0,p.observer)(function(e){const{slot:n}=e;return(0,L.jsx)(O,{label:n.name,value:n.value,onChange:e=>{n.set(e)},TextFieldProps:{helperText:n.description,fullWidth:!0}})});function D(e){const n=(0,m.c)(6),{helperText:t}=e,s=t||"";let r,o,l;return n[0]!==s?(r=(0,L.jsx)(a.A,{html:s}),n[0]=s,n[1]=r):r=n[1],n[2]===Symbol.for("react.memo_cache_sentinel")?(o={formHelperText:{component:"div"}},n[2]=o):o=n[2],n[3]!==e||n[4]!==r?(l=(0,L.jsx)(f.A,{...e,helperText:r,fullWidth:!0,slotProps:o}),n[3]=e,n[4]=r,n[5]=l):l=n[5],l}var H=t(74753);const z='Consolas, "Andale Mono WT", "Andale Mono", "Lucida Console", "Lucida Sans Typewriter", "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Liberation Mono", "Nimbus Mono L", Monaco, "Courier New", Courier, monospace',B=(0,r.n)()(e=>({error:{color:"red",fontSize:"0.8em"},callbackEditor:{fontFamily:z,fontSize:"12px",background:e.palette.background.default,width:800,marginTop:"16px",border:"1px solid rgba(0,0,0,0.42)"},callbackContainer:{width:"100%",overflowX:"auto"},textAreaFont:{fontFamily:z}})),K=(0,p.observer)(function({slot:e}){const{classes:n}=B(),[t,s]=(0,j.useState)(JSON.stringify(e.value,null,2)),[a,r]=(0,j.useState)();return(0,j.useEffect)(()=>{try{r(void 0),e.set(JSON.parse(t))}catch(e){console.error({e}),r(e)}},[t,e]),(0,L.jsxs)(L.Fragment,{children:[a?(0,L.jsx)("p",{className:n.error,children:`${a}`}):null,(0,L.jsxs)("div",{className:n.callbackContainer,children:[(0,L.jsx)(H.A,{shrink:!0,htmlFor:"json-editor",children:e.name}),(0,L.jsx)(f.A,{id:"json-editor",className:n.callbackEditor,value:t,helperText:e.description,multiline:!0,onChange:e=>{s(e.target.value)},style:{background:a?"#fdd":void 0},slotProps:{input:{classes:{input:n.textAreaFont}}}})]})]})}),G=(0,p.observer)(function({slot:e}){const[n,t]=(0,j.useState)(e.value);return(0,j.useEffect)(()=>{const t=Number.parseFloat(n);Number.isNaN(t)?e.reset?.():e.set(t)},[e,n]),(0,L.jsx)(D,{label:e.name,helperText:e.description,value:n,type:"number",onChange:e=>{t(e.target.value)}})});var X=t(87134),Z=t(22762),Q=t(57465),R=t(82823),U=t(30967),q=t(13737);const Y=(0,r.n)()(e=>({card:{marginTop:e.spacing(1)}})),ee=(0,p.observer)(function({slot:e}){const{classes:n}=Y(),[t,s]=(0,j.useState)("");return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(H.A,{children:e.name}),[...e.value].map(([t,s])=>(0,L.jsxs)(Q.A,{raised:!0,className:n.card,children:[(0,L.jsx)(R.A,{title:t,action:(0,L.jsx)(k.A,{onClick:()=>{e.remove(t)},children:(0,L.jsx)(Z.A,{})})}),(0,L.jsx)(U.A,{children:(0,L.jsx)(G,{slot:{value:s,set:n=>{e.add(t,n)}}})})]},t)),(0,L.jsx)(Q.A,{raised:!0,className:n.card,children:(0,L.jsx)(R.A,{disableTypography:!0,title:(0,L.jsx)(f.A,{fullWidth:!0,value:t,placeholder:"add new",onChange:e=>{s(e.target.value)},slotProps:{input:{endAdornment:(0,L.jsx)(q.A,{position:"end",children:(0,L.jsx)(k.A,{disabled:""===t,onClick:()=>{e.add(t,0),s("")},children:(0,L.jsx)(X.A,{})})})}}})})}),(0,L.jsx)(M.A,{children:e.description})]})});var ne=t(20817),te=t(40639),se=t(65525);const ae=(0,p.observer)(function({slot:e}){const[n,t]=(0,j.useState)(""),[s,a]=(0,j.useState)(!1);return(0,L.jsxs)(L.Fragment,{children:[e.name?(0,L.jsx)(H.A,{children:e.name}):null,(0,L.jsxs)(ne.A,{disablePadding:!0,children:[e.value.map((n,t)=>(0,L.jsx)(te.Ay,{disableGutters:!0,children:(0,L.jsx)(f.A,{value:n,onChange:n=>{e.setAtIndex(t,n.target.value)},slotProps:{input:{endAdornment:(0,L.jsx)(q.A,{position:"end",children:(0,L.jsx)(k.A,{onClick:()=>{e.removeAtIndex(t)},children:(0,L.jsx)(Z.A,{})})})}}})},`${JSON.stringify(n)}-${t}`)),s?(0,L.jsx)(te.Ay,{disableGutters:!0,children:(0,L.jsx)(f.A,{value:n,placeholder:"add new",onChange:e=>{t(e.target.value)},slotProps:{input:{endAdornment:(0,L.jsx)(q.A,{position:"end",children:(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(se.A,{color:"primary",variant:"contained",style:{margin:2},"data-testid":`stringArrayAdd-${e.name}`,onClick:()=>{a(!1),e.add(n),t("")},children:"OK"}),(0,L.jsx)(se.A,{color:"primary",variant:"contained",style:{margin:2},onClick:()=>{a(!1),t("")},children:"Cancel"})]})})}}})}):null,(0,L.jsx)(se.A,{color:"primary",variant:"contained",style:{margin:4},disabled:s,onClick:()=>{a(!0)},children:"Add item"})]}),(0,L.jsx)(M.A,{children:e.description})]})}),re=(0,r.n)()(e=>({card:{marginTop:e.spacing(1)}})),oe=(0,p.observer)(function({slot:e}){const{classes:n}=re(),[t,s]=(0,j.useState)("");return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(H.A,{children:e.name}),[...e.value].map(([t,s])=>(0,L.jsxs)(Q.A,{raised:!0,className:n.card,children:[(0,L.jsx)(R.A,{title:t,action:(0,L.jsx)(k.A,{onClick:()=>{e.remove(t)},children:(0,L.jsx)(Z.A,{})})}),(0,L.jsx)(U.A,{children:(0,L.jsx)(ae,{slot:{name:e.name,value:s,description:`Values associated with entry ${t}`,setAtIndex:(n,s)=>{e.setAtKeyIndex(t,n,s)},removeAtIndex:n=>{e.removeAtKeyIndex(t,n)},add:n=>{e.addToKey(t,n)}}})})]},t)),(0,L.jsx)(Q.A,{raised:!0,className:n.card,children:(0,L.jsx)(R.A,{disableTypography:!0,title:(0,L.jsx)(f.A,{fullWidth:!0,value:t,placeholder:"add new",onChange:e=>{s(e.target.value)},slotProps:{input:{endAdornment:(0,L.jsx)(q.A,{position:"end",children:(0,L.jsx)(k.A,{disabled:""===t,onClick:()=>{e.add(t,[]),s("")},children:(0,L.jsx)(X.A,{})})})}}})})}),(0,L.jsx)(M.A,{children:e.description})]})}),le=(0,r.n)()(e=>({paper:{display:"flex",marginBottom:e.spacing(2),position:"relative"},paperContent:{width:"100%"},slotModeSwitch:{width:24,background:e.palette.secondary.light,display:"flex",justifyContent:"center",alignItems:"center"}})),ie=(0,p.observer)(function({slot:e}){return(0,L.jsx)(D,{label:e.name,helperText:e.description,value:e.value,onChange:n=>{e.set(n.target.value)}})}),ce=(0,p.observer)(function({slot:e}){return(0,L.jsx)(f.A,{label:e.name,helperText:e.description,multiline:!0,value:e.value,onChange:n=>{e.set(n.target.value)}})}),de=()=>{const e=(0,m.c)(1);let n;return e[0]===Symbol.for("react.memo_cache_sentinel")?(n=(0,L.jsx)(C.A,{children:(0,L.jsx)("path",{d:"M20.41,3C21.8,5.71 22.35,8.84 22,12C21.8,15.16 20.7,18.29 18.83,21L17.3,20C18.91,17.57 19.85,14.8 20,12C20.34,9.2 19.89,6.43 18.7,4L20.41,3M5.17,3L6.7,4C5.09,6.43 4.15,9.2 4,12C3.66,14.8 4.12,17.57 5.3,20L3.61,21C2.21,18.29 1.65,15.17 2,12C2.2,8.84 3.3,5.71 5.17,3M12.08,10.68L14.4,7.45H16.93L13.15,12.45L15.35,17.37H13.09L11.71,14L9.28,17.33H6.76L10.66,12.21L8.53,7.45H10.8L12.08,10.68Z"})}),e[0]=n):n=e[0],n},ue=(0,p.observer)(function({slot:e}){const[n,t]=(0,j.useState)(e.value);return(0,j.useEffect)(()=>{const t=Number.parseInt(n,10);Number.isNaN(t)||e.set(t)},[e,n]),(0,L.jsx)(D,{label:e.name,helperText:e.description,value:n,type:"number",onChange:e=>{t(e.target.value)}})}),xe=(0,p.observer)(function({slot:e,slotSchema:n}){const t=(0,o.getPropertyMembers)((0,b.getSubType)(n)),s=(0,b.getUnionSubTypes)((0,b.getUnionSubTypes)((0,b.getSubType)(t.properties.value))[1]).map(e=>e.value);return(0,L.jsx)(D,{value:e.value,label:e.name,select:!0,helperText:e.description,onChange:n=>{e.set(n.target.value)},children:s.map(e=>(0,L.jsx)(y.A,{value:e,children:e},e))})}),pe=(0,p.observer)(function({slot:e}){return(0,L.jsx)(v.A,{location:e.value,setLocation:n=>{e.set(n)},name:e.name,description:e.description,rootModel:(0,g.getEnv)(e).pluginManager.rootModel})}),he={string:ie,text:ce,fileLocation:pe,stringArray:ae,stringArrayMap:oe,numberMap:ee,number:G,integer:ue,color:J,stringEnum:xe,boolean:F,frozen:K,configRelationships:K},me=(0,p.observer)(function({slot:e,slotSchema:n}){const{classes:t}=le(),{type:s}=e;let a=e.isCallback?W:he[s];return a||(console.warn(`no slot editor defined for ${s}, editing as string`),a=ie),s in he||console.warn(`SlotEditor needs to implement ${s}`),(0,L.jsxs)(N.A,{className:t.paper,children:[(0,L.jsx)("div",{className:t.paperContent,children:(0,L.jsx)(a,{slot:e,slotSchema:n})}),(0,L.jsx)("div",{className:t.slotModeSwitch,children:e.contextVariable.length?(0,L.jsx)(k.A,{onClick:()=>e.isCallback?e.convertToValue():e.convertToCallback(),title:"convert to "+(e.isCallback?"regular value":"callback"),children:e.isCallback?(0,L.jsx)(de,{}):(0,L.jsx)(A.A,{})}):null})]})}),je=(0,p.observer)(function({typeNameChoices:e,slot:n,slotName:t,onChange:s}){const{classes:a}=le();return(0,L.jsx)(N.A,{className:a.paper,children:(0,L.jsx)("div",{className:a.paperContent,children:(0,L.jsx)(f.A,{value:n.type,label:"Type",select:!0,helperText:`Type of ${t} to use`,fullWidth:!0,onChange:s,children:e.map(e=>(0,L.jsx)(y.A,{value:e,children:e},e))})})})}),ve=(0,r.n)()(e=>({icon:{color:e.palette.tertiary.contrastText||"#fff"},expansionPanelDetails:{display:"block",padding:e.spacing(1)},accordion:{border:`1px solid ${e.palette.text.primary}`},noOverflow:{width:"100%",overflowX:"auto"}})),ge=(0,p.observer)(function e(n){const{classes:t}=ve(),{slotName:a,slotSchema:r,schema:o,slot:p=o[a],path:m=[]}=n;if((0,s.oG)(r)){if(p.length)return p.map((t,s)=>{const r=t.type?`${(0,h.singular)(a)} ${t.type}`:`${(0,h.singular)(a)} ${s+1}`;return(0,L.jsx)(e,{...n,slot:t,slotName:r},r)});const j=(0,s.JC)(r);return(0,L.jsxs)(i.A,{defaultExpanded:!0,className:t.accordion,children:[(0,L.jsx)(c.A,{expandIcon:(0,L.jsx)(l.A,{className:t.icon}),children:(0,L.jsx)(d.A,{children:[...m,a].join("âž”")})}),(0,L.jsxs)(u.A,{className:t.expansionPanelDetails,children:[j.length?(0,L.jsx)(je,{typeNameChoices:j,slotName:a,slot:p,onChange:e=>{e.target.value!==p.type&&o.setSubschema(a,{type:e.target.value})}}):null,(0,L.jsx)(x.A,{className:t.noOverflow,children:(0,L.jsx)(be,{schema:p,path:[...m,a]})})]})]})}return(0,s.Rg)(r)?(0,L.jsx)(me,{slot:p,slotSchema:r},a):null}),be=(0,p.observer)(function({schema:e,path:n=[]}){const t=(0,o.getMembers)(e).properties;return(0,L.jsx)(L.Fragment,{children:Object.entries(t).map(([t,s])=>(0,L.jsx)(ge,{slotName:t,slotSchema:s,path:n,schema:e},t))})}),Ae=(0,p.observer)(function({model:e}){const{classes:n}=ve(),t=e.target;if(!t)return(0,L.jsx)(d.A,{children:"No configuration target"});const r=(0,s.QZ)(t,"trackId"),o=(0,s.QZ)(t,"name");return(0,L.jsxs)(i.A,{defaultExpanded:!0,className:n.accordion,children:[(0,L.jsx)(c.A,{expandIcon:(0,L.jsx)(l.A,{className:n.icon}),children:(0,L.jsx)(d.A,{children:(0,L.jsx)(a.A,{html:o??"Configuration"})})}),(0,L.jsx)(u.A,{className:n.expansionPanelDetails,"data-testid":"configEditor",children:(0,L.jsx)(be,{schema:t})})]},r)})}}]);
//# sourceMappingURL=1272.dd8e1f8c.chunk.js.map