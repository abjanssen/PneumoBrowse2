"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[7874],{57874:(e,n,t)=>{t.r(n),t.d(n,{default:()=>Ae});var s=t(68584),a=t(13476),r=t(48759),o=t(76386),l=t(75068),i=t(61282),c=t(3032),d=t(36866),u=t(68446),p=t(36422),x=t(93091),h=t(75785),m=t(67758),j=t(7552),v=t(67112),b=t(99546),g=t(23550),A=t(54063),f=t(93062),C=t(94874),y=t(10240),N=t(95054),S=t(89870),k=t(91818),T=t(7946),w=t(22762),M=t(29654),L=t(69500);const F=(0,u.observer)(function({slot:e}){return(0,L.jsxs)(k.A,{children:[(0,L.jsx)(T.A,{label:e.name,control:(0,L.jsx)(w.A,{checked:e.value,onChange:n=>{e.set(n.target.checked)}})}),(0,L.jsx)(M.A,{children:e.description})]})});var E=t(43283),$=t(15897),P=t(37962);const _='Consolas, "Andale Mono WT", "Andale Mono", "Lucida Console", "Lucida Sans Typewriter", "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Liberation Mono", "Nimbus Mono L", Monaco, "Courier New", Courier, monospace',I=(0,h.n9)()(e=>({callbackEditor:{marginTop:"16px",borderBottom:`1px solid ${e.palette.divider}`,width:"100%",fontFamily:_},textAreaFont:{fontFamily:_},callbackContainer:{width:"100%",overflowX:"auto"},error:{color:"red",fontSize:"0.8em"}})),O=(0,u.observer)(function({slot:e}){const{classes:n}=I(),[t,s]=(0,j.useState)(e.value),[a,r]=(0,j.useState)(),o=(0,b.useDebounce)(t,400);return(0,j.useEffect)(()=>{try{const n=o.startsWith("jexl:")?o:`jexl:${o}`;if("jexl:"===n)throw new Error("Empty jexl expression is not valid");(0,E.A)(n,(0,p.getEnv)(e).pluginManager?.jexl),e.set(n),r(void 0)}catch(e){console.error({e}),r(e)}},[o,e]),(0,L.jsxs)(L.Fragment,{children:[a?(0,L.jsx)("p",{className:n.error,children:`${a}`}):null,(0,L.jsxs)("div",{className:n.callbackContainer,children:[(0,L.jsx)(f.A,{multiline:!0,className:n.callbackEditor,value:t.startsWith("jexl:")?t.split("jexl:")[1]:t,onChange:e=>{s(e.target.value)},style:{background:a?"#fdd":void 0},slotProps:{input:{classes:{input:n.textAreaFont}}}}),(0,L.jsx)("p",{children:e.description}),(0,L.jsx)(P.A,{title:(0,L.jsxs)("div",{children:["Callbacks are written in Jexl format. Click to learn more.",(0,L.jsx)("br",{})," Names of available context items: ",e.contextVariable]}),arrow:!0,children:(0,L.jsx)(S.A,{color:"primary",onClick:()=>{const e=window.open("https://github.com/TomFrost/Jexl","_blank","noopener,noreferrer");e&&(e.opener=null)},children:(0,L.jsx)($.A,{})})})]})]})});var W=t(66395);const V=e=>{const n=(0,m.c)(22),{value:t,label:s,TextFieldProps:a,onChange:r}=e,o=void 0===t?"#000":t,l=void 0===s?"":s;let i;n[0]!==a?(i=void 0===a?{}:a,n[0]=a,n[1]=i):i=n[1];const c=i,[d,u]=(0,j.useState)(!1);let p,x,h,v,b,g,A,C;return n[2]===Symbol.for("react.memo_cache_sentinel")?(p={display:"flex"},n[2]=p):p=n[2],n[3]!==d?(x=()=>{u(!d)},n[3]=d,n[4]=x):x=n[4],n[5]!==r?(h=e=>{r(e.target.value)},n[5]=r,n[6]=h):h=n[6],n[7]!==c||n[8]!==l||n[9]!==x||n[10]!==h||n[11]!==o?(v=(0,L.jsx)(f.A,{value:o,label:l,onClick:x,onChange:h,...c}),n[7]=c,n[8]=l,n[9]=x,n[10]=h,n[11]=o,n[12]=v):v=n[12],n[13]===Symbol.for("react.memo_cache_sentinel")?(b={marginTop:10},n[13]=b):b=n[13],n[14]!==r?(g=e=>{r(e)},n[14]=r,n[15]=g):g=n[15],n[16]!==g||n[17]!==o?(A=(0,L.jsx)("div",{style:b,children:(0,L.jsx)(j.Suspense,{fallback:null,children:(0,L.jsx)(W.Ay,{color:o,onChange:g})})}),n[16]=g,n[17]=o,n[18]=A):A=n[18],n[19]!==A||n[20]!==v?(C=(0,L.jsxs)("div",{style:p,children:[v,A]}),n[19]=A,n[20]=v,n[21]=C):C=n[21],C},D=(0,u.observer)(function(e){const{slot:n}=e;return(0,L.jsx)(V,{label:n.name,value:n.value,onChange:e=>{n.set(e)},TextFieldProps:{helperText:n.description,fullWidth:!0}})});function H(e){const n=(0,m.c)(6),{helperText:t}=e,s=t||"";let a,r,o;return n[0]!==s?(a=(0,L.jsx)(v.SanitizedHTML,{html:s}),n[0]=s,n[1]=a):a=n[1],n[2]===Symbol.for("react.memo_cache_sentinel")?(r={formHelperText:{component:"div"}},n[2]=r):r=n[2],n[3]!==e||n[4]!==a?(o=(0,L.jsx)(f.A,{...e,helperText:a,fullWidth:!0,slotProps:r}),n[3]=e,n[4]=a,n[5]=o):o=n[5],o}var z=t(52348);const J='Consolas, "Andale Mono WT", "Andale Mono", "Lucida Console", "Lucida Sans Typewriter", "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Liberation Mono", "Nimbus Mono L", Monaco, "Courier New", Courier, monospace',B=(0,h.n9)()(e=>({error:{color:"red",fontSize:"0.8em"},callbackEditor:{fontFamily:J,fontSize:"12px",background:e.palette.background.default,width:800,marginTop:"16px",border:"1px solid rgba(0,0,0,0.42)"},callbackContainer:{width:"100%",overflowX:"auto"},textAreaFont:{fontFamily:J}})),K=(0,u.observer)(function({slot:e}){const{classes:n}=B(),[t,s]=(0,j.useState)(JSON.stringify(e.value,null,2)),[a,r]=(0,j.useState)();return(0,j.useEffect)(()=>{try{r(void 0),e.set(JSON.parse(t))}catch(e){console.error({e}),r(e)}},[t,e]),(0,L.jsxs)(L.Fragment,{children:[a?(0,L.jsx)("p",{className:n.error,children:`${a}`}):null,(0,L.jsxs)("div",{className:n.callbackContainer,children:[(0,L.jsx)(z.A,{shrink:!0,htmlFor:"json-editor",children:e.name}),(0,L.jsx)(f.A,{id:"json-editor",className:n.callbackEditor,value:t,helperText:e.description,multiline:!0,onChange:e=>{s(e.target.value)},style:{background:a?"#fdd":void 0},slotProps:{input:{classes:{input:n.textAreaFont}}}})]})]})}),U=(0,u.observer)(function({slot:e}){const[n,t]=(0,j.useState)(e.value);return(0,j.useEffect)(()=>{const t=Number.parseFloat(n);Number.isNaN(t)?e.reset?.():e.set(t)},[e,n]),(0,L.jsx)(H,{label:e.name,helperText:e.description,value:n,type:"number",onChange:e=>{t(e.target.value)}})});var X=t(18423),G=t(74281),R=t(74900),Z=t(31106),q=t(5026),Q=t(33896);const Y=(0,h.n9)()(e=>({card:{marginTop:e.spacing(1)}})),ee=(0,u.observer)(function({slot:e}){const{classes:n}=Y(),[t,s]=(0,j.useState)("");return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(z.A,{children:e.name}),[...e.value].map(([t,s])=>(0,L.jsxs)(R.A,{raised:!0,className:n.card,children:[(0,L.jsx)(Z.A,{title:t,action:(0,L.jsx)(S.A,{onClick:()=>{e.remove(t)},children:(0,L.jsx)(G.A,{})})}),(0,L.jsx)(q.A,{children:(0,L.jsx)(U,{slot:{value:s,set:n=>{e.add(t,n)}}})})]},t)),(0,L.jsx)(R.A,{raised:!0,className:n.card,children:(0,L.jsx)(Z.A,{disableTypography:!0,title:(0,L.jsx)(f.A,{fullWidth:!0,value:t,placeholder:"add new",onChange:e=>{s(e.target.value)},slotProps:{input:{endAdornment:(0,L.jsx)(Q.A,{position:"end",children:(0,L.jsx)(S.A,{disabled:""===t,onClick:()=>{e.add(t,0),s("")},children:(0,L.jsx)(X.A,{})})})}}})})}),(0,L.jsx)(M.A,{children:e.description})]})});var ne=t(91464),te=t(36144),se=t(69092);const ae=(0,u.observer)(function({slot:e}){const[n,t]=(0,j.useState)(""),[s,a]=(0,j.useState)(!1);return(0,L.jsxs)(L.Fragment,{children:[e.name?(0,L.jsx)(z.A,{children:e.name}):null,(0,L.jsxs)(ne.A,{disablePadding:!0,children:[e.value.map((n,t)=>(0,L.jsx)(te.Ay,{disableGutters:!0,children:(0,L.jsx)(f.A,{value:n,onChange:n=>{e.setAtIndex(t,n.target.value)},slotProps:{input:{endAdornment:(0,L.jsx)(Q.A,{position:"end",children:(0,L.jsx)(S.A,{onClick:()=>{e.removeAtIndex(t)},children:(0,L.jsx)(G.A,{})})})}}})},`${JSON.stringify(n)}-${t}`)),s?(0,L.jsx)(te.Ay,{disableGutters:!0,children:(0,L.jsx)(f.A,{value:n,placeholder:"add new",onChange:e=>{t(e.target.value)},slotProps:{input:{endAdornment:(0,L.jsx)(Q.A,{position:"end",children:(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(se.A,{color:"primary",variant:"contained",style:{margin:2},"data-testid":`stringArrayAdd-${e.name}`,onClick:()=>{a(!1),e.add(n),t("")},children:"OK"}),(0,L.jsx)(se.A,{color:"primary",variant:"contained",style:{margin:2},onClick:()=>{a(!1),t("")},children:"Cancel"})]})})}}})}):null,(0,L.jsx)(se.A,{color:"primary",variant:"contained",style:{margin:4},disabled:s,onClick:()=>{a(!0)},children:"Add item"})]}),(0,L.jsx)(M.A,{children:e.description})]})}),re=(0,h.n9)()(e=>({card:{marginTop:e.spacing(1)}})),oe=(0,u.observer)(function({slot:e}){const{classes:n}=re(),[t,s]=(0,j.useState)("");return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(z.A,{children:e.name}),[...e.value].map(([t,s])=>(0,L.jsxs)(R.A,{raised:!0,className:n.card,children:[(0,L.jsx)(Z.A,{title:t,action:(0,L.jsx)(S.A,{onClick:()=>{e.remove(t)},children:(0,L.jsx)(G.A,{})})}),(0,L.jsx)(q.A,{children:(0,L.jsx)(ae,{slot:{name:e.name,value:s,description:`Values associated with entry ${t}`,setAtIndex:(n,s)=>{e.setAtKeyIndex(t,n,s)},removeAtIndex:n=>{e.removeAtKeyIndex(t,n)},add:n=>{e.addToKey(t,n)}}})})]},t)),(0,L.jsx)(R.A,{raised:!0,className:n.card,children:(0,L.jsx)(Z.A,{disableTypography:!0,title:(0,L.jsx)(f.A,{fullWidth:!0,value:t,placeholder:"add new",onChange:e=>{s(e.target.value)},slotProps:{input:{endAdornment:(0,L.jsx)(Q.A,{position:"end",children:(0,L.jsx)(S.A,{disabled:""===t,onClick:()=>{e.add(t,[]),s("")},children:(0,L.jsx)(X.A,{})})})}}})})}),(0,L.jsx)(M.A,{children:e.description})]})}),le=(0,h.n9)()(e=>({paper:{display:"flex",marginBottom:e.spacing(2),position:"relative"},paperContent:{width:"100%"},slotModeSwitch:{width:24,background:e.palette.secondary.light,display:"flex",justifyContent:"center",alignItems:"center"}})),ie=(0,u.observer)(function({slot:e}){return(0,L.jsx)(H,{label:e.name,helperText:e.description,value:e.value,onChange:n=>{e.set(n.target.value)}})}),ce=(0,u.observer)(function({slot:e}){return(0,L.jsx)(f.A,{label:e.name,helperText:e.description,multiline:!0,value:e.value,onChange:n=>{e.set(n.target.value)}})}),de=()=>{const e=(0,m.c)(1);let n;return e[0]===Symbol.for("react.memo_cache_sentinel")?(n=(0,L.jsx)(C.A,{children:(0,L.jsx)("path",{d:"M20.41,3C21.8,5.71 22.35,8.84 22,12C21.8,15.16 20.7,18.29 18.83,21L17.3,20C18.91,17.57 19.85,14.8 20,12C20.34,9.2 19.89,6.43 18.7,4L20.41,3M5.17,3L6.7,4C5.09,6.43 4.15,9.2 4,12C3.66,14.8 4.12,17.57 5.3,20L3.61,21C2.21,18.29 1.65,15.17 2,12C2.2,8.84 3.3,5.71 5.17,3M12.08,10.68L14.4,7.45H16.93L13.15,12.45L15.35,17.37H13.09L11.71,14L9.28,17.33H6.76L10.66,12.21L8.53,7.45H10.8L12.08,10.68Z"})}),e[0]=n):n=e[0],n},ue=(0,u.observer)(function({slot:e}){const[n,t]=(0,j.useState)(e.value);return(0,j.useEffect)(()=>{const t=Number.parseInt(n,10);Number.isNaN(t)||e.set(t)},[e,n]),(0,L.jsx)(H,{label:e.name,helperText:e.description,value:n,type:"number",onChange:e=>{t(e.target.value)}})}),pe=(0,u.observer)(function({slot:e,slotSchema:n}){const t=(0,p.getPropertyMembers)((0,g.getSubType)(n)),s=(0,g.getUnionSubTypes)((0,g.getUnionSubTypes)((0,g.getSubType)(t.properties.value))[1]).map(e=>e.value);return(0,L.jsx)(H,{value:e.value,label:e.name,select:!0,helperText:e.description,onChange:n=>{e.set(n.target.value)},children:s.map(e=>(0,L.jsx)(y.A,{value:e,children:e},e))})}),xe=(0,u.observer)(function({slot:e}){return(0,L.jsx)(v.FileSelector,{location:e.value,setLocation:n=>{e.set(n)},name:e.name,description:e.description,rootModel:(0,b.getEnv)(e).pluginManager?.rootModel})}),he={string:ie,text:ce,fileLocation:xe,stringArray:ae,stringArrayMap:oe,numberMap:ee,number:U,integer:ue,color:D,stringEnum:pe,boolean:F,frozen:K,configRelationships:K},me=(0,u.observer)(function({slot:e,slotSchema:n}){const{classes:t}=le(),{type:s}=e;let a=e.isCallback?O:he[s];return a||(console.warn(`no slot editor defined for ${s}, editing as string`),a=ie),s in he||console.warn(`SlotEditor needs to implement ${s}`),(0,L.jsxs)(N.A,{className:t.paper,children:[(0,L.jsx)("div",{className:t.paperContent,children:(0,L.jsx)(a,{slot:e,slotSchema:n})}),(0,L.jsx)("div",{className:t.slotModeSwitch,children:e.contextVariable.length?(0,L.jsx)(S.A,{onClick:()=>e.isCallback?e.convertToValue():e.convertToCallback(),title:"convert to "+(e.isCallback?"regular value":"callback"),children:e.isCallback?(0,L.jsx)(de,{}):(0,L.jsx)(A.A,{})}):null})]})}),je=(0,u.observer)(function({typeNameChoices:e,slot:n,slotName:t,onChange:s}){const{classes:a}=le();return(0,L.jsx)(N.A,{className:a.paper,children:(0,L.jsx)("div",{className:a.paperContent,children:(0,L.jsx)(f.A,{value:n.type,label:"Type",select:!0,helperText:`Type of ${t} to use`,fullWidth:!0,onChange:s,children:e.map(e=>(0,L.jsx)(y.A,{value:e,children:e},e))})})})}),ve=(0,h.n9)()(e=>({icon:{color:e.palette.tertiary.contrastText||"#fff"},expansionPanelDetails:{display:"block",padding:e.spacing(1)},accordion:{border:`1px solid ${e.palette.text.primary}`},noOverflow:{width:"100%",overflowX:"auto"}})),be=(0,u.observer)(function(e){const{classes:n}=ve(),{slotName:t,slotSchema:a,schema:u,slot:p=u[t],path:h=[]}=e;if((0,s.isConfigurationSchemaType)(a)){if(p.length)return p.map((n,s)=>{const a=n.type?`${(0,x.singular)(t)} ${n.type}`:`${(0,x.singular)(t)} ${s+1}`;return(0,L.jsx)(be,{...e,slot:n,slotName:a},a)});const m=(0,s.getTypeNamesFromExplicitlyTypedUnion)(a);return(0,L.jsxs)(o.A,{defaultExpanded:!0,className:n.accordion,children:[(0,L.jsx)(l.A,{expandIcon:(0,L.jsx)(r.A,{className:n.icon}),children:(0,L.jsx)(i.A,{children:[...h,t].join("âž”")})}),(0,L.jsxs)(c.A,{className:n.expansionPanelDetails,children:[m.length?(0,L.jsx)(je,{typeNameChoices:m,slotName:t,slot:p,onChange:e=>{e.target.value!==p.type&&u.setSubschema(t,{type:e.target.value})}}):null,(0,L.jsx)(d.A,{className:n.noOverflow,children:(0,L.jsx)(ge,{schema:p,path:[...h,t]})})]})]})}return(0,s.isConfigurationSlotType)(a)?(0,L.jsx)(me,{slot:p,slotSchema:a},t):null}),ge=(0,u.observer)(function({schema:e,path:n=[]}){const t=(0,p.getMembers)(e).properties;return(0,L.jsx)(L.Fragment,{children:Object.entries(t).map(([t,s])=>(0,L.jsx)(be,{slotName:t,slotSchema:s,path:n,schema:e},t))})}),Ae=(0,u.observer)(function({model:e}){const{classes:n}=ve(),{target:t}=e,d=(0,s.readConfObject)(t,"trackId"),u=(0,s.readConfObject)(t,"name");return(0,L.jsxs)(o.A,{defaultExpanded:!0,className:n.accordion,children:[(0,L.jsx)(l.A,{expandIcon:(0,L.jsx)(r.A,{className:n.icon}),children:(0,L.jsx)(i.A,{children:(0,L.jsx)(a.A,{html:u??"Configuration"})})}),(0,L.jsx)(c.A,{className:n.expansionPanelDetails,"data-testid":"configEditor",children:(0,L.jsx)(ge,{schema:t})})]},d)})}}]);
//# sourceMappingURL=7874.2d6026be.chunk.js.map