"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[7428],{14465:(e,n,t)=>{t.d(n,{A:()=>d});var o=t(91818),s=t(21049),r=t(10240),a=t(68446),l=t(75785),c=t(69500);const i=(0,l.n9)()({formControl:{margin:0,marginLeft:4}}),d=(0,a.observer)((function({model:e}){const{classes:n}=i(),{intronBp:t,upDownBp:a,mode:l,hasCDS:d,hasExonOrCDS:u}=e;return(0,c.jsx)(o.A,{className:n.formControl,children:(0,c.jsx)(s.A,{size:"small",value:l,onChange:n=>{e.setMode(n.target.value)},children:Object.entries({...d?{cds:"CDS"}:{},...d?{protein:"Protein"}:{},...u?{cdna:"cDNA"}:{},...u?{gene:"Genomic w/ full introns"}:{},...u?{gene_updownstream:`Genomic w/ full introns +/- ${a}bp up+down stream`}:{},...u?{gene_collapsed_intron:`Genomic w/ ${t}bp intron`}:{},...u?{gene_updownstream_collapsed_intron:`Genomic w/ ${t}bp intron +/- ${a}bp up+down stream `}:{},...u?{}:{genomic:"Genomic"},...u?{}:{genomic_sequence_updownstream:`Genomic +/- ${a}bp up+down stream`}}).map((([e,n])=>(0,c.jsx)(r.A,{value:e,children:n},e)))})})}))},27428:(e,n,t)=>{t.r(n),t.d(n,{default:()=>h});var o=t(7552),s=t(61282),r=t(69092),a=t(68446),l=t(78781),c=t(67112),i=t(54579),d=t(14465),u=t(69500);const m=(0,o.lazy)((()=>t.e(5669).then(t.bind(t,45669)))),p=(0,o.lazy)((()=>t.e(6746).then(t.bind(t,76746)))),h=(0,a.observer)((function({model:e,feature:n}){const{sequenceFeatureDetails:t}=e,{upDownBp:a}=t,h=(0,o.useRef)(null),[f,b]=(0,o.useState)(!1),[w,g]=(0,o.useState)(!1),{sequence:x,error:C}=(0,l.p)(e,n,a,w);return(0,o.useEffect)((()=>{t.setFeature(n)}),[t,n]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{children:[(0,u.jsx)(d.A,{model:t}),(0,u.jsx)(i.A,{ref:h,model:t,extraItems:[{label:"Open in dialog",onClick:()=>{setTimeout((()=>{b(!0)}),1)}}]})]}),f?(0,u.jsxs)("div",{children:["Open in dialog...",(0,u.jsx)(o.Suspense,{fallback:(0,u.jsx)(c.LoadingEllipses,{}),children:(0,u.jsx)(p,{model:e,feature:n,handleClose:()=>{b(!1)}})})]}):(0,u.jsxs)("div",{children:["gene"===n.type?(0,u.jsx)(s.A,{children:"Note: inspect subfeature sequences for protein/CDS computations"}):null,C?(0,u.jsx)(c.ErrorMessage,{error:C}):x?"error"in x?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(s.A,{color:"error",children:x.error}),(0,u.jsx)(r.A,{variant:"contained",color:"inherit",onClick:()=>{g(!0)},children:"Force load"})]}):(0,u.jsx)(o.Suspense,{fallback:(0,u.jsx)(c.LoadingEllipses,{}),children:(0,u.jsx)(m,{ref:h,feature:n,sequence:x,model:t})}):(0,u.jsx)(c.LoadingEllipses,{})]})]})}))},54579:(e,n,t)=>{t.d(n,{A:()=>h});var o=t(67758),s=t(7552),r=t(2020),a=t(72851),l=t(31409),c=t.n(l),i=t(45465),d=t(68446),u=t(23758),m=t(69500);const p=(0,s.lazy)((()=>t.e(3550).then(t.bind(t,21169)))),h=(0,d.observer)((0,s.forwardRef)((function(e,n){const t=(0,o.c)(45),{model:l,extraItems:d}=e;let h;t[0]!==d?(h=void 0===d?[]:d,t[0]=d,t[1]=h):h=t[1];const f=h;if("function"==typeof n)throw new Error("needs a non function ref");const[b,w]=(0,s.useState)(!1),{showCoordinatesSetting:g,showGenomicCoordsOption:x}=l;let C,j,y,v;t[2]!==n?(C={label:"Copy plaintext",onClick:()=>{const e=n?.current;e&&c()(e.textContent||"",{format:"text/plain"})}},t[2]=n,t[3]=C):C=t[3],t[4]!==n?(j={label:"Copy HTML",onClick:()=>{const e=n?.current;e&&c()(e.outerHTML,{format:"text/html"})}},t[4]=n,t[5]=j):j=t[5],t[6]!==n?(y={label:"Download plaintext",onClick:()=>{const e=n?.current;e&&(0,i.saveAs)(new Blob([e.textContent||""],{type:"text/plain;charset=utf-8"}),"sequence.txt")}},t[6]=n,t[7]=y):y=t[7],t[8]!==n?(v={label:"Download HTML",onClick:()=>{const e=n?.current;e&&(0,i.saveAs)(new Blob([e.outerHTML||""],{type:"text/html;charset=utf-8"}),"sequence.html")}},t[8]=n,t[9]=v):v=t[9];const S="none"===g;let k,A;t[10]!==l?(k=()=>{l.setShowCoordinates("none")},t[10]=l,t[11]=k):k=t[11],t[12]!==S||t[13]!==k?(A={label:"No coordinates",type:"radio",checked:S,onClick:k},t[12]=S,t[13]=k,t[14]=A):A=t[14];const _="relative"===g;let q,M,D,E,G,L,N,F,T,$;return t[15]!==l?(q=()=>{l.setShowCoordinates("relative")},t[15]=l,t[16]=q):q=t[16],t[17]!==_||t[18]!==q?(M={label:"Coordinates relative to feature start",type:"radio",checked:_,onClick:q},t[17]=_,t[18]=q,t[19]=M):M=t[19],t[20]!==l||t[21]!==g||t[22]!==x?(D=x?[{label:"Coordinates relative to genome (only available for continuous genome based sequence types)",type:"radio",checked:"genomic"===g,onClick:()=>{l.setShowCoordinates("genomic")}}]:[],t[20]=l,t[21]=g,t[22]=x,t[23]=D):D=t[23],t[24]!==M||t[25]!==D||t[26]!==A?(E={label:"Show coordinates?",type:"subMenu",subMenu:[A,M,...D]},t[24]=M,t[25]=D,t[26]=A,t[27]=E):E=t[27],t[28]===Symbol.for("react.memo_cache_sentinel")?(G={label:"Settings",icon:a.A,onClick:()=>{w(!0)}},t[28]=G):G=t[28],t[29]!==f||t[30]!==E||t[31]!==C||t[32]!==j||t[33]!==y||t[34]!==v?(L=[C,j,y,v,...f,E,G],t[29]=f,t[30]=E,t[31]=C,t[32]=j,t[33]=y,t[34]=v,t[35]=L):L=t[35],t[36]===Symbol.for("react.memo_cache_sentinel")?(N=(0,m.jsx)(r.A,{}),t[36]=N):N=t[36],t[37]!==L?(F=(0,m.jsx)(u.A,{menuItems:L,children:N}),t[37]=L,t[38]=F):F=t[38],t[39]!==l||t[40]!==b?(T=b?(0,m.jsx)(p,{model:l,handleClose:()=>{w(!1)}}):null,t[39]=l,t[40]=b,t[41]=T):T=t[41],t[42]!==F||t[43]!==T?($=(0,m.jsxs)(m.Fragment,{children:[F,T]}),t[42]=F,t[43]=T,t[44]=$):$=t[44],$})))},72851:(e,n,t)=>{t.d(n,{A:()=>r});var o=t(29772),s=t(69500);const r=(0,o.A)((0,s.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings")},78781:(e,n,t)=>{t.d(n,{p:()=>l});var o=t(7552),s=t(68584),r=t(99546);const a=5e5;function l(e,n,t,l){const[c,i]=(0,o.useState)(),[d,u]=(0,o.useState)();return(0,o.useEffect)((()=>{if(!e)return;const{assemblyManager:o,rpcManager:c}=(0,r.getSession)(e),d=e.view?.assemblyNames?.[0]||"";async function m(e,n,t){const r=await o.waitForAssembly(d);if(!r)throw new Error("assembly not found");const a="getSequence",l=await c.call(a,"CoreGetFeatures",{adapterConfig:(0,s.getConf)(r,["sequence","adapter"]),sessionId:a,regions:[{start:e,end:n,refName:r.getCanonicalRefName(t),assemblyName:d}]}),[i]=l;return i?.get("seq")||""}(async()=>{try{u(void 0);const{start:e,end:o,refName:s}=n;if(!l&&o-e>a)i({error:`Genomic sequence larger than ${a}bp, use "force load" button to display`});else{const n=e-t,r=o+t,a=await m(e,o,s),l=await m(Math.max(0,n),e,s),c=await m(o,r,s);i({seq:a,upstream:l,downstream:c})}}catch(e){console.error(e),u(e)}})()}),[n,e,t,l]),{sequence:c,error:d}}}}]);
//# sourceMappingURL=7428.06b4ef7c.chunk.js.map