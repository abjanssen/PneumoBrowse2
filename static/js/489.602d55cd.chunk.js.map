{"version":3,"file":"static/js/489.602d55cd.chunk.js","mappings":"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","sources":["../../../plugins/alignments/src/LinearSNPCoverageDisplay/components/Tooltip.tsx"],"sourcesContent":["import React from 'react'\nimport { observer } from 'mobx-react'\nimport { Feature, toLocale } from '@jbrowse/core/util'\nimport { Tooltip } from '@jbrowse/plugin-wiggle'\nimport { makeStyles } from 'tss-react/mui'\n\n// locals\nimport { BaseCoverageBin } from '../../shared/types'\n\nconst useStyles = makeStyles()(() => ({\n  td: {\n    whiteSpace: 'nowrap',\n  },\n}))\n\nconst toP = (s = 0) => +(+s).toFixed(1)\n\nconst pct = (n: number, total = 1) => `${toP((n / (total || 1)) * 100)}%`\n\ninterface Props {\n  feature: Feature\n  model: { visibleModifications: Map<string, { color: string }> }\n}\n\nconst TooltipContents = React.forwardRef<HTMLDivElement, Props>(\n  function TooltipContents2(props, reactRef) {\n    const { feature, model } = props\n    const { classes } = useStyles()\n    const start = feature.get('start') + 1\n    const end = feature.get('end')\n    const name = feature.get('refName')\n    const { refbase, readsCounted, depth, ref, ...info } = feature.get(\n      'snpinfo',\n    ) as BaseCoverageBin\n    const loc = [\n      name,\n      start === end ? toLocale(start) : `${toLocale(start)}..${toLocale(end)}`,\n    ]\n      .filter(f => !!f)\n      .join(':')\n\n    return (\n      <div ref={reactRef}>\n        <table>\n          <caption>{loc}</caption>\n          <thead>\n            <tr>\n              <th />\n              <th>Base</th>\n              <th>Count</th>\n              <th>% of Total</th>\n              <th>Strands</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <td />\n              <td>Total</td>\n              <td>{readsCounted}</td>\n              <td> </td>\n              <td> </td>\n            </tr>\n            <tr>\n              <td />\n              <td>REF {refbase ? `(${refbase.toUpperCase()})` : ''}</td>\n              <td>{ref.entryDepth}</td>\n              <td>{pct(ref.entryDepth, readsCounted)}</td>\n              <td>\n                {ref['-1'] ? `${ref['-1']}(-)` : ''}\n                {ref['1'] ? `${ref['1']}(+)` : ''}\n              </td>\n            </tr>\n\n            {Object.entries(info).map(([key, entry]) =>\n              Object.entries(entry).map(([base, score]) => (\n                <tr key={`${key}_${base}`}>\n                  <td>\n                    <ColorSquare model={model} base={base} />\n                  </td>\n                  <td>{base.toUpperCase()} </td>\n                  <td className={classes.td}>\n                    {[\n                      score.entryDepth,\n                      score.avgProbability !== undefined\n                        ? `(avg. ${pct(score.avgProbability)} prob.)`\n                        : '',\n                    ]\n                      .filter(f => !!f)\n                      .join(' ')}\n                  </td>\n\n                  <td>\n                    {base === 'depth' || base === 'skip'\n                      ? '---'\n                      : pct(score.entryDepth, readsCounted)}\n                  </td>\n                  <td>\n                    {score['-1'] ? `${score['-1']}(-)` : ''}\n                    {score['1'] ? `${score['1']}(+)` : ''}\n                  </td>\n                </tr>\n              )),\n            )}\n          </tbody>\n        </table>\n      </div>\n    )\n  },\n)\n\nfunction ColorSquare({\n  base,\n  model,\n}: {\n  base: string\n  model: { visibleModifications: Map<string, { color: string }> }\n}) {\n  const { visibleModifications } = model\n  return base.startsWith('mod_') ? (\n    <div\n      style={{\n        width: 10,\n        height: 10,\n        background: visibleModifications.get(base.replace('mod_', ''))?.color,\n      }}\n    />\n  ) : null\n}\n\ntype Coord = [number, number]\n\nconst SNPCoverageTooltip = observer(function (props: {\n  model: {\n    featureUnderMouse?: Feature\n  }\n  height: number\n  offsetMouseCoord: Coord\n  clientMouseCoord: Coord\n  clientRect?: DOMRect\n}) {\n  const { model } = props\n  const { featureUnderMouse: feat } = model\n  return feat && feat.get('type') === 'skip' ? null : (\n    <Tooltip TooltipContents={TooltipContents} {...props} />\n  )\n})\n\nexport default SNPCoverageTooltip\n"],"names":["useStyles","makeStyles","td","whiteSpace","pct","n","total","toP","s","toFixed","TooltipContents","React","props","reactRef","feature","model","classes","start","get","end","name","refbase","readsCounted","depth","ref","info","loc","toLocale","filter","f","join","toUpperCase","entryDepth","Object","entries","map","key","entry","base","score","ColorSquare","className","undefined","avgProbability","visibleModifications","startsWith","style","width","height","background","replace","color","observer","featureUnderMouse","feat","Tooltip","_extends"],"sourceRoot":""}