"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[2287],{1161(e,t,a){a.d(t,{A:()=>f});var n=a(42918),r=a(77710),o=a(62981),s=a(41680),i=a(711),c=a(32717),d=a(61302),l=a(91960),p=a(86137),m=a(53137),u=a(32118);const h=(0,s.Ay)(d.A,{name:"MuiAccordionSummary",slot:"Root"})((0,i.A)(({theme:e})=>{const t={duration:e.transitions.duration.shortest};return{display:"flex",width:"100%",minHeight:48,padding:e.spacing(0,2),transition:e.transitions.create(["min-height","background-color"],t),[`&.${p.A.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${p.A.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`&:hover:not(.${p.A.disabled})`]:{cursor:"pointer"},variants:[{props:e=>!e.disableGutters,style:{[`&.${p.A.expanded}`]:{minHeight:64}}}]}})),A=(0,s.Ay)("span",{name:"MuiAccordionSummary",slot:"Content"})((0,i.A)(({theme:e})=>({display:"flex",textAlign:"start",flexGrow:1,margin:"12px 0",variants:[{props:e=>!e.disableGutters,style:{transition:e.transitions.create(["margin"],{duration:e.transitions.duration.shortest}),[`&.${p.A.expanded}`]:{margin:"20px 0"}}}]}))),x=(0,s.Ay)("span",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper"})((0,i.A)(({theme:e})=>({display:"flex",color:(e.vars||e).palette.action.active,transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),[`&.${p.A.expanded}`]:{transform:"rotate(180deg)"}}))),f=n.forwardRef(function(e,t){const a=(0,c.b)({props:e,name:"MuiAccordionSummary"}),{children:s,className:i,expandIcon:d,focusVisibleClassName:f,onClick:b,slots:w,slotProps:y,...g}=a,{disabled:k=!1,disableGutters:j,expanded:S,toggle:v}=n.useContext(l.A),C={...a,expanded:S,disabled:k,disableGutters:j},I=(e=>{const{classes:t,expanded:a,disabled:n,disableGutters:r}=e,s={root:["root",a&&"expanded",n&&"disabled",!r&&"gutters"],focusVisible:["focusVisible"],content:["content",a&&"expanded",!r&&"contentGutters"],expandIconWrapper:["expandIconWrapper",a&&"expanded"]};return(0,o.A)(s,p.T,t)})(C),N={slots:w,slotProps:y},[P,W]=(0,m.A)("root",{ref:t,shouldForwardComponentProp:!0,className:(0,r.A)(I.root,i),elementType:h,externalForwardedProps:{...N,...g},ownerState:C,additionalProps:{focusRipple:!1,disableRipple:!0,disabled:k,"aria-expanded":S,focusVisibleClassName:(0,r.A)(I.focusVisible,f)},getSlotProps:e=>({...e,onClick:t=>{e.onClick?.(t),(e=>{v&&v(e),b&&b(e)})(t)}})}),[T,M]=(0,m.A)("content",{className:I.content,elementType:A,externalForwardedProps:N,ownerState:C}),[R,V]=(0,m.A)("expandIconWrapper",{className:I.expandIconWrapper,elementType:x,externalForwardedProps:N,ownerState:C});return(0,u.jsxs)(P,{...W,children:[(0,u.jsx)(T,{...M,children:s}),d&&(0,u.jsx)(R,{...V,children:d})]})})},2016(e,t,a){a.d(t,{A:()=>o});var n=a(63881),r=a(32118);const o=(0,n.A)((0,r.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore")},2678(e,t,a){a.d(t,{J:()=>o,Z:()=>s});var n=a(8345);function r(e){try{return JSON.parse(e).message}catch(t){return e}}async function o(e,t,o){const s=await(0,n.eW)(JSON.stringify(e)),i=window.btoa([...window.crypto.getRandomValues(new Uint8Array(10))].map(e=>String.fromCharCode(e)).join("")).replaceAll(/[+/]/g,"").slice(0,5);const c=await(async(e,t)=>(await Promise.all([a.e(6716),a.e(6216),a.e(7167)]).then(a.t.bind(a,86216,23))).encrypt(e,t).toString())(s,i),d=new FormData;d.append("session",c),d.append("dateShared",`${Date.now()}`),d.append("referer",o);const l=await fetch(`${t}share`,{method:"POST",mode:"cors",body:d});if(!l.ok){const e=await l.text();throw new Error(r(e))}return{json:await l.json(),encryptedSession:c,password:i}}async function s(e,t,n){const o=t.split("share-")[1],s=`${e}?sessionId=${encodeURIComponent(o)}`,i=await fetch(s);if(!i.ok)throw new Error(r(await i.text()));return(async(e,t)=>{const n=await Promise.all([a.e(6716),a.e(6216),a.e(7167)]).then(a.t.bind(a,86216,23)),r=await Promise.all([a.e(6716),a.e(4721)]).then(a.t.bind(a,81335,23));return n.decrypt(e,t).toString(r)})((await i.json()).session,n)}},50777(e,t,a){a.d(t,{A:()=>s,n:()=>o});var n=a(99287),r=a(47739);function o(e){return(0,r.Ay)("MuiAccordionDetails",e)}const s=(0,n.A)("MuiAccordionDetails",["root"])},62287(e,t,a){a.r(t),a.d(t,{default:()=>I});var n=a(42918),r=a(82699),o=a(34592),s=a(85787),i=a(27351),c=a(77251),d=a(33624),l=a(65045),p=a(10525),m=a(2016),u=a(70942),h=a(24215),A=a(22687),x=a(1161),f=a(1591),b=a(93673),w=a(15675),y=a(11543),g=a(65525),k=a(64074),j=a(2678),S=a(8345),v=a(32118);const C=(0,l.n)()(e=>({expandIcon:{color:e.palette.tertiary.contrastText||"#fff"},minWidth:{minWidth:500}})),I=(0,k.observer)(function({onClose:e,model:t}){const{classes:a}=C(),[l,k]=(0,n.useState)(),[I,N]=(0,n.useState)(),[P,W]=(0,n.useState)(""),T=(0,c.getSession)(t),{assemblyNames:M}=T,[R,V]=(0,n.useState)(M[0]),[$,D]=(0,n.useState)("shareLinkAccordion");return(0,v.jsxs)(s.A,{open:!0,onClose:e,maxWidth:"xl",title:"Import bookmarks",children:[(0,v.jsxs)(h.A,{className:a.minWidth,children:[(0,v.jsxs)(A.A,{expanded:"shareLinkAccordion"===$,onChange:()=>{D("shareLinkAccordion")},children:[(0,v.jsx)(x.A,{expandIcon:(0,v.jsx)(m.A,{className:a.expandIcon}),children:(0,v.jsx)(f.A,{style:{display:"flex",alignItems:"center",gap:"5px"},children:"Import from share link"})}),(0,v.jsxs)(b.A,{children:[(0,v.jsx)(f.A,{children:"Paste a bookmark share link generated by the 'Share' button from the bookmarks widget"}),(0,v.jsx)(w.A,{label:"Enter Share URL",variant:"outlined",fullWidth:!0,value:P,onChange:e=>{W(e.target.value)}})]})]}),(0,v.jsxs)(A.A,{expanded:"fileAccordion"===$,onChange:()=>{D("fileAccordion")},children:[(0,v.jsx)(x.A,{expandIcon:(0,v.jsx)(m.A,{className:a.expandIcon}),children:(0,v.jsx)(f.A,{children:"Import from file"})}),(0,v.jsxs)(b.A,{children:[(0,v.jsx)(r.A,{location:l,setLocation:k,name:"File",description:'Choose a BED or TSV format file to import. Required TSV column headers are "chrom, start, end, label, assembly_name".'}),(0,v.jsx)(o.A,{onChange:e=>{V(e)},helperText:"Select the assembly for BED file.",session:T,selected:R})]})]}),I?(0,v.jsx)(i.A,{error:I}):null]}),(0,v.jsxs)(y.A,{children:[(0,v.jsx)(g.A,{variant:"contained",color:"secondary",onClick:e,children:"Cancel"}),(0,v.jsx)(g.A,{"data-testid":"dialogImport",variant:"contained",color:"primary",disabled:!l&&!P,startIcon:(0,v.jsx)(u.A,{}),onClick:async()=>{try{if("fileAccordion"===$&&l){const e=(await(0,d.openLocation)(l).readFile("utf8")).split(/\n|\r\n|\r/).filter(e=>!!e.trim());"BED"==((a=e[0]).startsWith("chrom")&&a.includes("assembly_name")?"TSV":"BED")?t.importBookmarks(await async function(e,t){return e.filter(e=>!e.startsWith("#")).map(e=>{const[a,n,r,o]=e.split("\t");return{assemblyName:t,refName:a,start:+n,end:+r,label:"."===o?void 0:o}})}(e,R)):t.importBookmarks(await async function(e){return e[0].startsWith("chrom")&&(e=e.slice(1)),e.filter(e=>!e.startsWith("#")).map(e=>{const[t,a,n,r,o]=e.split("\t");return{assemblyName:o,refName:t,start:+a,end:+n,label:"."===r?void 0:r}})}(e))}else"shareLinkAccordion"===$&&P&&(0,p.xv)(T)&&t.importBookmarks(await async function(e,t){const a=new URL(e),n=a.searchParams.get("bookmarks"),r=a.searchParams.get("password"),o=await(0,j.Z)(`${t??"https://share.jbrowse.org/api/v1/"}load`,n||"",r||"");return JSON.parse(await(0,S.LP)(o)).sharedBookmarks}(P,T.shareURL));e()}catch(e){console.error(e),N(e)}var a},children:"Import"})]})]})})},86137(e,t,a){a.d(t,{A:()=>s,T:()=>o});var n=a(99287),r=a(47739);function o(e){return(0,r.Ay)("MuiAccordionSummary",e)}const s=(0,n.A)("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"])},93673(e,t,a){a.d(t,{A:()=>m});var n=a(42918),r=a(77710),o=a(62981),s=a(41680),i=a(711),c=a(32717),d=a(50777),l=a(32118);const p=(0,s.Ay)("div",{name:"MuiAccordionDetails",slot:"Root"})((0,i.A)(({theme:e})=>({padding:e.spacing(1,2,2)}))),m=n.forwardRef(function(e,t){const a=(0,c.b)({props:e,name:"MuiAccordionDetails"}),{className:n,...s}=a,i=a,m=(e=>{const{classes:t}=e;return(0,o.A)({root:["root"]},d.n,t)})(i);return(0,l.jsx)(p,{className:(0,r.A)(m.root,n),ref:t,ownerState:i,...s})})}}]);
//# sourceMappingURL=2287.19ac7bf0.chunk.js.map