"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[1590],{11590:(e,t,s)=>{s.r(t),s.d(t,{default:()=>u});var a=s(39763),i=s(68584),n=s(46377),r=s(99834),o=s(66885),c=s(6434);class u extends n.BaseSequenceAdapter{async initChromSizes(){const e=(0,i.readConfObject)(this.config,"chromSizesLocation");if("/path/to/default.chrom.sizes"!==e.uri&&""!==e.uri){const t=(0,r.openLocation)(e,this.pluginManager),s=await t.readFile("utf8");return Object.fromEntries(s.split(/\n|\r\n|\r/).filter((e=>!!e.trim())).map((e=>{const[t,s]=e.split("\t");return[t,+s]})))}}async setupPre(){return{twobit:new a.e({filehandle:(0,r.openLocation)(this.getConf("twoBitLocation"),this.pluginManager)}),chromSizesData:await this.initChromSizes()}}async setup(){return this.setupP||(this.setupP=this.setupPre().catch((e=>{throw this.setupP=void 0,e}))),this.setupP}async getRefNames(){const{chromSizesData:e,twobit:t}=await this.setup();return e?Object.keys(e):t.getSequenceNames()}async getRegions(){const{chromSizesData:e,twobit:t}=await this.setup();if(e)return Object.keys(e).map((t=>({refName:t,start:0,end:e[t]})));{const e=await t.getSequenceSizes();return Object.keys(e).map((t=>({refName:t,start:0,end:e[t]})))}}getFeatures({refName:e,start:t,end:s}){return(0,o.ObservableCreate)((async a=>{const{twobit:i}=await this.setup(),n=await i.getSequenceSize(e),r=void 0!==n?Math.min(n,s):s,o=await i.getSequence(e,t,r);o&&a.next(new c.A({id:`${e} ${t}-${r}`,data:{refName:e,start:t,end:r,seq:o}})),a.complete()}))}freeResources(){}}}}]);
//# sourceMappingURL=1590.4c5828d5.chunk.js.map