"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[7761],{77761:(e,t,r)=>{r.r(t),r.d(t,{default:()=>S});var a=r(7552),n=r(68584),s=r(49823),o=r(90542),i=r(99546),l=r(91194),c=r(29499),d=r(36715),m=r(63896),u=r(59705),h=r(1343),p=r(83867),f=r(33371),b=r(32808),g=r(58507),v=r(5401),x=r(31409),A=r.n(x),y=r(45465),k=r(68446);const w=(0,r(75785).n9)()({dialogContent:{width:"80em"},textAreaFont:{fontFamily:"Courier New"},ml:{marginLeft:10}}),S=(0,k.observer)((function({model:e,handleClose:t}){const{classes:r}=w(),[x,k]=(0,a.useState)(),[S,C]=(0,a.useState)(),[$,E]=(0,a.useState)(!1),[R,M]=(0,a.useState)(!1),[W,N]=(0,a.useState)(!1),{leftOffset:q,rightOffset:P}=e,j=Boolean(void 0===S);(0,a.useEffect)((()=>{const t=new AbortController;return(async()=>{try{const t=e.getSelectedRegions(q,P);if(0===t.length)throw new Error("Selected region is out of bounds");const r=await async function(e,t){const r=(0,i.getSession)(e),{leftOffset:a,rightOffset:s}=e;if(!a||!s)throw new Error("no offsets on model to use for range");if(a.assemblyName!==s.assemblyName)throw new Error("not able to fetch sequences from multiple assemblies");const{rpcManager:o,assemblyManager:l}=r,c=a.assemblyName||s.assemblyName||"",d=l.get(c);if(!d)throw new Error(`assembly ${c} not found`);const m=(0,n.getConf)(d,["sequence","adapter"]),u="getSequence";return o.call(u,"CoreGetFeatures",{adapterConfig:m,regions:t,sessionId:u})}(e,t);C(r)}catch(e){console.error(e),k(e)}})(),()=>{t.abort()}}),[e,q,P]);const G=S?S.map((e=>{let t=e.get("seq");const r=e.get("refName"),a=e.get("start")+1,n=e.get("end"),s=`${r}:${a}-${n}`;if(t?.length!==n-a+1)throw new Error(`${s} returned ${t.length.toLocaleString()} bases, but should have returned ${(n-a).toLocaleString()}`);return $&&(t=(0,i.reverse)(t)),W&&(t=(0,i.complement)(t)),{header:s+($?"-rev":"")+(W?"-comp":""),seq:t}})).map((e=>{return`>${e.header}\n${t=e.seq,t.replaceAll(/(.{1,80})/g,"$1\n").trimEnd()}`;var t})).join("\n"):"",D=!!G&&G.length>1e6;return a.createElement(s.Dialog,{maxWidth:"xl",open:!0,onClose:()=>{t(),e.setOffsets()},title:"Reference sequence"},a.createElement(c.A,null,x?a.createElement(d.A,{color:"error"},`${x}`):j?a.createElement(m.A,null,"Retrieving reference sequence...",a.createElement(u.A,{className:r.ml,size:20,disableShrink:!0})):null,a.createElement(h.A,{"data-testid":"rubberband-sequence",variant:"outlined",multiline:!0,minRows:5,maxRows:10,disabled:D,className:r.dialogContent,fullWidth:!0,value:D?"Reference sequence too large to display, use the download FASTA button":G,slotProps:{input:{readOnly:!0,classes:{input:r.textAreaFont}}}}),a.createElement(p.A,null,a.createElement(f.A,{control:a.createElement(b.A,{value:$,onChange:e=>{E(e.target.checked)}}),label:"Reverse sequence"}),a.createElement(f.A,{control:a.createElement(b.A,{value:W,onChange:e=>{N(e.target.checked)}}),label:"Complement sequence"})),a.createElement(d.A,{style:{margin:10}},'Note: Check both boxes for the "reverse complement"')),a.createElement(g.A,null,a.createElement(v.A,{onClick:()=>{A()(G),M(!0),setTimeout((()=>{M(!1)}),500)},disabled:j||!!x||D,color:"primary",startIcon:a.createElement(o.PM,null)},R?"Copied":"Copy to clipboard"),a.createElement(v.A,{onClick:()=>{(0,y.saveAs)(new Blob([G||""],{type:"text/x-fasta;charset=utf-8"}),"jbrowse_ref_seq.fa")},disabled:j||!!x,color:"primary",startIcon:a.createElement(l.A,null)},"Download FASTA"),a.createElement(v.A,{onClick:t,variant:"contained"},"Close")))}))},91194:(e,t,r)=>{r.d(t,{A:()=>s});var a=r(74893),n=r(69500);const s=(0,a.A)((0,n.jsx)("path",{d:"M19 9h-4V3H9v6H5l7 7zM5 18v2h14v-2z"}),"GetApp")},59705:(e,t,r)=>{r.d(t,{A:()=>y});var a=r(7552),n=r(93878),s=r(70799),o=r(64761),i=r(51148),l=r(84893),c=r(4785),d=r(15622),m=r(58520),u=r(72489),h=r(69500);const p=o.i7`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,f=o.i7`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`,b="string"!=typeof p?o.AH`
        animation: ${p} 1.4s linear infinite;
      `:null,g="string"!=typeof f?o.AH`
        animation: ${f} 1.4s ease-in-out infinite;
      `:null,v=(0,i.Ay)("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`color${(0,d.A)(r.color)}`]]}})((0,l.A)((({theme:e})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("transform")}},{props:{variant:"indeterminate"},style:b||{animation:`${p} 1.4s linear infinite`}},...Object.entries(e.palette).filter((0,m.A)()).map((([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})))]})))),x=(0,i.Ay)("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),A=(0,i.Ay)("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.circle,t[`circle${(0,d.A)(r.variant)}`],r.disableShrink&&t.circleDisableShrink]}})((0,l.A)((({theme:e})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:e})=>"indeterminate"===e.variant&&!e.disableShrink,style:g||{animation:`${f} 1.4s ease-in-out infinite`}}]})))),y=a.forwardRef((function(e,t){const r=(0,c.b)({props:e,name:"MuiCircularProgress"}),{className:a,color:o="primary",disableShrink:i=!1,size:l=40,style:m,thickness:p=3.6,value:f=0,variant:b="indeterminate",...g}=r,y={...r,color:o,disableShrink:i,size:l,thickness:p,value:f,variant:b},k=(e=>{const{classes:t,variant:r,color:a,disableShrink:n}=e,o={root:["root",r,`color${(0,d.A)(a)}`],svg:["svg"],circle:["circle",`circle${(0,d.A)(r)}`,n&&"circleDisableShrink"]};return(0,s.A)(o,u.b,t)})(y),w={},S={},C={};if("determinate"===b){const e=2*Math.PI*((44-p)/2);w.strokeDasharray=e.toFixed(3),C["aria-valuenow"]=Math.round(f),w.strokeDashoffset=`${((100-f)/100*e).toFixed(3)}px`,S.transform="rotate(-90deg)"}return(0,h.jsx)(v,{className:(0,n.A)(k.root,a),style:{width:l,height:l,...S,...m},ownerState:y,ref:t,role:"progressbar",...C,...g,children:(0,h.jsx)(x,{className:k.svg,ownerState:y,viewBox:"22 22 44 44",children:(0,h.jsx)(A,{className:k.circle,style:w,ownerState:y,cx:44,cy:44,r:(44-p)/2,fill:"none",strokeWidth:p})})})}))},72489:(e,t,r)=>{r.d(t,{A:()=>o,b:()=>s});var a=r(33761),n=r(85693);function s(e){return(0,n.Ay)("MuiCircularProgress",e)}const o=(0,a.A)("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"])},63896:(e,t,r)=>{r.d(t,{A:()=>x});var a=r(7552),n=r(93878),s=r(85693),o=r(70799),i=r(33283),l=r(97269),c=r(48467),d=r(23955),m=r(69500);const u=(0,d.A)(),h=(0,c.A)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`maxWidth${(0,i.A)(String(r.maxWidth))}`],r.fixed&&t.fixed,r.disableGutters&&t.disableGutters]}}),p=e=>(0,l.A)({props:e,name:"MuiContainer",defaultTheme:u});var f=r(15622),b=r(51148),g=r(4785);const v=function(e={}){const{createStyledComponent:t=h,useThemeProps:r=p,componentName:l="MuiContainer"}=e,c=t((({theme:e,ownerState:t})=>({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",...!t.disableGutters&&{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}}})),(({theme:e,ownerState:t})=>t.fixed&&Object.keys(e.breakpoints.values).reduce(((t,r)=>{const a=r,n=e.breakpoints.values[a];return 0!==n&&(t[e.breakpoints.up(a)]={maxWidth:`${n}${e.breakpoints.unit}`}),t}),{})),(({theme:e,ownerState:t})=>({..."xs"===t.maxWidth&&{[e.breakpoints.up("xs")]:{maxWidth:Math.max(e.breakpoints.values.xs,444)}},...t.maxWidth&&"xs"!==t.maxWidth&&{[e.breakpoints.up(t.maxWidth)]:{maxWidth:`${e.breakpoints.values[t.maxWidth]}${e.breakpoints.unit}`}}}))),d=a.forwardRef((function(e,t){const a=r(e),{className:d,component:u="div",disableGutters:h=!1,fixed:p=!1,maxWidth:f="lg",classes:b,...g}=a,v={...a,component:u,disableGutters:h,fixed:p,maxWidth:f},x=((e,t)=>{const{classes:r,fixed:a,disableGutters:n,maxWidth:l}=e,c={root:["root",l&&`maxWidth${(0,i.A)(String(l))}`,a&&"fixed",n&&"disableGutters"]};return(0,o.A)(c,(e=>(0,s.Ay)(t,e)),r)})(v,l);return(0,m.jsx)(c,{as:u,ownerState:v,className:(0,n.A)(x.root,d),ref:t,...g})}));return d}({createStyledComponent:(0,b.Ay)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`maxWidth${(0,f.A)(String(r.maxWidth))}`],r.fixed&&t.fixed,r.disableGutters&&t.disableGutters]}}),useThemeProps:e=>(0,g.b)({props:e,name:"MuiContainer"})}),x=v},48467:(e,t,r)=>{r.d(t,{A:()=>a});const a=(0,r(26587).Ay)()}}]);
//# sourceMappingURL=7761.44ca7cad.chunk.js.map