{"version":3,"file":"static/js/701.45f95cbf.chunk.js","mappings":"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","sources":["../../../packages/app-core/src/ui/App/ViewButtons.tsx","../../../packages/app-core/src/ui/App/ViewContainerTitle.tsx","../../../packages/app-core/src/ui/App/ViewMenu.tsx","../../../packages/app-core/src/ui/App/copyView.ts","../../../packages/app-core/src/ui/App/ViewHeader.tsx","../../../packages/app-core/src/ui/App/ViewWrapper.tsx","../../../packages/app-core/src/ui/App/ViewContainer.tsx","../../../packages/app-core/src/ui/App/DockviewLeftHeaderActions.tsx","../../../packages/app-core/src/ui/App/dockviewUtils.ts","../../../packages/app-core/src/ui/App/DockviewRightHeaderActions.tsx","../../../packages/app-core/src/ui/App/JBrowseViewPanel.tsx","../../../packages/app-core/src/ui/App/JBrowseTabMenu.tsx","../../../packages/app-core/src/ui/App/JBrowseViewTab.tsx","../../../packages/app-core/src/ui/App/TiledViewsContainer.tsx","../../../packages/app-core/src/ui/App/DockviewContext.tsx"],"sourcesContent":["import { makeStyles } from '@jbrowse/core/util/tss-react'\nimport AddIcon from '@mui/icons-material/Add'\nimport CloseIcon from '@mui/icons-material/Close'\nimport MinimizeIcon from '@mui/icons-material/Minimize'\nimport { IconButton } from '@mui/material'\nimport { observer } from 'mobx-react'\n\nimport type { IBaseViewModel } from '@jbrowse/core/pluggableElementTypes/models'\n\nconst useStyles = makeStyles()(theme => ({\n  icon: {\n    color: theme.palette.secondary.contrastText,\n  },\n}))\n\nconst ViewButtons = observer(function ViewButtons({\n  view,\n  onClose,\n  onMinimize,\n}: {\n  view: IBaseViewModel\n  onClose: () => void\n  onMinimize: () => void\n}) {\n  const { classes } = useStyles()\n  return (\n    <>\n      <IconButton data-testid=\"minimize_view\" onClick={onMinimize}>\n        {view.minimized ? (\n          <AddIcon className={classes.icon} fontSize=\"small\" />\n        ) : (\n          <MinimizeIcon className={classes.icon} fontSize=\"small\" />\n        )}\n      </IconButton>\n      <IconButton data-testid=\"close_view\" onClick={onClose}>\n        <CloseIcon className={classes.icon} fontSize=\"small\" />\n      </IconButton>\n    </>\n  )\n})\n\nexport default ViewButtons\n","import EditableTypography from '@jbrowse/core/ui/EditableTypography'\nimport { getSession } from '@jbrowse/core/util'\nimport { makeStyles } from '@jbrowse/core/util/tss-react'\nimport { Tooltip } from '@mui/material'\nimport { observer } from 'mobx-react'\n\nimport type { IBaseViewModel } from '@jbrowse/core/pluggableElementTypes'\n\nconst useStyles = makeStyles()(theme => ({\n  input: {\n    paddingBottom: 0,\n    paddingTop: 2,\n  },\n  inputBase: {\n    color: theme.palette.secondary.contrastText,\n  },\n  inputRoot: {\n    '&:hover': {\n      backgroundColor: theme.palette.secondary.light,\n    },\n  },\n  inputFocused: {\n    borderColor: theme.palette.primary.main,\n    backgroundColor: theme.palette.secondary.light,\n  },\n}))\nconst ViewContainerTitle = observer(function ViewContainerTitle({\n  view,\n}: {\n  view: IBaseViewModel\n}) {\n  const { classes } = useStyles()\n  const { assemblyManager } = getSession(view)\n  return (\n    <Tooltip title=\"Rename view\" arrow>\n      <EditableTypography\n        value={\n          view.displayName ||\n          // @ts-expect-error\n          `${view.assemblyNames?.map(r => assemblyManager.get(r)?.displayName).join(',') || 'Untitled view'}${\n            view.minimized ? ' (minimized)' : ''\n          }`\n        }\n        setValue={val => {\n          view.setDisplayName(val)\n        }}\n        variant=\"body2\"\n        classes={{\n          input: classes.input,\n          inputBase: classes.inputBase,\n          inputRoot: classes.inputRoot,\n          inputFocused: classes.inputFocused,\n        }}\n      />\n    </Tooltip>\n  )\n})\n\nexport default ViewContainerTitle\n","import { CascadingMenuButton } from '@jbrowse/core/ui'\nimport { getSession } from '@jbrowse/core/util'\nimport { getSnapshot } from '@jbrowse/mobx-state-tree'\nimport ContentCopyIcon from '@mui/icons-material/ContentCopy'\nimport KeyboardArrowDownIcon from '@mui/icons-material/KeyboardArrowDown'\nimport KeyboardArrowUpIcon from '@mui/icons-material/KeyboardArrowUp'\nimport KeyboardDoubleArrowDownIcon from '@mui/icons-material/KeyboardDoubleArrowDown'\nimport KeyboardDoubleArrowUpIcon from '@mui/icons-material/KeyboardDoubleArrowUp'\nimport MenuIcon from '@mui/icons-material/Menu'\nimport OpenInNewIcon from '@mui/icons-material/OpenInNew'\nimport VerticalSplitIcon from '@mui/icons-material/VerticalSplit'\nimport { observer } from 'mobx-react'\n\nimport { useDockview } from './DockviewContext.tsx'\nimport { renameIds } from './copyView.ts'\nimport { isSessionWithDockviewLayout } from '../../DockviewLayout/index.ts'\n\nimport type { IBaseViewModel } from '@jbrowse/core/pluggableElementTypes/models'\nimport type { AbstractSessionModel } from '@jbrowse/core/util'\nimport type {\n  IconButtonProps as IconButtonPropsType,\n  SvgIconProps,\n} from '@mui/material'\n\nfunction getPanelViewCount(session: unknown, viewId: string) {\n  if (!isSessionWithDockviewLayout(session)) {\n    return 0\n  }\n  for (const viewIds of session.panelViewAssignments.values()) {\n    if (viewIds.includes(viewId)) {\n      return viewIds.length\n    }\n  }\n  return 0\n}\n\nconst ViewMenu = observer(function ViewMenu({\n  model,\n  IconProps,\n}: {\n  model: IBaseViewModel\n  IconButtonProps?: IconButtonPropsType\n  IconProps: SvgIconProps\n}) {\n  const session = getSession(model) as AbstractSessionModel & {\n    moveViewDown: (arg: string) => void\n    moveViewUp: (arg: string) => void\n    moveViewToBottom: (arg: string) => void\n    moveViewToTop: (arg: string) => void\n    moveViewUpInPanel: (arg: string) => void\n    moveViewDownInPanel: (arg: string) => void\n    moveViewToTopInPanel: (arg: string) => void\n    moveViewToBottomInPanel: (arg: string) => void\n    useWorkspaces: boolean\n    setUseWorkspaces: (arg: boolean) => void\n  }\n\n  const { moveViewToNewTab, moveViewToSplitRight } = useDockview()\n  const usePanel = session.useWorkspaces && isSessionWithDockviewLayout(session)\n  const viewCount = usePanel\n    ? getPanelViewCount(session, model.id)\n    : session.views.length\n\n  const moveView = (\n    panelFn: (id: string) => void,\n    sessionFn: (id: string) => void,\n  ) => {\n    if (usePanel) {\n      panelFn(model.id)\n    } else {\n      sessionFn(model.id)\n    }\n  }\n\n  return (\n    <CascadingMenuButton\n      data-testid=\"view_menu_icon\"\n      menuItems={() => [\n        {\n          label: 'View options',\n          type: 'subMenu' as const,\n          subMenu: [\n            {\n              label: 'Copy view',\n              icon: ContentCopyIcon,\n              onClick: () => {\n                session.addView(\n                  model.type,\n                  renameIds(\n                    structuredClone(\n                      // @ts-expect-error\n                      getSnapshot(model) as Record<string, unknown>,\n                    ),\n                  ),\n                )\n              },\n            },\n            {\n              label: 'Move to new tab',\n              icon: OpenInNewIcon,\n              onClick: () => {\n                moveViewToNewTab(model.id)\n                session.setUseWorkspaces(true)\n              },\n            },\n            {\n              label: 'Move to split view (right side of screen)',\n              icon: VerticalSplitIcon,\n              onClick: () => {\n                moveViewToSplitRight(model.id)\n                session.setUseWorkspaces(true)\n              },\n            },\n            ...(viewCount > 2\n              ? [\n                  {\n                    label: 'Move view to top',\n                    icon: KeyboardDoubleArrowUpIcon,\n                    onClick: () => {\n                      moveView(\n                        session.moveViewToTopInPanel,\n                        session.moveViewToTop,\n                      )\n                    },\n                  },\n                ]\n              : []),\n            ...(viewCount > 1\n              ? [\n                  {\n                    label: 'Move view up',\n                    icon: KeyboardArrowUpIcon,\n                    onClick: () => {\n                      moveView(session.moveViewUpInPanel, session.moveViewUp)\n                    },\n                  },\n                  {\n                    label: 'Move view down',\n                    icon: KeyboardArrowDownIcon,\n                    onClick: () => {\n                      moveView(\n                        session.moveViewDownInPanel,\n                        session.moveViewDown,\n                      )\n                    },\n                  },\n                ]\n              : []),\n            ...(viewCount > 2\n              ? [\n                  {\n                    label: 'Move view to bottom',\n                    icon: KeyboardDoubleArrowDownIcon,\n                    onClick: () => {\n                      moveView(\n                        session.moveViewToBottomInPanel,\n                        session.moveViewToBottom,\n                      )\n                    },\n                  },\n                ]\n              : []),\n          ],\n        },\n        ...model.menuItems(),\n      ]}\n    >\n      <MenuIcon {...IconProps} fontSize=\"small\" />\n    </CascadingMenuButton>\n  )\n})\nexport default ViewMenu\n","import { createElementId } from '@jbrowse/core/util/types/mst'\n\nexport function renameIds(\n  obj: Record<string, unknown>,\n): Record<string, unknown> {\n  const idMap = new Map<string, string>()\n\n  function transformIds(value: unknown): unknown {\n    if (value === null || value === undefined) {\n      return value\n    }\n\n    if (Array.isArray(value)) {\n      return value.map(transformIds)\n    }\n\n    if (typeof value === 'object') {\n      const result: Record<string, unknown> = {}\n      for (const [key, val] of Object.entries(value)) {\n        if (key === 'id' && typeof val === 'string') {\n          if (!idMap.has(val)) {\n            idMap.set(val, createElementId())\n          }\n          result[key] = `${val}-${idMap.get(val)}`\n        } else {\n          result[key] = transformIds(val)\n        }\n      }\n      return result\n    }\n\n    return value\n  }\n\n  return transformIds(obj) as Record<string, unknown>\n}\n","import { useEffect, useRef } from 'react'\n\nimport { VIEW_HEADER_HEIGHT } from '@jbrowse/core/ui'\nimport { getSession } from '@jbrowse/core/util'\nimport { cx, makeStyles } from '@jbrowse/core/util/tss-react'\nimport { isSessionWithMultipleViews } from '@jbrowse/product-core'\nimport KeyboardArrowRightIcon from '@mui/icons-material/KeyboardArrowRight'\nimport { observer } from 'mobx-react'\n\nimport ViewButtons from './ViewButtons.tsx'\nimport ViewContainerTitle from './ViewContainerTitle.tsx'\nimport ViewMenu from './ViewMenu.tsx'\n\nimport type { IBaseViewModel } from '@jbrowse/core/pluggableElementTypes/models'\n\nconst useStyles = makeStyles()(theme => ({\n  icon: {\n    color: theme.palette.secondary.contrastText,\n  },\n  grow: {\n    flexGrow: 1,\n  },\n  viewHeader: {\n    display: 'flex',\n    height: VIEW_HEADER_HEIGHT,\n    top: 0,\n    zIndex: 900,\n  },\n  viewTitle: {\n    display: 'flex',\n    alignItems: 'center',\n  },\n}))\n\nconst ViewHeader = observer(function ViewHeader({\n  view,\n  onClose,\n  onMinimize,\n  className,\n}: {\n  view: IBaseViewModel\n  onClose: () => void\n  onMinimize: () => void\n  className?: string\n}) {\n  const { classes } = useStyles()\n  const scrollRef = useRef<HTMLDivElement>(null)\n  const session = getSession(view)\n  let stickyViewHeaders = false\n  if (isSessionWithMultipleViews(session)) {\n    ;({ stickyViewHeaders } = session)\n  }\n\n  // scroll the view into view when first mounted. note: this effect will run\n  // only once, because of the empty array second param\n  useEffect(() => {\n    if (typeof jest === 'undefined') {\n      scrollRef.current?.scrollIntoView({ block: 'center' })\n    }\n  }, [])\n  return (\n    <div\n      ref={scrollRef}\n      className={cx(classes.viewHeader, className)}\n      style={{ position: stickyViewHeaders ? 'sticky' : undefined }}\n    >\n      <ViewMenu model={view} IconProps={{ className: classes.icon }} />\n      <div className={classes.grow} />\n      <div className={classes.viewTitle}>\n        {session.focusedViewId === view.id ? (\n          <KeyboardArrowRightIcon className={classes.icon} fontSize=\"small\" />\n        ) : null}\n        <ViewContainerTitle view={view} />\n      </div>\n      <div className={classes.grow} />\n      <ViewButtons onClose={onClose} onMinimize={onMinimize} view={view} />\n    </div>\n  )\n})\n\nexport default ViewHeader\n","import { Suspense } from 'react'\n\n// ui elements\nimport LoadingEllipses from '@jbrowse/core/ui/LoadingEllipses'\nimport { getEnv } from '@jbrowse/core/util'\nimport { observer } from 'mobx-react'\n\nimport type {\n  AbstractViewModel,\n  SessionWithFocusedViewAndDrawerWidgets,\n} from '@jbrowse/core/util'\n\nconst ViewWrapper = observer(function ViewWrapper({\n  view,\n  session,\n}: {\n  view: AbstractViewModel\n  session: SessionWithFocusedViewAndDrawerWidgets\n}) {\n  const { pluginManager } = getEnv(session)\n  const viewType = pluginManager.getViewType(view.type)\n  if (!viewType) {\n    throw new Error(`unknown view type ${view.type}`)\n  }\n  const { ReactComponent } = viewType\n  if (view.minimized) {\n    return null\n  }\n\n  return (\n    <Suspense fallback={<LoadingEllipses variant=\"h6\" />}>\n      <ReactComponent model={view} session={session} />\n    </Suspense>\n  )\n})\n\nexport default ViewWrapper\n","import { useEffect } from 'react'\n\nimport { useWidthSetter } from '@jbrowse/core/util'\nimport { cx, makeStyles } from '@jbrowse/core/util/tss-react'\nimport { Paper, useTheme } from '@mui/material'\nimport { observer } from 'mobx-react'\n\nimport ViewHeader from './ViewHeader.tsx'\nimport ViewWrapper from './ViewWrapper.tsx'\n\nimport type {\n  AbstractViewModel,\n  SessionWithFocusedViewAndDrawerWidgets,\n} from '@jbrowse/core/util'\n\nconst useStyles = makeStyles()(theme => ({\n  viewContainer: {\n    margin: theme.spacing(0.5),\n    padding: `0 ${theme.spacing(1)} ${theme.spacing(1)}`,\n    overflow: 'clip',\n    // xref https://stackoverflow.com/questions/43909940/why-does-overflowhidden-prevent-positionsticky-from-working\n    // note that contain:paint also seems to work\n  },\n  focusedView: {\n    background: theme.palette.secondary.main,\n  },\n  unfocusedView: {\n    background: theme.palette.secondary.dark,\n  },\n}))\n\nconst ViewContainer = observer(function ViewContainer({\n  view,\n  session,\n}: {\n  view: AbstractViewModel\n  session: SessionWithFocusedViewAndDrawerWidgets\n}) {\n  const theme = useTheme()\n  const ref = useWidthSetter(view, theme.spacing(1))\n  const { classes } = useStyles()\n\n  useEffect(() => {\n    function handleSelectView(e: Event) {\n      if (e.target instanceof Element && ref.current?.contains(e.target)) {\n        session.setFocusedViewId(view.id)\n      }\n    }\n\n    document.addEventListener('mousedown', handleSelectView)\n    document.addEventListener('keydown', handleSelectView)\n    return () => {\n      document.removeEventListener('mousedown', handleSelectView)\n      document.removeEventListener('keydown', handleSelectView)\n    }\n  }, [ref, session, view])\n\n  const backgroundColorClassName =\n    session.focusedViewId === view.id\n      ? classes.focusedView\n      : classes.unfocusedView\n  const viewContainerClassName = cx(\n    classes.viewContainer,\n    backgroundColorClassName,\n  )\n\n  return (\n    <Paper\n      ref={ref}\n      elevation={12}\n      className={viewContainerClassName}\n      data-testid={`view-container-${view.id}`}\n    >\n      <ViewHeader\n        view={view}\n        onClose={() => {\n          session.removeView(view)\n        }}\n        onMinimize={() => {\n          view.setMinimized(!view.minimized)\n        }}\n        className={backgroundColorClassName}\n      />\n      <Paper elevation={0}>\n        <ViewWrapper view={view} session={session} />\n      </Paper>\n    </Paper>\n  )\n})\n\nexport default ViewContainer\n","import CascadingMenuButton from '@jbrowse/core/ui/CascadingMenuButton'\nimport { makeStyles } from '@jbrowse/core/util/tss-react'\nimport AddIcon from '@mui/icons-material/Add'\nimport HorizontalSplitIcon from '@mui/icons-material/HorizontalSplit'\nimport TabIcon from '@mui/icons-material/Tab'\nimport VerticalSplitIcon from '@mui/icons-material/VerticalSplit'\n\nimport { useDockview } from './DockviewContext.tsx'\n\nimport type { IDockviewHeaderActionsProps } from 'dockview-react'\n\nconst useStyles = makeStyles()(theme => ({\n  headerActions: {\n    display: 'flex',\n    alignItems: 'center',\n    height: '100%',\n  },\n  headerButton: {\n    padding: 4,\n    color: theme.palette.primary.contrastText,\n  },\n  headerIcon: {\n    fontSize: 16,\n  },\n}))\n\nexport default function DockviewLeftHeaderActions({\n  containerApi,\n  group,\n}: IDockviewHeaderActionsProps) {\n  const { classes } = useStyles()\n  const { addEmptyTab } = useDockview()\n\n  const handleSplit = (direction: 'right' | 'below') => {\n    const newGroup = containerApi.addGroup({\n      referenceGroup: group,\n      direction,\n    })\n    addEmptyTab(newGroup)\n  }\n\n  return (\n    <div className={classes.headerActions}>\n      <CascadingMenuButton\n        menuItems={[\n          {\n            label: 'New empty tab',\n            icon: TabIcon,\n            onClick: () => {\n              addEmptyTab()\n            },\n          },\n          {\n            label: 'New empty split horizontal',\n            icon: VerticalSplitIcon,\n            onClick: () => {\n              handleSplit('right')\n            },\n          },\n          {\n            label: 'New empty split vertical',\n            icon: HorizontalSplitIcon,\n            onClick: () => {\n              handleSplit('below')\n            },\n          },\n        ]}\n        size=\"small\"\n        className={classes.headerButton}\n        onClick={() => {\n          group.api.setActive()\n        }}\n      >\n        <AddIcon className={classes.headerIcon} />\n      </CascadingMenuButton>\n    </div>\n  )\n}\n","import { isSessionWithDockviewLayout } from '../../DockviewLayout/index.ts'\n\nimport type { DockviewSessionType } from './types.ts'\nimport type { AbstractViewModel } from '@jbrowse/core/util'\nimport type { DockviewApi } from 'dockview-react'\n\nexport function getViewsForPanel(\n  panelId: string,\n  session: DockviewSessionType | undefined,\n): AbstractViewModel[] {\n  if (!session || !isSessionWithDockviewLayout(session)) {\n    return []\n  }\n  const viewIds = session.getViewIdsForPanel(panelId)\n  return [...viewIds]\n    .map(id => session.views.find(v => v.id === id))\n    .filter((v): v is AbstractViewModel => v !== undefined)\n}\n\nexport function createPanelConfig(\n  panelId: string,\n  session: DockviewSessionType,\n  title = 'Main',\n) {\n  return {\n    id: panelId,\n    component: 'jbrowseView' as const,\n    tabComponent: 'jbrowseTab' as const,\n    title,\n    params: { panelId, session },\n  }\n}\n\nexport function cleanLayoutForStorage(\n  layout: ReturnType<DockviewApi['toJSON']>,\n) {\n  return {\n    ...layout,\n    panels: Object.fromEntries(\n      Object.entries(layout.panels).map(([id, panel]) => [\n        id,\n        { ...panel, params: {} },\n      ]),\n    ),\n  }\n}\n\nexport function updatePanelParams(\n  api: DockviewApi,\n  session: DockviewSessionType,\n) {\n  for (const panel of api.panels) {\n    panel.update({ params: { panelId: panel.id, session } })\n  }\n}\n\nexport function rearrangePanelsWithDirection(\n  api: DockviewApi,\n  getPosition: (\n    idx: number,\n    panelStates: { id: string }[],\n  ) =>\n    | { referencePanel: string; direction: 'right' | 'below' | 'within' }\n    | undefined,\n) {\n  const panels = api.panels\n  if (panels.length <= 1) {\n    return\n  }\n\n  const panelStates = panels.map(p => ({\n    id: p.id,\n    component: 'jbrowseView' as const,\n    tabComponent: 'jbrowseTab' as const,\n    title: p.title,\n    params: p.params,\n  }))\n\n  for (const p of panels) {\n    api.removePanel(p)\n  }\n  for (const [idx, state] of panelStates.entries()) {\n    api.addPanel({\n      ...state,\n      position: getPosition(idx, panelStates),\n    })\n  }\n}\n","import CascadingMenuButton from '@jbrowse/core/ui/CascadingMenuButton'\nimport { makeStyles } from '@jbrowse/core/util/tss-react'\nimport CloseIcon from '@mui/icons-material/Close'\nimport DynamicFeedIcon from '@mui/icons-material/DynamicFeed'\nimport MoreHorizIcon from '@mui/icons-material/MoreHoriz'\nimport TableRowsIcon from '@mui/icons-material/TableRows'\nimport ViewColumnIcon from '@mui/icons-material/ViewColumn'\nimport ViewModuleIcon from '@mui/icons-material/ViewModule'\nimport { IconButton, Tooltip } from '@mui/material'\n\nimport { useDockview } from './DockviewContext.tsx'\nimport { rearrangePanelsWithDirection } from './dockviewUtils.ts'\n\nimport type { IDockviewHeaderActionsProps } from 'dockview-react'\n\nconst useStyles = makeStyles()(theme => ({\n  headerActions: {\n    display: 'flex',\n    alignItems: 'center',\n    height: '100%',\n  },\n  headerButton: {\n    padding: 4,\n    color: theme.palette.primary.contrastText,\n  },\n  headerIcon: {\n    fontSize: 16,\n  },\n}))\n\nexport default function DockviewRightHeaderActions({\n  containerApi,\n  group,\n}: IDockviewHeaderActionsProps) {\n  const { classes } = useStyles()\n  const { rearrangePanels } = useDockview()\n\n  const tileHorizontally = () => {\n    rearrangePanels(api => {\n      rearrangePanelsWithDirection(api, (idx, states) =>\n        idx === 0\n          ? undefined\n          : { referencePanel: states[0]!.id, direction: 'right' },\n      )\n    })\n  }\n\n  const tileVertically = () => {\n    rearrangePanels(api => {\n      rearrangePanelsWithDirection(api, (idx, states) =>\n        idx === 0\n          ? undefined\n          : { referencePanel: states[0]!.id, direction: 'below' },\n      )\n    })\n  }\n\n  const tileGrid = () => {\n    rearrangePanels(api => {\n      const panels = api.panels\n      if (panels.length <= 1) {\n        return\n      }\n      const cols = Math.ceil(Math.sqrt(panels.length))\n      rearrangePanelsWithDirection(api, (idx, states) => {\n        if (idx === 0) {\n          return undefined\n        }\n        const col = idx % cols\n        const row = Math.floor(idx / cols)\n        if (col === 0) {\n          const refIdx = (row - 1) * cols\n          return { referencePanel: states[refIdx]!.id, direction: 'below' }\n        }\n        return { referencePanel: states[idx - 1]!.id, direction: 'right' }\n      })\n    })\n  }\n\n  const stackAll = () => {\n    rearrangePanels(api => {\n      rearrangePanelsWithDirection(api, (idx, states) =>\n        idx === 0\n          ? undefined\n          : { referencePanel: states[0]!.id, direction: 'within' },\n      )\n    })\n  }\n\n  const showLayoutOptions = containerApi.panels.length > 1\n  const showCloseGroup = containerApi.groups.length > 1\n\n  return (\n    <div className={classes.headerActions}>\n      {showLayoutOptions && (\n        <CascadingMenuButton\n          menuItems={[\n            {\n              label: 'Global: change layout into set of tabs',\n              icon: DynamicFeedIcon,\n              onClick: stackAll,\n            },\n            {\n              label: 'Global: tile horizontally',\n              icon: ViewColumnIcon,\n              onClick: tileHorizontally,\n            },\n            {\n              label: 'Global: tile vertically',\n              icon: TableRowsIcon,\n              onClick: tileVertically,\n            },\n            {\n              label: 'Global: tile grid',\n              icon: ViewModuleIcon,\n              onClick: tileGrid,\n            },\n          ]}\n          size=\"small\"\n          className={classes.headerButton}\n        >\n          <MoreHorizIcon className={classes.headerIcon} />\n        </CascadingMenuButton>\n      )}\n      {showCloseGroup && (\n        <Tooltip title=\"Close group\">\n          <IconButton\n            size=\"small\"\n            onClick={() => {\n              for (const panel of group.panels) {\n                panel.api.close()\n              }\n            }}\n            className={classes.headerButton}\n          >\n            <CloseIcon className={classes.headerIcon} />\n          </IconButton>\n        </Tooltip>\n      )}\n    </div>\n  )\n}\n","import { Suspense, lazy } from 'react'\n\nimport { makeStyles } from '@jbrowse/core/util/tss-react'\nimport { observer } from 'mobx-react'\n\nimport ViewContainer from './ViewContainer.tsx'\nimport { getViewsForPanel } from './dockviewUtils.ts'\n\nimport type { DockviewSessionType } from './types.ts'\nimport type { IDockviewPanelProps } from 'dockview-react'\n\nconst ViewLauncher = lazy(() => import('./ViewLauncher.tsx'))\n\nconst useStyles = makeStyles()(theme => ({\n  container: {\n    height: '100%',\n    overflowY: 'auto',\n    background: theme.palette.background.default,\n  },\n  viewStack: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  spacer: {\n    height: 300,\n  },\n  emptyPanel: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    height: '100%',\n  },\n}))\n\nexport interface JBrowseViewPanelParams {\n  panelId: string\n  session?: DockviewSessionType\n}\n\nconst JBrowseViewPanel = observer(function JBrowseViewPanel({\n  params,\n}: IDockviewPanelProps<JBrowseViewPanelParams>) {\n  const { panelId, session } = params\n  const { classes } = useStyles()\n\n  if (!session) {\n    return <div className={classes.container}>Loading...</div>\n  }\n\n  const views = getViewsForPanel(panelId, session)\n\n  if (views.length === 0) {\n    return (\n      <div className={classes.container}>\n        <div className={classes.emptyPanel}>\n          <Suspense fallback={null}>\n            <ViewLauncher session={session} />\n          </Suspense>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className={classes.container}>\n      <div className={classes.viewStack}>\n        {views.map(view => (\n          <ViewContainer key={view.id} view={view} session={session} />\n        ))}\n        <div className={classes.spacer} />\n      </div>\n    </div>\n  )\n})\n\nexport default JBrowseViewPanel\n","import CascadingMenuButton from '@jbrowse/core/ui/CascadingMenuButton'\nimport { makeStyles } from '@jbrowse/core/util/tss-react'\nimport CloseIcon from '@mui/icons-material/Close'\nimport EditIcon from '@mui/icons-material/Edit'\nimport MoreVertIcon from '@mui/icons-material/MoreVert'\n\nconst useStyles = makeStyles()({\n  tabIcons: {\n    display: 'flex',\n    alignItems: 'center',\n    visibility: 'hidden',\n  },\n  tabIconsVisible: {\n    visibility: 'visible',\n  },\n  tabIcon: {\n    padding: 2,\n    marginLeft: 2,\n    color: 'inherit',\n  },\n  smallIcon: {\n    fontSize: 14,\n  },\n})\n\nexport default function JBrowseTabMenu({\n  isHovered,\n  onRename,\n  onClose,\n}: {\n  isHovered: boolean\n  onRename: () => void\n  onClose: () => void\n}) {\n  const { classes } = useStyles()\n\n  return (\n    <div\n      className={`${classes.tabIcons} ${isHovered ? classes.tabIconsVisible : ''}`}\n    >\n      <CascadingMenuButton\n        menuItems={[\n          {\n            label: 'Rename tab',\n            icon: EditIcon,\n            onClick: onRename,\n          },\n          {\n            label: 'Close tab',\n            icon: CloseIcon,\n            onClick: onClose,\n          },\n        ]}\n        size=\"small\"\n        className={classes.tabIcon}\n        stopPropagation\n      >\n        <MoreVertIcon className={classes.smallIcon} />\n      </CascadingMenuButton>\n    </div>\n  )\n}\n","import { useState } from 'react'\n\nimport { makeStyles } from '@jbrowse/core/util/tss-react'\nimport { InputBase, Typography } from '@mui/material'\nimport { observer } from 'mobx-react'\n\nimport JBrowseTabMenu from './JBrowseTabMenu.tsx'\nimport { getViewsForPanel } from './dockviewUtils.ts'\n\nimport type { DockviewSessionType } from './types.ts'\nimport type { AbstractViewModel } from '@jbrowse/core/util'\nimport type { IDockviewPanelHeaderProps } from 'dockview-react'\n\nconst useStyles = makeStyles()(theme => ({\n  tabContainer: {\n    display: 'flex',\n    alignItems: 'center',\n    height: '100%',\n    padding: '0 4px',\n    gap: 4,\n  },\n  tabTitle: {\n    display: 'flex',\n    alignItems: 'center',\n    flex: 1,\n    overflow: 'hidden',\n    minWidth: 0,\n  },\n  tabTitleText: {\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    fontSize: '0.8rem',\n  },\n\n  editInput: {\n    fontSize: '0.8rem',\n    padding: '2px 4px',\n    color: 'inherit',\n    backgroundColor: theme.palette.action.selected,\n    borderRadius: theme.shape.borderRadius,\n    flex: 1,\n  },\n}))\n\nfunction stopEvent(e: React.MouseEvent | React.PointerEvent) {\n  e.stopPropagation()\n  e.preventDefault()\n}\n\nexport interface JBrowseViewPanelParams {\n  panelId: string\n  session?: DockviewSessionType\n}\n\nfunction getTabDisplayName(\n  views: AbstractViewModel[],\n  session: DockviewSessionType,\n) {\n  if (views.length === 0) {\n    return 'Empty'\n  }\n  if (views.length === 1) {\n    const view = views[0]!\n    return (\n      view.displayName ||\n      // @ts-expect-error\n      view.assemblyNames\n        // @ts-expect-error\n        ?.map(r => session.assemblyManager.get(r)?.displayName)\n        .join(',') ||\n      'View'\n    )\n  }\n  return `${views.length} views`\n}\n\nconst JBrowseViewTab = observer(function JBrowseViewTab({\n  params,\n  api,\n}: IDockviewPanelHeaderProps<JBrowseViewPanelParams>) {\n  const { panelId, session } = params\n  const { classes } = useStyles()\n  const [isEditing, setIsEditing] = useState(false)\n  const [isHovered, setIsHovered] = useState(false)\n  const [editValue, setEditValue] = useState('')\n\n  if (!session) {\n    return (\n      <div className={classes.tabContainer}>\n        <span className={classes.tabTitleText}>Loading...</span>\n      </div>\n    )\n  }\n\n  const views = getViewsForPanel(panelId, session)\n  const displayValue = getTabDisplayName(views, session)\n\n  const handleStartEdit = () => {\n    setEditValue(api.title || displayValue)\n    setIsEditing(true)\n  }\n\n  const handleSave = () => {\n    if (editValue.trim()) {\n      api.setTitle(editValue.trim())\n    }\n    setIsEditing(false)\n  }\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter') {\n      handleSave()\n    } else if (e.key === 'Escape') {\n      setIsEditing(false)\n    }\n  }\n\n  return (\n    <div\n      className={classes.tabContainer}\n      onMouseEnter={() => {\n        setIsHovered(true)\n      }}\n      onMouseLeave={() => {\n        setIsHovered(false)\n      }}\n    >\n      <div className={classes.tabTitle}>\n        {isEditing ? (\n          <InputBase\n            autoFocus\n            className={classes.editInput}\n            value={editValue}\n            onChange={e => {\n              setEditValue(e.target.value)\n            }}\n            onFocus={e => {\n              e.target.select()\n            }}\n            onBlur={handleSave}\n            onKeyDown={handleKeyDown}\n            onClick={stopEvent}\n          />\n        ) : (\n          <>\n            <Typography\n              className={classes.tabTitleText}\n              variant=\"body2\"\n              onDoubleClick={handleStartEdit}\n            >\n              {api.title || displayValue}\n            </Typography>\n            <JBrowseTabMenu\n              isHovered={isHovered}\n              onRename={handleStartEdit}\n              onClose={() => {\n                api.close()\n              }}\n            />\n          </>\n        )}\n      </div>\n    </div>\n  )\n})\nexport default JBrowseViewTab\n","import { useCallback, useEffect, useMemo, useRef, useState } from 'react'\n\nimport { makeStyles } from '@jbrowse/core/util/tss-react'\nimport { createElementId } from '@jbrowse/core/util/types/mst'\nimport { useTheme } from '@mui/material'\nimport { DockviewReact } from 'dockview-react'\nimport { autorun } from 'mobx'\nimport { observer } from 'mobx-react'\n\nimport {\n  DockviewContext,\n  clearPendingMoveAction,\n  peekPendingMoveAction,\n} from './DockviewContext.tsx'\nimport DockviewLeftHeaderActions from './DockviewLeftHeaderActions.tsx'\nimport DockviewRightHeaderActions from './DockviewRightHeaderActions.tsx'\nimport JBrowseViewPanel from './JBrowseViewPanel.tsx'\nimport JBrowseViewTab from './JBrowseViewTab.tsx'\nimport {\n  cleanLayoutForStorage,\n  createPanelConfig,\n  updatePanelParams,\n} from './dockviewUtils.ts'\nimport { isSessionWithDockviewLayout } from '../../DockviewLayout/index.ts'\n\nimport type { DockviewSessionType } from './types.ts'\nimport type {\n  DockviewApi,\n  DockviewGroupPanel,\n  DockviewReadyEvent,\n} from 'dockview-react'\n\nimport 'dockview-react/dist/styles/dockview.css'\n\nconst useStyles = makeStyles()(() => ({\n  container: {\n    height: '100%',\n    width: '100%',\n    gridRow: 'components',\n  },\n}))\n\ninterface Props {\n  session: DockviewSessionType\n}\n\nfunction getPanelPosition(\n  group: DockviewGroupPanel | undefined,\n  direction?: 'right' | 'below',\n) {\n  if (!group) {\n    return undefined\n  }\n  if (direction) {\n    return { referenceGroup: group, direction }\n  }\n  return { referenceGroup: group }\n}\n\nconst components = {\n  jbrowseView: JBrowseViewPanel,\n}\n\nconst tabComponents = {\n  jbrowseTab: JBrowseViewTab,\n}\n\nconst TiledViewsContainer = observer(function TiledViewsContainer({\n  session,\n}: Props) {\n  const { classes } = useStyles()\n  const theme = useTheme()\n  const [api, setApi] = useState<DockviewApi | null>(null)\n  const trackedViewIdsRef = useRef<Set<string>>(new Set())\n  const rearrangingRef = useRef(false)\n  const sessionRef = useRef(session)\n  sessionRef.current = session\n\n  const rearrangePanels = useCallback(\n    (arrange: (api: DockviewApi) => void) => {\n      if (!api) {\n        return\n      }\n      rearrangingRef.current = true\n      try {\n        arrange(api)\n      } finally {\n        rearrangingRef.current = false\n      }\n    },\n    [api],\n  )\n\n  const addEmptyTab = useCallback(\n    (targetGroup?: DockviewGroupPanel) => {\n      if (!api) {\n        return\n      }\n      const panelId = `panel-${createElementId()}`\n      const group = targetGroup ?? api.activeGroup\n      api.addPanel({\n        ...createPanelConfig(panelId, session, 'New Tab'),\n        position: getPanelPosition(group),\n      })\n\n      if (isSessionWithDockviewLayout(session)) {\n        session.setActivePanelId(panelId)\n      }\n    },\n    [api, session],\n  )\n\n  const moveViewToPanel = useCallback(\n    (viewId: string, direction?: 'right') => {\n      if (!api || !isSessionWithDockviewLayout(session)) {\n        return\n      }\n\n      // Remove view from current panel\n      session.removeViewFromPanel(viewId)\n\n      // Create new panel and assign the view to it\n      const panelId = `panel-${createElementId()}`\n      api.addPanel({\n        ...createPanelConfig(panelId, session, 'New Tab'),\n        position: getPanelPosition(api.activeGroup, direction),\n      })\n      session.assignViewToPanel(panelId, viewId)\n      session.setActivePanelId(panelId)\n    },\n    [api, session],\n  )\n\n  const moveViewToNewTab = useCallback(\n    (viewId: string) => {\n      moveViewToPanel(viewId)\n    },\n    [moveViewToPanel],\n  )\n\n  const moveViewToSplitRight = useCallback(\n    (viewId: string) => {\n      moveViewToPanel(viewId, 'right')\n    },\n    [moveViewToPanel],\n  )\n\n  const contextValue = useMemo(\n    () => ({\n      api,\n      rearrangePanels,\n      addEmptyTab,\n      moveViewToNewTab,\n      moveViewToSplitRight,\n    }),\n    [api, rearrangePanels, addEmptyTab, moveViewToNewTab, moveViewToSplitRight],\n  )\n\n  const createInitialPanels = useCallback((dockviewApi: DockviewApi) => {\n    const session = sessionRef.current\n    const pendingAction = peekPendingMoveAction()\n\n    // Check if there's init configuration from URL params\n    const initLayout = isSessionWithDockviewLayout(session)\n      ? session.init\n      : undefined\n\n    // If we have init configuration from URL params, use it\n    if (initLayout && isSessionWithDockviewLayout(session)) {\n      trackedViewIdsRef.current.clear()\n      let firstPanelId: string | undefined\n\n      // Collect groups and their sizes for post-processing\n      const groupSizes: { group: DockviewGroupPanel; size: number }[] = []\n\n      // Process nested layout structure\n      // Returns the group created for this node (for use as reference by siblings)\n      function processNode(\n        node: typeof initLayout,\n        referenceGroup: DockviewGroupPanel | undefined,\n        direction: 'right' | 'below' | undefined,\n      ): DockviewGroupPanel | undefined {\n        if (!node) {\n          return undefined\n        }\n        if (node.viewIds !== undefined) {\n          // Panel node - create a dockview panel\n          const panelId = `panel-${createElementId()}`\n          if (!firstPanelId) {\n            firstPanelId = panelId\n          }\n          const position =\n            referenceGroup && direction\n              ? { referenceGroup, direction }\n              : referenceGroup\n                ? { referenceGroup }\n                : undefined\n          dockviewApi.addPanel({\n            ...createPanelConfig(panelId, session, 'Tab'),\n            position,\n          })\n          // Populate panelViewAssignments from init\n          for (const viewId of node.viewIds) {\n            if (isSessionWithDockviewLayout(session)) {\n              session.assignViewToPanel(panelId, viewId)\n            }\n            trackedViewIdsRef.current.add(viewId)\n          }\n          // Return the group this panel was added to\n          const group = dockviewApi.getPanel(panelId)?.group\n          // Track size for this group if specified\n          if (group && node.size !== undefined) {\n            groupSizes.push({ group, size: node.size })\n          }\n          return group\n        }\n        if (node.children && node.children.length > 0) {\n          // Container node - process children\n          const dockviewDirection =\n            node.direction === 'horizontal' ? 'right' : 'below'\n          let currentGroup = referenceGroup\n          for (let i = 0; i < node.children.length; i++) {\n            const child = node.children[i]!\n            // First child uses parent's reference/direction, subsequent children split from previous\n            const childDirection = i === 0 ? direction : dockviewDirection\n            const childRef = i === 0 ? referenceGroup : currentGroup\n            const newGroup = processNode(child, childRef, childDirection)\n            if (newGroup) {\n              currentGroup = newGroup\n            }\n          }\n          return currentGroup\n        }\n        return undefined\n      }\n\n      processNode(initLayout, undefined, undefined)\n\n      // Apply proportional sizes after all panels are created\n      // Only handle simple horizontal/vertical splits at the root level\n      // Use requestAnimationFrame to ensure layout is complete\n      if (\n        groupSizes.length >= 2 &&\n        initLayout.direction &&\n        groupSizes.length === initLayout.children?.length\n      ) {\n        const direction = initLayout.direction\n        requestAnimationFrame(() => {\n          const totalSize = groupSizes.reduce((sum, g) => sum + g.size, 0)\n          if (totalSize > 0) {\n            if (direction === 'horizontal') {\n              const containerWidth = dockviewApi.width\n              if (containerWidth > 0) {\n                for (const { group, size } of groupSizes) {\n                  const width = Math.round(containerWidth * (size / totalSize))\n                  group.api.setSize({ width })\n                }\n              }\n            } else {\n              const containerHeight = dockviewApi.height\n              if (containerHeight > 0) {\n                for (const { group, size } of groupSizes) {\n                  const height = Math.round(\n                    containerHeight * (size / totalSize),\n                  )\n                  group.api.setSize({ height })\n                }\n              }\n            }\n          }\n        })\n      }\n\n      // Clear init after processing (it's only needed once)\n      session.setInit(undefined)\n      if (firstPanelId) {\n        session.setActivePanelId(firstPanelId)\n        // Activate the first panel in dockview (otherwise the last added panel is active)\n        dockviewApi.getPanel(firstPanelId)?.api.setActive()\n      }\n      return\n    }\n\n    // Clear any stale state from previous mounts (e.g., React StrictMode double-mounting)\n    if (isSessionWithDockviewLayout(session)) {\n      for (const panelId of session.panelViewAssignments.keys()) {\n        session.removePanel(panelId)\n      }\n      session.setDockviewLayout(undefined)\n    }\n    trackedViewIdsRef.current.clear()\n\n    // Only handle pending action if the view actually exists in session.views\n    // This handles React StrictMode double-mounting and ensures we have all views\n    const pendingViewExists =\n      pendingAction && session.views.some(v => v.id === pendingAction.viewId)\n\n    if (pendingViewExists && isSessionWithDockviewLayout(session)) {\n      // Create correct panel structure upfront when there's a pending move action\n      const { type, viewId: pendingViewId } = pendingAction\n      const otherViewIds = session.views\n        .map(v => v.id)\n        .filter(id => id !== pendingViewId)\n\n      // Create first panel for existing views (excluding the pending view)\n      // Only create if there are other views to put in it\n      if (otherViewIds.length > 0) {\n        const firstPanelId = `panel-${createElementId()}`\n        dockviewApi.addPanel(createPanelConfig(firstPanelId, session))\n        for (const viewId of otherViewIds) {\n          session.assignViewToPanel(firstPanelId, viewId)\n          trackedViewIdsRef.current.add(viewId)\n        }\n      }\n\n      // Create panel for the pending view\n      const pendingPanelId = `panel-${createElementId()}`\n      const direction = type === 'splitRight' ? 'right' : undefined\n      dockviewApi.addPanel({\n        ...createPanelConfig(pendingPanelId, session, 'New Tab'),\n        position: getPanelPosition(dockviewApi.activeGroup, direction),\n      })\n      session.assignViewToPanel(pendingPanelId, pendingViewId)\n      trackedViewIdsRef.current.add(pendingViewId)\n      session.setActivePanelId(pendingPanelId)\n\n      // Only clear the pending action after successful setup\n      clearPendingMoveAction()\n    } else {\n      // Normal case: create single initial panel\n      const panelId = `panel-${createElementId()}`\n      dockviewApi.addPanel(createPanelConfig(panelId, session))\n\n      if (isSessionWithDockviewLayout(session)) {\n        session.setActivePanelId(panelId)\n      }\n    }\n  }, [])\n\n  const onReady = useCallback(\n    (event: DockviewReadyEvent) => {\n      setApi(event.api)\n\n      event.api.onDidActivePanelChange(e => {\n        if (e?.id && isSessionWithDockviewLayout(sessionRef.current)) {\n          sessionRef.current.setActivePanelId(e.id)\n        }\n      })\n\n      event.api.onDidRemovePanel(e => {\n        if (rearrangingRef.current) {\n          return\n        }\n        if (isSessionWithDockviewLayout(sessionRef.current)) {\n          const viewIds = sessionRef.current.getViewIdsForPanel(e.id)\n          for (const viewId of viewIds) {\n            const view = sessionRef.current.views.find(v => v.id === viewId)\n            if (view) {\n              sessionRef.current.removeView(view)\n            }\n          }\n          sessionRef.current.removePanel(e.id)\n        }\n      })\n\n      event.api.onDidLayoutChange(() => {\n        if (\n          !rearrangingRef.current &&\n          isSessionWithDockviewLayout(sessionRef.current)\n        ) {\n          sessionRef.current.setDockviewLayout(\n            cleanLayoutForStorage(event.api.toJSON()),\n          )\n        }\n      })\n\n      // If there's a pending move action, always create fresh panels to handle it\n      // Otherwise, try to restore from saved layout if available\n      const hasPendingAction = peekPendingMoveAction() !== null\n      const dockviewSession = isSessionWithDockviewLayout(sessionRef.current)\n        ? sessionRef.current\n        : null\n      const savedLayout = !hasPendingAction && dockviewSession?.dockviewLayout\n\n      if (savedLayout) {\n        try {\n          rearrangingRef.current = true\n          event.api.fromJSON(savedLayout)\n          updatePanelParams(event.api, dockviewSession)\n          for (const viewIds of dockviewSession.panelViewAssignments.values()) {\n            for (const viewId of viewIds) {\n              trackedViewIdsRef.current.add(viewId)\n            }\n          }\n          // Verify restoration succeeded - if no panels, fall back to fresh creation\n          if (event.api.panels.length === 0) {\n            throw new Error('No panels after fromJSON restore')\n          }\n        } catch (e) {\n          console.error('Failed to restore dockview layout:', e)\n          createInitialPanels(event.api)\n        } finally {\n          rearrangingRef.current = false\n        }\n      } else {\n        createInitialPanels(event.api)\n      }\n    },\n    [createInitialPanels],\n  )\n\n  useEffect(() => {\n    const dispose = autorun(() => {\n      if (!api) {\n        return\n      }\n\n      const { views } = session\n      const currentViewIds = new Set(views.map(v => v.id))\n      const trackedIds = trackedViewIdsRef.current\n\n      for (const view of views) {\n        if (!trackedIds.has(view.id)) {\n          trackedIds.add(view.id)\n\n          if (isSessionWithDockviewLayout(session)) {\n            let activePanelId = session.activePanelId\n            if (!activePanelId || !api.getPanel(activePanelId)) {\n              const firstPanel = api.panels[0]\n              if (firstPanel) {\n                activePanelId = firstPanel.id\n              } else {\n                activePanelId = `panel-${createElementId()}`\n                api.addPanel(createPanelConfig(activePanelId, session))\n              }\n              session.setActivePanelId(activePanelId)\n            }\n            session.assignViewToPanel(activePanelId, view.id)\n          }\n        }\n      }\n\n      for (const id of trackedIds) {\n        if (!currentViewIds.has(id)) {\n          trackedIds.delete(id)\n          if (isSessionWithDockviewLayout(session)) {\n            session.removeViewFromPanel(id)\n          }\n        }\n      }\n    })\n\n    return dispose\n  }, [session, api])\n\n  // React to layout changes from undo/redo\n  useEffect(() => {\n    if (!api || !isSessionWithDockviewLayout(session)) {\n      return\n    }\n\n    const dispose = autorun(() => {\n      const { dockviewLayout } = session\n      if (!dockviewLayout || rearrangingRef.current) {\n        return\n      }\n\n      // Compare current dockview state with session state\n      const currentLayout = cleanLayoutForStorage(api.toJSON())\n      if (JSON.stringify(currentLayout) === JSON.stringify(dockviewLayout)) {\n        return\n      }\n\n      // Layout differs - restore from session (likely from undo/redo)\n      rearrangingRef.current = true\n      try {\n        api.fromJSON(dockviewLayout)\n        updatePanelParams(api, sessionRef.current)\n\n        // Rebuild tracked view IDs from restored layout\n        trackedViewIdsRef.current.clear()\n        for (const viewIds of session.panelViewAssignments.values()) {\n          for (const viewId of viewIds) {\n            trackedViewIdsRef.current.add(viewId)\n          }\n        }\n      } catch (e) {\n        console.error('Failed to restore dockview layout from undo:', e)\n      } finally {\n        rearrangingRef.current = false\n      }\n    })\n\n    return dispose\n  }, [session, api])\n\n  const themeClass =\n    theme.palette.mode === 'dark'\n      ? 'dockview-theme-dark'\n      : 'dockview-theme-light'\n\n  return (\n    <DockviewContext.Provider value={contextValue}>\n      <div className={`${classes.container} ${themeClass}`}>\n        <DockviewReact\n          components={components}\n          tabComponents={tabComponents}\n          leftHeaderActionsComponent={DockviewLeftHeaderActions}\n          rightHeaderActionsComponent={DockviewRightHeaderActions}\n          onReady={onReady}\n        />\n      </div>\n    </DockviewContext.Provider>\n  )\n})\n\nexport default TiledViewsContainer\n","import { createContext, useContext } from 'react'\n\nimport type { DockviewApi, DockviewGroupPanel } from 'dockview-react'\n\ninterface DockviewContextValue {\n  api: DockviewApi | null\n  rearrangePanels: (arrange: (api: DockviewApi) => void) => void\n  addEmptyTab: (targetGroup?: DockviewGroupPanel) => void\n  moveViewToNewTab: (viewId: string) => void\n  moveViewToSplitRight: (viewId: string) => void\n}\n\n// Pending action stored when workspaces not yet enabled\nlet pendingMoveAction: {\n  type: 'newTab' | 'splitRight'\n  viewId: string\n} | null = null\n\nexport function peekPendingMoveAction() {\n  return pendingMoveAction\n}\n\nexport function clearPendingMoveAction() {\n  pendingMoveAction = null\n}\n\nexport function getPendingMoveAction() {\n  const action = pendingMoveAction\n  pendingMoveAction = null\n  return action\n}\n\n// Functions to set pending actions (used by default context and for testing)\nexport function setPendingMoveToNewTab(viewId: string) {\n  pendingMoveAction = { type: 'newTab', viewId }\n}\n\nexport function setPendingMoveToSplitRight(viewId: string) {\n  pendingMoveAction = { type: 'splitRight', viewId }\n}\n\nexport const DockviewContext = createContext<DockviewContextValue>({\n  api: null,\n  rearrangePanels: () => {},\n  addEmptyTab: () => {},\n  moveViewToNewTab: setPendingMoveToNewTab,\n  moveViewToSplitRight: setPendingMoveToSplitRight,\n})\n\nexport function useDockview() {\n  return useContext(DockviewContext)\n}\n"],"names":["useStyles","makeStyles","theme","icon","color","palette","secondary","contrastText","observer","view","onClose","onMinimize","classes","_jsxs","_Fragment","children","_jsx","IconButton","onClick","minimized","AddIcon","className","fontSize","MinimizeIcon","CloseIcon","input","paddingBottom","paddingTop","inputBase","inputRoot","backgroundColor","light","inputFocused","borderColor","primary","main","assemblyManager","getSession","Tooltip","title","arrow","EditableTypography","value","displayName","assemblyNames","map","r","get","join","setValue","val","setDisplayName","variant","model","IconProps","session","moveViewToNewTab","moveViewToSplitRight","useDockview","usePanel","useWorkspaces","isSessionWithDockviewLayout","viewCount","viewId","viewIds","panelViewAssignments","values","includes","length","getPanelViewCount","id","views","moveView","panelFn","sessionFn","CascadingMenuButton","menuItems","label","type","subMenu","ContentCopyIcon","addView","obj","idMap","Map","transformIds","Array","isArray","result","key","Object","entries","has","set","createElementId","renameIds","structuredClone","getSnapshot","OpenInNewIcon","setUseWorkspaces","VerticalSplitIcon","KeyboardDoubleArrowUpIcon","moveViewToTopInPanel","moveViewToTop","KeyboardArrowUpIcon","moveViewUpInPanel","moveViewUp","KeyboardArrowDownIcon","moveViewDownInPanel","moveViewDown","KeyboardDoubleArrowDownIcon","moveViewToBottomInPanel","moveViewToBottom","MenuIcon","grow","flexGrow","viewHeader","display","height","VIEW_HEADER_HEIGHT","top","zIndex","viewTitle","alignItems","scrollRef","useRef","stickyViewHeaders","isSessionWithMultipleViews","useEffect","jest","current","scrollIntoView","block","ref","cx","style","position","undefined","ViewMenu","focusedViewId","KeyboardArrowRightIcon","ViewContainerTitle","ViewButtons","pluginManager","getEnv","viewType","getViewType","Error","ReactComponent","Suspense","fallback","LoadingEllipses","viewContainer","margin","spacing","padding","overflow","focusedView","background","unfocusedView","dark","useTheme","useWidthSetter","handleSelectView","e","target","Element","contains","setFocusedViewId","document","addEventListener","removeEventListener","backgroundColorClassName","viewContainerClassName","Paper","elevation","ViewHeader","removeView","setMinimized","ViewWrapper","headerActions","headerButton","headerIcon","DockviewLeftHeaderActions","t0","$","_c","containerApi","group","addEmptyTab","t1","direction","newGroup","addGroup","referenceGroup","handleSplit","t2","t3","t4","t5","t6","t7","t8","t9","TabIcon","HorizontalSplitIcon","api","setActive","size","getViewsForPanel","panelId","getViewIdsForPanel","find","v","filter","createPanelConfig","component","tabComponent","params","cleanLayoutForStorage","layout","panels","fromEntries","panel","updatePanelParams","update","rearrangePanelsWithDirection","getPosition","panelStates","p","removePanel","idx","state","addPanel","DockviewRightHeaderActions","rearrangePanels","_temp2","tileHorizontally","_temp4","tileVertically","_temp5","tileGrid","_temp7","stackAll","showLayoutOptions","showCloseGroup","groups","DynamicFeedIcon","ViewColumnIcon","TableRowsIcon","ViewModuleIcon","MoreHorizIcon","close","api_2","_temp6","idx_2","states_2","referencePanel","states","api_1","cols","Math","ceil","sqrt","idx_1","states_1","col","row","floor","api_0","_temp3","idx_0","states_0","_temp","ViewLauncher","lazy","container","overflowY","default","viewStack","flexDirection","spacer","emptyPanel","justifyContent","ViewContainer","tabIcons","visibility","tabIconsVisible","tabIcon","marginLeft","smallIcon","JBrowseTabMenu","isHovered","onRename","EditIcon","MoreVertIcon","stopPropagation","tabContainer","gap","tabTitle","flex","minWidth","tabTitleText","textOverflow","whiteSpace","editInput","action","selected","borderRadius","shape","stopEvent","preventDefault","isEditing","setIsEditing","useState","setIsHovered","editValue","setEditValue","displayValue","getTabDisplayName","handleStartEdit","handleSave","trim","setTitle","onMouseEnter","onMouseLeave","InputBase","autoFocus","onChange","onFocus","select","onBlur","onKeyDown","Typography","onDoubleClick","width","gridRow","getPanelPosition","components","jbrowseView","JBrowseViewPanel","tabComponents","jbrowseTab","JBrowseViewTab","setApi","trackedViewIdsRef","Set","rearrangingRef","sessionRef","useCallback","arrange","targetGroup","activeGroup","setActivePanelId","moveViewToPanel","removeViewFromPanel","assignViewToPanel","contextValue","useMemo","createInitialPanels","dockviewApi","pendingAction","peekPendingMoveAction","initLayout","init","firstPanelId","clear","groupSizes","processNode","node","add","getPanel","push","dockviewDirection","currentGroup","i","requestAnimationFrame","totalSize","reduce","sum","g","containerWidth","round","setSize","containerHeight","setInit","keys","setDockviewLayout","some","pendingViewId","otherViewIds","pendingPanelId","clearPendingMoveAction","onReady","event","onDidActivePanelChange","onDidRemovePanel","onDidLayoutChange","toJSON","hasPendingAction","dockviewSession","savedLayout","dockviewLayout","fromJSON","console","error","autorun","currentViewIds","trackedIds","activePanelId","firstPanel","delete","currentLayout","JSON","stringify","themeClass","mode","DockviewContext","Provider","DockviewReact","leftHeaderActionsComponent","rightHeaderActionsComponent","pendingMoveAction","createContext","useContext"],"ignoreList":[],"sourceRoot":""}