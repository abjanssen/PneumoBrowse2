"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[6581],{46581(e,t,a){a.d(t,{default:()=>o});var s=a(17378),n=a(60339),i=a(43102),r=a(11931),u=a(25529);class o extends n.Q{async getRefNames(e){const{fasta:t}=await this.setup(e);return[...t.keys()]}async getRegions(e){const{fasta:t}=await this.setup(e);return[...t.entries()].map(([e,t])=>({refName:e,start:0,end:t.sequence.length}))}async setupPre(e){const t=this.getConf("fastaLocation"),a=(n=await(0,r.openLocation)(t,this.pluginManager).readFile("utf8"),new Map(n.split(">").filter(e=>/\S/.test(e)).map(e=>{const[t,...a]=e.split("\n"),[s,...n]=t.split(" "),i=a.join("").replace(/\s/g,"");return[s,{description:n.join(" "),sequence:i}]})));var n;return{fasta:new Map([...a.entries()].map(([e,t])=>[(0,s.QZ)(this.config,"rewriteRefNames",{refName:e})||e,t]))}}async getHeader(){const e=this.getConf("metadataLocation");return""===e.uri||"/path/to/fa.metadata.yaml"===e.uri?null:(0,r.openLocation)(e,this.pluginManager).readFile("utf8")}async setup(e){return this.setupP||(this.setupP=this.setupPre(e).catch(e=>{throw this.setupP=void 0,e})),this.setupP}getFeatures(e,t){const{refName:a,start:s,end:n}=e;return(0,u.ObservableCreate)(async e=>{const{fasta:r}=await this.setup(t),u=r.get(a);u&&e.next(new i.A({id:`${a}-${s}-${n}`,data:{refName:a,start:s,end:n,seq:u.sequence.slice(s,n)}})),e.complete()})}}}}]);
//# sourceMappingURL=6581.c454ae34.chunk.js.map