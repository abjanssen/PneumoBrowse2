"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[661],{30661(e,t,r){r.d(t,{renderSvg:()=>a});var o=r(77251),n=r(38567),i=r(70323),l=r(68183),s=r(32118);async function a(e,t,r){await(0,n.when)(()=>(0,i.V)(e));const{offsetPx:a}=(0,o.getContainingView)(e);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("g",{children:await r(t)}),(0,s.jsx)("g",{transform:`translate(${Math.max(-a,0)})`,children:(0,s.jsx)(l.A,{model:e,orientation:"left",exportSVG:!0})})]})}},41308(e,t,r){r.d(t,{A3:()=>s,BO:()=>i,oJ:()=>l});var o=r(11259),n=r(77251);function i(e,t,r=1){const o=t.map(t=>e.findIndex(e=>e.name===t)).sort((e,t)=>e-t);let n=0;for(const t of o){const o=Math.max(n,t-r);o>=n&&e.splice(o,0,e.splice(t,1)[0]),n+=1}return e}function l(e,t,r=1){const o=t.map(t=>e.findIndex(e=>e.name===t)).sort((e,t)=>t-e);let n=e.length-1;for(const t of o){const o=Math.min(n,t+r);o<=n&&e.splice(o,0,e.splice(t,1)[0]),n-=1}return e}function s(e){const{prefersOffset:t}=e,{trackLabels:r}=(0,n.getContainingView)(e),i=(0,n.getContainingTrack)(e),l=(0,o.FI)(i,"name");return"overlapping"!==r||t?10:(0,n.measureText)(l,12.8)+100}},68183(e,t,r){r.d(t,{A:()=>b});var o=r(64074),n=r(77251),i=r(42918),l=r(38715),s=r(30936),a=r(52061),c=r(32118);const h=e=>{const t=(0,s.c)(11),{x:r,y:o,width:i,height:h,color:d}=e,x=(0,l.A)();let g,u,m;return t[0]!==d||t[1]!==x?(g=d||(0,a.X4)(x.palette.background.paper,.3),t[0]=d,t[1]=x,t[2]=g):g=t[2],t[3]!==g?(u=(0,n.getFillProps)(g),t[3]=g,t[4]=u):u=t[4],t[5]!==h||t[6]!==u||t[7]!==i||t[8]!==r||t[9]!==o?(m=(0,c.jsx)("rect",{pointerEvents:"auto",x:r,y:o,width:i,height:h,...u}),t[5]=h,t[6]=u,t[7]=i,t[8]=r,t[9]=o,t[10]=m):m=t[10],m},d=function(e){const t=(0,s.c)(18),{source:r,idx:o,rowHeight:n,labelWidth:i,model:l,exportSVG:a}=e,d=Math.min(20,n),{needsCustomLegend:x,graphType:g,needsFullHeightScalebar:u,rowHeightTooSmallForScalebar:m,renderColorBoxes:p}=l,w=p?15:0,f=i+w+5,j=(a?10:0)||(g&&!m?50:0);let b,S,V;return t[0]!==d||t[1]!==j||t[2]!==o||t[3]!==f||t[4]!==u||t[5]!==n?(b=u?null:(0,c.jsx)(h,{y:o*n+1,x:j,width:f,height:d}),t[0]=d,t[1]=j,t[2]=o,t[3]=f,t[4]=u,t[5]=n,t[6]=b):b=t[6],t[7]!==d||t[8]!==w||t[9]!==j||t[10]!==o||t[11]!==x||t[12]!==n||t[13]!==r.color?(S=r.color?(0,c.jsx)(h,{y:o*n+1,x:j,width:w,height:x?n:d,color:r.color}):null,t[7]=d,t[8]=w,t[9]=j,t[10]=o,t[11]=x,t[12]=n,t[13]=r.color,t[14]=S):S=t[14],t[15]!==b||t[16]!==S?(V=(0,c.jsxs)(c.Fragment,{children:[b,S]}),t[15]=b,t[16]=S,t[17]=V):V=t[17],V},x=function(e){const t=(0,s.c)(9),{source:r,idx:o,rowHeight:n,model:i,exportSVG:l,textFillProps:a}=e,{graphType:h,rowHeightTooSmallForScalebar:d,renderColorBoxes:x}=i,g=Math.min(n,12),u=n>=6,m=x?15:0,p=(l?10:0)||(h&&!d?50:0);let w;return t[0]!==u||t[1]!==m||t[2]!==p||t[3]!==o||t[4]!==n||t[5]!==r||t[6]!==g||t[7]!==a?(w=u?(0,c.jsx)("text",{y:o*n+g,x:p+m+2,fontSize:g,...a,children:r.name}):null,t[0]=u,t[1]=m,t[2]=p,t[3]=o,t[4]=n,t[5]=r,t[6]=g,t[7]=a,t[8]=w):w=t[8],w},g=(0,o.observer)(function({model:e,rowHeight:t,exportSVG:r}){const{graphType:o,needsFullHeightScalebar:s,rowHeightTooSmallForScalebar:a,renderColorBoxes:g,sources:u,labelWidth:m}=e,p=m+(g?20:0)+5,w=(r?10:0)||(o&&!a?50:0),f=(0,l.A)(),j=(0,i.useMemo)(()=>(0,n.getFillProps)(f.palette.text.primary),[f.palette.text.primary]);return u?(0,c.jsxs)(c.Fragment,{children:[s?(0,c.jsx)(h,{y:0,x:w,width:p,height:(u.length+.25)*t}):null,u.map((o,n)=>(0,c.jsx)(d,{source:o,idx:n,model:e,rowHeight:t,exportSVG:r,labelWidth:p},`${o.name}-${n}`)),u.map((o,n)=>(0,c.jsx)(x,{source:o,idx:n,model:e,rowHeight:t,exportSVG:r,textFillProps:j},`${o.name}-text-${n}`))]}):null});var u=r(41308),m=r(79079);const p=(0,o.observer)(function({model:e,orientation:t,exportSVG:r}){const{labelWidth:o}=e,{width:i}=(0,n.getContainingView)(e);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("g",{transform:`translate(${r?0:(0,u.A3)(e)},0)`,children:(0,c.jsx)(m.A,{model:e,orientation:t})}),(0,c.jsx)("g",{transform:`translate(${i-o-100},0)`,children:(0,c.jsx)(g,{exportSVG:r,model:e,rowHeight:12})})]})}),w=(0,o.observer)(function({model:e}){const{ticks:t,scaleType:r}=e,{width:o}=(0,n.getContainingView)(e),i=`[${t?.values[0]}-${t?.values[1]}]${"log"===r?" (log scale)":""}`,l=(0,n.measureText)(i,14),s=o-l-25;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(h,{y:0,x:s,width:l+6,height:16}),(0,c.jsx)("text",{y:13,x:s,children:i})]})}),f=(0,o.observer)(function({model:e,orientation:t,exportSVG:r}){const{sources:o,rowHeight:n,rowHeightTooSmallForScalebar:i,needsCustomLegend:l,ticks:s}=e;return o?.length?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(g,{exportSVG:r,model:e,rowHeight:e.rowHeight}),i||l?(0,c.jsx)(w,{model:e}):o.map((r,o)=>(0,c.jsx)("g",{transform:`translate(0 ${n*o})`,children:(0,c.jsx)(m.A,{model:e,orientation:t})},`${JSON.stringify(s)}-${o}`))]}):null}),j=(0,o.observer)(function({children:e,model:t,exportSVG:r}){const{height:o}=t;return r?e:(0,c.jsx)("svg",{style:{position:"absolute",top:0,left:0,pointerEvents:"none",height:o,width:(0,n.getContainingView)(t).width},children:e})}),b=(0,o.observer)(function(e){const{model:t,orientation:r,exportSVG:o}=e,{showSidebar:n,stats:i,needsFullHeightScalebar:l,sources:s}=t;return i&&s?(0,c.jsx)(j,{...e,children:n?l?(0,c.jsx)(p,{model:t,orientation:r,exportSVG:o}):(0,c.jsx)(f,{model:t,orientation:r,exportSVG:o}):null}):null})},70323(e,t,r){function o(e){return!e.renderProps().notReady||!!e.error}r.d(t,{V:()=>o})}}]);
//# sourceMappingURL=661.849f7ffe.chunk.js.map