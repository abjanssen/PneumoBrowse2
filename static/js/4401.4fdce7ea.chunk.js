"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[4401],{64401(e,n,i){i.r(n),i.d(n,{default:()=>c});var o=i(46625),s=i(69566),t=i(99904),a=i(44460);const r=(0,o.n)()({container:{height:"100%",width:"100%",gridRow:"components",overflowY:"auto"},spacer:{height:300}}),c=(0,s.observer)(function({session:e}){const{classes:n}=r(),{views:i}=e;return(0,a.jsxs)("div",{className:n.container,children:[i.map(n=>(0,a.jsx)(t.A,{view:n,session:e},n.id)),(0,a.jsx)("div",{className:n.spacer})]})})},25649(e,n,i){i.d(n,{Aw:()=>r,Kv:()=>a,qL:()=>t,s:()=>c});var o=i(30128);let s=null;function t(){return s}function a(){s=null}const r=(0,o.createContext)({api:null,rearrangePanels:()=>{},addEmptyTab:()=>{},moveViewToNewTab:function(e){s={type:"newTab",viewId:e}},moveViewToSplitRight:function(e){s={type:"splitRight",viewId:e}}});function c(){return(0,o.useContext)(r)}},99904(e,n,i){i.d(n,{A:()=>W});var o=i(30128),s=i(23886),t=i(46625),a=i(64261),r=i(87377),c=i(69301),l=i(69566),d=i(10732),u=i(78770),v=i(67369),m=i(11218),w=i(20449),p=i(52189),f=i(59705),h=i(44460);const g=(0,t.n)()(e=>({icon:{color:e.palette.secondary.contrastText}})),b=(0,l.observer)(function({view:e,onClose:n,onMinimize:i}){const{classes:o}=g();return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(f.A,{"data-testid":"minimize_view",onClick:i,children:e.minimized?(0,h.jsx)(m.A,{className:o.icon,fontSize:"small"}):(0,h.jsx)(p.A,{className:o.icon,fontSize:"small"})}),(0,h.jsx)(f.A,{"data-testid":"close_view",onClick:n,children:(0,h.jsx)(w.A,{className:o.icon,fontSize:"small"})})]})});var x=i(10897),j=i(30097);const y=(0,t.n)()(e=>({input:{paddingBottom:0,paddingTop:2},inputBase:{color:e.palette.secondary.contrastText},inputRoot:{"&:hover":{backgroundColor:e.palette.secondary.light}},inputFocused:{borderColor:e.palette.primary.main,backgroundColor:e.palette.secondary.light}})),A=(0,l.observer)(function({view:e}){const{classes:n}=y(),{assemblyManager:i}=(0,s.getSession)(e);return(0,h.jsx)(j.A,{title:"Rename view",arrow:!0,children:(0,h.jsx)(x.A,{value:e.displayName||`${e.assemblyNames?.map(e=>i.get(e)?.displayName).join(",")||"Untitled view"}${e.minimized?" (minimized)":""}`,setValue:n=>{e.setDisplayName(n)},variant:"body2",classes:{input:n.input,inputBase:n.inputBase,inputRoot:n.inputRoot,inputFocused:n.inputFocused}})})});var V=i(9378),k=i(10533),z=i(1373),C=i(94759),T=i(52642),N=i(90632),M=i(4237),I=i(9614),E=i(90066),S=i(6327),R=i(25649),H=i(38817),_=i(3560);const $=(0,l.observer)(function({model:e,IconProps:n}){const i=(0,s.getSession)(e),{moveViewToNewTab:o,moveViewToSplitRight:t}=(0,R.s)(),a=i.useWorkspaces&&(0,_.N)(i),r=a?function(e,n){if(!(0,_.N)(e))return 0;for(const i of e.panelViewAssignments.values())if(i.includes(n))return i.length;return 0}(i,e.id):i.views.length,c=(n,i)=>{a?n(e.id):i(e.id)};return(0,h.jsx)(V.A,{"data-testid":"view_menu_icon",menuItems:()=>[{label:"View options",type:"subMenu",subMenu:[{label:"Copy view",icon:z.A,onClick:()=>{i.addView(e.type,function(e){const n=new Map;return function e(i){if(null==i)return i;if(Array.isArray(i))return i.map(e);if("object"==typeof i){const o={};for(const[s,t]of Object.entries(i))"id"===s&&"string"==typeof t?(n.has(t)||n.set(t,(0,H.w)()),o[s]=`${t}-${n.get(t)}`):o[s]=e(t);return o}return i}(e)}(structuredClone((0,k.getSnapshot)(e))))}},{label:"Move to new tab",icon:E.A,onClick:()=>{o(e.id),i.setUseWorkspaces(!0)}},{label:"Move to split view (right side of screen)",icon:S.A,onClick:()=>{t(e.id),i.setUseWorkspaces(!0)}},...r>2?[{label:"Move view to top",icon:M.A,onClick:()=>{c(i.moveViewToTopInPanel,i.moveViewToTop)}}]:[],...r>1?[{label:"Move view up",icon:T.A,onClick:()=>{c(i.moveViewUpInPanel,i.moveViewUp)}},{label:"Move view down",icon:C.A,onClick:()=>{c(i.moveViewDownInPanel,i.moveViewDown)}}]:[],...r>2?[{label:"Move view to bottom",icon:N.A,onClick:()=>{c(i.moveViewToBottomInPanel,i.moveViewToBottom)}}]:[]]},...e.menuItems()],children:(0,h.jsx)(I.A,{...n,fontSize:"small"})})}),P=(0,t.n)()(e=>({icon:{color:e.palette.secondary.contrastText},grow:{flexGrow:1},viewHeader:{display:"flex",height:d.VIEW_HEADER_HEIGHT,top:0,zIndex:900},viewTitle:{display:"flex",alignItems:"center"}})),B=(0,l.observer)(function({view:e,onClose:n,onMinimize:i,className:t}){const{classes:r}=P(),c=(0,o.useRef)(null),l=(0,s.getSession)(e);let d=!1;return(0,u.X)(l)&&({stickyViewHeaders:d}=l),(0,o.useEffect)(()=>{"undefined"==typeof jest&&window.self===window.top&&c.current?.scrollIntoView({block:"center"})},[]),(0,h.jsxs)("div",{ref:c,className:(0,a.cx)(r.viewHeader,t),style:{position:d?"sticky":void 0},children:[(0,h.jsx)($,{model:e,IconProps:{className:r.icon}}),(0,h.jsx)("div",{className:r.grow}),(0,h.jsxs)("div",{className:r.viewTitle,children:[l.focusedViewId===e.id?(0,h.jsx)(v.A,{className:r.icon,fontSize:"small"}):null,(0,h.jsx)(A,{view:e})]}),(0,h.jsx)("div",{className:r.grow}),(0,h.jsx)(b,{onClose:n,onMinimize:i,view:e})]})});var F=i(51049);const L=(0,l.observer)(function({view:e,session:n}){const{pluginManager:i}=(0,s.getEnv)(n),t=i.getViewType(e.type);if(!t)throw new Error(`unknown view type ${e.type}`);const{ReactComponent:a}=t;return e.minimized?null:(0,h.jsx)(o.Suspense,{fallback:(0,h.jsx)(F.A,{variant:"h6"}),children:(0,h.jsx)(a,{model:e,session:n})})}),U=(0,t.n)()(e=>({viewContainer:{margin:e.spacing(.5),padding:`0 ${e.spacing(1)} ${e.spacing(1)}`,overflow:"clip"},focusedView:{background:e.palette.secondary.main},unfocusedView:{background:e.palette.secondary.dark}})),W=(0,l.observer)(function({view:e,session:n}){const i=(0,r.A)(),t=(0,s.useWidthSetter)(e,i.spacing(1)),{classes:l}=U();(0,o.useEffect)(()=>{function i(i){i.target instanceof Element&&t.current?.contains(i.target)&&n.setFocusedViewId(e.id)}return document.addEventListener("mousedown",i),document.addEventListener("keydown",i),()=>{document.removeEventListener("mousedown",i),document.removeEventListener("keydown",i)}},[t,n,e]);const d=n.focusedViewId===e.id?l.focusedView:l.unfocusedView,u=(0,a.cx)(l.viewContainer,d);return(0,h.jsxs)(c.A,{ref:t,elevation:12,className:u,"data-testid":`view-container-${e.id}`,children:[(0,h.jsx)(B,{view:e,onClose:()=>{n.removeView(e)},onMinimize:()=>{e.setMinimized(!e.minimized)},className:d}),(0,h.jsx)(c.A,{elevation:0,children:(0,h.jsx)(L,{view:e,session:n})})]})})},67369(e,n,i){i.d(n,{A:()=>t});var o=i(91383),s=i(44460);const t=(0,o.A)((0,s.jsx)("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6z"}),"KeyboardArrowRight")},9614(e,n,i){i.d(n,{A:()=>t});var o=i(91383),s=i(44460);const t=(0,o.A)((0,s.jsx)("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}),"Menu")},6327(e,n,i){i.d(n,{A:()=>t});var o=i(91383),s=i(44460);const t=(0,o.A)((0,s.jsx)("path",{d:"M3 15h8v-2H3zm0 4h8v-2H3zm0-8h8V9H3zm0-6v2h8V5zm10 0h8v14h-8z"}),"VerticalSplit")}}]);
//# sourceMappingURL=4401.4fdce7ea.chunk.js.map