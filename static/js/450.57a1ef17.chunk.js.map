{"version":3,"file":"static/js/450.57a1ef17.chunk.js","mappings":"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","sources":["../../../plugins/variants/src/VariantFeatureWidget/AltFormatter.tsx","../../../plugins/variants/src/VariantFeatureWidget/Formatter.tsx","../../../plugins/variants/src/VariantFeatureWidget/VariantSampleGrid/VariantGenotypeFrequencyTable.tsx","../../../plugins/variants/src/VariantFeatureWidget/VariantSampleGrid/VariantSampleFilters.tsx","../../../plugins/variants/src/VariantFeatureWidget/VariantSampleGrid/VariantSampleGrid.tsx","../../../plugins/variants/src/VariantFeatureWidget/VariantSampleGrid/getSampleGridRows.ts","../../../plugins/variants/src/VariantFeatureWidget/variantFieldDescriptions.ts","../../../plugins/variants/src/VariantFeatureWidget/VariantFeatureWidget.tsx","../../../plugins/variants/src/VcfFeature/util.ts","../../../node_modules/.pnpm/@mui+icons-material@7.3.7_@mui+material@7.3.7_@emotion+react@11.14.0_@types+react@19.2._30e1b55107c86a25823f59a01e2da619/node_modules/@mui/icons-material/esm/Settings.js"],"sourcesContent":["import { useMemo, useState } from 'react'\n\nimport { getMinimalDesc } from '../VcfFeature/util.ts'\n\nexport default function AltFormatter({\n  value,\n  refString,\n}: {\n  value: string\n  refString: string\n}) {\n  const [show, setShow] = useState(false)\n  const alt = useMemo(\n    () => getMinimalDesc(refString, value),\n    [refString, value],\n  )\n  return alt !== value ? (\n    <div>\n      <button\n        onClick={() => {\n          setShow(!show)\n        }}\n      >\n        {show ? 'Show simplified ALT' : 'Show raw ALT'}\n      </button>{' '}\n      {show ? value : alt}\n    </div>\n  ) : (\n    value\n  )\n}\n","import { useState } from 'react'\n\n// this 'show more...' for long strings\nexport default function Formatter({ value }: { value: unknown }) {\n  const [show, setShow] = useState(false)\n  const [copied, setCopied] = useState(false)\n  const display = String(value)\n  return display.length > 100 ? (\n    <>\n      <button\n        type=\"button\"\n        onClick={async () => {\n          const { default: copy } = await import('copy-to-clipboard')\n          copy(display)\n          setCopied(true)\n          setTimeout(() => {\n            setCopied(false)\n          }, 700)\n        }}\n      >\n        {copied ? 'Copied to clipboard' : 'Copy'}\n      </button>\n      <button\n        type=\"button\"\n        onClick={() => {\n          setShow(val => !val)\n        }}\n      >\n        {show ? 'Show less' : 'Show more'}\n      </button>\n      <div>{show ? display : `${display.slice(0, 100)}...`}</div>\n    </>\n  ) : (\n    <div>{display}</div>\n  )\n}\n","import { measureGridWidth } from '@jbrowse/core/util'\nimport { Checkbox } from '@mui/material'\nimport { DataGrid } from '@mui/x-data-grid'\n\nimport type { FrequencyTable, VariantSampleGridRow } from './types.ts'\n\nfunction toP(n: number) {\n  return n.toPrecision(3)\n}\n\nexport default function VariantGenotypeFrequencyTable({\n  rows,\n  selectedGenotypes,\n  setSelectedGenotypes,\n  showToolbar,\n}: {\n  rows: VariantSampleGridRow[]\n  selectedGenotypes: Set<string> | null\n  setSelectedGenotypes: (v: Set<string> | null) => void\n  showToolbar?: boolean\n}) {\n  const summary = {} as FrequencyTable\n  for (const row of rows) {\n    const gt = row.GT\n    if (!summary[gt]) {\n      summary[gt] = {\n        count: 0,\n        GT: row.GT,\n        genotype: row.genotype,\n      }\n    }\n    summary[gt].count++\n  }\n  const gridRows = Object.entries(summary).map(([key, val]) => ({\n    id: key,\n    ...val,\n    count: `${val.count} / ${rows.length}`,\n    frequency: `${toP((val.count / rows.length) * 100)}%`,\n  }))\n\n  const allSelected =\n    selectedGenotypes === null ||\n    gridRows.every(r => selectedGenotypes.has(r.GT))\n\n  const height = 25 + gridRows.length * 25 + 15 + (showToolbar ? 40 : 0)\n\n  return (\n    <div style={{ height }}>\n      <DataGrid\n        rows={gridRows}\n        hideFooter\n        rowHeight={25}\n        columnHeaderHeight={25}\n        columns={[\n          {\n            field: 'select',\n            headerName: '',\n            width: 27,\n            sortable: false,\n            disableColumnMenu: true,\n            renderHeader: () => (\n              <Checkbox\n                checked={allSelected}\n                indeterminate={\n                  selectedGenotypes !== null &&\n                  selectedGenotypes.size > 0 &&\n                  selectedGenotypes.size < gridRows.length\n                }\n                onChange={(_, checked) => {\n                  if (checked) {\n                    setSelectedGenotypes(null)\n                  } else {\n                    setSelectedGenotypes(new Set())\n                  }\n                }}\n                size=\"small\"\n              />\n            ),\n            renderCell: params => {\n              const isChecked =\n                selectedGenotypes === null ||\n                selectedGenotypes.has(params.row.GT)\n              return (\n                <Checkbox\n                  checked={isChecked}\n                  onChange={(_, checked) => {\n                    const newSet = new Set(\n                      selectedGenotypes === null\n                        ? gridRows.map(r => r.GT)\n                        : selectedGenotypes,\n                    )\n                    if (checked) {\n                      newSet.add(params.row.GT)\n                    } else {\n                      newSet.delete(params.row.GT)\n                    }\n                    if (newSet.size === gridRows.length) {\n                      setSelectedGenotypes(null)\n                    } else {\n                      setSelectedGenotypes(newSet)\n                    }\n                  }}\n                  size=\"small\"\n                />\n              )\n            },\n          },\n          { field: 'GT', width: measureGridWidth(gridRows.map(r => r.GT)) },\n          {\n            field: 'count',\n            width: measureGridWidth(gridRows.map(r => r.count)),\n          },\n          {\n            field: 'frequency',\n            width: measureGridWidth(gridRows.map(r => r.frequency)),\n          },\n          {\n            field: 'genotype',\n            width: measureGridWidth(gridRows.map(r => r.genotype)),\n          },\n        ]}\n        showToolbar={showToolbar}\n      />\n    </div>\n  )\n}\n","import { useEffect, useState, useTransition } from 'react'\n\nimport { TextField, Typography } from '@mui/material'\n\ntype Filters = Record<string, string>\n\nexport default function SampleFilters({\n  columns,\n  filter,\n  setFilter,\n}: {\n  columns: { field: string }[]\n  filter: Filters\n  setFilter: (arg: Filters) => void\n}) {\n  const [localFilter, setLocalFilter] = useState(filter)\n  const [, startTransition] = useTransition()\n\n  // Sync local state when parent filter prop changes externally\n  useEffect(() => {\n    setLocalFilter(filter)\n  }, [filter])\n\n  return (\n    <>\n      <Typography>\n        These filters can use a plain text search or regex style query, e.g. in\n        the genotype field, entering 1 will query for all genotypes that include\n        the first alternate allele e.g. 0|1 or 1|1, entering [1-9]\\d* will find\n        any non-zero allele e.g. 0|2 or 2/33\n      </Typography>\n      {columns.map(({ field }) => (\n        <TextField\n          key={`filter-${field}`}\n          placeholder={`Filter ${field}`}\n          value={localFilter[field] || ''}\n          onChange={event => {\n            const value = event.target.value\n            const newFilter = { ...localFilter, [field]: value }\n            setLocalFilter(newFilter)\n            startTransition(() => {\n              setFilter(newFilter)\n            })\n          }}\n        />\n      ))}\n    </>\n  )\n}\n","import { useMemo, useState } from 'react'\n\nimport BaseCard from '@jbrowse/core/BaseFeatureWidget/BaseFeatureDetail/BaseCard'\nimport { ErrorMessage } from '@jbrowse/core/ui'\nimport CascadingMenuButton from '@jbrowse/core/ui/CascadingMenuButton'\nimport DataGridFlexContainer from '@jbrowse/core/ui/DataGridFlexContainer'\nimport { ErrorBoundary } from '@jbrowse/core/ui/ErrorBoundary'\nimport { measureGridWidth } from '@jbrowse/core/util'\nimport SettingsIcon from '@mui/icons-material/Settings'\nimport { ToggleButton, ToggleButtonGroup, Typography } from '@mui/material'\nimport { DataGrid } from '@mui/x-data-grid'\n\nimport VariantGenotypeFrequencyTable from './VariantGenotypeFrequencyTable.tsx'\nimport SampleFilters from './VariantSampleFilters.tsx'\nimport { getSampleGridRows } from './getSampleGridRows.ts'\n\nimport type { Filters, InfoFields, VariantFieldDescriptions } from './types.ts'\nimport type { SimpleFeatureSerialized } from '@jbrowse/core/util'\nimport type { GridColDef } from '@mui/x-data-grid'\n\ntype ColumnDisplayMode = 'all' | 'gtOnly' | 'genotypeOnly'\n\nconst gtOnlyFields = new Set(['sample', 'GT'])\nconst genotypeFields = new Set(['sample', 'GT', 'genotype'])\n\nexport default function VariantSampleGrid(props: {\n  feature: SimpleFeatureSerialized\n  descriptions?: VariantFieldDescriptions | null\n}) {\n  const { feature, descriptions = {} } = props\n  const [filter, setFilter] = useState<Filters>({})\n  const [columnDisplayMode, setColumnDisplayMode] =\n    useState<ColumnDisplayMode>('all')\n  const [showFilters, setShowFilters] = useState(false)\n  const [showFrequencyTable, setShowFrequencyTable] = useState(true)\n  const [showToolbar, setShowToolbar] = useState(false)\n  const [useCounts, setUseCounts] = useState(false)\n  const [selectedGenotypes, setSelectedGenotypes] =\n    useState<Set<string> | null>(null)\n  const samples = (feature.samples || {}) as Record<string, InfoFields>\n  const ALT = feature.ALT as string[]\n  const REF = feature.REF as string\n\n  const { rows, error } = getSampleGridRows(\n    samples,\n    REF,\n    ALT,\n    filter,\n    useCounts,\n  )\n\n  const filteredRows = useMemo(\n    () =>\n      selectedGenotypes === null\n        ? rows\n        : rows.filter(row => selectedGenotypes.has(row.GT)),\n    [rows, selectedGenotypes],\n  )\n\n  const columns = useMemo(() => {\n    const keys = [\n      'sample',\n      ...Object.keys(rows[0] || {}).filter(k => k !== 'id' && k !== 'sample'),\n    ]\n    return keys.map(\n      field =>\n        ({\n          field,\n          description: descriptions?.FORMAT?.[field]?.Description,\n          width: measureGridWidth(filteredRows.map(r => r[field])),\n        }) satisfies GridColDef<(typeof rows)[0]>,\n    )\n  }, [rows, filteredRows, descriptions])\n\n  return !rows.length ? null : (\n    <BaseCard {...props} title=\"Samples\">\n      {error ? <Typography color=\"error\">{`${error}`}</Typography> : null}\n      <div style={{ display: 'flex', alignItems: 'center', gap: 8 }}>\n        <CascadingMenuButton\n          menuItems={[\n            {\n              label: 'Show allele counts (\"dosage\") instead of exact GT',\n              helpText:\n                'This converts a genotype like 1/1 into 1:2 which says there were two occurrences of the ALT allele 1 in the genotype',\n              type: 'checkbox',\n              checked: useCounts,\n              onClick: () => {\n                setUseCounts(!useCounts)\n                setSelectedGenotypes(null)\n              },\n            },\n            {\n              label: 'Show frequency table',\n              type: 'checkbox',\n              checked: showFrequencyTable,\n              onClick: () => {\n                setShowFrequencyTable(!showFrequencyTable)\n              },\n            },\n            {\n              label: 'Show filters',\n              type: 'checkbox',\n              checked: showFilters,\n              onClick: () => {\n                setShowFilters(!showFilters)\n              },\n            },\n            {\n              label: 'Show toolbar',\n              type: 'checkbox',\n              checked: showToolbar,\n              onClick: () => {\n                setShowToolbar(!showToolbar)\n              },\n            },\n          ]}\n        >\n          <SettingsIcon />\n        </CascadingMenuButton>\n        <ToggleButtonGroup\n          value={columnDisplayMode}\n          exclusive\n          size=\"small\"\n          onChange={(_, newValue) => {\n            if (newValue !== null) {\n              setColumnDisplayMode(newValue as ColumnDisplayMode)\n            }\n          }}\n        >\n          <ToggleButton value=\"all\">All</ToggleButton>\n          <ToggleButton value=\"gtOnly\">GT only</ToggleButton>\n          <ToggleButton value=\"genotypeOnly\">GT+resolved genotype</ToggleButton>\n        </ToggleButtonGroup>\n      </div>\n\n      {showFilters ? (\n        <SampleFilters\n          setFilter={setFilter}\n          columns={columns}\n          filter={filter}\n        />\n      ) : null}\n\n      {showFrequencyTable ? (\n        <>\n          <Typography variant=\"subtitle2\" style={{ marginTop: 8 }}>\n            Genotype frequencies (click to filter)\n          </Typography>\n          <ErrorBoundary FallbackComponent={ErrorMessage}>\n            <VariantGenotypeFrequencyTable\n              rows={rows}\n              selectedGenotypes={selectedGenotypes}\n              setSelectedGenotypes={setSelectedGenotypes}\n              showToolbar={showToolbar}\n            />\n          </ErrorBoundary>\n        </>\n      ) : null}\n\n      <Typography variant=\"subtitle2\" style={{ marginTop: 16 }}>\n        Samples{' '}\n        {selectedGenotypes !== null\n          ? `(${filteredRows.length} of ${rows.length})`\n          : `(${rows.length})`}\n      </Typography>\n      <DataGridFlexContainer>\n        <DataGrid\n          rows={filteredRows}\n          hideFooter={filteredRows.length < 100}\n          columns={\n            columnDisplayMode === 'gtOnly'\n              ? columns.filter(f => gtOnlyFields.has(f.field))\n              : columnDisplayMode === 'genotypeOnly'\n                ? columns.filter(f => genotypeFields.has(f.field))\n                : columns\n          }\n          rowHeight={25}\n          columnHeaderHeight={25}\n          showToolbar={showToolbar}\n        />\n      </DataGridFlexContainer>\n    </BaseCard>\n  )\n}\n","import { getBpDisplayStr } from '@jbrowse/core/util'\n\nimport { getMinimalDesc, makeSimpleAltString } from '../../VcfFeature/util.ts'\n\nimport type { Filters, InfoFields, VariantSampleGridRow } from './types.ts'\n\nfunction gtToAlleleCounts(gt: string) {\n  const alleleCounts = {} as Record<string, number>\n  const alleles = gt.split(/[/|]/)\n  for (const allele of alleles) {\n    alleleCounts[allele] = (alleleCounts[allele] || 0) + 1\n  }\n  return Object.entries(alleleCounts)\n    .map(([key, val]) => `${key}:${val}`)\n    .join(';')\n}\n\nfunction genotypeToAlleleCounts(gt: string, ref: string, alt: string[]) {\n  const alleleCounts = {} as Record<string, number>\n  const alleles = gt.split(/[/|]/)\n  for (const allele of alleles) {\n    if (allele === '.') {\n      alleleCounts['.'] = (alleleCounts['.'] || 0) + 1\n    } else {\n      const resolved =\n        +allele === 0\n          ? `ref(${ref.length < 10 ? ref : getBpDisplayStr(ref.length)})`\n          : getMinimalDesc(ref, alt[+allele - 1] || '')\n      alleleCounts[resolved] = (alleleCounts[resolved] || 0) + 1\n    }\n  }\n  return Object.entries(alleleCounts)\n    .map(([key, val]) => `${key}:${val}`)\n    .join(';')\n}\n\nexport function getSampleGridRows(\n  samples: Record<string, InfoFields>,\n  REF: string,\n  ALT: string[],\n  filter: Filters,\n  useCounts?: boolean,\n): {\n  rows: VariantSampleGridRow[]\n  error: unknown\n} {\n  let error: unknown\n  let rows: VariantSampleGridRow[] = []\n  const filterKeys = Object.keys(filter)\n\n  try {\n    rows = Object.entries(samples)\n      .map(([key, val]) => {\n        const gt = val.GT?.[0]\n        const gtStr = gt ? `${gt}` : undefined\n        const displayGT = gtStr\n          ? useCounts\n            ? gtToAlleleCounts(gtStr)\n            : gtStr\n          : undefined\n        const displayGenotype = gtStr\n          ? useCounts\n            ? genotypeToAlleleCounts(gtStr, REF, ALT)\n            : makeSimpleAltString(gtStr, REF, ALT)\n          : undefined\n        return {\n          ...val,\n          ...(gtStr ? { GT: displayGT, genotype: displayGenotype } : {}),\n          sample: key,\n          id: key,\n        } as VariantSampleGridRow\n      })\n      .filter(row =>\n        filterKeys.length\n          ? filterKeys.every(key => {\n              const currFilter = filter[key]\n              return currFilter\n                ? new RegExp(currFilter, 'i').exec(row[key]!)\n                : true\n            })\n          : true,\n      )\n  } catch (e) {\n    console.error(e)\n    error = e\n  }\n\n  return { rows, error }\n}\n","export const variantFieldDescriptions = {\n  CHROM: 'chromosome: An identifier from the reference genome',\n  POS: 'position: The reference position, with the 1st base having position 1',\n  ID: 'identifier: Semi-colon separated list of unique identifiers where available',\n  REF: 'reference base(s): Each base must be one of A,C,G,T,N (case insensitive).',\n  ALT: 'alternate base(s): Comma-separated list of alternate non-reference alleles',\n  QUAL: 'quality: Phred-scaled quality score for the assertion made in ALT',\n  FILTER:\n    'filter status: PASS if this position has passed all filters, otherwise a semicolon-separated list of codes for filters that fail',\n}\n","import { Suspense, lazy } from 'react'\n\nimport { parseBreakend } from '@gmod/vcf'\nimport FeatureDetails from '@jbrowse/core/BaseFeatureWidget/BaseFeatureDetail/FeatureDetails'\nimport { Paper } from '@mui/material'\nimport { observer } from 'mobx-react'\n\nimport AltFormatter from './AltFormatter.tsx'\nimport Formatter from './Formatter.tsx'\nimport VariantSampleGrid from './VariantSampleGrid/VariantSampleGrid.tsx'\nimport { variantFieldDescriptions } from './variantFieldDescriptions.ts'\n\nimport type { VariantFeatureWidgetModel } from './stateModelFactory.ts'\nimport type { Descriptions, ReducedFeature } from './types.ts'\nimport type { SimpleFeatureSerialized } from '@jbrowse/core/util'\n\n// lazies\nconst LaunchBreakendPanel = lazy(\n  () => import('./LaunchBreakendPanel/LaunchBreakendPanel.tsx'),\n)\nconst VariantConsequenceDataGrid = lazy(\n  () => import('./VariantConsequence/VariantConsequenceDataGrid.tsx'),\n)\n\nfunction AnnotationPanel({\n  descriptions,\n  feature,\n  fieldKey,\n  title,\n  regex,\n}: {\n  descriptions?: Descriptions\n  feature: SimpleFeatureSerialized & ReducedFeature\n  fieldKey: 'ANN' | 'CSQ'\n  title: string\n  regex: RegExp\n}) {\n  const desc = descriptions?.INFO?.[fieldKey]?.Description\n  const fields = desc?.match(regex)?.[1]?.split('|') || []\n  const data = feature.INFO?.[fieldKey] || []\n  return (\n    <VariantConsequenceDataGrid fields={fields} data={data} title={title} />\n  )\n}\n\nconst svTypes = ['inversion', 'deletion', 'duplication', 'cnv', 'sv']\n\nfunction LaunchBreakendWidgetArea({\n  model,\n}: {\n  model: VariantFeatureWidgetModel\n}) {\n  const { featureData } = model\n  const feat = JSON.parse(JSON.stringify(featureData))\n  const { type = '' } = feat\n\n  return type === 'breakend' ? (\n    <LaunchBreakendPanel\n      feature={feat}\n      locStrings={feat.ALT.map(\n        (alt: string) => parseBreakend(alt)?.MatePosition || '',\n      )}\n      model={model}\n    />\n  ) : type === 'translocation' ? (\n    <LaunchBreakendPanel\n      feature={feat}\n      model={model}\n      locStrings={[`${feat.INFO.CHR2[0]}:${feat.INFO.END}`]}\n    />\n  ) : type === 'paired_feature' ? (\n    <LaunchBreakendPanel\n      feature={feat}\n      model={model}\n      locStrings={[`${feat.mate.refName}:${feat.mate.start}`]}\n    />\n  ) : svTypes.some(t => type.includes(t)) ? (\n    <LaunchBreakendPanel\n      feature={{\n        uniqueId: 'random',\n        refName: feat.refName,\n        start: feat.start,\n        end: feat.start + 1,\n        mate: {\n          refName: feat.refName,\n          start: feat.end,\n          end: feat.end + 1,\n        },\n      }}\n      model={model}\n      locStrings={[`${feat.refName}:${feat.end}`]}\n    />\n  ) : null\n}\n\nconst FeatDefined = observer(function FeatDefined(props: {\n  feat: SimpleFeatureSerialized\n  model: VariantFeatureWidgetModel\n}) {\n  const { feat, model } = props\n  const { descriptions } = model\n  const { samples, ...rest } = feat\n  const { REF } = rest\n\n  return (\n    <Paper data-testid=\"variant-side-drawer\">\n      <FeatureDetails\n        feature={rest}\n        descriptions={{\n          ...variantFieldDescriptions,\n          ...descriptions,\n        }}\n        formatter={(value, key) =>\n          key === 'ALT' ? (\n            <AltFormatter value={`${value}`} refString={REF as string} />\n          ) : (\n            <Formatter value={value} />\n          )\n        }\n        {...props}\n      />\n      <Suspense fallback={null}>\n        <AnnotationPanel\n          feature={rest}\n          descriptions={descriptions}\n          fieldKey=\"CSQ\"\n          title=\"Variant CSQ field\"\n          regex={/.*Format: (.*)/}\n        />\n        <AnnotationPanel\n          feature={rest}\n          descriptions={descriptions}\n          fieldKey=\"ANN\"\n          title=\"Variant ANN field\"\n          regex={/.*Functional annotations:'(.*)'$/}\n        />\n        <LaunchBreakendWidgetArea model={model} />\n      </Suspense>\n      <VariantSampleGrid\n        feature={feat}\n        {...props}\n        descriptions={descriptions}\n      />\n    </Paper>\n  )\n})\n\nconst VariantFeatureWidget = observer(function VariantFeatureWidget(props: {\n  model: VariantFeatureWidgetModel\n}) {\n  const { model } = props\n  const { featureData } = model\n  const feat = structuredClone(featureData)\n\n  return feat ? (\n    <FeatDefined feat={feat} {...props} />\n  ) : (\n    <div>\n      No feature loaded, may not be available after page refresh because it was\n      too large for localStorage\n    </div>\n  )\n})\n\nexport default VariantFeatureWidget\n","import { parseBreakend } from '@gmod/vcf'\nimport { getBpDisplayStr } from '@jbrowse/core/util'\n\nimport type VCF from '@gmod/vcf'\n\nconst genotypeDelimRegex = /[/|]/\n\nfunction isBreakend(alt: string) {\n  return (\n    alt.includes('[') ||\n    alt.includes(']') ||\n    alt.startsWith('.') ||\n    alt.endsWith('.')\n  )\n}\n\nfunction isSymbolic(alt: string) {\n  return alt.startsWith('<') || isBreakend(alt)\n}\n\nfunction isInversion(ref: string, alt: string) {\n  return ref.split('').reverse().join('') === alt\n}\n\nconst altTypeToSO: Record<string, string> = {\n  '<DEL>': 'deletion',\n  '<INS>': 'insertion',\n  '<DUP>': 'duplication',\n  '<INV>': 'inversion',\n  '<INVDUP>': 'inverted_duplication',\n  '<CNV>': 'copy_number_variation',\n  '<TRA>': 'translocation',\n  '<DUP:TANDEM>': 'tandem_duplication',\n  '<NON_REF>': 'sequence_variant',\n  '<*>': 'sequence_variant',\n}\n\nexport function getSOTermAndDescription(\n  ref: string,\n  alt: string[] | undefined,\n  parser: VCF,\n): string[] {\n  if (!alt || alt.length === 0) {\n    return ['remark', 'no alternative alleles']\n  }\n\n  const soTerms = alt.map(a => getSOTerm(a, ref, parser))\n  const uniqueSoTerms = [...new Set(soTerms)]\n  const description = formatGroupDescription(ref, alt)\n\n  return [uniqueSoTerms.join(','), description]\n}\n\nfunction getSOTerm(alt: string, ref: string, parser: VCF): string {\n  // Symbolic alleles\n  if (alt.startsWith('<')) {\n    return findSOTerm(alt, parser) ?? 'variant'\n  }\n\n  // Breakends\n  if (isBreakend(alt) && parseBreakend(alt)) {\n    return 'breakend'\n  }\n\n  const lenRef = ref.length\n  const lenAlt = alt.length\n\n  if (lenRef === 1 && lenAlt === 1) {\n    return 'SNV'\n  } else if (lenRef === lenAlt) {\n    return isInversion(ref, alt) ? 'inversion' : 'substitution'\n  } else {\n    return lenRef < lenAlt ? 'insertion' : 'deletion'\n  }\n}\n\nfunction formatGroupDescription(ref: string, alts: string[]): string {\n  if (alts.every(isSymbolic)) {\n    return alts.join(',')\n  }\n\n  const lenRef = ref.length\n\n  return `${ref.length > 10 ? getBpDisplayStr(lenRef) : ref} -> ${alts.map(a => (a.length > 10 ? getBpDisplayStr(a.length) : a)).join(',')}`\n}\n\nfunction findSOTerm(alt: string, parser: VCF): string | undefined {\n  if (altTypeToSO[alt]) {\n    return altTypeToSO[alt]\n  }\n  if (parser.getMetadata('ALT', alt)) {\n    return 'sequence_variant'\n  }\n  // Try parent term by stripping last component, e.g. '<INS:ME>' -> '<INS>'\n  const parts = alt.slice(1, -1).split(':')\n  return parts.length > 1\n    ? findSOTerm(`<${parts.slice(0, -1).join(':')}>`, parser)\n    : undefined\n}\n\nexport function getSOAndDescFromAltDefs(alt: string, parser: VCF): string[] {\n  if (!alt.startsWith('<')) {\n    return []\n  }\n\n  const soTerm = findSOTerm(alt, parser)\n  return [soTerm ?? 'variant', alt]\n}\n\nexport function getMinimalDesc(ref: string, alt: string) {\n  if (isSymbolic(alt) || (ref.length === 1 && alt.length === 1)) {\n    return alt\n  }\n\n  const lenRef = ref.length\n  const lenAlt = alt.length\n  const isLong = lenRef > 5 || lenAlt > 5\n\n  return isLong\n    ? `${getBpDisplayStr(lenRef)} -> ${getBpDisplayStr(lenAlt)}`\n    : `${ref} -> ${alt}`\n}\n\nexport function makeSimpleAltString(\n  genotype: string,\n  ref: string,\n  alt: string[],\n) {\n  return genotype\n    .split(genotypeDelimRegex)\n    .map(r =>\n      r === '.'\n        ? '.'\n        : +r === 0\n          ? `ref(${ref.length < 10 ? ref : getBpDisplayStr(ref.length)})`\n          : getMinimalDesc(ref, alt[+r - 1] || ''),\n    )\n    .join(genotype.includes('|') ? '|' : '/')\n}\n","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6\"\n}), 'Settings');"],"names":["AltFormatter","t0","$","_c","value","refString","show","setShow","useState","t1","getMinimalDesc","alt","t2","_jsxs","children","_jsx","onClick","Formatter","copied","setCopied","display","String","length","_Fragment","type","async","default","copy","setTimeout","val","slice","VariantGenotypeFrequencyTable","rows","selectedGenotypes","setSelectedGenotypes","showToolbar","T0","t10","t11","t3","t4","t5","t6","t7","t8","t9","t12","t13","t14","t15","summary","row","gt","GT","count","genotype","gridRows","Object","entries","map","key","id","frequency","n","toPrecision","allSelected","every","r","has","height","DataGrid","field","headerName","width","sortable","disableColumnMenu","renderHeader","Checkbox","indeterminate","size","onChange","_","checked","Set","renderCell","params","isChecked","__0","checked_0","newSet","_temp","add","delete","measureGridWidth","_temp2","_temp3","_temp4","_temp5","hideFooter","rowHeight","columnHeaderHeight","columns","style","r_4","r_3","r_2","r_1","r_0","SampleFilters","filter","setFilter","localFilter","setLocalFilter","startTransition","useTransition","useEffect","Symbol","for","Typography","TextField","placeholder","event","target","newFilter","gtOnlyFields","genotypeFields","VariantSampleGrid","props","feature","descriptions","undefined","columnDisplayMode","setColumnDisplayMode","showFilters","setShowFilters","showFrequencyTable","setShowFrequencyTable","setShowToolbar","useCounts","setUseCounts","samples","ALT","REF","error","filterKeys","keys","gtStr","displayGT","alleleCounts","alleles","split","allele","join","gtToAlleleCounts","displayGenotype","ref","resolved","getBpDisplayStr","genotypeToAlleleCounts","makeSimpleAltString","sample","currFilter","RegExp","exec","e","console","getSampleGridRows","filteredRows","FORMAT","description","Description","BaseCard","title","color","alignItems","gap","CascadingMenuButton","menuItems","label","helpText","SettingsIcon","ToggleButtonGroup","exclusive","newValue","ToggleButton","variant","marginTop","ErrorBoundary","ErrorMessage","DataGridFlexContainer","f_0","f","k","variantFieldDescriptions","CHROM","POS","ID","QUAL","FILTER","LaunchBreakendPanel","lazy","VariantConsequenceDataGrid","AnnotationPanel","fieldKey","regex","desc","INFO","match","fields","data","svTypes","LaunchBreakendWidgetArea","model","featureData","feat","JSON","parse","stringify","locStrings","CHR2","END","mate","refName","start","some","t","includes","uniqueId","end","parseBreakend","MatePosition","FeatDefined","observer","rest","Paper","FeatureDetails","formatter","Suspense","fallback","structuredClone","genotypeDelimRegex","isBreakend","startsWith","endsWith","isSymbolic","altTypeToSO","getSOTermAndDescription","parser","soTerms","a","findSOTerm","lenRef","lenAlt","reverse","isInversion","getSOTerm","uniqueSoTerms","alts","formatGroupDescription","getMetadata","parts","createSvgIcon","d"],"ignoreList":[],"sourceRoot":""}