{"version":3,"file":"static/js/4690.04e6f713.chunk.js","mappings":"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","sources":["../../../plugins/hic/src/LinearHicDisplay/components/BaseDisplayComponent.tsx","../../../plugins/hic/src/HicRenderer/components/HicColorLegend.tsx","../../../plugins/hic/src/LinearHicDisplay/components/ReactComponent.tsx"],"sourcesContent":["import React from 'react'\n\nimport { ErrorMessage, LoadingEllipses } from '@jbrowse/core/ui'\nimport { makeStyles } from '@jbrowse/core/util/tss-react'\nimport { observer } from 'mobx-react'\n\n/**\n * Custom display component for HiC display that handles offset positioning\n * differently than the standard NonBlockCanvasDisplayComponent.\n *\n * The HiC display needs to position content at Math.max(0, -offsetPx) when\n * scrolled beyond the region start, without the smooth scrolling shift\n * that NonBlockCanvasDisplayComponent provides.\n */\nexport interface HicDisplayModel {\n  error?: unknown\n  regionTooLarge?: boolean\n  reload: () => void\n  regionCannotBeRendered: () => React.ReactElement | null\n  drawn: boolean\n  loading: boolean\n  statusMessage?: string\n}\n\nconst useStyles = makeStyles()({\n  loading: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    backgroundColor: 'rgba(255, 255, 255, 0.15)',\n    backgroundImage: `repeating-linear-gradient(45deg, transparent, transparent 8px, rgba(0, 0, 0, 0.05) 8px, rgba(0, 0, 0, 0.05) 16px)`,\n    pointerEvents: 'none',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    zIndex: 1,\n  },\n  loadingMessage: {\n    zIndex: 2,\n    pointerEvents: 'none',\n  },\n})\n\nconst HicBaseDisplayComponent = observer(function HicBaseDisplayComponent({\n  model,\n  children,\n}: {\n  model: HicDisplayModel\n  children?: React.ReactNode\n}) {\n  const { error, regionTooLarge } = model\n  return error ? (\n    <ErrorMessage error={error} />\n  ) : regionTooLarge ? (\n    model.regionCannotBeRendered()\n  ) : (\n    <DataDisplay model={model}>{children}</DataDisplay>\n  )\n})\n\nconst DataDisplay = observer(function DataDisplay({\n  model,\n  children,\n}: {\n  model: HicDisplayModel\n  children?: React.ReactNode\n}) {\n  const { drawn, loading } = model\n\n  return (\n    <div data-testid={`drawn-${drawn}`}>\n      {children}\n      {loading ? <LoadingBar model={model} /> : null}\n    </div>\n  )\n})\n\nconst LoadingBar = observer(function LoadingBar({\n  model,\n}: {\n  model: HicDisplayModel\n}) {\n  const { classes } = useStyles()\n  const { statusMessage } = model\n  return (\n    <div className={classes.loading}>\n      <div className={classes.loadingMessage}>\n        <LoadingEllipses message={statusMessage} />\n      </div>\n    </div>\n  )\n})\n\nexport default HicBaseDisplayComponent\n","import { toLocale } from '@jbrowse/core/util'\nimport { makeStyles } from '@jbrowse/core/util/tss-react'\nimport { scaleLinear, scaleLog } from '@mui/x-charts-vendor/d3-scale'\nimport { observer } from 'mobx-react'\n\nconst useStyles = makeStyles()({\n  legend: {\n    position: 'absolute',\n    right: 10,\n    top: 10,\n    background: 'rgba(255,255,255,0.9)',\n    border: '1px solid #ccc',\n    borderRadius: 4,\n    padding: 8,\n    fontSize: 11,\n    pointerEvents: 'none',\n    zIndex: 100,\n  },\n  gradientBar: {\n    width: 100,\n    height: 12,\n    marginBottom: 4,\n    borderRadius: 2,\n  },\n  labels: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    fontSize: 10,\n  },\n})\n\nconst colorGradients: Record<string, string> = {\n  juicebox: 'linear-gradient(to right, rgba(0,0,0,0), red)',\n  fall: 'linear-gradient(to right, rgb(255,255,255), rgb(255,255,204), rgb(255,237,160), rgb(254,217,118), rgb(254,178,76), rgb(253,141,60), rgb(252,78,42), rgb(227,26,28), rgb(189,0,38), rgb(128,0,38), rgb(0,0,0))',\n  viridis:\n    'linear-gradient(to right, #440154, #482878, #3e4a89, #31688e, #26828e, #1f9e89, #35b779, #6ece58, #b5de2b, #fde725)',\n}\n\nfunction getNiceScale(maxScore: number, useLogScale?: boolean) {\n  if (useLogScale) {\n    // Use base 2 for log scale like wiggle plugin does\n    const scale = scaleLog().base(2).domain([1, maxScore]).nice()\n    const [min, max] = scale.domain()\n    return { min, max }\n  }\n  const scale = scaleLinear().domain([0, maxScore]).nice()\n  const [min, max] = scale.domain()\n  return { min, max }\n}\n\nconst HicColorLegend = observer(function HicColorLegend({\n  maxScore,\n  colorScheme = 'juicebox',\n  useLogScale,\n}: {\n  maxScore: number\n  colorScheme?: string\n  useLogScale?: boolean\n}) {\n  const { classes } = useStyles()\n  const gradient = colorGradients[colorScheme] || colorGradients.juicebox\n  const { min, max } = getNiceScale(maxScore, useLogScale)\n\n  return (\n    <div className={classes.legend}>\n      <div className={classes.gradientBar} style={{ background: gradient }} />\n      <div className={classes.labels}>\n        <span>{min !== undefined ? toLocale(min) : ''}</span>\n        <span>\n          {max !== undefined ? toLocale(max) : ''}\n          {useLogScale ? ' (log)' : ''}\n        </span>\n      </div>\n    </div>\n  )\n})\n\nexport default HicColorLegend\n","import { useCallback, useMemo, useRef, useState } from 'react'\n\nimport BaseTooltip from '@jbrowse/core/ui/BaseTooltip'\nimport { getContainingView, reducePrecision } from '@jbrowse/core/util'\nimport Flatbush from '@jbrowse/core/util/flatbush'\nimport { observer } from 'mobx-react'\n\nimport BaseDisplayComponent from './BaseDisplayComponent.tsx'\nimport HicColorLegend from '../../HicRenderer/components/HicColorLegend.tsx'\n\nimport type { HicFlatbushItem } from '../../HicRenderer/types.ts'\nimport type { LinearHicDisplayModel } from '../model.ts'\nimport type { LinearGenomeViewModel } from '@jbrowse/plugin-linear-genome-view'\n\ntype LGV = LinearGenomeViewModel\n\nconst SQRT2 = Math.sqrt(2)\n\nfunction HicTooltip({\n  item,\n  x,\n  y,\n}: {\n  item: HicFlatbushItem\n  x: number\n  y: number\n}) {\n  return (\n    <BaseTooltip clientPoint={{ x: x + 15, y }}>\n      <div>Score: {reducePrecision(item.counts)}</div>\n    </BaseTooltip>\n  )\n}\n\nfunction Crosshairs({\n  x,\n  y,\n  yScalar,\n  left,\n  width,\n  height,\n}: {\n  x: number\n  y: number\n  yScalar: number\n  left: number\n  width: number\n  height: number\n}) {\n  const dx = y / yScalar\n  return (\n    <svg\n      style={{\n        position: 'absolute',\n        left,\n        top: 0,\n        width,\n        height,\n        pointerEvents: 'none',\n      }}\n    >\n      <g stroke=\"#000\" strokeWidth=\"1\" fill=\"none\">\n        <path d={`M ${x - dx} 0 L ${x} ${y} L ${x + dx} 0`} />\n      </g>\n    </svg>\n  )\n}\n\n/**\n * Transform screen coordinates to the unrotated coordinate space.\n * The canvas is rotated by -45 degrees, so we apply the inverse rotation (+45 degrees).\n * Also accounts for the yScalar transformation.\n */\nfunction screenToUnrotated(\n  screenX: number,\n  screenY: number,\n  yScalar: number,\n): { x: number; y: number } {\n  const scaledY = screenY / yScalar\n  const x = (screenX - scaledY) / SQRT2\n  const y = (screenX + scaledY) / SQRT2\n  return { x, y }\n}\n\nconst HicCanvas = observer(function HicCanvas({\n  model,\n}: {\n  model: LinearHicDisplayModel\n}) {\n  const view = getContainingView(model) as LGV\n  const width = Math.round(view.dynamicBlocks.totalWidthPx)\n  const {\n    height,\n    fullyDrawn,\n    flatbush,\n    flatbushItems,\n    yScalar,\n    showLegend,\n    maxScore,\n    colorScheme,\n    useLogScale,\n    lastDrawnOffsetPx,\n  } = model\n\n  const containerRef = useRef<HTMLDivElement>(null)\n  const [hoveredItem, setHoveredItem] = useState<HicFlatbushItem>()\n  const [mousePosition, setMousePosition] = useState<{ x: number; y: number }>()\n  const [localMousePos, setLocalMousePos] = useState<{ x: number; y: number }>()\n\n  // When offsetPx >= 0: use scroll offset for smooth scrolling between renders\n  // When offsetPx < 0: use boundary offset to prevent content going past left edge\n  const canvasOffset =\n    view.offsetPx >= 0\n      ? (lastDrawnOffsetPx ?? 0) - view.offsetPx\n      : Math.max(0, -view.offsetPx)\n\n  // Convert flatbush data to Flatbush instance\n  const flatbushIndex = useMemo(\n    () => (flatbush ? Flatbush.from(flatbush) : null),\n    [flatbush],\n  )\n\n  // biome-ignore lint/correctness/useExhaustiveDependencies:\n  const cb = useCallback(\n    (ref: HTMLCanvasElement) => {\n      model.setRef(ref)\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [model, width, height],\n  )\n\n  const onMouseMove = useCallback(\n    (event: React.MouseEvent) => {\n      if (!containerRef.current || !flatbushIndex || !flatbushItems.length) {\n        setHoveredItem(undefined)\n        setMousePosition(undefined)\n        return\n      }\n\n      const rect = containerRef.current.getBoundingClientRect()\n      const mouseCanvasOffset = canvasOffset\n      const screenX = event.clientX - rect.left - mouseCanvasOffset\n      const screenY = event.clientY - rect.top\n\n      setMousePosition({ x: event.clientX, y: event.clientY })\n      setLocalMousePos({ x: screenX, y: screenY })\n\n      // Transform screen coordinates to unrotated space for Flatbush query\n      const { x, y } = screenToUnrotated(screenX, screenY, yScalar)\n\n      // Query Flatbush with a small region around the transformed point\n      const results = flatbushIndex.search(x - 1, y - 1, x + 1, y + 1)\n\n      if (results.length > 0) {\n        const item = flatbushItems[results[0]!]\n        setHoveredItem(item)\n      } else {\n        setHoveredItem(undefined)\n      }\n    },\n    [flatbushIndex, flatbushItems, yScalar, canvasOffset],\n  )\n\n  const onMouseLeave = useCallback(() => {\n    setHoveredItem(undefined)\n    setMousePosition(undefined)\n    setLocalMousePos(undefined)\n  }, [])\n\n  return (\n    <div\n      ref={containerRef}\n      style={{\n        cursor: hoveredItem && mousePosition ? 'crosshair' : undefined,\n        position: 'relative',\n        width,\n        height,\n        overflow: 'hidden',\n      }}\n      onMouseMove={onMouseMove}\n      onMouseLeave={onMouseLeave}\n    >\n      <canvas\n        data-testid={`hic_canvas${fullyDrawn ? '_done' : ''}`}\n        ref={cb}\n        style={{\n          width,\n          height,\n          position: 'absolute',\n          left: canvasOffset,\n        }}\n        width={width * 2}\n        height={height * 2}\n      />\n      {hoveredItem && localMousePos ? (\n        <Crosshairs\n          x={localMousePos.x}\n          y={localMousePos.y}\n          yScalar={yScalar}\n          left={canvasOffset}\n          width={width}\n          height={height}\n        />\n      ) : null}\n\n      {hoveredItem && mousePosition ? (\n        <HicTooltip\n          item={hoveredItem}\n          x={mousePosition.x}\n          y={mousePosition.y}\n        />\n      ) : null}\n      {showLegend && maxScore > 0 ? (\n        <HicColorLegend\n          maxScore={maxScore}\n          colorScheme={colorScheme}\n          useLogScale={useLogScale}\n        />\n      ) : null}\n    </div>\n  )\n})\n\nconst LinearHicReactComponent = observer(function LinearHicReactComponent({\n  model,\n}: {\n  model: LinearHicDisplayModel\n}) {\n  return (\n    <BaseDisplayComponent model={model}>\n      <HicCanvas model={model} />\n    </BaseDisplayComponent>\n  )\n})\n\nexport default LinearHicReactComponent\n"],"names":["useStyles","makeStyles","loading","position","top","left","right","bottom","backgroundColor","backgroundImage","pointerEvents","display","justifyContent","alignItems","zIndex","loadingMessage","HicBaseDisplayComponent","observer","model","children","error","regionTooLarge","_jsx","ErrorMessage","regionCannotBeRendered","DataDisplay","drawn","_jsxs","LoadingBar","classes","statusMessage","className","LoadingEllipses","message","legend","background","border","borderRadius","padding","fontSize","gradientBar","width","height","marginBottom","labels","colorGradients","juicebox","fall","viridis","maxScore","colorScheme","useLogScale","gradient","min","max","scale","scaleLog","base","domain","nice","scaleLinear","getNiceScale","style","undefined","toLocale","SQRT2","Math","sqrt","HicTooltip","t0","$","_c","item","x","y","t1","t2","t3","t4","t5","counts","reducePrecision","BaseTooltip","clientPoint","Crosshairs","yScalar","dx","stroke","strokeWidth","fill","d","HicCanvas","view","getContainingView","round","dynamicBlocks","totalWidthPx","fullyDrawn","flatbush","flatbushItems","showLegend","lastDrawnOffsetPx","containerRef","useRef","hoveredItem","setHoveredItem","useState","mousePosition","setMousePosition","localMousePos","setLocalMousePos","canvasOffset","offsetPx","flatbushIndex","useMemo","Flatbush","from","cb","useCallback","ref","setRef","onMouseMove","event","current","length","rect","getBoundingClientRect","mouseCanvasOffset","screenX","clientX","screenY","clientY","scaledY","screenToUnrotated","results","search","onMouseLeave","cursor","overflow","HicColorLegend","BaseDisplayComponent"],"ignoreList":[],"sourceRoot":""}