"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[9991],{42372(e,t,o){o.r(t),o.d(t,{default:()=>j});var r=o(42918),s=o(85787),n=o(27351),a=o(87574),l=o(77251),c=o(65045),i=o(90548),d=o(55925),p=o(99367),h=o(43787),u=o(96887),m=o(28519),f=o(76143),b=o(41031),A=o(8039),v=o(70885),x=o(64074),g=o(11259),w=o(32118);const y=(0,c.n)()({dialogContent:{width:"80em"},textAreaFont:{fontFamily:"Courier New"}}),j=(0,x.observer)(function({model:e,handleClose:t}){const{classes:c}=y(),[x,j]=(0,r.useState)(),[C,k]=(0,r.useState)(),[z,S]=(0,r.useState)(!1),[$,R]=(0,r.useState)(!1),[q,M]=(0,r.useState)(!1),{leftOffset:O,rightOffset:F}=e,P=void 0===C;(0,r.useEffect)(()=>{const t=new AbortController;return(async()=>{try{const t=e.getSelectedRegions(O,F);if(0===t.length)throw new Error("Selected region is out of bounds");k(await async function(e,t){const o=(0,l.getSession)(e),{leftOffset:r,rightOffset:s}=e;if(!r||!s)throw new Error("no offsets on model to use for range");if(new Set(t.map(e=>e.assemblyName)).size>1)throw new Error("not able to fetch sequences from multiple assemblies currently");const{rpcManager:n,assemblyManager:a}=o,c=r.assemblyName||s.assemblyName||"",i=a.get(c);if(!i)throw new Error(`assembly ${c} not found`);const d=(0,g.FI)(i,["sequence","adapter"]),p="getSequence";return n.call(p,"CoreGetFeatures",{adapterConfig:d,regions:t,sessionId:p})}(e,t))}catch(e){console.error(e),j(e)}})(),()=>{t.abort()}},[e,O,F]);const E=C?C.map(e=>{let t=e.get("seq");const o=e.get("refName"),r=e.get("start")+1,s=e.get("end"),n=`${o}:${r}-${s}`;if(t?.length!==s-r+1)throw new Error(`${n} returned ${(0,l.toLocale)(t.length)} bases, but should have returned ${(0,l.toLocale)(s-r)}`);return z&&(t=(0,l.reverse)(t)),q&&(t=(0,l.complement)(t)),{header:n+(z?"-rev":"")+(q?"-comp":""),seq:t}}).map(e=>{return`>${e.header}\n${t=e.seq,t.replaceAll(/(.{1,80})/g,"$1\n").trimEnd()}`;var t}).join("\n"):"",N=!!E&&E.length>1e6;return(0,w.jsxs)(s.A,{maxWidth:"xl",open:!0,title:"Reference sequence",onClose:()=>{t(),e.setOffsets()},children:[(0,w.jsxs)(p.A,{children:[x?(0,w.jsx)(n.A,{error:x}):P?(0,w.jsx)(a.A,{message:"Retrieving sequences"}):null,(0,w.jsx)(h.A,{variant:"outlined",multiline:!0,minRows:5,maxRows:10,disabled:N,className:c.dialogContent,fullWidth:!0,value:N?"Reference sequence too large to display, use the download FASTA button":E,slotProps:{input:{readOnly:!0,classes:{input:c.textAreaFont}}}}),(0,w.jsxs)(u.A,{children:[(0,w.jsx)(m.A,{control:(0,w.jsx)(f.A,{value:z,onChange:e=>{S(e.target.checked)}}),label:"Reverse sequence"}),(0,w.jsx)(m.A,{control:(0,w.jsx)(f.A,{value:q,onChange:e=>{M(e.target.checked)}}),label:"Complement sequence"})]}),(0,w.jsx)(b.A,{style:{margin:10},children:'Note: Check both boxes for the "reverse complement"'})]}),(0,w.jsxs)(A.A,{children:[(0,w.jsx)(v.A,{onClick:async()=>{const{default:e}=await o.e(8284).then(o.t.bind(o,88284,23));e(E),R(!0),setTimeout(()=>{R(!1)},500)},disabled:P||!!x||N,color:"primary",startIcon:(0,w.jsx)(i.A,{}),children:$?"Copied":"Copy to clipboard"}),(0,w.jsx)(v.A,{onClick:async()=>{const{saveAs:e}=await o.e(9044).then(o.bind(o,99044));e(new Blob([E||""],{type:"text/x-fasta;charset=utf-8"}),"jbrowse_ref_seq.fa")},disabled:P||!!x,color:"primary",startIcon:(0,w.jsx)(d.A,{}),children:"Download FASTA"}),(0,w.jsx)(v.A,{onClick:t,variant:"contained",children:"Close"})]})]})})},55925(e,t,o){o.d(t,{A:()=>n});var r=o(2425),s=o(32118);const n=(0,r.A)((0,s.jsx)("path",{d:"M19 9h-4V3H9v6H5l7 7zM5 18v2h14v-2z"}),"GetApp")},72147(e,t,o){o.d(t,{A:()=>a,w:()=>n});var r=o(97818),s=o(11042);function n(e){return(0,s.Ay)("MuiCheckbox",e)}const a=(0,r.A)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"])},76143(e,t,o){o.d(t,{A:()=>k});var r=o(42918),s=o(77710),n=o(61648),a=o(69364),l=o(2425),c=o(32118);const i=(0,l.A)((0,c.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),d=(0,l.A)((0,c.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),p=(0,l.A)((0,c.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");var h=o(42458),u=o(63154),m=o(72147),f=o(18496),b=o(55030),A=o(77180),v=o(27997),x=o(71562),g=o(84961);const w=(0,f.Ay)(a.A,{shouldForwardProp:e=>(0,u.A)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,o.indeterminate&&t.indeterminate,t[`size${(0,h.A)(o.size)}`],"default"!==o.color&&t[`color${(0,h.A)(o.color)}`]]}})((0,b.A)(({theme:e})=>({color:(e.vars||e).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity)}}},...Object.entries(e.palette).filter((0,A.A)()).map(([t])=>({props:{color:t,disableRipple:!1},style:{"&:hover":{backgroundColor:e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity)}}})),...Object.entries(e.palette).filter((0,A.A)()).map(([t])=>({props:{color:t},style:{[`&.${m.A.checked}, &.${m.A.indeterminate}`]:{color:(e.vars||e).palette[t].main},[`&.${m.A.disabled}`]:{color:(e.vars||e).palette.action.disabled}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}))),y=(0,c.jsx)(d,{}),j=(0,c.jsx)(i,{}),C=(0,c.jsx)(p,{}),k=r.forwardRef(function(e,t){const o=(0,v.b)({props:e,name:"MuiCheckbox"}),{checkedIcon:a=y,color:l="primary",icon:i=j,indeterminate:d=!1,indeterminateIcon:p=C,inputProps:u,size:f="medium",disableRipple:b=!1,className:A,slots:k={},slotProps:z={},...S}=o,$=d?p:i,R=d?p:a,q={...o,disableRipple:b,color:l,indeterminate:d,size:f},M=(e=>{const{classes:t,indeterminate:o,color:r,size:s}=e,a={root:["root",o&&"indeterminate",`color${(0,h.A)(r)}`,`size${(0,h.A)(s)}`]},l=(0,n.A)(a,m.w,t);return{...t,...l}})(q),O=z.input??u,[F,P]=(0,g.A)("root",{ref:t,elementType:w,className:(0,s.A)(M.root,A),shouldForwardComponentProp:!0,externalForwardedProps:{slots:k,slotProps:z,...S},ownerState:q,additionalProps:{type:"checkbox",icon:r.cloneElement($,{fontSize:$.props.fontSize??f}),checkedIcon:r.cloneElement(R,{fontSize:R.props.fontSize??f}),disableRipple:b,slots:k,slotProps:{input:(0,x.A)("function"==typeof O?O(q):O,{"data-indeterminate":d})}}});return(0,c.jsx)(F,{...P,classes:M})})}}]);
//# sourceMappingURL=9991.2c552445.chunk.js.map