{"version":3,"file":"static/js/1423.8fa723b3.chunk.js","mappings":"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AAM,WAAW,IAAM,WAAW,IAAM,WAAW,IAAM,WAAW,IAAM,WAAW,IAAM,WAAW,IAAM,WAAW,IAAM,WAAW,IAAM,WAAW,IAAM,WAAW,IAAM,WAAW,IAAM,WAAW,IAAM,WAAW,IAAM,WAAW,IAAM,WAAW,IAAM,WAAW,IAAM,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,K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","sources":["../webpack/runtime/chunk loaded","../webpack/runtime/create fake namespace object","../webpack/runtime/startup chunk dependencies","../../../packages/core/PluginLoader.ts","rpcWorker.ts","../../../packages/product-core/src/rpcWorker.ts","../../../packages/core/ui/Menu.tsx","../../../packages/core/util/types/mst.ts","../../../packages/core/ui/SanitizedHTML.tsx","../../../plugins/data-management/src/index.ts","../../../packages/core/ui/CascadingMenuButton.tsx","../../../packages/core/ui/Logo.tsx","../../../packages/core/ui/ErrorMessage.tsx","../../../packages/core/util/QuickLRU.js","../../../packages/product-core/src/Session/BaseSession.ts","../../../packages/core/ui/theme.ts","../../../packages/core/ui/AssemblySelector.tsx","../../../packages/core/ui/FileSelector/FileSelector.tsx","../../../packages/core/ui/PrerenderedCanvas.tsx","../../../packages/core/ui/index.ts","../../../packages/core/ui/ResizeHandle.tsx","workerPolyfill.js","../../../packages/core/ui/FactoryResetDialog.tsx","../../../packages/product-core/src/Session/MultipleViews.ts","../../../packages/core/ui/CascadingMenu.tsx","../../../packages/core/ui/EditableTypography.tsx","../../../packages/core/ui/Icons.tsx","../../../packages/core/util/tracks.ts","../../../packages/core/ui/Dialog.tsx","../../../packages/core/util/index.ts","../webpack/bootstrap","../webpack/runtime/compat get default export","../webpack/runtime/define property getters","../webpack/runtime/ensure chunk","../webpack/runtime/get javascript chunk filename","../webpack/runtime/get mini-css chunk filename","../webpack/runtime/global","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/make namespace object","../webpack/runtime/runtimeId","../webpack/runtime/publicPath","../webpack/runtime/importScripts chunk loading","../webpack/runtime/nonce","../webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));\n\t}\n\tdef['default'] = () => (value);\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","var next = __webpack_require__.x;\n__webpack_require__.x = () => {\n\treturn Promise.all([6450,7844,558].map(__webpack_require__.e, __webpack_require__)).then(next);\n};","import domLoadScript from 'load-script'\n\nimport Plugin from './Plugin'\nimport ReExports from './ReExports'\nimport { isElectron } from './util'\n\nimport type { PluginConstructor } from './Plugin'\n\nexport interface UMDLocPluginDefinition {\n  umdLoc: {\n    uri: string\n    baseUri?: string\n  }\n  name: string\n}\n\nexport interface UMDUrlPluginDefinition {\n  umdUrl: string\n  name: string\n}\n\nexport interface LegacyUMDPluginDefinition {\n  url: string\n  name: string\n}\n\ntype UMDPluginDefinition = UMDLocPluginDefinition | UMDUrlPluginDefinition\n\nexport function isUMDPluginDefinition(\n  def: PluginDefinition,\n): def is UMDPluginDefinition | LegacyUMDPluginDefinition {\n  return (\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n    ((def as UMDUrlPluginDefinition).umdUrl !== undefined ||\n      // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n      (def as LegacyUMDPluginDefinition).url !== undefined ||\n      // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n      (def as UMDLocPluginDefinition).umdLoc !== undefined) &&\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n    (def as LegacyUMDPluginDefinition | UMDPluginDefinition).name !== undefined\n  )\n}\n\nexport interface ESMLocPluginDefinition {\n  esmLoc: {\n    uri: string\n    baseUri?: string\n  }\n}\nexport interface ESMUrlPluginDefinition {\n  esmUrl: string\n}\n\nexport type ESMPluginDefinition =\n  | ESMLocPluginDefinition\n  | ESMUrlPluginDefinition\n\nexport function isESMPluginDefinition(\n  def: PluginDefinition,\n): def is ESMPluginDefinition {\n  return (\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n    (def as ESMUrlPluginDefinition).esmUrl !== undefined ||\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n    (def as ESMLocPluginDefinition).esmLoc !== undefined\n  )\n}\n\nexport interface CJSPluginDefinition {\n  cjsUrl: string\n}\n\nfunction promisifiedLoadScript(src: string) {\n  return new Promise((resolve, reject) => {\n    domLoadScript(src, (err, script) => {\n      if (err) {\n        reject(err)\n      } else {\n        resolve(script.src)\n      }\n    })\n  })\n}\n\nasync function loadScript(scriptUrl: string) {\n  if (!isInWebWorker()) {\n    return promisifiedLoadScript(scriptUrl)\n  }\n\n  // @ts-expect-error\n  if (globalThis.importScripts) {\n    // @ts-expect-error\n    await globalThis.importScripts(scriptUrl)\n    return\n  }\n  throw new Error(\n    'cannot figure out how to load external JS scripts in this environment',\n  )\n}\n\nexport function isCJSPluginDefinition(\n  def: PluginDefinition,\n): def is CJSPluginDefinition {\n  // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n  return (def as CJSPluginDefinition).cjsUrl !== undefined\n}\n\nexport type PluginDefinition =\n  | UMDUrlPluginDefinition\n  | UMDLocPluginDefinition\n  | LegacyUMDPluginDefinition\n  | ESMLocPluginDefinition\n  | ESMUrlPluginDefinition\n  | CJSPluginDefinition\n\nexport interface PluginRecord {\n  plugin: PluginConstructor\n  definition: PluginDefinition\n}\n\nexport interface LoadedPlugin {\n  default: PluginConstructor\n}\n\nexport function pluginDescriptionString(d: PluginDefinition) {\n  if (isUMDPluginDefinition(d)) {\n    return `UMD plugin ${d.name}`\n  } else if (isESMPluginDefinition(d)) {\n    return `ESM plugin ${\n      (d as ESMUrlPluginDefinition).esmUrl ||\n      (d as ESMLocPluginDefinition).esmLoc.uri\n    }`\n  } else if (isCJSPluginDefinition(d)) {\n    return `CJS plugin ${d.cjsUrl}`\n  } else {\n    return 'unknown plugin'\n  }\n}\nexport function pluginUrl(d: PluginDefinition) {\n  if (isUMDPluginDefinition(d)) {\n    // @ts-expect-error\n    return d.url ?? d.umdLoc?.uri ?? d.umdUrl\n  } else if (isESMPluginDefinition(d)) {\n    // @ts-expect-error\n    return d.esmUrl ?? d.esmUri ?? d.esmLoc?.uri\n  } else if (isCJSPluginDefinition(d)) {\n    // @ts-expect-error\n    return d.cjsUrl || d.cjsLoc.uri\n  } else {\n    return 'unknown url'\n  }\n}\n\nfunction isInWebWorker() {\n  return Boolean('WorkerGlobalScope' in globalThis)\n}\n\nexport default class PluginLoader {\n  definitions: PluginDefinition[] = []\n\n  fetchESM?: (url: string) => Promise<LoadedPlugin>\n  fetchCJS?: (url: string) => Promise<LoadedPlugin>\n\n  constructor(\n    defs: PluginDefinition[] = [],\n    args?: {\n      fetchESM?: (url: string) => Promise<LoadedPlugin>\n      fetchCJS?: (url: string) => Promise<LoadedPlugin>\n    },\n  ) {\n    this.fetchESM = args?.fetchESM\n    this.fetchCJS = args?.fetchCJS\n    this.definitions = JSON.parse(JSON.stringify(defs))\n  }\n\n  async loadCJSPlugin(def: CJSPluginDefinition, baseUri?: string) {\n    const parsedUrl = new URL(def.cjsUrl, baseUri)\n    if (parsedUrl.protocol !== 'http:' && parsedUrl.protocol !== 'https:') {\n      throw new Error(\n        `Cannot load plugins using protocol \"${parsedUrl.protocol}\"`,\n      )\n    }\n    if (!this.fetchCJS) {\n      throw new Error('No fetchCJS callback provided')\n    }\n\n    return this.fetchCJS(parsedUrl.href)\n  }\n\n  async loadESMPlugin(def: ESMPluginDefinition, baseUri?: string) {\n    const parsedUrl =\n      'esmUrl' in def\n        ? new URL(def.esmUrl, baseUri)\n        : new URL(def.esmLoc.uri, def.esmLoc.baseUri)\n\n    if (parsedUrl.protocol !== 'http:' && parsedUrl.protocol !== 'https:') {\n      throw new Error(\n        `cannot load plugins using protocol \"${parsedUrl.protocol}\"`,\n      )\n    }\n\n    if (!this.fetchESM) {\n      throw new Error('No ESM fetcher installed')\n    }\n    const plugin = await this.fetchESM(parsedUrl.href)\n\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n    if (!plugin) {\n      throw new Error(`Could not load ESM plugin: ${parsedUrl}`)\n    }\n    return plugin\n  }\n\n  async loadUMDPlugin(\n    def: UMDPluginDefinition | LegacyUMDPluginDefinition,\n    baseUri?: string,\n  ) {\n    const parsedUrl =\n      'url' in def\n        ? new URL(def.url, baseUri)\n        : 'umdUrl' in def\n          ? new URL(def.umdUrl, baseUri)\n          : new URL(def.umdLoc.uri, def.umdLoc.baseUri)\n\n    if (parsedUrl.protocol !== 'http:' && parsedUrl.protocol !== 'https:') {\n      throw new Error(\n        `cannot load plugins using protocol \"${parsedUrl.protocol}\"`,\n      )\n    }\n    const moduleName = def.name\n    const umdName = `JBrowsePlugin${moduleName}`\n    if (typeof jest === 'undefined') {\n      await loadScript(parsedUrl.href)\n    } else {\n      // @ts-expect-error\n      globalThis[umdName] = { default: Plugin }\n    }\n\n    // @ts-expect-error\n    const plugin = globalThis[umdName] as\n      | { default: PluginConstructor }\n      | undefined\n    if (!plugin) {\n      throw new Error(\n        `Failed to load UMD bundle for ${moduleName}, ${umdName} is undefined`,\n      )\n    }\n    return plugin\n  }\n\n  async loadPlugin(def: PluginDefinition, baseUri?: string) {\n    let plugin: LoadedPlugin\n    if (isElectron && isCJSPluginDefinition(def)) {\n      plugin = await this.loadCJSPlugin(def, baseUri)\n    } else if (isESMPluginDefinition(def)) {\n      plugin = await this.loadESMPlugin(def, baseUri)\n    } else if (isUMDPluginDefinition(def)) {\n      plugin = await this.loadUMDPlugin(def, baseUri)\n    } else if (!isElectron && isCJSPluginDefinition(def)) {\n      throw new Error(\n        `CommonJS plugin found, but not in a NodeJS environment: ${JSON.stringify(\n          def,\n        )}`,\n      )\n    } else {\n      throw new Error(`Could not determine plugin type: ${JSON.stringify(def)}`)\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n    if (!plugin.default) {\n      throw new Error(\n        `${pluginDescriptionString(\n          def,\n        )} does not have a default export, cannot load`,\n      )\n    }\n    return plugin.default\n  }\n\n  installGlobalReExports(target: WindowOrWorkerGlobalScope) {\n    // @ts-expect-error\n    target.JBrowseExports = Object.fromEntries(\n      Object.entries(ReExports).map(([moduleName, module]) => {\n        return [moduleName, module]\n      }),\n    )\n    return this\n  }\n\n  async load(baseUri?: string) {\n    return Promise.all(\n      this.definitions.map(async definition => ({\n        plugin: await this.loadPlugin(definition, baseUri),\n        definition,\n      })),\n    )\n  }\n}\n","import './workerPolyfill'\nimport { initializeWorker } from '@jbrowse/product-core'\nimport { enableStaticRendering } from 'mobx-react'\n\nimport corePlugins from './corePlugins'\n\n// static rendering is used for \"SSR\" style rendering which is done on the\n// worker\nenableStaticRendering(true)\n\n// eslint-disable-next-line @typescript-eslint/no-floating-promises\ninitializeWorker(corePlugins, {\n  fetchESM: url => import(/* webpackIgnore:true */ url),\n})\n\nexport default function doNothing() {\n  /* do nothing */\n}\n","import PluginLoader from '@jbrowse/core/PluginLoader'\nimport PluginManager from '@jbrowse/core/PluginManager'\nimport RpcServer from 'librpc-web-mod'\nimport { serializeError } from 'serialize-error'\n\nimport type { PluginConstructor } from '@jbrowse/core/Plugin'\nimport type { LoadedPlugin, PluginDefinition } from '@jbrowse/core/PluginLoader'\n\ninterface WorkerConfiguration {\n  plugins: PluginDefinition[]\n  windowHref: string\n}\n\n// waits for a message from the main thread containing our configuration, which\n// must be sent on boot\nfunction receiveConfiguration() {\n  const configurationP = new Promise<WorkerConfiguration>(resolve => {\n    function listener(e: MessageEvent) {\n      if (e.data.message === 'config') {\n        resolve(e.data.config as WorkerConfiguration)\n        removeEventListener('message', listener)\n      }\n    }\n    self.addEventListener('message', listener)\n  })\n  postMessage({ message: 'readyForConfig' })\n  return configurationP\n}\n\nasync function getPluginManager(\n  corePlugins: PluginConstructor[],\n  opts: { fetchESM?: (url: string) => Promise<LoadedPlugin> },\n) {\n  // Load runtime plugins\n  const config = await receiveConfiguration()\n  const pluginLoader = new PluginLoader(\n    config.plugins,\n    opts,\n  ).installGlobalReExports(self)\n  return new PluginManager(\n    [\n      ...corePlugins.map(p => ({ plugin: p })),\n      ...(await pluginLoader.load(config.windowHref)),\n    ].map(P => new P.plugin()),\n  )\n    .createPluggableElements()\n    .configure()\n}\n\ninterface WrappedFuncArgs {\n  rpcDriverClassName: string\n  channel: string\n  [key: string]: unknown\n}\n\ntype RpcFunc = (args: unknown, rpcDriverClassName: string) => unknown\n\nfunction wrapForRpc(func: RpcFunc) {\n  return (args: WrappedFuncArgs) => {\n    const { channel, rpcDriverClassName } = args\n    return func(\n      {\n        ...args,\n        statusCallback: (message: string) => {\n          // @ts-expect-error\n          self.rpcServer.emit(channel, message)\n        },\n      },\n      rpcDriverClassName,\n    )\n  }\n}\n\nexport async function initializeWorker(\n  corePlugins: PluginConstructor[],\n  opts: {\n    fetchESM?: (url: string) => Promise<LoadedPlugin>\n    fetchCJS?: (url: string) => Promise<LoadedPlugin>\n  },\n) {\n  try {\n    const pluginManager = await getPluginManager(corePlugins, opts)\n    const rpcConfig = Object.fromEntries(\n      pluginManager\n        .getRpcElements()\n        .map(e => [e.name, wrapForRpc(e.execute.bind(e))]),\n    )\n\n    // @ts-expect-error\n    self.rpcServer = new RpcServer.Server(rpcConfig)\n    postMessage({ message: 'ready' })\n  } catch (e) {\n    postMessage({ message: 'error', error: serializeError(e) })\n  }\n  /* do nothing */\n}\n","import { forwardRef, useEffect, useRef, useState } from 'react'\n\nimport ArrowRightIcon from '@mui/icons-material/ArrowRight'\nimport CheckBoxIcon from '@mui/icons-material/CheckBox'\nimport CheckBoxOutlineBlankIcon from '@mui/icons-material/CheckBoxOutlineBlank'\nimport RadioButtonCheckedIcon from '@mui/icons-material/RadioButtonChecked'\nimport RadioButtonUncheckedIcon from '@mui/icons-material/RadioButtonUnchecked'\nimport {\n  Divider,\n  Grow,\n  ListItemIcon,\n  ListItemText,\n  ListSubheader,\n  MenuItem as MUIMenuItem,\n  MenuList,\n  Paper,\n  Popover,\n} from '@mui/material'\nimport { makeStyles } from 'tss-react/mui'\n\n// other\nimport { findLastIndex } from '../util'\n\nimport type {\n  MenuItemProps,\n  MenuProps as MUIMenuProps,\n  PopoverProps,\n  SvgIconProps,\n} from '@mui/material'\n\nconst useStyles = makeStyles()({\n  paper: {\n    position: 'fixed',\n    overflowY: 'auto',\n    overflowX: 'hidden',\n    // So we see the popover when it's empty.\n    minWidth: 16,\n    minHeight: 16,\n    maxWidth: 'calc(100% - 32px)',\n    maxHeight: 'calc(100% - 32px)',\n    top: 0,\n    left: 0,\n    // We disable the focus ring for mouse, touch and keyboard users.\n    outline: 0,\n  },\n  menuItemEndDecoration: {\n    padding: 0,\n    margin: 0,\n    height: 16,\n  },\n})\n\ninterface MenuItemEndDecorationSubMenuProps {\n  type: 'subMenu'\n}\n\ninterface MenuItemEndDecorationSelectorProps {\n  type: 'checkbox' | 'radio'\n  checked: boolean\n  disabled?: boolean\n}\n\ntype MenuItemEndDecorationProps =\n  | MenuItemEndDecorationSubMenuProps\n  | MenuItemEndDecorationSelectorProps\n\nexport function MenuItemEndDecoration(props: MenuItemEndDecorationProps) {\n  const { classes } = useStyles()\n  const { type } = props\n  let checked: boolean | undefined\n  let disabled: boolean | undefined\n  if ('checked' in props) {\n    ;({ checked, disabled } = props)\n  }\n  let icon: React.ReactElement\n  switch (type) {\n    case 'subMenu': {\n      icon = <ArrowRightIcon color=\"action\" />\n      break\n    }\n    case 'checkbox': {\n      if (checked) {\n        const color = disabled ? 'inherit' : undefined\n        icon = <CheckBoxIcon color={color} />\n      } else {\n        icon = <CheckBoxOutlineBlankIcon color=\"action\" />\n      }\n      break\n    }\n    case 'radio': {\n      if (checked) {\n        const color = disabled ? 'inherit' : undefined\n        icon = <RadioButtonCheckedIcon color={color} />\n      } else {\n        icon = <RadioButtonUncheckedIcon color=\"action\" />\n      }\n      break\n    }\n    // No default\n  }\n  return <div className={classes.menuItemEndDecoration}>{icon}</div>\n}\n\nexport interface MenuDivider {\n  priority?: number\n  type: 'divider'\n}\n\nexport interface MenuSubHeader {\n  type: 'subHeader'\n  priority?: number\n  label: string\n}\n\nexport interface BaseMenuItem {\n  id?: string // used as react key if provided\n  label: React.ReactNode\n  priority?: number\n  subLabel?: string\n  icon?: React.ComponentType<SvgIconProps>\n  disabled?: boolean\n}\n\nexport interface NormalMenuItem extends BaseMenuItem {\n  type?: 'normal'\n  onClick: (...args: any[]) => void\n}\n\nexport interface CheckboxMenuItem extends BaseMenuItem {\n  type: 'checkbox'\n  checked: boolean\n  onClick: (...args: any[]) => void\n}\n\nexport interface RadioMenuItem extends BaseMenuItem {\n  type: 'radio'\n  checked: boolean\n  onClick: (...args: any[]) => void\n}\n\nexport interface SubMenuItem extends BaseMenuItem {\n  type?: 'subMenu'\n  subMenu: MenuItem[]\n}\n\nexport type MenuItem =\n  | MenuDivider\n  | MenuSubHeader\n  | NormalMenuItem\n  | CheckboxMenuItem\n  | RadioMenuItem\n  | SubMenuItem\n\ntype AnchorElProp = MUIMenuProps['anchorEl']\ntype OpenProp = MUIMenuProps['open']\ntype OnCloseProp = MUIMenuProps['onClose']\n\ninterface MenuPageProps {\n  menuItems: MenuItem[]\n  onMenuItemClick: (\n    event: React.MouseEvent<HTMLLIElement>,\n    callback: (...args: any[]) => void,\n  ) => void\n  anchorEl?: AnchorElProp\n  open: OpenProp\n  onClose: OnCloseProp\n  top?: boolean\n}\n\ntype MenuItemStyleProp = MenuItemProps['style']\n\nfunction checkIfValid(m: MenuItem) {\n  return m.type !== 'divider' && m.type !== 'subHeader' && !m.disabled\n}\nfunction findNextValidIdx(menuItems: MenuItem[], currentIdx: number) {\n  const idx = menuItems.slice(currentIdx + 1).findIndex(checkIfValid)\n  if (idx === -1) {\n    return idx\n  }\n  return currentIdx + 1 + idx\n}\n\nfunction findPreviousValidIdx(menuItems: MenuItem[], currentIdx: number) {\n  return findLastIndex(menuItems.slice(0, currentIdx), checkIfValid)\n}\n\nconst MenuPage = forwardRef<HTMLDivElement, MenuPageProps>(\n  function MenuPage2(props, ref) {\n    const [subMenuAnchorEl, setSubMenuAnchorEl] = useState<HTMLElement>()\n    const [openSubMenuIdx, setOpenSubMenuIdx] = useState<number>()\n    const [isSubMenuOpen, setIsSubMenuOpen] = useState(false)\n    const [selectedMenuItemIdx, setSelectedMenuItemIdx] = useState<number>()\n    const [position, setPosition] = useState<{\n      top?: number\n      left?: number\n    }>()\n    const paperRef = useRef<HTMLDivElement | null>(null)\n    const { classes } = useStyles()\n\n    const {\n      menuItems,\n      onMenuItemClick,\n      open,\n      onClose,\n      anchorEl,\n      top = false,\n    } = props\n\n    useEffect(() => {\n      if (!open) {\n        setSubMenuAnchorEl(undefined)\n        setOpenSubMenuIdx(undefined)\n      }\n    }, [open])\n\n    useEffect(() => {\n      const shouldSubMenuBeOpen = open && Boolean(subMenuAnchorEl)\n      let timer: ReturnType<typeof setTimeout>\n      if (shouldSubMenuBeOpen && !isSubMenuOpen) {\n        timer = setTimeout(() => {\n          setIsSubMenuOpen(true)\n        }, 300)\n      } else if (!shouldSubMenuBeOpen && isSubMenuOpen) {\n        timer = setTimeout(() => {\n          setIsSubMenuOpen(false)\n        }, 300)\n      }\n      return () => {\n        clearTimeout(timer)\n      }\n    }, [isSubMenuOpen, open, subMenuAnchorEl])\n\n    useEffect(() => {\n      if (anchorEl) {\n        const rect = (anchorEl as HTMLElement).getBoundingClientRect()\n        if (position) {\n          if (\n            rect.top !== position.top ||\n            rect.left + rect.width !== position.left\n          ) {\n            setPosition({ top: rect.top, left: rect.left + rect.width })\n          }\n        } else {\n          setPosition({ top: rect.top, left: rect.left + rect.width })\n        }\n      } else if (!position) {\n        setPosition({})\n      }\n    }, [position, anchorEl])\n\n    const hasIcon = menuItems.some(\n      menuItem => 'icon' in menuItem && menuItem.icon,\n    )\n    const menuItemStyle: MenuItemStyleProp = {}\n\n    function handleClick(callback: (...args: any[]) => void) {\n      return (event: React.MouseEvent<HTMLLIElement>) => {\n        onMenuItemClick(event, callback)\n      }\n    }\n\n    const ListContents = (\n      <>\n        <MenuList autoFocusItem={open && !isSubMenuOpen} dense>\n          {menuItems\n            .sort((a, b) => (b.priority || 0) - (a.priority || 0))\n            .map((menuItem, idx) => {\n              if (menuItem.type === 'divider') {\n                return (\n                  <Divider\n                    key={`divider-${JSON.stringify(menuItem)}-${idx}`}\n                    component=\"li\"\n                  />\n                )\n              }\n              if (menuItem.type === 'subHeader') {\n                return (\n                  <ListSubheader key={`subHeader-${menuItem.label}-${idx}`}>\n                    {menuItem.label}\n                  </ListSubheader>\n                )\n              }\n              let icon = null\n              let endDecoration = null\n              if (menuItem.icon) {\n                const Icon = menuItem.icon\n                icon = (\n                  <ListItemIcon>\n                    <Icon />\n                  </ListItemIcon>\n                )\n              }\n              if ('subMenu' in menuItem) {\n                endDecoration = <MenuItemEndDecoration type=\"subMenu\" />\n              } else if (\n                menuItem.type === 'checkbox' ||\n                menuItem.type === 'radio'\n              ) {\n                endDecoration = (\n                  <MenuItemEndDecoration\n                    type={menuItem.type}\n                    checked={menuItem.checked}\n                    disabled={menuItem.disabled}\n                  />\n                )\n              }\n              const onClick =\n                'onClick' in menuItem\n                  ? handleClick(menuItem.onClick)\n                  : undefined\n              return (\n                <MUIMenuItem\n                  key={menuItem.id || String(menuItem.label)}\n                  style={menuItemStyle}\n                  selected={idx === selectedMenuItemIdx}\n                  onClick={onClick}\n                  onMouseMove={e => {\n                    if (e.currentTarget !== document.activeElement) {\n                      e.currentTarget.focus()\n                      setSelectedMenuItemIdx(idx)\n                    }\n                    if ('subMenu' in menuItem) {\n                      if (openSubMenuIdx !== idx) {\n                        setSubMenuAnchorEl(e.currentTarget)\n                        setOpenSubMenuIdx(idx)\n                      }\n                    } else {\n                      setSubMenuAnchorEl(undefined)\n                      setOpenSubMenuIdx(undefined)\n                    }\n                  }}\n                  onKeyDown={e => {\n                    switch (e.key) {\n                      case 'ArrowLeft':\n                      case 'Escape': {\n                        onClose?.(e, 'escapeKeyDown')\n\n                        break\n                      }\n                      case 'ArrowUp': {\n                        setSelectedMenuItemIdx(\n                          findPreviousValidIdx(menuItems, idx),\n                        )\n\n                        break\n                      }\n                      case 'ArrowDown': {\n                        const a = findNextValidIdx(menuItems, idx)\n                        setSelectedMenuItemIdx(a)\n\n                        break\n                      }\n                      default: {\n                        if (\n                          'subMenu' in menuItem &&\n                          (e.key === 'ArrowRight' || e.key === 'Enter')\n                        ) {\n                          setSubMenuAnchorEl(e.currentTarget)\n                          setOpenSubMenuIdx(idx)\n                          setIsSubMenuOpen(true)\n                        }\n                      }\n                    }\n                  }}\n                  disabled={Boolean(menuItem.disabled)}\n                >\n                  {icon}\n                  <ListItemText\n                    primary={menuItem.label}\n                    secondary={menuItem.subLabel}\n                    inset={hasIcon && !menuItem.icon}\n                  />\n                  {endDecoration}\n                </MUIMenuItem>\n              )\n            })}\n        </MenuList>\n        {menuItems.map((menuItem, idx) => {\n          let subMenu = null\n          if ('subMenu' in menuItem) {\n            subMenu = (\n              <MenuPage\n                key={menuItem.id || String(menuItem.label)}\n                anchorEl={subMenuAnchorEl}\n                open={isSubMenuOpen && openSubMenuIdx === idx}\n                onClose={() => {\n                  setIsSubMenuOpen(false)\n                  setSubMenuAnchorEl(undefined)\n                }}\n                onMenuItemClick={onMenuItemClick}\n                menuItems={menuItem.subMenu}\n              />\n            )\n          }\n          return subMenu\n        })}\n      </>\n    )\n\n    return top ? (\n      ListContents\n    ) : (\n      // Grow is required for cascading sub-menus\n      <Grow in={open} style={{ transformOrigin: '0 0 0' }} ref={ref}>\n        <Paper\n          elevation={8}\n          ref={paperRef}\n          className={classes.paper}\n          style={{ ...position }}\n        >\n          {ListContents}\n        </Paper>\n      </Grow>\n    )\n  },\n)\n\ninterface MenuProps extends PopoverProps {\n  menuItems: MenuItem[]\n  onMenuItemClick: (\n    event: React.MouseEvent<HTMLLIElement>,\n    callback: (...args: any[]) => void,\n  ) => void\n}\n\nfunction Menu(props: MenuProps) {\n  const { open, onClose, menuItems, onMenuItemClick, ...other } = props\n\n  return (\n    <Popover\n      open={open}\n      onClose={onClose}\n      anchorOrigin={{\n        vertical: 'bottom',\n        horizontal: 'right',\n        ...other.anchorOrigin,\n      }}\n      transformOrigin={{\n        vertical: 'top',\n        horizontal: 'left',\n        ...other.transformOrigin,\n      }}\n      {...other}\n    >\n      <MenuPage\n        open={open}\n        onClose={onClose}\n        menuItems={menuItems}\n        onMenuItemClick={onMenuItemClick}\n        top\n      />\n    </Popover>\n  )\n}\n\nexport default Menu\n","import { types } from 'mobx-state-tree'\n\nimport { nanoid } from '../nanoid'\n\nexport const ElementId = types.optional(types.identifier, () => nanoid())\n\nexport const NoAssemblyRegion = types\n  .model('NoAssemblyRegion', {\n    refName: types.string,\n    start: types.number,\n    end: types.number,\n    reversed: types.optional(types.boolean, false),\n  })\n  .actions(self => ({\n    setRefName(newRefName: string): void {\n      self.refName = newRefName\n    },\n  }))\n\nexport const Region = types.compose(\n  'Region',\n  NoAssemblyRegion,\n  types.model({\n    assemblyName: types.string,\n  }),\n)\n\nexport const LocalPathLocation = types.model('LocalPathLocation', {\n  locationType: types.literal('LocalPathLocation'),\n  localPath: types.string,\n})\n\n// like how blobId is used to get a blob map\nexport const BlobLocation = types.model('BlobLocation', {\n  locationType: types.literal('BlobLocation'),\n  name: types.string,\n  blobId: types.string,\n})\n\nexport const UriLocationRaw = types.model('UriLocation', {\n  locationType: types.literal('UriLocation'),\n  uri: types.string,\n  baseUri: types.maybe(types.string),\n\n  internetAccountId: types.maybe(types.string),\n\n  // auths information (such as tokens) needed for using this resource.\n  // if provided, these must be completely sufficient for using it\n  internetAccountPreAuthorization: types.maybe(\n    types.model('InternetAccountPreAuthorization', {\n      internetAccountType: types.string,\n      authInfo: types.frozen(),\n    }),\n  ),\n})\n\nexport const UriLocation = types.snapshotProcessor(UriLocationRaw, {\n  postProcessor: snap => {\n    // xref https://github.com/mobxjs/mobx-state-tree/issues/1524 for Omit\n    const { baseUri, ...rest } = snap as Omit<typeof snap, symbol>\n    if (!baseUri) {\n      return rest\n    }\n    return snap\n  },\n})\n\nexport const FileLocation = types.snapshotProcessor(\n  types.union(LocalPathLocation, UriLocation, BlobLocation),\n  {\n    // @ts-expect-error\n    preProcessor(snap) {\n      // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n      if (!snap) {\n        return undefined\n      }\n\n      // @ts-expect-error\n      // xref https://github.com/mobxjs/mobx-state-tree/issues/1524 for Omit\n      const { locationType, ...rest } = snap as Omit<typeof snap, symbol>\n      if (!locationType) {\n        // @ts-expect-error\n        const { uri, localPath, blob } = rest\n        let locationType = ''\n        if (uri !== undefined) {\n          locationType = 'UriLocation'\n        } else if (localPath !== undefined) {\n          locationType = 'LocalPathLocation'\n        } else if (blob !== undefined) {\n          locationType = 'BlobLocation'\n        }\n\n        return { ...rest, locationType }\n      }\n      return snap\n    },\n  },\n)\n","import dompurify from 'dompurify'\nimport escapeHTML from 'escape-html'\n\nimport { linkify } from '../util'\n\n// source https://github.com/sindresorhus/html-tags/blob/master/html-tags.json\n// with some random uncommon ones removed. note: we just use this to run the content\n// through dompurify without escaping if we see an htmlTag from this list\n// otherwise we escape angle brackets and things prematurely because it might be\n// something like <TRA> in VCF. Ref #657\nconst htmlTags = [\n  'a',\n  'b',\n  'br',\n  'code',\n  'div',\n  'em',\n  'h1',\n  'h2',\n  'h3',\n  'h4',\n  'h5',\n  'h6',\n  'i',\n  'img',\n  'li',\n  'p',\n  'pre',\n  'span',\n  'small',\n  'strong',\n  'table',\n  'tbody',\n  'sup',\n  'sub',\n  'td',\n  'tfoot',\n  'th',\n  'thead',\n  'tr',\n  'u',\n  'ul',\n]\n\nlet added = false\n\n// adapted from is-html\n// https://github.com/sindresorhus/is-html/blob/master/index.js\nconst full = new RegExp(htmlTags.map(tag => `<${tag}\\\\b[^>]*>`).join('|'), 'i')\nfunction isHTML(str: string) {\n  return full.test(str)\n}\n\n// note this is mocked during testing, see\n// packages/__mocks__/@jbrowse/core/ui/SanitizedHTML something about dompurify\n// behavior causes errors during tests, was seen in\n// products/jbrowse-web/src/tests/Connection.test.tsx test (can delete mock to\n// see)\n//\nexport default function SanitizedHTML({\n  html: pre,\n  className,\n}: {\n  className?: string\n  html: unknown\n}) {\n  // try to add links to the text first\n  const html = linkify(`${pre}`)\n  const value = isHTML(html) ? html : escapeHTML(html)\n  if (!added) {\n    // eslint-disable-next-line react-compiler/react-compiler\n    added = true\n    // see https://github.com/cure53/DOMPurify/issues/317\n    // only have to add this once, and can't do it globally because dompurify\n    // not yet initialized at global scope\n    dompurify.addHook('afterSanitizeAttributes', node => {\n      if (node.tagName === 'A') {\n        node.setAttribute('rel', 'noopener noreferrer')\n        node.setAttribute('target', '_blank')\n      }\n    })\n  }\n\n  return (\n    <span\n      className={className}\n      dangerouslySetInnerHTML={{\n        __html: dompurify.sanitize(value),\n      }}\n    />\n  )\n}\n","import { lazy } from 'react'\n\nimport Plugin from '@jbrowse/core/Plugin'\n\nimport AddConnectionWidgetF from './AddConnectionWidget'\nimport AddTrackWidgetF from './AddTrackWidget'\nimport HierarchicalTrackSelectorWidgetF from './HierarchicalTrackSelectorWidget'\nimport PluginStoreWidgetF from './PluginStoreWidget'\nimport UCSCTrackHubConnectionF from './UCSCTrackHub'\n\nimport type PluginManager from '@jbrowse/core/PluginManager'\n\nconst AssemblyManager = lazy(() => import('./AssemblyManager'))\n\nexport default class DataManagementPlugin extends Plugin {\n  name = 'DataManagementPlugin'\n\n  exports = {\n    AssemblyManager,\n  }\n\n  install(pluginManager: PluginManager) {\n    UCSCTrackHubConnectionF(pluginManager)\n    AddTrackWidgetF(pluginManager)\n    HierarchicalTrackSelectorWidgetF(pluginManager)\n    AddConnectionWidgetF(pluginManager)\n    PluginStoreWidgetF(pluginManager)\n  }\n\n  configure(_pluginManager: PluginManager) {}\n}\n\nexport { AssemblyManager }\n\nexport type { AddTrackModel } from './AddTrackWidget/model'\nexport type { HierarchicalTrackSelectorModel } from './HierarchicalTrackSelectorWidget'\n","import { useEffect } from 'react'\n\nimport CascadingMenu from '@jbrowse/core/ui/CascadingMenu'\nimport { IconButton } from '@mui/material'\nimport {\n  bindPopover,\n  bindTrigger,\n  usePopupState,\n} from 'material-ui-popup-state/hooks'\nimport { observer } from 'mobx-react'\n\nimport type { MenuItem } from '@jbrowse/core/ui'\n\nconst CascadingMenuButton = observer(function CascadingMenuButton({\n  children,\n  menuItems,\n  closeAfterItemClick = true,\n  stopPropagation,\n  setOpen,\n  onClick: onClickExtra,\n  ...rest\n}: {\n  children?: React.ReactElement\n  menuItems: MenuItem[]\n  closeAfterItemClick?: boolean\n  stopPropagation?: boolean\n  onClick?: () => void\n  setOpen?: (arg: boolean) => void\n  [key: string]: unknown\n}) {\n  const popupState = usePopupState({\n    popupId: 'viewMenu',\n    variant: 'popover',\n  })\n  const { onClick, onTouchStart, ...rest2 } = bindTrigger(popupState)\n  const { isOpen } = popupState\n  useEffect(() => {\n    setOpen?.(isOpen)\n  }, [isOpen, setOpen])\n\n  return (\n    <>\n      <IconButton\n        onClick={event => {\n          if (stopPropagation) {\n            event.stopPropagation()\n          }\n          onClick(event)\n          onClickExtra?.()\n        }}\n        onTouchStart={event => {\n          if (stopPropagation) {\n            event.stopPropagation()\n          }\n          onTouchStart(event)\n          onClickExtra?.()\n        }}\n        {...rest2}\n        {...rest}\n        disabled={menuItems.length === 0}\n      >\n        {children}\n      </IconButton>\n      <CascadingMenu\n        {...bindPopover(popupState)}\n        onMenuItemClick={(_: unknown, callback: () => void) => {\n          callback()\n        }}\n        menuItems={menuItems}\n        closeAfterItemClick={closeAfterItemClick}\n        popupState={popupState}\n      />\n    </>\n  )\n})\n\nexport default CascadingMenuButton\n","type LogoVariant = 'color' | 'black' | 'white'\n\ninterface LogoProps {\n  variant?: LogoVariant\n}\n\nfunction getColors(variant?: LogoVariant) {\n  if (variant === 'black') {\n    return {\n      midnight: '#808080',\n      forrest: '#666666',\n      grape: '#4d4d4d',\n      mandarin: '#333333',\n      gray: '#1a1a1a',\n    }\n  }\n  if (variant === 'white') {\n    return {\n      midnight: '#ffffff',\n      forrest: '#e6e6e6',\n      grape: '#cccccc',\n      mandarin: '#b3b3b3',\n      gray: '#999999',\n    }\n  }\n  return {\n    midnight: '#0d233f',\n    forrest: '#135560',\n    grape: '#721e63',\n    mandarin: '#ffb11d',\n    gray: '#dadada',\n  }\n}\n\nexport function Logomark({ variant }: LogoProps) {\n  return (\n    <svg viewBox=\"0 0 175 175\">\n      <Icon variant={variant} />\n    </svg>\n  )\n}\n\nexport function LogoFull({ variant }: LogoProps) {\n  return (\n    <svg viewBox=\"0 0 641 175\">\n      <Text variant={variant} />\n      <Icon variant={variant} />\n    </svg>\n  )\n}\n\nfunction Icon({ variant }: LogoProps) {\n  const colors = getColors(variant)\n  return (\n    <>\n      <path\n        style={{ fill: colors.midnight }}\n        d=\"M120.5,57.5c.168,0,.333.012.5.013V40.506c-.167,0-.333-.006-.5-.006a98.325,98.325,0,0,0-77.4,37.565q-2.664,3.378-5.023,6.994l14.206,9.327Q54.043,91.709,56,89.179A81.363,81.363,0,0,1,120.5,57.5Z\"\n      />\n      <path\n        style={{ fill: colors.forrest }}\n        d=\"M148.668,86.223c.308.133.6.283.908.42l6.746-15.618c-.153-.067-.3-.143-.454-.21a81.36,81.36,0,0,0-71.777,3.5q-2.8,1.544-5.469,3.309l9.249,14.054A63.93,63.93,0,0,1,148.668,86.223Z\"\n      />\n      <path\n        style={{ fill: colors.grape }}\n        d=\"M170.894,109.37A63.929,63.929,0,0,0,113.4,88.861l2.336,15.474a48.456,48.456,0,0,1,44.322,15.42c.111.125.214.255.324.381l11.16-10C171.323,109.879,171.118,109.62,170.894,109.37Z\"\n      />\n      <path\n        style={{ fill: colors.mandarin }}\n        d=\"M150.921,150.314c.04.163.07.326.107.489l16.509-4.058c-.039-.163-.067-.326-.107-.489A48.457,48.457,0,0,0,135.575,111.8l-5.515,15.591A32.466,32.466,0,0,1,150.921,150.314Z\"\n      />\n      <path\n        style={{ fill: colors.gray }}\n        d=\"M134.1,138.129l-9.779,13.213a32.486,32.486,0,0,1,7.823,14.463l15.147.852c.012-.166.032-.331.041-.5A32.464,32.464,0,0,0,134.1,138.129Z\"\n      />\n    </>\n  )\n}\n\nfunction Text({ variant }: LogoProps) {\n  const colors = getColors(variant)\n  return (\n    <g\n      aria-label=\"JBrowse\"\n      transform=\"translate(213.084 144.241)\"\n      style={{ fill: colors.midnight }}\n    >\n      <path d=\"m 26.355,-71.505 v 54.075 2.835 q 0,6.825 -0.42,10.185 -0.735,5.67 -2.835,9.135 -3.255,5.355 -8.505,8.4 -4.83,2.73 -11.55,3.57 L 1.47,11.76 Q 7.35,10.185 9.24,4.2 10.605,-0.105 10.605,-9.975 v -5.565 -55.965 q 1.785,0 4.62,0.315 2.835,0.21 3.255,0.21 1.785,0 2.94,-0.105 4.515,-0.42 4.935,-0.42 z\" />\n      <path d=\"m 60.68836,-65.415 v 24.78 h 3.255 q 2.94,0 4.935,-0.525 2.1,-0.525 3.885,-2.1 2.31,-1.995 3.36,-4.83 1.155,-2.835 1.155,-6.09 0,-5.565 -2.94,-8.61 -2.94,-3.045 -8.295,-3.045 -2.52,0 -5.355,0.42 z m 0,30.87 V -6.09 h 5.25 q 4.725,0 8.505,-3.675 3.885,-3.78 3.885,-10.08 0,-8.19 -4.62,-11.655 -4.095,-3.045 -13.02,-3.045 z M 44.93836,0 v -71.505 h 27.09 q 9.135,0 14.385,3.255 6.51,3.99 6.51,12.6 0,7.035 -5.25,11.655 -4.62,4.095 -11.97,5.145 v 0.945 q 7.56,0.735 12.285,3.99 6.615,4.62 6.615,13.335 0,10.185 -7.98,15.75 -6.93,4.83 -17.43,4.83 z\" />\n      <path d=\"M 109.44281,0.525 V -50.4 q 1.785,0.21 3.99,0.42 2.31,0.105 3.255,0.105 2.31,0 4.2,-0.21 1.89,-0.21 3.045,-0.315 v 13.02 q 1.89,-6.51 5.46,-9.87 4.41,-4.095 11.655,-4.095 -0.315,2.73 -0.42,6.825 -0.105,3.99 -0.105,7.455 l -0.945,0.84 q -0.945,-0.735 -2.415,-1.05 -1.47,-0.315 -2.94,-0.315 -3.57,0 -6.195,1.89 -2.52,1.785 -3.465,5.04 -0.42,1.155 -0.525,3.15 -0.105,1.89 -0.105,4.515 v 4.515 19.005 q -1.785,-0.21 -2.625,-0.21 -3.675,-0.315 -4.62,-0.315 -2.31,0 -4.2,0.21 -1.89,0.21 -3.045,0.315 z\" />\n      <path d=\"m 173.77337,1.47 q -11.655,0 -18.585,-6.825 -6.93,-6.825 -6.93,-18.48 0,-12.6 6.72,-20.055 6.825,-7.455 18.9,-7.455 11.97,0 18.9,6.72 6.93,6.72 6.93,18.48 0,12.285 -6.72,19.74 -7.14,7.875 -19.215,7.875 z m 0.735,-48.09 q -5.88,0 -8.505,6.51 -2.205,5.565 -2.205,15.96 0,8.19 1.47,12.915 2.415,7.98 8.505,7.98 5.565,0 8.19,-7.875 2.205,-6.51 2.205,-16.695 0,-8.505 -2.1,-13.23 -2.52,-5.565 -7.56,-5.565 z\" />\n      <path d=\"m 222.03563,-50.4 10.5,36.015 q 3.675,-11.235 5.67,-17.85 2.415,-8.085 5.04,-18.165 1.05,0.105 3.045,0.315 2.1,0.21 2.835,0.21 1.995,0 3.15,-0.105 1.26,-0.21 2.73,-0.42 l 10.71,36.015 q 5.88,-17.43 10.71,-36.015 l 4.2,0.315 4.095,-0.315 q -5.145,13.125 -9.135,24.57 -5.04,14.28 -8.505,26.355 -1.89,-0.21 -3.36,-0.42 -1.365,-0.105 -2.205,-0.105 -1.89,0 -3.36,0.21 -1.365,0.21 -2.31,0.315 l -10.605,-34.755 q -4.41,13.65 -6.72,21.105 -2.31,7.35 -4.095,13.65 -1.89,-0.21 -3.36,-0.42 -1.365,-0.105 -2.31,-0.105 -1.995,0 -3.465,0.21 -1.365,0.21 -2.31,0.315 -3.78,-12.81 -5.04,-17.01 -2.205,-7.245 -5.46,-17.01 -2.835,-8.4 -5.88,-16.905 1.575,0 4.305,0.315 2.73,0.21 3.36,0.21 1.47,0 4.305,-0.21 2.835,-0.315 3.465,-0.315 z\" />\n      <path d=\"m 292.84172,-12.81 h 2.625 q 1.47,4.095 4.62,6.51 3.15,2.415 7.35,2.415 2.94,0 5.46,-1.785 2.625,-1.89 2.625,-4.62 0,-3.885 -6.195,-6.615 -10.395,-4.62 -11.655,-5.46 -6.405,-4.515 -6.405,-12.285 0,-7.77 5.25,-12.18 5.25,-4.515 12.81,-4.515 3.99,0 8.085,1.365 4.095,1.26 7.14,3.57 l -2.52,9.24 h -2.94 q -0.63,-3.57 -3.57,-6.195 -2.835,-2.625 -6.405,-2.625 -3.15,0 -5.46,1.575 -2.31,1.47 -2.31,4.515 0,3.885 6.405,6.51 10.185,4.095 11.865,5.25 6.405,4.41 6.405,12.81 0,7.455 -5.46,12.18 -5.355,4.62 -14.805,4.62 -8.19,0 -14.49,-4.305 z\" />\n      <path d=\"m 349.61228,-29.925 h 15.54 q 0,-6.51 -1.05,-10.395 -1.68,-6.3 -5.88,-6.3 -5.04,0 -7.14,6.195 -1.47,4.305 -1.47,10.5 z m 30.03,5.04 h -30.03 q 0,9.135 3.045,13.86 3.57,5.67 11.55,5.67 3.255,0 6.405,-1.26 3.15,-1.26 5.88,-3.465 l 1.26,0.945 -2.31,5.88 q -6.72,4.725 -15.015,4.725 -12.915,0 -19.635,-7.245 -6.72,-7.245 -6.72,-20.37 0,-11.235 6.405,-18.165 6.51,-7.035 17.64,-7.035 11.655,0 16.905,7.56 4.62,6.615 4.62,18.9 z\" />\n    </g>\n  )\n}\n","import { Suspense, lazy, useState } from 'react'\n\nimport RefreshIcon from '@mui/icons-material/Refresh'\nimport ReportIcon from '@mui/icons-material/Report'\nimport { IconButton, Tooltip } from '@mui/material'\nimport { makeStyles } from 'tss-react/mui'\n\nimport RedErrorMessageBox from './RedErrorMessageBox'\n\n// lazies\nconst ErrorMessageStackTraceDialog = lazy(\n  () => import('./ErrorMessageStackTraceDialog'),\n)\n\nconst useStyles = makeStyles()(theme => ({\n  bg: {\n    background: theme.palette.divider,\n    border: '1px solid black',\n    margin: 20,\n  },\n  iconFloat: {\n    float: 'right',\n    marginLeft: 100,\n  },\n}))\n\nfunction parseError(str: string) {\n  let snapshotError = ''\n  const findStr = 'is not assignable'\n  const idx = str.indexOf(findStr)\n  if (idx !== -1) {\n    const trim = str.slice(0, idx + findStr.length)\n    // best effort to make a better error message than the default\n    // mobx-state-tree\n\n    // case 1. element has a path\n    const match = /.*at path \"(.*)\" snapshot `(.*)` is not assignable/m.exec(\n      trim,\n    )\n    if (match) {\n      str = `Failed to load element at ${match[1]}...Failed element had snapshot`\n      snapshotError = match[2]!\n    }\n\n    // case 2. element has no path\n    const match2 = /.*snapshot `(.*)` is not assignable/.exec(trim)\n    if (match2) {\n      str = 'Failed to load element...Failed element had snapshot'\n      snapshotError = match2[1]!\n    }\n  }\n  return snapshotError\n}\n\nfunction ErrorButtons({\n  error,\n  onReset,\n}: {\n  error: unknown\n  onReset?: () => void\n}) {\n  const { classes } = useStyles()\n  const [showStack, setShowStack] = useState(false)\n  return (\n    <div className={classes.iconFloat}>\n      {typeof error === 'object' && error && 'stack' in error ? (\n        <Tooltip title=\"Get stack trace\">\n          <IconButton\n            onClick={() => {\n              setShowStack(true)\n            }}\n            color=\"primary\"\n          >\n            <ReportIcon />\n          </IconButton>\n        </Tooltip>\n      ) : null}\n      {onReset ? (\n        <Tooltip title=\"Retry\">\n          <IconButton onClick={onReset} color=\"primary\">\n            <RefreshIcon />\n          </IconButton>\n        </Tooltip>\n      ) : null}\n      {showStack ? (\n        <Suspense fallback={null}>\n          <ErrorMessageStackTraceDialog\n            error={error}\n            onClose={() => {\n              setShowStack(false)\n            }}\n          />\n        </Suspense>\n      ) : null}\n    </div>\n  )\n}\n\nfunction ErrorMessage({\n  error,\n  onReset,\n}: {\n  error: unknown\n  onReset?: () => void\n}) {\n  const { classes } = useStyles()\n  const str = `${error}`\n  const str2 = str.indexOf('expected an instance of')\n  const str3 = str2 !== -1 ? str.slice(0, str2) : str\n  const snapshotError = parseError(str)\n  return (\n    <RedErrorMessageBox>\n      {str3.slice(0, 10000)}\n      <ErrorButtons error={error} onReset={onReset} />\n      {snapshotError ? (\n        <pre className={classes.bg}>\n          {JSON.stringify(JSON.parse(snapshotError), null, 2)}\n        </pre>\n      ) : null}\n    </RedErrorMessageBox>\n  )\n}\n\nexport default ErrorMessage\n","// vendored from quick-lru@6.1.1, didn't like being compiled as a 'pure-esm' nodejs dependency\n// the license is reproduced below https://github.com/sindresorhus/quick-lru/blob/main/license\n// MIT License\n\n// Copyright (c) Sindre Sorhus <sindresorhus@gmail.com> (https://sindresorhus.com)\n\n// Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\n// The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\nexport default class QuickLRU extends Map {\n  constructor(options = {}) {\n    super()\n\n    if (!(options.maxSize && options.maxSize > 0)) {\n      throw new TypeError('`maxSize` must be a number greater than 0')\n    }\n\n    if (typeof options.maxAge === 'number' && options.maxAge === 0) {\n      throw new TypeError('`maxAge` must be a number greater than 0')\n    }\n\n    // TODO: Use private class fields when ESLint supports them.\n    this.maxSize = options.maxSize\n    this.maxAge = options.maxAge || Number.POSITIVE_INFINITY\n    this.onEviction = options.onEviction\n    this.cache = new Map()\n    this.oldCache = new Map()\n    this._size = 0\n  }\n\n  // TODO: Use private class methods when targeting Node.js 16.\n  _emitEvictions(cache) {\n    if (typeof this.onEviction !== 'function') {\n      return\n    }\n\n    for (const [key, item] of cache) {\n      this.onEviction(key, item.value)\n    }\n  }\n\n  _deleteIfExpired(key, item) {\n    if (typeof item.expiry === 'number' && item.expiry <= Date.now()) {\n      if (typeof this.onEviction === 'function') {\n        this.onEviction(key, item.value)\n      }\n\n      return this.delete(key)\n    }\n\n    return false\n  }\n\n  _getOrDeleteIfExpired(key, item) {\n    const deleted = this._deleteIfExpired(key, item)\n    if (!deleted) {\n      return item.value\n    }\n  }\n\n  _getItemValue(key, item) {\n    return item.expiry ? this._getOrDeleteIfExpired(key, item) : item.value\n  }\n\n  _peek(key, cache) {\n    const item = cache.get(key)\n\n    return this._getItemValue(key, item)\n  }\n\n  _set(key, value) {\n    this.cache.set(key, value)\n    this._size++\n\n    if (this._size >= this.maxSize) {\n      this._size = 0\n      this._emitEvictions(this.oldCache)\n      this.oldCache = this.cache\n      this.cache = new Map()\n    }\n  }\n\n  _moveToRecent(key, item) {\n    this.oldCache.delete(key)\n    this._set(key, item)\n  }\n\n  *_entriesAscending() {\n    for (const item of this.oldCache) {\n      const [key, value] = item\n      if (!this.cache.has(key)) {\n        const deleted = this._deleteIfExpired(key, value)\n        if (!deleted) {\n          yield item\n        }\n      }\n    }\n\n    for (const item of this.cache) {\n      const [key, value] = item\n      const deleted = this._deleteIfExpired(key, value)\n      if (!deleted) {\n        yield item\n      }\n    }\n  }\n\n  get(key) {\n    if (this.cache.has(key)) {\n      const item = this.cache.get(key)\n\n      return this._getItemValue(key, item)\n    }\n\n    if (this.oldCache.has(key)) {\n      const item = this.oldCache.get(key)\n      if (!this._deleteIfExpired(key, item)) {\n        this._moveToRecent(key, item)\n        return item.value\n      }\n    }\n  }\n\n  set(key, value, { maxAge = this.maxAge } = {}) {\n    const expiry =\n      typeof maxAge === 'number' && maxAge !== Number.POSITIVE_INFINITY\n        ? Date.now() + maxAge\n        : undefined\n    if (this.cache.has(key)) {\n      this.cache.set(key, {\n        value,\n        expiry,\n      })\n    } else {\n      this._set(key, { value, expiry })\n    }\n  }\n\n  has(key) {\n    if (this.cache.has(key)) {\n      return !this._deleteIfExpired(key, this.cache.get(key))\n    }\n\n    if (this.oldCache.has(key)) {\n      return !this._deleteIfExpired(key, this.oldCache.get(key))\n    }\n\n    return false\n  }\n\n  peek(key) {\n    if (this.cache.has(key)) {\n      return this._peek(key, this.cache)\n    }\n\n    if (this.oldCache.has(key)) {\n      return this._peek(key, this.oldCache)\n    }\n  }\n\n  delete(key) {\n    const deleted = this.cache.delete(key)\n    if (deleted) {\n      this._size--\n    }\n\n    return this.oldCache.delete(key) || deleted\n  }\n\n  clear() {\n    this.cache.clear()\n    this.oldCache.clear()\n    this._size = 0\n  }\n\n  resize(newSize) {\n    if (!(newSize && newSize > 0)) {\n      throw new TypeError('`maxSize` must be a number greater than 0')\n    }\n\n    const items = [...this._entriesAscending()]\n    const removeCount = items.length - newSize\n    if (removeCount < 0) {\n      this.cache = new Map(items)\n      this.oldCache = new Map()\n      this._size = items.length\n    } else {\n      if (removeCount > 0) {\n        this._emitEvictions(items.slice(0, removeCount))\n      }\n\n      this.oldCache = new Map(items.slice(removeCount))\n      this.cache = new Map()\n      this._size = 0\n    }\n\n    this.maxSize = newSize\n  }\n\n  *keys() {\n    for (const [key] of this) {\n      yield key\n    }\n  }\n\n  *values() {\n    for (const [, value] of this) {\n      yield value\n    }\n  }\n\n  *[Symbol.iterator]() {\n    for (const item of this.cache) {\n      const [key, value] = item\n      const deleted = this._deleteIfExpired(key, value)\n      if (!deleted) {\n        yield [key, value.value]\n      }\n    }\n\n    for (const item of this.oldCache) {\n      const [key, value] = item\n      if (!this.cache.has(key)) {\n        const deleted = this._deleteIfExpired(key, value)\n        if (!deleted) {\n          yield [key, value.value]\n        }\n      }\n    }\n  }\n\n  *entriesDescending() {\n    let items = [...this.cache]\n    for (let i = items.length - 1; i >= 0; --i) {\n      const item = items[i]\n      const [key, value] = item\n      const deleted = this._deleteIfExpired(key, value)\n      if (!deleted) {\n        yield [key, value.value]\n      }\n    }\n\n    items = [...this.oldCache]\n    for (let i = items.length - 1; i >= 0; --i) {\n      const item = items[i]\n      const [key, value] = item\n      if (!this.cache.has(key)) {\n        const deleted = this._deleteIfExpired(key, value)\n        if (!deleted) {\n          yield [key, value.value]\n        }\n      }\n    }\n  }\n\n  *entriesAscending() {\n    for (const [key, value] of this._entriesAscending()) {\n      yield [key, value.value]\n    }\n  }\n\n  get size() {\n    if (!this._size) {\n      return this.oldCache.size\n    }\n\n    let oldCacheSize = 0\n    for (const key of this.oldCache.keys()) {\n      if (!this.cache.has(key)) {\n        oldCacheSize++\n      }\n    }\n\n    return Math.min(this._size + oldCacheSize, this.maxSize)\n  }\n\n  entries() {\n    return this.entriesAscending()\n  }\n\n  forEach(callbackFunction, thisArgument = this) {\n    for (const [key, value] of this.entriesAscending()) {\n      callbackFunction.call(thisArgument, value, key, this)\n    }\n  }\n\n  get [Symbol.toStringTag]() {\n    return JSON.stringify([...this.entriesAscending()])\n  }\n}\n","import { ElementId } from '@jbrowse/core/util/types/mst'\nimport { getParent, isStateTreeNode, types } from 'mobx-state-tree'\n\nimport type { BaseRootModelType } from '../RootModel/BaseRootModel'\nimport type PluginManager from '@jbrowse/core/PluginManager'\nimport type { BaseAssemblyConfigSchema } from '@jbrowse/core/assemblyManager'\nimport type { AnyConfigurationSchemaType } from '@jbrowse/core/configuration'\nimport type { IAnyStateTreeNode, Instance } from 'mobx-state-tree'\n\n/**\n * #stateModel BaseSessionModel\n *\n * base session shared by all JBrowse products. Be careful what you include\n * here, everything will use it.\n */\nexport function BaseSessionModel<\n  ROOT_MODEL_TYPE extends BaseRootModelType,\n  JB_CONFIG_SCHEMA extends AnyConfigurationSchemaType,\n>(_pluginManager: PluginManager) {\n  return types\n    .model({\n      /**\n       * #property\n       */\n      id: ElementId,\n      /**\n       * #property\n       */\n      name: types.string,\n      /**\n       * #property\n       */\n      margin: 0,\n    })\n    .volatile(() => ({\n      /**\n       * #volatile\n       * this is the globally \"selected\" object. can be anything. code that\n       * wants to deal with this should examine it to see what kind of thing it\n       * is.\n       */\n      selection: undefined as unknown,\n      /**\n       * #volatile\n       * this is the globally \"hovered\" object. can be anything. code that\n       * wants to deal with this should examine it to see what kind of thing it\n       * is.\n       */\n      hovered: undefined as unknown,\n    }))\n    .views(self => ({\n      /**\n       * #getter\n       */\n      get root() {\n        return getParent<ROOT_MODEL_TYPE>(self)\n      },\n    }))\n    .views(self => ({\n      /**\n       * #getter\n       */\n      get jbrowse() {\n        return self.root.jbrowse\n      },\n      /**\n       * #getter\n       */\n      get rpcManager() {\n        return self.root.rpcManager\n      },\n      /**\n       * #getter\n       */\n      get configuration(): Instance<JB_CONFIG_SCHEMA> {\n        return this.jbrowse.configuration\n      },\n      /**\n       * #getter\n       */\n      get adminMode() {\n        return self.root.adminMode\n      },\n\n      /**\n       * #getter\n       */\n      get textSearchManager() {\n        return self.root.textSearchManager\n      },\n    }))\n    .views(self => ({\n      /**\n       * #getter\n       */\n      get assemblies(): Instance<BaseAssemblyConfigSchema>[] {\n        return self.jbrowse.assemblies\n      },\n    }))\n    .actions(self => ({\n      /**\n       * #action\n       * set the global selection, i.e. the globally-selected object. can be a\n       * feature, a view, just about anything\n       */\n      setSelection(thing: unknown) {\n        self.selection = thing\n      },\n\n      /**\n       * #action\n       * clears the global selection\n       */\n      clearSelection() {\n        self.selection = undefined\n      },\n      /**\n       * #action\n       */\n      setHovered(thing: unknown) {\n        self.hovered = thing\n      },\n    }))\n}\n\n/** Session mixin MST type for the most basic session */\nexport type BaseSessionType = ReturnType<typeof BaseSessionModel>\n\n/** Instance of the most basic possible session */\nexport type BaseSession = Instance<BaseSessionType>\n\n/** Type guard for BaseSession */\nexport function isBaseSession(thing: IAnyStateTreeNode): thing is BaseSession {\n  return 'id' in thing && 'name' in thing && 'root' in thing\n}\n\n/** Type guard for whether a thing is JBrowse session */\nexport function isSession(thing: unknown): thing is BaseSession {\n  return isStateTreeNode(thing) && isBaseSession(thing)\n}\n","import { blue, green, grey, orange, red } from '@mui/material/colors'\nimport { createTheme } from '@mui/material/styles'\nimport deepmerge from 'deepmerge'\n\nimport type { ThemeOptions } from '@mui/material/styles'\nimport type {\n  PaletteAugmentColorOptions,\n  PaletteColor,\n  PaletteColorOptions,\n} from '@mui/material/styles/createPalette'\n\ntype MaybePaletteColor = PaletteColor | undefined\ntype Frames = [\n  null,\n  MaybePaletteColor,\n  MaybePaletteColor,\n  MaybePaletteColor,\n  MaybePaletteColor,\n  MaybePaletteColor,\n  MaybePaletteColor,\n]\ndeclare module '@mui/material/styles/createPalette' {\n  interface Palette {\n    tertiary: PaletteColor\n    quaternary: PaletteColor\n    highlight: PaletteColor\n    stopCodon: string\n    startCodon: string\n    insertion: string\n    softclip: string\n    skip: string\n    hardclip: string\n    deletion: string\n    bases: {\n      A: PaletteColor\n      C: PaletteColor\n      G: PaletteColor\n      T: PaletteColor\n    }\n    frames: Frames\n    framesCDS: Frames\n  }\n  interface PaletteOptions {\n    tertiary?: PaletteColorOptions\n    quaternary?: PaletteColorOptions\n    highlight?: PaletteColorOptions\n    stopCodon?: string\n    startCodon?: string\n    hardclip?: string\n    softclip?: string\n    insertion?: string\n    skip?: string\n    deletion?: string\n    bases?: {\n      A?: PaletteColorOptions\n      C?: PaletteColorOptions\n      G?: PaletteColorOptions\n      T?: PaletteColorOptions\n    }\n    framesCDS?: Frames\n    frames?: Frames\n  }\n}\n\nconst refTheme = createTheme()\nconst midnight = '#0D233F'\nconst grape = '#721E63'\nconst forest = refTheme.palette.augmentColor({ color: { main: '#135560' } })\nconst mandarin = refTheme.palette.augmentColor({ color: { main: '#FFB11D' } })\nconst lightgrey = refTheme.palette.augmentColor({ color: { main: '#aaa' } })\nconst bases = {\n  A: refTheme.palette.augmentColor({ color: green }),\n  C: refTheme.palette.augmentColor({ color: blue }),\n  G: refTheme.palette.augmentColor({ color: orange }),\n  T: refTheme.palette.augmentColor({ color: red }),\n}\nconst framesCDS = [\n  null,\n  refTheme.palette.augmentColor({ color: { main: '#FF8080' } }),\n  refTheme.palette.augmentColor({ color: { main: '#80FF80' } }),\n  refTheme.palette.augmentColor({ color: { main: '#8080FF' } }),\n  refTheme.palette.augmentColor({ color: { main: '#8080FF' } }),\n  refTheme.palette.augmentColor({ color: { main: '#80FF80' } }),\n  refTheme.palette.augmentColor({ color: { main: '#FF8080' } }),\n] as Frames\nconst frames = [\n  null,\n  refTheme.palette.augmentColor({ color: { main: '#8f8f8f' } }),\n  refTheme.palette.augmentColor({ color: { main: '#adadad' } }),\n  refTheme.palette.augmentColor({ color: { main: '#d8d8d8' } }),\n  refTheme.palette.augmentColor({ color: { main: '#d8d8d8' } }),\n  refTheme.palette.augmentColor({ color: { main: '#adadad' } }),\n  refTheme.palette.augmentColor({ color: { main: '#8f8f8f' } }),\n] as Frames\nconst stopCodon = '#e22'\nconst startCodon = '#3e3'\nconst insertion = '#800080'\nconst deletion = '#808080'\nconst hardclip = '#f00'\nconst softclip = '#00f'\nconst skip = '#97b8c9'\n\nconst defaults = {\n  quaternary: mandarin,\n  highlight: mandarin,\n  stopCodon,\n  startCodon,\n  insertion,\n  deletion,\n  softclip,\n  hardclip,\n  bases,\n  frames,\n  framesCDS,\n  skip,\n}\n\nfunction stockTheme() {\n  return {\n    palette: {\n      ...defaults,\n      mode: undefined,\n      primary: { main: midnight },\n      secondary: { main: grape },\n      tertiary: forest,\n    },\n    components: {\n      MuiLink: {\n        styleOverrides: {\n          // the default link color uses theme.palette.primary.main which is\n          // very bad with dark mode+midnight primary\n          root: ({ theme }) => ({\n            color: theme.palette.tertiary.main,\n          }),\n        },\n      },\n    },\n  } satisfies ThemeOptions\n}\n\nfunction getDefaultTheme() {\n  return {\n    ...stockTheme(),\n    name: 'Default (from config)',\n  }\n}\n\nfunction getLightStockTheme() {\n  return {\n    ...stockTheme(),\n    name: 'Light (stock)',\n  }\n}\n\nfunction getDarkStockTheme() {\n  return {\n    name: 'Dark (stock)',\n    palette: {\n      ...defaults,\n      mode: 'dark',\n    },\n    components: {\n      MuiAppBar: {\n        defaultProps: {\n          enableColorOnDark: true,\n        },\n        styleOverrides: {\n          root: ({ theme }) => theme.palette.primary.main,\n        },\n      },\n    },\n  } satisfies ThemeOptions & { name: string }\n}\n\nfunction getDarkMinimalTheme() {\n  return {\n    name: 'Dark (minimal)',\n    palette: {\n      ...defaults,\n      mode: 'dark' as const,\n      primary: { main: grey[700] },\n      secondary: { main: grey[800] },\n      tertiary: refTheme.palette.augmentColor({ color: { main: grey[900] } }),\n    },\n  } satisfies ThemeOptions & { name: string }\n}\n\nfunction getMinimalTheme() {\n  return {\n    name: 'Light (minimal)',\n    palette: {\n      ...defaults,\n      primary: { main: grey[900] },\n      secondary: { main: grey[800] },\n      tertiary: refTheme.palette.augmentColor({ color: { main: grey[900] } }),\n    },\n  } satisfies ThemeOptions & { name: string }\n}\n\nexport const defaultThemes = {\n  default: getDefaultTheme(),\n  lightStock: getLightStockTheme(),\n  lightMinimal: getMinimalTheme(),\n  darkMinimal: getDarkMinimalTheme(),\n  darkStock: getDarkStockTheme(),\n} as ThemeMap\n\nfunction overwriteArrayMerge(_: unknown, sourceArray: unknown[]) {\n  return sourceArray\n}\n\nexport function createJBrowseBaseTheme(theme?: ThemeOptions): ThemeOptions {\n  const themeP: ThemeOptions = {\n    palette: theme?.palette,\n    typography: {\n      fontSize: 12,\n    },\n    spacing: 4,\n    components: {\n      MuiTooltip: {\n        styleOverrides: {\n          tooltip: {\n            fontSize: 12,\n          },\n        },\n      },\n      MuiButton: {\n        defaultProps: {\n          size: 'small' as const,\n        },\n        styleOverrides: {\n          // the default button, especially when not using variant=contained,\n          // uses theme.palette.primary.main for text which is very bad with\n          // dark mode+midnight primary\n          //\n          // keeps text secondary for darkmode, uses\n          // a text-like coloring to ensure contrast\n          // xref https://stackoverflow.com/a/72546130/2129219\n          root: ({ theme }) =>\n            theme.palette.mode === 'dark'\n              ? {\n                  color: theme.palette.text.primary,\n                }\n              : undefined,\n        },\n      },\n      MuiAccordion: {\n        defaultProps: {\n          disableGutters: true,\n          slotProps: {\n            transition: {\n              timeout: 150,\n              unmountOnExit: true,\n            },\n          },\n        },\n      },\n      MuiFilledInput: {\n        defaultProps: {\n          margin: 'dense' as const,\n        },\n      },\n      MuiFormControl: {\n        defaultProps: {\n          margin: 'dense' as const,\n          size: 'small' as const,\n        },\n      },\n      MuiFormHelperText: {\n        defaultProps: {\n          margin: 'dense' as const,\n        },\n      },\n\n      MuiIconButton: {\n        defaultProps: {\n          size: 'small' as const,\n        },\n      },\n      MuiInputBase: {\n        defaultProps: {\n          margin: 'dense' as const,\n        },\n      },\n      MuiAutocomplete: {\n        defaultProps: {\n          size: 'small' as const,\n        },\n      },\n      MuiInputLabel: {\n        defaultProps: {\n          margin: 'dense' as const,\n        },\n      },\n      MuiToolbar: {\n        defaultProps: {\n          variant: 'dense' as const,\n        },\n      },\n      MuiListItem: {\n        defaultProps: {\n          dense: true,\n        },\n      },\n      MuiOutlinedInput: {\n        defaultProps: {\n          margin: 'dense' as const,\n        },\n      },\n      MuiFab: {\n        defaultProps: {\n          size: 'small' as const,\n        },\n        styleOverrides: {\n          secondary: {\n            // @ts-expect-error\n            backgroundColor: theme?.palette?.quaternary?.main,\n          },\n        },\n      },\n      MuiTable: {\n        defaultProps: {\n          size: 'small' as const,\n        },\n      },\n      MuiPopover: {\n        defaultProps: {\n          transitionDuration: 0,\n        },\n      },\n      MuiMenu: {\n        defaultProps: {\n          transitionDuration: 0,\n        },\n      },\n      MuiMenuItem: {\n        defaultProps: {\n          dense: true,\n        },\n      },\n\n      MuiTextField: {\n        defaultProps: {\n          margin: 'dense' as const,\n          variant: 'standard' as const,\n        },\n      },\n      MuiLink: {\n        styleOverrides: {\n          // the default link color uses theme.palette.primary.main which is\n          // very bad with dark mode+midnight primary\n          root: ({ theme }) => ({\n            color: theme.palette.text.secondary,\n          }),\n        },\n      },\n      MuiCheckbox: {\n        styleOverrides: {\n          // the default checkbox-when-checked color uses\n          // theme.palette.primary.main which is very bad with dark\n          // mode+midnight primary\n          //\n          // keeps the forest-green checkbox by default but for darkmode, uses\n          // a text-like coloring to ensure contrast xref\n          // https://stackoverflow.com/a/72546130/2129219\n          root: ({ theme }) =>\n            theme.palette.mode === 'dark'\n              ? {\n                  color: theme.palette.text.secondary,\n                  '&.Mui-checked': {\n                    color: theme.palette.text.secondary,\n                  },\n                }\n              : undefined,\n        },\n      },\n      MuiRadio: {\n        styleOverrides: {\n          // the default checkbox-when-checked color uses\n          // theme.palette.primary.main which is very bad with dark\n          // mode+midnight primary\n          //\n          // keeps the forest-green checkbox by default but for darkmode, uses\n          // a text-like coloring to ensure contrast\n          // xref https://stackoverflow.com/a/72546130/2129219\n          root: ({ theme }) =>\n            theme.palette.mode === 'dark'\n              ? {\n                  color: theme.palette.text.secondary,\n                  '&.Mui-checked': {\n                    color: theme.palette.text.secondary,\n                  },\n                }\n              : undefined,\n        },\n      },\n      MuiFormLabel: {\n        styleOverrides: {\n          // the default checkbox-when-checked color uses\n          // theme.palette.primary.main which is very bad with dark\n          // mode+midnight primary\n          //\n          // keeps the forest-green checkbox by default but for darkmode, uses\n          // a text-like coloring to ensure contrast\n          // xref https://stackoverflow.com/a/72546130/2129219\n          //\n\n          root: ({ theme }) =>\n            theme.palette.mode === 'dark'\n              ? {\n                  color: theme.palette.text.secondary,\n                  '&.Mui-focused': {\n                    color: theme.palette.text.secondary,\n                  },\n                }\n              : undefined,\n        },\n      },\n      MuiAccordionSummary: {\n        styleOverrides: {\n          root: {\n            // @ts-expect-error\n            backgroundColor: theme?.palette?.tertiary?.main,\n          },\n          content: {\n            // @ts-expect-error\n            color: theme?.palette?.tertiary?.contrastText,\n          },\n        },\n      },\n      MuiToggleButtonGroup: {\n        defaultProps: {\n          size: 'small' as const,\n        },\n      },\n    },\n  }\n  return deepmerge(themeP, theme || {}, { arrayMerge: overwriteArrayMerge })\n}\n\ntype ThemeMap = Record<string, ThemeOptions>\n\nexport function createJBrowseTheme(\n  configTheme: ThemeOptions = {},\n  themes = defaultThemes,\n  themeName = 'default',\n) {\n  return createTheme(\n    createJBrowseBaseTheme(\n      themeName === 'default'\n        ? deepmerge(themes.default!, augmentThemeColors(configTheme), {\n            arrayMerge: overwriteArrayMerge,\n          })\n        : addMissingColors(themes[themeName]),\n    ),\n  )\n}\n\n// MUI by default allows strings like '#f00' for primary and secondary and\n// augments them to have light and dark variants but not for anything else, so\n// we augment them here\nfunction augmentThemeColors(theme: ThemeOptions = {}) {\n  for (const entry of ['tertiary', 'quaternary', 'highlight'] as const) {\n    if (theme.palette?.[entry]) {\n      theme = deepmerge(theme, {\n        palette: {\n          [entry]: refTheme.palette.augmentColor(\n            'color' in theme.palette[entry]\n              ? (theme.palette[entry] as PaletteAugmentColorOptions)\n              : { color: theme.palette[entry] },\n          ),\n        },\n      })\n    }\n  }\n  return theme\n}\n\n// adds missing colors to users theme\nfunction addMissingColors(theme: ThemeOptions = {}) {\n  const { palette } = theme\n  return augmentThemeColors(\n    deepmerge(theme, {\n      palette: {\n        quaternary: palette?.quaternary || lightgrey,\n        tertiary: palette?.tertiary || lightgrey,\n        highlight: palette?.highlight || mandarin,\n        insertion: palette?.insertion || insertion,\n        softclip: palette?.softclip || softclip,\n        skip: palette?.skip || skip,\n        hardclip: palette?.hardclip || hardclip,\n        deletion: palette?.deletion || deletion,\n        startCodon: palette?.startCodon || startCodon,\n        stopCodon: palette?.stopCodon || stopCodon,\n      },\n    }),\n  )\n}\n","import { useEffect, useState } from 'react'\n\nimport { MenuItem, TextField } from '@mui/material'\nimport { observer } from 'mobx-react'\nimport { makeStyles } from 'tss-react/mui'\n\nimport { useLocalStorage } from '../util'\n\nimport type { AbstractSessionModel } from '../util'\nimport type { InputProps as IIP, TextFieldProps as TFP } from '@mui/material'\n\nconst useStyles = makeStyles()({\n  importFormEntry: {\n    minWidth: 180,\n  },\n})\n\nconst AssemblySelector = observer(function ({\n  session,\n  onChange,\n  label = 'Assembly',\n  selected,\n  InputProps,\n  TextFieldProps,\n  localStorageKey,\n  helperText = 'Select assembly to view',\n}: {\n  session: AbstractSessionModel\n  label?: string\n  helperText?: string\n  onChange: (arg: string) => void\n  selected?: string\n  localStorageKey?: string\n  InputProps?: IIP\n  TextFieldProps?: TFP\n}) {\n  const { classes } = useStyles()\n  const { assemblyNames, assemblyManager } = session\n\n  // constructs a localstorage key based on host/path/config to help\n  // remember. non-config assists usage with e.g. embedded apps\n  const config = new URLSearchParams(window.location.search).get('config')\n  const [lastSelected, setLastSelected] =\n    typeof jest === 'undefined' && localStorageKey\n      ? useLocalStorage(\n          `lastAssembly-${[\n            window.location.host + window.location.pathname,\n            config,\n            localStorageKey,\n          ].join('-')}`,\n          selected,\n        )\n      : useState(selected)\n\n  const selection = assemblyNames.includes(lastSelected || '')\n    ? lastSelected\n    : selected\n\n  useEffect(() => {\n    if (selection && selection !== selected) {\n      onChange(selection)\n    }\n  }, [selection, onChange, selected])\n\n  const error = assemblyNames.length ? '' : 'No configured assemblies'\n  return (\n    <TextField\n      select\n      data-testid=\"assembly-selector-textfield\"\n      label={label}\n      variant=\"outlined\"\n      helperText={error || helperText}\n      value={selection || ''}\n      onChange={event => {\n        setLastSelected(event.target.value)\n      }}\n      error={!!error}\n      disabled={!!error}\n      className={classes.importFormEntry}\n      {...TextFieldProps}\n      slotProps={{\n        input: InputProps,\n        htmlInput: {\n          'data-testid': 'assembly-selector',\n        },\n      }}\n    >\n      {assemblyNames.map(name => (\n        <MenuItem key={name} value={name}>\n          {assemblyManager.get(name)?.displayName || name}\n        </MenuItem>\n      ))}\n    </TextField>\n  )\n})\n\nexport default AssemblySelector\n","import { useCallback, useEffect, useState } from 'react'\n\n// others\nimport ArrowDropDownIcon from '@mui/icons-material/ArrowDropDown'\nimport {\n  Box,\n  FormGroup,\n  FormHelperText,\n  InputLabel,\n  Menu,\n  MenuItem,\n  ToggleButton,\n  ToggleButtonGroup,\n  Tooltip,\n} from '@mui/material'\nimport { observer } from 'mobx-react'\n\nimport LocalFileChooser from './LocalFileChooser'\nimport UrlChooser from './UrlChooser'\nimport { notEmpty, useLocalStorage } from '../../util'\nimport { isAppRootModel, isUriLocation } from '../../util/types'\n\n// local types\nimport type { BaseInternetAccountModel } from '../../pluggableElementTypes'\nimport type { AbstractRootModel, FileLocation } from '../../util/types'\nimport type { ToggleButtonProps } from '@mui/material'\n\nconst NUM_SHOWN = 2\n\nfunction ToggleButtonWithTooltip(props: ToggleButtonProps) {\n  const { title, children, ...other } = props\n  return (\n    <Tooltip title={title || ''}>\n      <ToggleButton {...other}>{children}</ToggleButton>\n    </Tooltip>\n  )\n}\n\nfunction shorten(str: string, len: number) {\n  if (typeof str === 'string' && str.length > len) {\n    return `${str.slice(0, Math.max(0, len))}`\n  }\n  return str\n}\n\nfunction Inline({ children }: { children: React.ReactNode }) {\n  return <div style={{ display: 'flex', gap: 4 }}>{children}</div>\n}\n\nfunction Box2({ children }: { children: React.ReactNode }) {\n  return (\n    <Box display=\"flex\" flexDirection=\"row\">\n      <Box>{children}</Box>\n    </Box>\n  )\n}\n\nfunction Input(props: {\n  toggleButtonValue: string\n  selectedAccount?: BaseInternetAccountModel\n  inline?: boolean\n  setLocation: (arg: FileLocation) => void\n}) {\n  const { setLocation, inline, toggleButtonValue, selectedAccount } = props\n  return (\n    <>\n      {selectedAccount?.SelectorComponent ? (\n        <selectedAccount.SelectorComponent\n          {...props}\n          setLocation={setLocation}\n        />\n      ) : toggleButtonValue === 'url' ? (\n        <UrlChooser\n          {...props}\n          setLocation={setLocation}\n          label={selectedAccount?.selectorLabel}\n          style={inline ? { margin: 0 } : undefined}\n        />\n      ) : toggleButtonValue === 'file' ? (\n        <LocalFileChooser {...props} />\n      ) : null}\n    </>\n  )\n}\n\nconst FileSelector = observer(function (props: {\n  location?: FileLocation\n  name?: string\n  description?: string\n  inline?: boolean\n  rootModel?: AbstractRootModel\n  setLocation: (param: FileLocation) => void\n  setName?: (str: string) => void\n}) {\n  const { inline, location, name, description, rootModel, setLocation } = props\n  const fileOrUrl = !location || isUriLocation(location) ? 'url' : 'file'\n  const [toggleButtonValue, setToggleButtonValue] = useState(\n    location && 'internetAccountId' in location && location.internetAccountId\n      ? location.internetAccountId\n      : fileOrUrl,\n  )\n  const accounts = isAppRootModel(rootModel)\n    ? rootModel.internetAccounts.filter(\n        f => f.type !== 'HTTPBasicInternetAccount',\n      )\n    : []\n\n  const [recentlyUsedInternetAccounts, setRecentlyUsedInternetAccounts] =\n    useLocalStorage('fileSelector-recentlyUsedInternetAccounts', [] as string[])\n\n  const map = Object.fromEntries(accounts.map(a => [a.internetAccountId, a]))\n  const arr = [...new Set(accounts.map(s => s.internetAccountId))].sort(\n    (a, b) =>\n      recentlyUsedInternetAccounts.indexOf(a) -\n      recentlyUsedInternetAccounts.indexOf(b),\n  )\n  const shownAccounts = arr.slice(0, NUM_SHOWN)\n  const hiddenAccounts = arr.slice(NUM_SHOWN)\n  const [anchorEl, setAnchorEl] = useState<HTMLElement | null>(null)\n  const selectedAccount = map[toggleButtonValue]\n\n  const setLocationWithAccount = useCallback(\n    (location: FileLocation) => {\n      setLocation({\n        ...location,\n        ...(selectedAccount && isUriLocation(location)\n          ? { internetAccountId: selectedAccount.internetAccountId }\n          : {}),\n      })\n    },\n    [setLocation, selectedAccount],\n  )\n\n  useEffect(() => {\n    // if you swap account selection after inputting url\n    if (\n      selectedAccount &&\n      isUriLocation(location) &&\n      location.internetAccountId !== selectedAccount.internetAccountId\n    ) {\n      setLocationWithAccount(location)\n    }\n  }, [location, selectedAccount, setLocationWithAccount])\n\n  const Wrapper = inline ? Inline : Box2\n\n  return (\n    <>\n      <Box display=\"flex\">\n        <InputLabel shrink>{name}</InputLabel>\n      </Box>\n      <FormGroup>\n        <Wrapper>\n          <ToggleButtonGroup\n            value={toggleButtonValue}\n            exclusive\n            size=\"small\"\n            onChange={(_event, newState) => {\n              setRecentlyUsedInternetAccounts([\n                ...new Set(\n                  [newState, ...recentlyUsedInternetAccounts].filter(notEmpty),\n                ),\n              ])\n              if (newState) {\n                setToggleButtonValue(newState)\n              }\n              if (isUriLocation(location)) {\n                setLocationWithAccount(location)\n              }\n            }}\n            aria-label=\"file, url, or account picker\"\n          >\n            {new URLSearchParams(window.location.search).get(\n              'adminKey',\n            ) ? null : (\n              <ToggleButton size=\"small\" value=\"file\" aria-label=\"local file\">\n                File\n              </ToggleButton>\n            )}\n            <ToggleButton size=\"small\" value=\"url\" aria-label=\"url\">\n              URL\n            </ToggleButton>\n            {shownAccounts.map(id => {\n              const { internetAccountId, name, toggleContents } = map[id]!\n              return (\n                <ToggleButtonWithTooltip\n                  key={id}\n                  value={internetAccountId}\n                  title={name}\n                >\n                  {typeof toggleContents === 'string'\n                    ? shorten(toggleContents, 5)\n                    : toggleContents || shorten(name, 5)}\n                </ToggleButtonWithTooltip>\n              )\n            })}\n            {hiddenAccounts.length > 0 ? (\n              // @ts-expect-error\n              <ToggleButton\n                onClick={event => {\n                  setAnchorEl(event.target as HTMLElement)\n                }}\n                selected={false}\n              >\n                More\n                <ArrowDropDownIcon />\n              </ToggleButton>\n            ) : null}\n          </ToggleButtonGroup>\n          {inline ? (\n            <Input\n              {...props}\n              toggleButtonValue={toggleButtonValue}\n              selectedAccount={selectedAccount}\n              setLocation={setLocationWithAccount}\n            />\n          ) : null}\n        </Wrapper>\n        {!inline ? (\n          <Input\n            {...props}\n            toggleButtonValue={toggleButtonValue}\n            selectedAccount={selectedAccount}\n            setLocation={setLocationWithAccount}\n          />\n        ) : null}\n      </FormGroup>\n      <FormHelperText>{description}</FormHelperText>\n      {anchorEl ? (\n        <Menu\n          open\n          anchorEl={anchorEl}\n          anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\n          transformOrigin={{ vertical: 'top', horizontal: 'center' }}\n          onClose={() => {\n            setAnchorEl(null)\n          }}\n        >\n          {hiddenAccounts.map(id => {\n            const { internetAccountId, name } = map[id]!\n            return (\n              <MenuItem\n                key={id}\n                value={internetAccountId}\n                onClick={() => {\n                  setRecentlyUsedInternetAccounts([\n                    ...new Set(\n                      [\n                        internetAccountId,\n                        ...recentlyUsedInternetAccounts,\n                      ].filter(notEmpty),\n                    ),\n                  ])\n\n                  setToggleButtonValue(internetAccountId)\n                  setAnchorEl(null)\n                }}\n              >\n                {name}\n              </MenuItem>\n            )\n          })}\n        </Menu>\n      ) : null}\n    </>\n  )\n})\n\nexport default FileSelector\n","import { useEffect, useRef, useState } from 'react'\n\nimport { drawImageOntoCanvasContext } from '../util/offscreenCanvasPonyfill'\n\nfunction PrerenderedCanvas(props: {\n  width: number\n  height: number\n  highResolutionScaling?: number\n  style?: any\n  imageData?: any\n  showSoftClip?: boolean\n  blockKey?: string\n}) {\n  const {\n    width,\n    height,\n    highResolutionScaling = 1,\n    style = {},\n    imageData,\n    blockKey,\n    showSoftClip,\n  } = props\n  const [done, setDone] = useState(false)\n\n  const featureCanvas = useRef<HTMLCanvasElement>(null)\n\n  useEffect(() => {\n    if (!imageData) {\n      return\n    }\n    const canvas = featureCanvas.current\n    if (!canvas) {\n      return\n    }\n    const context = canvas.getContext('2d')\n    if (!context) {\n      return\n    }\n    drawImageOntoCanvasContext(imageData, context)\n    setDone(true)\n  }, [imageData])\n\n  return (\n    <canvas\n      data-testid={[\n        'prerendered_canvas',\n        showSoftClip ? 'softclipped' : '',\n        blockKey,\n        done ? 'done' : '',\n      ]\n        .filter(f => !!f)\n        .join('_')}\n      ref={featureCanvas}\n      width={width * highResolutionScaling}\n      height={height * highResolutionScaling}\n      style={{ width, height, ...style }}\n    />\n  )\n}\n\nexport default PrerenderedCanvas\n","export * from './theme'\nexport { LogoFull, Logomark } from './Logo'\nexport { default as AssemblySelector } from './AssemblySelector'\nexport { default as CascadingMenu } from './CascadingMenu'\nexport { default as CascadingMenuButton } from './CascadingMenuButton'\nexport { default as Dialog } from './Dialog'\nexport { default as EditableTypography } from './EditableTypography'\nexport { default as ErrorMessage } from './ErrorMessage'\nexport { default as FatalErrorDialog } from './FatalErrorDialog'\nexport { default as FileSelector } from './FileSelector'\nexport { default as LoadingEllipses } from './LoadingEllipses'\nexport { default as Menu } from './Menu'\nexport { default as PrerenderedCanvas } from './PrerenderedCanvas'\nexport { default as ResizeHandle } from './ResizeHandle'\nexport { default as SanitizedHTML } from './SanitizedHTML'\nexport * from './Menu'\nexport const VIEW_HEADER_HEIGHT = 28\n","import { useEffect, useRef, useState } from 'react'\n\nimport { makeStyles } from 'tss-react/mui'\n\nconst useStyles = makeStyles()({\n  horizontalHandle: {\n    cursor: 'row-resize',\n    width: '100%',\n  },\n  verticalHandle: {\n    cursor: 'col-resize',\n    height: '100%',\n  },\n  flexbox_verticalHandle: {\n    cursor: 'col-resize',\n    alignSelf: 'stretch', // the height: 100% is actually unable to function inside flexbox\n  },\n  flexbox_horizontalHandle: {\n    cursor: 'row-resize',\n    alignSelf: 'stretch', // similar to above\n  },\n})\n\nfunction ResizeHandle({\n  onDrag,\n  vertical = false,\n  flexbox = false,\n  className: originalClassName,\n  onMouseDown,\n  ...props\n}: {\n  onDrag: (\n    lastFrameDistance: number,\n    totalDistance: number,\n  ) => number | undefined\n  onMouseDown?: (event: React.MouseEvent) => void\n  vertical?: boolean\n  flexbox?: boolean\n  className?: string\n  [props: string]: unknown\n}) {\n  const [mouseDragging, setMouseDragging] = useState(false)\n  const initialPosition = useRef(0)\n  const prevPos = useRef(0)\n  const { classes, cx } = useStyles()\n\n  useEffect(() => {\n    function mouseMove(event: MouseEvent) {\n      event.preventDefault()\n      const pos = vertical ? event.clientX : event.clientY\n      const totalDistance = initialPosition.current - pos\n      const lastFrameDistance = pos - prevPos.current\n      prevPos.current = pos\n      onDrag(lastFrameDistance, totalDistance)\n    }\n\n    function mouseUp() {\n      setMouseDragging(false)\n    }\n    if (mouseDragging) {\n      window.addEventListener('mousemove', mouseMove, true)\n      window.addEventListener('mouseup', mouseUp, true)\n      return () => {\n        window.removeEventListener('mousemove', mouseMove, true)\n        window.removeEventListener('mouseup', mouseUp, true)\n      }\n    }\n    return () => {}\n  }, [mouseDragging, onDrag, vertical])\n\n  let className: string\n  if (flexbox) {\n    className = vertical\n      ? classes.flexbox_verticalHandle\n      : classes.flexbox_horizontalHandle\n  } else if (vertical) {\n    className = classes.verticalHandle\n  } else {\n    className = classes.horizontalHandle\n  }\n\n  return (\n    <div\n      data-resizer=\"true\"\n      onMouseDown={event => {\n        event.preventDefault()\n        const pos = vertical ? event.clientX : event.clientY\n        initialPosition.current = pos\n        prevPos.current = pos\n        setMouseDragging(true)\n        onMouseDown?.(event)\n      }}\n      className={cx(className, originalClassName)}\n      {...props}\n    />\n  )\n}\n\nexport default ResizeHandle\n","// this is a little polyfill for running in workers that\n// contains just enough stubbing to make webpack style-loader\n// think that it is actually inserting styles into the DOM\n\nself.window = {\n  addEventListener() {},\n  fetch: self.fetch.bind(self),\n  location: self.location,\n  Date: self.Date,\n  requestIdleCallback: cb => {\n    cb()\n  },\n  cancelIdleCallback: () => {},\n  requestAnimationFrame: cb => {\n    cb()\n  },\n  cancelAnimationFrame: () => {},\n  navigator: {},\n}\nself.document = {\n  createTextNode() {},\n  querySelector() {\n    return { appendChild() {} }\n  },\n  documentElement: {},\n  querySelectorAll: () => [],\n  createElement() {\n    return {\n      style: {},\n      setAttribute() {},\n      removeAttribute() {},\n      appendChild() {},\n    }\n  },\n}\n","import Dialog from '@jbrowse/core/ui/Dialog'\nimport {\n  Button,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n} from '@mui/material'\n\nexport default function FactoryResetDialog({\n  onClose,\n  open,\n  onFactoryReset,\n}: {\n  onClose: () => void\n  open: boolean\n  onFactoryReset: () => void\n}) {\n  function handleDialogClose(action?: string) {\n    if (action === 'reset') {\n      onFactoryReset()\n    }\n    onClose()\n  }\n\n  return (\n    <Dialog\n      title=\"Reset\"\n      onClose={() => {\n        handleDialogClose()\n      }}\n      open={open}\n    >\n      <DialogContent>\n        <DialogContentText>\n          Are you sure you want to reset? This will restore the default\n          configuration.\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button\n          onClick={() => {\n            handleDialogClose()\n          }}\n          color=\"primary\"\n        >\n          Cancel\n        </Button>\n        <Button\n          onClick={() => {\n            handleDialogClose('reset')\n          }}\n          color=\"primary\"\n          variant=\"contained\"\n        >\n          OK\n        </Button>\n      </DialogActions>\n    </Dialog>\n  )\n}\n","import { readConfObject } from '@jbrowse/core/configuration'\nimport { localStorageGetBoolean, localStorageSetItem } from '@jbrowse/core/util'\nimport { autorun } from 'mobx'\nimport { addDisposer, cast, getSnapshot, types } from 'mobx-state-tree'\n\nimport { BaseSessionModel, isBaseSession } from './BaseSession'\nimport { DrawerWidgetSessionMixin } from './DrawerWidgets'\n\nimport type PluginManager from '@jbrowse/core/PluginManager'\nimport type { IBaseViewModel } from '@jbrowse/core/pluggableElementTypes'\nimport type { IBaseViewModelWithDisplayedRegions } from '@jbrowse/core/pluggableElementTypes/models/BaseViewModel'\nimport type { Region } from '@jbrowse/core/util'\nimport type { IAnyStateTreeNode, Instance } from 'mobx-state-tree'\n\nfunction localStorageSetBoolean(key: string, value: boolean) {\n  localStorageSetItem(key, JSON.stringify(value))\n}\n\n/**\n * #stateModel MultipleViewsSessionMixin\n * composed of\n * - [BaseSessionModel](../basesessionmodel)\n * - [DrawerWidgetSessionMixin](../drawerwidgetsessionmixin)\n */\nexport function MultipleViewsSessionMixin(pluginManager: PluginManager) {\n  return types\n    .compose(\n      BaseSessionModel(pluginManager),\n      DrawerWidgetSessionMixin(pluginManager),\n    )\n    .props({\n      /**\n       * #property\n       */\n      views: types.array(pluginManager.pluggableMstType('view', 'stateModel')),\n      /**\n       * #property\n       */\n      stickyViewHeaders: types.optional(types.boolean, () =>\n        localStorageGetBoolean('stickyViewHeaders', true),\n      ),\n    })\n    .actions(self => ({\n      /**\n       * #action\n       */\n      moveViewDown(id: string) {\n        const idx = self.views.findIndex(v => v.id === id)\n        if (idx !== -1 && idx < self.views.length - 1) {\n          self.views.splice(idx, 2, self.views[idx + 1], self.views[idx])\n        }\n      },\n      /**\n       * #action\n       */\n      moveViewUp(id: string) {\n        const idx = self.views.findIndex(view => view.id === id)\n        if (idx > 0) {\n          self.views.splice(idx - 1, 2, self.views[idx], self.views[idx - 1])\n        }\n      },\n      /**\n       * #action\n       */\n      moveViewToTop(id: string) {\n        const idx = self.views.findIndex(view => view.id === id)\n        self.views = cast([\n          self.views[idx],\n          ...self.views.filter(view => view.id !== id),\n        ])\n      },\n\n      /**\n       * #action\n       */\n      moveViewToBottom(id: string) {\n        const idx = self.views.findIndex(view => view.id === id)\n        self.views = cast([\n          ...self.views.filter(view => view.id !== id),\n          self.views[idx],\n        ])\n      },\n\n      /**\n       * #action\n       */\n      addView(typeName: string, initialState = {}) {\n        const typeDefinition = pluginManager.getElementType('view', typeName)\n        if (!typeDefinition) {\n          throw new Error(`unknown view type ${typeName}`)\n        }\n\n        const length = self.views.push({\n          ...initialState,\n          type: typeName,\n        })\n        return self.views[length - 1]\n      },\n\n      /**\n       * #action\n       */\n      removeView(view: IBaseViewModel) {\n        for (const [, widget] of self.activeWidgets) {\n          if (widget.view && widget.view.id === view.id) {\n            self.hideWidget(widget)\n          }\n        }\n        self.views.remove(view)\n      },\n\n      /**\n       * #action\n       */\n      addLinearGenomeViewOfAssembly(assemblyName: string, initialState = {}) {\n        return this.addViewOfAssembly(\n          'LinearGenomeView',\n          assemblyName,\n          initialState,\n        )\n      },\n\n      /**\n       * #action\n       */\n      addViewOfAssembly(\n        viewType: string,\n        assemblyName: string,\n        initialState: Record<string, unknown> = {},\n      ) {\n        const asm = self.assemblies.find(\n          s => readConfObject(s, 'name') === assemblyName,\n        )\n        if (!asm) {\n          throw new Error(\n            `Could not add view of assembly \"${assemblyName}\", assembly name not found`,\n          )\n        }\n        return this.addView(viewType, {\n          ...initialState,\n          displayRegionsFromAssemblyName: readConfObject(asm, 'name'),\n        })\n      },\n\n      /**\n       * #action\n       */\n      addViewFromAnotherView(\n        viewType: string,\n        otherView: IBaseViewModelWithDisplayedRegions,\n        initialState: { displayedRegions?: Region[] } = {},\n      ) {\n        const state = { ...initialState }\n        state.displayedRegions = getSnapshot(otherView.displayedRegions)\n        return this.addView(viewType, state)\n      },\n\n      /**\n       * #action\n       */\n      setStickyViewHeaders(sticky: boolean) {\n        self.stickyViewHeaders = sticky\n        localStorageSetBoolean('stickyViewHeaders', sticky)\n      },\n\n      afterAttach() {\n        addDisposer(\n          self,\n          autorun(() => {\n            localStorageSetBoolean('stickyViewHeaders', self.stickyViewHeaders)\n          }),\n        )\n      },\n    }))\n}\n\n/** Session mixin MST type for a session that manages multiple views */\nexport type SessionWithMultipleViewsType = ReturnType<\n  typeof MultipleViewsSessionMixin\n>\n\n/** Instance of a session with multiple views */\nexport type SessionWithMultipleViews = Instance<SessionWithMultipleViewsType>\n\n/** Type guard for SessionWithMultipleViews */\nexport function isSessionWithMultipleViews(\n  session: IAnyStateTreeNode,\n): session is SessionWithMultipleViews {\n  return isBaseSession(session) && 'views' in session\n}\n","/* eslint-disable @typescript-eslint/no-unsafe-function-type */\nimport type React from 'react'\nimport { createContext, useContext, useMemo } from 'react'\n\nimport ChevronRight from '@mui/icons-material/ChevronRight'\nimport {\n  Divider,\n  ListItemIcon,\n  ListItemText,\n  ListSubheader,\n  Menu,\n  MenuItem,\n} from '@mui/material'\nimport HoverMenu from 'material-ui-popup-state/HoverMenu'\nimport {\n  bindFocus,\n  bindHover,\n  bindMenu,\n  usePopupState,\n} from 'material-ui-popup-state/hooks'\n\nimport { MenuItemEndDecoration } from './Menu'\n\nimport type { MenuItem as JBMenuItem } from './Menu'\nimport type { PopoverOrigin, SvgIconProps } from '@mui/material'\nimport type { PopupState } from 'material-ui-popup-state/hooks'\n\nconst CascadingContext = createContext({\n  parentPopupState: null,\n  rootPopupState: null,\n} as { parentPopupState: PopupState | null; rootPopupState: PopupState | null })\n\nfunction CascadingMenuItem({\n  onClick,\n  closeAfterItemClick,\n  ...props\n}: {\n  closeAfterItemClick: boolean\n  onClick?: Function\n  disabled?: boolean\n  children: React.ReactNode\n}) {\n  const { rootPopupState } = useContext(CascadingContext)\n  if (!rootPopupState) {\n    throw new Error('must be used inside a CascadingMenu')\n  }\n\n  return (\n    <MenuItem\n      {...props}\n      onClick={event => {\n        if (closeAfterItemClick) {\n          rootPopupState.close()\n        }\n        onClick?.(event)\n      }}\n    />\n  )\n}\n\nfunction CascadingSubmenu({\n  title,\n  Icon,\n  inset,\n  popupId,\n  ...props\n}: {\n  children: React.ReactNode\n  title: React.ReactNode\n  onMenuItemClick: Function\n  Icon: React.ComponentType<SvgIconProps> | undefined\n\n  inset: boolean\n  menuItems: JBMenuItem[]\n  popupId: string\n}) {\n  const { parentPopupState } = useContext(CascadingContext)\n  const popupState = usePopupState({\n    popupId,\n    variant: 'popover',\n    parentPopupState,\n  })\n  return (\n    <>\n      <MenuItem {...bindHover(popupState)} {...bindFocus(popupState)}>\n        {Icon ? (\n          <ListItemIcon>\n            <Icon />\n          </ListItemIcon>\n        ) : null}\n        <ListItemText primary={title} inset={inset} />\n        <ChevronRight />\n      </MenuItem>\n      <CascadingSubmenuHover\n        {...props}\n        anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\n        transformOrigin={{ vertical: 'top', horizontal: 'left' }}\n        popupState={popupState}\n      />\n    </>\n  )\n}\n\nfunction CascadingSubmenuHover({\n  popupState,\n  onMenuItemClick,\n  menuItems,\n  classes,\n  ...props\n}: {\n  classes?: Record<string, string>\n  popupState: PopupState\n  anchorOrigin: PopoverOrigin\n  transformOrigin: PopoverOrigin\n  onMenuItemClick: Function\n  menuItems: JBMenuItem[]\n}) {\n  const { rootPopupState } = useContext(CascadingContext)\n  const context = useMemo(\n    () => ({\n      rootPopupState: rootPopupState || popupState,\n      parentPopupState: popupState,\n    }),\n    [rootPopupState, popupState],\n  )\n\n  return (\n    <CascadingContext.Provider value={context}>\n      <HoverMenu {...props} {...bindMenu(popupState)} />\n    </CascadingContext.Provider>\n  )\n}\n\nfunction CascadingMenu({\n  popupState,\n  onMenuItemClick,\n  menuItems,\n  ...props\n}: {\n  popupState: PopupState\n  onMenuItemClick: Function\n  menuItems: JBMenuItem[]\n}) {\n  const { rootPopupState } = useContext(CascadingContext)\n  const context = useMemo(\n    () => ({\n      rootPopupState: rootPopupState || popupState,\n      parentPopupState: popupState,\n    }),\n    [rootPopupState, popupState],\n  )\n\n  return (\n    <CascadingContext.Provider value={context}>\n      <Menu {...props} {...bindMenu(popupState)} />\n    </CascadingContext.Provider>\n  )\n}\n\nfunction EndDecoration({ item }: { item: JBMenuItem }) {\n  if ('subMenu' in item) {\n    return <MenuItemEndDecoration type=\"subMenu\" />\n  } else if (item.type === 'checkbox' || item.type === 'radio') {\n    return (\n      <MenuItemEndDecoration\n        type={item.type}\n        checked={item.checked}\n        disabled={item.disabled}\n      />\n    )\n  }\n  return null\n}\n\nfunction CascadingMenuList({\n  onMenuItemClick,\n  closeAfterItemClick,\n  menuItems,\n  ...props\n}: {\n  menuItems: JBMenuItem[]\n  closeAfterItemClick: boolean\n  onMenuItemClick: Function\n}) {\n  function handleClick(callback: Function) {\n    return (event: React.MouseEvent<HTMLLIElement>) => {\n      onMenuItemClick(event, callback)\n    }\n  }\n\n  const hasIcon = menuItems.some(m => 'icon' in m && m.icon)\n  return (\n    <>\n      {menuItems\n        .sort((a, b) => (b.priority || 0) - (a.priority || 0))\n        .map((item, idx) => {\n          return 'subMenu' in item ? (\n            <CascadingSubmenu\n              key={`subMenu-${item.label}-${idx}`}\n              popupId={`subMenu-${item.label}`}\n              title={item.label}\n              Icon={item.icon}\n              inset={hasIcon && !item.icon}\n              onMenuItemClick={onMenuItemClick}\n              menuItems={item.subMenu}\n            >\n              <CascadingMenuList\n                {...props}\n                closeAfterItemClick={closeAfterItemClick}\n                onMenuItemClick={onMenuItemClick}\n                menuItems={item.subMenu}\n              />\n            </CascadingSubmenu>\n          ) : item.type === 'divider' ? (\n            <Divider\n              key={`divider-${JSON.stringify(item)}-${idx}`}\n              component=\"li\"\n            />\n          ) : item.type === 'subHeader' ? (\n            <ListSubheader key={`subHeader-${item.label}-${idx}`}>\n              {item.label}\n            </ListSubheader>\n          ) : (\n            <CascadingMenuItem\n              key={`${item.label}-${idx}`}\n              closeAfterItemClick={closeAfterItemClick}\n              onClick={\n                'onClick' in item ? handleClick(item.onClick) : undefined\n              }\n              disabled={Boolean(item.disabled)}\n            >\n              {item.icon ? (\n                <ListItemIcon>\n                  <item.icon />\n                </ListItemIcon>\n              ) : null}{' '}\n              <ListItemText\n                primary={item.label}\n                secondary={item.subLabel}\n                inset={hasIcon && !item.icon}\n              />\n              <div style={{ flexGrow: 1, minWidth: 10 }} />\n              <EndDecoration item={item} />\n            </CascadingMenuItem>\n          )\n        })}\n    </>\n  )\n}\n\nfunction CascadingMenuChildren(props: {\n  onMenuItemClick: Function\n  closeAfterItemClick?: boolean\n  menuItems: JBMenuItem[]\n  popupState: PopupState\n}) {\n  const { closeAfterItemClick = true, ...rest } = props\n  return (\n    <CascadingMenu {...rest}>\n      <CascadingMenuList {...rest} closeAfterItemClick={closeAfterItemClick} />\n    </CascadingMenu>\n  )\n}\n\nexport default CascadingMenuChildren\n","import { forwardRef, useEffect, useState } from 'react'\n\nimport useMeasure from '@jbrowse/core/util/useMeasure'\nimport { InputBase, Typography, useTheme } from '@mui/material'\nimport { makeStyles } from 'tss-react/mui'\n\nimport type { TypographyProps } from '@mui/material'\n\ntype Variant = TypographyProps['variant']\n\ntype EditableTypographyClassKey =\n  | 'input'\n  | 'inputBase'\n  | 'inputRoot'\n  | 'inputFocused'\n\nconst useStyles = makeStyles()(theme => ({\n  input: {},\n  inputBase: {},\n  typography: {\n    top: 6,\n    left: 2,\n    position: 'absolute',\n    whiteSpace: 'nowrap',\n    visibility: 'hidden',\n  },\n  inputRoot: {\n    padding: theme.spacing(0.5),\n  },\n  inputFocused: {\n    borderStyle: 'solid',\n    borderWidth: 2,\n  },\n}))\n\ninterface Props {\n  value: string\n  setValue: (value: string) => void\n  variant: Variant\n  classes?: Partial<Record<EditableTypographyClassKey, string>>\n}\n\n// using forwardRef so that MUI Tooltip can wrap this component\nconst EditableTypography = forwardRef<HTMLDivElement, Props>(\n  function EditableTypography2(props, ref) {\n    const { value, setValue, variant, ...other } = props\n    const [ref2, { width }] = useMeasure()\n    const [editedValue, setEditedValue] = useState<string>()\n    const [inputNode, setInputNode] = useState<HTMLInputElement | null>(null)\n    const [blur, setBlur] = useState(false)\n\n    useEffect(() => {\n      if (blur) {\n        inputNode?.blur()\n        setBlur(false)\n      }\n    }, [blur, inputNode])\n\n    // possibly tss-react does not understand the passing of props to\n    // useStyles, but it appears to work\n    // @ts-expect-error\n    const { classes } = useStyles(props, { props })\n    const theme = useTheme()\n\n    const val = editedValue === undefined ? value : editedValue\n\n    return (\n      <div {...other} ref={ref}>\n        <div style={{ position: 'relative' }}>\n          <Typography\n            ref={ref2}\n            component=\"span\"\n            variant={variant}\n            className={classes.typography}\n          >\n            {val}\n          </Typography>\n        </div>\n        <InputBase\n          inputRef={node => {\n            setInputNode(node)\n          }}\n          className={classes.inputBase}\n          inputProps={{\n            style: {\n              width,\n              ...(variant && variant !== 'inherit'\n                ? theme.typography[variant]\n                : {}),\n            },\n          }}\n          classes={{\n            input: classes.input,\n            root: classes.inputRoot,\n            focused: classes.inputFocused,\n          }}\n          value={val}\n          onChange={event => {\n            setEditedValue(event.target.value)\n          }}\n          onKeyDown={event => {\n            if (event.key === 'Enter') {\n              inputNode?.blur()\n            } else if (event.key === 'Escape') {\n              setEditedValue(undefined)\n              setBlur(true)\n            }\n          }}\n          onBlur={() => {\n            setValue(editedValue || value || '')\n            setEditedValue(undefined)\n          }}\n        />\n      </div>\n    )\n  },\n)\n\nexport default EditableTypography\n","import SvgIcon from '@mui/material/SvgIcon'\n\nimport type { SvgIconProps } from '@mui/material/SvgIcon'\n\n// Icons below come from https://material.io/resources/icons/?icon=line_style&style=baseline\nexport function ContentCopy(props: SvgIconProps) {\n  return (\n    <SvgIcon {...props}>\n      <path d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\" />\n    </SvgIcon>\n  )\n}\n\n// https://materialdesignicons.com/ text-search icon\nexport function Indexing(props: SvgIconProps) {\n  return (\n    <SvgIcon {...props}>\n      <path d=\"M19.31 18.9L22.39 22L21 23.39L17.88 20.32C17.19 20.75 16.37 21 15.5 21C13 21 11 19 11 16.5C11 14 13 12 15.5 12C18 12 20 14 20 16.5C20 17.38 19.75 18.21 19.31 18.9M15.5 19C16.88 19 18 17.88 18 16.5C18 15.12 16.88 14 15.5 14C14.12 14 13 15.12 13 16.5C13 17.88 14.12 19 15.5 19M21 4V6H3V4H21M3 16V14H9V16H3M3 11V9H21V11H18.97C17.96 10.37 16.77 10 15.5 10C14.23 10 13.04 10.37 12.03 11H3Z\" />\n    </SvgIcon>\n  )\n}\n\nexport function ContentCut(props: SvgIconProps) {\n  return (\n    <SvgIcon {...props}>\n      <path d=\"M19,3L13,9L15,11L22,4V3M12,12.5A0.5,0.5 0 0,1 11.5,12A0.5,0.5 0 0,1 12,11.5A0.5,0.5 0 0,1 12.5,12A0.5,0.5 0 0,1 12,12.5M6,20A2,2 0 0,1 4,18C4,16.89 4.9,16 6,16A2,2 0 0,1 8,18C8,19.11 7.1,20 6,20M6,8A2,2 0 0,1 4,6C4,4.89 4.9,4 6,4A2,2 0 0,1 8,6C8,7.11 7.1,8 6,8M9.64,7.64C9.87,7.14 10,6.59 10,6A4,4 0 0,0 6,2A4,4 0 0,0 2,6A4,4 0 0,0 6,10C6.59,10 7.14,9.87 7.64,9.64L10,12L7.64,14.36C7.14,14.13 6.59,14 6,14A4,4 0 0,0 2,18A4,4 0 0,0 6,22A4,4 0 0,0 10,18C10,17.41 9.87,16.86 9.64,16.36L12,14L19,21H22V20L9.64,7.64Z\" />\n    </SvgIcon>\n  )\n}\n\nexport function ContentPaste(props: SvgIconProps) {\n  return (\n    <SvgIcon {...props}>\n      <path d=\"M19,20H5V4H7V7H17V4H19M12,2A1,1 0 0,1 13,3A1,1 0 0,1 12,4A1,1 0 0,1 11,3A1,1 0 0,1 12,2M19,2H14.82C14.4,0.84 13.3,0 12,0C10.7,0 9.6,0.84 9.18,2H5A2,2 0 0,0 3,4V20A2,2 0 0,0 5,22H19A2,2 0 0,0 21,20V4A2,2 0 0,0 19,2Z\" />\n    </SvgIcon>\n  )\n}\n\n//  format-list-checkbox from https://materialdesignicons.com/\nexport function TrackSelector(props: SvgIconProps) {\n  return (\n    <SvgIcon {...props}>\n      <path d=\"M21 19v-2H8v2h13m0-6v-2H8v2h13M8 7h13V5H8v2M4 5v2h2V5H4M3 5a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V5m1 6v2h2v-2H4m-1 0a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1v-2m1 6v2h2v-2H4m-1 0a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1v-2z\" />\n    </SvgIcon>\n  )\n}\n\n//  content-save-edit from https://materialdesignicons.com/\nexport function SaveAs(props: SvgIconProps) {\n  return (\n    <SvgIcon {...props}>\n      <path\n        fill=\"currentColor\"\n        d=\"M10,19L10.14,18.86C8.9,18.5 8,17.36 8,16A3,3 0 0,1 11,13C12.36,13 13.5,13.9 13.86,15.14L20,9V7L16,3H4C2.89,3 2,3.9 2,5V19A2,2 0 0,0 4,21H10V19M4,5H14V9H4V5M20.04,12.13C19.9,12.13 19.76,12.19 19.65,12.3L18.65,13.3L20.7,15.35L21.7,14.35C21.92,14.14 21.92,13.79 21.7,13.58L20.42,12.3C20.31,12.19 20.18,12.13 20.04,12.13M18.07,13.88L12,19.94V22H14.06L20.12,15.93L18.07,13.88Z\"\n      />\n    </SvgIcon>\n  )\n}\n\n//  content-save from https://materialdesignicons.com/\nexport function Save(props: SvgIconProps) {\n  return (\n    <SvgIcon {...props}>\n      <path\n        fill=\"currentColor\"\n        d=\"M15,9H5V5H15M12,19A3,3 0 0,1 9,16A3,3 0 0,1 12,13A3,3 0 0,1 15,16A3,3 0 0,1 12,19M17,3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V7L17,3Z\"\n      />\n    </SvgIcon>\n  )\n}\n\n//  dna from https://materialdesignicons.com/\nexport function DNA(props: SvgIconProps) {\n  return (\n    <SvgIcon {...props}>\n      <path\n        fill=\"currentColor\"\n        d=\"M4,2H6V4C6,5.44 6.68,6.61 7.88,7.78C8.74,8.61 9.89,9.41 11.09,10.2L9.26,11.39C8.27,10.72 7.31,10 6.5,9.21C5.07,7.82 4,6.1 4,4V2M18,2H20V4C20,6.1 18.93,7.82 17.5,9.21C16.09,10.59 14.29,11.73 12.54,12.84C10.79,13.96 9.09,15.05 7.88,16.22C6.68,17.39 6,18.56 6,20V22H4V20C4,17.9 5.07,16.18 6.5,14.79C7.91,13.41 9.71,12.27 11.46,11.16C13.21,10.04 14.91,8.95 16.12,7.78C17.32,6.61 18,5.44 18,4V2M14.74,12.61C15.73,13.28 16.69,14 17.5,14.79C18.93,16.18 20,17.9 20,20V22H18V20C18,18.56 17.32,17.39 16.12,16.22C15.26,15.39 14.11,14.59 12.91,13.8L14.74,12.61M7,3H17V4L16.94,4.5H7.06L7,4V3M7.68,6H16.32C16.08,6.34 15.8,6.69 15.42,7.06L14.91,7.5H9.07L8.58,7.06C8.2,6.69 7.92,6.34 7.68,6M9.09,16.5H14.93L15.42,16.94C15.8,17.31 16.08,17.66 16.32,18H7.68C7.92,17.66 8.2,17.31 8.58,16.94L9.09,16.5M7.06,19.5H16.94L17,20V21H7V20L7.06,19.5Z\"\n      />\n    </SvgIcon>\n  )\n}\n\nexport function Cable(props: SvgIconProps) {\n  return (\n    <SvgIcon {...props}>\n      <path d=\"M20 5V4c0-.55-.45-1-1-1h-2c-.55 0-1 .45-1 1v1h-1v4c0 .55.45 1 1 1h1v7c0 1.1-.9 2-2 2s-2-.9-2-2V7c0-2.21-1.79-4-4-4S5 4.79 5 7v7H4c-.55 0-1 .45-1 1v4h1v1c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-1h1v-4c0-.55-.45-1-1-1H7V7c0-1.1.9-2 2-2s2 .9 2 2v10c0 2.21 1.79 4 4 4s4-1.79 4-4v-7h1c.55 0 1-.45 1-1V5h-1z\" />\n    </SvgIcon>\n  )\n}\n","import { getParent, isRoot } from 'mobx-state-tree'\n\nimport { getEnv, getSession, objectHash } from './index'\nimport { readConfObject } from '../configuration'\n\nimport type { FileLocation, PreFileLocation } from './types'\nimport type { AnyConfigurationModel } from '../configuration'\nimport type { IAnyStateTreeNode } from 'mobx-state-tree'\n\n/* utility functions for use by track models and so forth */\n\nexport function getTrackAssemblyNames(\n  track: IAnyStateTreeNode & { configuration: AnyConfigurationModel },\n) {\n  return getConfAssemblyNames(track.configuration)\n}\n\nexport function getConfAssemblyNames(conf: AnyConfigurationModel) {\n  const trackAssemblyNames = readConfObject(conf, 'assemblyNames') as\n    | string[]\n    | undefined\n  if (!trackAssemblyNames) {\n    // Check if it's an assembly sequence track\n    const parent = getParent<any>(conf)\n    if ('sequence' in parent) {\n      return [readConfObject(parent, 'name') as string]\n    } else {\n      throw new Error('unknown assembly names')\n    }\n  }\n  return trackAssemblyNames\n}\n\n/**\n * return the rpcSessionId of the highest parent node in the tree that has an\n * rpcSessionId */\n\nexport function getRpcSessionId(thisNode: IAnyStateTreeNode) {\n  interface NodeWithRpcSessionId extends IAnyStateTreeNode {\n    rpcSessionId: string\n  }\n  let highestRpcSessionId: string | undefined\n\n  for (let node = thisNode; !isRoot(node); node = getParent<any>(node)) {\n    if ('rpcSessionId' in node) {\n      highestRpcSessionId = (node as NodeWithRpcSessionId).rpcSessionId\n    }\n  }\n  if (!highestRpcSessionId) {\n    throw new Error(\n      'getRpcSessionId failed, no parent node in the state tree has an `rpcSessionId` attribute',\n    )\n  }\n  return highestRpcSessionId\n}\n\n/**\n * given an MST node, get the renderprops of the first parent container that\n * has renderProps\n * @param node -\n * @returns renderprops, or empty object if none found\n */\nexport function getParentRenderProps(node: IAnyStateTreeNode) {\n  for (\n    let currentNode = getParent<any>(node);\n    !isRoot(currentNode);\n    currentNode = getParent<any>(currentNode)\n  ) {\n    if ('renderProps' in currentNode) {\n      return currentNode.renderProps()\n    }\n  }\n\n  return {}\n}\n\nexport const UNKNOWN = 'UNKNOWN'\nexport const UNSUPPORTED = 'UNSUPPORTED'\n\nlet blobMap: Record<string, File> = {}\n\n// get a specific blob\nexport function getBlob(id: string) {\n  return blobMap[id]\n}\n\n// used to export entire context to webworker\nexport function getBlobMap() {\n  return blobMap\n}\n\n// TODO:IS THIS BAD?\n// used in new contexts like webworkers\nexport function setBlobMap(map: Record<string, File>) {\n  blobMap = map\n}\n\nlet counter = 0\n\n// blob files are stored in a global map. the blobId is based on a combination\n// of timestamp plus counter to be unique across sessions and fast repeated\n// calls\nexport function storeBlobLocation(location: PreFileLocation) {\n  if ('blob' in location) {\n    const blobId = `b${+Date.now()}-${counter++}`\n    blobMap[blobId] = location.blob\n    return { name: location.blob.name, blobId, locationType: 'BlobLocation' }\n  }\n  return location\n}\n\n/**\n * creates a new location from the provided location including the appropriate\n * suffix and location type\n *\n * @param location - the FileLocation\n * @param suffix - the file suffix (e.g. .bam)\n * @returns the constructed location object from the provided parameters\n */\nexport function makeIndex(location: FileLocation, suffix: string) {\n  if ('uri' in location) {\n    return {\n      uri: location.uri + suffix,\n      locationType: 'UriLocation',\n    }\n  } else if ('localPath' in location) {\n    return {\n      localPath: location.localPath + suffix,\n      locationType: 'LocalPathLocation',\n    }\n  } else {\n    return location\n  }\n}\n\n/**\n * constructs a potential index file (with suffix) from the provided file name\n *\n * @param name - the name of the index file\n * @param typeA - one option of a potential two file suffix (e.g. CSI, BAI)\n * @param typeB - the second option of a potential two file suffix (e.g. CSI, BAI)\n * @returns a likely name of the index file for a given filename\n */\nexport function makeIndexType(\n  name: string | undefined,\n  typeA: string,\n  typeB: string,\n) {\n  return name?.toUpperCase().endsWith(typeA) ? typeA : typeB\n}\n\nexport interface AdapterConfig {\n  type: string\n  [key: string]: unknown\n}\n\nexport type AdapterGuesser = (\n  file: FileLocation,\n  index?: FileLocation,\n  adapterHint?: string,\n) => AdapterConfig | undefined\n\nexport type TrackTypeGuesser = (adapterName: string) => string | undefined\n\nexport function getFileName(track: FileLocation) {\n  const uri = 'uri' in track ? track.uri : undefined\n  const localPath = 'localPath' in track ? track.localPath : undefined\n  const blob = 'blobId' in track ? track : undefined\n  return (\n    blob?.name ||\n    uri?.slice(uri.lastIndexOf('/') + 1) ||\n    localPath?.slice(localPath.replace(/\\\\/g, '/').lastIndexOf('/') + 1) ||\n    ''\n  )\n}\n\nexport function guessAdapter(\n  file: FileLocation,\n  index: FileLocation | undefined,\n  adapterHint?: string,\n  model?: IAnyStateTreeNode,\n) {\n  if (model) {\n    const { pluginManager } = getEnv(model)\n    const adapterGuesser = pluginManager.evaluateExtensionPoint(\n      'Core-guessAdapterForLocation',\n      (\n        _file: FileLocation,\n        _index?: FileLocation,\n        _adapterHint?: string,\n      ): AdapterConfig | undefined => {\n        return undefined\n      },\n    ) as AdapterGuesser\n\n    const adapter = adapterGuesser(file, index, adapterHint)\n    if (adapter) {\n      return adapter\n    }\n  }\n\n  return {\n    type: UNKNOWN,\n  }\n}\n\nexport function guessTrackType(\n  adapterType: string,\n  model?: IAnyStateTreeNode,\n): string {\n  if (model) {\n    const session = getSession(model)\n\n    const trackTypeGuesser = getEnv(\n      session,\n    ).pluginManager.evaluateExtensionPoint(\n      'Core-guessTrackTypeForLocation',\n      (_adapterName: string): AdapterConfig | undefined => {\n        return undefined\n      },\n    ) as TrackTypeGuesser\n\n    const trackType = trackTypeGuesser(adapterType)\n    if (trackType) {\n      return trackType\n    }\n  }\n  return 'FeatureTrack'\n}\n\nexport function generateUnsupportedTrackConf(\n  trackName: string,\n  trackUrl: string,\n  categories: string[] | undefined,\n) {\n  const conf = {\n    type: 'FeatureTrack',\n    name: `${trackName} (Unsupported)`,\n    description: `Support not yet implemented for \"${trackUrl}\"`,\n    category: categories,\n    trackId: '',\n  }\n  conf.trackId = objectHash(conf)\n  return conf\n}\n\nexport function generateUnknownTrackConf(\n  trackName: string,\n  trackUrl: string,\n  categories?: string[],\n) {\n  const conf = {\n    type: 'FeatureTrack',\n    name: `${trackName} (Unknown)`,\n    description: `Could not determine track type for \"${trackUrl}\"`,\n    category: categories,\n    trackId: '',\n  }\n  conf.trackId = objectHash(conf)\n  return conf\n}\n\nexport function getTrackName(\n  conf: AnyConfigurationModel,\n  session: { assemblies: AnyConfigurationModel[] },\n) {\n  const trackName = readConfObject(conf, 'name') as string\n  if (!trackName && readConfObject(conf, 'type') === 'ReferenceSequenceTrack') {\n    const asm = session.assemblies.find(a => a.sequence === conf)\n    return asm\n      ? `Reference sequence (${\n          readConfObject(asm, 'displayName') || readConfObject(asm, 'name')\n        })`\n      : 'Reference sequence'\n  }\n  return trackName\n}\n","import { isValidElement } from 'react'\n\nimport { ErrorBoundary } from '@jbrowse/core/ui/ErrorBoundary'\nimport CloseIcon from '@mui/icons-material/Close'\nimport {\n  Dialog as MUIDialog,\n  DialogTitle,\n  Divider,\n  IconButton,\n  ScopedCssBaseline,\n  ThemeProvider,\n  createTheme,\n  useTheme,\n} from '@mui/material'\nimport { observer } from 'mobx-react'\nimport { makeStyles } from 'tss-react/mui'\n\nimport ErrorMessage from './ErrorMessage'\nimport SanitizedHTML from './SanitizedHTML'\n\nimport type { DialogProps } from '@mui/material'\n\nconst useStyles = makeStyles()(theme => ({\n  closeButton: {\n    position: 'absolute',\n    right: theme.spacing(1),\n    top: theme.spacing(1),\n    color: theme.palette.grey[500],\n  },\n}))\n\nfunction DialogError({ error }: { error: unknown }) {\n  return (\n    <div style={{ width: 800, margin: 40 }}>\n      <ErrorMessage error={error} />\n    </div>\n  )\n}\n\ninterface Props extends DialogProps {\n  header?: React.ReactNode\n}\n\nconst Dialog = observer(function (props: Props) {\n  const { classes } = useStyles()\n  const { title, header, children, onClose } = props\n  const theme = useTheme()\n\n  return (\n    <MUIDialog {...props}>\n      <ScopedCssBaseline>\n        {isValidElement(header) ? (\n          header\n        ) : (\n          <DialogTitle>\n            <SanitizedHTML html={title || ''} />\n            {onClose ? (\n              <IconButton\n                className={classes.closeButton}\n                onClick={() => {\n                  // @ts-expect-error\n                  onClose()\n                }}\n              >\n                <CloseIcon />\n              </IconButton>\n            ) : null}\n          </DialogTitle>\n        )}\n        <Divider />\n\n        <ErrorBoundary FallbackComponent={DialogError}>\n          <ThemeProvider\n            theme={createTheme(theme, {\n              components: {\n                MuiInputBase: {\n                  styleOverrides: {\n                    input: {\n                      // xref https://github.com/GMOD/jbrowse-components/pull/3666\n                      boxSizing: 'content-box!important' as 'content-box',\n                    },\n                  },\n                },\n              },\n            })}\n          >\n            {children}\n          </ThemeProvider>\n        </ErrorBoundary>\n      </ScopedCssBaseline>\n    </MUIDialog>\n  )\n})\n\nexport default Dialog\n","import type React from 'react'\nimport { useEffect, useRef, useState } from 'react'\n\nimport { unzip } from '@gmod/bgzf-filehandle'\nimport useMeasure from '@jbrowse/core/util/useMeasure'\nimport {\n  getEnv as getEnvMST,\n  getParent,\n  getSnapshot,\n  hasParent,\n  isAlive,\n  isStateTreeNode,\n} from 'mobx-state-tree'\nimport { flushSync } from 'react-dom'\nimport { createRoot } from 'react-dom/client'\n\nimport { colord } from './colord'\nimport { checkStopToken } from './stopToken'\nimport {\n  isDisplayModel,\n  isSessionModel,\n  isTrackModel,\n  isUriLocation,\n  isViewModel,\n} from './types'\n\nimport type PluginManager from '../PluginManager'\nimport type { BaseBlock } from './blockTypes'\nimport type { Feature } from './simpleFeature'\nimport type { AssemblyManager, Region, TypeTestedByPredicate } from './types'\nimport type { Region as MUIRegion } from './types/mst'\nimport type { BaseOptions } from '../data_adapters/BaseAdapter'\nimport type { GenericFilehandle } from 'generic-filehandle2'\nimport type {\n  IAnyStateTreeNode,\n  IStateTreeNode,\n  Instance,\n} from 'mobx-state-tree'\n\nexport * from './types'\nexport * from './when'\nexport * from './range'\nexport * from './dedupe'\n\nexport * from './offscreenCanvasPonyfill'\nexport * from './offscreenCanvasUtils'\n\nexport function useDebounce<T>(value: T, delay: number) {\n  const [debouncedValue, setDebouncedValue] = useState(value)\n\n  useEffect(() => {\n    const handle = setTimeout(() => {\n      setDebouncedValue(value)\n    }, delay)\n    return () => {\n      clearTimeout(handle)\n    }\n  }, [value, delay])\n\n  return debouncedValue\n}\n\n// used in ViewContainer files to get the width\nexport function useWidthSetter(\n  view: { setWidth: (arg: number) => void },\n  padding: string,\n) {\n  const [ref, { width }] = useMeasure()\n  useEffect(() => {\n    if (width && isAlive(view)) {\n      // sets after a requestAnimationFrame\n      // https://stackoverflow.com/a/58701523/2129219\n      // avoids ResizeObserver loop error being shown during development\n      requestAnimationFrame(() => {\n        view.setWidth(width - Number.parseInt(padding, 10) * 2)\n      })\n    }\n  }, [padding, view, width])\n  return ref\n}\n\ntype Timer = ReturnType<typeof setTimeout>\n\n// https://stackoverflow.com/questions/56283920/\nexport function useDebouncedCallback<T>(\n  callback: (...args: T[]) => void,\n  wait = 400,\n) {\n  // track args & timeout handle between calls\n  const argsRef = useRef<T[]>(null)\n  const timeout = useRef<Timer>(null)\n\n  // make sure our timeout gets cleared if our consuming component gets\n  // unmounted\n  useEffect(() => {\n    if (timeout.current) {\n      clearTimeout(timeout.current)\n    }\n  }, [])\n\n  return function debouncedCallback(...args: T[]) {\n    // capture latest args\n    argsRef.current = args\n\n    // clear debounce timer\n    if (timeout.current) {\n      clearTimeout(timeout.current)\n    }\n\n    // start waiting again\n    timeout.current = setTimeout(() => {\n      if (argsRef.current) {\n        callback(...argsRef.current)\n      }\n    }, wait)\n  }\n}\n\n/**\n * find the first node in the hierarchy that matches the given predicate\n */\nexport function findParentThat(\n  node: IAnyStateTreeNode,\n  predicate: (thing: IAnyStateTreeNode) => boolean,\n) {\n  if (!hasParent(node)) {\n    throw new Error('node does not have parent')\n  }\n  let currentNode: IAnyStateTreeNode | undefined = getParent<any>(node)\n  while (currentNode && isAlive(currentNode)) {\n    if (predicate(currentNode)) {\n      return currentNode\n    }\n    if (hasParent(currentNode)) {\n      currentNode = getParent<any>(currentNode)\n    } else {\n      break\n    }\n  }\n  throw new Error('no matching node found')\n}\n\ninterface Animation {\n  lastPosition: number\n  lastTime?: number\n  lastVelocity?: number\n}\n\n// based on https://github.com/react-spring/react-spring/blob/cd5548a987383b8023efd620f3726a981f9e18ea/src/animated/FrameLoop.ts\nexport function springAnimate(\n  fromValue: number,\n  toValue: number,\n  setValue: (value: number) => void,\n  onFinish = () => {},\n  precision = 0,\n  tension = 400,\n  friction = 20,\n  clamp = true,\n) {\n  const mass = 1\n  if (!precision) {\n    precision = Math.abs(toValue - fromValue) / 1000\n  }\n\n  let animationFrameId: number\n\n  function update(animation: Animation) {\n    const time = Date.now()\n    let position = animation.lastPosition\n    let lastTime = animation.lastTime || time\n    let velocity = animation.lastVelocity || 0\n    // If we lost a lot of frames just jump to the end.\n    if (time > lastTime + 64) {\n      lastTime = time\n    }\n    // http://gafferongames.com/game-physics/fix-your-timestep/\n    const numSteps = Math.floor(time - lastTime)\n    for (let i = 0; i < numSteps; ++i) {\n      const force = -tension * (position - toValue)\n      const damping = -friction * velocity\n      const acceleration = (force + damping) / mass\n      velocity += (acceleration * 1) / 1000\n      position += (velocity * 1) / 1000\n    }\n    const isVelocity = Math.abs(velocity) <= precision\n    const isDisplacement =\n      tension !== 0 ? Math.abs(toValue - position) <= precision : true\n    const isOvershooting =\n      clamp && tension !== 0\n        ? fromValue < toValue\n          ? position > toValue\n          : position < toValue\n        : false\n    const endOfAnimation = isOvershooting || (isVelocity && isDisplacement)\n    if (endOfAnimation) {\n      setValue(toValue)\n      onFinish()\n    } else {\n      setValue(position)\n      animationFrameId = requestAnimationFrame(() => {\n        update({\n          lastPosition: position,\n          lastTime: time,\n          lastVelocity: velocity,\n        })\n      })\n    }\n  }\n\n  return [\n    () => {\n      update({ lastPosition: fromValue })\n    },\n    () => {\n      cancelAnimationFrame(animationFrameId)\n    },\n  ]\n}\n\n/**\n * find the first node in the hierarchy that matches the given 'is' typescript\n * type guard predicate\n */\nexport function findParentThatIs<T extends (a: IAnyStateTreeNode) => boolean>(\n  node: IAnyStateTreeNode,\n  predicate: T,\n): TypeTestedByPredicate<T> {\n  return findParentThat(node, predicate)\n}\n\n/**\n * get the current JBrowse session model, starting at any node in the state\n * tree\n */\nexport function getSession(node: IAnyStateTreeNode) {\n  try {\n    return findParentThatIs(node, isSessionModel)\n  } catch (e) {\n    throw new Error('no session model found!')\n  }\n}\n\n/**\n * get the state model of the view in the state tree that contains the given\n * node\n */\nexport function getContainingView(node: IAnyStateTreeNode) {\n  try {\n    return findParentThatIs(node, isViewModel)\n  } catch (e) {\n    throw new Error('no containing view found')\n  }\n}\n\n/**\n * get the state model of the view in the state tree that contains the given\n * node\n */\nexport function getContainingTrack(node: IAnyStateTreeNode) {\n  try {\n    return findParentThatIs(node, isTrackModel)\n  } catch (e) {\n    throw new Error('no containing track found')\n  }\n}\n\n/**\n * get the state model of the display in the state tree that contains the given\n * node\n */\nexport function getContainingDisplay(node: IAnyStateTreeNode) {\n  try {\n    return findParentThatIs(node, isDisplayModel)\n  } catch (e) {\n    throw new Error('no containing display found')\n  }\n}\n\n/**\n * Assemble a 1-based \"locString\" from an interbase genomic location\n * @param region - Region\n * @example\n * ```ts\n * assembleLocString({ refName: 'chr1', start: 0, end: 100 })\n * //  'chr1:1..100'\n * ```\n * @example\n * ```ts\n * assembleLocString({ assemblyName: 'hg19', refName: 'chr1', start: 0, end: 100 })\n * //  '{hg19}chr1:1..100'\n * ```\n * @example\n * ```ts\n * assembleLocString({ refName: 'chr1' })\n * //  'chr1'\n * ```\n * @example\n * ```ts\n * assembleLocString({ refName: 'chr1', start: 0 })\n * //  'chr1:1..'\n * ```\n * @example\n * ```ts\n * assembleLocString({ refName: 'chr1', end: 100 })\n * //  'chr1:1..100'\n * ```\n * @example\n * ```ts\n * assembleLocString({ refName: 'chr1', start: 0, end: 1 })\n * //  'chr1:1'\n * ```\n */\nexport function assembleLocString(region: ParsedLocString) {\n  return assembleLocStringFast(region, toLocale)\n}\n\n// same as assembleLocString above, but does not perform toLocaleString which\n// can slow down the speed of block calculations which use assembleLocString\n// for block.key\nexport function assembleLocStringFast(\n  region: ParsedLocString,\n  cb = (n: number): string | number => n,\n) {\n  const { assemblyName, refName, start, end, reversed } = region\n  const assemblyNameString = assemblyName ? `{${assemblyName}}` : ''\n  let startString: string\n  if (start !== undefined) {\n    startString = `:${cb(start + 1)}`\n  } else if (end !== undefined) {\n    startString = ':1'\n  } else {\n    startString = ''\n  }\n  let endString: string\n  if (end !== undefined) {\n    endString = start !== undefined && start + 1 === end ? '' : `..${cb(end)}`\n  } else {\n    endString = start !== undefined ? '..' : ''\n  }\n  let rev = ''\n  if (reversed) {\n    rev = '[rev]'\n  }\n  return `${assemblyNameString}${refName}${startString}${endString}${rev}`\n}\n\nexport interface ParsedLocString {\n  assemblyName?: string\n  refName: string\n  start?: number\n  end?: number\n  reversed?: boolean\n}\n\nexport function parseLocStringOneBased(\n  locString: string,\n  isValidRefName: (refName: string, assemblyName?: string) => boolean,\n): ParsedLocString {\n  if (!locString) {\n    throw new Error('no location string provided, could not parse')\n  }\n  let reversed = false\n  if (locString.endsWith('[rev]')) {\n    reversed = true\n    locString = locString.replace(/\\[rev]$/, '')\n  }\n  // remove any whitespace\n  locString = locString.replace(/\\s/, '')\n  // refNames can have colons, refer to\n  // https://samtools.github.io/hts-specs/SAMv1.pdf Appendix A\n  const assemblyMatch = /({(.+)})?(.+)/.exec(locString)\n  if (!assemblyMatch) {\n    throw new Error(`invalid location string: \"${locString}\"`)\n  }\n  const [, , assemblyName2, location2] = assemblyMatch\n  const assemblyName = assemblyName2!\n  const location = location2!\n  if (!assemblyName && location.startsWith('{}')) {\n    throw new Error(`no assembly name was provided in location \"${location}\"`)\n  }\n  const lastColonIdx = location.lastIndexOf(':')\n  if (lastColonIdx === -1) {\n    if (isValidRefName(location, assemblyName)) {\n      return {\n        assemblyName,\n        refName: location,\n        reversed,\n      }\n    }\n    throw new Error(`Unknown reference sequence \"${location}\"`)\n  }\n  const prefix = location.slice(0, lastColonIdx)\n  const suffix = location.slice(lastColonIdx + 1)\n  if (\n    isValidRefName(prefix, assemblyName) &&\n    isValidRefName(location, assemblyName)\n  ) {\n    throw new Error(`ambiguous location string: \"${locString}\"`)\n  } else if (isValidRefName(prefix, assemblyName)) {\n    if (suffix) {\n      // see if it's a range\n      const rangeMatch =\n        /^(-?(\\d+|\\d{1,3}(,\\d{3})*))(\\.\\.|-)(-?(\\d+|\\d{1,3}(,\\d{3})*))$/.exec(\n          suffix,\n        )\n      // see if it's a single point\n      const singleMatch = /^(-?(\\d+|\\d{1,3}(,\\d{3})*))(\\.\\.|-)?$/.exec(suffix)\n      if (rangeMatch) {\n        const [, start, , , , end] = rangeMatch\n        if (start !== undefined && end !== undefined) {\n          return {\n            assemblyName,\n            refName: prefix,\n            start: +start.replaceAll(',', ''),\n            end: +end.replaceAll(',', ''),\n            reversed,\n          }\n        }\n      } else if (singleMatch) {\n        const [, start, , , separator] = singleMatch\n        if (start !== undefined) {\n          if (separator) {\n            // indefinite end\n            return {\n              assemblyName,\n              refName: prefix,\n              start: +start.replaceAll(',', ''),\n              reversed,\n            }\n          }\n          return {\n            assemblyName,\n            refName: prefix,\n            start: +start.replaceAll(',', ''),\n            end: +start.replaceAll(',', ''),\n            reversed,\n          }\n        }\n      } else {\n        throw new Error(\n          `could not parse range \"${suffix}\" on location \"${locString}\"`,\n        )\n      }\n    } else {\n      return {\n        assemblyName,\n        refName: prefix,\n        reversed,\n      }\n    }\n  } else if (isValidRefName(location, assemblyName)) {\n    return {\n      assemblyName,\n      refName: location,\n      reversed,\n    }\n  }\n  throw new Error(`unknown reference sequence name in location \"${locString}\"`)\n}\n\n/**\n * Parse a 1-based location string into an interbase genomic location\n * @param locString - Location string\n * @param isValidRefName - Function that checks if a refName exists in the set\n * of all known refNames, or in the set of refNames for an assembly if\n * assemblyName is given\n * @example\n * ```ts\n * parseLocString('chr1:1..100', isValidRefName)\n * //  { refName: 'chr1', start: 0, end: 100 }\n * ```\n * @example\n * ```ts\n * parseLocString('chr1:1-100', isValidRefName)\n * //  { refName: 'chr1', start: 0, end: 100 }\n * ```\n * @example\n * ```ts\n * parseLocString(`{hg19}chr1:1..100`, isValidRefName)\n * //  { assemblyName: 'hg19', refName: 'chr1', start: 0, end: 100 }\n * ```\n * @example\n * ```ts\n * parseLocString('chr1', isValidRefName)\n * //  { refName: 'chr1' }\n * ```\n * @example\n * ```ts\n * parseLocString('chr1:1', isValidRefName)\n * //  { refName: 'chr1', start: 0, end: 1 }\n * ```\n * @example\n * ```ts\n * parseLocString('chr1:1..', isValidRefName)\n * //  { refName: 'chr1', start: 0}\n * ```\n */\nexport function parseLocString(\n  locString: string,\n  isValidRefName: (refName: string, assemblyName?: string) => boolean,\n) {\n  const parsed = parseLocStringOneBased(locString, isValidRefName)\n  if (typeof parsed.start === 'number') {\n    parsed.start -= 1\n  }\n  return parsed\n}\n\nexport function compareLocs(locA: ParsedLocString, locB: ParsedLocString) {\n  const assemblyComp =\n    locA.assemblyName || locB.assemblyName\n      ? (locA.assemblyName || '').localeCompare(locB.assemblyName || '')\n      : 0\n  if (assemblyComp) {\n    return assemblyComp\n  }\n\n  const refComp =\n    locA.refName || locB.refName\n      ? (locA.refName || '').localeCompare(locB.refName || '')\n      : 0\n  if (refComp) {\n    return refComp\n  }\n\n  if (locA.start !== undefined && locB.start !== undefined) {\n    const startComp = locA.start - locB.start\n    if (startComp) {\n      return startComp\n    }\n  }\n  if (locA.end !== undefined && locB.end !== undefined) {\n    const endComp = locA.end - locB.end\n    if (endComp) {\n      return endComp\n    }\n  }\n  return 0\n}\n\nexport function compareLocStrings(\n  a: string,\n  b: string,\n  isValidRefName: (refName: string, assemblyName?: string) => boolean,\n) {\n  const locA = parseLocString(a, isValidRefName)\n  const locB = parseLocString(b, isValidRefName)\n  return compareLocs(locA, locB)\n}\n\n/**\n * Ensure that a number is at least min and at most max.\n *\n * @param num -\n * @param min -\n * @param  max -\n */\nexport function clamp(num: number, min: number, max: number) {\n  if (num < min) {\n    return min\n  }\n  if (num > max) {\n    return max\n  }\n  return num\n}\n\nfunction roundToNearestPointOne(num: number) {\n  return Math.round(num * 10) / 10\n}\n\n/**\n * @param bp -\n * @param region -\n * @param bpPerPx -\n */\nexport function bpToPx(\n  bp: number,\n  {\n    reversed,\n    end = 0,\n    start = 0,\n  }: { start?: number; end?: number; reversed?: boolean },\n  bpPerPx: number,\n) {\n  return roundToNearestPointOne((reversed ? end - bp : bp - start) / bpPerPx)\n}\n\nconst oneEightyOverPi = 180 / Math.PI\nconst piOverOneEighty = Math.PI / 180\nexport function radToDeg(radians: number) {\n  return (radians * oneEightyOverPi) % 360\n}\nexport function degToRad(degrees: number) {\n  return (degrees * piOverOneEighty) % (2 * Math.PI)\n}\n\n/**\n * @returns [x, y]\n */\nexport function polarToCartesian(rho: number, theta: number) {\n  return [rho * Math.cos(theta), rho * Math.sin(theta)] as [number, number]\n}\n\n/**\n * @param x - the x\n * @param y - the y\n * @returns [rho, theta]\n */\nexport function cartesianToPolar(x: number, y: number) {\n  const rho = Math.sqrt(x * x + y * y)\n  const theta = Math.atan(y / x)\n  return [rho, theta] as [number, number]\n}\ninterface MinimalRegion {\n  start: number\n  end: number\n  reversed?: boolean\n}\n\nexport function featureSpanPx(\n  feature: Feature,\n  region: MinimalRegion,\n  bpPerPx: number,\n) {\n  return bpSpanPx(feature.get('start'), feature.get('end'), region, bpPerPx)\n}\n\nexport function bpSpanPx(\n  leftBp: number,\n  rightBp: number,\n  region: MinimalRegion,\n  bpPerPx: number,\n) {\n  const start = bpToPx(leftBp, region, bpPerPx)\n  const end = bpToPx(rightBp, region, bpPerPx)\n  return region.reversed ? ([end, start] as const) : ([start, end] as const)\n}\n\n// do an array map of an iterable\nexport function iterMap<T, U>(\n  iter: Iterable<T>,\n  func: (arg: T) => U,\n  sizeHint?: number,\n) {\n  const results = Array.from<U>({ length: sizeHint || 0 })\n  let counter = 0\n  for (const item of iter) {\n    results[counter] = func(item)\n    counter += 1\n  }\n  return results\n}\n\n/**\n * Returns the index of the last element in the array where predicate is true,\n * and -1 otherwise. Based on https://stackoverflow.com/a/53187807\n *\n * @param array - The source array to search in\n *\n * @param predicate - find calls predicate once for each element of the array, in\n * descending order, until it finds one where predicate returns true.\n *\n * @returns findLastIndex returns element index where predicate is true.\n * Otherwise, findLastIndex returns -1.\n */\nexport function findLastIndex<T>(\n  array: T[],\n  predicate: (value: T, index: number, obj: T[]) => boolean,\n) {\n  let l = array.length\n  while (l--) {\n    if (predicate(array[l]!, l, array)) {\n      return l\n    }\n  }\n  return -1\n}\n\nexport function findLast<T>(\n  array: T[],\n  predicate: (value: T, index: number, obj: T[]) => boolean,\n) {\n  let l = array.length\n  while (l--) {\n    if (predicate(array[l]!, l, array)) {\n      return array[l]\n    }\n  }\n  return undefined\n}\n\nexport function renameRegionIfNeeded(\n  refNameMap: Record<string, string> | undefined,\n  region: Region | Instance<typeof MUIRegion>,\n): Region & { originalRefName?: string } {\n  if (isStateTreeNode(region) && !isAlive(region)) {\n    return region\n  }\n\n  if (refNameMap?.[region.refName]) {\n    // clone the region so we don't modify it\n    region = isStateTreeNode(region)\n      ? { ...getSnapshot(region) }\n      : { ...region }\n\n    // modify it directly in the container\n    const newRef = refNameMap[region.refName]\n    if (newRef) {\n      return { ...region, refName: newRef, originalRefName: region.refName }\n    }\n  }\n  return region\n}\n\nexport async function renameRegionsIfNeeded<\n  ARGTYPE extends {\n    assemblyName?: string\n    regions?: Region[]\n    stopToken?: string\n    adapterConfig: Record<string, unknown>\n    sessionId: string\n    statusCallback?: (arg: string) => void\n  },\n>(assemblyManager: AssemblyManager, args: ARGTYPE) {\n  const { regions = [], adapterConfig } = args\n  if (!args.sessionId) {\n    throw new Error('sessionId is required')\n  }\n\n  const assemblyNames = regions.map(region => region.assemblyName)\n  const assemblyMaps = Object.fromEntries(\n    await Promise.all(\n      [...new Set(assemblyNames)].map(async assemblyName => {\n        return [\n          assemblyName,\n          await assemblyManager.getRefNameMapForAdapter(\n            adapterConfig,\n            assemblyName,\n            args,\n          ),\n        ]\n      }),\n    ),\n  )\n\n  return {\n    ...args,\n    regions: regions.map((region, i) =>\n      // note: uses assemblyNames defined above since region could be dead now\n      renameRegionIfNeeded(assemblyMaps[assemblyNames[i]!], region),\n    ),\n  }\n}\n\nexport function minmax(a: number, b: number) {\n  return [Math.min(a, b), Math.max(a, b)] as const\n}\n\nexport function shorten(name: string, max = 70, short = 30) {\n  return name.length > max\n    ? `${name.slice(0, short)}...${name.slice(-short)}`\n    : name\n}\n\nexport function stringify(\n  {\n    refName,\n    coord,\n    assemblyName,\n    oob,\n  }: {\n    assemblyName?: string\n    coord: number\n    refName?: string\n    oob?: boolean\n  },\n  useAssemblyName?: boolean,\n) {\n  return [\n    assemblyName && useAssemblyName ? `{${assemblyName}}` : '',\n    refName\n      ? `${shorten(refName)}:${toLocale(coord)}${oob ? ' (out of bounds)' : ''}`\n      : '',\n  ].join('')\n}\n\n// this is recommended in a later comment in\n// https://github.com/electron/electron/issues/2288 for detecting electron in a\n// renderer process, which is the one that has node enabled for us\n//\n// const isElectron = process.versions.electron\n// const i2 = process.versions.hasOwnProperty('electron')\nexport const isElectron = /electron/i.test(\n  typeof navigator !== 'undefined' ? navigator.userAgent : '',\n)\n\n// from bioperl: tr/acgtrymkswhbvdnxACGTRYMKSWHBVDNX/tgcayrkmswdvbhnxTGCAYRKMSWDVBHNX/\n// generated with:\n// perl -MJSON -E '@l = split \"\",\"acgtrymkswhbvdnxACGTRYMKSWHBVDNX\"; print to_json({ map { my $in = $_; tr/acgtrymkswhbvdnxACGTRYMKSWHBVDNX/tgcayrkmswdvbhnxTGCAYRKMSWDVBHNX/; $in => $_ } @l})'\nexport const complementTable = {\n  S: 'S',\n  w: 'w',\n  T: 'A',\n  r: 'y',\n  a: 't',\n  N: 'N',\n  K: 'M',\n  x: 'x',\n  d: 'h',\n  Y: 'R',\n  V: 'B',\n  y: 'r',\n  M: 'K',\n  h: 'd',\n  k: 'm',\n  C: 'G',\n  g: 'c',\n  t: 'a',\n  A: 'T',\n  n: 'n',\n  W: 'W',\n  X: 'X',\n  m: 'k',\n  v: 'b',\n  B: 'V',\n  s: 's',\n  H: 'D',\n  c: 'g',\n  D: 'H',\n  b: 'v',\n  R: 'Y',\n  G: 'C',\n} as Record<string, string>\n\nexport function revcom(str: string) {\n  let revcomped = ''\n  for (let i = str.length - 1; i >= 0; i--) {\n    revcomped += complementTable[str[i]!] ?? str[i]\n  }\n  return revcomped\n}\n\nexport function reverse(str: string) {\n  let reversed = ''\n  for (let i = str.length - 1; i >= 0; i--) {\n    reversed += str[i]!\n  }\n  return reversed\n}\n\nexport function complement(str: string) {\n  let comp = ''\n\n  for (const element of str) {\n    comp += complementTable[element] ?? element\n  }\n  return comp\n}\n\n// requires immediate execution in jest environment, because (hypothesis) it\n// otherwise listens for prerendered_canvas but reads empty pixels, and doesn't\n// get the contents of the canvas\nexport const rIC =\n  typeof jest === 'undefined'\n    ? // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n      typeof window !== 'undefined' && window.requestIdleCallback\n      ? window.requestIdleCallback\n      : (cb: () => void) =>\n          setTimeout(() => {\n            cb()\n          }, 1)\n    : (cb: () => void) => {\n        cb()\n      }\n\n// prettier-ignore\nconst widths = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.2796875,0.2765625,0.3546875,0.5546875,0.5546875,0.8890625,0.665625,0.190625,0.3328125,0.3328125,0.3890625,0.5828125,0.2765625,0.3328125,0.2765625,0.3015625,0.5546875,0.5546875,0.5546875,0.5546875,0.5546875,0.5546875,0.5546875,0.5546875,0.5546875,0.5546875,0.2765625,0.2765625,0.584375,0.5828125,0.584375,0.5546875,1.0140625,0.665625,0.665625,0.721875,0.721875,0.665625,0.609375,0.7765625,0.721875,0.2765625,0.5,0.665625,0.5546875,0.8328125,0.721875,0.7765625,0.665625,0.7765625,0.721875,0.665625,0.609375,0.721875,0.665625,0.94375,0.665625,0.665625,0.609375,0.2765625,0.3546875,0.2765625,0.4765625,0.5546875,0.3328125,0.5546875,0.5546875,0.5,0.5546875,0.5546875,0.2765625,0.5546875,0.5546875,0.221875,0.240625,0.5,0.221875,0.8328125,0.5546875,0.5546875,0.5546875,0.5546875,0.3328125,0.5,0.2765625,0.5546875,0.5,0.721875,0.5,0.5,0.5,0.3546875,0.259375,0.353125,0.5890625]\n\n// xref https://gist.github.com/tophtucker/62f93a4658387bb61e4510c37e2e97cf\nexport function measureText(str: unknown, fontSize = 10) {\n  const avg = 0.5279276315789471\n  const s = String(str)\n  let total = 0\n  for (let i = 0; i < s.length; i++) {\n    const code = s.charCodeAt(i)\n    total += widths[code] ?? avg\n  }\n  return total * fontSize\n}\n\nexport type Frame = 1 | 2 | 3 | -1 | -2 | -3\n\nexport function getFrame(\n  start: number,\n  end: number,\n  strand: 1 | -1,\n  phase: 0 | 1 | 2,\n): Frame {\n  return strand === 1\n    ? ((((start + phase) % 3) + 1) as 1 | 2 | 3)\n    : ((-1 * ((end - phase) % 3) - 1) as -1 | -2 | -3)\n}\n\nexport const defaultStarts = ['ATG']\nexport const defaultStops = ['TAA', 'TAG', 'TGA']\nexport const defaultCodonTable = {\n  TCA: 'S',\n  TCC: 'S',\n  TCG: 'S',\n  TCT: 'S',\n  TTC: 'F',\n  TTT: 'F',\n  TTA: 'L',\n  TTG: 'L',\n  TAC: 'Y',\n  TAT: 'Y',\n  TAA: '*',\n  TAG: '*',\n  TGC: 'C',\n  TGT: 'C',\n  TGA: '*',\n  TGG: 'W',\n  CTA: 'L',\n  CTC: 'L',\n  CTG: 'L',\n  CTT: 'L',\n  CCA: 'P',\n  CCC: 'P',\n  CCG: 'P',\n  CCT: 'P',\n  CAC: 'H',\n  CAT: 'H',\n  CAA: 'Q',\n  CAG: 'Q',\n  CGA: 'R',\n  CGC: 'R',\n  CGG: 'R',\n  CGT: 'R',\n  ATA: 'I',\n  ATC: 'I',\n  ATT: 'I',\n  ATG: 'M',\n  ACA: 'T',\n  ACC: 'T',\n  ACG: 'T',\n  ACT: 'T',\n  AAC: 'N',\n  AAT: 'N',\n  AAA: 'K',\n  AAG: 'K',\n  AGC: 'S',\n  AGT: 'S',\n  AGA: 'R',\n  AGG: 'R',\n  GTA: 'V',\n  GTC: 'V',\n  GTG: 'V',\n  GTT: 'V',\n  GCA: 'A',\n  GCC: 'A',\n  GCG: 'A',\n  GCT: 'A',\n  GAC: 'D',\n  GAT: 'D',\n  GAA: 'E',\n  GAG: 'E',\n  GGA: 'G',\n  GGC: 'G',\n  GGG: 'G',\n  GGT: 'G',\n}\n\n/**\n * take CodonTable above and generate larger codon table that includes all\n * permutations of upper and lower case nucleotides\n */\nexport function generateCodonTable(table: any) {\n  const tempCodonTable: Record<string, string> = {}\n  for (const codon of Object.keys(table)) {\n    const aa = table[codon]\n    const nucs: string[][] = []\n    for (let i = 0; i < 3; i++) {\n      const nuc = codon.charAt(i)\n      nucs[i] = []\n      nucs[i]![0] = nuc.toUpperCase()\n      nucs[i]![1] = nuc.toLowerCase()\n    }\n    for (let i = 0; i < 2; i++) {\n      const n0 = nucs[0]![i]!\n      for (let j = 0; j < 2; j++) {\n        const n1 = nucs[1]![j]!\n        for (let k = 0; k < 2; k++) {\n          const n2 = nucs[2]![k]!\n          const triplet = n0 + n1 + n2\n          tempCodonTable[triplet] = aa\n        }\n      }\n    }\n  }\n  return tempCodonTable\n}\n\n// call statusCallback with current status and clear when finished\nexport async function updateStatus<U>(\n  msg: string,\n  cb: (arg: string) => void,\n  fn: () => U | Promise<U>,\n) {\n  cb(msg)\n  const res = await fn()\n  cb('')\n  return res\n}\n\n// call statusCallback with current status and clear when finished, and check\n// stopToken afterwards\nexport async function updateStatus2<U>(\n  msg: string,\n  cb: (arg: string) => void,\n  stopToken: string | undefined,\n  fn: () => U | Promise<U>,\n) {\n  cb(msg)\n  const res = await fn()\n  checkStopToken(stopToken)\n  cb('')\n  return res\n}\n\nexport function hashCode(str: string) {\n  let hash = 0\n  if (str.length === 0) {\n    return hash\n  }\n  for (let i = 0; i < str.length; i++) {\n    const chr = str.charCodeAt(i)\n    hash = (hash << 5) - hash + chr\n    hash |= 0 // Convert to 32bit integer\n  }\n  return hash\n}\n\nexport function objectHash(obj: Record<string, any>) {\n  return `${hashCode(JSON.stringify(obj))}`\n}\n\ninterface VirtualOffset {\n  blockPosition: number\n}\ninterface Block {\n  minv: VirtualOffset\n  maxv: VirtualOffset\n}\n\nexport async function bytesForRegions(\n  regions: Region[],\n  index: {\n    blocksForRange: (\n      ref: string,\n      start: number,\n      end: number,\n    ) => Promise<Block[]>\n  },\n) {\n  const blockResults = await Promise.all(\n    regions.map(r => index.blocksForRange(r.refName, r.start, r.end)),\n  )\n\n  return blockResults\n    .flat()\n    .map(block => ({\n      start: block.minv.blockPosition,\n      end: block.maxv.blockPosition + 65535,\n    }))\n    .reduce((a, b) => a + b.end - b.start, 0)\n}\n\nexport interface ViewSnap {\n  bpPerPx: number\n  interRegionPaddingWidth: number\n  minimumBlockWidth: number\n  width: number\n  offsetPx: number\n  staticBlocks: { contentBlocks: BaseBlock[]; blocks: BaseBlock[] }\n  displayedRegions: (IStateTreeNode & {\n    start: number\n    end: number\n    refName: string\n    reversed?: boolean\n    assemblyName: string\n  })[]\n}\n\n// supported adapter types by text indexer ensure that this matches the method\n// found in @jbrowse/text-indexing/util\nexport function isSupportedIndexingAdapter(type = '') {\n  return [\n    'Gff3TabixAdapter',\n    'VcfTabixAdapter',\n    'Gff3Adapter',\n    'VcfAdapter',\n  ].includes(type)\n}\n\nexport function getBpDisplayStr(total: number) {\n  if (Math.floor(total / 1_000_000) > 0) {\n    return `${r(total / 1_000_000)}Mbp`\n  } else if (Math.floor(total / 1_000) > 0) {\n    return `${r(total / 1_000)}Kbp`\n  } else {\n    return `${Math.floor(total)}bp`\n  }\n}\n\nfunction r(s: number) {\n  return toLocale(Number.parseFloat(s.toPrecision(3)))\n}\nexport function getProgressDisplayStr(current: number, total: number) {\n  if (Math.floor(total / 1_000_000) > 0) {\n    return `${r(current / 1_000_000)}/${r(total / 1_000_000)}Mb`\n  } else if (Math.floor(total / 1_000) > 0) {\n    return `${r(current / 1_000)}/${r(total / 1_000)}Kb`\n  } else {\n    return `${r(current)}/${r(total)}}bytes`\n  }\n}\n\nexport function toLocale(n: number) {\n  return n.toLocaleString('en-US')\n}\n\nexport function getTickDisplayStr(totalBp: number, bpPerPx: number) {\n  return Math.floor(bpPerPx / 1_000) > 0\n    ? `${toLocale(Number.parseFloat((totalBp / 1_000_000).toFixed(2)))}M`\n    : toLocale(Math.floor(totalBp))\n}\n\nexport function getViewParams(model: IAnyStateTreeNode, exportSVG?: boolean) {\n  // @ts-expect-error\n  const { dynamicBlocks, staticBlocks, offsetPx } = getContainingView(model)\n  const b = dynamicBlocks?.contentBlocks[0] || {}\n  const staticblock = staticBlocks?.contentBlocks[0] || {}\n  const staticblock1 = staticBlocks?.contentBlocks[1] || {}\n  return {\n    offsetPx: exportSVG ? 0 : offsetPx - staticblock.offsetPx,\n    offsetPx1: exportSVG ? 0 : offsetPx - staticblock1.offsetPx,\n    start: b.start as number,\n    end: b.end as number,\n  }\n}\n\nexport function getLayoutId({\n  sessionId,\n  layoutId,\n}: {\n  sessionId: string\n  layoutId: string\n}) {\n  return `${sessionId}-${layoutId}`\n}\n\n// Hook from https://usehooks.com/useLocalStorage/\nexport function useLocalStorage<T>(key: string, initialValue: T) {\n  const [storedValue, setStoredValue] = useState<T>(() => {\n    if (typeof window === 'undefined') {\n      return initialValue\n    }\n    try {\n      const item = window.localStorage.getItem(key)\n      return item ? JSON.parse(item) : initialValue\n    } catch (error) {\n      console.error(error)\n      return initialValue\n    }\n  })\n  const setValue = (value: T | ((val: T) => T)) => {\n    try {\n      const valueToStore =\n        // eslint-disable-next-line unicorn/no-instanceof-builtins\n        value instanceof Function ? value(storedValue) : value\n      setStoredValue(valueToStore)\n      if (typeof window !== 'undefined') {\n        window.localStorage.setItem(key, JSON.stringify(valueToStore))\n      }\n    } catch (error) {\n      console.error(error)\n    }\n  }\n  return [storedValue, setValue] as const\n}\n\nexport function getUriLink(value: { uri: string; baseUri?: string }) {\n  const { uri, baseUri = '' } = value\n  let href: string\n  try {\n    href = new URL(uri, baseUri).href\n  } catch (e) {\n    href = uri\n  }\n  return href\n}\n\nexport function getStr(obj: unknown) {\n  return isObject(obj)\n    ? isUriLocation(obj)\n      ? getUriLink(obj)\n      : JSON.stringify(obj)\n    : String(obj)\n}\n\n// tries to measure grid width without HTML tags included\nexport function coarseStripHTML(s: string) {\n  return s.replaceAll(/(<([^>]+)>)/gi, '')\n}\n\n// based on autolink-js, license MIT\n// https://github.com/bryanwoods/autolink-js/blob/1418049970152c56ced73d43dcc62d80b320fb71/autolink.js#L9\nexport function linkify(s: string) {\n  const pattern =\n    /(^|[\\s\\n]|<[A-Za-z]*\\/?>)((?:https?|ftp):\\/\\/[-A-Z0-9+\\u0026\\u2019@#/%?=()~_|!:,.;]*[-A-Z0-9+\\u0026@#/%=~()_|])/gi\n  return s.replaceAll(pattern, '$1<a href=\\'$2\\' target=\"_blank\">$2</a>')\n}\n\n// heuristic measurement for a column of a @mui/x-data-grid, pass in\n// values from a column\nexport function measureGridWidth(\n  elements: unknown[],\n  args?: {\n    minWidth?: number\n    fontSize?: number\n    maxWidth?: number\n    padding?: number\n    stripHTML?: boolean\n  },\n) {\n  const {\n    padding = 30,\n    minWidth = 80,\n    fontSize = 12,\n    maxWidth = 1000,\n    stripHTML = false,\n  } = args || {}\n  return max(\n    elements\n      .map(element => getStr(element))\n      .map(str => (stripHTML ? coarseStripHTML(str) : str))\n      .map(str => measureText(str, fontSize))\n      .map(n => Math.min(Math.max(n + padding, minWidth), maxWidth)),\n  )\n}\n\nexport function getEnv(obj: any) {\n  return getEnvMST<{ pluginManager: PluginManager }>(obj)\n}\n\nexport function localStorageGetItem(item: string) {\n  return typeof localStorage !== 'undefined'\n    ? localStorage.getItem(item)\n    : undefined\n}\n\nexport function localStorageSetItem(str: string, item: string) {\n  if (typeof localStorage !== 'undefined') {\n    localStorage.setItem(str, item)\n  }\n}\n\nexport function max(arr: Iterable<number>, init = Number.NEGATIVE_INFINITY) {\n  let max = init\n  for (const entry of arr) {\n    max = Math.max(entry, max)\n  }\n  return max\n}\n\nexport function min(arr: Iterable<number>, init = Number.POSITIVE_INFINITY) {\n  let min = init\n  for (const entry of arr) {\n    min = Math.min(entry, min)\n  }\n  return min\n}\n\nexport function sum(arr: Iterable<number>) {\n  let sum = 0\n  for (const entry of arr) {\n    sum += entry\n  }\n  return sum\n}\n\nexport function avg(arr: number[]) {\n  return sum(arr) / arr.length\n}\n\nexport function groupBy<T>(array: Iterable<T>, predicate: (v: T) => string) {\n  const result = {} as Record<string, T[]>\n  for (const value of array) {\n    const t = predicate(value)\n    if (!result[t]) {\n      result[t] = []\n    }\n    result[t].push(value)\n  }\n  return result\n}\n\nexport function notEmpty<T>(value: T | null | undefined): value is T {\n  return value !== null && value !== undefined\n}\n\nexport function mergeIntervals<T extends { start: number; end: number }>(\n  intervals: T[],\n  w = 5000,\n) {\n  // test if there are at least 2 intervals\n  if (intervals.length <= 1) {\n    return intervals\n  }\n\n  const stack = [] as T[]\n  let top = null\n\n  // sort the intervals based on their start values\n  intervals = intervals.sort((a, b) => a.start - b.start)\n\n  // push the 1st interval into the stack\n  stack.push(intervals[0]!)\n\n  // start from the next interval and merge if needed\n  for (let i = 1; i < intervals.length; i++) {\n    // get the top element\n    top = stack.at(-1)!\n\n    // if the current interval doesn't overlap with the\n    // stack top element, push it to the stack\n    if (top.end + w < intervals[i]!.start - w) {\n      stack.push(intervals[i]!)\n    }\n    // otherwise update the end value of the top element\n    // if end of current interval is higher\n    else if (top.end < intervals[i]!.end) {\n      top.end = Math.max(top.end, intervals[i]!.end)\n      stack.pop()\n      stack.push(top)\n    }\n  }\n\n  return stack\n}\n\nexport interface BasicFeature {\n  end: number\n  start: number\n  refName: string\n}\n\n// returns new array non-overlapping features\nexport function gatherOverlaps<T extends BasicFeature>(regions: T[], w = 5000) {\n  const memo = {} as Record<string, T[]>\n  for (const x of regions) {\n    if (!memo[x.refName]) {\n      memo[x.refName] = []\n    }\n    memo[x.refName]!.push(x)\n  }\n\n  return Object.values(memo).flatMap(group =>\n    mergeIntervals(\n      group.sort((a, b) => a.start - b.start),\n      w,\n    ),\n  )\n}\n\nexport function stripAlpha(str: string) {\n  return colord(str).alpha(1).toHex()\n}\n\nexport function getStrokeProps(str: string) {\n  const c = colord(str)\n  return {\n    strokeOpacity: c.alpha(),\n    stroke: c.alpha(1).toHex(),\n  }\n}\n\nexport function getFillProps(str: string) {\n  const c = colord(str)\n  return {\n    fillOpacity: c.alpha(),\n    fill: c.alpha(1).toHex(),\n  }\n}\n\n// https://react.dev/reference/react-dom/server/renderToString#removing-rendertostring-from-the-client-code\nexport function renderToStaticMarkup(node: React.ReactElement) {\n  const div = document.createElement('div')\n  flushSync(() => {\n    createRoot(div).render(node)\n  })\n  return div.innerHTML.replaceAll(/\\brgba\\((.+?),[^,]+?\\)/g, 'rgb($1)')\n}\n\nexport function isGzip(buf: Uint8Array) {\n  return buf[0] === 31 && buf[1] === 139 && buf[2] === 8\n}\n\nexport async function fetchAndMaybeUnzip(\n  loc: GenericFilehandle,\n  opts?: BaseOptions,\n) {\n  const { statusCallback = () => {} } = opts || {}\n  const buf = (await updateStatus('Downloading file', statusCallback, () =>\n    // @ts-expect-error\n    loc.readFile(opts),\n  )) as unknown as Uint8Array\n  return isGzip(buf)\n    ? await updateStatus('Unzipping', statusCallback, () => unzip(buf))\n    : buf\n}\n\nexport async function fetchAndMaybeUnzipText(\n  loc: GenericFilehandle,\n  opts?: BaseOptions,\n) {\n  const buffer = await fetchAndMaybeUnzip(loc, opts)\n  // 512MB  max chrome string length is 512MB\n  if (buffer.length > 536_870_888) {\n    throw new Error('Data exceeds maximum string length (512MB)')\n  }\n  return new TextDecoder('utf8', { fatal: true }).decode(buffer)\n}\n\n// MIT https://github.com/inspect-js/is-object\nexport function isObject(\n  x: unknown,\n): x is Record<string | symbol | number, unknown> {\n  return typeof x === 'object' && x !== null\n}\n\nexport function localStorageGetNumber(key: string, defaultVal: number) {\n  return +(localStorageGetItem(key) ?? defaultVal)\n}\n\nexport function localStorageGetBoolean(key: string, defaultVal: boolean) {\n  return Boolean(\n    JSON.parse(localStorageGetItem(key) || JSON.stringify(defaultVal)),\n  )\n}\n\nexport function forEachWithStopTokenCheck<T>(\n  iter: Iterable<T>,\n  stopToken: string | undefined,\n  arg: (arg: T) => void,\n  durationMs = 400,\n) {\n  let start = performance.now()\n  for (const t of iter) {\n    if (performance.now() - start > durationMs) {\n      checkStopToken(stopToken)\n      start = performance.now()\n    }\n    arg(t)\n  }\n}\n\nexport function testAdapter(\n  fileName: string,\n  regex: RegExp,\n  adapterHint: string | undefined,\n  expected: string,\n) {\n  return (regex.test(fileName) && !adapterHint) || adapterHint === expected\n}\nexport {\n  type Feature,\n  type SimpleFeatureSerialized,\n  type SimpleFeatureSerializedNoId,\n  default as SimpleFeature,\n  isFeature,\n} from './simpleFeature'\n\nexport { blobToDataURL } from './blobToDataURL'\nexport { makeAbortableReaction } from './makeAbortableReaction'\nexport * from './aborting'\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// the startup function\n__webpack_require__.x = () => {\n\t// Load entry module and return exports\n\t// This entry module depends on other loaded chunks and execution need to be delayed\n\tvar __webpack_exports__ = __webpack_require__.O(undefined, [6450,7844,558], () => (__webpack_require__(2657)))\n\t__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n\treturn __webpack_exports__;\n};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"static/js/\" + chunkId + \".\" + {\"12\":\"e96eaf18\",\"25\":\"52b48d0f\",\"26\":\"604133d9\",\"110\":\"3dfe0c2d\",\"120\":\"a447052d\",\"130\":\"6334c9b6\",\"266\":\"50f50db7\",\"311\":\"43c74065\",\"342\":\"cb46529b\",\"366\":\"6eabddd9\",\"419\":\"7bae2a5b\",\"439\":\"e705bf4e\",\"457\":\"0cc707d3\",\"489\":\"08fc36f2\",\"491\":\"4ea288b0\",\"518\":\"ab0c3dc8\",\"558\":\"b1b40300\",\"561\":\"f55fabfe\",\"596\":\"5636f409\",\"678\":\"85e6fd89\",\"741\":\"379d1229\",\"759\":\"f9545912\",\"772\":\"e63a5848\",\"946\":\"a06b170c\",\"972\":\"c0d17685\",\"1012\":\"a7d14de3\",\"1029\":\"8c806427\",\"1051\":\"5501917b\",\"1110\":\"3a8e493a\",\"1157\":\"410e4417\",\"1189\":\"648d8560\",\"1204\":\"5d3ce8d1\",\"1260\":\"77050b6d\",\"1266\":\"c401b01a\",\"1281\":\"c2091802\",\"1304\":\"12661d3e\",\"1310\":\"8a044016\",\"1326\":\"39e1d33e\",\"1345\":\"aaaaf175\",\"1354\":\"ded982ce\",\"1439\":\"ff1070ac\",\"1466\":\"de110872\",\"1503\":\"d277ab1c\",\"1516\":\"cfb82bcd\",\"1531\":\"5d3ccf9a\",\"1598\":\"668a16f4\",\"1631\":\"e9be9b2f\",\"1689\":\"311c276a\",\"1752\":\"a515830a\",\"1757\":\"a6d05bc3\",\"1811\":\"4bb2d9b3\",\"1819\":\"e6cf604f\",\"1822\":\"c7a8d9bd\",\"1824\":\"c2ed4bca\",\"1848\":\"f13883b2\",\"1915\":\"8c874604\",\"1961\":\"1285b9e5\",\"1978\":\"1faf7d31\",\"1996\":\"a37d9ec7\",\"1999\":\"2554e815\",\"2018\":\"fbd6534b\",\"2062\":\"1946c75d\",\"2130\":\"b691f864\",\"2141\":\"e1079fd0\",\"2197\":\"a5134ce4\",\"2241\":\"2fb85a1e\",\"2246\":\"bd0b2c84\",\"2249\":\"2ec610d9\",\"2303\":\"3ac409c4\",\"2306\":\"ebf31d0c\",\"2321\":\"ef211da9\",\"2367\":\"8a35ffb2\",\"2398\":\"731eb1c6\",\"2412\":\"41f4de31\",\"2418\":\"1bbb0d22\",\"2424\":\"53a06192\",\"2493\":\"20e8e76c\",\"2583\":\"db78b17f\",\"2598\":\"fef4ebb6\",\"2645\":\"4b79a04c\",\"2697\":\"fdd4f3d8\",\"2724\":\"9253b8d5\",\"2729\":\"9660c29b\",\"2775\":\"e25b4dd4\",\"2777\":\"ba937cdc\",\"2819\":\"fc0d30eb\",\"2820\":\"05c0f65f\",\"2861\":\"aa6cd5b7\",\"2872\":\"ff46e823\",\"2885\":\"bc0e06fc\",\"2947\":\"5622cb19\",\"3003\":\"0f0cbacd\",\"3011\":\"ba4afddd\",\"3012\":\"55f74f12\",\"3025\":\"01720b45\",\"3029\":\"cd8dcca2\",\"3047\":\"cff51664\",\"3091\":\"2667f3e9\",\"3103\":\"40823110\",\"3106\":\"84e821de\",\"3109\":\"3173f682\",\"3167\":\"decede5b\",\"3175\":\"544b57b8\",\"3199\":\"f9773055\",\"3248\":\"47104b3b\",\"3266\":\"e98b35b2\",\"3274\":\"f3f1b308\",\"3300\":\"4168fad5\",\"3301\":\"96f3c855\",\"3304\":\"64d4dd45\",\"3311\":\"dfaa944b\",\"3331\":\"921b945e\",\"3338\":\"7641647d\",\"3368\":\"6e9b017b\",\"3371\":\"a541d2fd\",\"3384\":\"d9bdb0f6\",\"3416\":\"8951860a\",\"3425\":\"780b95ef\",\"3497\":\"8b9602c3\",\"3525\":\"f9893c6c\",\"3550\":\"8b8832f2\",\"3578\":\"34dcd50a\",\"3656\":\"2e4d481e\",\"3718\":\"53fbe697\",\"3728\":\"99a63442\",\"3795\":\"750cecbc\",\"3832\":\"261f1ec6\",\"3862\":\"4e106067\",\"3902\":\"2b076206\",\"3940\":\"b4c17595\",\"4033\":\"66b72be4\",\"4058\":\"ee708b9c\",\"4060\":\"234faabc\",\"4094\":\"fa63da35\",\"4138\":\"4cee22be\",\"4141\":\"8d09e290\",\"4144\":\"573590e7\",\"4218\":\"5372440c\",\"4234\":\"46130ac8\",\"4284\":\"cb690590\",\"4335\":\"ca18aac6\",\"4345\":\"1ac65791\",\"4357\":\"847cef29\",\"4395\":\"8fda7b8b\",\"4414\":\"7f4caeab\",\"4435\":\"54028158\",\"4615\":\"dc35870f\",\"4629\":\"cb52001a\",\"4630\":\"65759b48\",\"4659\":\"b65d8547\",\"4753\":\"8b965594\",\"4755\":\"d501eb74\",\"4770\":\"a5240b8d\",\"4788\":\"ee5b0a7d\",\"4806\":\"1f49c609\",\"4811\":\"98598dc9\",\"4861\":\"6244e4c0\",\"4864\":\"094a2924\",\"4895\":\"380ffd76\",\"4902\":\"abd12d5f\",\"4947\":\"5b62a167\",\"4974\":\"a52c4397\",\"5088\":\"d7f4deb4\",\"5090\":\"bc77ac67\",\"5101\":\"5907cb7b\",\"5132\":\"126a76fb\",\"5156\":\"75195722\",\"5189\":\"747b28ba\",\"5243\":\"61eb9731\",\"5246\":\"bc8f28fc\",\"5312\":\"d24bed17\",\"5327\":\"8f1dcfc1\",\"5331\":\"51886e00\",\"5369\":\"d1eedf13\",\"5415\":\"6779f57b\",\"5505\":\"95d24186\",\"5524\":\"4e6b637c\",\"5535\":\"98cbd194\",\"5580\":\"3866cc38\",\"5608\":\"8d4c3a4b\",\"5668\":\"98a744a3\",\"5669\":\"90a55e1a\",\"5677\":\"38046404\",\"5727\":\"e1ef1e65\",\"5736\":\"fdaed8a4\",\"5746\":\"8f539bc9\",\"5763\":\"a841c568\",\"5808\":\"a3254a9c\",\"5813\":\"5bbd5bb4\",\"5847\":\"965237a1\",\"5863\":\"4336fc40\",\"5896\":\"46fc1d5f\",\"5904\":\"5420a8b2\",\"5930\":\"0637bbfb\",\"5951\":\"9cdac4e4\",\"5998\":\"617ea545\",\"6021\":\"64ad2681\",\"6043\":\"b32a39e7\",\"6054\":\"2d884ee8\",\"6149\":\"c6c4af73\",\"6157\":\"77f18ce5\",\"6205\":\"dce2c02f\",\"6214\":\"572d7a8a\",\"6235\":\"6309ed50\",\"6310\":\"1ae0650f\",\"6323\":\"1c706a2d\",\"6335\":\"78d18efd\",\"6342\":\"62a02e7b\",\"6391\":\"a44e0232\",\"6395\":\"611c999c\",\"6423\":\"1e8da08b\",\"6435\":\"95af5334\",\"6450\":\"29fae8c9\",\"6514\":\"d36ecbb8\",\"6526\":\"b2c8fd93\",\"6621\":\"38ce1cf8\",\"6658\":\"d4ecd887\",\"6703\":\"0df94149\",\"6738\":\"82a575be\",\"6746\":\"bfb75ac7\",\"6785\":\"07d4b66b\",\"6793\":\"a223c6f4\",\"6799\":\"754a77ae\",\"6800\":\"29f84bf2\",\"6823\":\"e3b1c1b5\",\"6833\":\"f4e72e51\",\"6834\":\"733dbd2e\",\"6839\":\"89d58ae0\",\"6946\":\"7ff1d1f0\",\"7013\":\"d92b3d0a\",\"7018\":\"2d5747a2\",\"7067\":\"e9508417\",\"7083\":\"9c73e3d1\",\"7097\":\"e63572c2\",\"7117\":\"0004f9c6\",\"7126\":\"24155876\",\"7130\":\"fb4fac69\",\"7181\":\"2b909282\",\"7192\":\"9545283e\",\"7203\":\"8b1a51cf\",\"7309\":\"f9d18abb\",\"7348\":\"5f9586f3\",\"7374\":\"fba53f5e\",\"7389\":\"6760bc87\",\"7407\":\"c7c6585f\",\"7409\":\"6dfe285b\",\"7418\":\"8a2b4c7f\",\"7419\":\"8515d2ff\",\"7428\":\"82d06abd\",\"7439\":\"6de8cc1d\",\"7469\":\"ee4cf35b\",\"7579\":\"0fccee29\",\"7584\":\"a162e3d6\",\"7686\":\"f8452070\",\"7691\":\"61967efc\",\"7722\":\"3615b374\",\"7753\":\"87963fd9\",\"7761\":\"0fef4efc\",\"7773\":\"7e072552\",\"7790\":\"eea79a6d\",\"7809\":\"88b6734d\",\"7812\":\"6bb31bfb\",\"7831\":\"127b0407\",\"7842\":\"cbff451c\",\"7844\":\"04d60ce7\",\"7874\":\"2c4fabbd\",\"7886\":\"5e6c5ac8\",\"7909\":\"8f1d759d\",\"7911\":\"4a6933cd\",\"7921\":\"0051baab\",\"7974\":\"081482c7\",\"7988\":\"703d5204\",\"7991\":\"fecf274a\",\"8008\":\"d2566a74\",\"8052\":\"7d772984\",\"8072\":\"adcd5333\",\"8105\":\"ad3a5bff\",\"8114\":\"4923e5d0\",\"8142\":\"4a2d423c\",\"8150\":\"09c54606\",\"8165\":\"fcae41f3\",\"8178\":\"7a80a105\",\"8187\":\"d2466e9b\",\"8216\":\"16f39607\",\"8309\":\"4e6f12de\",\"8343\":\"02bf7f5b\",\"8397\":\"b9121604\",\"8407\":\"489e43b1\",\"8408\":\"e336ac18\",\"8424\":\"f61cffa8\",\"8483\":\"296d2c06\",\"8526\":\"caf4bbd4\",\"8528\":\"478ed8a4\",\"8535\":\"461beb1f\",\"8536\":\"f494b48a\",\"8544\":\"96cdfcb9\",\"8556\":\"34486c9d\",\"8565\":\"dcf61e16\",\"8582\":\"9b93fffc\",\"8615\":\"48b3fcab\",\"8624\":\"ed05f629\",\"8658\":\"3fe15de2\",\"8678\":\"b9462c6c\",\"8738\":\"c74496ca\",\"8751\":\"d75ea472\",\"8797\":\"176105c3\",\"8856\":\"844f512c\",\"8859\":\"6b931596\",\"8869\":\"0b50c301\",\"8929\":\"2838cba6\",\"8965\":\"d953cda0\",\"9032\":\"e137544a\",\"9037\":\"03715b7f\",\"9067\":\"3de4fd32\",\"9070\":\"08327a56\",\"9088\":\"e2b88087\",\"9113\":\"b06056cf\",\"9114\":\"89dbba3a\",\"9168\":\"557d8ffc\",\"9206\":\"49e4e82c\",\"9222\":\"cb65a2f0\",\"9280\":\"2e858b4f\",\"9292\":\"64f04a6e\",\"9305\":\"9124c60b\",\"9314\":\"82f83c51\",\"9329\":\"c269472b\",\"9348\":\"7cd6f4c1\",\"9356\":\"0eaa6965\",\"9372\":\"542b1315\",\"9374\":\"803a0dd2\",\"9384\":\"d903e6e0\",\"9409\":\"466d7a22\",\"9449\":\"d49d3a5e\",\"9458\":\"8b7ab77b\",\"9584\":\"5d354f43\",\"9589\":\"85cd2dae\",\"9657\":\"f4b88984\",\"9690\":\"0cd8a2c8\",\"9756\":\"7e306b4c\",\"9824\":\"1d90f5c9\",\"9831\":\"bce7d78b\",\"9870\":\"ff4b9047\",\"9875\":\"af794d6b\",\"9943\":\"d3ab0f18\",\"9978\":\"c862be3b\"}[chunkId] + \".chunk.js\";\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.miniCssF = (chunkId) => {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.j = 1423;","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript && document.currentScript.tagName.toUpperCase() === 'SCRIPT')\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && (!scriptUrl || !/^http(s?):/.test(scriptUrl))) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/^blob:/, \"\").replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl + \"../../\";","// no baseURI\n\n// object to store loaded chunks\n// \"1\" means \"already loaded\"\nvar installedChunks = {\n\t1423: 1\n};\n\n// importScripts chunk loading\nvar installChunk = (data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\tfor(var moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\twhile(chunkIds.length)\n\t\tinstalledChunks[chunkIds.pop()] = 1;\n\tparentChunkLoadingFunction(data);\n};\n__webpack_require__.f.i = (chunkId, promises) => {\n\t// \"1\" is the signal for \"already loaded\"\n\tif(!installedChunks[chunkId]) {\n\t\tif(true) { // all chunks have JS\n\t\t\timportScripts(__webpack_require__.p + __webpack_require__.u(chunkId));\n\t\t}\n\t}\n};\n\nvar chunkLoadingGlobal = globalThis[\"webpackChunk_jbrowse_web\"] = globalThis[\"webpackChunk_jbrowse_web\"] || [];\nvar parentChunkLoadingFunction = chunkLoadingGlobal.push.bind(chunkLoadingGlobal);\nchunkLoadingGlobal.push = installChunk;\n\n// no HMR\n\n// no HMR manifest","__webpack_require__.nc = undefined;","// run startup\nvar __webpack_exports__ = __webpack_require__.x();\n"],"names":["deferred","leafPrototypes","getProto","next","isUMDPluginDefinition","def","undefined","umdUrl","url","umdLoc","name","isESMPluginDefinition","esmUrl","esmLoc","isCJSPluginDefinition","cjsUrl","PluginLoader","definitions","constructor","defs","args","this","fetchESM","fetchCJS","JSON","parse","stringify","loadCJSPlugin","baseUri","parsedUrl","URL","protocol","Error","href","loadESMPlugin","uri","plugin","loadUMDPlugin","moduleName","umdName","jest","async","scriptUrl","Boolean","globalThis","src","Promise","resolve","reject","domLoadScript","err","script","importScripts","loadScript","default","Plugin","loadPlugin","isElectron","d","installGlobalReExports","target","JBrowseExports","Object","fromEntries","entries","ReExports","map","module","load","all","definition","enableStaticRendering","corePlugins","opts","pluginManager","config","configurationP","self","addEventListener","listener","e","data","message","removeEventListener","postMessage","receiveConfiguration","pluginLoader","plugins","PluginManager","p","windowHref","P","createPluggableElements","configure","getPluginManager","rpcConfig","getRpcElements","func","execute","bind","channel","rpcDriverClassName","statusCallback","rpcServer","emit","RpcServer","Server","error","serializeError","initializeWorker","import","useStyles","makeStyles","paper","position","overflowY","overflowX","minWidth","minHeight","maxWidth","maxHeight","top","left","outline","menuItemEndDecoration","padding","margin","height","MenuItemEndDecoration","props","classes","type","checked","disabled","icon","_jsx","ArrowRightIcon","color","CheckBoxIcon","CheckBoxOutlineBlankIcon","RadioButtonCheckedIcon","RadioButtonUncheckedIcon","className","children","checkIfValid","m","MenuPage","forwardRef","ref","subMenuAnchorEl","setSubMenuAnchorEl","useState","openSubMenuIdx","setOpenSubMenuIdx","isSubMenuOpen","setIsSubMenuOpen","selectedMenuItemIdx","setSelectedMenuItemIdx","setPosition","paperRef","useRef","menuItems","onMenuItemClick","open","onClose","anchorEl","useEffect","shouldSubMenuBeOpen","timer","setTimeout","clearTimeout","rect","getBoundingClientRect","width","hasIcon","some","menuItem","menuItemStyle","ListContents","_jsxs","_Fragment","MenuList","autoFocusItem","dense","sort","a","b","priority","idx","Divider","component","ListSubheader","label","endDecoration","Icon","ListItemIcon","onClick","callback","event","MUIMenuItem","style","selected","onMouseMove","currentTarget","document","activeElement","focus","onKeyDown","key","currentIdx","findLastIndex","slice","findPreviousValidIdx","findIndex","findNextValidIdx","ListItemText","primary","secondary","subLabel","inset","id","String","subMenu","Grow","in","transformOrigin","Paper","elevation","other","Popover","anchorOrigin","vertical","horizontal","ElementId","types","optional","identifier","nanoid","NoAssemblyRegion","model","refName","string","start","number","end","reversed","boolean","actions","setRefName","newRefName","Region","compose","assemblyName","LocalPathLocation","locationType","literal","localPath","BlobLocation","blobId","UriLocationRaw","maybe","internetAccountId","internetAccountPreAuthorization","internetAccountType","authInfo","frozen","UriLocation","snapshotProcessor","postProcessor","snap","rest","FileLocation","union","preProcessor","blob","added","full","RegExp","tag","join","SanitizedHTML","html","pre","linkify","value","str","test","escapeHTML","dompurify","addHook","node","tagName","setAttribute","dangerouslySetInnerHTML","__html","sanitize","AssemblyManager","lazy","DataManagementPlugin","exports","install","UCSCTrackHubConnectionF","AddTrackWidgetF","HierarchicalTrackSelectorWidgetF","AddConnectionWidgetF","PluginStoreWidgetF","_pluginManager","observer","closeAfterItemClick","stopPropagation","setOpen","onClickExtra","popupState","usePopupState","popupId","variant","onTouchStart","rest2","bindTrigger","isOpen","IconButton","length","CascadingMenu","bindPopover","_","getColors","midnight","forrest","grape","mandarin","gray","Logomark","viewBox","LogoFull","Text","colors","fill","transform","ErrorMessageStackTraceDialog","theme","bg","background","palette","divider","border","iconFloat","float","marginLeft","ErrorButtons","onReset","showStack","setShowStack","Tooltip","title","ReportIcon","RefreshIcon","Suspense","fallback","str2","indexOf","str3","snapshotError","trim","findStr","match","exec","match2","parseError","RedErrorMessageBox","QuickLRU","Map","options","super","maxSize","TypeError","maxAge","Number","POSITIVE_INFINITY","onEviction","cache","oldCache","_size","_emitEvictions","item","_deleteIfExpired","expiry","Date","now","delete","_getOrDeleteIfExpired","_getItemValue","_peek","get","_set","set","_moveToRecent","_entriesAscending","has","peek","deleted","clear","resize","newSize","items","removeCount","keys","values","Symbol","iterator","entriesDescending","i","entriesAscending","size","oldCacheSize","Math","min","forEach","callbackFunction","thisArgument","call","toStringTag","isBaseSession","thing","refTheme","createTheme","forest","augmentColor","main","lightgrey","bases","A","green","C","blue","G","orange","T","red","framesCDS","frames","stopCodon","startCodon","insertion","deletion","hardclip","softclip","skip","defaults","quaternary","highlight","stockTheme","mode","tertiary","components","MuiLink","styleOverrides","root","defaultThemes","lightStock","lightMinimal","grey","darkMinimal","darkStock","MuiAppBar","defaultProps","enableColorOnDark","overwriteArrayMerge","sourceArray","createJBrowseBaseTheme","themeP","typography","fontSize","spacing","MuiTooltip","tooltip","MuiButton","text","MuiAccordion","disableGutters","slotProps","transition","timeout","unmountOnExit","MuiFilledInput","MuiFormControl","MuiFormHelperText","MuiIconButton","MuiInputBase","MuiAutocomplete","MuiInputLabel","MuiToolbar","MuiListItem","MuiOutlinedInput","MuiFab","backgroundColor","MuiTable","MuiPopover","transitionDuration","MuiMenu","MuiMenuItem","MuiTextField","MuiCheckbox","MuiRadio","MuiFormLabel","MuiAccordionSummary","content","contrastText","MuiToggleButtonGroup","deepmerge","arrayMerge","createJBrowseTheme","configTheme","themes","themeName","augmentThemeColors","addMissingColors","entry","importFormEntry","session","onChange","InputProps","TextFieldProps","localStorageKey","helperText","assemblyNames","assemblyManager","URLSearchParams","window","location","search","lastSelected","setLastSelected","useLocalStorage","host","pathname","selection","includes","TextField","select","input","htmlInput","MenuItem","displayName","ToggleButtonWithTooltip","ToggleButton","shorten","len","max","Inline","display","gap","Box2","Box","flexDirection","Input","setLocation","inline","toggleButtonValue","selectedAccount","SelectorComponent","UrlChooser","selectorLabel","LocalFileChooser","description","rootModel","fileOrUrl","isUriLocation","setToggleButtonValue","accounts","isAppRootModel","internetAccounts","filter","f","recentlyUsedInternetAccounts","setRecentlyUsedInternetAccounts","arr","Set","s","shownAccounts","hiddenAccounts","setAnchorEl","setLocationWithAccount","useCallback","Wrapper","InputLabel","shrink","FormGroup","ToggleButtonGroup","exclusive","_event","newState","notEmpty","toggleContents","ArrowDropDownIcon","FormHelperText","Menu","highResolutionScaling","imageData","blockKey","showSoftClip","done","setDone","featureCanvas","canvas","current","context","getContext","drawImageOntoCanvasContext","VIEW_HEADER_HEIGHT","horizontalHandle","cursor","verticalHandle","flexbox_verticalHandle","alignSelf","flexbox_horizontalHandle","onDrag","flexbox","originalClassName","onMouseDown","mouseDragging","setMouseDragging","initialPosition","prevPos","cx","mouseMove","preventDefault","pos","clientX","clientY","totalDistance","lastFrameDistance","mouseUp","fetch","requestIdleCallback","cb","cancelIdleCallback","requestAnimationFrame","cancelAnimationFrame","navigator","createTextNode","querySelector","appendChild","documentElement","querySelectorAll","createElement","removeAttribute","FactoryResetDialog","onFactoryReset","handleDialogClose","action","Dialog","DialogContent","DialogContentText","DialogActions","Button","isSessionWithMultipleViews","CascadingContext","createContext","parentPopupState","rootPopupState","CascadingMenuItem","useContext","close","CascadingSubmenu","bindHover","bindFocus","ChevronRight","CascadingSubmenuHover","useMemo","Provider","HoverMenu","bindMenu","EndDecoration","CascadingMenuList","flexGrow","inputBase","whiteSpace","visibility","inputRoot","inputFocused","borderStyle","borderWidth","setValue","ref2","useMeasure","editedValue","setEditedValue","inputNode","setInputNode","blur","setBlur","useTheme","val","Typography","InputBase","inputRef","inputProps","focused","onBlur","ContentCopy","SvgIcon","Indexing","TrackSelector","getTrackAssemblyNames","track","getConfAssemblyNames","configuration","conf","trackAssemblyNames","readConfObject","parent","getParent","getRpcSessionId","thisNode","highestRpcSessionId","isRoot","rpcSessionId","getParentRenderProps","currentNode","renderProps","UNKNOWN","UNSUPPORTED","blobMap","getBlob","getBlobMap","setBlobMap","counter","storeBlobLocation","makeIndex","suffix","makeIndexType","typeA","typeB","toUpperCase","endsWith","getFileName","lastIndexOf","replace","guessAdapter","file","index","adapterHint","getEnv","adapter","evaluateExtensionPoint","_file","_index","_adapterHint","adapterGuesser","guessTrackType","adapterType","getSession","trackType","_adapterName","trackTypeGuesser","generateUnsupportedTrackConf","trackName","trackUrl","categories","category","trackId","objectHash","generateUnknownTrackConf","getTrackName","asm","assemblies","find","sequence","closeButton","right","DialogError","ErrorMessage","header","MUIDialog","ScopedCssBaseline","isValidElement","DialogTitle","CloseIcon","ErrorBoundary","FallbackComponent","ThemeProvider","boxSizing","useDebounce","delay","debouncedValue","setDebouncedValue","handle","useWidthSetter","view","isAlive","setWidth","parseInt","useDebouncedCallback","wait","argsRef","findParentThat","predicate","hasParent","springAnimate","fromValue","toValue","onFinish","precision","tension","friction","clamp","animationFrameId","update","animation","time","lastPosition","lastTime","velocity","lastVelocity","numSteps","floor","isVelocity","abs","isDisplacement","findParentThatIs","isSessionModel","getContainingView","isViewModel","getContainingTrack","isTrackModel","getContainingDisplay","isDisplayModel","assembleLocString","region","assembleLocStringFast","toLocale","n","assemblyNameString","startString","endString","rev","parseLocStringOneBased","locString","isValidRefName","assemblyMatch","assemblyName2","location2","startsWith","lastColonIdx","prefix","rangeMatch","singleMatch","replaceAll","separator","parseLocString","parsed","compareLocs","locA","locB","assemblyComp","localeCompare","refComp","startComp","endComp","compareLocStrings","num","bpToPx","bp","bpPerPx","round","oneEightyOverPi","PI","piOverOneEighty","radToDeg","radians","degToRad","degrees","polarToCartesian","rho","theta","cos","sin","cartesianToPolar","x","y","sqrt","atan","featureSpanPx","feature","bpSpanPx","leftBp","rightBp","iterMap","iter","sizeHint","results","Array","from","array","l","findLast","renameRegionIfNeeded","refNameMap","isStateTreeNode","newRef","getSnapshot","originalRefName","renameRegionsIfNeeded","regions","adapterConfig","sessionId","assemblyMaps","getRefNameMapForAdapter","minmax","short","coord","oob","useAssemblyName","userAgent","complementTable","S","w","r","N","K","Y","V","M","h","k","g","t","W","X","v","B","H","c","D","R","revcom","revcomped","reverse","complement","comp","element","rIC","widths","measureText","total","code","charCodeAt","getFrame","strand","phase","defaultStarts","defaultStops","defaultCodonTable","TCA","TCC","TCG","TCT","TTC","TTT","TTA","TTG","TAC","TAT","TAA","TAG","TGC","TGT","TGA","TGG","CTA","CTC","CTG","CTT","CCA","CCC","CCG","CCT","CAC","CAT","CAA","CAG","CGA","CGC","CGG","CGT","ATA","ATC","ATT","ATG","ACA","ACC","ACG","ACT","AAC","AAT","AAA","AAG","AGC","AGT","AGA","AGG","GTA","GTC","GTG","GTT","GCA","GCC","GCG","GCT","GAC","GAT","GAA","GAG","GGA","GGC","GGG","GGT","generateCodonTable","table","tempCodonTable","codon","aa","nucs","nuc","charAt","toLowerCase","n0","j","n1","updateStatus","msg","fn","res","updateStatus2","stopToken","checkStopToken","hashCode","hash","obj","bytesForRegions","blockResults","blocksForRange","flat","block","minv","blockPosition","maxv","reduce","isSupportedIndexingAdapter","getBpDisplayStr","parseFloat","toPrecision","getProgressDisplayStr","toLocaleString","getTickDisplayStr","totalBp","toFixed","getViewParams","exportSVG","dynamicBlocks","staticBlocks","offsetPx","contentBlocks","staticblock","staticblock1","offsetPx1","getLayoutId","layoutId","initialValue","storedValue","setStoredValue","localStorage","getItem","console","valueToStore","Function","setItem","getUriLink","getStr","isObject","coarseStripHTML","measureGridWidth","elements","stripHTML","getEnvMST","localStorageGetItem","localStorageSetItem","init","NEGATIVE_INFINITY","sum","avg","groupBy","result","push","mergeIntervals","intervals","stack","at","pop","gatherOverlaps","memo","flatMap","group","stripAlpha","colord","alpha","toHex","getStrokeProps","strokeOpacity","stroke","getFillProps","fillOpacity","renderToStaticMarkup","div","flushSync","createRoot","render","innerHTML","isGzip","buf","fetchAndMaybeUnzip","loc","readFile","unzip","fetchAndMaybeUnzipText","buffer","TextDecoder","fatal","decode","localStorageGetNumber","defaultVal","localStorageGetBoolean","forEachWithStopTokenCheck","arg","durationMs","performance","testAdapter","fileName","regex","expected","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","__webpack_exports__","O","chunkIds","notFulfilled","Infinity","fulfilled","every","splice","getter","__esModule","getPrototypeOf","then","ns","create","getOwnPropertyNames","o","defineProperty","enumerable","chunkId","promises","u","miniCssF","prop","prototype","hasOwnProperty","currentScript","scripts","getElementsByTagName","installedChunks","chunkLoadingGlobal","parentChunkLoadingFunction","moreModules","runtime","nc"],"sourceRoot":""}