"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[6918],{46918(e,t,o){o.d(t,{renderMultiLine:()=>u});var s=o(23886),l=o(40907),r=o(31508),a=o(23638),n=o(29458),c=o(38896),i=o(91520);async function u(e,t){const{sources:o,height:u,regions:h,bpPerPx:g,stopToken:f,statusCallback:T=()=>{}}=e,G=h[0],d=(G.end-G.start)/g,I=(0,n.jL)(f),{reducedFeatures:_,...p}=await(0,s.updateStatus)("Rendering plot",T,()=>(0,l.u)(d,u,e,l=>{const r=(0,s.groupBy)(t,e=>e.get("source"));let a=[];for(const t of o){const{reducedFeatures:o}=(0,c.V)(l,{...e,features:r[t.name]||[],staticColor:t.color||"blue",colorCallback:()=>"",lastCheck:I});a=a.concat(o)}return{reducedFeatures:a}})),C={...p,features:_.map(i.serializeWiggleFeature),height:u,width:d};return(0,r.lk)(C,(0,a.X)(p))}},38896(e,t,o){o.d(t,{V:()=>n});var s=o(17378),l=o(23886),r=o(29458),a=o(91520);function n(e,t){const{features:o,regions:n,bpPerPx:c,scaleOpts:i,height:u,ticks:{values:h},displayCrossHatches:g,colorCallback:f,config:T,offset:G=0,staticColor:d,stopToken:I,lastCheck:_=(0,r.jL)(I)}=t,p=n[0],C=p.start,E=p.end,b=p.reversed,k=1/c,L=(E-C)*k,P=u-2*G,v=(0,s.QZ)(T,"clipColor"),H=(0,a.getScale)({...i,range:[0,P]}).domain(),F=H[0],m=H[1],w=m-F,W="log"===i.scaleType,y=0!==w?P/w:0,R=Math.log(2),S=Math.log(F)/R,M=Math.log(m)/R-S,A=0!==M?P/M:0,x=W?e=>(0,l.clamp)(P-(Math.log(e)/R-S)*A,0,P)+G:e=>(0,l.clamp)(P-(e-F)*y,0,P)+G;let j,N=Number.NEGATIVE_INFINITY;const O=[];if(d){e.beginPath(),e.strokeStyle=d;const t=[];for(const s of o.values()){(0,r.As)(_);const o=s.get("start"),l=s.get("end"),n=b?(E-l)*k:(o-C)*k,c=b?(E-o)*k:(l-C)*k;((0|n)!=(0|N)||c-n>1)&&(O.push(s),N=n);const i=s.get("score"),u=x(i);i>m?t.push({leftPx:n,w:c-n+a.WIGGLE_FUDGE_FACTOR,high:!0}):i<F&&!W&&t.push({leftPx:n,w:c-n+a.WIGGLE_FUDGE_FACTOR,high:!1});const h=void 0!==j?x(j):u;b?(e.moveTo(c,h),e.lineTo(c,u),e.lineTo(n,u)):(e.moveTo(n,h),e.lineTo(n,u),e.lineTo(c,u)),j=i}if(e.stroke(),t.length>0){e.fillStyle=v;for(const{leftPx:o,w:s,high:l}of t)l?e.fillRect(o,G,s,a.WIGGLE_CLIP_HEIGHT):e.fillRect(o,P-a.WIGGLE_CLIP_HEIGHT,s,a.WIGGLE_CLIP_HEIGHT)}}else for(const t of o.values()){(0,r.As)(_);const o=t.get("start"),s=t.get("end"),l=b?(E-s)*k:(o-C)*k,n=b?(E-o)*k:(s-C)*k;((0|l)!=(0|N)||n-l>1)&&(O.push(t),N=l);const c=t.get("score"),i=x(c),u=n-l+a.WIGGLE_FUDGE_FACTOR,h=f(t,c);e.beginPath(),e.strokeStyle=h;const g=void 0!==j?x(j):i;b?(e.moveTo(n,g),e.lineTo(n,i),e.lineTo(l,i)):(e.moveTo(l,g),e.lineTo(l,i),e.lineTo(n,i)),e.stroke(),j=c,c>m?(e.fillStyle=v,e.fillRect(l,G,u,a.WIGGLE_CLIP_HEIGHT)):c<F&&!W&&(e.fillStyle=v,e.fillRect(l,P-a.WIGGLE_CLIP_HEIGHT,u,a.WIGGLE_CLIP_HEIGHT))}if(g){e.lineWidth=1,e.strokeStyle="rgba(200,200,200,0.5)";for(const t of h)e.beginPath(),e.moveTo(0,Math.round(x(t))),e.lineTo(L,Math.round(x(t))),e.stroke()}return{reducedFeatures:O}}}}]);
//# sourceMappingURL=6918.d9d9142c.chunk.js.map