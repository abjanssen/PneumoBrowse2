"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[4441],{24441(e,t,o){o.d(t,{renderMultiRowLine:()=>h});var s=o(77251),l=o(83640),r=o(16876),a=o(26931),n=o(52901),i=o(48679),c=o(27535);async function h(e,t){const{sources:o,height:h,regions:u,bpPerPx:g,stopToken:T,statusCallback:f=()=>{}}=e,G=u[0],d=(G.end-G.start)/g,I=h/o.length,_=(0,n.jL)(T),{reducedFeatures:b,...k}=await(0,s.updateStatus)("Rendering plot",f,()=>(0,l.u)(d,h,e,l=>{const r=(0,s.groupBy)(t,e=>e.get("source"));let a=[];l.save();for(const t of o){const{reducedFeatures:o}=(0,i.V)(l,{...e,features:r[t.name]||[],height:I,staticColor:t.color||"blue",colorCallback:()=>"",lastCheck:_});l.strokeStyle="rgba(200,200,200,0.8)",l.beginPath(),l.moveTo(0,I),l.lineTo(d,I),l.stroke(),l.translate(0,I),a=a.concat(o)}return l.restore(),{reducedFeatures:a}})),p={...k,features:b.map(c.serializeWiggleFeature),height:h,width:d};return(0,r.lk)(p,(0,a.X)(k))}},48679(e,t,o){o.d(t,{V:()=>n});var s=o(11259),l=o(77251),r=o(52901),a=o(27535);function n(e,t){const{features:o,regions:n,bpPerPx:i,scaleOpts:c,height:h,ticks:{values:u},displayCrossHatches:g,colorCallback:T,config:f,offset:G=0,staticColor:d,stopToken:I,lastCheck:_=(0,r.jL)(I)}=t,b=n[0],k=b.start,p=b.end,C=b.reversed,E=1/i,L=(p-k)*E,P=h-2*G,v=(0,s.QZ)(f,"clipColor"),H=(0,a.getScale)({...c,range:[0,P]}).domain(),m=H[0],w=H[1],F=w-m,y="log"===c.scaleType,W=0!==F?P/F:0,R=Math.log(2),S=Math.log(m)/R,M=Math.log(w)/R-S,A=0!==M?P/M:0,x=y?e=>(0,l.clamp)(P-(Math.log(e)/R-S)*A,0,P)+G:e=>(0,l.clamp)(P-(e-m)*W,0,P)+G;let j,N=Number.NEGATIVE_INFINITY;const O=[];if(d){e.beginPath(),e.strokeStyle=d;const t=[];for(const s of o.values()){(0,r.As)(_);const o=s.get("start"),l=s.get("end"),n=C?(p-l)*E:(o-k)*E,i=C?(p-o)*E:(l-k)*E;((0|n)!=(0|N)||i-n>1)&&(O.push(s),N=n);const c=s.get("score"),h=x(c);c>w?t.push({leftPx:n,w:i-n+a.WIGGLE_FUDGE_FACTOR,high:!0}):c<m&&!y&&t.push({leftPx:n,w:i-n+a.WIGGLE_FUDGE_FACTOR,high:!1});const u=void 0!==j?x(j):h;C?(e.moveTo(i,u),e.lineTo(i,h),e.lineTo(n,h)):(e.moveTo(n,u),e.lineTo(n,h),e.lineTo(i,h)),j=c}if(e.stroke(),t.length>0){e.fillStyle=v;for(const{leftPx:o,w:s,high:l}of t)l?e.fillRect(o,G,s,a.WIGGLE_CLIP_HEIGHT):e.fillRect(o,P-a.WIGGLE_CLIP_HEIGHT,s,a.WIGGLE_CLIP_HEIGHT)}}else for(const t of o.values()){(0,r.As)(_);const o=t.get("start"),s=t.get("end"),l=C?(p-s)*E:(o-k)*E,n=C?(p-o)*E:(s-k)*E;((0|l)!=(0|N)||n-l>1)&&(O.push(t),N=l);const i=t.get("score"),c=x(i),h=n-l+a.WIGGLE_FUDGE_FACTOR,u=T(t,i);e.beginPath(),e.strokeStyle=u;const g=void 0!==j?x(j):c;C?(e.moveTo(n,g),e.lineTo(n,c),e.lineTo(l,c)):(e.moveTo(l,g),e.lineTo(l,c),e.lineTo(n,c)),e.stroke(),j=i,i>w?(e.fillStyle=v,e.fillRect(l,G,h,a.WIGGLE_CLIP_HEIGHT)):i<m&&!y&&(e.fillStyle=v,e.fillRect(l,P-a.WIGGLE_CLIP_HEIGHT,h,a.WIGGLE_CLIP_HEIGHT))}if(g){e.lineWidth=1,e.strokeStyle="rgba(200,200,200,0.5)";for(const t of u)e.beginPath(),e.moveTo(0,Math.round(x(t))),e.lineTo(L,Math.round(x(t))),e.stroke()}return{reducedFeatures:O}}}}]);
//# sourceMappingURL=4441.7b888fb5.chunk.js.map