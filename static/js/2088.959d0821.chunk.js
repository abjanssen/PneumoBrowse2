"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[2088],{72088(e,s,t){t.r(s),t.d(s,{default:()=>v});var o=t(30128),r=t(28910),n=t(62088),a=t(23886),c=t(10533),i=t(91383),l=t(44460);const h=(0,i.A)((0,l.jsx)("path",{d:"M21 7h-2v2h-2V7h-2V5h2V3h2v2h2zm-2 14-7-3-7 3V5c0-1.1.9-2 2-2h7c-.63.84-1 1.87-1 3 0 2.76 2.24 5 5 5 .34 0 .68-.03 1-.1z"}),"BookmarkAdd");var d=t(1373),u=t(66820),w=t(63209),j=t(57081),b=t(59705),p=t(54825),x=t(44641),f=t(35703),C=t(69566),S=t(95994),A=t(6430),k=t(65446),g=t(55614),m=t(23149);function y(e){const s=(0,g.c)(3),{url:t}=e;let o,r;return s[0]===Symbol.for("react.memo_cache_sentinel")?(o={input:{readOnly:!0}},s[0]=o):o=s[0],s[1]!==t?(r=(0,l.jsx)(m.A,{label:"URL",value:t,variant:"filled",fullWidth:!0,onClick:R,slotProps:o}),s[1]=t,s[2]=r):r=s[2],r}function R(e){e.target.select()}const L=(0,o.lazy)(()=>t.e(4818).then(t.bind(t,74818))),v=(0,C.observer)(function({handleClose:e,session:s}){const[i,C]=(0,o.useState)(""),[g,m]=(0,o.useState)(""),[R,v]=(0,o.useState)(""),[U,_]=(0,o.useState)(""),[I,B]=(0,o.useState)(!0),[J,P]=(0,o.useState)(),[V,$]=(0,o.useState)(!1),z=s.shareURL,D=(0,a.localStorageGetItem)("jbrowse-shareURL")||"short",W=(0,c.getSnapshot)(s);(0,o.useEffect)(()=>{(async()=>{if(!J)try{if("short"===D){B(!0);const e=new URL(window.location.href),s=await(0,S.J)(W,z,e.href),t=new URLSearchParams(e.search);t.set("session",`share-${s.json.sessionId}`),t.set("password",s.password),e.search=t.toString(),v(e.href),C(`share-${s.json.sessionId}`),m(s.password)}else{const e=await(0,k.eW)(JSON.stringify((0,c.getSnapshot)(s))),t=new URL(window.location.href),o=new URLSearchParams(t.search);o.set("session",`encoded-${e}`),C(`encoded-${e}`),t.search=o.toString(),_(t.toString())}}catch(e){console.error(e),P(e)}finally{B(!1)}})()},[D,J,s,z,W]);const F="short"===D&&I||!!J;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(r.A,{maxWidth:"xl",open:!0,onClose:e,title:"JBrowse Shareable Link",children:[(0,l.jsxs)(w.A,{children:[(0,l.jsxs)(j.A,{children:["Copy the URL below to share your current JBrowse session.",(0,l.jsx)(b.A,{onClick:()=>{$(!0)},children:(0,l.jsx)(u.A,{})})]}),"short"===D?J?(0,l.jsx)(n.A,{error:J,onReset:()=>{P(void 0)}}):I?(0,l.jsx)(p.A,{children:"Generating short URL..."}):(0,l.jsx)(y,{url:R}):(0,l.jsx)(y,{url:U})]}),(0,l.jsxs)(x.A,{children:[(0,l.jsx)(f.A,{startIcon:(0,l.jsx)(h,{}),disabled:F,onClick:e=>{e.preventDefault(),(0,A.dR)({password:g,session:i}),alert("Now press Ctrl+D (PC) or Cmd+D (Mac)")},children:"Create browser Bookmark"}),(0,l.jsx)(f.A,{startIcon:(0,l.jsx)(d.A,{}),disabled:F,onClick:async()=>{const{default:e}=await t.e(2899).then(t.t.bind(t,72899,23));e(R||U),s.notify("Copied to clipboard","success")},children:"Copy to Clipboard"}),(0,l.jsx)(f.A,{onClick:e,autoFocus:!0,children:"Close"})]})]}),(0,l.jsx)(L,{open:V,currentSetting:D,onClose:()=>{$(!1)}})]})})}}]);
//# sourceMappingURL=2088.959d0821.chunk.js.map