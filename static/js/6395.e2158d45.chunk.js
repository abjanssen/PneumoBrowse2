"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[6395],{66395:(e,t,r)=>{r.d(t,{sk:()=>q,FO:()=>P,Ay:()=>I});var o=r(67758),n=r(7552),a=r(87485),l=r(87770),c=r(21049),s=r(93062),u=r(10240),i=r(75785),h=r(40898),f=r(99546);function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e}).apply(this,arguments)}function g(e,t){if(null==e)return{};var r,o,n={},a=Object.keys(e);for(o=0;o<a.length;o++)t.indexOf(r=a[o])>=0||(n[r]=e[r]);return n}function m(e){const t=(0,n.useRef)(e),r=(0,n.useRef)(e=>{t.current&&t.current(e)});return t.current=e,r.current}const p=(e,t=0,r=1)=>e>r?r:e<t?t:e,v=e=>"touches"in e,b=e=>e&&e.ownerDocument.defaultView||self,_=(e,t,r)=>{const o=e.getBoundingClientRect(),n=v(t)?((e,t)=>{for(let r=0;r<e.length;r++)if(e[r].identifier===t)return e[r];return e[0]})(t.touches,r):t;return{left:p((n.pageX-(o.left+b(e).pageXOffset))/o.width),top:p((n.pageY-(o.top+b(e).pageYOffset))/o.height)}},x=e=>{!v(e)&&e.preventDefault()},w=n.memo(e=>{let{onMove:t,onKey:r}=e,o=g(e,["onMove","onKey"]);const a=(0,n.useRef)(null),l=m(t),c=m(r),s=(0,n.useRef)(null),u=(0,n.useRef)(!1),[i,h,f]=(0,n.useMemo)(()=>{const e=e=>{x(e),(v(e)?e.touches.length>0:e.buttons>0)&&a.current?l(_(a.current,e,s.current)):r(!1)},t=()=>r(!1);function r(r){const o=u.current,n=b(a.current),l=r?n.addEventListener:n.removeEventListener;l(o?"touchmove":"mousemove",e),l(o?"touchend":"mouseup",t)}return[({nativeEvent:e})=>{const t=a.current;if(t&&(x(e),!((e,t)=>t&&!v(e))(e,u.current)&&t)){if(v(e)){u.current=!0;const t=e.changedTouches||[];t.length&&(s.current=t[0].identifier)}t.focus(),l(_(t,e,s.current)),r(!0)}},e=>{const t=e.which||e.keyCode;t<37||t>40||(e.preventDefault(),c({left:39===t?.05:37===t?-.05:0,top:40===t?.05:38===t?-.05:0}))},r]},[c,l]);return(0,n.useEffect)(()=>f,[f]),n.createElement("div",d({},o,{onTouchStart:i,onMouseDown:i,className:"react-colorful__interactive",ref:a,onKeyDown:h,tabIndex:0,role:"slider"}))}),y=e=>e.filter(Boolean).join(" "),C=({className:e,color:t,left:r,top:o=.5})=>{const a=y(["react-colorful__pointer",e]);return n.createElement("div",{className:a,style:{top:100*o+"%",left:100*r+"%"}},n.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:t}}))},E=(e,t=0,r=Math.pow(10,t))=>Math.round(r*e)/r,k=(Math.PI,({h:e,s:t,v:r,a:o})=>{const n=(200-t)*r/100;return{h:E(e),s:E(n>0&&n<200?t*r/100/(n<=100?n:200-n)*100:0),l:E(n/2),a:E(o,2)}}),N=e=>{const{h:t,s:r,l:o}=k(e);return`hsl(${t}, ${r}%, ${o}%)`},j=e=>{const{h:t,s:r,l:o,a:n}=k(e);return`hsla(${t}, ${r}%, ${o}%, ${n})`},M=({r:e,g:t,b:r,a:o})=>{const n=Math.max(e,t,r),a=n-Math.min(e,t,r),l=a?n===e?(t-r)/a:n===t?2+(r-e)/a:4+(e-t)/a:0;return{h:E(60*(l<0?l+6:l)),s:E(n?a/n*100:0),v:E(n/255*100),a:o}},$=n.memo(({className:e,hue:t,onChange:r})=>{const o=y(["react-colorful__hue",e]);return n.createElement("div",{className:o},n.createElement(w,{onMove:e=>{r({h:360*e.left})},onKey:e=>{r({h:p(t+360*e.left,0,360)})},"aria-label":"Hue","aria-valuetext":E(t)},n.createElement(C,{className:"react-colorful__hue-pointer",left:t/360,color:N({h:t,s:100,v:100,a:1})})))}),S=n.memo(({hsva:e,onChange:t})=>{const r={backgroundColor:N({h:e.h,s:100,v:100,a:1})};return n.createElement("div",{className:"react-colorful__saturation",style:r},n.createElement(w,{onMove:e=>{t({s:100*e.left,v:100-100*e.top})},onKey:r=>{t({s:p(e.s+100*r.left,0,100),v:p(e.v-100*r.top,0,100)})},"aria-label":"Color","aria-valuetext":`Saturation ${E(e.s)}%, Brightness ${E(e.v)}%`},n.createElement(C,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:N(e)})))});function O(e,t,r){const o=m(r),[a,l]=(0,n.useState)(()=>e.toHsva(t)),c=(0,n.useRef)({color:t,hsva:a});(0,n.useEffect)(()=>{if(!e.equal(t,c.current.color)){const r=e.toHsva(t);c.current={hsva:r,color:t},l(r)}},[t,e]),(0,n.useEffect)(()=>{let t;((e,t)=>{if(e===t)return!0;for(const r in e)if(e[r]!==t[r])return!1;return!0})(a,c.current.hsva)||e.equal(t=e.fromHsva(a),c.current.color)||(c.current={hsva:a,color:t},o(t))},[a,e,o]);const s=(0,n.useCallback)(e=>{l(t=>Object.assign({},t,e))},[]);return[a,s]}const R="undefined"!=typeof window?n.useLayoutEffect:n.useEffect;const H=new Map,z=({className:e,hsva:t,onChange:r})=>{const o={backgroundImage:`linear-gradient(90deg, ${j(Object.assign({},t,{a:0}))}, ${j(Object.assign({},t,{a:1}))})`},a=y(["react-colorful__alpha",e]);return n.createElement("div",{className:a},n.createElement("div",{className:"react-colorful__alpha-gradient",style:o}),n.createElement(w,{onMove:e=>{r({a:e.left})},onKey:e=>{r({a:p(t.a+e.left)})},"aria-label":"Alpha","aria-valuetext":`${E(100*t.a)}%`},n.createElement(C,{className:"react-colorful__alpha-pointer",left:t.a,color:j(t)})))},A=e=>{let{className:t,colorModel:o,color:a=o.defaultColor,onChange:l}=e,c=g(e,["className","colorModel","color","onChange"]);const s=(0,n.useRef)(null);var u;u=s,R(()=>{const e=u.current?u.current.ownerDocument:document;if(void 0!==e&&!H.has(e)){const t=e.createElement("style");t.innerHTML='.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>\')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}',H.set(e,t);const o=r.nc;o&&t.setAttribute("nonce",o),e.head.appendChild(t)}},[]);const[i,h]=O(o,a,l),f=y(["react-colorful",t]);return n.createElement("div",d({},c,{ref:s,className:f}),n.createElement(S,{hsva:i,onChange:h}),n.createElement($,{hue:i.h,onChange:h}),n.createElement(z,{hsva:i,onChange:h,className:"react-colorful__last-control"}))},D={defaultColor:"rgba(0, 0, 0, 1)",toHsva:e=>{const t=/rgba?\(?\s*(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i.exec(e);return t?M({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):{h:0,s:0,v:0,a:1}},fromHsva:e=>{const{r:t,g:r,b:o,a:n}=(({h:e,s:t,v:r,a:o})=>{e=e/360*6,t/=100,r/=100;const n=Math.floor(e),a=r*(1-t),l=r*(1-(e-n)*t),c=r*(1-(1-e+n)*t),s=n%6;return{r:E(255*[r,l,a,a,c,r][s]),g:E(255*[c,r,r,l,a,a][s]),b:E(255*[a,a,c,r,r,l][s]),a:E(o,2)}})(e);return`rgba(${t}, ${r}, ${o}, ${n})`},equal:(e,t)=>e.replace(/\s/g,"")===t.replace(/\s/g,"")},T=e=>n.createElement(A,d({},e,{colorModel:D}));var K=r(69500);const L=(0,i.n9)()({picker:{position:"relative"},swatches:{display:"flex",padding:12,flexWrap:"wrap"},swatch:{width:24,height:24,margin:4,border:"none",padding:0,cursor:"pointer",outline:"none"}});function P(e){const t=(0,o.c)(8),{anchorEl:r,onChange:n,onClose:a,color:c}=e,s=!!r;let u,i;return t[0]!==c||t[1]!==n?(u=(0,K.jsx)(q,{color:c,onChange:n}),t[0]=c,t[1]=n,t[2]=u):u=t[2],t[3]!==r||t[4]!==a||t[5]!==s||t[6]!==u?(i=(0,K.jsx)(l.Ay,{open:s,anchorEl:r,onClose:a,children:u}),t[3]=r,t[4]=a,t[5]=s,t[6]=u,t[7]=i):i=t[7],i}function q(e){const t=(0,o.c)(39),{onChange:r,color:l}=e,{classes:u}=L(),[i,d]=(0,f.useLocalStorage)("colorPickerPalette","set1"),g=h[i];let m;t[0]===Symbol.for("react.memo_cache_sentinel")?(m=Object.keys(h),t[0]=m):m=t[0];const p=m,[v,b]=(0,n.useState)(l);let _;t[1]!==l?(_=(0,a.M)(l).toRgbString(),t[1]=l,t[2]=_):_=t[2];const x=_,w=(0,f.useDebounce)(x,1e3);let y;t[3]!==r?(y=e=>{b(e);try{r((0,a.M)(e).toRgbString())}catch(e){}},t[3]=r,t[4]=y):y=t[4];const C=y;let E,k,N,j,M,$,S;t[5]===Symbol.for("react.memo_cache_sentinel")?(E={display:"flex",padding:10},k={width:200,margin:5},t[5]=E,t[6]=k):(E=t[5],k=t[6]),t[7]!==C||t[8]!==w?(N=(0,K.jsx)("div",{style:k,children:(0,K.jsx)(T,{color:w,onChange:C})}),t[7]=C,t[8]=w,t[9]=N):N=t[9],t[10]===Symbol.for("react.memo_cache_sentinel")?(j={width:200,margin:5},t[10]=j):j=t[10],t[11]!==d?(M=e=>{const t=e.target.value;d(t)},t[11]=d,t[12]=M):M=t[12],t[13]===Symbol.for("react.memo_cache_sentinel")?($=p.map(B),t[13]=$):$=t[13],t[14]!==M||t[15]!==i?(S=(0,K.jsx)(c.A,{value:i,onChange:M,children:$}),t[14]=M,t[15]=i,t[16]=S):S=t[16];const O=u.swatches;let R,H,z,A,D,P;if(t[17]!==u.swatch||t[18]!==C||t[19]!==g){let e;t[21]!==u.swatch||t[22]!==C?(e=(e,t)=>(0,K.jsx)("button",{type:"button",className:u.swatch,style:{background:e},onClick:()=>{C(e)}},`${e}-${t}`),t[21]=u.swatch,t[22]=C,t[23]=e):e=t[23],R=g.map(e),t[17]=u.swatch,t[18]=C,t[19]=g,t[20]=R}else R=t[20];return t[24]!==u.swatches||t[25]!==R?(H=(0,K.jsx)("div",{className:O,children:R}),t[24]=u.swatches,t[25]=R,t[26]=H):H=t[26],t[27]!==C?(z=e=>{C(e.target.value)},t[27]=C,t[28]=z):z=t[28],t[29]!==z||t[30]!==v?(A=(0,K.jsx)(s.A,{helperText:"Manually set color (hex, rgb, or css color name)",value:v,onChange:z}),t[29]=z,t[30]=v,t[31]=A):A=t[31],t[32]!==S||t[33]!==H||t[34]!==A?(D=(0,K.jsxs)("div",{style:j,children:[S,H,A]}),t[32]=S,t[33]=H,t[34]=A,t[35]=D):D=t[35],t[36]!==D||t[37]!==N?(P=(0,K.jsxs)("div",{style:E,children:[N,D]}),t[36]=D,t[37]=N,t[38]=P):P=t[38],P}function B(e){return(0,K.jsx)(u.A,{value:e,children:e},e)}const I=e=>{const t=(0,o.c)(15),{color:r,onChange:a}=e,[l,c]=(0,n.useState)(null),{classes:s}=L();let u,i,h,f,d,g;return t[0]!==r?(u={backgroundColor:r},t[0]=r,t[1]=u):u=t[1],t[2]===Symbol.for("react.memo_cache_sentinel")?(i=e=>{c(e.currentTarget)},t[2]=i):i=t[2],t[3]!==s.swatch||t[4]!==u?(h=(0,K.jsx)("div",{className:s.swatch,style:u,onClick:i}),t[3]=s.swatch,t[4]=u,t[5]=h):h=t[5],t[6]===Symbol.for("react.memo_cache_sentinel")?(f=()=>{c(null)},t[6]=f):f=t[6],t[7]!==l||t[8]!==r||t[9]!==a?(d=(0,K.jsx)(P,{anchorEl:l,onClose:f,color:r,onChange:a}),t[7]=l,t[8]=r,t[9]=a,t[10]=d):d=t[10],t[11]!==s.picker||t[12]!==h||t[13]!==d?(g=(0,K.jsxs)("div",{className:s.picker,children:[h,d]}),t[11]=s.picker,t[12]=h,t[13]=d,t[14]=g):g=t[14],g}}}]);
//# sourceMappingURL=6395.e2158d45.chunk.js.map