"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[6985],{25649(e,n,t){t.d(n,{Aw:()=>r,Kv:()=>a,qL:()=>s,s:()=>l});var i=t(30128);let o=null;function s(){return o}function a(){o=null}const r=(0,i.createContext)({api:null,rearrangePanels:()=>{},addEmptyTab:()=>{},moveViewToNewTab:function(e){o={type:"newTab",viewId:e}},moveViewToSplitRight:function(e){o={type:"splitRight",viewId:e}}});function l(){return(0,i.useContext)(r)}},86985(e,n,t){t.r(n),t.d(n,{default:()=>ae});var i=t(30128),o=t(46625),s=t(38817),a=t(87377),r=t(78835),l=t(44934),c=t(69566),d=t(25649),u=t(55614),p=t(9378),m=t(11218),f=t(58793),v=t(41842),w=t(6327),h=t(44460);const g=(0,o.n)()(e=>({headerActions:{display:"flex",alignItems:"center",height:"100%"},headerButton:{padding:4,color:e.palette.primary.contrastText},headerIcon:{fontSize:16}}));function b(e){const n=(0,u.c)(26),{containerApi:t,group:i}=e,{classes:o}=g(),{addEmptyTab:s}=(0,d.s)();let a;n[0]!==s||n[1]!==t||n[2]!==i?(a=e=>{const n=t.addGroup({referenceGroup:i,direction:e});s(n)},n[0]=s,n[1]=t,n[2]=i,n[3]=a):a=n[3];const r=a;let l,c,b,x,y,N,A,j;return n[4]!==s?(l={label:"New empty tab",icon:v.A,onClick:()=>{s()}},n[4]=s,n[5]=l):l=n[5],n[6]!==r?(c={label:"New empty split horizontal",icon:w.A,onClick:()=>{r("right")}},n[6]=r,n[7]=c):c=n[7],n[8]!==r?(b={label:"New empty split vertical",icon:f.A,onClick:()=>{r("below")}},n[8]=r,n[9]=b):b=n[9],n[10]!==l||n[11]!==c||n[12]!==b?(x=[l,c,b],n[10]=l,n[11]=c,n[12]=b,n[13]=x):x=n[13],n[14]!==i.api?(y=()=>{i.api.setActive()},n[14]=i.api,n[15]=y):y=n[15],n[16]!==o.headerIcon?(N=(0,h.jsx)(m.A,{className:o.headerIcon}),n[16]=o.headerIcon,n[17]=N):N=n[17],n[18]!==o.headerButton||n[19]!==x||n[20]!==y||n[21]!==N?(A=(0,h.jsx)(p.A,{menuItems:x,size:"small",className:o.headerButton,onClick:y,children:N}),n[18]=o.headerButton,n[19]=x,n[20]=y,n[21]=N,n[22]=A):A=n[22],n[23]!==o.headerActions||n[24]!==A?(j=(0,h.jsx)("div",{className:o.headerActions,children:A}),n[23]=o.headerActions,n[24]=A,n[25]=j):j=n[25],j}var x=t(20449),y=t(35096),N=t(55064),A=t(58728),j=t(71010),I=t(55108),k=t(30097),C=t(59705),P=t(3560);function T(e,n){return n&&(0,P.N)(n)?[...n.getViewIdsForPanel(e)].map(e=>n.views.find(n=>n.id===e)).filter(e=>void 0!==e):[]}function V(e,n,t="Main"){return{id:e,component:"jbrowseView",tabComponent:"jbrowseTab",title:t,params:{panelId:e,session:n}}}function z(e){return{...e,panels:Object.fromEntries(Object.entries(e.panels).map(([e,n])=>[e,{...n,params:{}}]))}}function S(e,n){for(const t of e.panels)t.update({params:{panelId:t.id,session:n}})}function M(e,n){const t=e.panels;if(t.length<=1)return;const i=t.map(e=>({id:e.id,component:"jbrowseView",tabComponent:"jbrowseTab",title:e.title,params:e.params}));for(const n of t)e.removePanel(n);for(const[t,o]of i.entries())e.addPanel({...o,position:n(t,i)})}const E=(0,o.n)()(e=>({headerActions:{display:"flex",alignItems:"center",height:"100%"},headerButton:{padding:4,color:e.palette.primary.contrastText},headerIcon:{fontSize:16}}));function R(e){const n=(0,u.c)(25),{containerApi:t,group:i}=e,{classes:o}=E(),{rearrangePanels:s}=(0,d.s)();let a;n[0]!==s?(a=()=>{s(D)},n[0]=s,n[1]=a):a=n[1];const r=a;let l;n[2]!==s?(l=()=>{s(F)},n[2]=s,n[3]=l):l=n[3];const c=l;let m;n[4]!==s?(m=()=>{s(L)},n[4]=s,n[5]=m):m=n[5];const f=m;let v;n[6]!==s?(v=()=>{s($)},n[6]=s,n[7]=v):v=n[7];const w=v,g=t.panels.length>1,b=t.groups.length>1;let P,T,V;return n[8]!==o.headerButton||n[9]!==o.headerIcon||n[10]!==g||n[11]!==w||n[12]!==f||n[13]!==r||n[14]!==c?(P=g&&(0,h.jsx)(p.A,{menuItems:[{label:"Global: change layout into set of tabs",icon:y.A,onClick:w},{label:"Global: tile horizontally",icon:j.A,onClick:r},{label:"Global: tile vertically",icon:A.A,onClick:c},{label:"Global: tile grid",icon:I.A,onClick:f}],size:"small",className:o.headerButton,children:(0,h.jsx)(N.A,{className:o.headerIcon})}),n[8]=o.headerButton,n[9]=o.headerIcon,n[10]=g,n[11]=w,n[12]=f,n[13]=r,n[14]=c,n[15]=P):P=n[15],n[16]!==o.headerButton||n[17]!==o.headerIcon||n[18]!==i||n[19]!==b?(T=b&&(0,h.jsx)(k.A,{title:"Close group",children:(0,h.jsx)(C.A,{size:"small",onClick:()=>{for(const e of i.panels)e.api.close()},className:o.headerButton,children:(0,h.jsx)(x.A,{className:o.headerIcon})})}),n[16]=o.headerButton,n[17]=o.headerIcon,n[18]=i,n[19]=b,n[20]=T):T=n[20],n[21]!==o.headerActions||n[22]!==P||n[23]!==T?(V=(0,h.jsxs)("div",{className:o.headerActions,children:[P,T]}),n[21]=o.headerActions,n[22]=P,n[23]=T,n[24]=V):V=n[24],V}function $(e){M(e,B)}function B(e,n){return 0===e?void 0:{referencePanel:n[0].id,direction:"within"}}function L(e){const n=e.panels;if(n.length<=1)return;const t=Math.ceil(Math.sqrt(n.length));M(e,(e,n)=>{if(0===e)return;const i=e%t,o=Math.floor(e/t);return 0===i?{referencePanel:n[(o-1)*t].id,direction:"below"}:{referencePanel:n[e-1].id,direction:"right"}})}function F(e){M(e,G)}function G(e,n){return 0===e?void 0:{referencePanel:n[0].id,direction:"below"}}function D(e){M(e,O)}function O(e,n){return 0===e?void 0:{referencePanel:n[0].id,direction:"right"}}var H=t(99904);const _=(0,i.lazy)(()=>t.e(6595).then(t.bind(t,16595))),J=(0,o.n)()(e=>({container:{height:"100%",overflowY:"auto",background:e.palette.background.default},viewStack:{display:"flex",flexDirection:"column"},spacer:{height:300},emptyPanel:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"}})),U=(0,c.observer)(function({params:e}){const{panelId:n,session:t}=e,{classes:o}=J();if(!t)return(0,h.jsx)("div",{className:o.container,children:"Loading..."});const s=T(n,t);return 0===s.length?(0,h.jsx)("div",{className:o.container,children:(0,h.jsx)("div",{className:o.emptyPanel,children:(0,h.jsx)(i.Suspense,{fallback:null,children:(0,h.jsx)(_,{session:t})})})}):(0,h.jsx)("div",{className:o.container,children:(0,h.jsxs)("div",{className:o.viewStack,children:[s.map(e=>(0,h.jsx)(H.A,{view:e,session:t},e.id)),(0,h.jsx)("div",{className:o.spacer})]})})});var W=t(14421),q=t(54825),K=t(4601),Y=t(66143);const X=(0,o.n)()({tabIcons:{display:"flex",alignItems:"center",visibility:"hidden"},tabIconsVisible:{visibility:"visible"},tabIcon:{padding:2,marginLeft:2,color:"inherit"},smallIcon:{fontSize:14}});function Q(e){const n=(0,u.c)(16),{isHovered:t,onRename:i,onClose:o}=e,{classes:s}=X(),a=`${s.tabIcons} ${t?s.tabIconsVisible:""}`;let r,l,c,d,m,f;return n[0]!==i?(r={label:"Rename tab",icon:K.A,onClick:i},n[0]=i,n[1]=r):r=n[1],n[2]!==o?(l={label:"Close tab",icon:x.A,onClick:o},n[2]=o,n[3]=l):l=n[3],n[4]!==r||n[5]!==l?(c=[r,l],n[4]=r,n[5]=l,n[6]=c):c=n[6],n[7]!==s.smallIcon?(d=(0,h.jsx)(Y.A,{className:s.smallIcon}),n[7]=s.smallIcon,n[8]=d):d=n[8],n[9]!==s.tabIcon||n[10]!==c||n[11]!==d?(m=(0,h.jsx)(p.A,{menuItems:c,size:"small",className:s.tabIcon,stopPropagation:!0,children:d}),n[9]=s.tabIcon,n[10]=c,n[11]=d,n[12]=m):m=n[12],n[13]!==a||n[14]!==m?(f=(0,h.jsx)("div",{className:a,children:m}),n[13]=a,n[14]=m,n[15]=f):f=n[15],f}const Z=(0,o.n)()(e=>({tabContainer:{display:"flex",alignItems:"center",height:"100%",padding:"0 4px",gap:4},tabTitle:{display:"flex",alignItems:"center",flex:1,overflow:"hidden",minWidth:0},tabTitleText:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:"0.8rem"},editInput:{fontSize:"0.8rem",padding:"2px 4px",color:"inherit",backgroundColor:e.palette.action.selected,borderRadius:e.shape.borderRadius,flex:1}}));function ee(e){e.stopPropagation(),e.preventDefault()}const ne=(0,c.observer)(function({params:e,api:n}){const{panelId:t,session:o}=e,{classes:s}=Z(),[a,r]=(0,i.useState)(!1),[l,c]=(0,i.useState)(!1),[d,u]=(0,i.useState)("");if(!o)return(0,h.jsx)("div",{className:s.tabContainer,children:(0,h.jsx)("span",{className:s.tabTitleText,children:"Loading..."})});const p=function(e,n){if(0===e.length)return"Empty";if(1===e.length){const t=e[0];return t.displayName||t.assemblyNames?.map(e=>n.assemblyManager.get(e)?.displayName).join(",")||"View"}return`${e.length} views`}(T(t,o),o),m=()=>{u(n.title||p),r(!0)},f=()=>{d.trim()&&n.setTitle(d.trim()),r(!1)};return(0,h.jsx)("div",{className:s.tabContainer,onMouseEnter:()=>{c(!0)},onMouseLeave:()=>{c(!1)},children:(0,h.jsx)("div",{className:s.tabTitle,children:a?(0,h.jsx)(W.Ay,{autoFocus:!0,className:s.editInput,value:d,onChange:e=>{u(e.target.value)},onFocus:e=>{e.target.select()},onBlur:f,onKeyDown:e=>{"Enter"===e.key?f():"Escape"===e.key&&r(!1)},onClick:ee}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(q.A,{className:s.tabTitleText,variant:"body2",onDoubleClick:m,children:n.title||p}),(0,h.jsx)(Q,{isHovered:l,onRename:m,onClose:()=>{n.close()}})]})})})});t(77493);const te=(0,o.n)()(()=>({container:{height:"100%",width:"100%",gridRow:"components"}}));function ie(e,n){if(e)return n?{referenceGroup:e,direction:n}:{referenceGroup:e}}const oe={jbrowseView:U},se={jbrowseTab:ne},ae=(0,c.observer)(function({session:e}){const{classes:n}=te(),t=(0,a.A)(),[o,c]=(0,i.useState)(null),u=(0,i.useRef)(new Set),p=(0,i.useRef)(!1),m=(0,i.useRef)(e);m.current=e;const f=(0,i.useCallback)(e=>{if(o){p.current=!0;try{e(o)}finally{p.current=!1}}},[o]),v=(0,i.useCallback)(n=>{if(!o)return;const t=`panel-${(0,s.w)()}`,i=n??o.activeGroup;o.addPanel({...V(t,e,"New Tab"),position:ie(i)}),(0,P.N)(e)&&e.setActivePanelId(t)},[o,e]),w=(0,i.useCallback)((n,t)=>{if(!o||!(0,P.N)(e))return;e.removeViewFromPanel(n);const i=`panel-${(0,s.w)()}`;o.addPanel({...V(i,e,"New Tab"),position:ie(o.activeGroup,t)}),e.assignViewToPanel(i,n),e.setActivePanelId(i)},[o,e]),g=(0,i.useCallback)(e=>{w(e)},[w]),x=(0,i.useCallback)(e=>{w(e,"right")},[w]),y=(0,i.useMemo)(()=>({api:o,rearrangePanels:f,addEmptyTab:v,moveViewToNewTab:g,moveViewToSplitRight:x}),[o,f,v,g,x]),N=(0,i.useCallback)(e=>{const n=m.current,t=(0,d.qL)(),i=(0,P.N)(n)?n.init:void 0;if(i&&(0,P.N)(n)){let o;u.current.clear();const a=[];function r(t,i,l){if(t){if(void 0!==t.viewIds){const r=`panel-${(0,s.w)()}`;o||(o=r);const c=i&&l?{referenceGroup:i,direction:l}:i?{referenceGroup:i}:void 0;e.addPanel({...V(r,n,"Tab"),position:c});for(const e of t.viewIds)(0,P.N)(n)&&n.assignViewToPanel(r,e),u.current.add(e);const d=e.getPanel(r)?.group;return d&&void 0!==t.size&&a.push({group:d,size:t.size}),d}if(t.children&&t.children.length>0){const e="horizontal"===t.direction?"right":"below";let n=i;for(let o=0;o<t.children.length;o++){const s=r(t.children[o],0===o?i:n,0===o?l:e);s&&(n=s)}return n}}}if(r(i,void 0,void 0),a.length>=2&&i.direction&&a.length===i.children?.length){const l=i.direction;requestAnimationFrame(()=>{const n=a.reduce((e,n)=>e+n.size,0);if(n>0)if("horizontal"===l){const t=e.width;if(t>0)for(const{group:e,size:i}of a){const o=Math.round(t*(i/n));e.api.setSize({width:o})}}else{const t=e.height;if(t>0)for(const{group:e,size:i}of a){const o=Math.round(t*(i/n));e.api.setSize({height:o})}}})}return n.setInit(void 0),void(o&&(n.setActivePanelId(o),e.getPanel(o)?.api.setActive()))}if((0,P.N)(n)){for(const c of n.panelViewAssignments.keys())n.removePanel(c);n.setDockviewLayout(void 0)}if(u.current.clear(),t&&n.views.some(e=>e.id===t.viewId)&&(0,P.N)(n)){const{type:p,viewId:f}=t,v=n.views.map(e=>e.id).filter(e=>e!==f);if(v.length>0){const g=`panel-${(0,s.w)()}`;e.addPanel(V(g,n));for(const b of v)n.assignViewToPanel(g,b),u.current.add(b)}const w=`panel-${(0,s.w)()}`,h="splitRight"===p?"right":void 0;e.addPanel({...V(w,n,"New Tab"),position:ie(e.activeGroup,h)}),n.assignViewToPanel(w,f),u.current.add(f),n.setActivePanelId(w),(0,d.Kv)()}else{const x=`panel-${(0,s.w)()}`;e.addPanel(V(x,n)),(0,P.N)(n)&&n.setActivePanelId(x)}},[]),A=(0,i.useCallback)(e=>{c(e.api),e.api.onDidActivePanelChange(e=>{e?.id&&(0,P.N)(m.current)&&m.current.setActivePanelId(e.id)}),e.api.onDidRemovePanel(e=>{if(!p.current&&(0,P.N)(m.current)){const n=m.current.getViewIdsForPanel(e.id);for(const e of n){const n=m.current.views.find(n=>n.id===e);n&&m.current.removeView(n)}m.current.removePanel(e.id)}}),e.api.onDidLayoutChange(()=>{!p.current&&(0,P.N)(m.current)&&m.current.setDockviewLayout(z(e.api.toJSON()))});const n=null!==(0,d.qL)(),t=(0,P.N)(m.current)?m.current:null,i=!n&&t?.dockviewLayout;if(i)try{p.current=!0,e.api.fromJSON(i),S(e.api,t);for(const e of t.panelViewAssignments.values())for(const n of e)u.current.add(n);if(0===e.api.panels.length)throw new Error("No panels after fromJSON restore")}catch(n){console.error("Failed to restore dockview layout:",n),N(e.api)}finally{p.current=!1}else N(e.api)},[N]);(0,i.useEffect)(()=>(0,l.autorun)(()=>{if(!o)return;const{views:n}=e,t=new Set(n.map(e=>e.id)),i=u.current;for(const t of n)if(!i.has(t.id)&&(i.add(t.id),(0,P.N)(e))){let n=e.activePanelId;if(!n||!o.getPanel(n)){const t=o.panels[0];t?n=t.id:(n=`panel-${(0,s.w)()}`,o.addPanel(V(n,e))),e.setActivePanelId(n)}e.assignViewToPanel(n,t.id)}for(const n of i)t.has(n)||(i.delete(n),(0,P.N)(e)&&e.removeViewFromPanel(n))}),[e,o]),(0,i.useEffect)(()=>{if(o&&(0,P.N)(e))return(0,l.autorun)(()=>{const{dockviewLayout:n}=e;if(!n||p.current)return;const t=z(o.toJSON());if(JSON.stringify(t)!==JSON.stringify(n)){p.current=!0;try{o.fromJSON(n),S(o,m.current),u.current.clear();for(const n of e.panelViewAssignments.values())for(const e of n)u.current.add(e)}catch(e){console.error("Failed to restore dockview layout from undo:",e)}finally{p.current=!1}}})},[e,o]);const j="dark"===t.palette.mode?"dockview-theme-dark":"dockview-theme-light";return(0,h.jsx)(d.Aw.Provider,{value:y,children:(0,h.jsx)("div",{className:`${n.container} ${j}`,children:(0,h.jsx)(r.UY,{components:oe,tabComponents:se,leftHeaderActionsComponent:b,rightHeaderActionsComponent:R,onReady:A})})})})},99904(e,n,t){t.d(n,{A:()=>H});var i=t(30128),o=t(23886),s=t(46625),a=t(64261),r=t(87377),l=t(69301),c=t(69566),d=t(10732),u=t(78770),p=t(67369),m=t(11218),f=t(20449),v=t(52189),w=t(59705),h=t(44460);const g=(0,s.n)()(e=>({icon:{color:e.palette.secondary.contrastText}})),b=(0,c.observer)(function({view:e,onClose:n,onMinimize:t}){const{classes:i}=g();return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(w.A,{"data-testid":"minimize_view",onClick:t,children:e.minimized?(0,h.jsx)(m.A,{className:i.icon,fontSize:"small"}):(0,h.jsx)(v.A,{className:i.icon,fontSize:"small"})}),(0,h.jsx)(w.A,{"data-testid":"close_view",onClick:n,children:(0,h.jsx)(f.A,{className:i.icon,fontSize:"small"})})]})});var x=t(10897),y=t(30097);const N=(0,s.n)()(e=>({input:{paddingBottom:0,paddingTop:2},inputBase:{color:e.palette.secondary.contrastText},inputRoot:{"&:hover":{backgroundColor:e.palette.secondary.light}},inputFocused:{borderColor:e.palette.primary.main,backgroundColor:e.palette.secondary.light}})),A=(0,c.observer)(function({view:e}){const{classes:n}=N(),{assemblyManager:t}=(0,o.getSession)(e);return(0,h.jsx)(y.A,{title:"Rename view",arrow:!0,children:(0,h.jsx)(x.A,{value:e.displayName||`${e.assemblyNames?.map(e=>t.get(e)?.displayName).join(",")||"Untitled view"}${e.minimized?" (minimized)":""}`,setValue:n=>{e.setDisplayName(n)},variant:"body2",classes:{input:n.input,inputBase:n.inputBase,inputRoot:n.inputRoot,inputFocused:n.inputFocused}})})});var j=t(9378),I=t(10533),k=t(1373),C=t(94759),P=t(52642),T=t(90632),V=t(4237),z=t(9614),S=t(90066),M=t(6327),E=t(25649),R=t(38817),$=t(3560);const B=(0,c.observer)(function({model:e,IconProps:n}){const t=(0,o.getSession)(e),{moveViewToNewTab:i,moveViewToSplitRight:s}=(0,E.s)(),a=t.useWorkspaces&&(0,$.N)(t),r=a?function(e,n){if(!(0,$.N)(e))return 0;for(const t of e.panelViewAssignments.values())if(t.includes(n))return t.length;return 0}(t,e.id):t.views.length,l=(n,t)=>{a?n(e.id):t(e.id)};return(0,h.jsx)(j.A,{"data-testid":"view_menu_icon",menuItems:()=>[{label:"View options",type:"subMenu",subMenu:[{label:"Copy view",icon:k.A,onClick:()=>{t.addView(e.type,function(e){const n=new Map;return function e(t){if(null==t)return t;if(Array.isArray(t))return t.map(e);if("object"==typeof t){const i={};for(const[o,s]of Object.entries(t))"id"===o&&"string"==typeof s?(n.has(s)||n.set(s,(0,R.w)()),i[o]=`${s}-${n.get(s)}`):i[o]=e(s);return i}return t}(e)}(structuredClone((0,I.getSnapshot)(e))))}},{label:"Move to new tab",icon:S.A,onClick:()=>{i(e.id),t.setUseWorkspaces(!0)}},{label:"Move to split view (right side of screen)",icon:M.A,onClick:()=>{s(e.id),t.setUseWorkspaces(!0)}},...r>2?[{label:"Move view to top",icon:V.A,onClick:()=>{l(t.moveViewToTopInPanel,t.moveViewToTop)}}]:[],...r>1?[{label:"Move view up",icon:P.A,onClick:()=>{l(t.moveViewUpInPanel,t.moveViewUp)}},{label:"Move view down",icon:C.A,onClick:()=>{l(t.moveViewDownInPanel,t.moveViewDown)}}]:[],...r>2?[{label:"Move view to bottom",icon:T.A,onClick:()=>{l(t.moveViewToBottomInPanel,t.moveViewToBottom)}}]:[]]},...e.menuItems()],children:(0,h.jsx)(z.A,{...n,fontSize:"small"})})}),L=(0,s.n)()(e=>({icon:{color:e.palette.secondary.contrastText},grow:{flexGrow:1},viewHeader:{display:"flex",height:d.VIEW_HEADER_HEIGHT,top:0,zIndex:900},viewTitle:{display:"flex",alignItems:"center"}})),F=(0,c.observer)(function({view:e,onClose:n,onMinimize:t,className:s}){const{classes:r}=L(),l=(0,i.useRef)(null),c=(0,o.getSession)(e);let d=!1;return(0,u.X)(c)&&({stickyViewHeaders:d}=c),(0,i.useEffect)(()=>{"undefined"==typeof jest&&window.self===window.top&&l.current?.scrollIntoView({block:"center"})},[]),(0,h.jsxs)("div",{ref:l,className:(0,a.cx)(r.viewHeader,s),style:{position:d?"sticky":void 0},children:[(0,h.jsx)(B,{model:e,IconProps:{className:r.icon}}),(0,h.jsx)("div",{className:r.grow}),(0,h.jsxs)("div",{className:r.viewTitle,children:[c.focusedViewId===e.id?(0,h.jsx)(p.A,{className:r.icon,fontSize:"small"}):null,(0,h.jsx)(A,{view:e})]}),(0,h.jsx)("div",{className:r.grow}),(0,h.jsx)(b,{onClose:n,onMinimize:t,view:e})]})});var G=t(51049);const D=(0,c.observer)(function({view:e,session:n}){const{pluginManager:t}=(0,o.getEnv)(n),s=t.getViewType(e.type);if(!s)throw new Error(`unknown view type ${e.type}`);const{ReactComponent:a}=s;return e.minimized?null:(0,h.jsx)(i.Suspense,{fallback:(0,h.jsx)(G.A,{variant:"h6"}),children:(0,h.jsx)(a,{model:e,session:n})})}),O=(0,s.n)()(e=>({viewContainer:{margin:e.spacing(.5),padding:`0 ${e.spacing(1)} ${e.spacing(1)}`,overflow:"clip"},focusedView:{background:e.palette.secondary.main},unfocusedView:{background:e.palette.secondary.dark}})),H=(0,c.observer)(function({view:e,session:n}){const t=(0,r.A)(),s=(0,o.useWidthSetter)(e,t.spacing(1)),{classes:c}=O();(0,i.useEffect)(()=>{function t(t){t.target instanceof Element&&s.current?.contains(t.target)&&n.setFocusedViewId(e.id)}return document.addEventListener("mousedown",t),document.addEventListener("keydown",t),()=>{document.removeEventListener("mousedown",t),document.removeEventListener("keydown",t)}},[s,n,e]);const d=n.focusedViewId===e.id?c.focusedView:c.unfocusedView,u=(0,a.cx)(c.viewContainer,d);return(0,h.jsxs)(l.A,{ref:s,elevation:12,className:u,"data-testid":`view-container-${e.id}`,children:[(0,h.jsx)(F,{view:e,onClose:()=>{n.removeView(e)},onMinimize:()=>{e.setMinimized(!e.minimized)},className:d}),(0,h.jsx)(l.A,{elevation:0,children:(0,h.jsx)(D,{view:e,session:n})})]})})}}]);
//# sourceMappingURL=6985.f84eaeae.chunk.js.map