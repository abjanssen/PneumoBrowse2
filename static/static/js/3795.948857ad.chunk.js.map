{"version":3,"file":"static/js/3795.948857ad.chunk.js","mappings":"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","sources":["../../../plugins/linear-comparative-view/src/LinearComparativeView/components/VerticalGuide.tsx","../../../plugins/linear-comparative-view/src/LinearComparativeView/components/Rubberband.tsx","../../../plugins/linear-comparative-view/src/LinearComparativeView/components/HeaderSearchBoxes.tsx","../../../plugins/linear-comparative-view/src/LinearComparativeView/components/Header.tsx","../../../plugins/linear-comparative-view/src/LinearComparativeView/components/LinearComparativeRenderArea.tsx","../../../plugins/linear-comparative-view/src/LinearComparativeView/components/LinearComparativeView.tsx","../../../plugins/linear-comparative-view/src/LinearSyntenyView/components/LinearSyntenyView.tsx"],"sourcesContent":["import React from 'react'\nimport { Tooltip, Typography } from '@mui/material'\nimport { observer } from 'mobx-react'\nimport { stringify } from '@jbrowse/core/util'\nimport { makeStyles } from 'tss-react/mui'\nimport { LinearComparativeViewModel } from '../model'\n\ntype LCV = LinearComparativeViewModel\n\nconst useStyles = makeStyles()({\n  guide: {\n    pointerEvents: 'none',\n    height: '100%',\n    width: 1,\n    position: 'absolute',\n    zIndex: 10,\n  },\n  sm: {\n    fontSize: 10,\n  },\n})\n\nconst VerticalGuide = observer(function ({\n  model,\n  coordX,\n}: {\n  model: LCV\n  coordX: number\n}) {\n  const { classes } = useStyles()\n  return (\n    <Tooltip\n      open\n      placement=\"top\"\n      title={model.views\n        .map(view => view.pxToBp(coordX))\n        .map((elt, idx) => (\n          <Typography\n            className={classes.sm}\n            key={[JSON.stringify(elt), idx].join('-')}\n          >\n            {stringify(elt, true)}\n          </Typography>\n        ))}\n      arrow\n    >\n      <div\n        className={classes.guide}\n        style={{\n          left: coordX,\n          background: 'red',\n        }}\n      />\n    </Tooltip>\n  )\n})\n\nexport default VerticalGuide\n","import React, { useRef, useEffect, useState } from 'react'\nimport { observer } from 'mobx-react'\nimport { Popover, Typography, alpha } from '@mui/material'\nimport { makeStyles } from 'tss-react/mui'\nimport { stringify } from '@jbrowse/core/util'\nimport { Menu } from '@jbrowse/core/ui'\nimport { LinearGenomeViewModel } from '@jbrowse/plugin-linear-genome-view'\n\n// locals\nimport { LinearComparativeViewModel } from '../model'\nimport VerticalGuide from './VerticalGuide'\n\ntype LCV = LinearComparativeViewModel\ntype LGV = LinearGenomeViewModel\n\nconst useStyles = makeStyles()(theme => {\n  return {\n    rubberband: {\n      height: '100%',\n      background: alpha(theme.palette.tertiary.main, 0.7),\n      position: 'absolute',\n      zIndex: 10,\n      textAlign: 'center',\n      overflow: 'hidden',\n    },\n    rubberbandControl: {\n      cursor: 'crosshair',\n      width: '100%',\n      minHeight: 8,\n    },\n    rubberbandText: {\n      color: theme.palette.tertiary.contrastText,\n    },\n    popover: {\n      mouseEvents: 'none',\n      cursor: 'crosshair',\n    },\n    paper: {\n      paddingLeft: theme.spacing(1),\n      paddingRight: theme.spacing(1),\n    },\n  }\n})\n\nconst LinearComparativeRubberband = observer(function Rubberband({\n  model,\n  ControlComponent = <div />,\n}: {\n  model: LCV\n  ControlComponent?: React.ReactElement\n}) {\n  const [startX, setStartX] = useState<number>()\n  const [currentX, setCurrentX] = useState<number>()\n\n  // clientX and clientY used for anchorPosition for menu\n  // offsetX used for calculations about width of selection\n  const [anchorPosition, setAnchorPosition] = useState<{\n    offsetX: number\n    clientX: number\n    clientY: number\n  }>()\n  const [guideX, setGuideX] = useState<number>()\n  const controlsRef = useRef<HTMLDivElement>(null)\n  const rubberbandRef = useRef<HTMLDivElement>(null)\n  const { classes } = useStyles()\n  const mouseDragging = startX !== undefined && anchorPosition === undefined\n\n  useEffect(() => {\n    function computeOffsets(offsetX: number, view: LGV) {\n      if (startX === undefined) {\n        return\n      }\n      let leftPx = startX\n      let rightPx = offsetX\n      // handles clicking and dragging to the left\n      if (rightPx < leftPx) {\n        ;[leftPx, rightPx] = [rightPx, leftPx]\n      }\n      const leftOffset = view.pxToBp(leftPx)\n      const rightOffset = view.pxToBp(rightPx)\n\n      return { leftOffset, rightOffset }\n    }\n\n    function globalMouseMove(event: MouseEvent) {\n      if (controlsRef.current && mouseDragging) {\n        const relativeX =\n          event.clientX - controlsRef.current.getBoundingClientRect().left\n        setCurrentX(relativeX)\n      }\n    }\n\n    function globalMouseUp(event: MouseEvent) {\n      if (startX !== undefined && controlsRef.current) {\n        const { clientX, clientY } = event\n        const ref = controlsRef.current\n        const offsetX = clientX - ref.getBoundingClientRect().left\n        // as stated above, store both clientX/Y and offsetX for different\n        // purposes\n        setAnchorPosition({\n          offsetX,\n          clientX,\n          clientY,\n        })\n        model.views.forEach(view => {\n          const args = computeOffsets(offsetX, view)\n          if (args) {\n            const { leftOffset, rightOffset } = args\n            view.setOffsets(leftOffset, rightOffset)\n          }\n        })\n        setGuideX(undefined)\n      }\n    }\n    if (mouseDragging) {\n      window.addEventListener('mousemove', globalMouseMove)\n      window.addEventListener('mouseup', globalMouseUp)\n      return () => {\n        window.removeEventListener('mousemove', globalMouseMove)\n        window.removeEventListener('mouseup', globalMouseUp)\n      }\n    }\n    return () => {}\n  }, [startX, mouseDragging, model])\n\n  useEffect(() => {\n    if (\n      !mouseDragging &&\n      currentX !== undefined &&\n      startX !== undefined &&\n      Math.abs(currentX - startX) <= 3\n    ) {\n      handleClose()\n    }\n  }, [mouseDragging, currentX, startX])\n\n  function mouseDown(event: React.MouseEvent<HTMLDivElement>) {\n    event.preventDefault()\n    event.stopPropagation()\n    const relativeX =\n      event.clientX -\n      (event.target as HTMLDivElement).getBoundingClientRect().left\n    setStartX(relativeX)\n    setCurrentX(relativeX)\n  }\n\n  function mouseMove(event: React.MouseEvent<HTMLDivElement>) {\n    const target = event.target as HTMLDivElement\n    setGuideX(event.clientX - target.getBoundingClientRect().left)\n  }\n\n  function mouseOut() {\n    setGuideX(undefined)\n    model.views.forEach(view => {\n      view.setOffsets(undefined, undefined)\n    })\n  }\n\n  function handleClose() {\n    setAnchorPosition(undefined)\n    setStartX(undefined)\n    setCurrentX(undefined)\n  }\n\n  const open = Boolean(anchorPosition)\n\n  function handleMenuItemClick(_: unknown, callback: () => void) {\n    callback()\n    handleClose()\n  }\n\n  if (startX === undefined) {\n    return (\n      <>\n        {guideX !== undefined ? (\n          <VerticalGuide model={model} coordX={guideX} />\n        ) : null}\n        <div\n          ref={controlsRef}\n          className={classes.rubberbandControl}\n          onMouseDown={mouseDown}\n          onMouseOut={mouseOut}\n          onMouseMove={mouseMove}\n        >\n          {ControlComponent}\n        </div>\n      </>\n    )\n  }\n\n  const right = anchorPosition ? anchorPosition.offsetX : currentX || 0\n  const left = Math.min(right, startX)\n  const width = Math.abs(right - startX)\n  const { views } = model\n  const leftBpOffset = views.map(view => view.pxToBp(left))\n  const rightBpOffset = views.map(view => view.pxToBp(left + width))\n  const numOfBpSelected = views.map(view => Math.ceil(width * view.bpPerPx))\n  return (\n    <>\n      {rubberbandRef.current ? (\n        <>\n          <Popover\n            className={classes.popover}\n            classes={{ paper: classes.paper }}\n            open\n            anchorEl={rubberbandRef.current}\n            anchorOrigin={{\n              vertical: 'top',\n              horizontal: 'left',\n            }}\n            transformOrigin={{\n              vertical: 'bottom',\n              horizontal: 'right',\n            }}\n            keepMounted\n            disableRestoreFocus\n          >\n            {leftBpOffset.map((l, idx) => (\n              <Typography key={[JSON.stringify(l), idx, 'left'].join('-')}>\n                {stringify(l, true)}\n              </Typography>\n            ))}\n          </Popover>\n          <Popover\n            className={classes.popover}\n            classes={{ paper: classes.paper }}\n            open\n            anchorEl={rubberbandRef.current}\n            anchorOrigin={{\n              vertical: 'top',\n              horizontal: 'right',\n            }}\n            transformOrigin={{\n              vertical: 'bottom',\n              horizontal: 'left',\n            }}\n            keepMounted\n            disableRestoreFocus\n          >\n            {rightBpOffset.map((l, idx) => (\n              <Typography key={[JSON.stringify(l), idx, 'right'].join('-')}>\n                {stringify(l, true)}\n              </Typography>\n            ))}\n          </Popover>\n        </>\n      ) : null}\n      <div\n        ref={rubberbandRef}\n        className={classes.rubberband}\n        style={{ left, width }}\n      >\n        <Typography variant=\"h6\" className={classes.rubberbandText}>\n          {numOfBpSelected.map((n, i) => (\n            /* biome-ignore lint/suspicious/noArrayIndexKey: */\n            <Typography key={`${n}_${i}`}>\n              {`${n.toLocaleString('en-US')}bp`}\n            </Typography>\n          ))}\n        </Typography>\n      </div>\n      <div\n        className={classes.rubberbandControl}\n        ref={controlsRef}\n        onMouseDown={mouseDown}\n        onMouseOut={mouseOut}\n        onMouseMove={mouseMove}\n      >\n        {ControlComponent}\n      </div>\n      {anchorPosition ? (\n        <Menu\n          anchorReference=\"anchorPosition\"\n          anchorPosition={{\n            left: anchorPosition.clientX,\n            top: anchorPosition.clientY,\n          }}\n          onMenuItemClick={handleMenuItemClick}\n          open={open}\n          onClose={handleClose}\n          menuItems={model.rubberBandMenuItems()}\n        />\n      ) : null}\n    </>\n  )\n})\n\nexport default LinearComparativeRubberband\n","import React from 'react'\nimport { observer } from 'mobx-react'\nimport { Typography } from '@mui/material'\nimport { makeStyles } from 'tss-react/mui'\n// jbrowse\nimport {\n  LinearGenomeViewModel,\n  SearchBox,\n} from '@jbrowse/plugin-linear-genome-view'\nimport { toLocale } from '@jbrowse/core/util'\n\nconst useStyles = makeStyles()(() => ({\n  bp: {\n    display: 'flex',\n    alignItems: 'center',\n    marginLeft: 10,\n  },\n  searchBox: {\n    display: 'flex',\n  },\n}))\n\nconst HeaderSearchBoxes = observer(function ({\n  view,\n}: {\n  view: LinearGenomeViewModel\n}) {\n  const { classes } = useStyles()\n  const { assemblyNames, coarseTotalBp } = view\n  return (\n    <span className={classes.searchBox}>\n      <SearchBox model={view} showHelp={false} />\n      <Typography variant=\"body2\" color=\"textSecondary\" className={classes.bp}>\n        {assemblyNames.join(',')} {toLocale(Math.round(coarseTotalBp))} bp\n      </Typography>\n    </span>\n  )\n})\n\nexport default HeaderSearchBoxes\n","import React, { useState } from 'react'\nimport { observer } from 'mobx-react'\nimport { FormGroup } from '@mui/material'\nimport { makeStyles } from 'tss-react/mui'\nimport CascadingMenuButton from '@jbrowse/core/ui/CascadingMenuButton'\n\n// icons\nimport MoreVertIcon from '@mui/icons-material/MoreVert'\nimport SearchIcon from '@mui/icons-material/Search'\nimport { TrackSelector as TrackSelectorIcon } from '@jbrowse/core/ui/Icons'\n\n// locals\nimport { LinearComparativeViewModel } from '../model'\nimport HeaderSearchBoxes from './HeaderSearchBoxes'\n\nconst useStyles = makeStyles()({\n  inline: {\n    display: 'inline-flex',\n  },\n})\n\nconst Header = observer(function ({\n  model,\n}: {\n  model: LinearComparativeViewModel\n}) {\n  const { classes } = useStyles()\n  const { views } = model\n  const [showSearchBoxes, setShowSearchBoxes] = useState(views.length <= 3)\n  const [sideBySide, setSideBySide] = useState(views.length <= 3)\n  return (\n    <FormGroup row>\n      <CascadingMenuButton\n        menuItems={[\n          {\n            label: 'Synteny track selectors',\n            type: 'subMenu',\n            subMenu: views.slice(0, -1).map((_, idx) => ({\n              label: `Row ${idx + 1}->${idx + 2} (${views[idx]!.assemblyNames.join(',')}->${views[idx + 1]!.assemblyNames.join(',')})`,\n              onClick: () => {\n                model.activateTrackSelector(idx)\n              },\n            })),\n          },\n\n          {\n            label: 'Row track selectors',\n            type: 'subMenu',\n            subMenu: views.map((view, idx) => ({\n              label: `Row ${idx + 1} track selector (${view.assemblyNames.join(',')})`,\n              onClick: () => view.activateTrackSelector(),\n            })),\n          },\n        ]}\n      >\n        <TrackSelectorIcon />\n      </CascadingMenuButton>\n      <CascadingMenuButton\n        menuItems={[\n          {\n            label: 'Row view menus',\n            type: 'subMenu',\n            subMenu: views.map((view, idx) => ({\n              label: `View ${idx + 1} Menu`,\n              subMenu: view.menuItems(),\n            })),\n          },\n          ...model.headerMenuItems(),\n        ]}\n      >\n        <MoreVertIcon />\n      </CascadingMenuButton>\n      <CascadingMenuButton\n        menuItems={[\n          {\n            label: 'Show search boxes',\n            type: 'checkbox',\n            checked: showSearchBoxes,\n            onClick: () => {\n              setShowSearchBoxes(!showSearchBoxes)\n            },\n          },\n\n          {\n            label: 'Orientation - Side-by-side',\n            type: 'radio',\n            checked: sideBySide,\n            onClick: () => {\n              setSideBySide(!sideBySide)\n            },\n          },\n          {\n            label: 'Orientation - Vertical',\n            type: 'radio',\n            checked: !sideBySide,\n            onClick: () => {\n              setSideBySide(!sideBySide)\n            },\n          },\n        ]}\n      >\n        <SearchIcon />\n      </CascadingMenuButton>\n\n      {showSearchBoxes ? (\n        <span className={sideBySide ? classes.inline : undefined}>\n          {views.map(view => (\n            <HeaderSearchBoxes key={view.id} view={view} />\n          ))}\n        </span>\n      ) : null}\n    </FormGroup>\n  )\n})\nexport default Header\n","import React from 'react'\nimport { makeStyles } from 'tss-react/mui'\nimport { observer } from 'mobx-react'\nimport { getEnv } from '@jbrowse/core/util'\nimport { ResizeHandle } from '@jbrowse/core/ui'\n\n// locals\nimport { LinearComparativeViewModel } from '../model'\nimport { getConf } from '@jbrowse/core/configuration'\nimport { LinearGenomeViewModel } from '@jbrowse/plugin-linear-genome-view'\n\nconst useStyles = makeStyles()({\n  container: {\n    display: 'grid',\n  },\n  overlay: {\n    zIndex: 100,\n    gridArea: '1/1',\n  },\n  resizeHandle: {\n    height: 4,\n    background: '#ccc',\n  },\n})\n\nfunction View({ view }: { view: LinearGenomeViewModel }) {\n  const { pluginManager } = getEnv(view)\n  const { ReactComponent } = pluginManager.getViewType(view.type)!\n  return <ReactComponent model={view} />\n}\n\nconst LinearComparativeRenderArea = observer(function ({\n  model,\n}: {\n  model: LinearComparativeViewModel\n}) {\n  const { classes } = useStyles()\n  const { views, levels } = model\n  const RenderList = [\n    <View key={views[0]!.id} view={views[0]!} />,\n  ] as React.ReactNode[]\n  for (let i = 1; i < views.length; i++) {\n    const view = views[i]!\n    const level = levels[i - 1]\n    RenderList.push(\n      <React.Fragment key={view.id}>\n        <div className={classes.container}>\n          <Overlays model={model} level={i - 1} />\n        </div>\n        <ResizeHandle\n          onDrag={n => level?.setHeight(level.height + n)}\n          className={classes.resizeHandle}\n        />\n        <View view={view} />\n      </React.Fragment>,\n    )\n  }\n  return <div className={classes.container}>{RenderList}</div>\n})\n\nconst Overlays = observer(function ({\n  model,\n  level,\n}: {\n  model: LinearComparativeViewModel\n  level: number\n}) {\n  const { classes } = useStyles()\n  return (\n    <>\n      {model.levels[level]?.tracks.map(track => {\n        const [display] = track.displays\n        const { RenderingComponent } = display\n        const trackId = getConf(track, 'trackId')\n        return RenderingComponent ? (\n          <div\n            className={classes.overlay}\n            key={trackId}\n            style={{\n              height: display.height,\n              overflow: 'hidden',\n            }}\n          >\n            <RenderingComponent model={display} />\n          </div>\n        ) : null\n      })}\n    </>\n  )\n})\n\nexport default LinearComparativeRenderArea\n","import React from 'react'\nimport { makeStyles } from 'tss-react/mui'\nimport { observer } from 'mobx-react'\n\n// locals\nimport { LinearComparativeViewModel } from '../model'\nimport Rubberband from './Rubberband'\nimport Header from './Header'\nimport LinearComparativeRenderArea from './LinearComparativeRenderArea'\n\nconst useStyles = makeStyles()(theme => ({\n  // this helps keep the vertical guide inside the parent view container,\n  // similar style exists in the single LGV's trackscontainer\n  rubberbandContainer: {\n    position: 'relative',\n    overflow: 'hidden',\n  },\n\n  rubberbandDiv: {\n    width: '100%',\n    background: theme.palette.action.disabledBackground,\n    height: 15,\n    '&:hover': {\n      background: theme.palette.action.selected,\n    },\n  },\n}))\n\nconst LinearComparativeView = observer(function ({\n  model,\n}: {\n  model: LinearComparativeViewModel\n}) {\n  const { classes } = useStyles()\n\n  return (\n    <div className={classes.rubberbandContainer}>\n      <Header model={model} />\n      <Rubberband\n        model={model}\n        ControlComponent={<div className={classes.rubberbandDiv} />}\n      />\n      <LinearComparativeRenderArea model={model} />\n    </div>\n  )\n})\n\nexport default LinearComparativeView\n","import React, { lazy } from 'react'\nimport { observer } from 'mobx-react'\n\n// locals\nimport LinearComparativeViewComponent from '../../LinearComparativeView/components/LinearComparativeView'\nimport { LinearSyntenyViewModel } from '../model'\n\nconst LinearSyntenyImportForm = lazy(\n  () => import('./ImportForm/LinearSyntenyImportForm'),\n)\n\ntype LSV = LinearSyntenyViewModel\n\nconst LinearSyntenyView = observer(function ({ model }: { model: LSV }) {\n  return !model.initialized ? (\n    <LinearSyntenyImportForm model={model} />\n  ) : (\n    <LinearComparativeViewComponent model={model} />\n  )\n})\n\nexport default LinearSyntenyView\n"],"names":["useStyles","makeStyles","guide","pointerEvents","height","width","position","zIndex","sm","fontSize","observer","model","coordX","classes","React","Tooltip","open","placement","title","views","map","view","pxToBp","elt","idx","Typography","className","key","JSON","stringify","join","arrow","style","left","background","theme","rubberband","alpha","palette","tertiary","main","textAlign","overflow","rubberbandControl","cursor","minHeight","rubberbandText","color","contrastText","popover","mouseEvents","paper","paddingLeft","spacing","paddingRight","ControlComponent","startX","setStartX","useState","currentX","setCurrentX","anchorPosition","setAnchorPosition","guideX","setGuideX","controlsRef","useRef","rubberbandRef","mouseDragging","undefined","mouseDown","event","preventDefault","stopPropagation","relativeX","clientX","target","getBoundingClientRect","mouseMove","mouseOut","forEach","setOffsets","handleClose","useEffect","globalMouseMove","current","globalMouseUp","clientY","offsetX","args","leftPx","rightPx","leftOffset","rightOffset","computeOffsets","window","addEventListener","removeEventListener","Math","abs","Boolean","VerticalGuide","ref","onMouseDown","onMouseOut","onMouseMove","right","min","leftBpOffset","rightBpOffset","numOfBpSelected","ceil","bpPerPx","Popover","anchorEl","anchorOrigin","vertical","horizontal","transformOrigin","keepMounted","disableRestoreFocus","l","variant","n","i","toLocaleString","Menu","anchorReference","top","onMenuItemClick","_","callback","onClose","menuItems","rubberBandMenuItems","bp","display","alignItems","marginLeft","searchBox","assemblyNames","coarseTotalBp","SearchBox","showHelp","toLocale","round","inline","showSearchBoxes","setShowSearchBoxes","length","sideBySide","setSideBySide","FormGroup","row","CascadingMenuButton","label","type","subMenu","slice","onClick","activateTrackSelector","TrackSelectorIcon","headerMenuItems","MoreVertIcon","checked","SearchIcon","HeaderSearchBoxes","id","container","overlay","gridArea","resizeHandle","View","pluginManager","getEnv","ReactComponent","getViewType","LinearComparativeRenderArea","levels","RenderList","level","push","Overlays","ResizeHandle","onDrag","setHeight","tracks","track","displays","RenderingComponent","trackId","getConf","rubberbandContainer","rubberbandDiv","action","disabledBackground","selected","Header","Rubberband","LinearSyntenyImportForm","lazy","initialized","LinearComparativeViewComponent"],"sourceRoot":""}